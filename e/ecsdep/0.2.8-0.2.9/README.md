# Comparing `tmp/ecsdep-0.2.8-py3-none-any.whl.zip` & `tmp/ecsdep-0.2.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,15 +1,15 @@
-Zip file size: 31306 bytes, number of entries: 34
--rw-r--r--  2.0 unx       22 b- defN 23-Mar-24 06:20 ecsdep/__init__.py
+Zip file size: 31518 bytes, number of entries: 34
+-rw-r--r--  2.0 unx       22 b- defN 23-Mar-25 11:58 ecsdep/__init__.py
 -rw-r--r--  2.0 unx     4513 b- defN 23-Feb-09 05:29 ecsdep/ecsdep.py
 -rw-r--r--  2.0 unx     8847 b- defN 23-Feb-10 06:27 ecsdep/tasks.py
--rw-r--r--  2.0 unx    14363 b- defN 23-Mar-23 11:55 ecsdep/terraform.py
+-rw-r--r--  2.0 unx    14363 b- defN 23-Mar-25 11:50 ecsdep/terraform.py
 -rw-r--r--  2.0 unx     2389 b- defN 22-Oct-08 11:09 ecsdep/templates/aws-policy.json
--rw-r--r--  2.0 unx     2357 b- defN 23-Feb-09 05:21 ecsdep/templates/ecs-cluster/auto-scaling.tf
--rw-r--r--  2.0 unx     1069 b- defN 23-Mar-23 13:29 ecsdep/templates/ecs-cluster/declares.tf
+-rw-r--r--  2.0 unx     3116 b- defN 23-Mar-25 11:55 ecsdep/templates/ecs-cluster/auto-scaling.tf
+-rw-r--r--  2.0 unx     1069 b- defN 23-Mar-25 11:55 ecsdep/templates/ecs-cluster/declares.tf
 -rw-rw-r--  2.0 unx      992 b- defN 23-Feb-11 09:38 ecsdep/templates/ecs-cluster/declares.tfignore
 -rw-rw-r--  2.0 unx      149 b- defN 22-Dec-02 09:02 ecsdep/templates/ecs-cluster/ecs-cluster.tf
 -rw-r--r--  2.0 unx     1954 b- defN 23-Feb-10 13:43 ecsdep/templates/ecs-cluster/launch-configuration.tf
 -rw-r--r--  2.0 unx     1928 b- defN 23-Feb-09 05:21 ecsdep/templates/ecs-cluster/load-balancer.tf
 -rw-r--r--  2.0 unx     1680 b- defN 23-Feb-10 13:47 ecsdep/templates/ecs-cluster/nat.tf
 -rw-rw-r--  2.0 unx     4364 b- defN 22-Oct-12 10:48 ecsdep/templates/ecs-cluster/public-s3.tf
 -rw-rw-r--  2.0 unx     3234 b- defN 23-Feb-11 09:38 ecsdep/templates/ecs-cluster/roles.tf
@@ -23,14 +23,14 @@
 -rw-r--r--  2.0 unx      366 b- defN 22-Oct-08 11:09 ecsdep/templates/ecs-cluster/policies/ecs-secret-read.json
 -rw-r--r--  2.0 unx      232 b- defN 22-Oct-08 11:09 ecsdep/templates/ecs-cluster/policies/ecs-service-auto-scaling-role.json
 -rw-r--r--  2.0 unx      244 b- defN 23-Feb-11 06:31 ecsdep/templates/ecs-cluster/policies/ecs-task-role.json
 -rw-r--r--  2.0 unx     1207 b- defN 23-Feb-11 06:35 ecsdep/templates/task-def/data.tf
 -rw-r--r--  2.0 unx     1559 b- defN 23-Mar-24 06:17 ecsdep/templates/task-def/declares.tf
 -rw-r--r--  2.0 unx     1346 b- defN 23-Mar-23 11:51 ecsdep/templates/task-def/declares.tfignore
 -rw-r--r--  2.0 unx     6338 b- defN 23-Mar-24 06:20 ecsdep/templates/task-def/service.tf
--rw-rw-r--  2.0 unx     1083 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/LICENSE
--rw-r--r--  2.0 unx    14247 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/WHEEL
--rw-r--r--  2.0 unx       47 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        7 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3207 b- defN 23-Mar-24 06:21 ecsdep-0.2.8.dist-info/RECORD
-34 files, 85943 bytes uncompressed, 26024 bytes compressed:  69.7%
+-rw-rw-r--  2.0 unx     1083 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/LICENSE
+-rw-r--r--  2.0 unx    14338 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/WHEEL
+-rw-r--r--  2.0 unx       47 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        7 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3207 b- defN 23-Mar-25 11:59 ecsdep-0.2.9.dist-info/RECORD
+34 files, 86793 bytes uncompressed, 26236 bytes compressed:  69.8%
```

## zipnote {}

```diff
@@ -78,26 +78,26 @@
 
 Filename: ecsdep/templates/task-def/declares.tfignore
 Comment: 
 
 Filename: ecsdep/templates/task-def/service.tf
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/LICENSE
+Filename: ecsdep-0.2.9.dist-info/LICENSE
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/METADATA
+Filename: ecsdep-0.2.9.dist-info/METADATA
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/WHEEL
+Filename: ecsdep-0.2.9.dist-info/WHEEL
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/entry_points.txt
+Filename: ecsdep-0.2.9.dist-info/entry_points.txt
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/top_level.txt
+Filename: ecsdep-0.2.9.dist-info/top_level.txt
 Comment: 
 
-Filename: ecsdep-0.2.8.dist-info/RECORD
+Filename: ecsdep-0.2.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ecsdep/__init__.py

```diff
@@ -1 +1 @@
-__version__ = "0.2.8"
+__version__ = "0.2.9"
```

## ecsdep/templates/ecs-cluster/auto-scaling.tf

```diff
@@ -1,10 +1,9 @@
 # cluster auto scaling --------------------------------
 resource "aws_autoscaling_group" "ecs_cluster" {
-    count = var.autoscale.cpu > 0 || var.autoscale.memory > 0 ? 1 : 0
     vpc_zone_identifier  = var.vpc.cidr_block == "" ? toset(data.aws_subnets.default.ids) : [ for each in aws_subnet.public: each.id ]
     name                 = "ecs-${var.cluster_name}"
     min_size             = var.autoscale ["min"]
     max_size             = var.autoscale ["max"]
     desired_capacity     = var.autoscale ["desired"]
     health_check_type    = "EC2"
     # launch_configuration = aws_launch_configuration.host.name
@@ -27,15 +26,15 @@
 }
 
 resource "aws_autoscaling_policy" "memory-reservation" {
   count = var.autoscale.memory > 0 ? 1 : 0
   name                   = "${var.cluster_name}-memory-reservation"
   policy_type            = "TargetTrackingScaling"
   adjustment_type        = "ChangeInCapacity"
-  autoscaling_group_name = aws_autoscaling_group.ecs_cluster [count.index].name
+  autoscaling_group_name = aws_autoscaling_group.ecs_cluster.name
 
   target_tracking_configuration {
     customized_metric_specification {
       metric_dimension {
         name  = "ClusterName"
         value = var.cluster_name
       }
@@ -46,27 +45,52 @@
     }
     target_value = var.autoscale.memory
   }
 }
 
 # policy for service addition ---------------------------
 resource "aws_autoscaling_policy" "cpu-tracking" {
-  count = var.autoscale.cpu > 0 ? 1 : 0
   name                      = "${var.cluster_name}-cpu-tracking"
   policy_type               = "TargetTrackingScaling"
   adjustment_type           = "ChangeInCapacity"
-  autoscaling_group_name    = aws_autoscaling_group.ecs_cluster [count.index].name
+  autoscaling_group_name    = aws_autoscaling_group.ecs_cluster.name
 
   target_tracking_configuration {
     customized_metric_specification {
       metric_dimension {
         name  = "ClusterName"
         value = var.cluster_name
       }
 
       metric_name = "CPUReservation"
       namespace   = "AWS/ECS"
       statistic   = "Average"
     }
     target_value = var.autoscale.cpu
   }
-}
+}
+
+resource "aws_ecs_capacity_provider" "provider" {
+  name = "${var.cluster_name}-capacity-provider"
+  auto_scaling_group_provider {
+    auto_scaling_group_arn = aws_autoscaling_group.ecs_cluster.arn
+
+    managed_termination_protection = var.autoscale.cpu == 0 && var.autoscale.memory == 0 ? "ENABLED" : "DISABLED"
+    managed_scaling {
+      maximum_scaling_step_size = 1000
+      minimum_scaling_step_size = 1
+      status                    = var.autoscale.cpu == 0 && var.autoscale.memory == 0 ? "ENABLED" : "DISABLED"
+      target_capacity           = 100
+    }
+  }
+}
+
+resource "aws_ecs_cluster_capacity_providers" "providers" {
+  cluster_name = var.cluster_name
+  capacity_providers = [aws_ecs_capacity_provider.provider.name]
+
+  default_capacity_provider_strategy {
+    base              = 1
+    weight            = 100
+    capacity_provider = aws_ecs_capacity_provider.provider.name
+  }
+}
```

## Comparing `ecsdep-0.2.8.dist-info/LICENSE` & `ecsdep-0.2.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ecsdep-0.2.8.dist-info/METADATA` & `ecsdep-0.2.9.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ecsdep
-Version: 0.2.8
+Version: 0.2.9
 Summary: AWS ECS Deployment Tool With Terraform
 Home-page: https://gitlab.com/skitai/ecsdep
 Author: Hans Roh
 Author-email: hansroh@gmail.com
 License: MIT
 Download-URL: https://pypi.python.org/pypi/ecsdep
 Platform: posix
@@ -274,14 +274,16 @@
 #### Cluster-Level Auto Scaling
 `autoscaling.cpu` mean that your cpu reservations of your containers
 reaches 60% of all cluster instances's CPU units, scale out ECS instances.
 If 0, nothing will be happen.
 
 `autoscaling.memory` is same.
 
+If both `autoscaling.cpu` and `autoscaling.memory` is `0`, ECS will manage automatically.
+
 #### Instance Type
 If you specified `x-ecs-gpus`, `instance-type` must have GPU.
 
 #### VPC
 If you consider VPC peering, choose carefully `cidr_block`.
 If you would like to create default VPC, just remove `vpc` key.
```

## Comparing `ecsdep-0.2.8.dist-info/RECORD` & `ecsdep-0.2.9.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,13 +1,13 @@
-ecsdep/__init__.py,sha256=G6Dbxq2ws-1ZAXwDD8q0KWueYtso_Y6Uyvtj8sRWsPI,22
+ecsdep/__init__.py,sha256=F8OVhAhMXSkvvXYgZtbPn2SG1AQC3joK4yu-FrHt81Y,22
 ecsdep/ecsdep.py,sha256=o-S3ZUClS-OB2EymhgSg7GpoEiDjGpfTJypA7cbs9gU,4513
 ecsdep/tasks.py,sha256=iYZQNsxFz3YxXpg3LDrLkTVJsDe9HXv8IB_22eZKGyo,8847
 ecsdep/terraform.py,sha256=SnqT-4vMErmvnlKETd_6-ybieUyJGzGdwOCBPRKkZzY,14363
 ecsdep/templates/aws-policy.json,sha256=HzzctG2ra2tOG6J_DliaQoupTPr_y-JvMec2KiopyN0,2389
-ecsdep/templates/ecs-cluster/auto-scaling.tf,sha256=ESIDGbOfUZBpmGi3qKbwhwhaf7n9FA5z7pzK__deIwM,2357
+ecsdep/templates/ecs-cluster/auto-scaling.tf,sha256=cDTl0c2Q7rOoLnvgn4x2gfuZY-71zVCsIXOmVfde_Xk,3116
 ecsdep/templates/ecs-cluster/declares.tf,sha256=3BEH1PzrBvGzMDeUTX--ZPezYvps5qAibFEQamNl6cI,1069
 ecsdep/templates/ecs-cluster/declares.tfignore,sha256=I5sWatbUfmnmAfWXluzqRJP1B6uwHpPL8TcUpQlhx3g,992
 ecsdep/templates/ecs-cluster/ecs-cluster.tf,sha256=5-J85qybNApDphjYuWopeqzSFA_XH2BqHi_l9K3ObCM,149
 ecsdep/templates/ecs-cluster/launch-configuration.tf,sha256=YLfRZWBAZAe98Rsbf3qqSf_hQYa84sECt6vOnwM4scM,1954
 ecsdep/templates/ecs-cluster/load-balancer.tf,sha256=OCyyNXJ8gjCIzz3IMC4lT1xYqm-4lGJGH6eMTpo34Js,1928
 ecsdep/templates/ecs-cluster/nat.tf,sha256=ZHEZAWw4y60DwrJsmTI-Nwz-IbOPp7yjdWFFmNsPIk4,1680
 ecsdep/templates/ecs-cluster/public-s3.tf,sha256=fDV6KEPS0osOC8-nb4oP-QAQM7wodbx5nUB7sXAAB64,4364
@@ -22,13 +22,13 @@
 ecsdep/templates/ecs-cluster/policies/ecs-secret-read.json,sha256=2SG7ZPVCJGI574B7SYAMmMAvQZorkddpYBXSSL90XWM,366
 ecsdep/templates/ecs-cluster/policies/ecs-service-auto-scaling-role.json,sha256=U_xFaRNU28cioeF-dF5nbrlXQUy1l1VmQ_N9nBE6j6E,232
 ecsdep/templates/ecs-cluster/policies/ecs-task-role.json,sha256=U8pK2q8ul8d96lXXRmMBTFDnOKZfTmhUCumNyrXoT78,244
 ecsdep/templates/task-def/data.tf,sha256=jwukr0_FzmDwHzEaguSSmMBslCb_f9wS1eb1oY4FN2o,1207
 ecsdep/templates/task-def/declares.tf,sha256=4kYvwJWK_2oGOladUuwQAcFH1MeIalEEa2t3v2AlO1Q,1559
 ecsdep/templates/task-def/declares.tfignore,sha256=yLIbkEGSX6lXvA5Hc2_qUPA1oPnQe95iO_NAfhQZbvI,1346
 ecsdep/templates/task-def/service.tf,sha256=KDUZmKsP7jbpKh0JF5g5GDxwgjTrs2R5GrYcx-V8Mao,6338
-ecsdep-0.2.8.dist-info/LICENSE,sha256=nYyDKwqgAVpGOZ_lQZQpr8HkIL8toFQf6ca7ZgvjowE,1083
-ecsdep-0.2.8.dist-info/METADATA,sha256=E1oNW--OpOrX0WF8hxETwIXLLyzCpvm3XktULHHDMC0,14247
-ecsdep-0.2.8.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-ecsdep-0.2.8.dist-info/entry_points.txt,sha256=w-A5EmUDkyFYdntu7q6CQvanQOEVVu4iy937IBnVnFs,47
-ecsdep-0.2.8.dist-info/top_level.txt,sha256=FwEmqm8Z2GVhqyKU-ANVyNXcE8WqGgALfvzHwozyWgI,7
-ecsdep-0.2.8.dist-info/RECORD,,
+ecsdep-0.2.9.dist-info/LICENSE,sha256=nYyDKwqgAVpGOZ_lQZQpr8HkIL8toFQf6ca7ZgvjowE,1083
+ecsdep-0.2.9.dist-info/METADATA,sha256=kj_AkhE6alKavOhSyBvtO_1Wd7urHEfCQzSaWAOZCZc,14338
+ecsdep-0.2.9.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+ecsdep-0.2.9.dist-info/entry_points.txt,sha256=w-A5EmUDkyFYdntu7q6CQvanQOEVVu4iy937IBnVnFs,47
+ecsdep-0.2.9.dist-info/top_level.txt,sha256=FwEmqm8Z2GVhqyKU-ANVyNXcE8WqGgALfvzHwozyWgI,7
+ecsdep-0.2.9.dist-info/RECORD,,
```

