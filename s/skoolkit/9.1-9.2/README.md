# Comparing `tmp/skoolkit-9.1.tar.gz` & `tmp/skoolkit-9.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "skoolkit-9.1.tar", last modified: Sat Feb  3 12:49:52 2024, max compression
+gzip compressed data, was "skoolkit-9.2.tar", last modified: Sat May 11 12:10:04 2024, max compression
```

## Comparing `skoolkit-9.1.tar` & `skoolkit-9.2.tar`

### file list

```diff
@@ -1,242 +1,262 @@
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.720501 skoolkit-9.1/
--rw-r--r--   0 rjd       (1000) rjd       (1000)    35147 2010-03-03 00:59:14.000000 skoolkit-9.1/COPYING
--rw-r--r--   0 rjd       (1000) rjd       (1000)       64 2014-12-31 18:28:35.000000 skoolkit-9.1/MANIFEST.in
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6898 2024-02-03 12:49:52.720501 skoolkit-9.1/PKG-INFO
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.1/bin2sna.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      892 2017-01-12 22:31:18.000000 skoolkit-9.1/bin2tap.py
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.700501 skoolkit-9.1/docs/
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.704501 skoolkit-9.1/docs/_sources/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4165 2022-08-12 20:16:11.000000 skoolkit-9.1/docs/_sources/asm-templates.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    52371 2023-12-08 20:59:57.000000 skoolkit-9.1/docs/_sources/asm.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2862 2019-05-14 21:07:25.000000 skoolkit-9.1/docs/_sources/assemblers.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    26795 2024-02-03 12:29:13.000000 skoolkit-9.1/docs/_sources/changelog.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3491 2015-11-20 12:50:08.000000 skoolkit-9.1/docs/_sources/changelog1.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    11437 2019-07-08 20:36:08.000000 skoolkit-9.1/docs/_sources/changelog2.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    11778 2019-07-08 20:36:08.000000 skoolkit-9.1/docs/_sources/changelog3.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7233 2020-10-07 20:20:25.000000 skoolkit-9.1/docs/_sources/changelog4.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6124 2020-10-07 20:20:25.000000 skoolkit-9.1/docs/_sources/changelog5.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9323 2020-10-07 20:20:25.000000 skoolkit-9.1/docs/_sources/changelog6.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6307 2020-10-07 20:20:25.000000 skoolkit-9.1/docs/_sources/changelog7.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)   101621 2024-01-29 21:03:53.000000 skoolkit-9.1/docs/_sources/commands.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13596 2023-09-02 14:50:16.000000 skoolkit-9.1/docs/_sources/components.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    33115 2023-07-09 19:16:16.000000 skoolkit-9.1/docs/_sources/control-files.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13398 2022-08-18 23:11:24.000000 skoolkit-9.1/docs/_sources/diy.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    17202 2024-01-10 20:58:32.000000 skoolkit-9.1/docs/_sources/extending.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    27424 2022-08-29 20:54:25.000000 skoolkit-9.1/docs/_sources/html-templates.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)      426 2019-08-09 20:57:13.000000 skoolkit-9.1/docs/_sources/index.rst.txt
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.704501 skoolkit-9.1/docs/_sources/man/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4350 2023-12-18 20:55:02.000000 skoolkit-9.1/docs/_sources/man/bin2sna.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4590 2023-12-07 21:17:46.000000 skoolkit-9.1/docs/_sources/man/bin2tap.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7680 2021-05-18 21:36:14.000000 skoolkit-9.1/docs/_sources/man/skool2asm.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1638 2023-11-24 18:29:42.000000 skoolkit-9.1/docs/_sources/man/skool2bin.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3065 2021-05-18 21:36:14.000000 skoolkit-9.1/docs/_sources/man/skool2ctl.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7266 2022-08-08 18:01:45.000000 skoolkit-9.1/docs/_sources/man/skool2html.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3388 2021-05-18 21:36:14.000000 skoolkit-9.1/docs/_sources/man/sna2ctl.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2297 2019-07-08 21:10:05.000000 skoolkit-9.1/docs/_sources/man/sna2img.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6538 2022-09-07 19:43:47.000000 skoolkit-9.1/docs/_sources/man/sna2skool.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4353 2021-05-18 21:36:14.000000 skoolkit-9.1/docs/_sources/man/snapinfo.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2682 2023-12-19 20:40:37.000000 skoolkit-9.1/docs/_sources/man/snapmod.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    21094 2024-01-24 21:00:49.000000 skoolkit-9.1/docs/_sources/man/tap2sna.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)      714 2023-08-28 20:42:22.000000 skoolkit-9.1/docs/_sources/man/tapinfo.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6013 2024-01-24 21:12:05.000000 skoolkit-9.1/docs/_sources/man/trace.py.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3726 2023-10-25 20:20:23.000000 skoolkit-9.1/docs/_sources/migration.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3345 2023-12-08 20:27:51.000000 skoolkit-9.1/docs/_sources/parsing.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    51725 2023-12-06 20:21:10.000000 skoolkit-9.1/docs/_sources/ref-files.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)    11571 2020-03-08 12:27:23.000000 skoolkit-9.1/docs/_sources/skool-files.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)   117913 2024-01-25 21:40:41.000000 skoolkit-9.1/docs/_sources/skool-macros.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1489 2023-07-15 18:04:01.000000 skoolkit-9.1/docs/_sources/usage.rst.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5129 2024-02-03 12:23:07.000000 skoolkit-9.1/docs/_sources/whatis.rst.txt
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.704501 skoolkit-9.1/docs/_static/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4418 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/_sphinx_javascript_frameworks_compat.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)    14809 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/basic.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4302 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/classic.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)      368 2021-09-12 11:18:57.000000 skoolkit-9.1/docs/_static/custom.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4472 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/doctools.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)      418 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/documentation_options.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)      286 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/file.png
--rw-r--r--   0 rjd       (1000) rjd       (1000)   289782 2022-08-29 08:27:59.000000 skoolkit-9.1/docs/_static/jquery.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4758 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/language_data.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/minus.png
--rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/plus.png
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4846 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/pygments.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)    18747 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/searchtools.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2540 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/_static/sidebar.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5097 2023-03-29 08:31:27.000000 skoolkit-9.1/docs/_static/sphinx_highlight.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)    68416 2022-06-02 12:39:04.000000 skoolkit-9.1/docs/_static/underscore.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)    15355 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/asm-templates.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)   111241 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/asm.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    10861 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/assemblers.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    72982 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/changelog.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13275 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/changelog1.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    31637 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/changelog2.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    31918 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/changelog3.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    21686 2024-02-03 12:32:49.000000 skoolkit-9.1/docs/changelog4.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    20003 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/changelog5.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    28756 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/changelog6.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    19770 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/changelog7.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)   162754 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/commands.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    65027 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/components.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    70718 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/control-files.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    25010 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/diy.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    83802 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/extending.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3021 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/genindex.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    65964 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/html-templates.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6483 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/index.html
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.708501 skoolkit-9.1/docs/man/
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16222 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/bin2sna.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    12410 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/bin2tap.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    24146 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/skool2asm.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8421 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/skool2bin.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    12094 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/skool2ctl.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    23412 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/skool2html.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    11676 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/sna2ctl.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9077 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/sna2img.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    21329 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/sna2skool.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13525 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/snapinfo.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13261 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/snapmod.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    55108 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/tap2sna.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6241 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/tapinfo.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    19871 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/man/trace.py.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    14279 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/migration.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    12529 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/parsing.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)   103747 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/ref-files.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3324 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/search.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    97197 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/searchindex.js
--rw-r--r--   0 rjd       (1000) rjd       (1000)    25247 2024-02-03 12:32:50.000000 skoolkit-9.1/docs/skool-files.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)   231307 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/skool-macros.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7270 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/usage.html
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13253 2024-02-03 12:32:51.000000 skoolkit-9.1/docs/whatis.html
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.708501 skoolkit-9.1/examples/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2454 2015-12-04 12:16:10.000000 skoolkit-9.1/examples/hungry_horace.ctl
--rw-r--r--   0 rjd       (1000) rjd       (1000)      696 2016-01-09 11:54:00.000000 skoolkit-9.1/examples/hungry_horace.ref
--rw-r--r--   0 rjd       (1000) rjd       (1000)      199 2023-06-30 20:12:20.000000 skoolkit-9.1/examples/hungry_horace.t2s
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5975 2024-02-03 12:23:41.000000 skoolkit-9.1/long_description.rst
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.692501 skoolkit-9.1/man/
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.708501 skoolkit-9.1/man/man1/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5819 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/bin2sna.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5895 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/bin2tap.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9619 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/skool2asm.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2933 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/skool2bin.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4466 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/skool2ctl.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9483 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/skool2html.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4802 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/sna2ctl.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3688 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/sna2img.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8144 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/sna2skool.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5971 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/snapinfo.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3995 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/snapmod.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)    24083 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/tap2sna.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1758 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/tapinfo.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7938 2024-02-03 12:32:45.000000 skoolkit-9.1/man/man1/trace.py.1
--rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2021-11-16 20:02:53.000000 skoolkit-9.1/pyproject.toml
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1154 2024-02-03 12:49:52.720501 skoolkit-9.1/setup.cfg
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.1/skool2asm.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      891 2017-01-12 22:31:18.000000 skoolkit-9.1/skool2bin.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.1/skool2ctl.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      898 2017-01-12 22:31:18.000000 skoolkit-9.1/skool2html.py
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.716501 skoolkit-9.1/skoolkit/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6398 2024-02-03 12:29:13.000000 skoolkit-9.1/skoolkit/__init__.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7052 2023-12-06 20:21:10.000000 skoolkit-9.1/skoolkit/audio.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    10876 2024-01-12 21:07:34.000000 skoolkit-9.1/skoolkit/basic.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6205 2023-12-18 20:55:02.000000 skoolkit-9.1/skoolkit/bin2sna.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    12378 2023-12-07 21:17:46.000000 skoolkit-9.1/skoolkit/bin2tap.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    42957 2024-02-01 21:15:23.000000 skoolkit-9.1/skoolkit/cmiosimulator.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1783 2021-02-03 21:14:45.000000 skoolkit-9.1/skoolkit/components.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7440 2023-10-19 19:57:47.000000 skoolkit-9.1/skoolkit/config.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    18698 2024-01-31 23:04:58.000000 skoolkit-9.1/skoolkit/ctlparser.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16008 2022-10-25 12:02:01.000000 skoolkit-9.1/skoolkit/defaults.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    37276 2021-04-13 20:39:36.000000 skoolkit-9.1/skoolkit/disassembler.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16581 2021-07-23 19:51:54.000000 skoolkit-9.1/skoolkit/graphics.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    11792 2021-04-25 13:05:19.000000 skoolkit-9.1/skoolkit/image.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8553 2024-01-08 13:18:54.000000 skoolkit-9.1/skoolkit/kbtracer.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    42856 2023-10-10 19:36:10.000000 skoolkit-9.1/skoolkit/loadsample.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    25656 2024-01-08 12:47:59.000000 skoolkit-9.1/skoolkit/loadtracer.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    36547 2019-01-03 21:48:08.000000 skoolkit-9.1/skoolkit/opcodes.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2118 2024-01-25 21:10:25.000000 skoolkit-9.1/skoolkit/pagingtracer.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    21763 2021-02-10 21:01:21.000000 skoolkit-9.1/skoolkit/pngwriter.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7744 2021-07-22 20:05:54.000000 skoolkit-9.1/skoolkit/refparser.py
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.716501 skoolkit-9.1/skoolkit/resources/
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.1/skoolkit/resources/128-0.rom
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.1/skoolkit/resources/128-1.rom
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.1/skoolkit/resources/48.rom
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.1/skoolkit/resources/skoolkit-dark.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.1/skoolkit/resources/skoolkit-green.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.1/skoolkit/resources/skoolkit-plum.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)       80 2017-02-15 21:53:32.000000 skoolkit-9.1/skoolkit/resources/skoolkit-wide.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3578 2021-01-28 21:19:34.000000 skoolkit-9.1/skoolkit/resources/skoolkit.css
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7710 2022-11-13 15:44:09.000000 skoolkit-9.1/skoolkit/simtables.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   190601 2024-01-24 20:59:00.000000 skoolkit-9.1/skoolkit/simulator.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     7940 2021-09-19 12:27:42.000000 skoolkit-9.1/skoolkit/skool2asm.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    15120 2023-11-24 18:29:42.000000 skoolkit-9.1/skoolkit/skool2bin.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4790 2019-03-04 21:42:17.000000 skoolkit-9.1/skoolkit/skool2ctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    19437 2022-08-08 18:01:45.000000 skoolkit-9.1/skoolkit/skool2html.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    26057 2023-11-23 18:55:52.000000 skoolkit-9.1/skoolkit/skoolasm.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    29535 2023-12-07 21:06:52.000000 skoolkit-9.1/skoolkit/skoolctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    60152 2023-12-06 20:21:10.000000 skoolkit-9.1/skoolkit/skoolhtml.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    60180 2024-01-25 21:40:41.000000 skoolkit-9.1/skoolkit/skoolmacro.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    44589 2023-12-08 20:59:57.000000 skoolkit-9.1/skoolkit/skoolparser.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    27228 2024-02-03 12:31:26.000000 skoolkit-9.1/skoolkit/skoolutils.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     4599 2021-02-16 20:57:03.000000 skoolkit-9.1/skoolkit/sna2ctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8343 2021-02-03 21:14:45.000000 skoolkit-9.1/skoolkit/sna2img.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5666 2022-09-07 19:43:47.000000 skoolkit-9.1/skoolkit/sna2skool.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    16472 2021-02-16 21:11:08.000000 skoolkit-9.1/skoolkit/snactl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    24838 2023-09-01 13:35:02.000000 skoolkit-9.1/skoolkit/snapinfo.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3488 2023-12-19 20:40:37.000000 skoolkit-9.1/skoolkit/snapmod.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    24776 2023-12-19 20:40:37.000000 skoolkit-9.1/skoolkit/snapshot.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    26809 2023-11-22 20:51:16.000000 skoolkit-9.1/skoolkit/snaskool.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    43658 2024-01-24 21:00:49.000000 skoolkit-9.1/skoolkit/tap2sna.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    18750 2023-09-04 12:06:36.000000 skoolkit-9.1/skoolkit/tapinfo.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2137 2018-01-26 22:16:31.000000 skoolkit-9.1/skoolkit/textutils.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    14049 2024-01-24 21:12:05.000000 skoolkit-9.1/skoolkit/trace.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   120515 2023-09-03 10:27:35.000000 skoolkit-9.1/skoolkit/traceutils.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    39627 2023-10-31 19:08:41.000000 skoolkit-9.1/skoolkit/z80.py
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.720501 skoolkit-9.1/skoolkit.egg-info/
--rw-r--r--   0 rjd       (1000) rjd       (1000)     6898 2024-02-03 12:49:52.000000 skoolkit-9.1/skoolkit.egg-info/PKG-INFO
--rw-r--r--   0 rjd       (1000) rjd       (1000)     5540 2024-02-03 12:49:52.000000 skoolkit-9.1/skoolkit.egg-info/SOURCES.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)        1 2024-02-03 12:49:52.000000 skoolkit-9.1/skoolkit.egg-info/dependency_links.txt
--rw-r--r--   0 rjd       (1000) rjd       (1000)        9 2024-02-03 12:49:52.000000 skoolkit-9.1/skoolkit.egg-info/top_level.txt
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      881 2018-09-16 12:11:45.000000 skoolkit-9.1/sna2ctl.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.1/sna2img.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.1/sna2skool.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      888 2017-01-12 22:31:18.000000 skoolkit-9.1/snapinfo.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.1/snapmod.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      887 2017-01-12 22:31:18.000000 skoolkit-9.1/tap2sna.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      887 2017-01-12 22:31:18.000000 skoolkit-9.1/tapinfo.py
-drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-02-03 12:49:52.720501 skoolkit-9.1/tests/
--rw-r--r--   0 rjd       (1000) rjd       (1000)   132900 2024-01-29 22:00:25.000000 skoolkit-9.1/tests/macrotest.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    21483 2023-11-15 21:37:02.000000 skoolkit-9.1/tests/skoolkittest.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8319 2023-12-06 20:21:10.000000 skoolkit-9.1/tests/test_audio.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    28800 2024-01-12 21:07:34.000000 skoolkit-9.1/tests/test_basic.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    22142 2024-01-15 21:03:38.000000 skoolkit-9.1/tests/test_bin2sna.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    37758 2023-12-07 21:17:46.000000 skoolkit-9.1/tests/test_bin2tap.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    76072 2024-01-25 21:10:25.000000 skoolkit-9.1/tests/test_cmiosimulator.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    87489 2023-11-23 18:55:52.000000 skoolkit-9.1/tests/test_ctlparser.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    90233 2021-04-13 20:39:36.000000 skoolkit-9.1/tests/test_disassembler.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     8472 2018-03-25 11:29:25.000000 skoolkit-9.1/tests/test_graphics.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    50384 2021-04-25 13:12:55.000000 skoolkit-9.1/tests/test_image.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    13744 2024-01-08 13:33:04.000000 skoolkit-9.1/tests/test_kbtracer.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9703 2019-04-03 21:13:21.000000 skoolkit-9.1/tests/test_refparser.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   113071 2024-01-10 19:42:40.000000 skoolkit-9.1/tests/test_simulator.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    34438 2021-05-18 21:36:14.000000 skoolkit-9.1/tests/test_skool2asm.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    62828 2023-11-24 18:29:42.000000 skoolkit-9.1/tests/test_skool2bin.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     9183 2019-03-04 21:42:17.000000 skoolkit-9.1/tests/test_skool2ctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    76116 2023-10-31 18:52:37.000000 skoolkit-9.1/tests/test_skool2html.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   135979 2023-08-22 18:55:41.000000 skoolkit-9.1/tests/test_skoolasm.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    77346 2023-12-07 21:06:52.000000 skoolkit-9.1/tests/test_skoolctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   449555 2024-01-29 21:05:23.000000 skoolkit-9.1/tests/test_skoolhtml.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     2440 2019-10-13 13:50:42.000000 skoolkit-9.1/tests/test_skoolkit.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    22924 2020-10-02 20:06:53.000000 skoolkit-9.1/tests/test_skoolmacro.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   195445 2023-12-08 20:59:57.000000 skoolkit-9.1/tests/test_skoolparser.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    36727 2021-05-18 21:36:14.000000 skoolkit-9.1/tests/test_sna2ctl.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    33413 2022-08-16 20:15:51.000000 skoolkit-9.1/tests/test_sna2img.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    32152 2023-09-04 11:27:36.000000 skoolkit-9.1/tests/test_sna2skool.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    83025 2023-09-01 13:34:00.000000 skoolkit-9.1/tests/test_snapinfo.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    30769 2023-12-19 20:40:37.000000 skoolkit-9.1/tests/test_snapmod.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    36013 2023-11-17 20:46:30.000000 skoolkit-9.1/tests/test_snapshot.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   161635 2024-01-31 23:03:20.000000 skoolkit-9.1/tests/test_snaskool.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   138411 2024-01-24 21:00:49.000000 skoolkit-9.1/tests/test_tap2sna.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    27255 2023-10-31 18:52:37.000000 skoolkit-9.1/tests/test_tapinfo.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)     3018 2023-09-04 11:27:36.000000 skoolkit-9.1/tests/test_textutils.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    89977 2024-01-24 21:16:01.000000 skoolkit-9.1/tests/test_trace.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)   171930 2022-11-12 19:05:58.000000 skoolkit-9.1/tests/test_traceutils.py
--rw-r--r--   0 rjd       (1000) rjd       (1000)    76917 2023-09-04 11:27:36.000000 skoolkit-9.1/tests/test_z80.py
--rwxr-xr-x   0 rjd       (1000) rjd       (1000)      877 2022-10-30 12:43:11.000000 skoolkit-9.1/trace.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.295563 skoolkit-9.2/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    35147 2010-03-03 00:59:14.000000 skoolkit-9.2/COPYING
+-rw-r--r--   0 rjd       (1000) rjd       (1000)       64 2014-12-31 18:28:35.000000 skoolkit-9.2/MANIFEST.in
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7279 2024-05-11 12:10:04.295563 skoolkit-9.2/PKG-INFO
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.2/bin2sna.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      892 2017-01-12 22:31:18.000000 skoolkit-9.2/bin2tap.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.263563 skoolkit-9.2/c/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   251375 2024-04-22 20:35:45.000000 skoolkit-9.2/c/csimulator.c
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.267563 skoolkit-9.2/docs/
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.271563 skoolkit-9.2/docs/_sources/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4165 2022-08-12 20:16:11.000000 skoolkit-9.2/docs/_sources/asm-templates.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    52371 2023-12-08 20:59:57.000000 skoolkit-9.2/docs/_sources/asm.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2862 2019-05-14 21:07:25.000000 skoolkit-9.2/docs/_sources/assemblers.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7254 2024-05-11 11:18:02.000000 skoolkit-9.2/docs/_sources/changelog.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3491 2015-11-20 12:50:08.000000 skoolkit-9.2/docs/_sources/changelog1.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    11437 2019-07-08 20:36:08.000000 skoolkit-9.2/docs/_sources/changelog2.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    11778 2019-07-08 20:36:08.000000 skoolkit-9.2/docs/_sources/changelog3.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7233 2020-10-07 20:20:25.000000 skoolkit-9.2/docs/_sources/changelog4.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6124 2020-10-07 20:20:25.000000 skoolkit-9.2/docs/_sources/changelog5.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9323 2020-10-07 20:20:25.000000 skoolkit-9.2/docs/_sources/changelog6.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6307 2020-10-07 20:20:25.000000 skoolkit-9.2/docs/_sources/changelog7.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    20922 2024-02-07 21:12:54.000000 skoolkit-9.2/docs/_sources/changelog8.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   107121 2024-04-03 19:43:51.000000 skoolkit-9.2/docs/_sources/commands.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13596 2023-09-02 14:50:16.000000 skoolkit-9.2/docs/_sources/components.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    33115 2023-07-09 19:16:16.000000 skoolkit-9.2/docs/_sources/control-files.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13435 2024-04-20 14:53:55.000000 skoolkit-9.2/docs/_sources/diy.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    17202 2024-01-10 20:58:32.000000 skoolkit-9.2/docs/_sources/extending.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    27424 2022-08-29 20:54:25.000000 skoolkit-9.2/docs/_sources/html-templates.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      426 2019-08-09 20:57:13.000000 skoolkit-9.2/docs/_sources/index.rst.txt
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.271563 skoolkit-9.2/docs/_sources/man/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4350 2023-12-18 20:55:02.000000 skoolkit-9.2/docs/_sources/man/bin2sna.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4590 2023-12-07 21:17:46.000000 skoolkit-9.2/docs/_sources/man/bin2tap.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      541 2024-02-14 21:19:45.000000 skoolkit-9.2/docs/_sources/man/rzxinfo.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4018 2024-04-03 19:43:51.000000 skoolkit-9.2/docs/_sources/man/rzxplay.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7680 2021-05-18 21:36:14.000000 skoolkit-9.2/docs/_sources/man/skool2asm.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1638 2023-11-24 18:29:42.000000 skoolkit-9.2/docs/_sources/man/skool2bin.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3065 2021-05-18 21:36:14.000000 skoolkit-9.2/docs/_sources/man/skool2ctl.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7266 2022-08-08 18:01:45.000000 skoolkit-9.2/docs/_sources/man/skool2html.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3412 2024-02-22 21:21:14.000000 skoolkit-9.2/docs/_sources/man/sna2ctl.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2297 2019-07-08 21:10:05.000000 skoolkit-9.2/docs/_sources/man/sna2img.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6538 2022-09-07 19:43:47.000000 skoolkit-9.2/docs/_sources/man/sna2skool.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4353 2021-05-18 21:36:14.000000 skoolkit-9.2/docs/_sources/man/snapinfo.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2682 2023-12-19 20:40:37.000000 skoolkit-9.2/docs/_sources/man/snapmod.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    21257 2024-03-27 20:19:23.000000 skoolkit-9.2/docs/_sources/man/tap2sna.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      714 2023-08-28 20:42:22.000000 skoolkit-9.2/docs/_sources/man/tapinfo.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6106 2024-03-30 11:53:16.000000 skoolkit-9.2/docs/_sources/man/trace.py.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3726 2023-10-25 20:20:23.000000 skoolkit-9.2/docs/_sources/migration.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3345 2023-12-08 20:27:51.000000 skoolkit-9.2/docs/_sources/parsing.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    51725 2023-12-06 20:21:10.000000 skoolkit-9.2/docs/_sources/ref-files.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    11571 2020-03-08 12:27:23.000000 skoolkit-9.2/docs/_sources/skool-files.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   117913 2024-01-25 21:40:41.000000 skoolkit-9.2/docs/_sources/skool-macros.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2323 2024-04-04 19:57:53.000000 skoolkit-9.2/docs/_sources/usage.rst.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5372 2024-04-04 20:02:03.000000 skoolkit-9.2/docs/_sources/whatis.rst.txt
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.275563 skoolkit-9.2/docs/_static/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4418 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/_sphinx_javascript_frameworks_compat.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    14809 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/basic.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4302 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/classic.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      368 2021-09-12 11:18:57.000000 skoolkit-9.2/docs/_static/custom.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4472 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/doctools.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      418 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/documentation_options.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      286 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/file.png
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   289782 2022-08-29 08:27:59.000000 skoolkit-9.2/docs/_static/jquery.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4758 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/language_data.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/minus.png
+-rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/plus.png
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4846 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/pygments.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    18747 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/searchtools.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2540 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/_static/sidebar.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5097 2023-03-29 08:31:27.000000 skoolkit-9.2/docs/_static/sphinx_highlight.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    68416 2022-06-02 12:39:04.000000 skoolkit-9.2/docs/_static/underscore.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    15355 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/asm-templates.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   111241 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/asm.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    10861 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/assemblers.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    23685 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13275 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog1.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    31637 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog2.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    31918 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog3.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    21686 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog4.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    20003 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog5.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    28756 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog6.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    19826 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog7.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    57320 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/changelog8.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   170798 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/commands.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    65027 2024-05-11 11:21:29.000000 skoolkit-9.2/docs/components.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    70718 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/control-files.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    25205 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/diy.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    83802 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/extending.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3021 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/genindex.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    65964 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/html-templates.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6483 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/index.html
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.275563 skoolkit-9.2/docs/man/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16222 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/bin2sna.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    12410 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/bin2tap.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5984 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/rzxinfo.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13138 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/rzxplay.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    24146 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/skool2asm.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8421 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/skool2bin.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    12094 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/skool2ctl.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    23412 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/skool2html.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    11769 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/sna2ctl.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9077 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/sna2img.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    21329 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/sna2skool.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13525 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/snapinfo.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13261 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/snapmod.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    55494 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/tap2sna.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6241 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/tapinfo.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    20087 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/man/trace.py.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    14279 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/migration.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    12529 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/parsing.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   103747 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/ref-files.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3324 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/search.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   100677 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/searchindex.js
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    25247 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/skool-files.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   231307 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/skool-macros.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8770 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/usage.html
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13888 2024-05-11 11:21:30.000000 skoolkit-9.2/docs/whatis.html
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.279563 skoolkit-9.2/examples/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2454 2015-12-04 12:16:10.000000 skoolkit-9.2/examples/hungry_horace.ctl
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      696 2016-01-09 11:54:00.000000 skoolkit-9.2/examples/hungry_horace.ref
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      199 2023-06-30 20:12:20.000000 skoolkit-9.2/examples/hungry_horace.t2s
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6356 2024-05-10 20:18:45.000000 skoolkit-9.2/long_description.rst
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.259563 skoolkit-9.2/man/
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.279563 skoolkit-9.2/man/man1/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5819 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/bin2sna.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5895 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/bin2tap.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1562 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/rzxinfo.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5236 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/rzxplay.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9619 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/skool2asm.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2933 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/skool2bin.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4466 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/skool2ctl.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9483 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/skool2html.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4826 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/sna2ctl.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3688 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/sna2img.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8144 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/sna2skool.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5971 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/snapinfo.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3995 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/snapmod.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    24258 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/tap2sna.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1758 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/tapinfo.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8088 2024-05-11 11:21:24.000000 skoolkit-9.2/man/man1/trace.py.1
+-rw-r--r--   0 rjd       (1000) rjd       (1000)       90 2021-11-16 20:02:53.000000 skoolkit-9.2/pyproject.toml
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      881 2024-02-14 21:15:52.000000 skoolkit-9.2/rzxinfo.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      881 2024-02-16 20:25:23.000000 skoolkit-9.2/rzxplay.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1178 2024-05-11 12:10:04.295563 skoolkit-9.2/setup.cfg
+-rw-r--r--   0 rjd       (1000) rjd       (1000)      268 2024-03-14 20:21:13.000000 skoolkit-9.2/setup.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.2/skool2asm.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      891 2017-01-12 22:31:18.000000 skoolkit-9.2/skool2bin.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.2/skool2ctl.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      898 2017-01-12 22:31:18.000000 skoolkit-9.2/skool2html.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.287563 skoolkit-9.2/skoolkit/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6772 2024-05-11 11:18:02.000000 skoolkit-9.2/skoolkit/__init__.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7052 2023-12-06 20:21:10.000000 skoolkit-9.2/skoolkit/audio.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    10876 2024-01-12 21:07:34.000000 skoolkit-9.2/skoolkit/basic.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     6205 2023-12-18 20:55:02.000000 skoolkit-9.2/skoolkit/bin2sna.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    12378 2023-12-07 21:17:46.000000 skoolkit-9.2/skoolkit/bin2tap.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    42978 2024-03-16 12:36:19.000000 skoolkit-9.2/skoolkit/cmiosimulator.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1783 2021-02-03 21:14:45.000000 skoolkit-9.2/skoolkit/components.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7440 2023-10-19 19:57:47.000000 skoolkit-9.2/skoolkit/config.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    18698 2024-01-31 23:04:58.000000 skoolkit-9.2/skoolkit/ctlparser.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16008 2022-10-25 12:02:01.000000 skoolkit-9.2/skoolkit/defaults.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    37276 2021-04-13 20:39:36.000000 skoolkit-9.2/skoolkit/disassembler.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16581 2021-07-23 19:51:54.000000 skoolkit-9.2/skoolkit/graphics.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    11792 2021-04-25 13:05:19.000000 skoolkit-9.2/skoolkit/image.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9045 2024-03-26 19:43:03.000000 skoolkit-9.2/skoolkit/kbtracer.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    42856 2023-10-10 19:36:10.000000 skoolkit-9.2/skoolkit/loadsample.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    28920 2024-04-22 20:35:45.000000 skoolkit-9.2/skoolkit/loadtracer.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    36547 2019-01-03 21:48:08.000000 skoolkit-9.2/skoolkit/opcodes.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2611 2024-03-30 16:42:33.000000 skoolkit-9.2/skoolkit/pagingtracer.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    21763 2021-02-10 21:01:21.000000 skoolkit-9.2/skoolkit/pngwriter.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7744 2021-07-22 20:05:54.000000 skoolkit-9.2/skoolkit/refparser.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.287563 skoolkit-9.2/skoolkit/resources/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.2/skoolkit/resources/128-0.rom
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.2/skoolkit/resources/128-1.rom
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.2/skoolkit/resources/48.rom
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.2/skoolkit/resources/plus2-0.rom
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16384 2019-02-10 22:35:13.000000 skoolkit-9.2/skoolkit/resources/plus2-1.rom
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.2/skoolkit/resources/skoolkit-dark.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.2/skoolkit/resources/skoolkit-green.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     1164 2019-07-14 11:45:10.000000 skoolkit-9.2/skoolkit/resources/skoolkit-plum.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)       80 2017-02-15 21:53:32.000000 skoolkit-9.2/skoolkit/resources/skoolkit-wide.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3578 2021-01-28 21:19:34.000000 skoolkit-9.2/skoolkit/resources/skoolkit.css
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7646 2024-04-04 20:04:08.000000 skoolkit-9.2/skoolkit/rzxinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    21658 2024-04-03 19:43:50.000000 skoolkit-9.2/skoolkit/rzxplay.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7710 2022-11-13 15:44:09.000000 skoolkit-9.2/skoolkit/simtables.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   188875 2024-04-06 17:11:10.000000 skoolkit-9.2/skoolkit/simulator.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5486 2024-03-31 11:51:49.000000 skoolkit-9.2/skoolkit/simutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7940 2021-09-19 12:27:42.000000 skoolkit-9.2/skoolkit/skool2asm.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    15120 2023-11-24 18:29:42.000000 skoolkit-9.2/skoolkit/skool2bin.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4790 2019-03-04 21:42:17.000000 skoolkit-9.2/skoolkit/skool2ctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    19437 2022-08-08 18:01:45.000000 skoolkit-9.2/skoolkit/skool2html.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    26057 2023-11-23 18:55:52.000000 skoolkit-9.2/skoolkit/skoolasm.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    29535 2023-12-07 21:06:52.000000 skoolkit-9.2/skoolkit/skoolctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    60128 2024-03-26 20:07:26.000000 skoolkit-9.2/skoolkit/skoolhtml.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    60521 2024-03-29 22:00:13.000000 skoolkit-9.2/skoolkit/skoolmacro.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    44589 2023-12-08 20:59:57.000000 skoolkit-9.2/skoolkit/skoolparser.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    27671 2024-03-24 18:42:00.000000 skoolkit-9.2/skoolkit/skoolutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     4599 2021-02-16 20:57:03.000000 skoolkit-9.2/skoolkit/sna2ctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8343 2021-02-03 21:14:45.000000 skoolkit-9.2/skoolkit/sna2img.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5666 2022-09-07 19:43:47.000000 skoolkit-9.2/skoolkit/sna2skool.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    16583 2024-02-22 21:21:14.000000 skoolkit-9.2/skoolkit/snactl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    20519 2024-03-26 19:43:03.000000 skoolkit-9.2/skoolkit/snapinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3488 2023-12-19 20:40:37.000000 skoolkit-9.2/skoolkit/snapmod.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    31903 2024-03-30 16:46:50.000000 skoolkit-9.2/skoolkit/snapshot.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    26809 2023-11-22 20:51:16.000000 skoolkit-9.2/skoolkit/snaskool.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    44229 2024-04-19 20:03:42.000000 skoolkit-9.2/skoolkit/tap2sna.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    19054 2024-02-14 21:13:52.000000 skoolkit-9.2/skoolkit/tapinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2137 2018-01-26 22:16:31.000000 skoolkit-9.2/skoolkit/textutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13704 2024-03-31 13:03:20.000000 skoolkit-9.2/skoolkit/trace.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   120512 2024-03-26 19:43:03.000000 skoolkit-9.2/skoolkit/traceutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    39627 2023-10-31 19:08:41.000000 skoolkit-9.2/skoolkit/z80.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.295563 skoolkit-9.2/skoolkit.egg-info/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     7279 2024-05-11 12:10:04.000000 skoolkit-9.2/skoolkit.egg-info/PKG-INFO
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     5975 2024-05-11 12:10:04.000000 skoolkit-9.2/skoolkit.egg-info/SOURCES.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)        1 2024-05-11 12:10:04.000000 skoolkit-9.2/skoolkit.egg-info/dependency_links.txt
+-rw-r--r--   0 rjd       (1000) rjd       (1000)        9 2024-05-11 12:10:04.000000 skoolkit-9.2/skoolkit.egg-info/top_level.txt
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      881 2018-09-16 12:11:45.000000 skoolkit-9.2/sna2ctl.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.2/sna2img.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      896 2017-01-12 22:31:18.000000 skoolkit-9.2/sna2skool.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      888 2017-01-12 22:31:18.000000 skoolkit-9.2/snapinfo.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      886 2017-01-12 22:31:18.000000 skoolkit-9.2/snapmod.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      887 2017-01-12 22:31:18.000000 skoolkit-9.2/tap2sna.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      887 2017-01-12 22:31:18.000000 skoolkit-9.2/tapinfo.py
+drwxr-xr-x   0 rjd       (1000) rjd       (1000)        0 2024-05-11 12:10:04.295563 skoolkit-9.2/tests/
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   133596 2024-03-16 14:10:48.000000 skoolkit-9.2/tests/macrotest.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    25464 2024-02-21 21:13:26.000000 skoolkit-9.2/tests/skoolkittest.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8319 2023-12-06 20:21:10.000000 skoolkit-9.2/tests/test_audio.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    28800 2024-01-12 21:07:34.000000 skoolkit-9.2/tests/test_basic.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    22142 2024-01-15 21:03:38.000000 skoolkit-9.2/tests/test_bin2sna.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    37758 2023-12-07 21:17:46.000000 skoolkit-9.2/tests/test_bin2tap.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    76072 2024-01-25 21:10:25.000000 skoolkit-9.2/tests/test_cmiosimulator.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    87489 2023-11-23 18:55:52.000000 skoolkit-9.2/tests/test_ctlparser.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    90233 2021-04-13 20:39:36.000000 skoolkit-9.2/tests/test_disassembler.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     8472 2018-03-25 11:29:25.000000 skoolkit-9.2/tests/test_graphics.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    50384 2021-04-25 13:12:55.000000 skoolkit-9.2/tests/test_image.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    13773 2024-03-26 19:43:03.000000 skoolkit-9.2/tests/test_kbtracer.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9703 2019-04-03 21:13:21.000000 skoolkit-9.2/tests/test_refparser.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    14800 2024-04-04 20:04:08.000000 skoolkit-9.2/tests/test_rzxinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    58090 2024-04-04 20:04:08.000000 skoolkit-9.2/tests/test_rzxplay.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   113627 2024-03-29 12:15:32.000000 skoolkit-9.2/tests/test_simulator.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    34438 2021-05-18 21:36:14.000000 skoolkit-9.2/tests/test_skool2asm.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    62828 2023-11-24 18:29:42.000000 skoolkit-9.2/tests/test_skool2bin.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     9183 2019-03-04 21:42:17.000000 skoolkit-9.2/tests/test_skool2ctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    76116 2023-10-31 18:52:37.000000 skoolkit-9.2/tests/test_skool2html.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   135979 2023-08-22 18:55:41.000000 skoolkit-9.2/tests/test_skoolasm.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    77346 2023-12-07 21:06:52.000000 skoolkit-9.2/tests/test_skoolctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   452298 2024-03-26 20:07:26.000000 skoolkit-9.2/tests/test_skoolhtml.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     2440 2019-10-13 13:50:42.000000 skoolkit-9.2/tests/test_skoolkit.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    22924 2020-10-02 20:06:53.000000 skoolkit-9.2/tests/test_skoolmacro.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   195445 2023-12-08 20:59:57.000000 skoolkit-9.2/tests/test_skoolparser.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    36997 2024-02-22 21:21:14.000000 skoolkit-9.2/tests/test_sna2ctl.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    33413 2022-08-16 20:15:51.000000 skoolkit-9.2/tests/test_sna2img.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    32152 2023-09-04 11:27:36.000000 skoolkit-9.2/tests/test_sna2skool.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    83006 2024-02-15 21:20:04.000000 skoolkit-9.2/tests/test_snapinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    30715 2024-03-26 19:43:03.000000 skoolkit-9.2/tests/test_snapmod.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    40927 2024-03-30 16:04:37.000000 skoolkit-9.2/tests/test_snapshot.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   161635 2024-01-31 23:03:20.000000 skoolkit-9.2/tests/test_snaskool.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   141567 2024-04-11 20:04:02.000000 skoolkit-9.2/tests/test_tap2sna.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    27509 2024-02-14 21:13:52.000000 skoolkit-9.2/tests/test_tapinfo.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)     3018 2023-09-04 11:27:36.000000 skoolkit-9.2/tests/test_textutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   105980 2024-03-31 13:05:14.000000 skoolkit-9.2/tests/test_trace.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)   171930 2022-11-12 19:05:58.000000 skoolkit-9.2/tests/test_traceutils.py
+-rw-r--r--   0 rjd       (1000) rjd       (1000)    76917 2023-09-04 11:27:36.000000 skoolkit-9.2/tests/test_z80.py
+-rwxr-xr-x   0 rjd       (1000) rjd       (1000)      877 2022-10-30 12:43:11.000000 skoolkit-9.2/trace.py
```

### Comparing `skoolkit-9.1/COPYING` & `skoolkit-9.2/COPYING`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/PKG-INFO` & `skoolkit-9.2/PKG-INFO`

 * *Files 9% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: skoolkit
-Version: 9.1
+Version: 9.2
 Summary: A suite of tools for creating disassemblies of ZX Spectrum games
 Home-page: https://skoolkit.ca
 Author: Richard Dymond
 Author-email: rjdymond@gmail.com
 License: GPLv3
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)
@@ -39,15 +39,15 @@
 With SkoolKit you can:
 
 * use sna2ctl.py_ to generate a `control file`_ (an attempt to identify
   routines and data blocks by static analysis) from a snapshot (SNA, SZX or
   Z80) or raw memory file
 * enable sna2ctl.py_ to generate a much better control file that more reliably
   distinguishes code from data by using a code execution map produced by an
-  emulator
+  emulator or rzxplay.py_
 * use sna2skool.py_ along with this control file to produce a disassembly of a
   snapshot or raw memory file
 * add annotations to this disassembly (or the control file) as you discover the
   purpose of each routine and data block
 * use skool2html.py_ to convert a disassembly into a bunch of HTML files (with
   annotations in place, and the operands of CALL and JP instructions converted
   into hyperlinks)
@@ -59,16 +59,20 @@
 * use tap2sna.py_ to convert a TAP or TZX file into a 'pristine' Z80 or SZX
   snapshot
 * use snapinfo.py_ to analyse a snapshot or raw memory file and list the BASIC
   program it contains, show register values, produce a call graph, find tile
   graphic data, find text, or find sequences of arbitrary byte values
 * use trace.py_ to trace the execution of machine code in a snapshot or raw
   memory file
+* use rzxplay.py_ to trace the execution of machine code in an RZX file, and
+  produce a code execution map for sna2ctl.py_
 * use tapinfo.py_ to analyse the blocks in a TAP or TZX file, and list the
   BASIC program it contains
+* use rzxinfo.py_ to analyse the blocks in an RZX file, and extract snapshots
+  from it
 * use bin2tap.py_ to convert a snapshot or raw memory file into a TAP file
 * use bin2sna.py_ to convert a raw memory file into a Z80 or SZX snapshot
 * use snapmod.py_ to modify the register values or memory contents in a Z80 or
   SZX snapshot
 * use sna2img.py_ to convert graphic data in a disassembly, SCR file, snapshot
   or raw memory file into a PNG image
 
@@ -84,14 +88,16 @@
 
 For a demonstration of SkoolKit's capabilities, take a look at the complete
 disassemblies of `Skool Daze`_, `Back to Skool`_, `Contact Sam Cruise`_,
 `Manic Miner`_, `Jet Set Willy`_ and `Hungry Horace`_.
 
 .. _bin2sna.py: https://skoolkid.github.io/skoolkit/commands.html#bin2sna-py
 .. _bin2tap.py: https://skoolkid.github.io/skoolkit/commands.html#bin2tap-py
+.. _rzxinfo.py: https://skoolkid.github.io/skoolkit/commands.html#rzxinfo-py
+.. _rzxplay.py: https://skoolkid.github.io/skoolkit/commands.html#rzxplay-py
 .. _skool2asm.py: https://skoolkid.github.io/skoolkit/commands.html#skool2asm-py
 .. _skool2bin.py: https://skoolkid.github.io/skoolkit/commands.html#skool2bin-py
 .. _skool2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#skool2ctl-py
 .. _skool2html.py: https://skoolkid.github.io/skoolkit/commands.html#skool2html-py
 .. _sna2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#sna2ctl-py
 .. _sna2img.py: https://skoolkid.github.io/skoolkit/commands.html#sna2img-py
 .. _sna2skool.py: https://skoolkid.github.io/skoolkit/commands.html#sna2skool-py
```

### Comparing `skoolkit-9.1/bin2sna.py` & `skoolkit-9.2/bin2sna.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/bin2tap.py` & `skoolkit-9.2/bin2tap.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/asm-templates.rst.txt` & `skoolkit-9.2/docs/_sources/asm-templates.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/asm.rst.txt` & `skoolkit-9.2/docs/_sources/asm.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/assemblers.rst.txt` & `skoolkit-9.2/docs/_sources/assemblers.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog.rst.txt` & `skoolkit-9.2/docs/_sources/changelog8.rst.txt`

 * *Files 13% similar despite different names*

```diff
@@ -1,115 +1,9 @@
-Changelog
-=========
-
-9.1 (2024-02-03)
-----------------
-* Added support to :ref:`snapmod.py` for modifying SZX snapshots and 128K
-  snapshots
-* Added support to :ref:`bin2sna.py` for writing 128K snapshots (by using the
-  ``--page`` and ``--bank`` options, or by providing a 128K input file)
-* Added support to :ref:`bin2tap.py` for writing 128K TAP files (by using the
-  ``--7ffd``, ``--banks`` and ``--loader`` options)
-* Added support to :ref:`bin2sna.py`, :ref:`snapmod.py`, :ref:`tap2sna.py` and
-  :ref:`trace.py` for modifying 128K RAM banks (via the ``--move``, ``--poke``,
-  ``--ram move`` and ``--ram poke`` options)
-* Added the :ref:`BANK` macro (for switching the RAM bank that is mapped to
-  49152-65535)
-* Added the :ref:`asm-bank` directive (for specifying the RAM bank that is
-  mapped to 49152-65535, and for populating a RAM bank from the contents of
-  another skool file)
-* Added the ``--banks`` option to :ref:`skool2bin.py` (for processing
-  :ref:`asm-bank` directives and writing RAM banks 0-7 to a 128K file)
-* Added the ``cmio`` simulated LOAD configuration parameter to
-  :ref:`tap2sna.py <tap2sna-sim-load>` (to specify whether to simulate memory
-  and I/O contention)
-* Added the ``--cmio`` option to :ref:`trace.py` (to enable simulation of
-  memory and I/O contention)
-* Added the ``cmio`` parameter to the :ref:`AUDIO`, :ref:`SIM` and
-  :ref:`TSTATES` macros (to specify whether to simulate memory and I/O
-  contention)
-* Added the ``execint`` parameter to the :ref:`AUDIO`, :ref:`SIM` and
-  :ref:`TSTATES` macros (to specify whether to simulate the execution of
-  interrupt routines)
-* Added the ``tstates`` parameter to the :ref:`SIM` macro (to set the value of
-  the simulator's clock)
-* Added the ``iff`` parameter to the :ref:`SIM` macro (to set whether
-  interrupts are enabled)
-* Added the ``im`` parameter to the :ref:`SIM` macro (to set the interrupt
-  mode)
-* Made the ``stop`` parameter of the :ref:`SIM` macro optional
-* Added support to the :ref:`AUDIO`, :ref:`SIM` and :ref:`TSTATES` macros for
-  executing code in a 128K memory snapshot
-* Fixed how :ref:`trace.py` handles the value of the SP register in a 128K SNA
-  file
-* Fixed how :ref:`tap2sna.py` and :ref:`trace.py` log timestamps when an
-  interrupt occurs
-* Fixed how interrupts are accepted when :ref:`tap2sna.py` and :ref:`trace.py`
-  execute code in a simulator
-* Fixed how the Z80 instruction set simulator updates bit 2 of the flags
-  register when executing an 'LD A,I' or 'LD A,R' instruction just before an
-  interrupt is accepted
-* Fixed the bug that makes the ``--basic`` option of :ref:`snapinfo.py` fail
-  when the value of PROG is 65535
-* Fixed the bug that prevents an :ref:`mDirective` from being repeated in a
-  :ref:`control file loop <ctlLoops>`
-
-9.0 (2023-11-04)
-----------------
-* Dropped support for Python 3.7
-* :ref:`tap2sna.py` now performs a :ref:`simulated LOAD <tap2sna-sim-load>` by
-  default, and will also overwrite an existing snapshot by default
-* Added the ``machine`` simulated LOAD configuration parameter to
-  :ref:`tap2sna.py <tap2sna-sim-load>` (to specify whether to simulate a 48K or
-  a 128K Spectrum)
-* Added the ``load`` simulated LOAD configuration parameter to
-  :ref:`tap2sna.py <tap2sna-sim-load>` (to specify an alternative command line
-  to use to load the tape)
-* Added the ``polarity`` simulated LOAD configuration parameter to
-  :ref:`tap2sna.py <tap2sna-sim-load>` (to specify the EAR bit reading produced
-  by the first pulse on the tape)
-* Added the ``in-flags`` simulated LOAD configuration parameter to
-  :ref:`tap2sna.py <tap2sna-sim-load>` (to specify how to handle 'IN'
-  instructions)
-* The output snapshot argument of :ref:`tap2sna.py` is now optional
-* Added the ``DefaultSnapshotFormat`` configuration parameter for
-  :ref:`tap2sna.py <tap2sna-conf>` (to specify the default output snapshot
-  format)
-* Added support to :ref:`tap2sna.py <tap2sna-conf>` for register pairs
-  (``r[bc]``, ``r[de]`` etc.) in the ``TraceLine`` configuration parameter
-* Added the ``antirom``, ``ernieware`` and ``housenka`` tape-sampling loop
-  :ref:`accelerators <tap2sna-accelerators>`
-* Statistics for 'DEC A' tape-sampling delay loops are now shown by
-  :ref:`tap2sna.py` when ``accelerator=list``
-* Added support to :ref:`trace.py` for executing machine code in 128K snapshots
-* Added support to :ref:`trace.py <trace-conf>` for reading configuration
-  from `skoolkit.ini`
-* Added the ``--ini`` and ``--show-config`` options to :ref:`trace.py` (for
-  setting the value of a configuration parameter and for showing all
-  configuration parameter values)
-* Added the ``--no-interrupts`` option to :ref:`trace.py` (to prevent the
-  execution of interrupt routines, which are now executed by default)
-* Added support to :ref:`bin2sna.py`, :ref:`tap2sna.py` and :ref:`trace.py` for
-  writing SZX snapshots
-* Added support to :ref:`bin2sna.py` and :ref:`tap2sna.py` for setting the
-  ``fe`` hardware state attribute (i.e. the last value written to port 0xFE in
-  SZX snapshots)
-* Added support to the :ref:`AUDIO` macro for passing delays through a moving
-  average filter (which can produce higher quality audio, especially for
-  multi-channel tunes)
-* Added support to :ref:`control directive loops <ctlLoops>` for avoiding
-  repetition of an ``N`` directive at the start of a loop
-* :ref:`tapinfo.py` now shows the LINE number (if present) for 'Program:'
-  header blocks, and renders BASIC tokens in header block names
-* :ref:`snapinfo.py` now shows the current AY register in 128K SZX and Z80
-  snapshots
-* Changed the default value of ``H`` and ``A`` for the :ref:`assemble`
-  directive to 2
-* Fixed the bug that prevents :ref:`tap2sna.py` from loading a tape that has a
-  hash character (``#``) in its filename
+SkoolKit 8.x changelog
+======================
 
 8.10 (2023-06-17)
 -----------------
 * Added the ``finish-tape`` simulated LOAD configuration parameter to
   :ref:`tap2sna.py <tap2sna-sim-load>` (to specify whether to finish the tape
   before stopping the simulation at the given start address)
 * Added the ``contended-in`` simulated LOAD configuration parameter to
@@ -473,20 +367,7 @@
   parameter in the :ref:`ref-Game` section
 * Fixed the bug that prevents the ``JavaScript`` parameter from working for a
   box page whose ``SectionType`` is ``ListItems`` or ``BulletPoints``
 * Fixed how a table row separator that crosses a cell with rowspan > 1 is
   rendered in ASM mode
 * Fixed the bug that prevents :ref:`sna2skool.py` from wrapping referrer
   comments
-
-Older versions
---------------
-.. toctree::
-   :maxdepth: 1
-
-   changelog7
-   changelog6
-   changelog5
-   changelog4
-   changelog3
-   changelog2
-   changelog1
```

### Comparing `skoolkit-9.1/docs/_sources/changelog1.rst.txt` & `skoolkit-9.2/docs/_sources/changelog1.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog2.rst.txt` & `skoolkit-9.2/docs/_sources/changelog2.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog3.rst.txt` & `skoolkit-9.2/docs/_sources/changelog3.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog4.rst.txt` & `skoolkit-9.2/docs/_sources/changelog4.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog5.rst.txt` & `skoolkit-9.2/docs/_sources/changelog5.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog6.rst.txt` & `skoolkit-9.2/docs/_sources/changelog6.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/changelog7.rst.txt` & `skoolkit-9.2/docs/_sources/changelog7.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/commands.rst.txt` & `skoolkit-9.2/docs/_sources/commands.rst.txt`

 * *Files 2% similar despite different names*

```diff
@@ -684,5669 +684,6013 @@
 00002ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00002ac0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
 00002ad0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
 00002ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00002b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00002b20: 0a0a 2e2e 205f 736b 6f6f 6c32 6173 6d2e  .... _skool2asm.
-00002b30: 7079 3a0a 0a73 6b6f 6f6c 3261 736d 2e70  py:..skool2asm.p
-00002b40: 790a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a60  y.------------.`
-00002b50: 736b 6f6f 6c32 6173 6d2e 7079 6020 636f  skool2asm.py` co
-00002b60: 6e76 6572 7473 2061 2073 6b6f 6f6c 2066  nverts a skool f
-00002b70: 696c 6520 696e 746f 2061 6e20 4153 4d20  ile into an ASM 
-00002b80: 6669 6c65 2074 6861 7420 6361 6e20 6265  file that can be
-00002b90: 2066 6564 2074 6f20 616e 0a61 7373 656d   fed to an.assem
-00002ba0: 626c 6572 2028 7365 6520 3a72 6566 3a60  bler (see :ref:`
-00002bb0: 7375 7070 6f72 7465 6441 7373 656d 626c  supportedAssembl
-00002bc0: 6572 7360 292e 2046 6f72 2065 7861 6d70  ers`). For examp
-00002bd0: 6c65 3a3a 0a0a 2020 2420 736b 6f6f 6c32  le::..  $ skool2
-00002be0: 6173 6d2e 7079 2067 616d 652e 736b 6f6f  asm.py game.skoo
-00002bf0: 6c20 3e20 6761 6d65 2e61 736d 0a0a 6073  l > game.asm..`s
-00002c00: 6b6f 6f6c 3261 736d 2e70 7960 2073 7570  kool2asm.py` sup
-00002c10: 706f 7274 7320 6d61 6e79 206f 7074 696f  ports many optio
-00002c20: 6e73 3b20 7275 6e20 6974 2077 6974 6820  ns; run it with 
-00002c30: 6e6f 2061 7267 756d 656e 7473 2074 6f20  no arguments to 
-00002c40: 7365 6520 6120 6c69 7374 3a3a 0a0a 2020  see a list::..  
-00002c50: 7573 6167 653a 2073 6b6f 6f6c 3261 736d  usage: skool2asm
-00002c60: 2e70 7920 5b6f 7074 696f 6e73 5d20 4649  .py [options] FI
-00002c70: 4c45 0a0a 2020 436f 6e76 6572 7420 6120  LE..  Convert a 
-00002c80: 736b 6f6f 6c20 6669 6c65 2069 6e74 6f20  skool file into 
-00002c90: 616e 2041 534d 2066 696c 6520 616e 6420  an ASM file and 
-00002ca0: 7772 6974 6520 6974 2074 6f20 7374 616e  write it to stan
-00002cb0: 6461 7264 206f 7574 7075 742e 2046 494c  dard output. FIL
-00002cc0: 4520 6d61 790a 2020 6265 2061 2072 6567  E may.  be a reg
-00002cd0: 756c 6172 2066 696c 652c 206f 7220 272d  ular file, or '-
-00002ce0: 2720 666f 7220 7374 616e 6461 7264 2069  ' for standard i
-00002cf0: 6e70 7574 2e0a 0a20 204f 7074 696f 6e73  nput...  Options
-00002d00: 3a0a 2020 2020 2d63 2c20 2d2d 6372 6561  :.    -c, --crea
-00002d10: 7465 2d6c 6162 656c 7320 2020 4372 6561  te-labels   Crea
-00002d20: 7465 2064 6566 6175 6c74 206c 6162 656c  te default label
-00002d30: 7320 666f 7220 756e 6c61 6265 6c6c 6564  s for unlabelled
-00002d40: 2069 6e73 7472 7563 7469 6f6e 732e 0a20   instructions.. 
-00002d50: 2020 202d 442c 202d 2d64 6563 696d 616c     -D, --decimal
-00002d60: 2020 2020 2020 2020 2057 7269 7465 2074           Write t
-00002d70: 6865 2064 6973 6173 7365 6d62 6c79 2069  he disassembly i
-00002d80: 6e20 6465 6369 6d61 6c2e 0a20 2020 202d  n decimal..    -
-00002d90: 4520 4144 4452 2c20 2d2d 656e 6420 4144  E ADDR, --end AD
-00002da0: 4452 2020 2053 746f 7020 636f 6e76 6572  DR   Stop conver
-00002db0: 7469 6e67 2061 7420 7468 6973 2061 6464  ting at this add
-00002dc0: 7265 7373 2e0a 2020 2020 2d66 204e 2c20  ress..    -f N, 
-00002dd0: 2d2d 6669 7865 7320 4e20 2020 2020 2020  --fixes N       
-00002de0: 4170 706c 7920 6669 7865 733a 0a20 2020  Apply fixes:.   
-00002df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e00: 2020 2020 2020 2020 204e 3d30 3a20 4e6f           N=0: No
-00002e10: 6e65 2028 6465 6661 756c 7429 0a20 2020  ne (default).   
-00002e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e30: 2020 2020 2020 2020 204e 3d31 3a20 406f           N=1: @o
-00002e40: 6669 7820 6f6e 6c79 0a20 2020 2020 2020  fix only.       
-00002e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e60: 2020 2020 204e 3d32 3a20 406f 6669 7820       N=2: @ofix 
-00002e70: 616e 6420 4062 6669 780a 2020 2020 2020  and @bfix.      
-00002e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e90: 2020 2020 2020 4e3d 333a 2040 6f66 6978        N=3: @ofix
-00002ea0: 2c20 4062 6669 7820 616e 6420 4072 6669  , @bfix and @rfi
-00002eb0: 7820 2869 6d70 6c69 6573 202d 7229 0a20  x (implies -r). 
-00002ec0: 2020 202d 462c 202d 2d66 6f72 6365 2020     -F, --force  
-00002ed0: 2020 2020 2020 2020 2046 6f72 6365 2063           Force c
-00002ee0: 6f6e 7665 7273 696f 6e2c 2069 676e 6f72  onversion, ignor
-00002ef0: 696e 6720 4073 7461 7274 2061 6e64 2040  ing @start and @
-00002f00: 656e 6420 6469 7265 6374 6976 6573 2e0a  end directives..
-00002f10: 2020 2020 2d48 2c20 2d2d 6865 7820 2020      -H, --hex   
-00002f20: 2020 2020 2020 2020 2020 5772 6974 6520            Write 
-00002f30: 7468 6520 6469 7361 7373 656d 626c 7920  the disassembly 
-00002f40: 696e 2068 6578 6164 6563 696d 616c 2e0a  in hexadecimal..
-00002f50: 2020 2020 2d49 2070 3d76 2c20 2d2d 696e      -I p=v, --in
-00002f60: 6920 703d 7620 2020 2020 5365 7420 7468  i p=v     Set th
-00002f70: 6520 7661 6c75 6520 6f66 2074 6865 2063  e value of the c
-00002f80: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
-00002f90: 616d 6574 6572 2027 7027 2074 6f0a 2020  ameter 'p' to.  
-00002fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002fb0: 2020 2020 2020 2020 2776 272e 2054 6869          'v'. Thi
-00002fc0: 7320 6f70 7469 6f6e 206d 6179 2062 6520  s option may be 
-00002fd0: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
-00002fe0: 6d65 732e 0a20 2020 202d 6c2c 202d 2d6c  mes..    -l, --l
-00002ff0: 6f77 6572 2020 2020 2020 2020 2020 2057  ower           W
-00003000: 7269 7465 2074 6865 2064 6973 6173 7365  rite the disasse
-00003010: 6d62 6c79 2069 6e20 6c6f 7765 7220 6361  mbly in lower ca
-00003020: 7365 2e0a 2020 2020 2d70 2c20 2d2d 7061  se..    -p, --pa
-00003030: 636b 6167 652d 6469 7220 2020 2020 5368  ckage-dir     Sh
-00003040: 6f77 2070 6174 6820 746f 2073 6b6f 6f6c  ow path to skool
-00003050: 6b69 7420 7061 636b 6167 6520 6469 7265  kit package dire
-00003060: 6374 6f72 7920 616e 6420 6578 6974 2e0a  ctory and exit..
-00003070: 2020 2020 2d50 2070 3d76 2c20 2d2d 7365      -P p=v, --se
-00003080: 7420 703d 7620 2020 2020 5365 7420 7468  t p=v     Set th
-00003090: 6520 7661 6c75 6520 6f66 2041 534d 2077  e value of ASM w
-000030a0: 7269 7465 7220 7072 6f70 6572 7479 2027  riter property '
-000030b0: 7027 2074 6f20 2776 272e 2054 6869 730a  p' to 'v'. This.
-000030c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000030d0: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
-000030e0: 206d 6179 2062 6520 7573 6564 206d 756c   may be used mul
-000030f0: 7469 706c 6520 7469 6d65 732e 0a20 2020  tiple times..   
-00003100: 202d 712c 202d 2d71 7569 6574 2020 2020   -q, --quiet    
-00003110: 2020 2020 2020 2042 6520 7175 6965 742e         Be quiet.
-00003120: 0a20 2020 202d 722c 202d 2d72 7375 6220  .    -r, --rsub 
-00003130: 2020 2020 2020 2020 2020 2041 7070 6c79             Apply
-00003140: 2073 6166 6520 7375 6273 7469 7475 7469   safe substituti
-00003150: 6f6e 7320 2840 7373 7562 2920 616e 6420  ons (@ssub) and 
-00003160: 7265 6c6f 6361 7461 6269 6c69 7479 0a20  relocatability. 
-00003170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003180: 2020 2020 2020 2020 2073 7562 7374 6974           substit
-00003190: 7574 696f 6e73 2028 4072 7375 6229 2028  utions (@rsub) (
-000031a0: 696d 706c 6965 7320 272d 6620 3127 292e  implies '-f 1').
-000031b0: 0a20 2020 202d 2d73 686f 772d 636f 6e66  .    --show-conf
-000031c0: 6967 2020 2020 2020 2020 2053 686f 7720  ig         Show 
-000031d0: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
-000031e0: 7261 6d65 7465 7220 7661 6c75 6573 2e0a  rameter values..
-000031f0: 2020 2020 2d73 2c20 2d2d 7373 7562 2020      -s, --ssub  
-00003200: 2020 2020 2020 2020 2020 4170 706c 7920            Apply 
-00003210: 7361 6665 2073 7562 7374 6974 7574 696f  safe substitutio
-00003220: 6e73 2028 4073 7375 6229 2e0a 2020 2020  ns (@ssub)..    
-00003230: 2d53 2041 4444 522c 202d 2d73 7461 7274  -S ADDR, --start
-00003240: 2041 4444 520a 2020 2020 2020 2020 2020   ADDR.          
-00003250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003260: 5374 6172 7420 636f 6e76 6572 7469 6e67  Start converting
-00003270: 2061 7420 7468 6973 2061 6464 7265 7373   at this address
-00003280: 2e0a 2020 2020 2d75 2c20 2d2d 7570 7065  ..    -u, --uppe
-00003290: 7220 2020 2020 2020 2020 2020 5772 6974  r           Writ
-000032a0: 6520 7468 6520 6469 7361 7373 656d 626c  e the disassembl
-000032b0: 7920 696e 2075 7070 6572 2063 6173 652e  y in upper case.
-000032c0: 0a20 2020 202d 2d76 6172 206e 616d 653d  .    --var name=
-000032d0: 7661 6c75 6520 2020 2020 2044 6566 696e  value      Defin
-000032e0: 6520 6120 7661 7269 6162 6c65 2074 6861  e a variable tha
-000032f0: 7420 6361 6e20 6265 2075 7365 6420 6279  t can be used by
-00003300: 2040 6966 2061 6e64 2074 6865 2053 4d50   @if and the SMP
-00003310: 4c0a 2020 2020 2020 2020 2020 2020 2020  L.              
-00003320: 2020 2020 2020 2020 2020 2020 6d61 6372              macr
-00003330: 6f73 2e20 5468 6973 206f 7074 696f 6e20  os. This option 
-00003340: 6d61 7920 6265 2075 7365 6420 6d75 6c74  may be used mult
-00003350: 6970 6c65 2074 696d 6573 2e0a 2020 2020  iple times..    
-00003360: 2d56 2c20 2d2d 7665 7273 696f 6e20 2020  -V, --version   
-00003370: 2020 2020 2020 5368 6f77 2053 6b6f 6f6c        Show Skool
-00003380: 4b69 7420 7665 7273 696f 6e20 6e75 6d62  Kit version numb
-00003390: 6572 2061 6e64 2065 7869 742e 0a20 2020  er and exit..   
-000033a0: 202d 772c 202d 2d6e 6f2d 7761 726e 696e   -w, --no-warnin
-000033b0: 6773 2020 2020 2053 7570 7072 6573 7320  gs     Suppress 
-000033c0: 7761 726e 696e 6773 2e0a 2020 2020 2d57  warnings..    -W
-000033d0: 2043 4c41 5353 2c20 2d2d 7772 6974 6572   CLASS, --writer
-000033e0: 2043 4c41 5353 0a20 2020 2020 2020 2020   CLASS.         
-000033f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003400: 2053 7065 6369 6679 2074 6865 2041 534d   Specify the ASM
-00003410: 2077 7269 7465 7220 636c 6173 7320 746f   writer class to
-00003420: 2075 7365 2e0a 0a53 6565 203a 7265 663a   use...See :ref:
-00003430: 6061 736d 4d6f 6465 7341 6e64 4469 7265  `asmModesAndDire
-00003440: 6374 6976 6573 6020 666f 7220 6120 6465  ctives` for a de
-00003450: 7363 7269 7074 696f 6e20 6f66 2074 6865  scription of the
-00003460: 2060 6040 7373 7562 6060 2061 6e64 0a60   ``@ssub`` and.`
-00003470: 6040 7273 7562 6060 2073 7562 7374 6974  `@rsub`` substit
-00003480: 7574 696f 6e20 6d6f 6465 732c 2061 6e64  ution modes, and
-00003490: 2074 6865 2060 6040 6f66 6978 6060 2c20   the ``@ofix``, 
-000034a0: 6060 4062 6669 7860 6020 616e 6420 6060  ``@bfix`` and ``
-000034b0: 4072 6669 7860 6020 6275 6766 6978 0a6d  @rfix`` bugfix.m
-000034c0: 6f64 6573 2e0a 0a53 6565 2074 6865 203a  odes...See the :
-000034d0: 7265 663a 6073 6574 6020 6469 7265 6374  ref:`set` direct
-000034e0: 6976 6520 666f 7220 696e 666f 726d 6174  ive for informat
-000034f0: 696f 6e20 6f6e 2074 6865 2041 534d 2077  ion on the ASM w
-00003500: 7269 7465 7220 7072 6f70 6572 7469 6573  riter properties
-00003510: 2074 6861 740a 6361 6e20 6265 2073 6574   that.can be set
-00003520: 2062 7920 7468 6520 6060 2d2d 7365 7460   by the ``--set`
-00003530: 6020 6f70 7469 6f6e 2e0a 0a2e 2e20 5f73  ` option..... _s
-00003540: 6b6f 6f6c 3261 736d 2d63 6f6e 663a 0a0a  kool2asm-conf:..
-00003550: 436f 6e66 6967 7572 6174 696f 6e0a 5e5e  Configuration.^^
-00003560: 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 6073 6b6f  ^^^^^^^^^^^.`sko
-00003570: 6f6c 3261 736d 2e70 7960 2077 696c 6c20  ol2asm.py` will 
-00003580: 7265 6164 2063 6f6e 6669 6775 7261 7469  read configurati
-00003590: 6f6e 2066 726f 6d20 6120 6669 6c65 206e  on from a file n
-000035a0: 616d 6564 2060 736b 6f6f 6c6b 6974 2e69  amed `skoolkit.i
-000035b0: 6e69 6020 696e 2074 6865 0a63 7572 7265  ni` in the.curre
-000035c0: 6e74 2077 6f72 6b69 6e67 2064 6972 6563  nt working direc
-000035d0: 746f 7279 206f 7220 696e 2060 7e2f 2e73  tory or in `~/.s
-000035e0: 6b6f 6f6c 6b69 7460 2c20 6966 2070 7265  koolkit`, if pre
-000035f0: 7365 6e74 2e20 5468 6520 7265 636f 676e  sent. The recogn
-00003600: 6973 6564 0a63 6f6e 6669 6775 7261 7469  ised.configurati
-00003610: 6f6e 2070 6172 616d 6574 6572 7320 6172  on parameters ar
-00003620: 653a 0a0a 2a20 6060 4164 6472 6573 7360  e:..* ``Address`
-00003630: 6020 2d20 7468 6520 666f 726d 6174 206f  ` - the format o
-00003640: 6620 7468 6520 6465 6661 756c 7420 6c69  f the default li
-00003650: 6e6b 2074 6578 7420 666f 7220 7468 6520  nk text for the 
-00003660: 3a72 6566 3a60 5260 206d 6163 726f 2077  :ref:`R` macro w
-00003670: 6865 6e0a 2020 7468 6520 7461 7267 6574  hen.  the target
-00003680: 2061 6464 7265 7373 2068 6173 206e 6f20   address has no 
-00003690: 6c61 6265 6c20 2864 6566 6175 6c74 3a20  label (default: 
-000036a0: 2727 293b 2074 6869 7320 666f 726d 6174  ''); this format
-000036b0: 2073 7472 696e 6720 7265 636f 676e 6973   string recognis
-000036c0: 6573 0a20 2074 6865 2072 6570 6c61 6365  es.  the replace
-000036d0: 6d65 6e74 2066 6965 6c64 2060 6061 6464  ment field ``add
-000036e0: 7265 7373 6060 3b20 6966 2074 6865 2066  ress``; if the f
-000036f0: 6f72 6d61 7420 7374 7269 6e67 2069 7320  ormat string is 
-00003700: 626c 616e 6b2c 2074 6865 2061 6464 7265  blank, the addre
-00003710: 7373 0a20 2069 7320 666f 726d 6174 7465  ss.  is formatte
-00003720: 6420 6578 6163 746c 7920 6173 2069 7420  d exactly as it 
-00003730: 6170 7065 6172 7320 696e 2074 6865 2073  appears in the s
-00003740: 6b6f 6f6c 2066 696c 6520 2877 6974 686f  kool file (witho
-00003750: 7574 2061 6e79 2060 6024 6060 0a20 2070  ut any ``$``.  p
-00003760: 7265 6669 7829 0a2a 2060 6042 6173 6560  refix).* ``Base`
-00003770: 6020 2d20 636f 6e76 6572 7420 6164 6472  ` - convert addr
-00003780: 6573 7365 7320 616e 6420 696e 7374 7275  esses and instru
-00003790: 6374 696f 6e20 6f70 6572 616e 6473 2074  ction operands t
-000037a0: 6f20 6865 7861 6465 6369 6d61 6c20 2860  o hexadecimal (`
-000037b0: 6031 3660 6029 0a20 206f 7220 6465 6369  `16``).  or deci
-000037c0: 6d61 6c20 2860 6031 3060 6029 2c20 6f72  mal (``10``), or
-000037d0: 206c 6561 7665 2074 6865 6d20 6173 2074   leave them as t
-000037e0: 6865 7920 6172 6520 2860 6030 6060 2c20  hey are (``0``, 
-000037f0: 7468 6520 6465 6661 756c 7429 0a2a 2060  the default).* `
-00003800: 6043 6173 6560 6020 2d20 7772 6974 6520  `Case`` - write 
-00003810: 7468 6520 6469 7361 7373 656d 626c 7920  the disassembly 
-00003820: 696e 206c 6f77 6572 2063 6173 6520 2860  in lower case (`
-00003830: 6031 6060 2920 6f72 2075 7070 6572 2063  `1``) or upper c
-00003840: 6173 6520 2860 6032 6060 292c 0a20 206f  ase (``2``),.  o
-00003850: 7220 6c65 6176 6520 6974 2061 7320 6974  r leave it as it
-00003860: 2069 7320 2860 6030 6060 2c20 7468 6520   is (``0``, the 
-00003870: 6465 6661 756c 7429 0a2a 2060 6043 7265  default).* ``Cre
-00003880: 6174 654c 6162 656c 7360 6020 2d20 6372  ateLabels`` - cr
-00003890: 6561 7465 2064 6566 6175 6c74 206c 6162  eate default lab
-000038a0: 656c 7320 666f 7220 756e 6c61 6265 6c6c  els for unlabell
-000038b0: 6564 2069 6e73 7472 7563 7469 6f6e 7320  ed instructions 
-000038c0: 2860 6031 6060 292c 0a20 206f 7220 646f  (``1``),.  or do
-000038d0: 6e27 7420 2860 6030 6060 2c20 7468 6520  n't (``0``, the 
-000038e0: 6465 6661 756c 7429 0a2a 2060 6045 6e74  default).* ``Ent
-000038f0: 7279 4c61 6265 6c60 6020 2d20 7468 6520  ryLabel`` - the 
-00003900: 666f 726d 6174 206f 6620 7468 6520 6465  format of the de
-00003910: 6661 756c 7420 6c61 6265 6c20 666f 7220  fault label for 
-00003920: 7468 6520 6669 7273 7420 696e 7374 7275  the first instru
-00003930: 6374 696f 6e20 696e 0a20 2061 2072 6f75  ction in.  a rou
-00003940: 7469 6e65 206f 7220 6461 7461 2062 6c6f  tine or data blo
-00003950: 636b 2028 6465 6661 756c 743a 2060 604c  ck (default: ``L
-00003960: 7b61 6464 7265 7373 7d60 6029 0a2a 2060  {address}``).* `
-00003970: 6045 6e74 7279 506f 696e 744c 6162 656c  `EntryPointLabel
-00003980: 6060 202d 2074 6865 2066 6f72 6d61 7420  `` - the format 
-00003990: 6f66 2074 6865 2064 6566 6175 6c74 206c  of the default l
-000039a0: 6162 656c 2066 6f72 2061 6e20 696e 7374  abel for an inst
-000039b0: 7275 6374 696f 6e0a 2020 6f74 6865 7220  ruction.  other 
-000039c0: 7468 616e 2074 6865 2066 6972 7374 2069  than the first i
-000039d0: 6e20 6120 726f 7574 696e 6520 6f72 2064  n a routine or d
-000039e0: 6174 6120 626c 6f63 6b20 2864 6566 6175  ata block (defau
-000039f0: 6c74 3a20 6060 7b6d 6169 6e7d 5f7b 696e  lt: ``{main}_{in
-00003a00: 6465 787d 6060 290a 2a20 6060 5175 6965  dex}``).* ``Quie
-00003a10: 7460 6020 2d20 6265 2071 7569 6574 2028  t`` - be quiet (
-00003a20: 6060 3160 6029 206f 7220 7665 7262 6f73  ``1``) or verbos
-00003a30: 6520 2860 6030 6060 2c20 7468 6520 6465  e (``0``, the de
-00003a40: 6661 756c 7429 0a2a 2060 6053 6574 2d70  fault).* ``Set-p
-00003a50: 726f 7065 7274 7960 6020 2d20 7365 7420  roperty`` - set 
-00003a60: 616e 2041 534d 2077 7269 7465 7220 7072  an ASM writer pr
-00003a70: 6f70 6572 7479 2076 616c 7565 2c20 652e  operty value, e.
-00003a80: 672e 2060 6053 6574 2d62 756c 6c65 743d  g. ``Set-bullet=
-00003a90: 2b60 600a 2020 2873 6565 2074 6865 203a  +``.  (see the :
-00003aa0: 7265 663a 6073 6574 6020 6469 7265 6374  ref:`set` direct
-00003ab0: 6976 6520 666f 7220 6120 6c69 7374 206f  ive for a list o
-00003ac0: 6620 6176 6169 6c61 626c 6520 7072 6f70  f available prop
-00003ad0: 6572 7469 6573 290a 2a20 6060 5465 6d70  erties).* ``Temp
-00003ae0: 6c61 7465 7360 6020 2d20 6669 6c65 2066  lates`` - file f
-00003af0: 726f 6d20 7768 6963 6820 746f 2072 6561  rom which to rea
-00003b00: 6420 6375 7374 6f6d 203a 7265 663a 6061  d custom :ref:`a
-00003b10: 736d 5465 6d70 6c61 7465 7360 0a2a 2060  smTemplates`.* `
-00003b20: 6057 6172 6e69 6e67 7360 6020 2d20 7368  `Warnings`` - sh
-00003b30: 6f77 2077 6172 6e69 6e67 7320 2860 6031  ow warnings (``1
-00003b40: 6060 2c20 7468 6520 6465 6661 756c 7429  ``, the default)
-00003b50: 2c20 6f72 2073 7570 7072 6573 7320 7468  , or suppress th
-00003b60: 656d 2028 6060 3060 6029 0a0a 6060 456e  em (``0``)..``En
-00003b70: 7472 794c 6162 656c 6060 2061 6e64 2060  tryLabel`` and `
-00003b80: 6045 6e74 7279 506f 696e 744c 6162 656c  `EntryPointLabel
-00003b90: 6060 2061 7265 2073 7461 6e64 6172 6420  `` are standard 
-00003ba0: 5079 7468 6f6e 2066 6f72 6d61 7420 7374  Python format st
-00003bb0: 7269 6e67 732e 0a60 6045 6e74 7279 4c61  rings..``EntryLa
-00003bc0: 6265 6c60 6020 7265 636f 676e 6973 6573  bel`` recognises
-00003bd0: 2074 6865 2066 6f6c 6c6f 7769 6e67 2072   the following r
-00003be0: 6570 6c61 6365 6d65 6e74 2066 6965 6c64  eplacement field
-00003bf0: 733a 0a0a 2a20 6060 6164 6472 6573 7360  s:..* ``address`
-00003c00: 6020 2d20 7468 6520 6164 6472 6573 7320  ` - the address 
-00003c10: 6f66 2074 6865 2072 6f75 7469 6e65 206f  of the routine o
-00003c20: 7220 6461 7461 2062 6c6f 636b 2061 7320  r data block as 
-00003c30: 6974 2061 7070 6561 7273 2069 6e20 7468  it appears in th
-00003c40: 650a 2020 736b 6f6f 6c20 6669 6c65 0a2a  e.  skool file.*
-00003c50: 2060 606c 6f63 6174 696f 6e60 6020 2d20   ``location`` - 
-00003c60: 7468 6520 6164 6472 6573 7320 6f66 2074  the address of t
-00003c70: 6865 2072 6f75 7469 6e65 206f 7220 6461  he routine or da
-00003c80: 7461 2062 6c6f 636b 2061 7320 616e 2069  ta block as an i
-00003c90: 6e74 6567 6572 0a0a 6060 456e 7472 7950  nteger..``EntryP
-00003ca0: 6f69 6e74 4c61 6265 6c60 6020 7265 636f  ointLabel`` reco
-00003cb0: 676e 6973 6573 2074 6865 2066 6f6c 6c6f  gnises the follo
-00003cc0: 7769 6e67 2072 6570 6c61 6365 6d65 6e74  wing replacement
-00003cd0: 2066 6965 6c64 733a 0a0a 2a20 6060 6164   fields:..* ``ad
-00003ce0: 6472 6573 7360 6020 2d20 7468 6520 6164  dress`` - the ad
-00003cf0: 6472 6573 7320 6f66 2074 6865 2069 6e73  dress of the ins
-00003d00: 7472 7563 7469 6f6e 2061 7320 6974 2061  truction as it a
-00003d10: 7070 6561 7273 2069 6e20 7468 6520 736b  ppears in the sk
-00003d20: 6f6f 6c20 6669 6c65 0a2a 2060 6069 6e64  ool file.* ``ind
-00003d30: 6578 6060 202d 2030 2066 6f72 2074 6865  ex`` - 0 for the
-00003d40: 2066 6972 7374 2075 6e6c 6162 656c 6c65   first unlabelle
-00003d50: 6420 696e 7374 7275 6374 696f 6e20 696e  d instruction in
-00003d60: 2074 6865 2072 6f75 7469 6e65 206f 7220   the routine or 
-00003d70: 6461 7461 0a20 2062 6c6f 636b 2c20 3120  data.  block, 1 
-00003d80: 666f 7220 7468 6520 7365 636f 6e64 2c20  for the second, 
-00003d90: 6574 632e 0a2a 2060 606c 6f63 6174 696f  etc..* ``locatio
-00003da0: 6e60 6020 2d20 7468 6520 6164 6472 6573  n`` - the addres
-00003db0: 7320 6f66 2074 6865 2069 6e73 7472 7563  s of the instruc
-00003dc0: 7469 6f6e 2061 7320 616e 2069 6e74 6567  tion as an integ
-00003dd0: 6572 0a2a 2060 606d 6169 6e60 6020 2d20  er.* ``main`` - 
-00003de0: 7468 6520 6c61 6265 6c20 6f66 2074 6865  the label of the
-00003df0: 2066 6972 7374 2069 6e73 7472 7563 7469   first instructi
-00003e00: 6f6e 2069 6e20 7468 6520 726f 7574 696e  on in the routin
-00003e10: 6520 6f72 2064 6174 6120 626c 6f63 6b0a  e or data block.
-00003e20: 0a43 6f6e 6669 6775 7261 7469 6f6e 2070  .Configuration p
-00003e30: 6172 616d 6574 6572 7320 6d75 7374 2061  arameters must a
-00003e40: 7070 6561 7220 696e 2061 2060 605b 736b  ppear in a ``[sk
-00003e50: 6f6f 6c32 6173 6d5d 6060 2073 6563 7469  ool2asm]`` secti
-00003e60: 6f6e 2e20 466f 7220 6578 616d 706c 652c  on. For example,
-00003e70: 0a74 6f20 6d61 6b65 2060 736b 6f6f 6c32  .to make `skool2
-00003e80: 6173 6d2e 7079 6020 7772 6974 6520 7468  asm.py` write th
-00003e90: 6520 6469 7361 7373 656d 626c 7920 696e  e disassembly in
-00003ea0: 2068 6578 6164 6563 696d 616c 2077 6974   hexadecimal wit
-00003eb0: 6820 6120 6c69 6e65 2077 6964 7468 0a6f  h a line width.o
-00003ec0: 6620 3132 3020 6368 6172 6163 7465 7273  f 120 characters
-00003ed0: 2062 7920 6465 6661 756c 7420 2877 6974   by default (wit
-00003ee0: 686f 7574 2068 6176 696e 6720 746f 2075  hout having to u
-00003ef0: 7365 2074 6865 2060 602d 4860 6020 616e  se the ``-H`` an
-00003f00: 6420 6060 2d50 6060 0a6f 7074 696f 6e73  d ``-P``.options
-00003f10: 206f 6e20 7468 6520 636f 6d6d 616e 6420   on the command 
-00003f20: 6c69 6e65 292c 2061 6464 2074 6865 2066  line), add the f
-00003f30: 6f6c 6c6f 7769 6e67 2073 6563 7469 6f6e  ollowing section
-00003f40: 2074 6f20 6073 6b6f 6f6c 6b69 742e 696e   to `skoolkit.in
-00003f50: 6960 3a3a 0a0a 2020 5b73 6b6f 6f6c 3261  i`::..  [skool2a
-00003f60: 736d 5d0a 2020 4261 7365 3d31 360a 2020  sm].  Base=16.  
-00003f70: 5365 742d 6c69 6e65 2d77 6964 7468 3d31  Set-line-width=1
-00003f80: 3230 0a0a 436f 6e66 6967 7572 6174 696f  20..Configuratio
-00003f90: 6e20 7061 7261 6d65 7465 7273 206d 6179  n parameters may
-00003fa0: 2061 6c73 6f20 6265 2073 6574 206f 6e20   also be set on 
-00003fb0: 7468 6520 636f 6d6d 616e 6420 6c69 6e65  the command line
-00003fc0: 2062 7920 7573 696e 6720 7468 650a 6060   by using the.``
-00003fd0: 2d2d 696e 6960 6020 6f70 7469 6f6e 2e20  --ini`` option. 
-00003fe0: 5061 7261 6d65 7465 7220 7661 6c75 6573  Parameter values
-00003ff0: 2073 6574 2074 6869 7320 7761 7920 7769   set this way wi
-00004000: 6c6c 206f 7665 7272 6964 6520 616e 7920  ll override any 
-00004010: 666f 756e 6420 696e 0a60 736b 6f6f 6c6b  found in.`skoolk
-00004020: 6974 2e69 6e69 602e 0a0a 2b2d 2d2d 2d2d  it.ini`...+-----
-00004030: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004070: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 5665 7273  --------+.| Vers
-00004080: 696f 6e20 7c20 4368 616e 6765 7320 2020  ion | Changes   
-00004090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040c0: 2020 2020 2020 2020 7c0a 2b3d 3d3d 3d3d          |.+=====
-000040d0: 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d  ====+===========
-000040e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000040f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004100: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00004110: 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 382e 3520  ========+.| 8.5 
-00004120: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004130: 6060 4164 6472 6573 7360 602c 2060 6045  ``Address``, ``E
-00004140: 6e74 7279 4c61 6265 6c60 6020 616e 6420  ntryLabel`` and 
-00004150: 6060 456e 7472 7950 6f69 6e74 4c61 6265  ``EntryPointLabe
-00004160: 6c60 6020 2020 2020 7c0a 7c20 2020 2020  l``     |.|     
-00004170: 2020 2020 7c20 636f 6e66 6967 7572 6174      | configurat
-00004180: 696f 6e20 7061 7261 6d65 7465 7273 2020  ion parameters  
-00004190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041b0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000041c0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000041d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000041e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000041f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004200: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 372e 3220  --------+.| 7.2 
-00004210: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004220: 6060 5465 6d70 6c61 7465 7360 6020 636f  ``Templates`` co
-00004230: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
-00004240: 6d65 7465 7220 616e 6420 7375 7070 6f72  meter and suppor
-00004250: 7420 666f 7220 2020 7c0a 7c20 2020 2020  t for   |.|     
-00004260: 2020 2020 7c20 3a72 6566 3a60 6173 6d54      | :ref:`asmT
-00004270: 656d 706c 6174 6573 6020 2020 2020 2020  emplates`       
-00004280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042a0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000042b0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000042c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000042d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000042e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000042f0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 372e 3020  --------+.| 7.0 
-00004300: 2020 2020 7c20 3a72 6566 3a60 6e6f 6e45      | :ref:`nonE
-00004310: 6e74 7279 426c 6f63 6b73 6020 6172 6520  ntryBlocks` are 
-00004320: 7265 7072 6f64 7563 6564 2076 6572 6261  reproduced verba
-00004330: 7469 6d3b 2061 6464 6564 2074 6865 2020  tim; added the  
-00004340: 2020 2020 2020 2020 7c0a 7c20 2020 2020          |.|     
-00004350: 2020 2020 7c20 6060 2d2d 666f 7263 6560      | ``--force`
-00004360: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
-00004370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b20: 0a0a 2e2e 205f 727a 7869 6e66 6f2e 7079  .... _rzxinfo.py
+00002b30: 3a0a 0a72 7a78 696e 666f 2e70 790a 2d2d  :..rzxinfo.py.--
+00002b40: 2d2d 2d2d 2d2d 2d2d 0a60 727a 7869 6e66  --------.`rzxinf
+00002b50: 6f2e 7079 6020 7368 6f77 7320 7468 6520  o.py` shows the 
+00002b60: 626c 6f63 6b73 2069 6e20 6f72 2065 7874  blocks in or ext
+00002b70: 7261 6374 7320 7468 6520 736e 6170 7368  racts the snapsh
+00002b80: 6f74 7320 6672 6f6d 2061 6e20 525a 5820  ots from an RZX 
+00002b90: 6669 6c65 2e0a 466f 7220 6578 616d 706c  file..For exampl
+00002ba0: 653a 3a0a 0a20 2024 2072 7a78 696e 666f  e::..  $ rzxinfo
+00002bb0: 2e70 7920 6761 6d65 2e72 7a78 0a0a 546f  .py game.rzx..To
+00002bc0: 206c 6973 7420 7468 6520 6f70 7469 6f6e   list the option
+00002bd0: 7320 7375 7070 6f72 7465 6420 6279 2060  s supported by `
+00002be0: 727a 7869 6e66 6f2e 7079 602c 2072 756e  rzxinfo.py`, run
+00002bf0: 2069 7420 7769 7468 206e 6f20 6172 6775   it with no argu
+00002c00: 6d65 6e74 733a 3a0a 0a20 2075 7361 6765  ments::..  usage
+00002c10: 3a20 727a 7869 6e66 6f2e 7079 205b 6f70  : rzxinfo.py [op
+00002c20: 7469 6f6e 735d 2046 494c 450a 0a20 2053  tions] FILE..  S
+00002c30: 686f 7720 7468 6520 626c 6f63 6b73 2069  how the blocks i
+00002c40: 6e20 6f72 2065 7874 7261 6374 2074 6865  n or extract the
+00002c50: 2073 6e61 7073 686f 7473 2066 726f 6d20   snapshots from 
+00002c60: 616e 2052 5a58 2066 696c 652e 0a0a 2020  an RZX file...  
+00002c70: 4f70 7469 6f6e 733a 0a20 2020 202d 2d65  Options:.    --e
+00002c80: 7874 7261 6374 2020 2020 2020 4578 7472  xtract      Extr
+00002c90: 6163 7420 736e 6170 7368 6f74 732e 0a20  act snapshots.. 
+00002ca0: 2020 202d 2d66 7261 6d65 7320 2020 2020     --frames     
+00002cb0: 2020 5368 6f77 2074 6865 2063 6f6e 7465    Show the conte
+00002cc0: 6e74 7320 6f66 2065 7665 7279 2066 7261  nts of every fra
+00002cd0: 6d65 2e0a 2020 2020 2d56 2c20 2d2d 7665  me..    -V, --ve
+00002ce0: 7273 696f 6e20 2053 686f 7720 536b 6f6f  rsion  Show Skoo
+00002cf0: 6c4b 6974 2076 6572 7369 6f6e 206e 756d  lKit version num
+00002d00: 6265 7220 616e 6420 6578 6974 2e0a 0a2b  ber and exit...+
+00002d10: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00002d20: 2d2d 2d2b 0a7c 2056 6572 7369 6f6e 207c  ---+.| Version |
+00002d30: 2043 6861 6e67 6573 207c 0a2b 3d3d 3d3d   Changes |.+====
+00002d40: 3d3d 3d3d 3d2b 3d3d 3d3d 3d3d 3d3d 3d2b  =====+=========+
+00002d50: 0a7c 2039 2e32 2020 2020 207c 204e 6577  .| 9.2     | New
+00002d60: 2020 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d       |.+--------
+00002d70: 2d2b 2d2d 2d2d 2d2d 2d2d 2d2b 0a0a 2e2e  -+---------+....
+00002d80: 205f 727a 7870 6c61 792e 7079 3a0a 0a72   _rzxplay.py:..r
+00002d90: 7a78 706c 6179 2e70 790a 2d2d 2d2d 2d2d  zxplay.py.------
+00002da0: 2d2d 2d2d 0a60 727a 7870 6c61 792e 7079  ----.`rzxplay.py
+00002db0: 6020 706c 6179 7320 616e 2052 5a58 2066  ` plays an RZX f
+00002dc0: 696c 652e 2046 6f72 2065 7861 6d70 6c65  ile. For example
+00002dd0: 3a3a 0a0a 2020 2420 727a 7870 6c61 792e  ::..  $ rzxplay.
+00002de0: 7079 2067 616d 652e 727a 780a 0a54 6f20  py game.rzx..To 
+00002df0: 6c69 7374 2074 6865 206f 7074 696f 6e73  list the options
+00002e00: 2073 7570 706f 7274 6564 2062 7920 6072   supported by `r
+00002e10: 7a78 706c 6179 2e70 7960 2c20 7275 6e20  zxplay.py`, run 
+00002e20: 6974 2077 6974 6820 6e6f 2061 7267 756d  it with no argum
+00002e30: 656e 7473 3a3a 0a0a 2020 7573 6167 653a  ents::..  usage:
+00002e40: 2072 7a78 706c 6179 2e70 7920 5b6f 7074   rzxplay.py [opt
+00002e50: 696f 6e73 5d20 4649 4c45 205b 4f55 5446  ions] FILE [OUTF
+00002e60: 494c 455d 0a0a 2020 506c 6179 2061 6e20  ILE]..  Play an 
+00002e70: 525a 5820 6669 6c65 2e20 4966 2027 4f55  RZX file. If 'OU
+00002e80: 5446 494c 4527 2069 7320 6769 7665 6e2c  TFILE' is given,
+00002e90: 2061 6e20 535a 5820 6f72 205a 3830 2073   an SZX or Z80 s
+00002ea0: 6e61 7073 686f 7420 6f72 2061 6e20 525a  napshot or an RZ
+00002eb0: 5820 6669 6c65 0a20 2069 7320 7772 6974  X file.  is writ
+00002ec0: 7465 6e20 6166 7465 7220 706c 6179 6261  ten after playba
+00002ed0: 636b 2068 6173 2063 6f6d 706c 6574 6564  ck has completed
+00002ee0: 2e0a 0a20 204f 7074 696f 6e73 3a0a 2020  ...  Options:.  
+00002ef0: 2020 2d2d 666c 6167 7320 464c 4147 5320    --flags FLAGS 
+00002f00: 2020 2053 6574 2070 6c61 7962 6163 6b20     Set playback 
+00002f10: 666c 6167 732e 2044 6f20 272d 2d66 6c61  flags. Do '--fla
+00002f20: 6773 2068 656c 7027 2066 6f72 206d 6f72  gs help' for mor
+00002f30: 6520 696e 666f 726d 6174 696f 6e2e 0a20  e information.. 
+00002f40: 2020 202d 2d66 6f72 6365 2020 2020 2020     --force      
+00002f50: 2020 2020 466f 7263 6520 706c 6179 6261      Force playba
+00002f60: 636b 2077 6865 6e20 756e 7375 7070 6f72  ck when unsuppor
+00002f70: 7465 6420 6861 7264 7761 7265 2069 7320  ted hardware is 
+00002f80: 6465 7465 6374 6564 2e0a 2020 2020 2d2d  detected..    --
+00002f90: 6670 7320 4650 5320 2020 2020 2020 2052  fps FPS        R
+00002fa0: 756e 2061 7420 7468 6973 206d 616e 7920  un at this many 
+00002fb0: 6672 616d 6573 2070 6572 2073 6563 6f6e  frames per secon
+00002fc0: 6420 2864 6566 6175 6c74 3a20 3530 292e  d (default: 50).
+00002fd0: 2030 206d 6561 6e73 0a20 2020 2020 2020   0 means.       
+00002fe0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00002ff0: 7869 6d75 6d20 7370 6565 642e 0a20 2020  ximum speed..   
+00003000: 202d 2d6d 6170 2046 494c 4520 2020 2020   --map FILE     
+00003010: 2020 4c6f 6720 6164 6472 6573 7365 7320    Log addresses 
+00003020: 6f66 2065 7865 6375 7465 6420 696e 7374  of executed inst
+00003030: 7275 6374 696f 6e73 2074 6f20 6120 6669  ructions to a fi
+00003040: 6c65 2e0a 2020 2020 2d2d 6e6f 2d73 6372  le..    --no-scr
+00003050: 6565 6e20 2020 2020 2052 756e 2077 6974  een      Run wit
+00003060: 686f 7574 2061 2073 6372 6565 6e2e 0a20  hout a screen.. 
+00003070: 2020 202d 2d70 7974 686f 6e20 2020 2020     --python     
+00003080: 2020 2020 5573 6520 7468 6520 7075 7265      Use the pure
+00003090: 2050 7974 686f 6e20 5a38 3020 7369 6d75   Python Z80 simu
+000030a0: 6c61 746f 722e 0a20 2020 202d 2d71 7569  lator..    --qui
+000030b0: 6574 2020 2020 2020 2020 2020 446f 6e27  et          Don'
+000030c0: 7420 7072 696e 7420 7072 6f67 7265 7373  t print progress
+000030d0: 2070 6572 6365 6e74 6167 652e 0a20 2020   percentage..   
+000030e0: 202d 2d73 6361 6c65 2053 4341 4c45 2020   --scale SCALE  
+000030f0: 2020 5363 616c 6520 6469 7370 6c61 7920    Scale display 
+00003100: 7570 2062 7920 7468 6973 2066 6163 746f  up by this facto
+00003110: 7220 2831 2d34 3b20 6465 6661 756c 743a  r (1-4; default:
+00003120: 2032 292e 0a20 2020 202d 2d73 6e61 7073   2)..    --snaps
+00003130: 686f 7420 4649 4c45 2020 5370 6563 6966  hot FILE  Specif
+00003140: 7920 616e 2065 7874 6572 6e61 6c20 736e  y an external sn
+00003150: 6170 7368 6f74 2066 696c 6520 746f 2073  apshot file to s
+00003160: 7461 7274 2077 6974 682e 0a20 2020 202d  tart with..    -
+00003170: 2d73 746f 7020 4652 414d 4553 2020 2020  -stop FRAMES    
+00003180: 5374 6f70 2061 6674 6572 2070 6c61 7969  Stop after playi
+00003190: 6e67 2074 6869 7320 6d61 6e79 2066 7261  ng this many fra
+000031a0: 6d65 732e 0a20 2020 202d 2d74 7261 6365  mes..    --trace
+000031b0: 2046 494c 4520 2020 2020 4c6f 6720 6578   FILE     Log ex
+000031c0: 6563 7574 6564 2069 6e73 7472 7563 7469  ecuted instructi
+000031d0: 6f6e 7320 746f 2061 2066 696c 652e 0a20  ons to a file.. 
+000031e0: 2020 202d 562c 202d 2d76 6572 7369 6f6e     -V, --version
+000031f0: 2020 2020 5368 6f77 2053 6b6f 6f6c 4b69      Show SkoolKi
+00003200: 7420 7665 7273 696f 6e20 6e75 6d62 6572  t version number
+00003210: 2061 6e64 2065 7869 742e 0a0a 6072 7a78   and exit...`rzx
+00003220: 706c 6179 2e70 7960 2063 616e 2070 6c61  play.py` can pla
+00003230: 7920 525a 5820 6669 6c65 7320 7468 6174  y RZX files that
+00003240: 2077 6572 6520 7265 636f 7264 6564 2069   were recorded i
+00003250: 6e20 3438 4b2c 2031 3238 4b20 6f72 202b  n 48K, 128K or +
+00003260: 3220 6d6f 6465 2077 6974 680a 6e6f 2070  2 mode with.no p
+00003270: 6572 6970 6865 7261 6c73 2028 652e 672e  eripherals (e.g.
+00003280: 2049 6e74 6572 6661 6365 2031 2920 6174   Interface 1) at
+00003290: 7461 6368 6564 2e20 5468 6520 6060 2d2d  tached. The ``--
+000032a0: 666f 7263 6560 6020 6f70 7469 6f6e 2063  force`` option c
+000032b0: 616e 2062 6520 7573 6564 0a74 6f20 6d61  an be used.to ma
+000032c0: 6b65 2060 727a 7870 6c61 792e 7079 6020  ke `rzxplay.py` 
+000032d0: 6174 7465 6d70 7420 706c 6179 6261 636b  attempt playback
+000032e0: 206f 6620 6669 6c65 7320 7468 6174 2077   of files that w
+000032f0: 6572 6520 7265 636f 7264 6564 206f 6e0a  ere recorded on.
+00003300: 756e 7375 7070 6f72 7465 6420 6d61 6368  unsupported mach
+00003310: 696e 6573 206f 7220 7769 7468 2075 6e73  ines or with uns
+00003320: 7570 706f 7274 6564 2068 6172 6477 6172  upported hardwar
+00003330: 6520 6174 7461 6368 6564 2c20 6275 7420  e attached, but 
+00003340: 7468 6579 2061 7265 0a75 6e6c 696b 656c  they are.unlikel
+00003350: 7920 746f 2070 6c61 7920 746f 2074 6865  y to play to the
+00003360: 2065 6e64 2e0a 0a49 6620 6070 7967 616d   end...If `pygam
+00003370: 6560 5f20 6973 2069 6e73 7461 6c6c 6564  e`_ is installed
+00003380: 2c20 6072 7a78 706c 6179 2e70 7960 2077  , `rzxplay.py` w
+00003390: 696c 6c20 7573 6520 6974 2074 6f20 7265  ill use it to re
+000033a0: 6e64 6572 2074 6865 2053 7065 6374 7275  nder the Spectru
+000033b0: 6d27 730a 7363 7265 656e 2063 6f6e 7465  m's.screen conte
+000033c0: 6e74 7320 6174 2035 3020 6672 616d 6573  nts at 50 frames
+000033d0: 2070 6572 2073 6563 6f6e 6420 6279 2064   per second by d
+000033e0: 6566 6175 6c74 2e20 5573 6520 7468 6520  efault. Use the 
+000033f0: 6060 2d2d 6670 7360 6020 6f70 7469 6f6e  ``--fps`` option
+00003400: 0a74 6f20 6368 616e 6765 2074 6865 2066  .to change the f
+00003410: 7261 6d65 2072 6174 652e 2053 7065 6369  rame rate. Speci
+00003420: 6679 696e 6720 6060 2d2d 6670 7320 3060  fying ``--fps 0`
+00003430: 6020 6d61 6b65 7320 6072 7a78 706c 6179  ` makes `rzxplay
+00003440: 2e70 7960 2072 756e 2061 740a 6d61 7869  .py` run at.maxi
+00003450: 6d75 6d20 7370 6565 642e 2054 6f20 6469  mum speed. To di
+00003460: 7361 626c 6520 7468 6520 7363 7265 656e  sable the screen
+00003470: 2061 6e64 206d 616b 6520 6072 7a78 706c   and make `rzxpl
+00003480: 6179 2e70 7960 2072 756e 2065 7665 6e20  ay.py` run even 
+00003490: 6661 7374 6572 2c20 7573 650a 7468 6520  faster, use.the 
+000034a0: 6060 2d2d 6e6f 2d73 6372 6565 6e60 6020  ``--no-screen`` 
+000034b0: 6f70 7469 6f6e 2e0a 0a54 6865 2060 602d  option...The ``-
+000034c0: 2d6d 6170 6060 206f 7074 696f 6e20 6361  -map`` option ca
+000034d0: 6e20 6265 2075 7365 6420 746f 206c 6f67  n be used to log
+000034e0: 2074 6865 2061 6464 7265 7373 6573 206f   the addresses o
+000034f0: 6620 696e 7374 7275 6374 696f 6e73 2065  f instructions e
+00003500: 7865 6375 7465 640a 6475 7269 6e67 2070  xecuted.during p
+00003510: 6c61 7962 6163 6b20 746f 2061 2066 696c  layback to a fil
+00003520: 652e 2054 6869 7320 6669 6c65 2063 616e  e. This file can
+00003530: 2074 6865 6e20 6265 2075 7365 6420 6279   then be used by
+00003540: 203a 7265 663a 6073 6e61 3263 746c 2e70   :ref:`sna2ctl.p
+00003550: 7960 2074 6f0a 7072 6f64 7563 6520 6120  y` to.produce a 
+00003560: 636f 6e74 726f 6c20 6669 6c65 2e20 4966  control file. If
+00003570: 2074 6865 2066 696c 6520 7370 6563 6966   the file specif
+00003580: 6965 6420 6279 2074 6865 2060 602d 2d6d  ied by the ``--m
+00003590: 6170 6060 206f 7074 696f 6e20 616c 7265  ap`` option alre
+000035a0: 6164 790a 6578 6973 7473 2c20 616e 7920  ady.exists, any 
+000035b0: 6164 6472 6573 7365 7320 6974 2063 6f6e  addresses it con
+000035c0: 7461 696e 7320 7769 6c6c 2062 6520 6d65  tains will be me
+000035d0: 7267 6564 2077 6974 6820 7468 6f73 6520  rged with those 
+000035e0: 6f66 2074 6865 2069 6e73 7472 7563 7469  of the instructi
+000035f0: 6f6e 730a 6578 6563 7574 6564 2e0a 0a54  ons.executed...T
+00003600: 6865 2060 602d 2d66 6c61 6773 6060 206f  he ``--flags`` o
+00003610: 7074 696f 6e20 7365 7473 2066 6c61 6773  ption sets flags
+00003620: 2074 6861 7420 636f 6e74 726f 6c20 7468   that control th
+00003630: 6520 706c 6179 6261 636b 206f 6620 525a  e playback of RZ
+00003640: 5820 6672 616d 6573 2077 6865 6e0a 696e  X frames when.in
+00003650: 7465 7272 7570 7473 2061 7265 2065 6e61  terrupts are ena
+00003660: 626c 6564 2e20 4966 2061 6e20 525a 5820  bled. If an RZX 
+00003670: 6669 6c65 2066 6169 6c73 2074 6f20 706c  file fails to pl
+00003680: 6179 2074 6f20 636f 6d70 6c65 7469 6f6e  ay to completion
+00003690: 2c20 7365 7474 696e 6720 6f6e 650a 6f72  , setting one.or
+000036a0: 206d 6f72 6520 6f66 2074 6865 7365 2066   more of these f
+000036b0: 6c61 6773 206d 6179 2068 656c 702e 2060  lags may help. `
+000036c0: 6046 4c41 4753 6060 2069 7320 7468 6520  `FLAGS`` is the 
+000036d0: 7375 6d20 6f66 2074 6865 2066 6f6c 6c6f  sum of the follo
+000036e0: 7769 6e67 2076 616c 7565 732c 0a63 686f  wing values,.cho
+000036f0: 7365 6e20 6163 636f 7264 696e 6720 746f  sen according to
+00003700: 2074 6865 2064 6573 6972 6564 206f 7574   the desired out
+00003710: 636f 6d65 3a0a 0a2a 2031 202d 2057 6865  come:..* 1 - Whe
+00003720: 6e20 7468 6520 6c61 7374 2069 6e73 7472  n the last instr
+00003730: 7563 7469 6f6e 2069 6e20 6120 6672 616d  uction in a fram
+00003740: 6520 6973 2065 6974 6865 7220 274c 4420  e is either 'LD 
+00003750: 412c 4927 206f 7220 274c 4420 412c 5227  A,I' or 'LD A,R'
+00003760: 2c0a 2020 7265 7365 7420 6269 7420 3220  ,.  reset bit 2 
+00003770: 6f66 2074 6865 2066 6c61 6773 2072 6567  of the flags reg
+00003780: 6973 7465 722e 2054 6869 7320 6973 2074  ister. This is t
+00003790: 6865 2065 7870 6563 7465 6420 6265 6861  he expected beha
+000037a0: 7669 6f75 7220 6f66 2061 2072 6561 6c0a  viour of a real.
+000037b0: 2020 5a38 302c 2062 7574 2073 6f6d 6520    Z80, but some 
+000037c0: 525a 5820 6669 6c65 7320 6661 696c 2077  RZX files fail w
+000037d0: 6865 6e20 7468 6973 2066 6c61 6720 6973  hen this flag is
+000037e0: 2073 6574 2e0a 0a2a 2032 202d 2057 6865   set...* 2 - Whe
+000037f0: 6e20 7468 6520 6c61 7374 2069 6e73 7472  n the last instr
+00003800: 7563 7469 6f6e 2069 6e20 6120 6672 616d  uction in a fram
+00003810: 6520 6973 2027 4549 272c 2061 6e64 2074  e is 'EI', and t
+00003820: 6865 206e 6578 7420 6672 616d 6520 6973  he next frame is
+00003830: 2061 0a20 2073 686f 7274 206f 6e65 2028   a.  short one (
+00003840: 692e 652e 2068 6173 2061 2066 6574 6368  i.e. has a fetch
+00003850: 2063 6f75 6e74 206f 6620 3120 6f72 2032   count of 1 or 2
+00003860: 292c 2062 6c6f 636b 2074 6865 2069 6e74  ), block the int
+00003870: 6572 7275 7074 2069 6e20 7468 6520 6e65  errupt in the ne
+00003880: 7874 0a20 2066 7261 6d65 2e20 4279 2064  xt.  frame. By d
+00003890: 6566 6175 6c74 2c20 616e 6420 6163 636f  efault, and acco
+000038a0: 7264 696e 6720 746f 2052 5a58 2063 6f6e  rding to RZX con
+000038b0: 7665 6e74 696f 6e2c 2060 727a 7870 6c61  vention, `rzxpla
+000038c0: 792e 7079 6020 6163 6365 7074 7320 616e  y.py` accepts an
+000038d0: 0a20 2069 6e74 6572 7275 7074 2061 7420  .  interrupt at 
+000038e0: 7468 6520 7374 6172 7420 6f66 2065 7665  the start of eve
+000038f0: 7279 2066 7261 6d65 2065 7863 6570 7420  ry frame except 
+00003900: 7468 6520 6669 7273 742c 2072 6567 6172  the first, regar
+00003910: 646c 6573 7320 6f66 2077 6865 7468 6572  dless of whether
+00003920: 0a20 2074 6865 2069 6e73 7472 7563 7469  .  the instructi
+00003930: 6f6e 206a 7573 7420 6578 6563 7574 6564  on just executed
+00003940: 2077 6f75 6c64 206e 6f72 6d61 6c6c 7920   would normally 
+00003950: 626c 6f63 6b20 6974 2e20 486f 7765 7665  block it. Howeve
+00003960: 722c 2073 6f6d 6520 525a 580a 2020 6669  r, some RZX.  fi
+00003970: 6c65 7320 636f 6e74 6169 6e20 6120 7368  les contain a sh
+00003980: 6f72 7420 6672 616d 6520 696d 6d65 6469  ort frame immedi
+00003990: 6174 656c 7920 6166 7465 7220 616e 2027  ately after an '
+000039a0: 4549 2720 746f 2069 6e64 6963 6174 6520  EI' to indicate 
+000039b0: 7468 6174 2074 6865 0a20 2069 6e74 6572  that the.  inter
+000039c0: 7275 7074 2073 686f 756c 6420 696e 2066  rupt should in f
+000039d0: 6163 7420 6265 2062 6c6f 636b 6564 2c20  act be blocked, 
+000039e0: 616e 6420 7468 6572 6566 6f72 6520 7265  and therefore re
+000039f0: 7175 6972 6520 7468 6973 2066 6c61 6720  quire this flag 
+00003a00: 746f 2062 650a 2020 7365 7420 746f 2070  to be.  set to p
+00003a10: 6c61 7920 6261 636b 2063 6f72 7265 6374  lay back correct
+00003a20: 6c79 2e0a 0a49 6620 6060 4f55 5446 494c  ly...If ``OUTFIL
+00003a30: 4560 6020 6973 2067 6976 656e 2c20 616e  E`` is given, an
+00003a40: 6420 656e 6473 2077 6974 6820 6569 7468  d ends with eith
+00003a50: 6572 2027 2e7a 3830 2720 6f72 2027 2e73  er '.z80' or '.s
+00003a60: 7a78 272c 2074 6865 6e20 6120 736e 6170  zx', then a snap
+00003a70: 7368 6f74 0a69 6e20 7468 6520 636f 7272  shot.in the corr
+00003a80: 6573 706f 6e64 696e 6720 666f 726d 6174  esponding format
+00003a90: 2069 7320 7772 6974 7465 6e20 7768 656e   is written when
+00003aa0: 2070 6c61 7962 6163 6b20 656e 6473 2e20   playback ends. 
+00003ab0: 5369 6d69 6c61 726c 792c 2069 660a 6060  Similarly, if.``
+00003ac0: 4f55 5446 494c 4560 6020 656e 6473 2077  OUTFILE`` ends w
+00003ad0: 6974 6820 272e 727a 7827 2c20 7468 656e  ith '.rzx', then
+00003ae0: 2061 6e20 525a 5820 6669 6c65 2069 7320   an RZX file is 
+00003af0: 7772 6974 7465 6e20 7768 656e 2070 6c61  written when pla
+00003b00: 7962 6163 6b20 656e 6473 2e0a 486f 7765  yback ends..Howe
+00003b10: 7665 722c 2074 6869 7320 6d61 6b65 7320  ver, this makes 
+00003b20: 7365 6e73 6520 6f6e 6c79 2069 6620 6060  sense only if ``
+00003b30: 2d2d 7374 6f70 6060 2069 7320 7573 6564  --stop`` is used
+00003b40: 2074 6f20 656e 6420 706c 6179 6261 636b   to end playback
+00003b50: 2073 6f6d 6577 6865 7265 0a69 6e20 7468   somewhere.in th
+00003b60: 6520 6d69 6464 6c65 206f 6620 7468 6520  e middle of the 
+00003b70: 696e 7075 7420 525a 5820 6669 6c65 2c20  input RZX file, 
+00003b80: 6f74 6865 7277 6973 6520 7468 6520 6f75  otherwise the ou
+00003b90: 7470 7574 2052 5a58 2066 696c 6520 7769  tput RZX file wi
+00003ba0: 6c6c 2062 650a 656d 7074 7920 2869 2e65  ll be.empty (i.e
+00003bb0: 2e20 636f 6e74 6169 6e20 6e6f 2066 7261  . contain no fra
+00003bc0: 6d65 7329 2e0a 0a2e 2e20 5f70 7967 616d  mes)..... _pygam
+00003bd0: 653a 2068 7474 7073 3a2f 2f70 7967 616d  e: https://pygam
+00003be0: 652e 6f72 672f 0a0a 2b2d 2d2d 2d2d 2d2d  e.org/..+-------
+00003bf0: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  --+---------+.| 
+00003c00: 5665 7273 696f 6e20 7c20 4368 616e 6765  Version | Change
+00003c10: 7320 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d  s |.+=========+=
+00003c20: 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 392e 3220  ========+.| 9.2 
+00003c30: 2020 2020 7c20 4e65 7720 2020 2020 7c0a      | New     |.
+00003c40: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00003c50: 2d2d 2d2d 2b0a 0a2e 2e20 5f73 6b6f 6f6c  ----+.... _skool
+00003c60: 3261 736d 2e70 793a 0a0a 736b 6f6f 6c32  2asm.py:..skool2
+00003c70: 6173 6d2e 7079 0a2d 2d2d 2d2d 2d2d 2d2d  asm.py.---------
+00003c80: 2d2d 2d0a 6073 6b6f 6f6c 3261 736d 2e70  ---.`skool2asm.p
+00003c90: 7960 2063 6f6e 7665 7274 7320 6120 736b  y` converts a sk
+00003ca0: 6f6f 6c20 6669 6c65 2069 6e74 6f20 616e  ool file into an
+00003cb0: 2041 534d 2066 696c 6520 7468 6174 2063   ASM file that c
+00003cc0: 616e 2062 6520 6665 6420 746f 2061 6e0a  an be fed to an.
+00003cd0: 6173 7365 6d62 6c65 7220 2873 6565 203a  assembler (see :
+00003ce0: 7265 663a 6073 7570 706f 7274 6564 4173  ref:`supportedAs
+00003cf0: 7365 6d62 6c65 7273 6029 2e20 466f 7220  semblers`). For 
+00003d00: 6578 616d 706c 653a 3a0a 0a20 2024 2073  example::..  $ s
+00003d10: 6b6f 6f6c 3261 736d 2e70 7920 6761 6d65  kool2asm.py game
+00003d20: 2e73 6b6f 6f6c 203e 2067 616d 652e 6173  .skool > game.as
+00003d30: 6d0a 0a60 736b 6f6f 6c32 6173 6d2e 7079  m..`skool2asm.py
+00003d40: 6020 7375 7070 6f72 7473 206d 616e 7920  ` supports many 
+00003d50: 6f70 7469 6f6e 733b 2072 756e 2069 7420  options; run it 
+00003d60: 7769 7468 206e 6f20 6172 6775 6d65 6e74  with no argument
+00003d70: 7320 746f 2073 6565 2061 206c 6973 743a  s to see a list:
+00003d80: 3a0a 0a20 2075 7361 6765 3a20 736b 6f6f  :..  usage: skoo
+00003d90: 6c32 6173 6d2e 7079 205b 6f70 7469 6f6e  l2asm.py [option
+00003da0: 735d 2046 494c 450a 0a20 2043 6f6e 7665  s] FILE..  Conve
+00003db0: 7274 2061 2073 6b6f 6f6c 2066 696c 6520  rt a skool file 
+00003dc0: 696e 746f 2061 6e20 4153 4d20 6669 6c65  into an ASM file
+00003dd0: 2061 6e64 2077 7269 7465 2069 7420 746f   and write it to
+00003de0: 2073 7461 6e64 6172 6420 6f75 7470 7574   standard output
+00003df0: 2e20 4649 4c45 206d 6179 0a20 2062 6520  . FILE may.  be 
+00003e00: 6120 7265 6775 6c61 7220 6669 6c65 2c20  a regular file, 
+00003e10: 6f72 2027 2d27 2066 6f72 2073 7461 6e64  or '-' for stand
+00003e20: 6172 6420 696e 7075 742e 0a0a 2020 4f70  ard input...  Op
+00003e30: 7469 6f6e 733a 0a20 2020 202d 632c 202d  tions:.    -c, -
+00003e40: 2d63 7265 6174 652d 6c61 6265 6c73 2020  -create-labels  
+00003e50: 2043 7265 6174 6520 6465 6661 756c 7420   Create default 
+00003e60: 6c61 6265 6c73 2066 6f72 2075 6e6c 6162  labels for unlab
+00003e70: 656c 6c65 6420 696e 7374 7275 6374 696f  elled instructio
+00003e80: 6e73 2e0a 2020 2020 2d44 2c20 2d2d 6465  ns..    -D, --de
+00003e90: 6369 6d61 6c20 2020 2020 2020 2020 5772  cimal         Wr
+00003ea0: 6974 6520 7468 6520 6469 7361 7373 656d  ite the disassem
+00003eb0: 626c 7920 696e 2064 6563 696d 616c 2e0a  bly in decimal..
+00003ec0: 2020 2020 2d45 2041 4444 522c 202d 2d65      -E ADDR, --e
+00003ed0: 6e64 2041 4444 5220 2020 5374 6f70 2063  nd ADDR   Stop c
+00003ee0: 6f6e 7665 7274 696e 6720 6174 2074 6869  onverting at thi
+00003ef0: 7320 6164 6472 6573 732e 0a20 2020 202d  s address..    -
+00003f00: 6620 4e2c 202d 2d66 6978 6573 204e 2020  f N, --fixes N  
+00003f10: 2020 2020 2041 7070 6c79 2066 6978 6573       Apply fixes
+00003f20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00003f30: 2020 2020 2020 2020 2020 2020 2020 4e3d                N=
+00003f40: 303a 204e 6f6e 6520 2864 6566 6175 6c74  0: None (default
+00003f50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00003f60: 2020 2020 2020 2020 2020 2020 2020 4e3d                N=
+00003f70: 313a 2040 6f66 6978 206f 6e6c 790a 2020  1: @ofix only.  
+00003f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f90: 2020 2020 2020 2020 2020 4e3d 323a 2040            N=2: @
+00003fa0: 6f66 6978 2061 6e64 2040 6266 6978 0a20  ofix and @bfix. 
+00003fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003fc0: 2020 2020 2020 2020 2020 204e 3d33 3a20             N=3: 
+00003fd0: 406f 6669 782c 2040 6266 6978 2061 6e64  @ofix, @bfix and
+00003fe0: 2040 7266 6978 2028 696d 706c 6965 7320   @rfix (implies 
+00003ff0: 2d72 290a 2020 2020 2d46 2c20 2d2d 666f  -r).    -F, --fo
+00004000: 7263 6520 2020 2020 2020 2020 2020 466f  rce           Fo
+00004010: 7263 6520 636f 6e76 6572 7369 6f6e 2c20  rce conversion, 
+00004020: 6967 6e6f 7269 6e67 2040 7374 6172 7420  ignoring @start 
+00004030: 616e 6420 4065 6e64 2064 6972 6563 7469  and @end directi
+00004040: 7665 732e 0a20 2020 202d 482c 202d 2d68  ves..    -H, --h
+00004050: 6578 2020 2020 2020 2020 2020 2020 2057  ex             W
+00004060: 7269 7465 2074 6865 2064 6973 6173 7365  rite the disasse
+00004070: 6d62 6c79 2069 6e20 6865 7861 6465 6369  mbly in hexadeci
+00004080: 6d61 6c2e 0a20 2020 202d 4920 703d 762c  mal..    -I p=v,
+00004090: 202d 2d69 6e69 2070 3d76 2020 2020 2053   --ini p=v     S
+000040a0: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
+000040b0: 7468 6520 636f 6e66 6967 7572 6174 696f  the configuratio
+000040c0: 6e20 7061 7261 6d65 7465 7220 2770 2720  n parameter 'p' 
+000040d0: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
+000040e0: 2020 2020 2020 2020 2020 2020 2027 7627               'v'
+000040f0: 2e20 5468 6973 206f 7074 696f 6e20 6d61  . This option ma
+00004100: 7920 6265 2075 7365 6420 6d75 6c74 6970  y be used multip
+00004110: 6c65 2074 696d 6573 2e0a 2020 2020 2d6c  le times..    -l
+00004120: 2c20 2d2d 6c6f 7765 7220 2020 2020 2020  , --lower       
+00004130: 2020 2020 5772 6974 6520 7468 6520 6469      Write the di
+00004140: 7361 7373 656d 626c 7920 696e 206c 6f77  sassembly in low
+00004150: 6572 2063 6173 652e 0a20 2020 202d 702c  er case..    -p,
+00004160: 202d 2d70 6163 6b61 6765 2d64 6972 2020   --package-dir  
+00004170: 2020 2053 686f 7720 7061 7468 2074 6f20     Show path to 
+00004180: 736b 6f6f 6c6b 6974 2070 6163 6b61 6765  skoolkit package
+00004190: 2064 6972 6563 746f 7279 2061 6e64 2065   directory and e
+000041a0: 7869 742e 0a20 2020 202d 5020 703d 762c  xit..    -P p=v,
+000041b0: 202d 2d73 6574 2070 3d76 2020 2020 2053   --set p=v     S
+000041c0: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
+000041d0: 4153 4d20 7772 6974 6572 2070 726f 7065  ASM writer prope
+000041e0: 7274 7920 2770 2720 746f 2027 7627 2e20  rty 'p' to 'v'. 
+000041f0: 5468 6973 0a20 2020 2020 2020 2020 2020  This.           
+00004200: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00004210: 7074 696f 6e20 6d61 7920 6265 2075 7365  ption may be use
+00004220: 6420 6d75 6c74 6970 6c65 2074 696d 6573  d multiple times
+00004230: 2e0a 2020 2020 2d71 2c20 2d2d 7175 6965  ..    -q, --quie
+00004240: 7420 2020 2020 2020 2020 2020 4265 2071  t           Be q
+00004250: 7569 6574 2e0a 2020 2020 2d72 2c20 2d2d  uiet..    -r, --
+00004260: 7273 7562 2020 2020 2020 2020 2020 2020  rsub            
+00004270: 4170 706c 7920 7361 6665 2073 7562 7374  Apply safe subst
+00004280: 6974 7574 696f 6e73 2028 4073 7375 6229  itutions (@ssub)
+00004290: 2061 6e64 2072 656c 6f63 6174 6162 696c   and relocatabil
+000042a0: 6974 790a 2020 2020 2020 2020 2020 2020  ity.            
+000042b0: 2020 2020 2020 2020 2020 2020 2020 7375                su
+000042c0: 6273 7469 7475 7469 6f6e 7320 2840 7273  bstitutions (@rs
+000042d0: 7562 2920 2869 6d70 6c69 6573 2027 2d66  ub) (implies '-f
+000042e0: 2031 2729 2e0a 2020 2020 2d2d 7368 6f77   1')..    --show
+000042f0: 2d63 6f6e 6669 6720 2020 2020 2020 2020  -config         
+00004300: 5368 6f77 2063 6f6e 6669 6775 7261 7469  Show configurati
+00004310: 6f6e 2070 6172 616d 6574 6572 2076 616c  on parameter val
+00004320: 7565 732e 0a20 2020 202d 732c 202d 2d73  ues..    -s, --s
+00004330: 7375 6220 2020 2020 2020 2020 2020 2041  sub            A
+00004340: 7070 6c79 2073 6166 6520 7375 6273 7469  pply safe substi
+00004350: 7475 7469 6f6e 7320 2840 7373 7562 292e  tutions (@ssub).
+00004360: 0a20 2020 202d 5320 4144 4452 2c20 2d2d  .    -S ADDR, --
+00004370: 7374 6172 7420 4144 4452 0a20 2020 2020  start ADDR.     
 00004380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004390: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000043a0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000043b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000043c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000043d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000043e0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3420  --------+.| 6.4 
-000043f0: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004400: 6060 2d2d 7661 7260 6020 6f70 7469 6f6e  ``--var`` option
-00004410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004430: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004440: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004480: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3220  --------+.| 6.2 
-00004490: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-000044a0: 6060 2d2d 7368 6f77 2d63 6f6e 6669 6760  ``--show-config`
-000044b0: 6020 6f70 7469 6f6e 3b20 7468 6520 6060  ` option; the ``
-000044c0: 2d2d 656e 6460 6020 616e 6420 6060 2d2d  --end`` and ``--
-000044d0: 7374 6172 7460 6020 7c0a 7c20 2020 2020  start`` |.|     
-000044e0: 2020 2020 7c20 6f70 7469 6f6e 7320 6163      | options ac
-000044f0: 6365 7074 2061 2068 6578 6164 6563 696d  cept a hexadecim
-00004500: 616c 2069 6e74 6567 6572 2070 7265 6669  al integer prefi
-00004510: 7865 6420 6279 2027 3078 2720 2020 2020  xed by '0x'     
-00004520: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004530: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004570: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3120  --------+.| 6.1 
-00004580: 2020 2020 7c20 436f 6e66 6967 7572 6174      | Configurat
-00004590: 696f 6e20 6973 2072 6561 6420 6672 6f6d  ion is read from
-000045a0: 2060 736b 6f6f 6c6b 6974 2e69 6e69 6020   `skoolkit.ini` 
-000045b0: 6966 2070 7265 7365 6e74 3b20 6164 6465  if present; adde
-000045c0: 6420 7468 6520 2020 7c0a 7c20 2020 2020  d the   |.|     
-000045d0: 2020 2020 7c20 6060 2d2d 696e 6960 6020      | ``--ini`` 
-000045e0: 6f70 7469 6f6e 2020 2020 2020 2020 2020  option          
-000045f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004610: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004620: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004660: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 352e 3020  --------+.| 5.0 
-00004670: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004680: 6060 2d2d 7365 7460 6020 6f70 7469 6f6e  ``--set`` option
-00004690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046b0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000046c0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000046d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000046e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000046f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004700: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 342e 3520  --------+.| 4.5 
-00004710: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004720: 6060 2d2d 7374 6172 7460 6020 616e 6420  ``--start`` and 
-00004730: 6060 2d2d 656e 6460 6020 6f70 7469 6f6e  ``--end`` option
-00004740: 7320 2020 2020 2020 2020 2020 2020 2020  s               
-00004750: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004760: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000047a0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 342e 3120  --------+.| 4.1 
-000047b0: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-000047c0: 6060 2d2d 7772 6974 6572 6060 206f 7074  ``--writer`` opt
-000047d0: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-000047e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047f0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004800: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004840: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 332e 3420  --------+.| 3.4 
-00004850: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004860: 6060 2d56 6060 2061 6e64 2060 602d 7060  ``-V`` and ``-p`
-00004870: 6020 6f70 7469 6f6e 7320 616e 6420 7468  ` options and th
-00004880: 6520 6c6f 6e67 206f 7074 696f 6e73 2020  e long options  
-00004890: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000048a0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000048b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000048c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000048d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000048e0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 322e 322e  --------+.| 2.2.
-000048f0: 3220 2020 7c20 4164 6465 6420 7468 6520  2   | Added the 
-00004900: 6162 696c 6974 7920 746f 2072 6561 6420  ability to read 
-00004910: 6120 736b 6f6f 6c20 6669 6c65 2066 726f  a skool file fro
-00004920: 6d20 7374 616e 6461 7264 2069 6e70 7574  m standard input
-00004930: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004940: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004980: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 322e 312e  --------+.| 2.1.
-00004990: 3120 2020 7c20 4164 6465 6420 7468 6520  1   | Added the 
-000049a0: 6060 2d75 6060 2c20 6060 2d44 6060 2061  ``-u``, ``-D`` a
-000049b0: 6e64 2060 602d 4860 6020 6f70 7469 6f6e  nd ``-H`` option
-000049c0: 7320 2020 2020 2020 2020 2020 2020 2020  s               
-000049d0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000049e0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000049f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a20: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 312e 3120  --------+.| 1.1 
-00004a30: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00004a40: 6060 2d63 6060 206f 7074 696f 6e20 2020  ``-c`` option   
-00004a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a70: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00004a80: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00004a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ac0: 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e 2e20 5f73  --------+.... _s
-00004ad0: 6b6f 6f6c 3262 696e 2e70 793a 0a0a 736b  kool2bin.py:..sk
-00004ae0: 6f6f 6c32 6269 6e2e 7079 0a2d 2d2d 2d2d  ool2bin.py.-----
-00004af0: 2d2d 2d2d 2d2d 2d0a 6073 6b6f 6f6c 3262  -------.`skool2b
-00004b00: 696e 2e70 7960 2063 6f6e 7665 7274 7320  in.py` converts 
-00004b10: 6120 736b 6f6f 6c20 6669 6c65 2069 6e74  a skool file int
-00004b20: 6f20 6120 6269 6e61 7279 2028 7261 7720  o a binary (raw 
-00004b30: 6d65 6d6f 7279 2920 6669 6c65 2e20 466f  memory) file. Fo
-00004b40: 720a 6578 616d 706c 653a 3a0a 0a20 2024  r.example::..  $
-00004b50: 2073 6b6f 6f6c 3262 696e 2e70 7920 6761   skool2bin.py ga
-00004b60: 6d65 2e73 6b6f 6f6c 0a0a 546f 206c 6973  me.skool..To lis
-00004b70: 7420 7468 6520 6f70 7469 6f6e 7320 7375  t the options su
-00004b80: 7070 6f72 7465 6420 6279 2060 736b 6f6f  pported by `skoo
-00004b90: 6c32 6269 6e2e 7079 602c 2072 756e 2069  l2bin.py`, run i
-00004ba0: 7420 7769 7468 206e 6f20 6172 6775 6d65  t with no argume
-00004bb0: 6e74 733a 3a0a 0a20 2075 7361 6765 3a20  nts::..  usage: 
-00004bc0: 736b 6f6f 6c32 6269 6e2e 7079 205b 6f70  skool2bin.py [op
-00004bd0: 7469 6f6e 735d 2066 696c 652e 736b 6f6f  tions] file.skoo
-00004be0: 6c20 5b66 696c 652e 6269 6e5d 0a0a 2020  l [file.bin]..  
-00004bf0: 436f 6e76 6572 7420 6120 736b 6f6f 6c20  Convert a skool 
-00004c00: 6669 6c65 2069 6e74 6f20 6120 6269 6e61  file into a bina
-00004c10: 7279 2028 7261 7720 6d65 6d6f 7279 2920  ry (raw memory) 
-00004c20: 6669 6c65 2e20 2766 696c 652e 736b 6f6f  file. 'file.skoo
-00004c30: 6c27 206d 6179 2062 6520 610a 2020 7265  l' may be a.  re
-00004c40: 6775 6c61 7220 6669 6c65 2c20 6f72 2027  gular file, or '
-00004c50: 2d27 2066 6f72 2073 7461 6e64 6172 6420  -' for standard 
-00004c60: 696e 7075 742e 2049 6620 2766 696c 652e  input. If 'file.
-00004c70: 6269 6e27 2069 7320 6e6f 7420 6769 7665  bin' is not give
-00004c80: 6e2c 2069 740a 2020 6465 6661 756c 7473  n, it.  defaults
-00004c90: 2074 6f20 7468 6520 6e61 6d65 206f 6620   to the name of 
-00004ca0: 7468 6520 696e 7075 7420 6669 6c65 2077  the input file w
-00004cb0: 6974 6820 272e 736b 6f6f 6c27 2072 6570  ith '.skool' rep
-00004cc0: 6c61 6365 6420 6279 2027 2e62 696e 272e  laced by '.bin'.
-00004cd0: 0a20 2027 6669 6c65 2e62 696e 2720 6d61  .  'file.bin' ma
-00004ce0: 7920 6265 2061 2072 6567 756c 6172 2066  y be a regular f
-00004cf0: 696c 652c 206f 7220 272d 2720 666f 7220  ile, or '-' for 
-00004d00: 7374 616e 6461 7264 206f 7574 7075 742e  standard output.
-00004d10: 0a0a 2020 4f70 7469 6f6e 733a 0a20 2020  ..  Options:.   
-00004d20: 202d 422c 202d 2d62 616e 6b73 2020 2020   -B, --banks    
-00004d30: 2020 2020 2020 2050 726f 6365 7373 2040         Process @
-00004d40: 6261 6e6b 2064 6972 6563 7469 7665 7320  bank directives 
-00004d50: 616e 6420 7772 6974 6520 5241 4d20 6261  and write RAM ba
-00004d60: 6e6b 7320 302d 3720 746f 2061 0a20 2020  nks 0-7 to a.   
-00004d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d80: 2020 2020 2020 2031 3238 4b20 6669 6c65         128K file
-00004d90: 2e0a 2020 2020 2d62 2c20 2d2d 6266 6978  ..    -b, --bfix
-00004da0: 2020 2020 2020 2020 2020 2020 4170 706c              Appl
-00004db0: 7920 406f 6669 7820 616e 6420 4062 6669  y @ofix and @bfi
-00004dc0: 7820 6469 7265 6374 6976 6573 2e0a 2020  x directives..  
-00004dd0: 2020 2d64 2c20 2d2d 6461 7461 2020 2020    -d, --data    
-00004de0: 2020 2020 2020 2020 5072 6f63 6573 7320          Process 
-00004df0: 4064 6566 622c 2040 6465 6673 2061 6e64  @defb, @defs and
-00004e00: 2040 6465 6677 2064 6972 6563 7469 7665   @defw directive
-00004e10: 732e 0a20 2020 202d 4520 4144 4452 2c20  s..    -E ADDR, 
-00004e20: 2d2d 656e 6420 4144 4452 2020 2053 746f  --end ADDR   Sto
-00004e30: 7020 636f 6e76 6572 7469 6e67 2061 7420  p converting at 
-00004e40: 7468 6973 2061 6464 7265 7373 2e0a 2020  this address..  
-00004e50: 2020 2d69 2c20 2d2d 6973 7562 2020 2020    -i, --isub    
-00004e60: 2020 2020 2020 2020 4170 706c 7920 4069          Apply @i
-00004e70: 7375 6220 6469 7265 6374 6976 6573 2e0a  sub directives..
-00004e80: 2020 2020 2d6f 2c20 2d2d 6f66 6978 2020      -o, --ofix  
-00004e90: 2020 2020 2020 2020 2020 4170 706c 7920            Apply 
-00004ea0: 406f 6669 7820 6469 7265 6374 6976 6573  @ofix directives
-00004eb0: 2e0a 2020 2020 2d72 2c20 2d2d 7273 7562  ..    -r, --rsub
-00004ec0: 2020 2020 2020 2020 2020 2020 4170 706c              Appl
-00004ed0: 7920 4069 7375 622c 2040 7373 7562 2061  y @isub, @ssub a
-00004ee0: 6e64 2040 7273 7562 2064 6972 6563 7469  nd @rsub directi
-00004ef0: 7665 7320 2869 6d70 6c69 6573 0a20 2020  ves (implies.   
-00004f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004f10: 2020 2020 2020 202d 2d6f 6669 7829 2e0a         --ofix)..
-00004f20: 2020 2020 2d52 2c20 2d2d 7266 6978 2020      -R, --rfix  
-00004f30: 2020 2020 2020 2020 2020 4170 706c 7920            Apply 
-00004f40: 406f 6669 782c 2040 6266 6978 2061 6e64  @ofix, @bfix and
-00004f50: 2040 7266 6978 2064 6972 6563 7469 7665   @rfix directive
-00004f60: 7320 2869 6d70 6c69 6573 0a20 2020 2020  s (implies.     
-00004f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004f80: 2020 2020 202d 2d72 7375 6229 2e0a 2020       --rsub)..  
-00004f90: 2020 2d73 2c20 2d2d 7373 7562 2020 2020    -s, --ssub    
-00004fa0: 2020 2020 2020 2020 4170 706c 7920 4069          Apply @i
-00004fb0: 7375 6220 616e 6420 4073 7375 6220 6469  sub and @ssub di
-00004fc0: 7265 6374 6976 6573 2e0a 2020 2020 2d53  rectives..    -S
-00004fd0: 2041 4444 522c 202d 2d73 7461 7274 2041   ADDR, --start A
-00004fe0: 4444 520a 2020 2020 2020 2020 2020 2020  DDR.            
-00004ff0: 2020 2020 2020 2020 2020 2020 2020 5374                St
-00005000: 6172 7420 636f 6e76 6572 7469 6e67 2061  art converting a
-00005010: 7420 7468 6973 2061 6464 7265 7373 2e0a  t this address..
-00005020: 2020 2020 2d76 2c20 2d2d 7665 7262 6f73      -v, --verbos
-00005030: 6520 2020 2020 2020 2020 5368 6f77 2069  e         Show i
-00005040: 6e66 6f20 6f6e 2065 6163 6820 636f 6e76  nfo on each conv
-00005050: 6572 7465 6420 696e 7374 7275 6374 696f  erted instructio
-00005060: 6e2e 0a20 2020 202d 562c 202d 2d76 6572  n..    -V, --ver
-00005070: 7369 6f6e 2020 2020 2020 2020 2053 686f  sion         Sho
-00005080: 7720 536b 6f6f 6c4b 6974 2076 6572 7369  w SkoolKit versi
-00005090: 6f6e 206e 756d 6265 7220 616e 6420 6578  on number and ex
-000050a0: 6974 2e0a 2020 2020 2d77 2c20 2d2d 6e6f  it..    -w, --no
-000050b0: 2d77 6172 6e69 6e67 7320 2020 2020 5375  -warnings     Su
-000050c0: 7070 7265 7373 2077 6172 6e69 6e67 732e  ppress warnings.
-000050d0: 0a0a 5468 6520 6060 2d2d 7665 7262 6f73  ..The ``--verbos
-000050e0: 6560 6020 6f70 7469 6f6e 2073 686f 7773  e`` option shows
-000050f0: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
-00005100: 6561 6368 2063 6f6e 7665 7274 6564 2069  each converted i
-00005110: 6e73 7472 7563 7469 6f6e 2c20 7375 6368  nstruction, such
-00005120: 0a61 7320 7768 6574 6865 7220 6974 2077  .as whether it w
-00005130: 6173 2069 6e73 6572 7465 6420 6265 666f  as inserted befo
-00005140: 7265 206f 7220 6166 7465 7220 616e 6f74  re or after anot
-00005150: 6865 7220 696e 7374 7275 6374 696f 6e20  her instruction 
-00005160: 2862 7920 6120 6060 402a 7375 6260 600a  (by a ``@*sub``.
-00005170: 6f72 2060 6040 2a66 6978 6060 2064 6972  or ``@*fix`` dir
-00005180: 6563 7469 7665 292c 2061 6e64 2069 7473  ective), and its
-00005190: 206f 7269 6769 6e61 6c20 6164 6472 6573   original addres
-000051a0: 7320 2869 6620 6974 2077 6173 2072 656c  s (if it was rel
-000051b0: 6f63 6174 6564 2062 7920 7468 650a 696e  ocated by the.in
-000051c0: 7365 7274 696f 6e2c 2072 656d 6f76 616c  sertion, removal
-000051d0: 206f 7220 7265 706c 6163 656d 656e 7420   or replacement 
-000051e0: 6f66 206f 7468 6572 2069 6e73 7472 7563  of other instruc
-000051f0: 7469 6f6e 7329 2e20 466f 7220 6578 616d  tions). For exam
-00005200: 706c 653a 3a0a 0a20 2034 3030 3030 2039  ple::..  40000 9
-00005210: 4334 3020 3e20 584f 5220 410a 2020 3430  C40 > XOR A.  40
-00005220: 3030 3120 3943 3431 207c 204c 4420 484c  001 9C41 | LD HL
-00005230: 2c34 3030 3036 2020 203a 2034 3030 3030  ,40006   : 40000
-00005240: 2039 4334 3020 4c44 2048 4c2c 3430 3030   9C40 LD HL,4000
-00005250: 330a 2020 3430 3030 3420 3943 3434 202b  3.  40004 9C44 +
-00005260: 204a 5220 3430 3030 3620 2020 2020 203a   JR 40006      :
-00005270: 2020 2020 2020 2020 2020 2020 4a52 2034              JR 4
-00005280: 3030 3033 0a20 2034 3030 3036 2039 4334  0003.  40006 9C4
-00005290: 3620 2020 5245 5420 2020 2020 2020 2020  6   RET         
-000052a0: 2020 3a20 3430 3030 3320 3943 3433 2052    : 40003 9C43 R
-000052b0: 4554 0a0a 5468 6973 206f 7574 7075 7420  ET..This output 
-000052c0: 7368 6f77 7320 7468 6174 3a0a 0a2a 2054  shows that:..* T
-000052d0: 6865 2069 6e73 7472 7563 7469 6f6e 2061  he instruction a
-000052e0: 7420 3430 3030 3020 2858 4f52 2041 2920  t 40000 (XOR A) 
-000052f0: 7761 7320 696e 7365 7274 6564 2062 6566  was inserted bef
-00005300: 6f72 6520 2860 603e 6060 2920 616e 6f74  ore (``>``) anot
-00005310: 6865 720a 2020 696e 7374 7275 6374 696f  her.  instructio
-00005320: 6e0a 2a20 5468 6520 696e 7374 7275 6374  n.* The instruct
-00005330: 696f 6e20 6174 2034 3030 3031 2028 4c44  ion at 40001 (LD
-00005340: 2048 4c2c 3430 3030 3629 206f 7665 7277   HL,40006) overw
-00005350: 726f 7465 2028 6060 7c60 6029 2074 6865  rote (``|``) the
-00005360: 2069 6e73 7472 7563 7469 6f6e 2873 290a   instruction(s).
-00005370: 2020 6f72 6967 696e 616c 6c79 2061 7420    originally at 
-00005380: 3430 3030 302c 2061 6e64 2068 6164 2069  40000, and had i
-00005390: 7473 206f 7065 7261 6e64 2063 6861 6e67  ts operand chang
-000053a0: 6564 2066 726f 6d20 3430 3030 3320 2862  ed from 40003 (b
-000053b0: 6563 6175 7365 2074 6865 0a20 2069 6e73  ecause the.  ins
-000053c0: 7472 7563 7469 6f6e 206f 7269 6769 6e61  truction origina
-000053d0: 6c6c 7920 6174 2074 6861 7420 6164 6472  lly at that addr
-000053e0: 6573 7320 7761 7320 7265 6c6f 6361 7465  ess was relocate
-000053f0: 6420 746f 2034 3030 3036 290a 2a20 5468  d to 40006).* Th
-00005400: 6520 696e 7374 7275 6374 696f 6e20 6174  e instruction at
-00005410: 2034 3030 3034 2028 4a52 2034 3030 3036   40004 (JR 40006
-00005420: 2920 7761 7320 696e 7365 7274 6564 2061  ) was inserted a
-00005430: 6674 6572 2028 6060 2b60 6029 2061 6e6f  fter (``+``) ano
-00005440: 7468 6572 0a20 2069 6e73 7472 7563 7469  ther.  instructi
-00005450: 6f6e 2c20 616e 6420 616c 736f 2068 6164  on, and also had
-00005460: 2069 7473 206f 7065 7261 6e64 2063 6861   its operand cha
-00005470: 6e67 6564 2066 726f 6d20 3430 3030 330a  nged from 40003.
-00005480: 2a20 5468 6520 696e 7374 7275 6374 696f  * The instructio
-00005490: 6e20 6174 2034 3030 3036 2028 5245 5429  n at 40006 (RET)
-000054a0: 2077 6173 206f 7269 6769 6e61 6c6c 7920   was originally 
-000054b0: 6174 2034 3030 3033 2028 6265 666f 7265  at 40003 (before
-000054c0: 206f 7468 6572 0a20 2069 6e73 7472 7563   other.  instruc
-000054d0: 7469 6f6e 7320 7765 7265 2069 6e73 6572  tions were inser
-000054e0: 7465 642c 2072 656d 6f76 6564 206f 7220  ted, removed or 
-000054f0: 7265 706c 6163 6564 290a 0a2b 2d2d 2d2d  replaced)..+----
-00005500: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005540: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2056 6572  ---------+.| Ver
-00005550: 7369 6f6e 207c 2043 6861 6e67 6573 2020  sion | Changes  
-00005560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005590: 2020 2020 2020 2020 207c 0a2b 3d3d 3d3d           |.+====
-000055a0: 3d3d 3d3d 3d2b 3d3d 3d3d 3d3d 3d3d 3d3d  =====+==========
-000055b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000055c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000055d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000055e0: 3d3d 3d3d 3d3d 3d3d 3d2b 0a7c 2039 2e31  =========+.| 9.1
-000055f0: 2020 2020 207c 2041 6464 6564 2074 6865       | Added the
-00005600: 2060 602d 2d62 616e 6b73 6060 206f 7074   ``--banks`` opt
-00005610: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-00005620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005630: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00005640: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004390: 2020 2020 2053 7461 7274 2063 6f6e 7665       Start conve
+000043a0: 7274 696e 6720 6174 2074 6869 7320 6164  rting at this ad
+000043b0: 6472 6573 732e 0a20 2020 202d 752c 202d  dress..    -u, -
+000043c0: 2d75 7070 6572 2020 2020 2020 2020 2020  -upper          
+000043d0: 2057 7269 7465 2074 6865 2064 6973 6173   Write the disas
+000043e0: 7365 6d62 6c79 2069 6e20 7570 7065 7220  sembly in upper 
+000043f0: 6361 7365 2e0a 2020 2020 2d2d 7661 7220  case..    --var 
+00004400: 6e61 6d65 3d76 616c 7565 2020 2020 2020  name=value      
+00004410: 4465 6669 6e65 2061 2076 6172 6961 626c  Define a variabl
+00004420: 6520 7468 6174 2063 616e 2062 6520 7573  e that can be us
+00004430: 6564 2062 7920 4069 6620 616e 6420 7468  ed by @if and th
+00004440: 6520 534d 504c 0a20 2020 2020 2020 2020  e SMPL.         
+00004450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004460: 206d 6163 726f 732e 2054 6869 7320 6f70   macros. This op
+00004470: 7469 6f6e 206d 6179 2062 6520 7573 6564  tion may be used
+00004480: 206d 756c 7469 706c 6520 7469 6d65 732e   multiple times.
+00004490: 0a20 2020 202d 562c 202d 2d76 6572 7369  .    -V, --versi
+000044a0: 6f6e 2020 2020 2020 2020 2053 686f 7720  on         Show 
+000044b0: 536b 6f6f 6c4b 6974 2076 6572 7369 6f6e  SkoolKit version
+000044c0: 206e 756d 6265 7220 616e 6420 6578 6974   number and exit
+000044d0: 2e0a 2020 2020 2d77 2c20 2d2d 6e6f 2d77  ..    -w, --no-w
+000044e0: 6172 6e69 6e67 7320 2020 2020 5375 7070  arnings     Supp
+000044f0: 7265 7373 2077 6172 6e69 6e67 732e 0a20  ress warnings.. 
+00004500: 2020 202d 5720 434c 4153 532c 202d 2d77     -W CLASS, --w
+00004510: 7269 7465 7220 434c 4153 530a 2020 2020  riter CLASS.    
+00004520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004530: 2020 2020 2020 5370 6563 6966 7920 7468        Specify th
+00004540: 6520 4153 4d20 7772 6974 6572 2063 6c61  e ASM writer cla
+00004550: 7373 2074 6f20 7573 652e 0a0a 5365 6520  ss to use...See 
+00004560: 3a72 6566 3a60 6173 6d4d 6f64 6573 416e  :ref:`asmModesAn
+00004570: 6444 6972 6563 7469 7665 7360 2066 6f72  dDirectives` for
+00004580: 2061 2064 6573 6372 6970 7469 6f6e 206f   a description o
+00004590: 6620 7468 6520 6060 4073 7375 6260 6020  f the ``@ssub`` 
+000045a0: 616e 640a 6060 4072 7375 6260 6020 7375  and.``@rsub`` su
+000045b0: 6273 7469 7475 7469 6f6e 206d 6f64 6573  bstitution modes
+000045c0: 2c20 616e 6420 7468 6520 6060 406f 6669  , and the ``@ofi
+000045d0: 7860 602c 2060 6040 6266 6978 6060 2061  x``, ``@bfix`` a
+000045e0: 6e64 2060 6040 7266 6978 6060 2062 7567  nd ``@rfix`` bug
+000045f0: 6669 780a 6d6f 6465 732e 0a0a 5365 6520  fix.modes...See 
+00004600: 7468 6520 3a72 6566 3a60 7365 7460 2064  the :ref:`set` d
+00004610: 6972 6563 7469 7665 2066 6f72 2069 6e66  irective for inf
+00004620: 6f72 6d61 7469 6f6e 206f 6e20 7468 6520  ormation on the 
+00004630: 4153 4d20 7772 6974 6572 2070 726f 7065  ASM writer prope
+00004640: 7274 6965 7320 7468 6174 0a63 616e 2062  rties that.can b
+00004650: 6520 7365 7420 6279 2074 6865 2060 602d  e set by the ``-
+00004660: 2d73 6574 6060 206f 7074 696f 6e2e 0a0a  -set`` option...
+00004670: 2e2e 205f 736b 6f6f 6c32 6173 6d2d 636f  .. _skool2asm-co
+00004680: 6e66 3a0a 0a43 6f6e 6669 6775 7261 7469  nf:..Configurati
+00004690: 6f6e 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e  on.^^^^^^^^^^^^^
+000046a0: 0a60 736b 6f6f 6c32 6173 6d2e 7079 6020  .`skool2asm.py` 
+000046b0: 7769 6c6c 2072 6561 6420 636f 6e66 6967  will read config
+000046c0: 7572 6174 696f 6e20 6672 6f6d 2061 2066  uration from a f
+000046d0: 696c 6520 6e61 6d65 6420 6073 6b6f 6f6c  ile named `skool
+000046e0: 6b69 742e 696e 6960 2069 6e20 7468 650a  kit.ini` in the.
+000046f0: 6375 7272 656e 7420 776f 726b 696e 6720  current working 
+00004700: 6469 7265 6374 6f72 7920 6f72 2069 6e20  directory or in 
+00004710: 607e 2f2e 736b 6f6f 6c6b 6974 602c 2069  `~/.skoolkit`, i
+00004720: 6620 7072 6573 656e 742e 2054 6865 2072  f present. The r
+00004730: 6563 6f67 6e69 7365 640a 636f 6e66 6967  ecognised.config
+00004740: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
+00004750: 7273 2061 7265 3a0a 0a2a 2060 6041 6464  rs are:..* ``Add
+00004760: 7265 7373 6060 202d 2074 6865 2066 6f72  ress`` - the for
+00004770: 6d61 7420 6f66 2074 6865 2064 6566 6175  mat of the defau
+00004780: 6c74 206c 696e 6b20 7465 7874 2066 6f72  lt link text for
+00004790: 2074 6865 203a 7265 663a 6052 6020 6d61   the :ref:`R` ma
+000047a0: 6372 6f20 7768 656e 0a20 2074 6865 2074  cro when.  the t
+000047b0: 6172 6765 7420 6164 6472 6573 7320 6861  arget address ha
+000047c0: 7320 6e6f 206c 6162 656c 2028 6465 6661  s no label (defa
+000047d0: 756c 743a 2027 2729 3b20 7468 6973 2066  ult: ''); this f
+000047e0: 6f72 6d61 7420 7374 7269 6e67 2072 6563  ormat string rec
+000047f0: 6f67 6e69 7365 730a 2020 7468 6520 7265  ognises.  the re
+00004800: 706c 6163 656d 656e 7420 6669 656c 6420  placement field 
+00004810: 6060 6164 6472 6573 7360 603b 2069 6620  ``address``; if 
+00004820: 7468 6520 666f 726d 6174 2073 7472 696e  the format strin
+00004830: 6720 6973 2062 6c61 6e6b 2c20 7468 6520  g is blank, the 
+00004840: 6164 6472 6573 730a 2020 6973 2066 6f72  address.  is for
+00004850: 6d61 7474 6564 2065 7861 6374 6c79 2061  matted exactly a
+00004860: 7320 6974 2061 7070 6561 7273 2069 6e20  s it appears in 
+00004870: 7468 6520 736b 6f6f 6c20 6669 6c65 2028  the skool file (
+00004880: 7769 7468 6f75 7420 616e 7920 6060 2460  without any ``$`
+00004890: 600a 2020 7072 6566 6978 290a 2a20 6060  `.  prefix).* ``
+000048a0: 4261 7365 6060 202d 2063 6f6e 7665 7274  Base`` - convert
+000048b0: 2061 6464 7265 7373 6573 2061 6e64 2069   addresses and i
+000048c0: 6e73 7472 7563 7469 6f6e 206f 7065 7261  nstruction opera
+000048d0: 6e64 7320 746f 2068 6578 6164 6563 696d  nds to hexadecim
+000048e0: 616c 2028 6060 3136 6060 290a 2020 6f72  al (``16``).  or
+000048f0: 2064 6563 696d 616c 2028 6060 3130 6060   decimal (``10``
+00004900: 292c 206f 7220 6c65 6176 6520 7468 656d  ), or leave them
+00004910: 2061 7320 7468 6579 2061 7265 2028 6060   as they are (``
+00004920: 3060 602c 2074 6865 2064 6566 6175 6c74  0``, the default
+00004930: 290a 2a20 6060 4361 7365 6060 202d 2077  ).* ``Case`` - w
+00004940: 7269 7465 2074 6865 2064 6973 6173 7365  rite the disasse
+00004950: 6d62 6c79 2069 6e20 6c6f 7765 7220 6361  mbly in lower ca
+00004960: 7365 2028 6060 3160 6029 206f 7220 7570  se (``1``) or up
+00004970: 7065 7220 6361 7365 2028 6060 3260 6029  per case (``2``)
+00004980: 2c0a 2020 6f72 206c 6561 7665 2069 7420  ,.  or leave it 
+00004990: 6173 2069 7420 6973 2028 6060 3060 602c  as it is (``0``,
+000049a0: 2074 6865 2064 6566 6175 6c74 290a 2a20   the default).* 
+000049b0: 6060 4372 6561 7465 4c61 6265 6c73 6060  ``CreateLabels``
+000049c0: 202d 2063 7265 6174 6520 6465 6661 756c   - create defaul
+000049d0: 7420 6c61 6265 6c73 2066 6f72 2075 6e6c  t labels for unl
+000049e0: 6162 656c 6c65 6420 696e 7374 7275 6374  abelled instruct
+000049f0: 696f 6e73 2028 6060 3160 6029 2c0a 2020  ions (``1``),.  
+00004a00: 6f72 2064 6f6e 2774 2028 6060 3060 602c  or don't (``0``,
+00004a10: 2074 6865 2064 6566 6175 6c74 290a 2a20   the default).* 
+00004a20: 6060 456e 7472 794c 6162 656c 6060 202d  ``EntryLabel`` -
+00004a30: 2074 6865 2066 6f72 6d61 7420 6f66 2074   the format of t
+00004a40: 6865 2064 6566 6175 6c74 206c 6162 656c  he default label
+00004a50: 2066 6f72 2074 6865 2066 6972 7374 2069   for the first i
+00004a60: 6e73 7472 7563 7469 6f6e 2069 6e0a 2020  nstruction in.  
+00004a70: 6120 726f 7574 696e 6520 6f72 2064 6174  a routine or dat
+00004a80: 6120 626c 6f63 6b20 2864 6566 6175 6c74  a block (default
+00004a90: 3a20 6060 4c7b 6164 6472 6573 737d 6060  : ``L{address}``
+00004aa0: 290a 2a20 6060 456e 7472 7950 6f69 6e74  ).* ``EntryPoint
+00004ab0: 4c61 6265 6c60 6020 2d20 7468 6520 666f  Label`` - the fo
+00004ac0: 726d 6174 206f 6620 7468 6520 6465 6661  rmat of the defa
+00004ad0: 756c 7420 6c61 6265 6c20 666f 7220 616e  ult label for an
+00004ae0: 2069 6e73 7472 7563 7469 6f6e 0a20 206f   instruction.  o
+00004af0: 7468 6572 2074 6861 6e20 7468 6520 6669  ther than the fi
+00004b00: 7273 7420 696e 2061 2072 6f75 7469 6e65  rst in a routine
+00004b10: 206f 7220 6461 7461 2062 6c6f 636b 2028   or data block (
+00004b20: 6465 6661 756c 743a 2060 607b 6d61 696e  default: ``{main
+00004b30: 7d5f 7b69 6e64 6578 7d60 6029 0a2a 2060  }_{index}``).* `
+00004b40: 6051 7569 6574 6060 202d 2062 6520 7175  `Quiet`` - be qu
+00004b50: 6965 7420 2860 6031 6060 2920 6f72 2076  iet (``1``) or v
+00004b60: 6572 626f 7365 2028 6060 3060 602c 2074  erbose (``0``, t
+00004b70: 6865 2064 6566 6175 6c74 290a 2a20 6060  he default).* ``
+00004b80: 5365 742d 7072 6f70 6572 7479 6060 202d  Set-property`` -
+00004b90: 2073 6574 2061 6e20 4153 4d20 7772 6974   set an ASM writ
+00004ba0: 6572 2070 726f 7065 7274 7920 7661 6c75  er property valu
+00004bb0: 652c 2065 2e67 2e20 6060 5365 742d 6275  e, e.g. ``Set-bu
+00004bc0: 6c6c 6574 3d2b 6060 0a20 2028 7365 6520  llet=+``.  (see 
+00004bd0: 7468 6520 3a72 6566 3a60 7365 7460 2064  the :ref:`set` d
+00004be0: 6972 6563 7469 7665 2066 6f72 2061 206c  irective for a l
+00004bf0: 6973 7420 6f66 2061 7661 696c 6162 6c65  ist of available
+00004c00: 2070 726f 7065 7274 6965 7329 0a2a 2060   properties).* `
+00004c10: 6054 656d 706c 6174 6573 6060 202d 2066  `Templates`` - f
+00004c20: 696c 6520 6672 6f6d 2077 6869 6368 2074  ile from which t
+00004c30: 6f20 7265 6164 2063 7573 746f 6d20 3a72  o read custom :r
+00004c40: 6566 3a60 6173 6d54 656d 706c 6174 6573  ef:`asmTemplates
+00004c50: 600a 2a20 6060 5761 726e 696e 6773 6060  `.* ``Warnings``
+00004c60: 202d 2073 686f 7720 7761 726e 696e 6773   - show warnings
+00004c70: 2028 6060 3160 602c 2074 6865 2064 6566   (``1``, the def
+00004c80: 6175 6c74 292c 206f 7220 7375 7070 7265  ault), or suppre
+00004c90: 7373 2074 6865 6d20 2860 6030 6060 290a  ss them (``0``).
+00004ca0: 0a60 6045 6e74 7279 4c61 6265 6c60 6020  .``EntryLabel`` 
+00004cb0: 616e 6420 6060 456e 7472 7950 6f69 6e74  and ``EntryPoint
+00004cc0: 4c61 6265 6c60 6020 6172 6520 7374 616e  Label`` are stan
+00004cd0: 6461 7264 2050 7974 686f 6e20 666f 726d  dard Python form
+00004ce0: 6174 2073 7472 696e 6773 2e0a 6060 456e  at strings..``En
+00004cf0: 7472 794c 6162 656c 6060 2072 6563 6f67  tryLabel`` recog
+00004d00: 6e69 7365 7320 7468 6520 666f 6c6c 6f77  nises the follow
+00004d10: 696e 6720 7265 706c 6163 656d 656e 7420  ing replacement 
+00004d20: 6669 656c 6473 3a0a 0a2a 2060 6061 6464  fields:..* ``add
+00004d30: 7265 7373 6060 202d 2074 6865 2061 6464  ress`` - the add
+00004d40: 7265 7373 206f 6620 7468 6520 726f 7574  ress of the rout
+00004d50: 696e 6520 6f72 2064 6174 6120 626c 6f63  ine or data bloc
+00004d60: 6b20 6173 2069 7420 6170 7065 6172 7320  k as it appears 
+00004d70: 696e 2074 6865 0a20 2073 6b6f 6f6c 2066  in the.  skool f
+00004d80: 696c 650a 2a20 6060 6c6f 6361 7469 6f6e  ile.* ``location
+00004d90: 6060 202d 2074 6865 2061 6464 7265 7373  `` - the address
+00004da0: 206f 6620 7468 6520 726f 7574 696e 6520   of the routine 
+00004db0: 6f72 2064 6174 6120 626c 6f63 6b20 6173  or data block as
+00004dc0: 2061 6e20 696e 7465 6765 720a 0a60 6045   an integer..``E
+00004dd0: 6e74 7279 506f 696e 744c 6162 656c 6060  ntryPointLabel``
+00004de0: 2072 6563 6f67 6e69 7365 7320 7468 6520   recognises the 
+00004df0: 666f 6c6c 6f77 696e 6720 7265 706c 6163  following replac
+00004e00: 656d 656e 7420 6669 656c 6473 3a0a 0a2a  ement fields:..*
+00004e10: 2060 6061 6464 7265 7373 6060 202d 2074   ``address`` - t
+00004e20: 6865 2061 6464 7265 7373 206f 6620 7468  he address of th
+00004e30: 6520 696e 7374 7275 6374 696f 6e20 6173  e instruction as
+00004e40: 2069 7420 6170 7065 6172 7320 696e 2074   it appears in t
+00004e50: 6865 2073 6b6f 6f6c 2066 696c 650a 2a20  he skool file.* 
+00004e60: 6060 696e 6465 7860 6020 2d20 3020 666f  ``index`` - 0 fo
+00004e70: 7220 7468 6520 6669 7273 7420 756e 6c61  r the first unla
+00004e80: 6265 6c6c 6564 2069 6e73 7472 7563 7469  belled instructi
+00004e90: 6f6e 2069 6e20 7468 6520 726f 7574 696e  on in the routin
+00004ea0: 6520 6f72 2064 6174 610a 2020 626c 6f63  e or data.  bloc
+00004eb0: 6b2c 2031 2066 6f72 2074 6865 2073 6563  k, 1 for the sec
+00004ec0: 6f6e 642c 2065 7463 2e0a 2a20 6060 6c6f  ond, etc..* ``lo
+00004ed0: 6361 7469 6f6e 6060 202d 2074 6865 2061  cation`` - the a
+00004ee0: 6464 7265 7373 206f 6620 7468 6520 696e  ddress of the in
+00004ef0: 7374 7275 6374 696f 6e20 6173 2061 6e20  struction as an 
+00004f00: 696e 7465 6765 720a 2a20 6060 6d61 696e  integer.* ``main
+00004f10: 6060 202d 2074 6865 206c 6162 656c 206f  `` - the label o
+00004f20: 6620 7468 6520 6669 7273 7420 696e 7374  f the first inst
+00004f30: 7275 6374 696f 6e20 696e 2074 6865 2072  ruction in the r
+00004f40: 6f75 7469 6e65 206f 7220 6461 7461 2062  outine or data b
+00004f50: 6c6f 636b 0a0a 436f 6e66 6967 7572 6174  lock..Configurat
+00004f60: 696f 6e20 7061 7261 6d65 7465 7273 206d  ion parameters m
+00004f70: 7573 7420 6170 7065 6172 2069 6e20 6120  ust appear in a 
+00004f80: 6060 5b73 6b6f 6f6c 3261 736d 5d60 6020  ``[skool2asm]`` 
+00004f90: 7365 6374 696f 6e2e 2046 6f72 2065 7861  section. For exa
+00004fa0: 6d70 6c65 2c0a 746f 206d 616b 6520 6073  mple,.to make `s
+00004fb0: 6b6f 6f6c 3261 736d 2e70 7960 2077 7269  kool2asm.py` wri
+00004fc0: 7465 2074 6865 2064 6973 6173 7365 6d62  te the disassemb
+00004fd0: 6c79 2069 6e20 6865 7861 6465 6369 6d61  ly in hexadecima
+00004fe0: 6c20 7769 7468 2061 206c 696e 6520 7769  l with a line wi
+00004ff0: 6474 680a 6f66 2031 3230 2063 6861 7261  dth.of 120 chara
+00005000: 6374 6572 7320 6279 2064 6566 6175 6c74  cters by default
+00005010: 2028 7769 7468 6f75 7420 6861 7669 6e67   (without having
+00005020: 2074 6f20 7573 6520 7468 6520 6060 2d48   to use the ``-H
+00005030: 6060 2061 6e64 2060 602d 5060 600a 6f70  `` and ``-P``.op
+00005040: 7469 6f6e 7320 6f6e 2074 6865 2063 6f6d  tions on the com
+00005050: 6d61 6e64 206c 696e 6529 2c20 6164 6420  mand line), add 
+00005060: 7468 6520 666f 6c6c 6f77 696e 6720 7365  the following se
+00005070: 6374 696f 6e20 746f 2060 736b 6f6f 6c6b  ction to `skoolk
+00005080: 6974 2e69 6e69 603a 3a0a 0a20 205b 736b  it.ini`::..  [sk
+00005090: 6f6f 6c32 6173 6d5d 0a20 2042 6173 653d  ool2asm].  Base=
+000050a0: 3136 0a20 2053 6574 2d6c 696e 652d 7769  16.  Set-line-wi
+000050b0: 6474 683d 3132 300a 0a43 6f6e 6669 6775  dth=120..Configu
+000050c0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+000050d0: 7320 6d61 7920 616c 736f 2062 6520 7365  s may also be se
+000050e0: 7420 6f6e 2074 6865 2063 6f6d 6d61 6e64  t on the command
+000050f0: 206c 696e 6520 6279 2075 7369 6e67 2074   line by using t
+00005100: 6865 0a60 602d 2d69 6e69 6060 206f 7074  he.``--ini`` opt
+00005110: 696f 6e2e 2050 6172 616d 6574 6572 2076  ion. Parameter v
+00005120: 616c 7565 7320 7365 7420 7468 6973 2077  alues set this w
+00005130: 6179 2077 696c 6c20 6f76 6572 7269 6465  ay will override
+00005140: 2061 6e79 2066 6f75 6e64 2069 6e0a 6073   any found in.`s
+00005150: 6b6f 6f6c 6b69 742e 696e 6960 2e0a 0a2b  koolkit.ini`...+
+00005160: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00005170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000051a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000051b0: 2056 6572 7369 6f6e 207c 2043 6861 6e67   Version | Chang
+000051c0: 6573 2020 2020 2020 2020 2020 2020 2020  es              
+000051d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051f0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005200: 3d3d 3d3d 3d3d 3d3d 3d2b 3d3d 3d3d 3d3d  =========+======
+00005210: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005220: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005230: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00005240: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d2b 0a7c  =============+.|
+00005250: 2038 2e35 2020 2020 207c 2041 6464 6564   8.5     | Added
+00005260: 2074 6865 2060 6041 6464 7265 7373 6060   the ``Address``
+00005270: 2c20 6060 456e 7472 794c 6162 656c 6060  , ``EntryLabel``
+00005280: 2061 6e64 2060 6045 6e74 7279 506f 696e   and ``EntryPoin
+00005290: 744c 6162 656c 6060 2020 2020 207c 0a7c  tLabel``     |.|
+000052a0: 2020 2020 2020 2020 207c 2063 6f6e 6669           | confi
+000052b0: 6775 7261 7469 6f6e 2070 6172 616d 6574  guration paramet
+000052c0: 6572 7320 2020 2020 2020 2020 2020 2020  ers             
+000052d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000052e0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+000052f0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00005300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005340: 2037 2e32 2020 2020 207c 2041 6464 6564   7.2     | Added
+00005350: 2074 6865 2060 6054 656d 706c 6174 6573   the ``Templates
+00005360: 6060 2063 6f6e 6669 6775 7261 7469 6f6e  `` configuration
+00005370: 2070 6172 616d 6574 6572 2061 6e64 2073   parameter and s
+00005380: 7570 706f 7274 2066 6f72 2020 207c 0a7c  upport for   |.|
+00005390: 2020 2020 2020 2020 207c 203a 7265 663a           | :ref:
+000053a0: 6061 736d 5465 6d70 6c61 7465 7360 2020  `asmTemplates`  
+000053b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000053c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000053d0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+000053e0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+000053f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005430: 2037 2e30 2020 2020 207c 203a 7265 663a   7.0     | :ref:
+00005440: 606e 6f6e 456e 7472 7942 6c6f 636b 7360  `nonEntryBlocks`
+00005450: 2061 7265 2072 6570 726f 6475 6365 6420   are reproduced 
+00005460: 7665 7262 6174 696d 3b20 6164 6465 6420  verbatim; added 
+00005470: 7468 6520 2020 2020 2020 2020 207c 0a7c  the          |.|
+00005480: 2020 2020 2020 2020 207c 2060 602d 2d66           | ``--f
+00005490: 6f72 6365 6060 206f 7074 696f 6e20 2020  orce`` option   
+000054a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054c0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+000054d0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+000054e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000054f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005520: 2036 2e34 2020 2020 207c 2041 6464 6564   6.4     | Added
+00005530: 2074 6865 2060 602d 2d76 6172 6060 206f   the ``--var`` o
+00005540: 7074 696f 6e20 2020 2020 2020 2020 2020  ption           
+00005550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005560: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005570: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00005580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000055a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000055b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000055c0: 2036 2e32 2020 2020 207c 2041 6464 6564   6.2     | Added
+000055d0: 2074 6865 2060 602d 2d73 686f 772d 636f   the ``--show-co
+000055e0: 6e66 6967 6060 206f 7074 696f 6e3b 2074  nfig`` option; t
+000055f0: 6865 2060 602d 2d65 6e64 6060 2061 6e64  he ``--end`` and
+00005600: 2060 602d 2d73 7461 7274 6060 207c 0a7c   ``--start`` |.|
+00005610: 2020 2020 2020 2020 207c 206f 7074 696f           | optio
+00005620: 6e73 2061 6363 6570 7420 6120 6865 7861  ns accept a hexa
+00005630: 6465 6369 6d61 6c20 696e 7465 6765 7220  decimal integer 
+00005640: 7072 6566 6978 6564 2062 7920 2730 7827  prefixed by '0x'
+00005650: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005660: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005680: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2038 2e31  ---------+.| 8.1
-00005690: 2020 2020 207c 2041 6464 6564 2074 6865       | Added the
-000056a0: 2060 602d 2d64 6174 6160 602c 2060 602d   ``--data``, ``-
-000056b0: 2d72 7375 6260 602c 2060 602d 2d72 6669  -rsub``, ``--rfi
-000056c0: 7860 602c 2060 602d 2d76 6572 626f 7365  x``, ``--verbose
-000056d0: 6060 2061 6e64 2020 207c 0a7c 2020 2020  `` and   |.|    
-000056e0: 2020 2020 207c 2060 602d 2d6e 6f2d 7761       | ``--no-wa
-000056f0: 726e 696e 6773 6060 206f 7074 696f 6e73  rnings`` options
-00005700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005720: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00005730: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000056a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000056b0: 2036 2e31 2020 2020 207c 2043 6f6e 6669   6.1     | Confi
+000056c0: 6775 7261 7469 6f6e 2069 7320 7265 6164  guration is read
+000056d0: 2066 726f 6d20 6073 6b6f 6f6c 6b69 742e   from `skoolkit.
+000056e0: 696e 6960 2069 6620 7072 6573 656e 743b  ini` if present;
+000056f0: 2061 6464 6564 2074 6865 2020 207c 0a7c   added the   |.|
+00005700: 2020 2020 2020 2020 207c 2060 602d 2d69           | ``--i
+00005710: 6e69 6060 206f 7074 696f 6e20 2020 2020  ni`` option     
+00005720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005740: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005750: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005770: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2037 2e30  ---------+.| 7.0
-00005780: 2020 2020 207c 203a 7265 663a 6061 736d       | :ref:`asm
-00005790: 2d69 6660 2064 6972 6563 7469 7665 7320  -if` directives 
-000057a0: 6172 6520 7072 6f63 6573 7365 6420 2020  are processed   
-000057b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057c0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-000057d0: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-000057e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000057f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000057a0: 2035 2e30 2020 2020 207c 2041 6464 6564   5.0     | Added
+000057b0: 2074 6865 2060 602d 2d73 6574 6060 206f   the ``--set`` o
+000057c0: 7074 696f 6e20 2020 2020 2020 2020 2020  ption           
+000057d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057e0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+000057f0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005810: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2036 2e32  ---------+.| 6.2
-00005820: 2020 2020 207c 2054 6865 2060 602d 2d65       | The ``--e
-00005830: 6e64 6060 2061 6e64 2060 602d 2d73 7461  nd`` and ``--sta
-00005840: 7274 6060 206f 7074 696f 6e73 2061 6363  rt`` options acc
-00005850: 6570 7420 6120 6865 7861 6465 6369 6d61  ept a hexadecima
-00005860: 6c20 2020 2020 2020 207c 0a7c 2020 2020  l        |.|    
-00005870: 2020 2020 207c 2069 6e74 6567 6572 2070       | integer p
-00005880: 7265 6669 7865 6420 6279 2027 3078 2720  refixed by '0x' 
-00005890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058b0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-000058c0: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-000058d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005900: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2036 2e31  ---------+.| 6.1
-00005910: 2020 2020 207c 2041 6464 6564 2074 6865       | Added the
-00005920: 2061 6269 6c69 7479 2074 6f20 6173 7365   ability to asse
-00005930: 6d62 6c65 2069 6e73 7472 7563 7469 6f6e  mble instruction
-00005940: 7320 7768 6f73 6520 6f70 6572 616e 6473  s whose operands
-00005950: 2063 6f6e 7461 696e 207c 0a7c 2020 2020   contain |.|    
-00005960: 2020 2020 207c 2061 7269 7468 6d65 7469       | arithmeti
-00005970: 6320 6578 7072 6573 7369 6f6e 7320 2020  c expressions   
-00005980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059a0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-000059b0: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-000059c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000059d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005840: 2034 2e35 2020 2020 207c 2041 6464 6564   4.5     | Added
+00005850: 2074 6865 2060 602d 2d73 7461 7274 6060   the ``--start``
+00005860: 2061 6e64 2060 602d 2d65 6e64 6060 206f   and ``--end`` o
+00005870: 7074 696f 6e73 2020 2020 2020 2020 2020  ptions          
+00005880: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005890: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+000058a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000058b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000058c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000058d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000058e0: 2034 2e31 2020 2020 207c 2041 6464 6564   4.1     | Added
+000058f0: 2074 6865 2060 602d 2d77 7269 7465 7260   the ``--writer`
+00005900: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
+00005910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005920: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005930: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00005940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005980: 2033 2e34 2020 2020 207c 2041 6464 6564   3.4     | Added
+00005990: 2074 6865 2060 602d 5660 6020 616e 6420   the ``-V`` and 
+000059a0: 6060 2d70 6060 206f 7074 696f 6e73 2061  ``-p`` options a
+000059b0: 6e64 2074 6865 206c 6f6e 6720 6f70 7469  nd the long opti
+000059c0: 6f6e 7320 2020 2020 2020 2020 207c 0a2b  ons          |.+
+000059d0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 000059e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000059f0: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2035 2e32  ---------+.| 5.2
-00005a00: 2020 2020 207c 2041 6464 6564 2074 6865       | Added the
-00005a10: 2061 6269 6c69 7479 2074 6f20 7772 6974   ability to writ
-00005a20: 6520 7468 6520 6269 6e61 7279 2066 696c  e the binary fil
-00005a30: 6520 746f 2073 7461 6e64 6172 6420 6f75  e to standard ou
-00005a40: 7470 7574 2020 2020 207c 0a2b 2d2d 2d2d  tput     |.+----
-00005a50: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000059f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005a20: 2032 2e32 2e32 2020 207c 2041 6464 6564   2.2.2   | Added
+00005a30: 2074 6865 2061 6269 6c69 7479 2074 6f20   the ability to 
+00005a40: 7265 6164 2061 2073 6b6f 6f6c 2066 696c  read a skool fil
+00005a50: 6520 6672 6f6d 2073 7461 6e64 6172 6420  e from standard 
+00005a60: 696e 7075 7420 2020 2020 2020 207c 0a2b  input        |.+
+00005a70: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005a80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005a90: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2035 2e31  ---------+.| 5.1
-00005aa0: 2020 2020 207c 2041 6464 6564 2074 6865       | Added the
-00005ab0: 2060 602d 2d62 6669 7860 602c 2060 602d   ``--bfix``, ``-
-00005ac0: 2d6f 6669 7860 6020 616e 6420 6060 2d2d  -ofix`` and ``--
-00005ad0: 7373 7562 6060 206f 7074 696f 6e73 2020  ssub`` options  
-00005ae0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00005af0: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005ac0: 2032 2e31 2e31 2020 207c 2041 6464 6564   2.1.1   | Added
+00005ad0: 2074 6865 2060 602d 7560 602c 2060 602d   the ``-u``, ``-
+00005ae0: 4460 6020 616e 6420 6060 2d48 6060 206f  D`` and ``-H`` o
+00005af0: 7074 696f 6e73 2020 2020 2020 2020 2020  ptions          
+00005b00: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005b10: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005b30: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2035 2e30  ---------+.| 5.0
-00005b40: 2020 2020 207c 204e 6577 2020 2020 2020       | New      
-00005b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b80: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00005b90: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00005ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00005b60: 2031 2e31 2020 2020 207c 2041 6464 6564   1.1     | Added
+00005b70: 2074 6865 2060 602d 6360 6020 6f70 7469   the ``-c`` opti
+00005b80: 6f6e 2020 2020 2020 2020 2020 2020 2020  on              
+00005b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ba0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00005bb0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 00005bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005bd0: 2d2d 2d2d 2d2d 2d2d 2d2b 0a0a 2e2e 205f  ---------+.... _
-00005be0: 736b 6f6f 6c32 6374 6c2e 7079 3a0a 0a73  skool2ctl.py:..s
-00005bf0: 6b6f 6f6c 3263 746c 2e70 790a 2d2d 2d2d  kool2ctl.py.----
-00005c00: 2d2d 2d2d 2d2d 2d2d 0a60 736b 6f6f 6c32  --------.`skool2
-00005c10: 6374 6c2e 7079 6020 636f 6e76 6572 7473  ctl.py` converts
-00005c20: 2061 2073 6b6f 6f6c 2066 696c 6520 696e   a skool file in
-00005c30: 746f 2061 203a 7265 663a 6063 6f6e 7472  to a :ref:`contr
-00005c40: 6f6c 2066 696c 6520 3c63 6f6e 7472 6f6c  ol file <control
-00005c50: 4669 6c65 733e 602e 0a46 6f72 2065 7861  Files>`..For exa
-00005c60: 6d70 6c65 3a3a 0a0a 2020 2420 736b 6f6f  mple::..  $ skoo
-00005c70: 6c32 6374 6c2e 7079 2067 616d 652e 736b  l2ctl.py game.sk
-00005c80: 6f6f 6c20 3e20 6761 6d65 2e63 746c 0a0a  ool > game.ctl..
-00005c90: 496e 2061 6464 6974 696f 6e20 746f 2062  In addition to b
-00005ca0: 6c6f 636b 2074 7970 6573 2061 6e64 2061  lock types and a
-00005cb0: 6464 7265 7373 6573 2c20 6067 616d 652e  ddresses, `game.
-00005cc0: 6374 6c60 2077 696c 6c20 636f 6e74 6169  ctl` will contai
-00005cd0: 6e20 626c 6f63 6b20 7469 746c 6573 2c0a  n block titles,.
-00005ce0: 626c 6f63 6b20 6465 7363 7269 7074 696f  block descriptio
-00005cf0: 6e73 2c20 7265 6769 7374 6572 732c 206d  ns, registers, m
-00005d00: 6964 2d62 6c6f 636b 2063 6f6d 6d65 6e74  id-block comment
-00005d10: 732c 2062 6c6f 636b 2073 7461 7274 2061  s, block start a
-00005d20: 6e64 2065 6e64 0a63 6f6d 6d65 6e74 732c  nd end.comments,
-00005d30: 2073 7562 2d62 6c6f 636b 2074 7970 6573   sub-block types
-00005d40: 2061 6e64 2061 6464 7265 7373 6573 2c20   and addresses, 
-00005d50: 696e 7374 7275 6374 696f 6e2d 6c65 7665  instruction-leve
-00005d60: 6c20 636f 6d6d 656e 7473 2c20 6e6f 6e2d  l comments, non-
-00005d70: 656e 7472 790a 626c 6f63 6b73 2c20 616e  entry.blocks, an
-00005d80: 6420 736f 6d65 203a 7265 663a 6041 534d  d some :ref:`ASM
-00005d90: 2064 6972 6563 7469 7665 7320 3c61 736d   directives <asm
-00005da0: 4469 7265 6374 6976 6573 3e60 2e0a 0a54  Directives>`...T
-00005db0: 6f20 6c69 7374 2074 6865 206f 7074 696f  o list the optio
-00005dc0: 6e73 2073 7570 706f 7274 6564 2062 7920  ns supported by 
-00005dd0: 6073 6b6f 6f6c 3263 746c 2e70 7960 2c20  `skool2ctl.py`, 
-00005de0: 7275 6e20 6974 2077 6974 6820 6e6f 2061  run it with no a
-00005df0: 7267 756d 656e 7473 3a3a 0a0a 2020 7573  rguments::..  us
-00005e00: 6167 653a 2073 6b6f 6f6c 3263 746c 2e70  age: skool2ctl.p
-00005e10: 7920 5b6f 7074 696f 6e73 5d20 4649 4c45  y [options] FILE
-00005e20: 0a0a 2020 436f 6e76 6572 7420 6120 736b  ..  Convert a sk
-00005e30: 6f6f 6c20 6669 6c65 2069 6e74 6f20 6120  ool file into a 
-00005e40: 636f 6e74 726f 6c20 6669 6c65 2061 6e64  control file and
-00005e50: 2077 7269 7465 2069 7420 746f 2073 7461   write it to sta
-00005e60: 6e64 6172 6420 6f75 7470 7574 2e20 4649  ndard output. FI
-00005e70: 4c45 0a20 206d 6179 2062 6520 6120 7265  LE.  may be a re
-00005e80: 6775 6c61 7220 6669 6c65 2c20 6f72 2027  gular file, or '
-00005e90: 2d27 2066 6f72 2073 7461 6e64 6172 6420  -' for standard 
-00005ea0: 696e 7075 742e 0a0a 2020 4f70 7469 6f6e  input...  Option
-00005eb0: 733a 0a20 2020 202d 622c 202d 2d70 7265  s:.    -b, --pre
-00005ec0: 7365 7276 652d 6261 7365 2020 2050 7265  serve-base   Pre
-00005ed0: 7365 7276 6520 7468 6520 6261 7365 206f  serve the base o
-00005ee0: 6620 6465 6369 6d61 6c20 616e 6420 6865  f decimal and he
-00005ef0: 7861 6465 6369 6d61 6c20 7661 6c75 6573  xadecimal values
-00005f00: 2069 6e0a 2020 2020 2020 2020 2020 2020   in.            
-00005f10: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00005f20: 7374 7275 6374 696f 6e20 6f70 6572 616e  struction operan
-00005f30: 6473 2061 6e64 2044 4546 422f 4445 464d  ds and DEFB/DEFM
-00005f40: 2f44 4546 532f 4445 4657 2073 7461 7465  /DEFS/DEFW state
-00005f50: 6d65 6e74 732e 0a20 2020 202d 4520 4144  ments..    -E AD
-00005f60: 4452 2c20 2d2d 656e 6420 4144 4452 2020  DR, --end ADDR  
-00005f70: 2053 746f 7020 636f 6e76 6572 7469 6e67   Stop converting
-00005f80: 2061 7420 7468 6973 2061 6464 7265 7373   at this address
-00005f90: 2e0a 2020 2020 2d68 2c20 2d2d 6865 7820  ..    -h, --hex 
-00005fa0: 2020 2020 2020 2020 2020 2020 5772 6974              Writ
-00005fb0: 6520 6164 6472 6573 7365 7320 696e 2075  e addresses in u
-00005fc0: 7070 6572 2063 6173 6520 6865 7861 6465  pper case hexade
-00005fd0: 6369 6d61 6c20 666f 726d 6174 2e0a 2020  cimal format..  
-00005fe0: 2020 2d49 2070 3d76 2c20 2d2d 696e 6920    -I p=v, --ini 
-00005ff0: 703d 7620 2020 2020 5365 7420 7468 6520  p=v     Set the 
-00006000: 7661 6c75 6520 6f66 2074 6865 2063 6f6e  value of the con
-00006010: 6669 6775 7261 7469 6f6e 2070 6172 616d  figuration param
-00006020: 6574 6572 2027 7027 2074 6f0a 2020 2020  eter 'p' to.    
-00006030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006040: 2020 2020 2020 2776 272e 2054 6869 7320        'v'. This 
-00006050: 6f70 7469 6f6e 206d 6179 2062 6520 7573  option may be us
-00006060: 6564 206d 756c 7469 706c 6520 7469 6d65  ed multiple time
-00006070: 732e 0a20 2020 202d 6b2c 202d 2d6b 6565  s..    -k, --kee
-00006080: 702d 6c69 6e65 7320 2020 2020 2050 7265  p-lines      Pre
-00006090: 7365 7276 6520 6c69 6e65 2062 7265 616b  serve line break
-000060a0: 7320 696e 2063 6f6d 6d65 6e74 732e 0a20  s in comments.. 
-000060b0: 2020 202d 6c2c 202d 2d68 6578 2d6c 6f77     -l, --hex-low
-000060c0: 6572 2020 2020 2020 2057 7269 7465 2061  er       Write a
-000060d0: 6464 7265 7373 6573 2069 6e20 6c6f 7765  ddresses in lowe
-000060e0: 7220 6361 7365 2068 6578 6164 6563 696d  r case hexadecim
-000060f0: 616c 2066 6f72 6d61 742e 0a20 2020 202d  al format..    -
-00006100: 2d73 686f 772d 636f 6e66 6967 2020 2020  -show-config    
-00006110: 2020 2020 2053 686f 7720 636f 6e66 6967       Show config
-00006120: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
-00006130: 7220 7661 6c75 6573 2e0a 2020 2020 2d53  r values..    -S
-00006140: 2041 4444 522c 202d 2d73 7461 7274 2041   ADDR, --start A
-00006150: 4444 520a 2020 2020 2020 2020 2020 2020  DDR.            
-00006160: 2020 2020 2020 2020 2020 2020 2020 5374                St
-00006170: 6172 7420 636f 6e76 6572 7469 6e67 2061  art converting a
-00006180: 7420 7468 6973 2061 6464 7265 7373 2e0a  t this address..
-00006190: 2020 2020 2d56 2c20 2d2d 7665 7273 696f      -V, --versio
-000061a0: 6e20 2020 2020 2020 2020 5368 6f77 2053  n         Show S
-000061b0: 6b6f 6f6c 4b69 7420 7665 7273 696f 6e20  koolKit version 
-000061c0: 6e75 6d62 6572 2061 6e64 2065 7869 742e  number and exit.
-000061d0: 0a20 2020 202d 7720 582c 202d 2d77 7269  .    -w X, --wri
-000061e0: 7465 2058 2020 2020 2020 2057 7269 7465  te X       Write
-000061f0: 206f 6e6c 7920 7468 6573 6520 656c 656d   only these elem
-00006200: 656e 7473 2c20 7768 6572 6520 5820 6973  ents, where X is
-00006210: 206f 6e65 206f 7220 6d6f 7265 206f 663a   one or more of:
-00006220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006230: 2020 2020 2020 2020 2020 2020 2061 203d               a =
-00006240: 2041 534d 2064 6972 6563 7469 7665 730a   ASM directives.
-00006250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006260: 2020 2020 2020 2020 2020 2020 6220 3d20              b = 
-00006270: 626c 6f63 6b20 7479 7065 7320 616e 6420  block types and 
-00006280: 6164 6472 6573 7365 730a 2020 2020 2020  addresses.      
-00006290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000062a0: 2020 2020 2020 7420 3d20 626c 6f63 6b20        t = block 
-000062b0: 7469 746c 6573 0a20 2020 2020 2020 2020  titles.         
-000062c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000062d0: 2020 2064 203d 2062 6c6f 636b 2064 6573     d = block des
-000062e0: 6372 6970 7469 6f6e 730a 2020 2020 2020  criptions.      
-000062f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006300: 2020 2020 2020 7220 3d20 7265 6769 7374        r = regist
-00006310: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
-00006320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006330: 6d20 3d20 6d69 642d 626c 6f63 6b20 636f  m = mid-block co
-00006340: 6d6d 656e 7473 2061 6e64 2062 6c6f 636b  mments and block
-00006350: 2073 7461 7274 2f65 6e64 2063 6f6d 6d65   start/end comme
-00006360: 6e74 730a 2020 2020 2020 2020 2020 2020  nts.            
-00006370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006380: 7320 3d20 7375 622d 626c 6f63 6b20 7479  s = sub-block ty
-00006390: 7065 7320 616e 6420 6164 6472 6573 7365  pes and addresse
-000063a0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-000063b0: 2020 2020 2020 2020 2020 2020 2020 6320                c 
-000063c0: 3d20 696e 7374 7275 6374 696f 6e2d 6c65  = instruction-le
-000063d0: 7665 6c20 636f 6d6d 656e 7473 0a20 2020  vel comments.   
-000063e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000063f0: 2020 2020 2020 2020 206e 203d 206e 6f6e           n = non
-00006400: 2d65 6e74 7279 2062 6c6f 636b 730a 0a2e  -entry blocks...
-00006410: 2e20 5f73 6b6f 6f6c 3263 746c 2d63 6f6e  . _skool2ctl-con
-00006420: 663a 0a0a 436f 6e66 6967 7572 6174 696f  f:..Configuratio
-00006430: 6e0a 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a  n.^^^^^^^^^^^^^.
-00006440: 6073 6b6f 6f6c 3263 746c 2e70 7960 2077  `skool2ctl.py` w
-00006450: 696c 6c20 7265 6164 2063 6f6e 6669 6775  ill read configu
-00006460: 7261 7469 6f6e 2066 726f 6d20 6120 6669  ration from a fi
-00006470: 6c65 206e 616d 6564 2060 736b 6f6f 6c6b  le named `skoolk
-00006480: 6974 2e69 6e69 6020 696e 2074 6865 0a63  it.ini` in the.c
-00006490: 7572 7265 6e74 2077 6f72 6b69 6e67 2064  urrent working d
-000064a0: 6972 6563 746f 7279 206f 7220 696e 2060  irectory or in `
-000064b0: 7e2f 2e73 6b6f 6f6c 6b69 7460 2c20 6966  ~/.skoolkit`, if
-000064c0: 2070 7265 7365 6e74 2e20 5468 6520 7265   present. The re
-000064d0: 636f 676e 6973 6564 0a63 6f6e 6669 6775  cognised.configu
-000064e0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
-000064f0: 7320 6172 653a 0a0a 2a20 6060 4865 7860  s are:..* ``Hex`
-00006500: 6020 2d20 7772 6974 6520 6164 6472 6573  ` - write addres
-00006510: 7365 7320 696e 2064 6563 696d 616c 2028  ses in decimal (
-00006520: 6060 3060 602c 2074 6865 2064 6566 6175  ``0``, the defau
-00006530: 6c74 292c 206c 6f77 6572 2063 6173 650a  lt), lower case.
-00006540: 2020 6865 7861 6465 6369 6d61 6c20 2860    hexadecimal (`
-00006550: 6031 6060 292c 2020 6f72 2075 7070 6572  `1``),  or upper
-00006560: 2063 6173 6520 6865 7861 6465 6369 6d61   case hexadecima
-00006570: 6c20 2860 6032 6060 290a 2a20 6060 4b65  l (``2``).* ``Ke
-00006580: 6570 4c69 6e65 7360 6020 2d20 7072 6573  epLines`` - pres
-00006590: 6572 7665 206c 696e 6520 6272 6561 6b73  erve line breaks
-000065a0: 2069 6e20 636f 6d6d 656e 7473 2028 6060   in comments (``
-000065b0: 3160 6029 2c20 6f72 2064 6f6e 2774 2028  1``), or don't (
-000065c0: 6060 3060 602c 0a20 2074 6865 2064 6566  ``0``,.  the def
-000065d0: 6175 6c74 290a 2a20 6060 5072 6573 6572  ault).* ``Preser
-000065e0: 7665 4261 7365 6060 202d 2070 7265 7365  veBase`` - prese
-000065f0: 7276 6520 7468 6520 6261 7365 206f 6620  rve the base of 
-00006600: 6465 6369 6d61 6c20 616e 6420 6865 7861  decimal and hexa
-00006610: 6465 6369 6d61 6c20 7661 6c75 6573 2069  decimal values i
-00006620: 6e0a 2020 696e 7374 7275 6374 696f 6e20  n.  instruction 
-00006630: 6f70 6572 616e 6473 2061 6e64 2044 4546  operands and DEF
-00006640: 422f 4445 464d 2f44 4546 532f 4445 4657  B/DEFM/DEFS/DEFW
-00006650: 2073 7461 7465 6d65 6e74 7320 2860 6031   statements (``1
-00006660: 6060 292c 206f 7220 646f 6e27 740a 2020  ``), or don't.  
-00006670: 2860 6030 6060 2c20 7468 6520 6465 6661  (``0``, the defa
-00006680: 756c 7429 0a0a 436f 6e66 6967 7572 6174  ult)..Configurat
-00006690: 696f 6e20 7061 7261 6d65 7465 7273 206d  ion parameters m
-000066a0: 7573 7420 6170 7065 6172 2069 6e20 6120  ust appear in a 
-000066b0: 6060 5b73 6b6f 6f6c 3263 746c 5d60 6020  ``[skool2ctl]`` 
-000066c0: 7365 6374 696f 6e2e 2046 6f72 0a65 7861  section. For.exa
-000066d0: 6d70 6c65 2c20 746f 206d 616b 6520 6073  mple, to make `s
-000066e0: 6b6f 6f6c 3263 746c 2e70 7960 2077 7269  kool2ctl.py` wri
-000066f0: 7465 2075 7070 6572 2063 6173 6520 6865  te upper case he
-00006700: 7861 6465 6369 6d61 6c20 6164 6472 6573  xadecimal addres
-00006710: 7365 7320 6279 0a64 6566 6175 6c74 2028  ses by.default (
-00006720: 7769 7468 6f75 7420 6861 7669 6e67 2074  without having t
-00006730: 6f20 7573 6520 7468 6520 6060 2d68 6060  o use the ``-h``
-00006740: 206f 7074 696f 6e20 6f6e 2074 6865 2063   option on the c
-00006750: 6f6d 6d61 6e64 206c 696e 6529 2c20 6164  ommand line), ad
-00006760: 6420 7468 650a 666f 6c6c 6f77 696e 6720  d the.following 
-00006770: 7365 6374 696f 6e20 746f 2060 736b 6f6f  section to `skoo
-00006780: 6c6b 6974 2e69 6e69 603a 3a0a 0a20 205b  lkit.ini`::..  [
-00006790: 736b 6f6f 6c32 6374 6c5d 0a20 2048 6578  skool2ctl].  Hex
-000067a0: 3d32 0a0a 436f 6e66 6967 7572 6174 696f  =2..Configuratio
-000067b0: 6e20 7061 7261 6d65 7465 7273 206d 6179  n parameters may
-000067c0: 2061 6c73 6f20 6265 2073 6574 206f 6e20   also be set on 
-000067d0: 7468 6520 636f 6d6d 616e 6420 6c69 6e65  the command line
-000067e0: 2062 7920 7573 696e 6720 7468 650a 6060   by using the.``
-000067f0: 2d2d 696e 6960 6020 6f70 7469 6f6e 2e20  --ini`` option. 
-00006800: 5061 7261 6d65 7465 7220 7661 6c75 6573  Parameter values
-00006810: 2073 6574 2074 6869 7320 7761 7920 7769   set this way wi
-00006820: 6c6c 206f 7665 7272 6964 6520 616e 7920  ll override any 
-00006830: 666f 756e 6420 696e 0a60 736b 6f6f 6c6b  found in.`skoolk
-00006840: 6974 2e69 6e69 602e 0a0a 2b2d 2d2d 2d2d  it.ini`...+-----
-00006850: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a0a  -------------+..
+00005c00: 2e2e 205f 736b 6f6f 6c32 6269 6e2e 7079  .. _skool2bin.py
+00005c10: 3a0a 0a73 6b6f 6f6c 3262 696e 2e70 790a  :..skool2bin.py.
+00005c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 736b  ------------.`sk
+00005c30: 6f6f 6c32 6269 6e2e 7079 6020 636f 6e76  ool2bin.py` conv
+00005c40: 6572 7473 2061 2073 6b6f 6f6c 2066 696c  erts a skool fil
+00005c50: 6520 696e 746f 2061 2062 696e 6172 7920  e into a binary 
+00005c60: 2872 6177 206d 656d 6f72 7929 2066 696c  (raw memory) fil
+00005c70: 652e 2046 6f72 0a65 7861 6d70 6c65 3a3a  e. For.example::
+00005c80: 0a0a 2020 2420 736b 6f6f 6c32 6269 6e2e  ..  $ skool2bin.
+00005c90: 7079 2067 616d 652e 736b 6f6f 6c0a 0a54  py game.skool..T
+00005ca0: 6f20 6c69 7374 2074 6865 206f 7074 696f  o list the optio
+00005cb0: 6e73 2073 7570 706f 7274 6564 2062 7920  ns supported by 
+00005cc0: 6073 6b6f 6f6c 3262 696e 2e70 7960 2c20  `skool2bin.py`, 
+00005cd0: 7275 6e20 6974 2077 6974 6820 6e6f 2061  run it with no a
+00005ce0: 7267 756d 656e 7473 3a3a 0a0a 2020 7573  rguments::..  us
+00005cf0: 6167 653a 2073 6b6f 6f6c 3262 696e 2e70  age: skool2bin.p
+00005d00: 7920 5b6f 7074 696f 6e73 5d20 6669 6c65  y [options] file
+00005d10: 2e73 6b6f 6f6c 205b 6669 6c65 2e62 696e  .skool [file.bin
+00005d20: 5d0a 0a20 2043 6f6e 7665 7274 2061 2073  ]..  Convert a s
+00005d30: 6b6f 6f6c 2066 696c 6520 696e 746f 2061  kool file into a
+00005d40: 2062 696e 6172 7920 2872 6177 206d 656d   binary (raw mem
+00005d50: 6f72 7929 2066 696c 652e 2027 6669 6c65  ory) file. 'file
+00005d60: 2e73 6b6f 6f6c 2720 6d61 7920 6265 2061  .skool' may be a
+00005d70: 0a20 2072 6567 756c 6172 2066 696c 652c  .  regular file,
+00005d80: 206f 7220 272d 2720 666f 7220 7374 616e   or '-' for stan
+00005d90: 6461 7264 2069 6e70 7574 2e20 4966 2027  dard input. If '
+00005da0: 6669 6c65 2e62 696e 2720 6973 206e 6f74  file.bin' is not
+00005db0: 2067 6976 656e 2c20 6974 0a20 2064 6566   given, it.  def
+00005dc0: 6175 6c74 7320 746f 2074 6865 206e 616d  aults to the nam
+00005dd0: 6520 6f66 2074 6865 2069 6e70 7574 2066  e of the input f
+00005de0: 696c 6520 7769 7468 2027 2e73 6b6f 6f6c  ile with '.skool
+00005df0: 2720 7265 706c 6163 6564 2062 7920 272e  ' replaced by '.
+00005e00: 6269 6e27 2e0a 2020 2766 696c 652e 6269  bin'..  'file.bi
+00005e10: 6e27 206d 6179 2062 6520 6120 7265 6775  n' may be a regu
+00005e20: 6c61 7220 6669 6c65 2c20 6f72 2027 2d27  lar file, or '-'
+00005e30: 2066 6f72 2073 7461 6e64 6172 6420 6f75   for standard ou
+00005e40: 7470 7574 2e0a 0a20 204f 7074 696f 6e73  tput...  Options
+00005e50: 3a0a 2020 2020 2d42 2c20 2d2d 6261 6e6b  :.    -B, --bank
+00005e60: 7320 2020 2020 2020 2020 2020 5072 6f63  s           Proc
+00005e70: 6573 7320 4062 616e 6b20 6469 7265 6374  ess @bank direct
+00005e80: 6976 6573 2061 6e64 2077 7269 7465 2052  ives and write R
+00005e90: 414d 2062 616e 6b73 2030 2d37 2074 6f20  AM banks 0-7 to 
+00005ea0: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
+00005eb0: 2020 2020 2020 2020 2020 2020 3132 384b              128K
+00005ec0: 2066 696c 652e 0a20 2020 202d 622c 202d   file..    -b, -
+00005ed0: 2d62 6669 7820 2020 2020 2020 2020 2020  -bfix           
+00005ee0: 2041 7070 6c79 2040 6f66 6978 2061 6e64   Apply @ofix and
+00005ef0: 2040 6266 6978 2064 6972 6563 7469 7665   @bfix directive
+00005f00: 732e 0a20 2020 202d 642c 202d 2d64 6174  s..    -d, --dat
+00005f10: 6120 2020 2020 2020 2020 2020 2050 726f  a            Pro
+00005f20: 6365 7373 2040 6465 6662 2c20 4064 6566  cess @defb, @def
+00005f30: 7320 616e 6420 4064 6566 7720 6469 7265  s and @defw dire
+00005f40: 6374 6976 6573 2e0a 2020 2020 2d45 2041  ctives..    -E A
+00005f50: 4444 522c 202d 2d65 6e64 2041 4444 5220  DDR, --end ADDR 
+00005f60: 2020 5374 6f70 2063 6f6e 7665 7274 696e    Stop convertin
+00005f70: 6720 6174 2074 6869 7320 6164 6472 6573  g at this addres
+00005f80: 732e 0a20 2020 202d 692c 202d 2d69 7375  s..    -i, --isu
+00005f90: 6220 2020 2020 2020 2020 2020 2041 7070  b            App
+00005fa0: 6c79 2040 6973 7562 2064 6972 6563 7469  ly @isub directi
+00005fb0: 7665 732e 0a20 2020 202d 6f2c 202d 2d6f  ves..    -o, --o
+00005fc0: 6669 7820 2020 2020 2020 2020 2020 2041  fix            A
+00005fd0: 7070 6c79 2040 6f66 6978 2064 6972 6563  pply @ofix direc
+00005fe0: 7469 7665 732e 0a20 2020 202d 722c 202d  tives..    -r, -
+00005ff0: 2d72 7375 6220 2020 2020 2020 2020 2020  -rsub           
+00006000: 2041 7070 6c79 2040 6973 7562 2c20 4073   Apply @isub, @s
+00006010: 7375 6220 616e 6420 4072 7375 6220 6469  sub and @rsub di
+00006020: 7265 6374 6976 6573 2028 696d 706c 6965  rectives (implie
+00006030: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00006040: 2020 2020 2020 2020 2020 2020 2d2d 6f66              --of
+00006050: 6978 292e 0a20 2020 202d 522c 202d 2d72  ix)..    -R, --r
+00006060: 6669 7820 2020 2020 2020 2020 2020 2041  fix            A
+00006070: 7070 6c79 2040 6f66 6978 2c20 4062 6669  pply @ofix, @bfi
+00006080: 7820 616e 6420 4072 6669 7820 6469 7265  x and @rfix dire
+00006090: 6374 6976 6573 2028 696d 706c 6965 730a  ctives (implies.
+000060a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000060b0: 2020 2020 2020 2020 2020 2d2d 7273 7562            --rsub
+000060c0: 292e 0a20 2020 202d 732c 202d 2d73 7375  )..    -s, --ssu
+000060d0: 6220 2020 2020 2020 2020 2020 2041 7070  b            App
+000060e0: 6c79 2040 6973 7562 2061 6e64 2040 7373  ly @isub and @ss
+000060f0: 7562 2064 6972 6563 7469 7665 732e 0a20  ub directives.. 
+00006100: 2020 202d 5320 4144 4452 2c20 2d2d 7374     -S ADDR, --st
+00006110: 6172 7420 4144 4452 0a20 2020 2020 2020  art ADDR.       
+00006120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006130: 2020 2053 7461 7274 2063 6f6e 7665 7274     Start convert
+00006140: 696e 6720 6174 2074 6869 7320 6164 6472  ing at this addr
+00006150: 6573 732e 0a20 2020 202d 762c 202d 2d76  ess..    -v, --v
+00006160: 6572 626f 7365 2020 2020 2020 2020 2053  erbose         S
+00006170: 686f 7720 696e 666f 206f 6e20 6561 6368  how info on each
+00006180: 2063 6f6e 7665 7274 6564 2069 6e73 7472   converted instr
+00006190: 7563 7469 6f6e 2e0a 2020 2020 2d56 2c20  uction..    -V, 
+000061a0: 2d2d 7665 7273 696f 6e20 2020 2020 2020  --version       
+000061b0: 2020 5368 6f77 2053 6b6f 6f6c 4b69 7420    Show SkoolKit 
+000061c0: 7665 7273 696f 6e20 6e75 6d62 6572 2061  version number a
+000061d0: 6e64 2065 7869 742e 0a20 2020 202d 772c  nd exit..    -w,
+000061e0: 202d 2d6e 6f2d 7761 726e 696e 6773 2020   --no-warnings  
+000061f0: 2020 2053 7570 7072 6573 7320 7761 726e     Suppress warn
+00006200: 696e 6773 2e0a 0a54 6865 2060 602d 2d76  ings...The ``--v
+00006210: 6572 626f 7365 6060 206f 7074 696f 6e20  erbose`` option 
+00006220: 7368 6f77 7320 696e 666f 726d 6174 696f  shows informatio
+00006230: 6e20 6f6e 2065 6163 6820 636f 6e76 6572  n on each conver
+00006240: 7465 6420 696e 7374 7275 6374 696f 6e2c  ted instruction,
+00006250: 2073 7563 680a 6173 2077 6865 7468 6572   such.as whether
+00006260: 2069 7420 7761 7320 696e 7365 7274 6564   it was inserted
+00006270: 2062 6566 6f72 6520 6f72 2061 6674 6572   before or after
+00006280: 2061 6e6f 7468 6572 2069 6e73 7472 7563   another instruc
+00006290: 7469 6f6e 2028 6279 2061 2060 6040 2a73  tion (by a ``@*s
+000062a0: 7562 6060 0a6f 7220 6060 402a 6669 7860  ub``.or ``@*fix`
+000062b0: 6020 6469 7265 6374 6976 6529 2c20 616e  ` directive), an
+000062c0: 6420 6974 7320 6f72 6967 696e 616c 2061  d its original a
+000062d0: 6464 7265 7373 2028 6966 2069 7420 7761  ddress (if it wa
+000062e0: 7320 7265 6c6f 6361 7465 6420 6279 2074  s relocated by t
+000062f0: 6865 0a69 6e73 6572 7469 6f6e 2c20 7265  he.insertion, re
+00006300: 6d6f 7661 6c20 6f72 2072 6570 6c61 6365  moval or replace
+00006310: 6d65 6e74 206f 6620 6f74 6865 7220 696e  ment of other in
+00006320: 7374 7275 6374 696f 6e73 292e 2046 6f72  structions). For
+00006330: 2065 7861 6d70 6c65 3a3a 0a0a 2020 3430   example::..  40
+00006340: 3030 3020 3943 3430 203e 2058 4f52 2041  000 9C40 > XOR A
+00006350: 0a20 2034 3030 3031 2039 4334 3120 7c20  .  40001 9C41 | 
+00006360: 4c44 2048 4c2c 3430 3030 3620 2020 3a20  LD HL,40006   : 
+00006370: 3430 3030 3020 3943 3430 204c 4420 484c  40000 9C40 LD HL
+00006380: 2c34 3030 3033 0a20 2034 3030 3034 2039  ,40003.  40004 9
+00006390: 4334 3420 2b20 4a52 2034 3030 3036 2020  C44 + JR 40006  
+000063a0: 2020 2020 3a20 2020 2020 2020 2020 2020      :           
+000063b0: 204a 5220 3430 3030 330a 2020 3430 3030   JR 40003.  4000
+000063c0: 3620 3943 3436 2020 2052 4554 2020 2020  6 9C46   RET    
+000063d0: 2020 2020 2020 203a 2034 3030 3033 2039         : 40003 9
+000063e0: 4334 3320 5245 540a 0a54 6869 7320 6f75  C43 RET..This ou
+000063f0: 7470 7574 2073 686f 7773 2074 6861 743a  tput shows that:
+00006400: 0a0a 2a20 5468 6520 696e 7374 7275 6374  ..* The instruct
+00006410: 696f 6e20 6174 2034 3030 3030 2028 584f  ion at 40000 (XO
+00006420: 5220 4129 2077 6173 2069 6e73 6572 7465  R A) was inserte
+00006430: 6420 6265 666f 7265 2028 6060 3e60 6029  d before (``>``)
+00006440: 2061 6e6f 7468 6572 0a20 2069 6e73 7472   another.  instr
+00006450: 7563 7469 6f6e 0a2a 2054 6865 2069 6e73  uction.* The ins
+00006460: 7472 7563 7469 6f6e 2061 7420 3430 3030  truction at 4000
+00006470: 3120 284c 4420 484c 2c34 3030 3036 2920  1 (LD HL,40006) 
+00006480: 6f76 6572 7772 6f74 6520 2860 607c 6060  overwrote (``|``
+00006490: 2920 7468 6520 696e 7374 7275 6374 696f  ) the instructio
+000064a0: 6e28 7329 0a20 206f 7269 6769 6e61 6c6c  n(s).  originall
+000064b0: 7920 6174 2034 3030 3030 2c20 616e 6420  y at 40000, and 
+000064c0: 6861 6420 6974 7320 6f70 6572 616e 6420  had its operand 
+000064d0: 6368 616e 6765 6420 6672 6f6d 2034 3030  changed from 400
+000064e0: 3033 2028 6265 6361 7573 6520 7468 650a  03 (because the.
+000064f0: 2020 696e 7374 7275 6374 696f 6e20 6f72    instruction or
+00006500: 6967 696e 616c 6c79 2061 7420 7468 6174  iginally at that
+00006510: 2061 6464 7265 7373 2077 6173 2072 656c   address was rel
+00006520: 6f63 6174 6564 2074 6f20 3430 3030 3629  ocated to 40006)
+00006530: 0a2a 2054 6865 2069 6e73 7472 7563 7469  .* The instructi
+00006540: 6f6e 2061 7420 3430 3030 3420 284a 5220  on at 40004 (JR 
+00006550: 3430 3030 3629 2077 6173 2069 6e73 6572  40006) was inser
+00006560: 7465 6420 6166 7465 7220 2860 602b 6060  ted after (``+``
+00006570: 2920 616e 6f74 6865 720a 2020 696e 7374  ) another.  inst
+00006580: 7275 6374 696f 6e2c 2061 6e64 2061 6c73  ruction, and als
+00006590: 6f20 6861 6420 6974 7320 6f70 6572 616e  o had its operan
+000065a0: 6420 6368 616e 6765 6420 6672 6f6d 2034  d changed from 4
+000065b0: 3030 3033 0a2a 2054 6865 2069 6e73 7472  0003.* The instr
+000065c0: 7563 7469 6f6e 2061 7420 3430 3030 3620  uction at 40006 
+000065d0: 2852 4554 2920 7761 7320 6f72 6967 696e  (RET) was origin
+000065e0: 616c 6c79 2061 7420 3430 3030 3320 2862  ally at 40003 (b
+000065f0: 6566 6f72 6520 6f74 6865 720a 2020 696e  efore other.  in
+00006600: 7374 7275 6374 696f 6e73 2077 6572 6520  structions were 
+00006610: 696e 7365 7274 6564 2c20 7265 6d6f 7665  inserted, remove
+00006620: 6420 6f72 2072 6570 6c61 6365 6429 0a0a  d or replaced)..
+00006630: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00006640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006680: 7c20 5665 7273 696f 6e20 7c20 4368 616e  | Version | Chan
+00006690: 6765 7320 2020 2020 2020 2020 2020 2020  ges             
+000066a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000066b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000066c0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+000066d0: 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d  +=========+=====
+000066e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000066f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00006700: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00006710: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a  ==============+.
+00006720: 7c20 392e 3120 2020 2020 7c20 4164 6465  | 9.1     | Adde
+00006730: 6420 7468 6520 6060 2d2d 6261 6e6b 7360  d the ``--banks`
+00006740: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
+00006750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006760: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+00006770: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00006780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000067a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000067b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+000067c0: 7c20 382e 3120 2020 2020 7c20 4164 6465  | 8.1     | Adde
+000067d0: 6420 7468 6520 6060 2d2d 6461 7461 6060  d the ``--data``
+000067e0: 2c20 6060 2d2d 7273 7562 6060 2c20 6060  , ``--rsub``, ``
+000067f0: 2d2d 7266 6978 6060 2c20 6060 2d2d 7665  --rfix``, ``--ve
+00006800: 7262 6f73 6560 6020 616e 6420 2020 7c0a  rbose`` and   |.
+00006810: 7c20 2020 2020 2020 2020 7c20 6060 2d2d  |         | ``--
+00006820: 6e6f 2d77 6172 6e69 6e67 7360 6020 6f70  no-warnings`` op
+00006830: 7469 6f6e 7320 2020 2020 2020 2020 2020  tions           
+00006840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006850: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+00006860: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
 00006870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006890: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 5665 7273  --------+.| Vers
-000068a0: 696f 6e20 7c20 4368 616e 6765 7320 2020  ion | Changes   
-000068b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000068c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000068d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000068e0: 2020 2020 2020 2020 7c0a 2b3d 3d3d 3d3d          |.+=====
-000068f0: 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d  ====+===========
-00006900: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006910: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006920: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00006930: 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 372e 3220  ========+.| 7.2 
-00006940: 2020 2020 7c20 436f 6e66 6967 7572 6174      | Configurat
-00006950: 696f 6e20 6973 2072 6561 6420 6672 6f6d  ion is read from
-00006960: 2060 736b 6f6f 6c6b 6974 2e69 6e69 6020   `skoolkit.ini` 
-00006970: 6966 2070 7265 7365 6e74 3b20 6164 6465  if present; adde
-00006980: 6420 7468 6520 2020 7c0a 7c20 2020 2020  d the   |.|     
-00006990: 2020 2020 7c20 6060 2d2d 696e 6960 602c      | ``--ini``,
-000069a0: 2060 602d 2d73 686f 772d 636f 6e66 6967   ``--show-config
-000069b0: 6060 2061 6e64 2060 602d 2d6b 6565 702d  `` and ``--keep-
-000069c0: 6c69 6e65 7360 6020 6f70 7469 6f6e 7320  lines`` options 
-000069d0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000069e0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000069f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000068a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+000068b0: 7c20 372e 3020 2020 2020 7c20 3a72 6566  | 7.0     | :ref
+000068c0: 3a60 6173 6d2d 6966 6020 6469 7265 6374  :`asm-if` direct
+000068d0: 6976 6573 2061 7265 2070 726f 6365 7373  ives are process
+000068e0: 6564 2020 2020 2020 2020 2020 2020 2020  ed              
+000068f0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+00006900: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00006910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006950: 7c20 362e 3220 2020 2020 7c20 5468 6520  | 6.2     | The 
+00006960: 6060 2d2d 656e 6460 6020 616e 6420 6060  ``--end`` and ``
+00006970: 2d2d 7374 6172 7460 6020 6f70 7469 6f6e  --start`` option
+00006980: 7320 6163 6365 7074 2061 2068 6578 6164  s accept a hexad
+00006990: 6563 696d 616c 2020 2020 2020 2020 7c0a  ecimal        |.
+000069a0: 7c20 2020 2020 2020 2020 7c20 696e 7465  |         | inte
+000069b0: 6765 7220 7072 6566 6978 6564 2062 7920  ger prefixed by 
+000069c0: 2730 7827 2020 2020 2020 2020 2020 2020  '0x'            
+000069d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000069e0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+000069f0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
 00006a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006a20: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 372e 3020  --------+.| 7.0 
-00006a30: 2020 2020 7c20 4164 6465 6420 7375 7070      | Added supp
-00006a40: 6f72 7420 666f 7220 7468 6520 276e 2720  ort for the 'n' 
-00006a50: 6964 656e 7469 6669 6572 2069 6e20 7468  identifier in th
-00006a60: 6520 6060 2d2d 7772 6974 6560 6020 6f70  e ``--write`` op
-00006a70: 7469 6f6e 2020 2020 7c0a 2b2d 2d2d 2d2d  tion    |.+-----
-00006a80: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006a90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ac0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3220  --------+.| 6.2 
-00006ad0: 2020 2020 7c20 5468 6520 6060 2d2d 656e      | The ``--en
-00006ae0: 6460 6020 616e 6420 6060 2d2d 7374 6172  d`` and ``--star
-00006af0: 7460 6020 6f70 7469 6f6e 7320 6163 6365  t`` options acce
-00006b00: 7074 2061 2068 6578 6164 6563 696d 616c  pt a hexadecimal
-00006b10: 2020 2020 2020 2020 7c0a 7c20 2020 2020          |.|     
-00006b20: 2020 2020 7c20 696e 7465 6765 7220 7072      | integer pr
-00006b30: 6566 6978 6564 2062 7920 2730 7827 2020  efixed by '0x'  
-00006b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006b60: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006b70: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006a40: 7c20 362e 3120 2020 2020 7c20 4164 6465  | 6.1     | Adde
+00006a50: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
+00006a60: 2061 7373 656d 626c 6520 696e 7374 7275   assemble instru
+00006a70: 6374 696f 6e73 2077 686f 7365 206f 7065  ctions whose ope
+00006a80: 7261 6e64 7320 636f 6e74 6169 6e20 7c0a  rands contain |.
+00006a90: 7c20 2020 2020 2020 2020 7c20 6172 6974  |         | arit
+00006aa0: 686d 6574 6963 2065 7870 7265 7373 696f  hmetic expressio
+00006ab0: 6e73 2020 2020 2020 2020 2020 2020 2020  ns              
+00006ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006ad0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+00006ae0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00006af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006b30: 7c20 352e 3220 2020 2020 7c20 4164 6465  | 5.2     | Adde
+00006b40: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
+00006b50: 2077 7269 7465 2074 6865 2062 696e 6172   write the binar
+00006b60: 7920 6669 6c65 2074 6f20 7374 616e 6461  y file to standa
+00006b70: 7264 206f 7574 7075 7420 2020 2020 7c0a  rd output     |.
+00006b80: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
 00006b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006bb0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3020  --------+.| 6.0 
-00006bc0: 2020 2020 7c20 4164 6465 6420 7375 7070      | Added supp
-00006bd0: 6f72 7420 666f 7220 7468 6520 2761 2720  ort for the 'a' 
-00006be0: 6964 656e 7469 6669 6572 2069 6e20 7468  identifier in th
-00006bf0: 6520 6060 2d2d 7772 6974 6560 6020 6f70  e ``--write`` op
-00006c00: 7469 6f6e 2020 2020 7c0a 2b2d 2d2d 2d2d  tion    |.+-----
-00006c10: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006bd0: 7c20 352e 3120 2020 2020 7c20 4164 6465  | 5.1     | Adde
+00006be0: 6420 7468 6520 6060 2d2d 6266 6978 6060  d the ``--bfix``
+00006bf0: 2c20 6060 2d2d 6f66 6978 6060 2061 6e64  , ``--ofix`` and
+00006c00: 2060 602d 2d73 7375 6260 6020 6f70 7469   ``--ssub`` opti
+00006c10: 6f6e 7320 2020 2020 2020 2020 2020 7c0a  ons           |.
+00006c20: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
 00006c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006c50: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 352e 3120  --------+.| 5.1 
-00006c60: 2020 2020 7c20 4120 7465 726d 696e 616c      | A terminal
-00006c70: 2060 6069 6060 2064 6972 6563 7469 7665   ``i`` directive
-00006c80: 2069 7320 6170 7065 6e64 6564 2069 6620   is appended if 
-00006c90: 7468 6520 736b 6f6f 6c20 6669 6c65 2065  the skool file e
-00006ca0: 6e64 7320 2020 2020 7c0a 7c20 2020 2020  nds     |.|     
-00006cb0: 2020 2020 7c20 6265 666f 7265 2036 3535      | before 655
-00006cc0: 3336 2020 2020 2020 2020 2020 2020 2020  36              
-00006cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006cf0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006d00: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006d40: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 342e 3520  --------+.| 4.5 
-00006d50: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00006d60: 6060 2d2d 7374 6172 7460 6020 616e 6420  ``--start`` and 
-00006d70: 6060 2d2d 656e 6460 6020 6f70 7469 6f6e  ``--end`` option
-00006d80: 7320 2020 2020 2020 2020 2020 2020 2020  s               
-00006d90: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006da0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006de0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 342e 3420  --------+.| 4.4 
-00006df0: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00006e00: 6060 2d2d 6865 782d 6c6f 7765 7260 6020  ``--hex-lower`` 
-00006e10: 6f70 7469 6f6e 2020 2020 2020 2020 2020  option          
-00006e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e30: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006e40: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006e80: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 332e 3720  --------+.| 3.7 
-00006e90: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00006ea0: 6060 2d2d 7072 6573 6572 7665 2d62 6173  ``--preserve-bas
-00006eb0: 6560 6020 6f70 7469 6f6e 2020 2020 2020  e`` option      
-00006ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ed0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006ee0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006f20: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 332e 3420  --------+.| 3.4 
-00006f30: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00006f40: 6060 2d56 6060 206f 7074 696f 6e20 616e  ``-V`` option an
-00006f50: 6420 7468 6520 6c6f 6e67 206f 7074 696f  d the long optio
-00006f60: 6e73 2020 2020 2020 2020 2020 2020 2020  ns              
-00006f70: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00006f80: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00006f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006fc0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 322e 3420  --------+.| 2.4 
-00006fd0: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00006fe0: 6162 696c 6974 7920 746f 2070 7265 7365  ability to prese
-00006ff0: 7276 6520 736f 6d65 2041 534d 2064 6972  rve some ASM dir
-00007000: 6563 7469 7665 7320 2020 2020 2020 2020  ectives         
-00007010: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00007020: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00007030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007060: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 322e 322e  --------+.| 2.2.
-00007070: 3220 2020 7c20 4164 6465 6420 7468 6520  2   | Added the 
-00007080: 6162 696c 6974 7920 746f 2072 6561 6420  ability to read 
-00007090: 6120 736b 6f6f 6c20 6669 6c65 2066 726f  a skool file fro
-000070a0: 6d20 7374 616e 6461 7264 2069 6e70 7574  m standard input
-000070b0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-000070c0: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-000070d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000070e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000070f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007100: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 322e 302e  --------+.| 2.0.
-00007110: 3620 2020 7c20 4164 6465 6420 7468 6520  6   | Added the 
-00007120: 6060 2d68 6060 206f 7074 696f 6e20 2020  ``-h`` option   
-00007130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007150: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00007160: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00007170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000071a0: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 312e 3120  --------+.| 1.1 
-000071b0: 2020 2020 7c20 4e65 7720 2020 2020 2020      | New       
-000071c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000071f0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
-00007200: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00007210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007240: 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e 2e20 5f73  --------+.... _s
-00007250: 6b6f 6f6c 3268 746d 6c2e 7079 3a0a 0a73  kool2html.py:..s
-00007260: 6b6f 6f6c 3268 746d 6c2e 7079 0a2d 2d2d  kool2html.py.---
-00007270: 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 736b 6f6f  ----------.`skoo
-00007280: 6c32 6874 6d6c 2e70 7960 2063 6f6e 7665  l2html.py` conve
-00007290: 7274 7320 6120 736b 6f6f 6c20 6669 6c65  rts a skool file
-000072a0: 2028 616e 6420 6974 7320 6173 736f 6369   (and its associ
-000072b0: 6174 6564 2072 6566 2066 696c 6573 2c20  ated ref files, 
-000072c0: 6966 2061 6e79 0a65 7869 7374 2920 696e  if any.exist) in
-000072d0: 746f 2061 2062 726f 7773 6162 6c65 2064  to a browsable d
-000072e0: 6973 6173 7365 6d62 6c79 2069 6e20 4854  isassembly in HT
-000072f0: 4d4c 2066 6f72 6d61 742e 0a0a 466f 7220  ML format...For 
-00007300: 6578 616d 706c 653a 3a0a 0a20 2024 2073  example::..  $ s
-00007310: 6b6f 6f6c 3268 746d 6c2e 7079 2067 616d  kool2html.py gam
-00007320: 652e 736b 6f6f 6c0a 0a77 696c 6c20 636f  e.skool..will co
-00007330: 6e76 6572 7420 7468 6520 6669 6c65 2060  nvert the file `
-00007340: 6761 6d65 2e73 6b6f 6f6c 6020 696e 746f  game.skool` into
-00007350: 2061 2062 756e 6368 206f 6620 4854 4d4c   a bunch of HTML
-00007360: 2066 696c 6573 2e20 4966 2061 6e79 2066   files. If any f
-00007370: 696c 6573 0a6e 616d 6564 2060 6761 6d65  iles.named `game
-00007380: 2a2e 7265 6660 2028 652e 672e 2060 6761  *.ref` (e.g. `ga
-00007390: 6d65 2e72 6566 602c 2060 6761 6d65 2d62  me.ref`, `game-b
-000073a0: 7567 732e 7265 6660 2c20 6067 616d 652d  ugs.ref`, `game-
-000073b0: 706f 6b65 732e 7265 6660 2061 6e64 2073  pokes.ref` and s
-000073c0: 6f0a 6f6e 2920 616c 736f 2065 7869 7374  o.on) also exist
-000073d0: 2069 6e20 7468 6520 7361 6d65 2064 6972   in the same dir
-000073e0: 6563 746f 7279 2061 7320 6067 616d 652e  ectory as `game.
-000073f0: 736b 6f6f 6c60 2c20 7468 6579 2077 696c  skool`, they wil
-00007400: 6c20 6265 2075 7365 6420 746f 0a70 726f  l be used to.pro
-00007410: 7669 6465 2066 7572 7468 6572 2069 6e66  vide further inf
-00007420: 6f72 6d61 7469 6f6e 2074 6f20 7468 6520  ormation to the 
-00007430: 636f 6e76 6572 7369 6f6e 2070 726f 6365  conversion proce
-00007440: 7373 2c20 616c 6f6e 6720 7769 7468 2061  ss, along with a
-00007450: 6e79 2065 7874 7261 0a66 696c 6573 206e  ny extra.files n
-00007460: 616d 6564 2069 6e20 7468 6520 6060 5265  amed in the ``Re
-00007470: 6646 696c 6573 6060 2070 6172 616d 6574  fFiles`` paramet
-00007480: 6572 2069 6e20 7468 6520 3a72 6566 3a60  er in the :ref:`
-00007490: 7265 662d 436f 6e66 6967 6020 7365 6374  ref-Config` sect
-000074a0: 696f 6e2c 2061 6e64 0a61 6e79 206f 7468  ion, and.any oth
-000074b0: 6572 2072 6566 2066 696c 6573 206e 616d  er ref files nam
-000074c0: 6564 206f 6e20 7468 6520 636f 6d6d 616e  ed on the comman
-000074d0: 6420 6c69 6e65 2e0a 0a60 736b 6f6f 6c32  d line...`skool2
-000074e0: 6874 6d6c 2e70 7960 2073 7570 706f 7274  html.py` support
-000074f0: 7320 7365 7665 7261 6c20 6f70 7469 6f6e  s several option
-00007500: 733b 2072 756e 2069 7420 7769 7468 206e  s; run it with n
-00007510: 6f20 6172 6775 6d65 6e74 7320 746f 2073  o arguments to s
-00007520: 6565 2061 0a6c 6973 743a 3a0a 0a20 2075  ee a.list::..  u
-00007530: 7361 6765 3a20 736b 6f6f 6c32 6874 6d6c  sage: skool2html
-00007540: 2e70 7920 5b6f 7074 696f 6e73 5d20 534b  .py [options] SK
-00007550: 4f4f 4c46 494c 4520 5b52 4546 4649 4c45  OOLFILE [REFFILE
-00007560: 2e2e 2e5d 0a0a 2020 436f 6e76 6572 7420  ...]..  Convert 
-00007570: 6120 736b 6f6f 6c20 6669 6c65 2061 6e64  a skool file and
-00007580: 2072 6566 2066 696c 6573 2074 6f20 4854   ref files to HT
-00007590: 4d4c 2e20 534b 4f4f 4c46 494c 4520 6d61  ML. SKOOLFILE ma
-000075a0: 7920 6265 2061 2072 6567 756c 6172 2066  y be a regular f
-000075b0: 696c 652c 206f 720a 2020 272d 2720 666f  ile, or.  '-' fo
-000075c0: 7220 7374 616e 6461 7264 2069 6e70 7574  r standard input
-000075d0: 2e0a 0a20 204f 7074 696f 6e73 3a0a 2020  ...  Options:.  
-000075e0: 2020 2d31 2c20 2d2d 6173 6d2d 6f6e 652d    -1, --asm-one-
-000075f0: 7061 6765 2020 2020 5772 6974 6520 616c  page    Write al
-00007600: 6c20 726f 7574 696e 6573 2061 6e64 2064  l routines and d
-00007610: 6174 6120 626c 6f63 6b73 2074 6f20 6120  ata blocks to a 
-00007620: 7369 6e67 6c65 2070 6167 652e 0a20 2020  single page..   
-00007630: 202d 612c 202d 2d61 736d 2d6c 6162 656c   -a, --asm-label
-00007640: 7320 2020 2020 2055 7365 2041 534d 206c  s      Use ASM l
-00007650: 6162 656c 732e 0a20 2020 202d 6320 532f  abels..    -c S/
-00007660: 4c2c 202d 2d63 6f6e 6669 6720 532f 4c20  L, --config S/L 
-00007670: 2041 6464 2074 6865 206c 696e 6520 274c   Add the line 'L
-00007680: 2720 746f 2074 6865 2072 6566 2066 696c  ' to the ref fil
-00007690: 6520 7365 6374 696f 6e20 2753 272e 2054  e section 'S'. T
-000076a0: 6869 730a 2020 2020 2020 2020 2020 2020  his.            
-000076b0: 2020 2020 2020 2020 2020 2020 2020 6f70                op
-000076c0: 7469 6f6e 206d 6179 2062 6520 7573 6564  tion may be used
-000076d0: 206d 756c 7469 706c 6520 7469 6d65 732e   multiple times.
-000076e0: 0a20 2020 202d 432c 202d 2d63 7265 6174  .    -C, --creat
-000076f0: 652d 6c61 6265 6c73 2020 2043 7265 6174  e-labels   Creat
-00007700: 6520 6465 6661 756c 7420 6c61 6265 6c73  e default labels
-00007710: 2066 6f72 2075 6e6c 6162 656c 6c65 6420   for unlabelled 
-00007720: 696e 7374 7275 6374 696f 6e73 2e0a 2020  instructions..  
-00007730: 2020 2d64 2044 4952 2c20 2d2d 6f75 7470    -d DIR, --outp
-00007740: 7574 2d64 6972 2044 4952 0a20 2020 2020  ut-dir DIR.     
-00007750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007760: 2020 2020 2057 7269 7465 2066 696c 6573       Write files
-00007770: 2069 6e20 7468 6973 2064 6972 6563 746f   in this directo
-00007780: 7279 2028 6465 6661 756c 7420 6973 2027  ry (default is '
-00007790: 2e27 292e 0a20 2020 202d 442c 202d 2d64  .')..    -D, --d
-000077a0: 6563 696d 616c 2020 2020 2020 2020 2057  ecimal         W
-000077b0: 7269 7465 2074 6865 2064 6973 6173 7365  rite the disasse
-000077c0: 6d62 6c79 2069 6e20 6465 6369 6d61 6c2e  mbly in decimal.
-000077d0: 0a20 2020 202d 482c 202d 2d68 6578 2020  .    -H, --hex  
-000077e0: 2020 2020 2020 2020 2020 2057 7269 7465             Write
-000077f0: 2074 6865 2064 6973 6173 7365 6d62 6c79   the disassembly
-00007800: 2069 6e20 6865 7861 6465 6369 6d61 6c2e   in hexadecimal.
-00007810: 0a20 2020 202d 4920 703d 762c 202d 2d69  .    -I p=v, --i
-00007820: 6e69 2070 3d76 2020 2020 2053 6574 2074  ni p=v     Set t
-00007830: 6865 2076 616c 7565 206f 6620 7468 6520  he value of the 
-00007840: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
-00007850: 7261 6d65 7465 7220 2770 2720 746f 0a20  rameter 'p' to. 
-00007860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007870: 2020 2020 2020 2020 2027 7627 2e20 5468           'v'. Th
-00007880: 6973 206f 7074 696f 6e20 6d61 7920 6265  is option may be
-00007890: 2075 7365 6420 6d75 6c74 6970 6c65 2074   used multiple t
-000078a0: 696d 6573 2e0a 2020 2020 2d6a 204e 414d  imes..    -j NAM
-000078b0: 452c 202d 2d6a 6f69 6e2d 6373 7320 4e41  E, --join-css NA
-000078c0: 4d45 0a20 2020 2020 2020 2020 2020 2020  ME.             
-000078d0: 2020 2020 2020 2020 2020 2020 2043 6f6e               Con
-000078e0: 6361 7465 6e61 7465 2043 5353 2066 696c  catenate CSS fil
-000078f0: 6573 2069 6e74 6f20 6120 7369 6e67 6c65  es into a single
-00007900: 2066 696c 6520 7769 7468 2074 6869 7320   file with this 
-00007910: 6e61 6d65 2e0a 2020 2020 2d6c 2c20 2d2d  name..    -l, --
-00007920: 6c6f 7765 7220 2020 2020 2020 2020 2020  lower           
-00007930: 5772 6974 6520 7468 6520 6469 7361 7373  Write the disass
-00007940: 656d 626c 7920 696e 206c 6f77 6572 2063  embly in lower c
-00007950: 6173 652e 0a20 2020 202d 6f2c 202d 2d72  ase..    -o, --r
-00007960: 6562 7569 6c64 2d69 6d61 6765 7320 204f  ebuild-images  O
-00007970: 7665 7277 7269 7465 2065 7869 7374 696e  verwrite existin
-00007980: 6720 696d 6167 6520 6669 6c65 732e 0a20  g image files.. 
-00007990: 2020 202d 4f2c 202d 2d72 6562 7569 6c64     -O, --rebuild
-000079a0: 2d61 7564 696f 2020 204f 7665 7277 7269  -audio   Overwri
-000079b0: 7465 2065 7869 7374 696e 6720 6175 6469  te existing audi
-000079c0: 6f20 6669 6c65 732e 0a20 2020 202d 702c  o files..    -p,
-000079d0: 202d 2d70 6163 6b61 6765 2d64 6972 2020   --package-dir  
-000079e0: 2020 2053 686f 7720 7061 7468 2074 6f20     Show path to 
-000079f0: 736b 6f6f 6c6b 6974 2070 6163 6b61 6765  skoolkit package
-00007a00: 2064 6972 6563 746f 7279 2061 6e64 2065   directory and e
-00007a10: 7869 742e 0a20 2020 202d 5020 5041 4745  xit..    -P PAGE
-00007a20: 532c 202d 2d70 6167 6573 2050 4147 4553  S, --pages PAGES
-00007a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007a40: 2020 2020 2020 2020 2020 2057 7269 7465             Write
-00007a50: 206f 6e6c 7920 7468 6573 6520 7061 6765   only these page
-00007a60: 7320 2877 6865 6e20 7573 696e 6720 272d  s (when using '-
-00007a70: 2d77 7269 7465 2050 2729 2e0a 2020 2020  -write P')..    
-00007a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a90: 2020 2020 2020 5041 4745 5320 6973 2061        PAGES is a
-00007aa0: 2063 6f6d 6d61 2d73 6570 6172 6174 6564   comma-separated
-00007ab0: 206c 6973 7420 6f66 2070 6167 6520 4944   list of page ID
-00007ac0: 732e 0a20 2020 202d 712c 202d 2d71 7569  s..    -q, --qui
-00007ad0: 6574 2020 2020 2020 2020 2020 2042 6520  et           Be 
-00007ae0: 7175 6965 742e 0a20 2020 202d 7220 5052  quiet..    -r PR
-00007af0: 4546 4958 2c20 2d2d 7265 662d 7365 6374  EFIX, --ref-sect
-00007b00: 696f 6e73 2050 5245 4649 580a 2020 2020  ions PREFIX.    
-00007b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b20: 2020 2020 2020 5368 6f77 2064 6566 6175        Show defau
-00007b30: 6c74 2072 6566 2066 696c 6520 7365 6374  lt ref file sect
-00007b40: 696f 6e73 2077 686f 7365 206e 616d 6573  ions whose names
-00007b50: 2073 7461 7274 2077 6974 680a 2020 2020   start with.    
-00007b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b70: 2020 2020 2020 5052 4546 4958 2061 6e64        PREFIX and
-00007b80: 2065 7869 742e 0a20 2020 202d 522c 202d   exit..    -R, -
-00007b90: 2d72 6566 2d66 696c 6520 2020 2020 2020  -ref-file       
-00007ba0: 2053 686f 7720 7468 6520 656e 7469 7265   Show the entire
-00007bb0: 2064 6566 6175 6c74 2072 6566 2066 696c   default ref fil
-00007bc0: 6520 616e 6420 6578 6974 2e0a 2020 2020  e and exit..    
-00007bd0: 2d73 2c20 2d2d 7365 6172 6368 2d64 6972  -s, --search-dir
-00007be0: 7320 2020 2020 5368 6f77 2074 6865 206c  s     Show the l
-00007bf0: 6f63 6174 696f 6e73 2073 6b6f 6f6c 3268  ocations skool2h
-00007c00: 746d 6c2e 7079 2073 6561 7263 6865 7320  tml.py searches 
-00007c10: 666f 7220 7265 736f 7572 6365 732e 0a20  for resources.. 
-00007c20: 2020 202d 5320 4449 522c 202d 2d73 6561     -S DIR, --sea
-00007c30: 7263 6820 4449 5220 2041 6464 2074 6869  rch DIR  Add thi
-00007c40: 7320 6469 7265 6374 6f72 7920 746f 2074  s directory to t
-00007c50: 6865 2072 6573 6f75 7263 6520 7365 6172  he resource sear
-00007c60: 6368 2070 6174 682e 2054 6869 730a 2020  ch path. This.  
-00007c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c80: 2020 2020 2020 2020 6f70 7469 6f6e 206d          option m
-00007c90: 6179 2062 6520 7573 6564 206d 756c 7469  ay be used multi
-00007ca0: 706c 6520 7469 6d65 732e 0a20 2020 202d  ple times..    -
-00007cb0: 2d73 686f 772d 636f 6e66 6967 2020 2020  -show-config    
-00007cc0: 2020 2020 2053 686f 7720 636f 6e66 6967       Show config
-00007cd0: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
-00007ce0: 7220 7661 6c75 6573 2e0a 2020 2020 2d74  r values..    -t
-00007cf0: 2c20 2d2d 7469 6d65 2020 2020 2020 2020  , --time        
-00007d00: 2020 2020 5368 6f77 2074 696d 696e 6773      Show timings
-00007d10: 2e0a 2020 2020 2d54 2054 4845 4d45 2c20  ..    -T THEME, 
-00007d20: 2d2d 7468 656d 6520 5448 454d 450a 2020  --theme THEME.  
-00007d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d40: 2020 2020 2020 2020 5573 6520 7468 6973          Use this
-00007d50: 2043 5353 2074 6865 6d65 2e20 5468 6973   CSS theme. This
-00007d60: 206f 7074 696f 6e20 6d61 7920 6265 2075   option may be u
-00007d70: 7365 6420 6d75 6c74 6970 6c65 0a20 2020  sed multiple.   
-00007d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d90: 2020 2020 2020 2074 696d 6573 2e0a 2020         times..  
-00007da0: 2020 2d75 2c20 2d2d 7570 7065 7220 2020    -u, --upper   
-00007db0: 2020 2020 2020 2020 5772 6974 6520 7468          Write th
-00007dc0: 6520 6469 7361 7373 656d 626c 7920 696e  e disassembly in
-00007dd0: 2075 7070 6572 2063 6173 652e 0a20 2020   upper case..   
-00007de0: 202d 2d76 6172 206e 616d 653d 7661 6c75   --var name=valu
-00007df0: 6520 2020 2020 2044 6566 696e 6520 6120  e      Define a 
-00007e00: 7661 7269 6162 6c65 2074 6861 7420 6361  variable that ca
-00007e10: 6e20 6265 2075 7365 6420 6279 2040 6966  n be used by @if
-00007e20: 2061 6e64 2074 6865 2053 4d50 4c0a 2020   and the SMPL.  
-00007e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e40: 2020 2020 2020 2020 6d61 6372 6f73 2e20          macros. 
-00007e50: 5468 6973 206f 7074 696f 6e20 6d61 7920  This option may 
-00007e60: 6265 2075 7365 6420 6d75 6c74 6970 6c65  be used multiple
-00007e70: 2074 696d 6573 2e0a 2020 2020 2d56 2c20   times..    -V, 
-00007e80: 2d2d 7665 7273 696f 6e20 2020 2020 2020  --version       
-00007e90: 2020 5368 6f77 2053 6b6f 6f6c 4b69 7420    Show SkoolKit 
-00007ea0: 7665 7273 696f 6e20 6e75 6d62 6572 2061  version number a
-00007eb0: 6e64 2065 7869 742e 0a20 2020 202d 7720  nd exit..    -w 
-00007ec0: 582c 202d 2d77 7269 7465 2058 2020 2020  X, --write X    
-00007ed0: 2020 2057 7269 7465 206f 6e6c 7920 7468     Write only th
-00007ee0: 6573 6520 6669 6c65 732c 2077 6865 7265  ese files, where
-00007ef0: 2058 2069 7320 6f6e 6520 6f72 206d 6f72   X is one or mor
-00007f00: 6520 6f66 3a0a 2020 2020 2020 2020 2020  e of:.          
-00007f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f20: 2020 6420 3d20 4469 7361 7373 656d 626c    d = Disassembl
-00007f30: 7920 6669 6c65 7320 2020 6f20 3d20 4f74  y files   o = Ot
-00007f40: 6865 7220 636f 6465 0a20 2020 2020 2020  her code.       
+00006c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006c70: 7c20 352e 3020 2020 2020 7c20 4e65 7720  | 5.0     | New 
+00006c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006cb0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+00006cc0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+00006cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006ce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006cf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+00006d10: 0a2e 2e20 5f73 6b6f 6f6c 3263 746c 2e70  ... _skool2ctl.p
+00006d20: 793a 0a0a 736b 6f6f 6c32 6374 6c2e 7079  y:..skool2ctl.py
+00006d30: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a 6073  .------------.`s
+00006d40: 6b6f 6f6c 3263 746c 2e70 7960 2063 6f6e  kool2ctl.py` con
+00006d50: 7665 7274 7320 6120 736b 6f6f 6c20 6669  verts a skool fi
+00006d60: 6c65 2069 6e74 6f20 6120 3a72 6566 3a60  le into a :ref:`
+00006d70: 636f 6e74 726f 6c20 6669 6c65 203c 636f  control file <co
+00006d80: 6e74 726f 6c46 696c 6573 3e60 2e0a 466f  ntrolFiles>`..Fo
+00006d90: 7220 6578 616d 706c 653a 3a0a 0a20 2024  r example::..  $
+00006da0: 2073 6b6f 6f6c 3263 746c 2e70 7920 6761   skool2ctl.py ga
+00006db0: 6d65 2e73 6b6f 6f6c 203e 2067 616d 652e  me.skool > game.
+00006dc0: 6374 6c0a 0a49 6e20 6164 6469 7469 6f6e  ctl..In addition
+00006dd0: 2074 6f20 626c 6f63 6b20 7479 7065 7320   to block types 
+00006de0: 616e 6420 6164 6472 6573 7365 732c 2060  and addresses, `
+00006df0: 6761 6d65 2e63 746c 6020 7769 6c6c 2063  game.ctl` will c
+00006e00: 6f6e 7461 696e 2062 6c6f 636b 2074 6974  ontain block tit
+00006e10: 6c65 732c 0a62 6c6f 636b 2064 6573 6372  les,.block descr
+00006e20: 6970 7469 6f6e 732c 2072 6567 6973 7465  iptions, registe
+00006e30: 7273 2c20 6d69 642d 626c 6f63 6b20 636f  rs, mid-block co
+00006e40: 6d6d 656e 7473 2c20 626c 6f63 6b20 7374  mments, block st
+00006e50: 6172 7420 616e 6420 656e 640a 636f 6d6d  art and end.comm
+00006e60: 656e 7473 2c20 7375 622d 626c 6f63 6b20  ents, sub-block 
+00006e70: 7479 7065 7320 616e 6420 6164 6472 6573  types and addres
+00006e80: 7365 732c 2069 6e73 7472 7563 7469 6f6e  ses, instruction
+00006e90: 2d6c 6576 656c 2063 6f6d 6d65 6e74 732c  -level comments,
+00006ea0: 206e 6f6e 2d65 6e74 7279 0a62 6c6f 636b   non-entry.block
+00006eb0: 732c 2061 6e64 2073 6f6d 6520 3a72 6566  s, and some :ref
+00006ec0: 3a60 4153 4d20 6469 7265 6374 6976 6573  :`ASM directives
+00006ed0: 203c 6173 6d44 6972 6563 7469 7665 733e   <asmDirectives>
+00006ee0: 602e 0a0a 546f 206c 6973 7420 7468 6520  `...To list the 
+00006ef0: 6f70 7469 6f6e 7320 7375 7070 6f72 7465  options supporte
+00006f00: 6420 6279 2060 736b 6f6f 6c32 6374 6c2e  d by `skool2ctl.
+00006f10: 7079 602c 2072 756e 2069 7420 7769 7468  py`, run it with
+00006f20: 206e 6f20 6172 6775 6d65 6e74 733a 3a0a   no arguments::.
+00006f30: 0a20 2075 7361 6765 3a20 736b 6f6f 6c32  .  usage: skool2
+00006f40: 6374 6c2e 7079 205b 6f70 7469 6f6e 735d  ctl.py [options]
+00006f50: 2046 494c 450a 0a20 2043 6f6e 7665 7274   FILE..  Convert
+00006f60: 2061 2073 6b6f 6f6c 2066 696c 6520 696e   a skool file in
+00006f70: 746f 2061 2063 6f6e 7472 6f6c 2066 696c  to a control fil
+00006f80: 6520 616e 6420 7772 6974 6520 6974 2074  e and write it t
+00006f90: 6f20 7374 616e 6461 7264 206f 7574 7075  o standard outpu
+00006fa0: 742e 2046 494c 450a 2020 6d61 7920 6265  t. FILE.  may be
+00006fb0: 2061 2072 6567 756c 6172 2066 696c 652c   a regular file,
+00006fc0: 206f 7220 272d 2720 666f 7220 7374 616e   or '-' for stan
+00006fd0: 6461 7264 2069 6e70 7574 2e0a 0a20 204f  dard input...  O
+00006fe0: 7074 696f 6e73 3a0a 2020 2020 2d62 2c20  ptions:.    -b, 
+00006ff0: 2d2d 7072 6573 6572 7665 2d62 6173 6520  --preserve-base 
+00007000: 2020 5072 6573 6572 7665 2074 6865 2062    Preserve the b
+00007010: 6173 6520 6f66 2064 6563 696d 616c 2061  ase of decimal a
+00007020: 6e64 2068 6578 6164 6563 696d 616c 2076  nd hexadecimal v
+00007030: 616c 7565 7320 696e 0a20 2020 2020 2020  alues in.       
+00007040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007050: 2020 2069 6e73 7472 7563 7469 6f6e 206f     instruction o
+00007060: 7065 7261 6e64 7320 616e 6420 4445 4642  perands and DEFB
+00007070: 2f44 4546 4d2f 4445 4653 2f44 4546 5720  /DEFM/DEFS/DEFW 
+00007080: 7374 6174 656d 656e 7473 2e0a 2020 2020  statements..    
+00007090: 2d45 2041 4444 522c 202d 2d65 6e64 2041  -E ADDR, --end A
+000070a0: 4444 5220 2020 5374 6f70 2063 6f6e 7665  DDR   Stop conve
+000070b0: 7274 696e 6720 6174 2074 6869 7320 6164  rting at this ad
+000070c0: 6472 6573 732e 0a20 2020 202d 682c 202d  dress..    -h, -
+000070d0: 2d68 6578 2020 2020 2020 2020 2020 2020  -hex            
+000070e0: 2057 7269 7465 2061 6464 7265 7373 6573   Write addresses
+000070f0: 2069 6e20 7570 7065 7220 6361 7365 2068   in upper case h
+00007100: 6578 6164 6563 696d 616c 2066 6f72 6d61  exadecimal forma
+00007110: 742e 0a20 2020 202d 4920 703d 762c 202d  t..    -I p=v, -
+00007120: 2d69 6e69 2070 3d76 2020 2020 2053 6574  -ini p=v     Set
+00007130: 2074 6865 2076 616c 7565 206f 6620 7468   the value of th
+00007140: 6520 636f 6e66 6967 7572 6174 696f 6e20  e configuration 
+00007150: 7061 7261 6d65 7465 7220 2770 2720 746f  parameter 'p' to
+00007160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007170: 2020 2020 2020 2020 2020 2027 7627 2e20             'v'. 
+00007180: 5468 6973 206f 7074 696f 6e20 6d61 7920  This option may 
+00007190: 6265 2075 7365 6420 6d75 6c74 6970 6c65  be used multiple
+000071a0: 2074 696d 6573 2e0a 2020 2020 2d6b 2c20   times..    -k, 
+000071b0: 2d2d 6b65 6570 2d6c 696e 6573 2020 2020  --keep-lines    
+000071c0: 2020 5072 6573 6572 7665 206c 696e 6520    Preserve line 
+000071d0: 6272 6561 6b73 2069 6e20 636f 6d6d 656e  breaks in commen
+000071e0: 7473 2e0a 2020 2020 2d6c 2c20 2d2d 6865  ts..    -l, --he
+000071f0: 782d 6c6f 7765 7220 2020 2020 2020 5772  x-lower       Wr
+00007200: 6974 6520 6164 6472 6573 7365 7320 696e  ite addresses in
+00007210: 206c 6f77 6572 2063 6173 6520 6865 7861   lower case hexa
+00007220: 6465 6369 6d61 6c20 666f 726d 6174 2e0a  decimal format..
+00007230: 2020 2020 2d2d 7368 6f77 2d63 6f6e 6669      --show-confi
+00007240: 6720 2020 2020 2020 2020 5368 6f77 2063  g         Show c
+00007250: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
+00007260: 616d 6574 6572 2076 616c 7565 732e 0a20  ameter values.. 
+00007270: 2020 202d 5320 4144 4452 2c20 2d2d 7374     -S ADDR, --st
+00007280: 6172 7420 4144 4452 0a20 2020 2020 2020  art ADDR.       
+00007290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000072a0: 2020 2053 7461 7274 2063 6f6e 7665 7274     Start convert
+000072b0: 696e 6720 6174 2074 6869 7320 6164 6472  ing at this addr
+000072c0: 6573 732e 0a20 2020 202d 562c 202d 2d76  ess..    -V, --v
+000072d0: 6572 7369 6f6e 2020 2020 2020 2020 2053  ersion         S
+000072e0: 686f 7720 536b 6f6f 6c4b 6974 2076 6572  how SkoolKit ver
+000072f0: 7369 6f6e 206e 756d 6265 7220 616e 6420  sion number and 
+00007300: 6578 6974 2e0a 2020 2020 2d77 2058 2c20  exit..    -w X, 
+00007310: 2d2d 7772 6974 6520 5820 2020 2020 2020  --write X       
+00007320: 5772 6974 6520 6f6e 6c79 2074 6865 7365  Write only these
+00007330: 2065 6c65 6d65 6e74 732c 2077 6865 7265   elements, where
+00007340: 2058 2069 7320 6f6e 6520 6f72 206d 6f72   X is one or mor
+00007350: 6520 6f66 3a0a 2020 2020 2020 2020 2020  e of:.          
+00007360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007370: 2020 6120 3d20 4153 4d20 6469 7265 6374    a = ASM direct
+00007380: 6976 6573 0a20 2020 2020 2020 2020 2020  ives.           
+00007390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000073a0: 2062 203d 2062 6c6f 636b 2074 7970 6573   b = block types
+000073b0: 2061 6e64 2061 6464 7265 7373 6573 0a20   and addresses. 
+000073c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000073d0: 2020 2020 2020 2020 2020 2074 203d 2062             t = b
+000073e0: 6c6f 636b 2074 6974 6c65 730a 2020 2020  lock titles.    
+000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007400: 2020 2020 2020 2020 6420 3d20 626c 6f63          d = bloc
+00007410: 6b20 6465 7363 7269 7074 696f 6e73 0a20  k descriptions. 
+00007420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007430: 2020 2020 2020 2020 2020 2072 203d 2072             r = r
+00007440: 6567 6973 7465 7273 0a20 2020 2020 2020  egisters.       
+00007450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007460: 2020 2020 206d 203d 206d 6964 2d62 6c6f       m = mid-blo
+00007470: 636b 2063 6f6d 6d65 6e74 7320 616e 6420  ck comments and 
+00007480: 626c 6f63 6b20 7374 6172 742f 656e 6420  block start/end 
+00007490: 636f 6d6d 656e 7473 0a20 2020 2020 2020  comments.       
+000074a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074b0: 2020 2020 2073 203d 2073 7562 2d62 6c6f       s = sub-blo
+000074c0: 636b 2074 7970 6573 2061 6e64 2061 6464  ck types and add
+000074d0: 7265 7373 6573 0a20 2020 2020 2020 2020  resses.         
+000074e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074f0: 2020 2063 203d 2069 6e73 7472 7563 7469     c = instructi
+00007500: 6f6e 2d6c 6576 656c 2063 6f6d 6d65 6e74  on-level comment
+00007510: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00007520: 2020 2020 2020 2020 2020 2020 2020 6e20                n 
+00007530: 3d20 6e6f 6e2d 656e 7472 7920 626c 6f63  = non-entry bloc
+00007540: 6b73 0a0a 2e2e 205f 736b 6f6f 6c32 6374  ks.... _skool2ct
+00007550: 6c2d 636f 6e66 3a0a 0a43 6f6e 6669 6775  l-conf:..Configu
+00007560: 7261 7469 6f6e 0a5e 5e5e 5e5e 5e5e 5e5e  ration.^^^^^^^^^
+00007570: 5e5e 5e5e 0a60 736b 6f6f 6c32 6374 6c2e  ^^^^.`skool2ctl.
+00007580: 7079 6020 7769 6c6c 2072 6561 6420 636f  py` will read co
+00007590: 6e66 6967 7572 6174 696f 6e20 6672 6f6d  nfiguration from
+000075a0: 2061 2066 696c 6520 6e61 6d65 6420 6073   a file named `s
+000075b0: 6b6f 6f6c 6b69 742e 696e 6960 2069 6e20  koolkit.ini` in 
+000075c0: 7468 650a 6375 7272 656e 7420 776f 726b  the.current work
+000075d0: 696e 6720 6469 7265 6374 6f72 7920 6f72  ing directory or
+000075e0: 2069 6e20 607e 2f2e 736b 6f6f 6c6b 6974   in `~/.skoolkit
+000075f0: 602c 2069 6620 7072 6573 656e 742e 2054  `, if present. T
+00007600: 6865 2072 6563 6f67 6e69 7365 640a 636f  he recognised.co
+00007610: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
+00007620: 6d65 7465 7273 2061 7265 3a0a 0a2a 2060  meters are:..* `
+00007630: 6048 6578 6060 202d 2077 7269 7465 2061  `Hex`` - write a
+00007640: 6464 7265 7373 6573 2069 6e20 6465 6369  ddresses in deci
+00007650: 6d61 6c20 2860 6030 6060 2c20 7468 6520  mal (``0``, the 
+00007660: 6465 6661 756c 7429 2c20 6c6f 7765 7220  default), lower 
+00007670: 6361 7365 0a20 2068 6578 6164 6563 696d  case.  hexadecim
+00007680: 616c 2028 6060 3160 6029 2c20 206f 7220  al (``1``),  or 
+00007690: 7570 7065 7220 6361 7365 2068 6578 6164  upper case hexad
+000076a0: 6563 696d 616c 2028 6060 3260 6029 0a2a  ecimal (``2``).*
+000076b0: 2060 604b 6565 704c 696e 6573 6060 202d   ``KeepLines`` -
+000076c0: 2070 7265 7365 7276 6520 6c69 6e65 2062   preserve line b
+000076d0: 7265 616b 7320 696e 2063 6f6d 6d65 6e74  reaks in comment
+000076e0: 7320 2860 6031 6060 292c 206f 7220 646f  s (``1``), or do
+000076f0: 6e27 7420 2860 6030 6060 2c0a 2020 7468  n't (``0``,.  th
+00007700: 6520 6465 6661 756c 7429 0a2a 2060 6050  e default).* ``P
+00007710: 7265 7365 7276 6542 6173 6560 6020 2d20  reserveBase`` - 
+00007720: 7072 6573 6572 7665 2074 6865 2062 6173  preserve the bas
+00007730: 6520 6f66 2064 6563 696d 616c 2061 6e64  e of decimal and
+00007740: 2068 6578 6164 6563 696d 616c 2076 616c   hexadecimal val
+00007750: 7565 7320 696e 0a20 2069 6e73 7472 7563  ues in.  instruc
+00007760: 7469 6f6e 206f 7065 7261 6e64 7320 616e  tion operands an
+00007770: 6420 4445 4642 2f44 4546 4d2f 4445 4653  d DEFB/DEFM/DEFS
+00007780: 2f44 4546 5720 7374 6174 656d 656e 7473  /DEFW statements
+00007790: 2028 6060 3160 6029 2c20 6f72 2064 6f6e   (``1``), or don
+000077a0: 2774 0a20 2028 6060 3060 602c 2074 6865  't.  (``0``, the
+000077b0: 2064 6566 6175 6c74 290a 0a43 6f6e 6669   default)..Confi
+000077c0: 6775 7261 7469 6f6e 2070 6172 616d 6574  guration paramet
+000077d0: 6572 7320 6d75 7374 2061 7070 6561 7220  ers must appear 
+000077e0: 696e 2061 2060 605b 736b 6f6f 6c32 6374  in a ``[skool2ct
+000077f0: 6c5d 6060 2073 6563 7469 6f6e 2e20 466f  l]`` section. Fo
+00007800: 720a 6578 616d 706c 652c 2074 6f20 6d61  r.example, to ma
+00007810: 6b65 2060 736b 6f6f 6c32 6374 6c2e 7079  ke `skool2ctl.py
+00007820: 6020 7772 6974 6520 7570 7065 7220 6361  ` write upper ca
+00007830: 7365 2068 6578 6164 6563 696d 616c 2061  se hexadecimal a
+00007840: 6464 7265 7373 6573 2062 790a 6465 6661  ddresses by.defa
+00007850: 756c 7420 2877 6974 686f 7574 2068 6176  ult (without hav
+00007860: 696e 6720 746f 2075 7365 2074 6865 2060  ing to use the `
+00007870: 602d 6860 6020 6f70 7469 6f6e 206f 6e20  `-h`` option on 
+00007880: 7468 6520 636f 6d6d 616e 6420 6c69 6e65  the command line
+00007890: 292c 2061 6464 2074 6865 0a66 6f6c 6c6f  ), add the.follo
+000078a0: 7769 6e67 2073 6563 7469 6f6e 2074 6f20  wing section to 
+000078b0: 6073 6b6f 6f6c 6b69 742e 696e 6960 3a3a  `skoolkit.ini`::
+000078c0: 0a0a 2020 5b73 6b6f 6f6c 3263 746c 5d0a  ..  [skool2ctl].
+000078d0: 2020 4865 783d 320a 0a43 6f6e 6669 6775    Hex=2..Configu
+000078e0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+000078f0: 7320 6d61 7920 616c 736f 2062 6520 7365  s may also be se
+00007900: 7420 6f6e 2074 6865 2063 6f6d 6d61 6e64  t on the command
+00007910: 206c 696e 6520 6279 2075 7369 6e67 2074   line by using t
+00007920: 6865 0a60 602d 2d69 6e69 6060 206f 7074  he.``--ini`` opt
+00007930: 696f 6e2e 2050 6172 616d 6574 6572 2076  ion. Parameter v
+00007940: 616c 7565 7320 7365 7420 7468 6973 2077  alues set this w
+00007950: 6179 2077 696c 6c20 6f76 6572 7269 6465  ay will override
+00007960: 2061 6e79 2066 6f75 6e64 2069 6e0a 6073   any found in.`s
+00007970: 6b6f 6f6c 6b69 742e 696e 6960 2e0a 0a2b  koolkit.ini`...+
+00007980: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000079a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000079b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000079c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000079d0: 2056 6572 7369 6f6e 207c 2043 6861 6e67   Version | Chang
+000079e0: 6573 2020 2020 2020 2020 2020 2020 2020  es              
+000079f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007a10: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00007a20: 3d3d 3d3d 3d3d 3d3d 3d2b 3d3d 3d3d 3d3d  =========+======
+00007a30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007a40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007a50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00007a60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d2b 0a7c  =============+.|
+00007a70: 2037 2e32 2020 2020 207c 2043 6f6e 6669   7.2     | Confi
+00007a80: 6775 7261 7469 6f6e 2069 7320 7265 6164  guration is read
+00007a90: 2066 726f 6d20 6073 6b6f 6f6c 6b69 742e   from `skoolkit.
+00007aa0: 696e 6960 2069 6620 7072 6573 656e 743b  ini` if present;
+00007ab0: 2061 6464 6564 2074 6865 2020 207c 0a7c   added the   |.|
+00007ac0: 2020 2020 2020 2020 207c 2060 602d 2d69           | ``--i
+00007ad0: 6e69 6060 2c20 6060 2d2d 7368 6f77 2d63  ni``, ``--show-c
+00007ae0: 6f6e 6669 6760 6020 616e 6420 6060 2d2d  onfig`` and ``--
+00007af0: 6b65 6570 2d6c 696e 6573 6060 206f 7074  keep-lines`` opt
+00007b00: 696f 6e73 2020 2020 2020 2020 207c 0a2b  ions         |.+
+00007b10: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007b60: 2037 2e30 2020 2020 207c 2041 6464 6564   7.0     | Added
+00007b70: 2073 7570 706f 7274 2066 6f72 2074 6865   support for the
+00007b80: 2027 6e27 2069 6465 6e74 6966 6965 7220   'n' identifier 
+00007b90: 696e 2074 6865 2060 602d 2d77 7269 7465  in the ``--write
+00007ba0: 6060 206f 7074 696f 6e20 2020 207c 0a2b  `` option    |.+
+00007bb0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007c00: 2036 2e32 2020 2020 207c 2054 6865 2060   6.2     | The `
+00007c10: 602d 2d65 6e64 6060 2061 6e64 2060 602d  `--end`` and ``-
+00007c20: 2d73 7461 7274 6060 206f 7074 696f 6e73  -start`` options
+00007c30: 2061 6363 6570 7420 6120 6865 7861 6465   accept a hexade
+00007c40: 6369 6d61 6c20 2020 2020 2020 207c 0a7c  cimal        |.|
+00007c50: 2020 2020 2020 2020 207c 2069 6e74 6567           | integ
+00007c60: 6572 2070 7265 6669 7865 6420 6279 2027  er prefixed by '
+00007c70: 3078 2720 2020 2020 2020 2020 2020 2020  0x'             
+00007c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c90: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00007ca0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007ce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007cf0: 2036 2e30 2020 2020 207c 2041 6464 6564   6.0     | Added
+00007d00: 2073 7570 706f 7274 2066 6f72 2074 6865   support for the
+00007d10: 2027 6127 2069 6465 6e74 6966 6965 7220   'a' identifier 
+00007d20: 696e 2074 6865 2060 602d 2d77 7269 7465  in the ``--write
+00007d30: 6060 206f 7074 696f 6e20 2020 207c 0a2b  `` option    |.+
+00007d40: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007d90: 2035 2e31 2020 2020 207c 2041 2074 6572   5.1     | A ter
+00007da0: 6d69 6e61 6c20 6060 6960 6020 6469 7265  minal ``i`` dire
+00007db0: 6374 6976 6520 6973 2061 7070 656e 6465  ctive is appende
+00007dc0: 6420 6966 2074 6865 2073 6b6f 6f6c 2066  d if the skool f
+00007dd0: 696c 6520 656e 6473 2020 2020 207c 0a7c  ile ends     |.|
+00007de0: 2020 2020 2020 2020 207c 2062 6566 6f72           | befor
+00007df0: 6520 3635 3533 3620 2020 2020 2020 2020  e 65536         
+00007e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e20: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00007e30: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007e80: 2034 2e35 2020 2020 207c 2041 6464 6564   4.5     | Added
+00007e90: 2074 6865 2060 602d 2d73 7461 7274 6060   the ``--start``
+00007ea0: 2061 6e64 2060 602d 2d65 6e64 6060 206f   and ``--end`` o
+00007eb0: 7074 696f 6e73 2020 2020 2020 2020 2020  ptions          
+00007ec0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00007ed0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007f20: 2034 2e34 2020 2020 207c 2041 6464 6564   4.4     | Added
+00007f30: 2074 6865 2060 602d 2d68 6578 2d6c 6f77   the ``--hex-low
+00007f40: 6572 6060 206f 7074 696f 6e20 2020 2020  er`` option     
 00007f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f60: 2020 2020 2069 203d 2044 6973 6173 7365       i = Disasse
-00007f70: 6d62 6c79 2069 6e64 6578 2020 2050 203d  mbly index   P =
-00007f80: 204f 7468 6572 2070 6167 6573 0a20 2020   Other pages.   
-00007f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007fa0: 2020 2020 2020 2020 206d 203d 204d 656d           m = Mem
-00007fb0: 6f72 7920 6d61 7073 0a20 2020 202d 5720  ory maps.    -W 
-00007fc0: 434c 4153 532c 202d 2d77 7269 7465 7220  CLASS, --writer 
-00007fd0: 434c 4153 530a 2020 2020 2020 2020 2020  CLASS.          
-00007fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ff0: 5370 6563 6966 7920 7468 6520 4854 4d4c  Specify the HTML
-00008000: 2077 7269 7465 7220 636c 6173 7320 746f   writer class to
-00008010: 2075 7365 3b20 7368 6f72 7468 616e 6420   use; shorthand 
-00008020: 666f 720a 2020 2020 2020 2020 2020 2020  for.            
-00008030: 2020 2020 2020 2020 2020 2020 2020 272d                '-
-00008040: 2d63 6f6e 6669 6720 436f 6e66 6967 2f48  -config Config/H
-00008050: 746d 6c57 7269 7465 7243 6c61 7373 3d43  tmlWriterClass=C
-00008060: 4c41 5353 272e 0a0a 6073 6b6f 6f6c 3268  LASS'...`skool2h
-00008070: 746d 6c2e 7079 6020 7365 6172 6368 6573  tml.py` searches
-00008080: 2074 6865 2066 6f6c 6c6f 7769 6e67 2064   the following d
-00008090: 6972 6563 746f 7269 6573 2066 6f72 2043  irectories for C
-000080a0: 5353 2066 696c 6573 2c20 4a61 7661 5363  SS files, JavaSc
-000080b0: 7269 7074 0a66 696c 6573 2c20 666f 6e74  ript.files, font
-000080c0: 2066 696c 6573 2c20 616e 6420 6669 6c65   files, and file
-000080d0: 7320 6c69 7374 6564 2069 6e20 7468 6520  s listed in the 
-000080e0: 3a72 6566 3a60 7265 736f 7572 6365 7360  :ref:`resources`
-000080f0: 2073 6563 7469 6f6e 206f 6620 7468 6520   section of the 
-00008100: 7265 660a 6669 6c65 3a0a 0a2a 2054 6865  ref.file:..* The
-00008110: 2064 6972 6563 746f 7279 2074 6861 7420   directory that 
-00008120: 636f 6e74 6169 6e73 2074 6865 2073 6b6f  contains the sko
-00008130: 6f6c 2066 696c 6520 6e61 6d65 6420 6f6e  ol file named on
-00008140: 2074 6865 2063 6f6d 6d61 6e64 206c 696e   the command lin
-00008150: 650a 2a20 5468 6520 6375 7272 656e 7420  e.* The current 
-00008160: 776f 726b 696e 6720 6469 7265 6374 6f72  working director
-00008170: 790a 2a20 602e 2f72 6573 6f75 7263 6573  y.* `./resources
-00008180: 600a 2a20 607e 2f2e 736b 6f6f 6c6b 6974  `.* `~/.skoolkit
-00008190: 600a 2a20 6024 5041 434b 4147 455f 4449  `.* `$PACKAGE_DI
-000081a0: 522f 7265 736f 7572 6365 7360 0a2a 2041  R/resources`.* A
-000081b0: 6e79 206f 7468 6572 2064 6972 6563 746f  ny other directo
-000081c0: 7269 6573 2073 7065 6369 6669 6564 2062  ries specified b
-000081d0: 7920 7468 6520 6060 2d53 6060 2f60 602d  y the ``-S``/``-
-000081e0: 2d73 6561 7263 6860 6020 6f70 7469 6f6e  -search`` option
-000081f0: 0a0a 7768 6572 6520 6024 5041 434b 4147  ..where `$PACKAG
-00008200: 455f 4449 5260 2069 7320 7468 6520 6469  E_DIR` is the di
-00008210: 7265 6374 6f72 7920 696e 2077 6869 6368  rectory in which
-00008220: 2074 6865 2060 736b 6f6f 6c6b 6974 6020   the `skoolkit` 
-00008230: 7061 636b 6167 6520 6973 0a69 6e73 7461  package is.insta
-00008240: 6c6c 6564 2028 6173 2073 686f 776e 2062  lled (as shown b
-00008250: 7920 6060 736b 6f6f 6c32 6874 6d6c 2e70  y ``skool2html.p
-00008260: 7920 2d70 6060 292e 2057 6865 6e20 796f  y -p``). When yo
-00008270: 7520 6e65 6564 2061 2072 656d 696e 6465  u need a reminde
-00008280: 7220 6f66 2074 6865 7365 0a6c 6f63 6174  r of these.locat
-00008290: 696f 6e73 2c20 7275 6e20 6060 736b 6f6f  ions, run ``skoo
-000082a0: 6c32 6874 6d6c 2e70 7920 2d73 6060 2e0a  l2html.py -s``..
-000082b0: 0a54 6865 2060 602d 5460 6020 6f70 7469  .The ``-T`` opti
-000082c0: 6f6e 2073 6574 7320 7468 6520 4353 5320  on sets the CSS 
-000082d0: 7468 656d 652e 2046 6f72 2065 7861 6d70  theme. For examp
-000082e0: 6c65 2c20 6966 2060 6761 6d65 2e72 6566  le, if `game.ref
-000082f0: 6020 7370 6563 6966 6965 7320 7468 650a  ` specifies the.
-00008300: 4353 5320 6669 6c65 7320 746f 2075 7365  CSS files to use
-00008310: 2074 6875 733a 3a0a 0a20 205b 4761 6d65   thus::..  [Game
-00008320: 5d0a 2020 5374 796c 6553 6865 6574 3d73  ].  StyleSheet=s
-00008330: 6b6f 6f6c 6b69 742e 6373 733b 6761 6d65  koolkit.css;game
-00008340: 2e63 7373 0a0a 7468 656e 3a3a 0a0a 2020  .css..then::..  
-00008350: 2420 736b 6f6f 6c32 6874 6d6c 2e70 7920  $ skool2html.py 
-00008360: 2d54 2064 6172 6b20 2d54 2077 6964 6520  -T dark -T wide 
-00008370: 6761 6d65 2e73 6b6f 6f6c 0a0a 7769 6c6c  game.skool..will
-00008380: 2075 7365 2074 6865 2066 6f6c 6c6f 7769   use the followi
-00008390: 6e67 2043 5353 2066 696c 6573 2c20 6966  ng CSS files, if
-000083a0: 2074 6865 7920 6578 6973 742c 2069 6e20   they exist, in 
-000083b0: 7468 6520 6f72 6465 7220 6c69 7374 6564  the order listed
-000083c0: 3a0a 0a2a 2060 736b 6f6f 6c6b 6974 2e63  :..* `skoolkit.c
-000083d0: 7373 600a 2a20 6073 6b6f 6f6c 6b69 742d  ss`.* `skoolkit-
-000083e0: 6461 726b 2e63 7373 600a 2a20 6073 6b6f  dark.css`.* `sko
-000083f0: 6f6c 6b69 742d 7769 6465 2e63 7373 600a  olkit-wide.css`.
-00008400: 2a20 6067 616d 652e 6373 7360 0a2a 2060  * `game.css`.* `
-00008410: 6761 6d65 2d64 6172 6b2e 6373 7360 0a2a  game-dark.css`.*
-00008420: 2060 6761 6d65 2d77 6964 652e 6373 7360   `game-wide.css`
-00008430: 0a2a 2060 6461 726b 2e63 7373 600a 2a20  .* `dark.css`.* 
-00008440: 6077 6964 652e 6373 7360 0a0a 2e2e 205f  `wide.css`.... _
-00008450: 736b 6f6f 6c32 6874 6d6c 2d63 6f6e 663a  skool2html-conf:
-00008460: 0a0a 436f 6e66 6967 7572 6174 696f 6e0a  ..Configuration.
-00008470: 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 6073  ^^^^^^^^^^^^^.`s
-00008480: 6b6f 6f6c 3268 746d 6c2e 7079 6020 7769  kool2html.py` wi
-00008490: 6c6c 2072 6561 6420 636f 6e66 6967 7572  ll read configur
-000084a0: 6174 696f 6e20 6672 6f6d 2061 2066 696c  ation from a fil
-000084b0: 6520 6e61 6d65 6420 6073 6b6f 6f6c 6b69  e named `skoolki
-000084c0: 742e 696e 6960 2069 6e20 7468 650a 6375  t.ini` in the.cu
-000084d0: 7272 656e 7420 776f 726b 696e 6720 6469  rrent working di
-000084e0: 7265 6374 6f72 7920 6f72 2069 6e20 607e  rectory or in `~
-000084f0: 2f2e 736b 6f6f 6c6b 6974 602c 2069 6620  /.skoolkit`, if 
-00008500: 7072 6573 656e 742e 2054 6865 2072 6563  present. The rec
-00008510: 6f67 6e69 7365 640a 636f 6e66 6967 7572  ognised.configur
-00008520: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
-00008530: 2061 7265 3a0a 0a2a 2060 6041 736d 4c61   are:..* ``AsmLa
-00008540: 6265 6c73 6060 202d 2075 7365 2041 534d  bels`` - use ASM
-00008550: 206c 6162 656c 7320 2860 6031 6060 292c   labels (``1``),
-00008560: 206f 7220 646f 6e27 7420 2860 6030 6060   or don't (``0``
-00008570: 2c20 7468 6520 6465 6661 756c 7429 0a2a  , the default).*
-00008580: 2060 6041 736d 4f6e 6550 6167 6560 6020   ``AsmOnePage`` 
-00008590: 2d20 7772 6974 6520 616c 6c20 726f 7574  - write all rout
-000085a0: 696e 6573 2061 6e64 2064 6174 6120 626c  ines and data bl
-000085b0: 6f63 6b73 2074 6f20 6120 7369 6e67 6c65  ocks to a single
-000085c0: 2070 6167 6520 2860 6031 6060 292c 0a20   page (``1``),. 
-000085d0: 206f 7220 746f 206d 756c 7469 706c 6520   or to multiple 
-000085e0: 7061 6765 7320 2860 6030 6060 2c20 7468  pages (``0``, th
-000085f0: 6520 6465 6661 756c 7429 0a2a 2060 6042  e default).* ``B
-00008600: 6173 6560 6020 2d20 636f 6e76 6572 7420  ase`` - convert 
-00008610: 6164 6472 6573 7365 7320 616e 6420 696e  addresses and in
-00008620: 7374 7275 6374 696f 6e20 6f70 6572 616e  struction operan
-00008630: 6473 2074 6f20 6865 7861 6465 6369 6d61  ds to hexadecima
-00008640: 6c20 2860 6031 3660 6029 0a20 206f 7220  l (``16``).  or 
-00008650: 6465 6369 6d61 6c20 2860 6031 3060 6029  decimal (``10``)
-00008660: 2c20 6f72 206c 6561 7665 2074 6865 6d20  , or leave them 
-00008670: 6173 2074 6865 7920 6172 6520 2860 6030  as they are (``0
-00008680: 6060 2c20 7468 6520 6465 6661 756c 7429  ``, the default)
-00008690: 0a2a 2060 6043 6173 6560 6020 2d20 7772  .* ``Case`` - wr
-000086a0: 6974 6520 7468 6520 6469 7361 7373 656d  ite the disassem
-000086b0: 626c 7920 696e 206c 6f77 6572 2063 6173  bly in lower cas
-000086c0: 6520 2860 6031 6060 2920 6f72 2075 7070  e (``1``) or upp
-000086d0: 6572 2063 6173 6520 2860 6032 6060 292c  er case (``2``),
-000086e0: 0a20 206f 7220 6c65 6176 6520 6974 2061  .  or leave it a
-000086f0: 7320 6974 2069 7320 2860 6030 6060 2c20  s it is (``0``, 
-00008700: 7468 6520 6465 6661 756c 7429 0a2a 2060  the default).* `
-00008710: 6043 7265 6174 654c 6162 656c 7360 6020  `CreateLabels`` 
-00008720: 2d20 6372 6561 7465 2064 6566 6175 6c74  - create default
-00008730: 206c 6162 656c 7320 666f 7220 756e 6c61   labels for unla
-00008740: 6265 6c6c 6564 2069 6e73 7472 7563 7469  belled instructi
-00008750: 6f6e 7320 2860 6031 6060 292c 0a20 206f  ons (``1``),.  o
-00008760: 7220 646f 6e27 7420 2860 6030 6060 2c20  r don't (``0``, 
-00008770: 7468 6520 6465 6661 756c 7429 0a2a 2060  the default).* `
-00008780: 6045 6e74 7279 4c61 6265 6c60 6020 2d20  `EntryLabel`` - 
-00008790: 7468 6520 666f 726d 6174 206f 6620 7468  the format of th
-000087a0: 6520 6465 6661 756c 7420 6c61 6265 6c20  e default label 
-000087b0: 666f 7220 7468 6520 6669 7273 7420 696e  for the first in
-000087c0: 7374 7275 6374 696f 6e20 696e 0a20 2061  struction in.  a
-000087d0: 2072 6f75 7469 6e65 206f 7220 6461 7461   routine or data
-000087e0: 2062 6c6f 636b 2028 6465 6661 756c 743a   block (default:
-000087f0: 2060 604c 7b61 6464 7265 7373 7d60 6029   ``L{address}``)
-00008800: 0a2a 2060 6045 6e74 7279 506f 696e 744c  .* ``EntryPointL
-00008810: 6162 656c 6060 202d 2074 6865 2066 6f72  abel`` - the for
-00008820: 6d61 7420 6f66 2074 6865 2064 6566 6175  mat of the defau
-00008830: 6c74 206c 6162 656c 2066 6f72 2061 6e20  lt label for an 
-00008840: 696e 7374 7275 6374 696f 6e0a 2020 6f74  instruction.  ot
-00008850: 6865 7220 7468 616e 2074 6865 2066 6972  her than the fir
-00008860: 7374 2069 6e20 6120 726f 7574 696e 6520  st in a routine 
-00008870: 6f72 2064 6174 6120 626c 6f63 6b20 2864  or data block (d
-00008880: 6566 6175 6c74 3a20 6060 7b6d 6169 6e7d  efault: ``{main}
-00008890: 5f7b 696e 6465 787d 6060 290a 2a20 6060  _{index}``).* ``
-000088a0: 4a6f 696e 4373 7360 6020 2d20 6966 2073  JoinCss`` - if s
-000088b0: 7065 6369 6669 6564 2c20 636f 6e63 6174  pecified, concat
-000088c0: 656e 6174 6520 4353 5320 6669 6c65 7320  enate CSS files 
-000088d0: 696e 746f 2061 2073 696e 676c 6520 6669  into a single fi
-000088e0: 6c65 2077 6974 680a 2020 7468 6973 206e  le with.  this n
-000088f0: 616d 650a 2a20 6060 4f75 7470 7574 4469  ame.* ``OutputDi
-00008900: 7260 6020 2d20 7772 6974 6520 6669 6c65  r`` - write file
-00008910: 7320 696e 2074 6869 7320 6469 7265 6374  s in this direct
-00008920: 6f72 7920 2864 6566 6175 6c74 3a20 6060  ory (default: ``
-00008930: 2e60 6029 0a2a 2060 6051 7569 6574 6060  .``).* ``Quiet``
-00008940: 202d 2062 6520 7175 6965 7420 2860 6031   - be quiet (``1
-00008950: 6060 2920 6f72 2076 6572 626f 7365 2028  ``) or verbose (
-00008960: 6060 3060 602c 2074 6865 2064 6566 6175  ``0``, the defau
-00008970: 6c74 290a 2a20 6060 5265 6275 696c 6441  lt).* ``RebuildA
-00008980: 7564 696f 6060 202d 206f 7665 7277 7269  udio`` - overwri
-00008990: 7465 2065 7869 7374 696e 6720 6175 6469  te existing audi
-000089a0: 6f20 6669 6c65 7320 2860 6031 6060 292c  o files (``1``),
-000089b0: 206f 7220 6c65 6176 6520 7468 656d 0a20   or leave them. 
-000089c0: 2061 6c6f 6e65 2028 6060 3060 602c 2074   alone (``0``, t
-000089d0: 6865 2064 6566 6175 6c74 290a 2a20 6060  he default).* ``
-000089e0: 5265 6275 696c 6449 6d61 6765 7360 6020  RebuildImages`` 
-000089f0: 2d20 6f76 6572 7772 6974 6520 6578 6973  - overwrite exis
-00008a00: 7469 6e67 2069 6d61 6765 2066 696c 6573  ting image files
-00008a10: 2028 6060 3160 6029 2c20 6f72 206c 6561   (``1``), or lea
-00008a20: 7665 2074 6865 6d0a 2020 616c 6f6e 6520  ve them.  alone 
-00008a30: 2860 6030 6060 2c20 7468 6520 6465 6661  (``0``, the defa
-00008a40: 756c 7429 0a2a 2060 6053 6561 7263 6860  ult).* ``Search`
-00008a50: 6020 2d20 6469 7265 6374 6f72 7920 746f  ` - directory to
-00008a60: 2061 6464 2074 6f20 7468 6520 7265 736f   add to the reso
-00008a70: 7572 6365 2073 6561 7263 6820 7061 7468  urce search path
-00008a80: 3b20 746f 2073 7065 6369 6679 2074 776f  ; to specify two
-00008a90: 206f 720a 2020 6d6f 7265 2064 6972 6563   or.  more direc
-00008aa0: 746f 7269 6573 2c20 7365 7061 7261 7465  tories, separate
-00008ab0: 2074 6865 6d20 7769 7468 2063 6f6d 6d61   them with comma
-00008ac0: 730a 2a20 6060 5468 656d 6560 6020 2d20  s.* ``Theme`` - 
-00008ad0: 4353 5320 7468 656d 6520 746f 2075 7365  CSS theme to use
-00008ae0: 3b20 746f 2073 7065 6369 6679 2074 776f  ; to specify two
-00008af0: 206f 7220 6d6f 7265 2074 6865 6d65 732c   or more themes,
-00008b00: 2073 6570 6172 6174 6520 7468 656d 0a20   separate them. 
-00008b10: 2077 6974 6820 636f 6d6d 6173 0a2a 2060   with commas.* `
-00008b20: 6054 696d 6560 6020 2d20 7368 6f77 2074  `Time`` - show t
-00008b30: 696d 696e 6773 2028 6060 3160 6029 2c20  imings (``1``), 
-00008b40: 6f72 2064 6f6e 2774 2028 6060 3060 602c  or don't (``0``,
-00008b50: 2074 6865 2064 6566 6175 6c74 290a 0a60   the default)..`
-00008b60: 6045 6e74 7279 4c61 6265 6c60 6020 616e  `EntryLabel`` an
-00008b70: 6420 6060 456e 7472 7950 6f69 6e74 4c61  d ``EntryPointLa
-00008b80: 6265 6c60 6020 6172 6520 7374 616e 6461  bel`` are standa
-00008b90: 7264 2050 7974 686f 6e20 666f 726d 6174  rd Python format
-00008ba0: 2073 7472 696e 6773 2e0a 6060 456e 7472   strings..``Entr
-00008bb0: 794c 6162 656c 6060 2072 6563 6f67 6e69  yLabel`` recogni
-00008bc0: 7365 7320 7468 6520 666f 6c6c 6f77 696e  ses the followin
-00008bd0: 6720 7265 706c 6163 656d 656e 7420 6669  g replacement fi
-00008be0: 656c 6473 3a0a 0a2a 2060 6061 6464 7265  elds:..* ``addre
-00008bf0: 7373 6060 202d 2074 6865 2061 6464 7265  ss`` - the addre
-00008c00: 7373 206f 6620 7468 6520 726f 7574 696e  ss of the routin
-00008c10: 6520 6f72 2064 6174 6120 626c 6f63 6b20  e or data block 
-00008c20: 6173 2069 7420 6170 7065 6172 7320 696e  as it appears in
-00008c30: 2074 6865 0a20 2073 6b6f 6f6c 2066 696c   the.  skool fil
-00008c40: 650a 2a20 6060 6c6f 6361 7469 6f6e 6060  e.* ``location``
-00008c50: 202d 2074 6865 2061 6464 7265 7373 206f   - the address o
-00008c60: 6620 7468 6520 726f 7574 696e 6520 6f72  f the routine or
-00008c70: 2064 6174 6120 626c 6f63 6b20 6173 2061   data block as a
-00008c80: 6e20 696e 7465 6765 720a 0a60 6045 6e74  n integer..``Ent
-00008c90: 7279 506f 696e 744c 6162 656c 6060 2072  ryPointLabel`` r
-00008ca0: 6563 6f67 6e69 7365 7320 7468 6520 666f  ecognises the fo
-00008cb0: 6c6c 6f77 696e 6720 7265 706c 6163 656d  llowing replacem
-00008cc0: 656e 7420 6669 656c 6473 3a0a 0a2a 2060  ent fields:..* `
-00008cd0: 6061 6464 7265 7373 6060 202d 2074 6865  `address`` - the
-00008ce0: 2061 6464 7265 7373 206f 6620 7468 6520   address of the 
-00008cf0: 696e 7374 7275 6374 696f 6e20 6173 2069  instruction as i
-00008d00: 7420 6170 7065 6172 7320 696e 2074 6865  t appears in the
-00008d10: 2073 6b6f 6f6c 2066 696c 650a 2a20 6060   skool file.* ``
-00008d20: 696e 6465 7860 6020 2d20 3020 666f 7220  index`` - 0 for 
-00008d30: 7468 6520 6669 7273 7420 756e 6c61 6265  the first unlabe
-00008d40: 6c6c 6564 2069 6e73 7472 7563 7469 6f6e  lled instruction
-00008d50: 2069 6e20 7468 6520 726f 7574 696e 6520   in the routine 
-00008d60: 6f72 2064 6174 610a 2020 626c 6f63 6b2c  or data.  block,
-00008d70: 2031 2066 6f72 2074 6865 2073 6563 6f6e   1 for the secon
-00008d80: 642c 2065 7463 2e0a 2a20 6060 6c6f 6361  d, etc..* ``loca
-00008d90: 7469 6f6e 6060 202d 2074 6865 2061 6464  tion`` - the add
-00008da0: 7265 7373 206f 6620 7468 6520 696e 7374  ress of the inst
-00008db0: 7275 6374 696f 6e20 6173 2061 6e20 696e  ruction as an in
-00008dc0: 7465 6765 720a 2a20 6060 6d61 696e 6060  teger.* ``main``
-00008dd0: 202d 2074 6865 206c 6162 656c 206f 6620   - the label of 
-00008de0: 7468 6520 6669 7273 7420 696e 7374 7275  the first instru
-00008df0: 6374 696f 6e20 696e 2074 6865 2072 6f75  ction in the rou
-00008e00: 7469 6e65 206f 7220 6461 7461 2062 6c6f  tine or data blo
-00008e10: 636b 0a0a 436f 6e66 6967 7572 6174 696f  ck..Configuratio
-00008e20: 6e20 7061 7261 6d65 7465 7273 206d 7573  n parameters mus
-00008e30: 7420 6170 7065 6172 2069 6e20 6120 6060  t appear in a ``
-00008e40: 5b73 6b6f 6f6c 3268 746d 6c5d 6060 2073  [skool2html]`` s
-00008e50: 6563 7469 6f6e 2e20 466f 720a 6578 616d  ection. For.exam
-00008e60: 706c 652c 2074 6f20 6d61 6b65 2060 736b  ple, to make `sk
-00008e70: 6f6f 6c32 6874 6d6c 2e70 7960 2075 7365  ool2html.py` use
-00008e80: 2041 534d 206c 6162 656c 7320 616e 6420   ASM labels and 
-00008e90: 7772 6974 6520 7468 6520 6469 7361 7373  write the disass
-00008ea0: 656d 626c 7920 696e 0a68 6578 6164 6563  embly in.hexadec
-00008eb0: 696d 616c 2062 7920 6465 6661 756c 7420  imal by default 
-00008ec0: 2877 6974 686f 7574 2068 6176 696e 6720  (without having 
-00008ed0: 746f 2075 7365 2074 6865 2060 602d 4860  to use the ``-H`
-00008ee0: 6020 616e 6420 6060 2d61 6060 206f 7074  ` and ``-a`` opt
-00008ef0: 696f 6e73 206f 6e0a 7468 6520 636f 6d6d  ions on.the comm
-00008f00: 616e 6420 6c69 6e65 292c 2061 6464 2074  and line), add t
-00008f10: 6865 2066 6f6c 6c6f 7769 6e67 2073 6563  he following sec
-00008f20: 7469 6f6e 2074 6f20 6073 6b6f 6f6c 6b69  tion to `skoolki
-00008f30: 742e 696e 6960 3a3a 0a0a 2020 5b73 6b6f  t.ini`::..  [sko
-00008f40: 6f6c 3268 746d 6c5d 0a20 2041 736d 4c61  ol2html].  AsmLa
-00008f50: 6265 6c73 3d31 0a20 2042 6173 653d 3136  bels=1.  Base=16
-00008f60: 0a0a 436f 6e66 6967 7572 6174 696f 6e20  ..Configuration 
-00008f70: 7061 7261 6d65 7465 7273 206d 6179 2061  parameters may a
-00008f80: 6c73 6f20 6265 2073 6574 206f 6e20 7468  lso be set on th
-00008f90: 6520 636f 6d6d 616e 6420 6c69 6e65 2062  e command line b
-00008fa0: 7920 7573 696e 6720 7468 650a 6060 2d2d  y using the.``--
-00008fb0: 696e 6960 6020 6f70 7469 6f6e 2e20 5061  ini`` option. Pa
-00008fc0: 7261 6d65 7465 7220 7661 6c75 6573 2073  rameter values s
-00008fd0: 6574 2074 6869 7320 7761 7920 7769 6c6c  et this way will
-00008fe0: 206f 7665 7272 6964 6520 616e 7920 666f   override any fo
-00008ff0: 756e 6420 696e 0a60 736b 6f6f 6c6b 6974  und in.`skoolkit
-00009000: 2e69 6e69 602e 0a0a 2b2d 2d2d 2d2d 2d2d  .ini`...+-------
-00009010: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
-00009020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009050: 2d2d 2d2d 2d2b 0a7c 2056 6572 7369 6f6e  -----+.| Version
-00009060: 207c 2043 6861 6e67 6573 2020 2020 2020   | Changes      
-00009070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007f60: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00007f70: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00007f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00007fc0: 2033 2e37 2020 2020 207c 2041 6464 6564   3.7     | Added
+00007fd0: 2074 6865 2060 602d 2d70 7265 7365 7276   the ``--preserv
+00007fe0: 652d 6261 7365 6060 206f 7074 696f 6e20  e-base`` option 
+00007ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008000: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00008010: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00008020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00008060: 2033 2e34 2020 2020 207c 2041 6464 6564   3.4     | Added
+00008070: 2074 6865 2060 602d 5660 6020 6f70 7469   the ``-V`` opti
+00008080: 6f6e 2061 6e64 2074 6865 206c 6f6e 6720  on and the long 
+00008090: 6f70 7469 6f6e 7320 2020 2020 2020 2020  options         
+000080a0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+000080b0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+000080c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000080d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000080e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000080f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00008100: 2032 2e34 2020 2020 207c 2041 6464 6564   2.4     | Added
+00008110: 2074 6865 2061 6269 6c69 7479 2074 6f20   the ability to 
+00008120: 7072 6573 6572 7665 2073 6f6d 6520 4153  preserve some AS
+00008130: 4d20 6469 7265 6374 6976 6573 2020 2020  M directives    
+00008140: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00008150: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00008160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000081a0: 2032 2e32 2e32 2020 207c 2041 6464 6564   2.2.2   | Added
+000081b0: 2074 6865 2061 6269 6c69 7479 2074 6f20   the ability to 
+000081c0: 7265 6164 2061 2073 6b6f 6f6c 2066 696c  read a skool fil
+000081d0: 6520 6672 6f6d 2073 7461 6e64 6172 6420  e from standard 
+000081e0: 696e 7075 7420 2020 2020 2020 207c 0a2b  input        |.+
+000081f0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00008200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+00008240: 2032 2e30 2e36 2020 207c 2041 6464 6564   2.0.6   | Added
+00008250: 2074 6865 2060 602d 6860 6020 6f70 7469   the ``-h`` opti
+00008260: 6f6e 2020 2020 2020 2020 2020 2020 2020  on              
+00008270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008280: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00008290: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+000082a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000082b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000082c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000082d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+000082e0: 2031 2e31 2020 2020 207c 204e 6577 2020   1.1     | New  
+000082f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008320: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
+00008330: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
+00008340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a0a  -------------+..
+00008380: 2e2e 205f 736b 6f6f 6c32 6874 6d6c 2e70  .. _skool2html.p
+00008390: 793a 0a0a 736b 6f6f 6c32 6874 6d6c 2e70  y:..skool2html.p
+000083a0: 790a 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0a  y.-------------.
+000083b0: 6073 6b6f 6f6c 3268 746d 6c2e 7079 6020  `skool2html.py` 
+000083c0: 636f 6e76 6572 7473 2061 2073 6b6f 6f6c  converts a skool
+000083d0: 2066 696c 6520 2861 6e64 2069 7473 2061   file (and its a
+000083e0: 7373 6f63 6961 7465 6420 7265 6620 6669  ssociated ref fi
+000083f0: 6c65 732c 2069 6620 616e 790a 6578 6973  les, if any.exis
+00008400: 7429 2069 6e74 6f20 6120 6272 6f77 7361  t) into a browsa
+00008410: 626c 6520 6469 7361 7373 656d 626c 7920  ble disassembly 
+00008420: 696e 2048 544d 4c20 666f 726d 6174 2e0a  in HTML format..
+00008430: 0a46 6f72 2065 7861 6d70 6c65 3a3a 0a0a  .For example::..
+00008440: 2020 2420 736b 6f6f 6c32 6874 6d6c 2e70    $ skool2html.p
+00008450: 7920 6761 6d65 2e73 6b6f 6f6c 0a0a 7769  y game.skool..wi
+00008460: 6c6c 2063 6f6e 7665 7274 2074 6865 2066  ll convert the f
+00008470: 696c 6520 6067 616d 652e 736b 6f6f 6c60  ile `game.skool`
+00008480: 2069 6e74 6f20 6120 6275 6e63 6820 6f66   into a bunch of
+00008490: 2048 544d 4c20 6669 6c65 732e 2049 6620   HTML files. If 
+000084a0: 616e 7920 6669 6c65 730a 6e61 6d65 6420  any files.named 
+000084b0: 6067 616d 652a 2e72 6566 6020 2865 2e67  `game*.ref` (e.g
+000084c0: 2e20 6067 616d 652e 7265 6660 2c20 6067  . `game.ref`, `g
+000084d0: 616d 652d 6275 6773 2e72 6566 602c 2060  ame-bugs.ref`, `
+000084e0: 6761 6d65 2d70 6f6b 6573 2e72 6566 6020  game-pokes.ref` 
+000084f0: 616e 6420 736f 0a6f 6e29 2061 6c73 6f20  and so.on) also 
+00008500: 6578 6973 7420 696e 2074 6865 2073 616d  exist in the sam
+00008510: 6520 6469 7265 6374 6f72 7920 6173 2060  e directory as `
+00008520: 6761 6d65 2e73 6b6f 6f6c 602c 2074 6865  game.skool`, the
+00008530: 7920 7769 6c6c 2062 6520 7573 6564 2074  y will be used t
+00008540: 6f0a 7072 6f76 6964 6520 6675 7274 6865  o.provide furthe
+00008550: 7220 696e 666f 726d 6174 696f 6e20 746f  r information to
+00008560: 2074 6865 2063 6f6e 7665 7273 696f 6e20   the conversion 
+00008570: 7072 6f63 6573 732c 2061 6c6f 6e67 2077  process, along w
+00008580: 6974 6820 616e 7920 6578 7472 610a 6669  ith any extra.fi
+00008590: 6c65 7320 6e61 6d65 6420 696e 2074 6865  les named in the
+000085a0: 2060 6052 6566 4669 6c65 7360 6020 7061   ``RefFiles`` pa
+000085b0: 7261 6d65 7465 7220 696e 2074 6865 203a  rameter in the :
+000085c0: 7265 663a 6072 6566 2d43 6f6e 6669 6760  ref:`ref-Config`
+000085d0: 2073 6563 7469 6f6e 2c20 616e 640a 616e   section, and.an
+000085e0: 7920 6f74 6865 7220 7265 6620 6669 6c65  y other ref file
+000085f0: 7320 6e61 6d65 6420 6f6e 2074 6865 2063  s named on the c
+00008600: 6f6d 6d61 6e64 206c 696e 652e 0a0a 6073  ommand line...`s
+00008610: 6b6f 6f6c 3268 746d 6c2e 7079 6020 7375  kool2html.py` su
+00008620: 7070 6f72 7473 2073 6576 6572 616c 206f  pports several o
+00008630: 7074 696f 6e73 3b20 7275 6e20 6974 2077  ptions; run it w
+00008640: 6974 6820 6e6f 2061 7267 756d 656e 7473  ith no arguments
+00008650: 2074 6f20 7365 6520 610a 6c69 7374 3a3a   to see a.list::
+00008660: 0a0a 2020 7573 6167 653a 2073 6b6f 6f6c  ..  usage: skool
+00008670: 3268 746d 6c2e 7079 205b 6f70 7469 6f6e  2html.py [option
+00008680: 735d 2053 4b4f 4f4c 4649 4c45 205b 5245  s] SKOOLFILE [RE
+00008690: 4646 494c 452e 2e2e 5d0a 0a20 2043 6f6e  FFILE...]..  Con
+000086a0: 7665 7274 2061 2073 6b6f 6f6c 2066 696c  vert a skool fil
+000086b0: 6520 616e 6420 7265 6620 6669 6c65 7320  e and ref files 
+000086c0: 746f 2048 544d 4c2e 2053 4b4f 4f4c 4649  to HTML. SKOOLFI
+000086d0: 4c45 206d 6179 2062 6520 6120 7265 6775  LE may be a regu
+000086e0: 6c61 7220 6669 6c65 2c20 6f72 0a20 2027  lar file, or.  '
+000086f0: 2d27 2066 6f72 2073 7461 6e64 6172 6420  -' for standard 
+00008700: 696e 7075 742e 0a0a 2020 4f70 7469 6f6e  input...  Option
+00008710: 733a 0a20 2020 202d 312c 202d 2d61 736d  s:.    -1, --asm
+00008720: 2d6f 6e65 2d70 6167 6520 2020 2057 7269  -one-page    Wri
+00008730: 7465 2061 6c6c 2072 6f75 7469 6e65 7320  te all routines 
+00008740: 616e 6420 6461 7461 2062 6c6f 636b 7320  and data blocks 
+00008750: 746f 2061 2073 696e 676c 6520 7061 6765  to a single page
+00008760: 2e0a 2020 2020 2d61 2c20 2d2d 6173 6d2d  ..    -a, --asm-
+00008770: 6c61 6265 6c73 2020 2020 2020 5573 6520  labels      Use 
+00008780: 4153 4d20 6c61 6265 6c73 2e0a 2020 2020  ASM labels..    
+00008790: 2d63 2053 2f4c 2c20 2d2d 636f 6e66 6967  -c S/L, --config
+000087a0: 2053 2f4c 2020 4164 6420 7468 6520 6c69   S/L  Add the li
+000087b0: 6e65 2027 4c27 2074 6f20 7468 6520 7265  ne 'L' to the re
+000087c0: 6620 6669 6c65 2073 6563 7469 6f6e 2027  f file section '
+000087d0: 5327 2e20 5468 6973 0a20 2020 2020 2020  S'. This.       
+000087e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087f0: 2020 206f 7074 696f 6e20 6d61 7920 6265     option may be
+00008800: 2075 7365 6420 6d75 6c74 6970 6c65 2074   used multiple t
+00008810: 696d 6573 2e0a 2020 2020 2d43 2c20 2d2d  imes..    -C, --
+00008820: 6372 6561 7465 2d6c 6162 656c 7320 2020  create-labels   
+00008830: 4372 6561 7465 2064 6566 6175 6c74 206c  Create default l
+00008840: 6162 656c 7320 666f 7220 756e 6c61 6265  abels for unlabe
+00008850: 6c6c 6564 2069 6e73 7472 7563 7469 6f6e  lled instruction
+00008860: 732e 0a20 2020 202d 6420 4449 522c 202d  s..    -d DIR, -
+00008870: 2d6f 7574 7075 742d 6469 7220 4449 520a  -output-dir DIR.
+00008880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008890: 2020 2020 2020 2020 2020 5772 6974 6520            Write 
+000088a0: 6669 6c65 7320 696e 2074 6869 7320 6469  files in this di
+000088b0: 7265 6374 6f72 7920 2864 6566 6175 6c74  rectory (default
+000088c0: 2069 7320 272e 2729 2e0a 2020 2020 2d44   is '.')..    -D
+000088d0: 2c20 2d2d 6465 6369 6d61 6c20 2020 2020  , --decimal     
+000088e0: 2020 2020 5772 6974 6520 7468 6520 6469      Write the di
+000088f0: 7361 7373 656d 626c 7920 696e 2064 6563  sassembly in dec
+00008900: 696d 616c 2e0a 2020 2020 2d48 2c20 2d2d  imal..    -H, --
+00008910: 6865 7820 2020 2020 2020 2020 2020 2020  hex             
+00008920: 5772 6974 6520 7468 6520 6469 7361 7373  Write the disass
+00008930: 656d 626c 7920 696e 2068 6578 6164 6563  embly in hexadec
+00008940: 696d 616c 2e0a 2020 2020 2d49 2070 3d76  imal..    -I p=v
+00008950: 2c20 2d2d 696e 6920 703d 7620 2020 2020  , --ini p=v     
+00008960: 5365 7420 7468 6520 7661 6c75 6520 6f66  Set the value of
+00008970: 2074 6865 2063 6f6e 6669 6775 7261 7469   the configurati
+00008980: 6f6e 2070 6172 616d 6574 6572 2027 7027  on parameter 'p'
+00008990: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
+000089a0: 2020 2020 2020 2020 2020 2020 2020 2776                'v
+000089b0: 272e 2054 6869 7320 6f70 7469 6f6e 206d  '. This option m
+000089c0: 6179 2062 6520 7573 6564 206d 756c 7469  ay be used multi
+000089d0: 706c 6520 7469 6d65 732e 0a20 2020 202d  ple times..    -
+000089e0: 6a20 4e41 4d45 2c20 2d2d 6a6f 696e 2d63  j NAME, --join-c
+000089f0: 7373 204e 414d 450a 2020 2020 2020 2020  ss NAME.        
+00008a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a10: 2020 436f 6e63 6174 656e 6174 6520 4353    Concatenate CS
+00008a20: 5320 6669 6c65 7320 696e 746f 2061 2073  S files into a s
+00008a30: 696e 676c 6520 6669 6c65 2077 6974 6820  ingle file with 
+00008a40: 7468 6973 206e 616d 652e 0a20 2020 202d  this name..    -
+00008a50: 6c2c 202d 2d6c 6f77 6572 2020 2020 2020  l, --lower      
+00008a60: 2020 2020 2057 7269 7465 2074 6865 2064       Write the d
+00008a70: 6973 6173 7365 6d62 6c79 2069 6e20 6c6f  isassembly in lo
+00008a80: 7765 7220 6361 7365 2e0a 2020 2020 2d6f  wer case..    -o
+00008a90: 2c20 2d2d 7265 6275 696c 642d 696d 6167  , --rebuild-imag
+00008aa0: 6573 2020 4f76 6572 7772 6974 6520 6578  es  Overwrite ex
+00008ab0: 6973 7469 6e67 2069 6d61 6765 2066 696c  isting image fil
+00008ac0: 6573 2e0a 2020 2020 2d4f 2c20 2d2d 7265  es..    -O, --re
+00008ad0: 6275 696c 642d 6175 6469 6f20 2020 4f76  build-audio   Ov
+00008ae0: 6572 7772 6974 6520 6578 6973 7469 6e67  erwrite existing
+00008af0: 2061 7564 696f 2066 696c 6573 2e0a 2020   audio files..  
+00008b00: 2020 2d70 2c20 2d2d 7061 636b 6167 652d    -p, --package-
+00008b10: 6469 7220 2020 2020 5368 6f77 2070 6174  dir     Show pat
+00008b20: 6820 746f 2073 6b6f 6f6c 6b69 7420 7061  h to skoolkit pa
+00008b30: 636b 6167 6520 6469 7265 6374 6f72 7920  ckage directory 
+00008b40: 616e 6420 6578 6974 2e0a 2020 2020 2d50  and exit..    -P
+00008b50: 2050 4147 4553 2c20 2d2d 7061 6765 7320   PAGES, --pages 
+00008b60: 5041 4745 530a 2020 2020 2020 2020 2020  PAGES.          
+00008b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b80: 5772 6974 6520 6f6e 6c79 2074 6865 7365  Write only these
+00008b90: 2070 6167 6573 2028 7768 656e 2075 7369   pages (when usi
+00008ba0: 6e67 2027 2d2d 7772 6974 6520 5027 292e  ng '--write P').
+00008bb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008bc0: 2020 2020 2020 2020 2020 2050 4147 4553             PAGES
+00008bd0: 2069 7320 6120 636f 6d6d 612d 7365 7061   is a comma-sepa
+00008be0: 7261 7465 6420 6c69 7374 206f 6620 7061  rated list of pa
+00008bf0: 6765 2049 4473 2e0a 2020 2020 2d71 2c20  ge IDs..    -q, 
+00008c00: 2d2d 7175 6965 7420 2020 2020 2020 2020  --quiet         
+00008c10: 2020 4265 2071 7569 6574 2e0a 2020 2020    Be quiet..    
+00008c20: 2d72 2050 5245 4649 582c 202d 2d72 6566  -r PREFIX, --ref
+00008c30: 2d73 6563 7469 6f6e 7320 5052 4546 4958  -sections PREFIX
+00008c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008c50: 2020 2020 2020 2020 2020 2053 686f 7720             Show 
+00008c60: 6465 6661 756c 7420 7265 6620 6669 6c65  default ref file
+00008c70: 2073 6563 7469 6f6e 7320 7768 6f73 6520   sections whose 
+00008c80: 6e61 6d65 7320 7374 6172 7420 7769 7468  names start with
+00008c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008ca0: 2020 2020 2020 2020 2020 2050 5245 4649             PREFI
+00008cb0: 5820 616e 6420 6578 6974 2e0a 2020 2020  X and exit..    
+00008cc0: 2d52 2c20 2d2d 7265 662d 6669 6c65 2020  -R, --ref-file  
+00008cd0: 2020 2020 2020 5368 6f77 2074 6865 2065        Show the e
+00008ce0: 6e74 6972 6520 6465 6661 756c 7420 7265  ntire default re
+00008cf0: 6620 6669 6c65 2061 6e64 2065 7869 742e  f file and exit.
+00008d00: 0a20 2020 202d 732c 202d 2d73 6561 7263  .    -s, --searc
+00008d10: 682d 6469 7273 2020 2020 2053 686f 7720  h-dirs     Show 
+00008d20: 7468 6520 6c6f 6361 7469 6f6e 7320 736b  the locations sk
+00008d30: 6f6f 6c32 6874 6d6c 2e70 7920 7365 6172  ool2html.py sear
+00008d40: 6368 6573 2066 6f72 2072 6573 6f75 7263  ches for resourc
+00008d50: 6573 2e0a 2020 2020 2d53 2044 4952 2c20  es..    -S DIR, 
+00008d60: 2d2d 7365 6172 6368 2044 4952 2020 4164  --search DIR  Ad
+00008d70: 6420 7468 6973 2064 6972 6563 746f 7279  d this directory
+00008d80: 2074 6f20 7468 6520 7265 736f 7572 6365   to the resource
+00008d90: 2073 6561 7263 6820 7061 7468 2e20 5468   search path. Th
+00008da0: 6973 0a20 2020 2020 2020 2020 2020 2020  is.             
+00008db0: 2020 2020 2020 2020 2020 2020 206f 7074               opt
+00008dc0: 696f 6e20 6d61 7920 6265 2075 7365 6420  ion may be used 
+00008dd0: 6d75 6c74 6970 6c65 2074 696d 6573 2e0a  multiple times..
+00008de0: 2020 2020 2d2d 7368 6f77 2d63 6f6e 6669      --show-confi
+00008df0: 6720 2020 2020 2020 2020 5368 6f77 2063  g         Show c
+00008e00: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
+00008e10: 616d 6574 6572 2076 616c 7565 732e 0a20  ameter values.. 
+00008e20: 2020 202d 742c 202d 2d74 696d 6520 2020     -t, --time   
+00008e30: 2020 2020 2020 2020 2053 686f 7720 7469           Show ti
+00008e40: 6d69 6e67 732e 0a20 2020 202d 5420 5448  mings..    -T TH
+00008e50: 454d 452c 202d 2d74 6865 6d65 2054 4845  EME, --theme THE
+00008e60: 4d45 0a20 2020 2020 2020 2020 2020 2020  ME.             
+00008e70: 2020 2020 2020 2020 2020 2020 2055 7365               Use
+00008e80: 2074 6869 7320 4353 5320 7468 656d 652e   this CSS theme.
+00008e90: 2054 6869 7320 6f70 7469 6f6e 206d 6179   This option may
+00008ea0: 2062 6520 7573 6564 206d 756c 7469 706c   be used multipl
+00008eb0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00008ec0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00008ed0: 732e 0a20 2020 202d 752c 202d 2d75 7070  s..    -u, --upp
+00008ee0: 6572 2020 2020 2020 2020 2020 2057 7269  er           Wri
+00008ef0: 7465 2074 6865 2064 6973 6173 7365 6d62  te the disassemb
+00008f00: 6c79 2069 6e20 7570 7065 7220 6361 7365  ly in upper case
+00008f10: 2e0a 2020 2020 2d2d 7661 7220 6e61 6d65  ..    --var name
+00008f20: 3d76 616c 7565 2020 2020 2020 4465 6669  =value      Defi
+00008f30: 6e65 2061 2076 6172 6961 626c 6520 7468  ne a variable th
+00008f40: 6174 2063 616e 2062 6520 7573 6564 2062  at can be used b
+00008f50: 7920 4069 6620 616e 6420 7468 6520 534d  y @if and the SM
+00008f60: 504c 0a20 2020 2020 2020 2020 2020 2020  PL.             
+00008f70: 2020 2020 2020 2020 2020 2020 206d 6163               mac
+00008f80: 726f 732e 2054 6869 7320 6f70 7469 6f6e  ros. This option
+00008f90: 206d 6179 2062 6520 7573 6564 206d 756c   may be used mul
+00008fa0: 7469 706c 6520 7469 6d65 732e 0a20 2020  tiple times..   
+00008fb0: 202d 562c 202d 2d76 6572 7369 6f6e 2020   -V, --version  
+00008fc0: 2020 2020 2020 2053 686f 7720 536b 6f6f         Show Skoo
+00008fd0: 6c4b 6974 2076 6572 7369 6f6e 206e 756d  lKit version num
+00008fe0: 6265 7220 616e 6420 6578 6974 2e0a 2020  ber and exit..  
+00008ff0: 2020 2d77 2058 2c20 2d2d 7772 6974 6520    -w X, --write 
+00009000: 5820 2020 2020 2020 5772 6974 6520 6f6e  X       Write on
+00009010: 6c79 2074 6865 7365 2066 696c 6573 2c20  ly these files, 
+00009020: 7768 6572 6520 5820 6973 206f 6e65 206f  where X is one o
+00009030: 7220 6d6f 7265 206f 663a 0a20 2020 2020  r more of:.     
+00009040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009050: 2020 2020 2020 2064 203d 2044 6973 6173         d = Disas
+00009060: 7365 6d62 6c79 2066 696c 6573 2020 206f  sembly files   o
+00009070: 203d 204f 7468 6572 2063 6f64 650a 2020   = Other code.  
 00009080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090a0: 2020 2020 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d      |.+=========
-000090b0: 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  +===============
-000090c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000090d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000090e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000090f0: 3d3d 3d2b 0a7c 2038 2e37 2020 2020 207c  ===+.| 8.7     |
-00009100: 2041 6464 6564 2074 6865 2060 602d 2d72   Added the ``--r
-00009110: 6562 7569 6c64 2d61 7564 696f 6060 206f  ebuild-audio`` o
-00009120: 7074 696f 6e20 616e 6420 7468 6520 6060  ption and the ``
-00009130: 5265 6275 696c 6441 7564 696f 6060 2020  RebuildAudio``  
-00009140: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
-00009150: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
-00009160: 7261 6d65 7465 7220 2020 2020 2020 2020  rameter         
-00009170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009190: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
-000091a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000091b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000091c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000091d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000091e0: 2b0a 7c20 382e 3520 2020 2020 7c20 4164  +.| 8.5     | Ad
-000091f0: 6465 6420 7468 6520 6060 456e 7472 794c  ded the ``EntryL
-00009200: 6162 656c 6060 2061 6e64 2060 6045 6e74  abel`` and ``Ent
-00009210: 7279 506f 696e 744c 6162 656c 6060 2063  ryPointLabel`` c
-00009220: 6f6e 6669 6775 7261 7469 6f6e 2020 207c  onfiguration   |
-00009230: 0a7c 2020 2020 2020 2020 207c 2070 6172  .|         | par
-00009240: 616d 6574 6572 7320 2020 2020 2020 2020  ameters         
-00009250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009270: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-00009280: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-00009290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000092a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000092b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000092c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
-000092d0: 2037 2e30 2020 2020 207c 2057 7269 7465   7.0     | Write
-000092e0: 7320 6120 7369 6e67 6c65 2064 6973 6173  s a single disas
-000092f0: 7365 6d62 6c79 2066 726f 6d20 7468 6520  sembly from the 
-00009300: 736b 6f6f 6c20 6669 6c65 2067 6976 656e  skool file given
-00009310: 2062 7920 7468 6520 2020 2020 7c0a 7c20   by the     |.| 
-00009320: 2020 2020 2020 2020 7c20 6669 7273 7420          | first 
-00009330: 706f 7369 7469 6f6e 616c 2061 7267 756d  positional argum
-00009340: 656e 7420 2020 2020 2020 2020 2020 2020  ent             
-00009350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009360: 2020 2020 2020 2020 2020 207c 0a2b 2d2d             |.+--
-00009370: 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d  -------+--------
-00009380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000093a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000093b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e  ----------+.| 6.
-000093c0: 3420 2020 2020 7c20 4164 6465 6420 7468  4     | Added th
-000093d0: 6520 6060 2d2d 7661 7260 6020 6f70 7469  e ``--var`` opti
-000093e0: 6f6e 2020 2020 2020 2020 2020 2020 2020  on              
-000093f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009400: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00009410: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00009420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009450: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e 3220  --------+.| 6.2 
-00009460: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
-00009470: 6060 2d2d 7368 6f77 2d63 6f6e 6669 6760  ``--show-config`
-00009480: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
-00009490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094a0: 2020 2020 2020 207c 0a2b 2d2d 2d2d 2d2d         |.+------
-000094b0: 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ---+------------
-000094c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000094d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000094e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000094f0: 2d2d 2d2d 2d2d 2b0a 7c20 362e 3120 2020  ------+.| 6.1   
-00009500: 2020 7c20 436f 6e66 6967 7572 6174 696f    | Configuratio
-00009510: 6e20 6973 2072 6561 6420 6672 6f6d 2060  n is read from `
-00009520: 736b 6f6f 6c6b 6974 2e69 6e69 6020 6966  skoolkit.ini` if
-00009530: 2070 7265 7365 6e74 3b20 6164 6465 6420   present; added 
-00009540: 7468 6520 207c 0a7c 2020 2020 2020 2020  the  |.|        
-00009550: 207c 2060 602d 2d69 6e69 6060 206f 7074   | ``--ini`` opt
-00009560: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-00009570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009590: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
-000095a0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-000095b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000095c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000095d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000095e0: 2d2d 2d2b 0a7c 2035 2e34 2020 2020 207c  ---+.| 5.4     |
-000095f0: 2041 6464 6564 2074 6865 2060 602d 2d61   Added the ``--a
-00009600: 736d 2d6f 6e65 2d70 6167 6560 6020 6f70  sm-one-page`` op
-00009610: 7469 6f6e 2020 2020 2020 2020 2020 2020  tion            
-00009620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009630: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
-00009640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009680: 2d2b 0a7c 2035 2e30 2020 2020 207c 2054  -+.| 5.0     | T
-00009690: 6865 2060 602d 2d74 6865 6d65 6060 206f  he ``--theme`` o
-000096a0: 7074 696f 6e20 616c 736f 206c 6f6f 6b73  ption also looks
-000096b0: 2066 6f72 2061 2043 5353 2066 696c 6520   for a CSS file 
-000096c0: 7768 6f73 6520 6261 7365 206e 616d 6520  whose base name 
-000096d0: 7c0a 7c20 2020 2020 2020 2020 7c20 6d61  |.|         | ma
-000096e0: 7463 6865 7320 7468 6520 7468 656d 6520  tches the theme 
-000096f0: 6e61 6d65 2020 2020 2020 2020 2020 2020  name            
-00009700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009710: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00009720: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00009730: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-00009770: 7c20 342e 3120 2020 2020 7c20 4164 6465  | 4.1     | Adde
-00009780: 6420 7468 6520 6060 2d2d 7365 6172 6368  d the ``--search
-00009790: 6060 2061 6e64 2060 602d 2d77 7269 7465  `` and ``--write
-000097a0: 7260 6020 6f70 7469 6f6e 7320 2020 2020  r`` options     
-000097b0: 2020 2020 2020 2020 2020 2020 207c 0a2b               |.+
-000097c0: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
-000097d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000097e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000097f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00009810: 342e 3020 2020 2020 7c20 4164 6465 6420  4.0     | Added 
-00009820: 7468 6520 6060 2d2d 7265 662d 7365 6374  the ``--ref-sect
-00009830: 696f 6e73 6060 2061 6e64 2060 602d 2d72  ions`` and ``--r
-00009840: 6566 2d66 696c 6560 6020 6f70 7469 6f6e  ef-file`` option
-00009850: 7320 2020 2020 2020 2020 207c 0a2b 2d2d  s          |.+--
-00009860: 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d  -------+--------
-00009870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000098a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 332e  ----------+.| 3.
-000098b0: 3620 2020 2020 7c20 4164 6465 6420 7468  6     | Added th
-000098c0: 6520 6060 2d2d 6a6f 696e 2d63 7373 6060  e ``--join-css``
-000098d0: 2061 6e64 2060 602d 2d73 6561 7263 682d   and ``--search-
-000098e0: 6469 7273 6060 206f 7074 696f 6e73 2020  dirs`` options  
-000098f0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
-00009900: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
-00009910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009940: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 332e 3520  --------+.| 3.5 
-00009950: 2020 2020 7c20 4164 6465 6420 7375 7070      | Added supp
-00009960: 6f72 7420 666f 7220 6d75 6c74 6970 6c65  ort for multiple
-00009970: 2043 5353 2074 6865 6d65 7320 2020 2020   CSS themes     
-00009980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009990: 2020 2020 2020 207c 0a2b 2d2d 2d2d 2d2d         |.+------
-000099a0: 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ---+------------
-000099b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000099c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000099d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000099e0: 2d2d 2d2d 2d2d 2b0a 7c20 332e 3420 2020  ------+.| 3.4   
-000099f0: 2020 7c20 4164 6465 6420 7468 6520 6060    | Added the ``
-00009a00: 2d61 6060 2061 6e64 2060 602d 4360 6020  -a`` and ``-C`` 
-00009a10: 6f70 7469 6f6e 7320 616e 6420 7468 6520  options and the 
-00009a20: 6c6f 6e67 206f 7074 696f 6e73 2020 2020  long options    
-00009a30: 2020 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d       |.+--------
-00009a40: 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  -+--------------
-00009a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009a80: 2d2d 2d2d 2b0a 7c20 332e 332e 3220 2020  ----+.| 3.3.2   
-00009a90: 7c20 4164 6465 6420 6024 5041 434b 4147  | Added `$PACKAG
-00009aa0: 455f 4449 522f 7265 736f 7572 6365 7360  E_DIR/resources`
-00009ab0: 2074 6f20 7468 6520 7365 6172 6368 2070   to the search p
-00009ac0: 6174 683b 2061 6464 6564 2074 6865 2020  ath; added the  
-00009ad0: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-00009ae0: 2060 602d 7060 6020 616e 6420 6060 2d54   ``-p`` and ``-T
-00009af0: 6060 206f 7074 696f 6e73 2020 2020 2020  `` options      
-00009b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b20: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
-00009b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009b70: 2d2b 0a7c 2033 2e32 2020 2020 207c 2041  -+.| 3.2     | A
-00009b80: 6464 6564 2060 7e2f 2e73 6b6f 6f6c 6b69  dded `~/.skoolki
-00009b90: 7460 2074 6f20 7468 6520 7365 6172 6368  t` to the search
-00009ba0: 2070 6174 6820 2020 2020 2020 2020 2020   path           
-00009bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bc0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00009bd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009be0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00009c10: 0a7c 2033 2e31 2020 2020 207c 2041 6464  .| 3.1     | Add
-00009c20: 6564 2074 6865 2060 602d 6360 6020 6f70  ed the ``-c`` op
-00009c30: 7469 6f6e 2020 2020 2020 2020 2020 2020  tion            
-00009c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c50: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-00009c60: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-00009c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
-00009cb0: 2033 2e30 2e32 2020 207c 204e 6f20 6c6f   3.0.2   | No lo
-00009cc0: 6e67 6572 2073 686f 7773 2074 696d 696e  nger shows timin
-00009cd0: 6773 2062 7920 6465 6661 756c 743b 2061  gs by default; a
-00009ce0: 6464 6564 2074 6865 2060 602d 7460 6020  dded the ``-t`` 
-00009cf0: 6f70 7469 6f6e 2020 2020 2020 7c0a 2b2d  option      |.+-
-00009d00: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00009d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2032  -----------+.| 2
-00009d50: 2e33 2e31 2020 207c 2041 6464 6564 2073  .3.1   | Added s
-00009d60: 7570 706f 7274 2066 6f72 2072 6561 6469  upport for readi
-00009d70: 6e67 206d 756c 7469 706c 6520 7265 6620  ng multiple ref 
-00009d80: 6669 6c65 7320 7065 7220 6469 7361 7373  files per disass
-00009d90: 656d 626c 7920 2020 2020 7c0a 2b2d 2d2d  embly     |.+---
-00009da0: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-00009db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009de0: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2032 2e32  ---------+.| 2.2
-00009df0: 2e32 2020 207c 2041 6464 6564 2074 6865  .2   | Added the
-00009e00: 2061 6269 6c69 7479 2074 6f20 7265 6164   ability to read
-00009e10: 2061 2073 6b6f 6f6c 2066 696c 6520 6672   a skool file fr
-00009e20: 6f6d 2073 7461 6e64 6172 6420 696e 7075  om standard inpu
-00009e30: 7420 2020 2020 2020 7c0a 2b2d 2d2d 2d2d  t       |.+-----
-00009e40: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
-00009e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e80: 2d2d 2d2d 2d2d 2d2b 0a7c 2032 2e32 2020  -------+.| 2.2  
-00009e90: 2020 207c 204e 6f20 6c6f 6e67 6572 2077     | No longer w
-00009ea0: 7269 7465 7320 7468 6520 536b 6f6f 6c20  rites the Skool 
-00009eb0: 4461 7a65 2061 6e64 2042 6163 6b20 746f  Daze and Back to
-00009ec0: 2053 6b6f 6f6c 2064 6973 6173 7365 6d62   Skool disassemb
-00009ed0: 6c69 6573 2020 7c0a 7c20 2020 2020 2020  lies  |.|       
-00009ee0: 2020 7c20 6279 2064 6566 6175 6c74 3b20    | by default; 
-00009ef0: 6164 6465 6420 7468 6520 6060 2d64 6060  added the ``-d``
-00009f00: 206f 7074 696f 6e20 2020 2020 2020 2020   option         
-00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f20: 2020 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d       |.+--------
-00009f30: 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  -+--------------
-00009f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f70: 2d2d 2d2d 2b0a 7c20 322e 312e 3120 2020  ----+.| 2.1.1   
-00009f80: 7c20 4164 6465 6420 7468 6520 6060 2d6c  | Added the ``-l
-00009f90: 6060 2c20 6060 2d75 6060 2c20 6060 2d44  ``, ``-u``, ``-D
-00009fa0: 6060 2061 6e64 2060 602d 4860 6020 6f70  `` and ``-H`` op
-00009fb0: 7469 6f6e 7320 2020 2020 2020 2020 2020  tions           
-00009fc0: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
-00009fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a010: 2d2d 2b0a 7c20 322e 3120 2020 2020 7c20  --+.| 2.1     | 
-0000a020: 4164 6465 6420 7468 6520 6060 2d6f 6060  Added the ``-o``
-0000a030: 2061 6e64 2060 602d 5060 6020 6f70 7469   and ``-P`` opti
-0000a040: 6f6e 7320 2020 2020 2020 2020 2020 2020  ons             
-0000a050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a060: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
-0000a070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a0b0: 2b0a 7c20 312e 3420 2020 2020 7c20 4164  +.| 1.4     | Ad
-0000a0c0: 6465 6420 7468 6520 6060 2d56 6060 206f  ded the ``-V`` o
-0000a0d0: 7074 696f 6e20 2020 2020 2020 2020 2020  ption           
-0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0f0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-0000a100: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-0000a110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000a140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000a150: 0a2e 2e20 5f73 6e61 3263 746c 2e70 793a  ... _sna2ctl.py:
-0000a160: 0a0a 736e 6132 6374 6c2e 7079 0a2d 2d2d  ..sna2ctl.py.---
-0000a170: 2d2d 2d2d 2d2d 2d0a 6073 6e61 3263 746c  -------.`sna2ctl
-0000a180: 2e70 7960 2067 656e 6572 6174 6573 2061  .py` generates a
-0000a190: 2063 6f6e 7472 6f6c 2066 696c 6520 666f   control file fo
-0000a1a0: 7220 6120 6269 6e61 7279 2028 7261 7720  r a binary (raw 
-0000a1b0: 6d65 6d6f 7279 2920 6669 6c65 206f 7220  memory) file or 
-0000a1c0: 6120 534e 412c 0a53 5a58 206f 7220 5a38  a SNA,.SZX or Z8
-0000a1d0: 3020 736e 6170 7368 6f74 2e20 466f 7220  0 snapshot. For 
-0000a1e0: 6578 616d 706c 653a 3a0a 0a20 2024 2073  example::..  $ s
-0000a1f0: 6e61 3263 746c 2e70 7920 6761 6d65 2e7a  na2ctl.py game.z
-0000a200: 3830 203e 2067 616d 652e 6374 6c0a 0a4e  80 > game.ctl..N
-0000a210: 6f77 2060 6761 6d65 2e63 746c 6020 6361  ow `game.ctl` ca
-0000a220: 6e20 6265 2075 7365 6420 6279 203a 7265  n be used by :re
-0000a230: 663a 6073 6e61 3273 6b6f 6f6c 2e70 7960  f:`sna2skool.py`
-0000a240: 2074 6f20 636f 6e76 6572 7420 6067 616d   to convert `gam
-0000a250: 652e 7a38 3060 2069 6e74 6f20 610a 736b  e.z80` into a.sk
-0000a260: 6f6f 6c20 6669 6c65 2073 706c 6974 2069  ool file split i
-0000a270: 6e74 6f20 626c 6f63 6b73 206f 6620 636f  nto blocks of co
-0000a280: 6465 2061 6e64 2064 6174 612e 0a0a 6073  de and data...`s
-0000a290: 6e61 3263 746c 2e70 7960 2073 7570 706f  na2ctl.py` suppo
-0000a2a0: 7274 7320 7365 7665 7261 6c20 6f70 7469  rts several opti
-0000a2b0: 6f6e 733b 2072 756e 2069 7420 7769 7468  ons; run it with
-0000a2c0: 206e 6f20 6172 6775 6d65 6e74 7320 746f   no arguments to
-0000a2d0: 2073 6565 2061 206c 6973 743a 3a0a 0a20   see a list::.. 
-0000a2e0: 2075 7361 6765 3a20 736e 6132 6374 6c2e   usage: sna2ctl.
-0000a2f0: 7079 205b 6f70 7469 6f6e 735d 2046 494c  py [options] FIL
-0000a300: 450a 0a20 2047 656e 6572 6174 6520 6120  E..  Generate a 
-0000a310: 636f 6e74 726f 6c20 6669 6c65 2066 6f72  control file for
-0000a320: 2061 2062 696e 6172 7920 2872 6177 206d   a binary (raw m
-0000a330: 656d 6f72 7929 2066 696c 6520 6f72 2061  emory) file or a
-0000a340: 2053 4e41 2c20 535a 5820 6f72 205a 3830   SNA, SZX or Z80
-0000a350: 0a20 2073 6e61 7073 686f 742e 2046 494c  .  snapshot. FIL
-0000a360: 4520 6d61 7920 6265 2061 2072 6567 756c  E may be a regul
-0000a370: 6172 2066 696c 652c 206f 7220 272d 2720  ar file, or '-' 
-0000a380: 666f 7220 7374 616e 6461 7264 2069 6e70  for standard inp
-0000a390: 7574 2e0a 0a20 204f 7074 696f 6e73 3a0a  ut...  Options:.
-0000a3a0: 2020 2020 2d65 2041 4444 522c 202d 2d65      -e ADDR, --e
-0000a3b0: 6e64 2041 4444 5220 2020 5374 6f70 2061  nd ADDR   Stop a
-0000a3c0: 7420 7468 6973 2061 6464 7265 7373 2028  t this address (
-0000a3d0: 6465 6661 756c 743d 3635 3533 3629 2e0a  default=65536)..
-0000a3e0: 2020 2020 2d68 2c20 2d2d 6865 7820 2020      -h, --hex   
-0000a3f0: 2020 2020 2020 2020 2020 5772 6974 6520            Write 
-0000a400: 7570 7065 7220 6361 7365 2068 6578 6164  upper case hexad
-0000a410: 6563 696d 616c 2061 6464 7265 7373 6573  ecimal addresses
-0000a420: 2e0a 2020 2020 2d49 2070 3d76 2c20 2d2d  ..    -I p=v, --
-0000a430: 696e 6920 703d 7620 2020 2020 5365 7420  ini p=v     Set 
-0000a440: 7468 6520 7661 6c75 6520 6f66 2074 6865  the value of the
-0000a450: 2063 6f6e 6669 6775 7261 7469 6f6e 2070   configuration p
-0000a460: 6172 616d 6574 6572 2027 7027 2074 6f0a  arameter 'p' to.
-0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a480: 2020 2020 2020 2020 2020 2776 272e 2054            'v'. T
-0000a490: 6869 7320 6f70 7469 6f6e 206d 6179 2062  his option may b
-0000a4a0: 6520 7573 6564 206d 756c 7469 706c 6520  e used multiple 
-0000a4b0: 7469 6d65 732e 0a20 2020 202d 6c2c 202d  times..    -l, -
-0000a4c0: 2d68 6578 2d6c 6f77 6572 2020 2020 2020  -hex-lower      
-0000a4d0: 2057 7269 7465 206c 6f77 6572 2063 6173   Write lower cas
-0000a4e0: 6520 6865 7861 6465 6369 6d61 6c20 6164  e hexadecimal ad
-0000a4f0: 6472 6573 7365 732e 0a20 2020 202d 6d20  dresses..    -m 
-0000a500: 4649 4c45 2c20 2d2d 6d61 7020 4649 4c45  FILE, --map FILE
-0000a510: 2020 2055 7365 2046 494c 4520 6173 2061     Use FILE as a
-0000a520: 2063 6f64 6520 6578 6563 7574 696f 6e20   code execution 
-0000a530: 6d61 702e 0a20 2020 202d 6f20 4144 4452  map..    -o ADDR
-0000a540: 2c20 2d2d 6f72 6720 4144 4452 2020 2053  , --org ADDR   S
-0000a550: 7065 6369 6679 2074 6865 206f 7269 6769  pecify the origi
-0000a560: 6e20 6164 6472 6573 7320 6f66 2061 2062  n address of a b
-0000a570: 696e 6172 7920 6669 6c65 2028 6465 6661  inary file (defa
-0000a580: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
-0000a590: 2020 2020 2020 2020 2020 2020 2020 2036                 6
-0000a5a0: 3535 3336 202d 206c 656e 6774 6829 2e0a  5536 - length)..
-0000a5b0: 2020 2020 2d70 2050 4147 452c 202d 2d70      -p PAGE, --p
-0000a5c0: 6167 6520 5041 4745 2020 5370 6563 6966  age PAGE  Specif
-0000a5d0: 7920 7468 6520 7061 6765 2028 302d 3729  y the page (0-7)
-0000a5e0: 206f 6620 6120 3132 384b 2073 6e61 7073   of a 128K snaps
-0000a5f0: 686f 7420 746f 206d 6170 2074 6f0a 2020  hot to map to.  
-0000a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a610: 2020 2020 2020 2020 3439 3135 322d 3635          49152-65
-0000a620: 3533 352e 0a20 2020 202d 2d73 686f 772d  535..    --show-
-0000a630: 636f 6e66 6967 2020 2020 2020 2020 2053  config         S
-0000a640: 686f 7720 636f 6e66 6967 7572 6174 696f  how configuratio
-0000a650: 6e20 7061 7261 6d65 7465 7220 7661 6c75  n parameter valu
-0000a660: 6573 2e0a 2020 2020 2d73 2041 4444 522c  es..    -s ADDR,
-0000a670: 202d 2d73 7461 7274 2041 4444 520a 2020   --start ADDR.  
-0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a690: 2020 2020 2020 2020 5374 6172 7420 6174          Start at
-0000a6a0: 2074 6869 7320 6164 6472 6573 732e 0a20   this address.. 
-0000a6b0: 2020 202d 562c 202d 2d76 6572 7369 6f6e     -V, --version
-0000a6c0: 2020 2020 2020 2020 2053 686f 7720 536b           Show Sk
-0000a6d0: 6f6f 6c4b 6974 2076 6572 7369 6f6e 206e  oolKit version n
-0000a6e0: 756d 6265 7220 616e 6420 6578 6974 2e0a  umber and exit..
-0000a6f0: 0a49 6620 7468 6520 696e 7075 7420 6669  .If the input fi
-0000a700: 6c65 6e61 6d65 2064 6f65 7320 6e6f 7420  lename does not 
-0000a710: 656e 6420 7769 7468 2027 2e73 6e61 272c  end with '.sna',
-0000a720: 2027 2e73 7a78 2720 6f72 2027 2e7a 3830   '.szx' or '.z80
-0000a730: 272c 2069 7420 6973 2061 7373 756d 6564  ', it is assumed
-0000a740: 0a74 6f20 6265 2061 2062 696e 6172 7920  .to be a binary 
-0000a750: 6669 6c65 2e0a 0a54 6865 2060 602d 6d60  file...The ``-m`
-0000a760: 6020 6f70 7469 6f6e 206d 6179 2062 6520  ` option may be 
-0000a770: 7573 6564 2074 6f20 7370 6563 6966 7920  used to specify 
-0000a780: 6120 636f 6465 2065 7865 6375 7469 6f6e  a code execution
-0000a790: 206d 6170 2074 6f20 7573 6520 7768 656e   map to use when
-0000a7a0: 0a67 656e 6572 6174 696e 6720 6120 636f  .generating a co
-0000a7b0: 6e74 726f 6c20 6669 6c65 2e20 5468 6520  ntrol file. The 
-0000a7c0: 7375 7070 6f72 7465 6420 6669 6c65 2066  supported file f
-0000a7d0: 6f72 6d61 7473 2061 7265 3a0a 0a2a 2050  ormats are:..* P
-0000a7e0: 726f 6669 6c65 7320 6372 6561 7465 6420  rofiles created 
-0000a7f0: 6279 2074 6865 2046 7573 6520 656d 756c  by the Fuse emul
-0000a800: 6174 6f72 0a2a 2043 6f64 6520 6578 6563  ator.* Code exec
-0000a810: 7574 696f 6e20 6c6f 6773 2063 7265 6174  ution logs creat
-0000a820: 6564 2062 7920 7468 6520 5370 6563 456d  ed by the SpecEm
-0000a830: 752c 2053 7075 6420 616e 6420 5a65 726f  u, Spud and Zero
-0000a840: 2065 6d75 6c61 746f 7273 0a2a 204d 6170   emulators.* Map
-0000a850: 2066 696c 6573 2063 7265 6174 6564 2062   files created b
-0000a860: 7920 7468 6520 5370 6563 456d 7520 616e  y the SpecEmu an
-0000a870: 6420 5a38 3020 656d 756c 6174 6f72 730a  d Z80 emulators.
-0000a880: 0a49 6620 7468 6520 6669 6c65 2073 7065  .If the file spe
-0000a890: 6369 6669 6564 2062 7920 7468 6520 6060  cified by the ``
-0000a8a0: 2d6d 6060 206f 7074 696f 6e20 6973 2038  -m`` option is 8
-0000a8b0: 3139 3220 6279 7465 7320 6c6f 6e67 2c20  192 bytes long, 
-0000a8c0: 6974 2069 7320 6173 7375 6d65 6420 746f  it is assumed to
-0000a8d0: 0a62 6520 6120 5a38 3020 6d61 7020 6669  .be a Z80 map fi
-0000a8e0: 6c65 3b20 6966 2069 7420 6973 2036 3535  le; if it is 655
-0000a8f0: 3336 2062 7974 6573 206c 6f6e 672c 2069  36 bytes long, i
-0000a900: 7420 6973 2061 7373 756d 6564 2074 6f20  t is assumed to 
-0000a910: 6265 2061 2053 7065 6345 6d75 206d 6170  be a SpecEmu map
-0000a920: 0a66 696c 653b 206f 7468 6572 7769 7365  .file; otherwise
-0000a930: 2069 7420 6973 2061 7373 756d 6564 2074   it is assumed t
-0000a940: 6f20 6265 2069 6e20 6f6e 6520 6f66 2074  o be in one of t
-0000a950: 6865 206f 7468 6572 2073 7570 706f 7274  he other support
-0000a960: 6564 2066 6f72 6d61 7473 2e0a 0a2e 2e20  ed formats..... 
-0000a970: 5f73 6e61 3263 746c 2d63 6f6e 663a 0a0a  _sna2ctl-conf:..
-0000a980: 436f 6e66 6967 7572 6174 696f 6e0a 5e5e  Configuration.^^
-0000a990: 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 6073 6e61  ^^^^^^^^^^^.`sna
-0000a9a0: 3263 746c 2e70 7960 2077 696c 6c20 7265  2ctl.py` will re
-0000a9b0: 6164 2063 6f6e 6669 6775 7261 7469 6f6e  ad configuration
-0000a9c0: 2066 726f 6d20 6120 6669 6c65 206e 616d   from a file nam
-0000a9d0: 6564 2060 736b 6f6f 6c6b 6974 2e69 6e69  ed `skoolkit.ini
-0000a9e0: 6020 696e 2074 6865 0a63 7572 7265 6e74  ` in the.current
-0000a9f0: 2077 6f72 6b69 6e67 2064 6972 6563 746f   working directo
-0000aa00: 7279 206f 7220 696e 2060 7e2f 2e73 6b6f  ry or in `~/.sko
-0000aa10: 6f6c 6b69 7460 2c20 6966 2070 7265 7365  olkit`, if prese
-0000aa20: 6e74 2e20 5468 6520 7265 636f 676e 6973  nt. The recognis
-0000aa30: 6564 0a63 6f6e 6669 6775 7261 7469 6f6e  ed.configuration
-0000aa40: 2070 6172 616d 6574 6572 7320 6172 653a   parameters are:
-0000aa50: 0a0a 2a20 6060 4469 6374 696f 6e61 7279  ..* ``Dictionary
-0000aa60: 6060 202d 2074 6865 206e 616d 6520 6f66  `` - the name of
-0000aa70: 2061 2066 696c 6520 636f 6e74 6169 6e69   a file containi
-0000aa80: 6e67 2061 206c 6973 7420 6f66 2061 6c6c  ng a list of all
-0000aa90: 6f77 6564 2077 6f72 6473 2c20 6f6e 650a  owed words, one.
-0000aaa0: 2020 7065 7220 6c69 6e65 3b20 6966 2073    per line; if s
-0000aab0: 7065 6369 6669 6564 2c20 6120 7374 7269  pecified, a stri
-0000aac0: 6e67 206f 6620 6368 6172 6163 7465 7273  ng of characters
-0000aad0: 2077 696c 6c20 6265 206d 6172 6b65 6420   will be marked 
-0000aae0: 6173 2074 6578 7420 6f6e 6c79 2069 660a  as text only if.
-0000aaf0: 2020 6974 2063 6f6e 7461 696e 7320 6174    it contains at
-0000ab00: 206c 6561 7374 206f 6e65 206f 6620 7468   least one of th
-0000ab10: 6520 776f 7264 7320 696e 2074 6869 7320  e words in this 
-0000ab20: 6669 6c65 0a2a 2060 6048 6578 6060 202d  file.* ``Hex`` -
-0000ab30: 2077 7269 7465 2061 6464 7265 7373 6573   write addresses
-0000ab40: 2069 6e20 6465 6369 6d61 6c20 2860 6030   in decimal (``0
-0000ab50: 6060 2c20 7468 6520 6465 6661 756c 7429  ``, the default)
-0000ab60: 2c20 6c6f 7765 7220 6361 7365 0a20 2068  , lower case.  h
-0000ab70: 6578 6164 6563 696d 616c 2028 6060 3160  exadecimal (``1`
-0000ab80: 6029 2c20 206f 7220 7570 7065 7220 6361  `),  or upper ca
-0000ab90: 7365 2068 6578 6164 6563 696d 616c 2028  se hexadecimal (
-0000aba0: 6060 3260 6029 0a2a 2060 6054 6578 7443  ``2``).* ``TextC
-0000abb0: 6861 7273 6060 202d 2063 6861 7261 6374  hars`` - charact
-0000abc0: 6572 7320 656c 6967 6962 6c65 2066 6f72  ers eligible for
-0000abd0: 2062 6569 6e67 206d 6172 6b65 6420 6173   being marked as
-0000abe0: 2074 6578 7420 2864 6566 6175 6c74 3a0a   text (default:.
-0000abf0: 2020 6c65 7474 6572 732c 2064 6967 6974    letters, digit
-0000ac00: 732c 2073 7061 6365 2c20 616e 6420 7468  s, space, and th
-0000ac10: 6520 666f 6c6c 6f77 696e 6720 6e6f 6e2d  e following non-
-0000ac20: 616c 7068 616e 756d 6572 6963 2063 6861  alphanumeric cha
-0000ac30: 7261 6374 6572 733a 0a20 2060 6021 2224  racters:.  ``!"$
-0000ac40: 2526 5c27 2829 2a2b 2c2d 2e2f 3a3b 3c3d  %&\'()*+,-./:;<=
-0000ac50: 3e3f 5b5d 6060 290a 2a20 6060 5465 7874  >?[]``).* ``Text
-0000ac60: 4d69 6e4c 656e 6774 6843 6f64 6560 6020  MinLengthCode`` 
-0000ac70: 2d20 7468 6520 6d69 6e69 6d75 6d20 6c65  - the minimum le
-0000ac80: 6e67 7468 206f 6620 6120 7374 7269 6e67  ngth of a string
-0000ac90: 206f 6620 6368 6172 6163 7465 7273 2065   of characters e
-0000aca0: 6c69 6769 626c 650a 2020 666f 7220 6265  ligible.  for be
-0000acb0: 696e 6720 6d61 726b 6564 2061 7320 7465  ing marked as te
-0000acc0: 7874 2069 6e20 6120 626c 6f63 6b20 6964  xt in a block id
-0000acd0: 656e 7469 6669 6564 2061 7320 636f 6465  entified as code
-0000ace0: 2028 6465 6661 756c 743a 2060 6031 3260   (default: ``12`
-0000acf0: 6029 0a2a 2060 6054 6578 744d 696e 4c65  `).* ``TextMinLe
-0000ad00: 6e67 7468 4461 7461 6060 202d 2074 6865  ngthData`` - the
-0000ad10: 206d 696e 696d 756d 206c 656e 6774 6820   minimum length 
-0000ad20: 6f66 2061 2073 7472 696e 6720 6f66 2063  of a string of c
-0000ad30: 6861 7261 6374 6572 7320 656c 6967 6962  haracters eligib
-0000ad40: 6c65 0a20 2066 6f72 2062 6569 6e67 206d  le.  for being m
-0000ad50: 6172 6b65 6420 6173 2074 6578 7420 696e  arked as text in
-0000ad60: 2061 2062 6c6f 636b 2069 6465 6e74 6966   a block identif
-0000ad70: 6965 6420 6173 2064 6174 6120 2864 6566  ied as data (def
-0000ad80: 6175 6c74 3a20 6060 3360 6029 0a0a 436f  ault: ``3``)..Co
-0000ad90: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
-0000ada0: 6d65 7465 7273 206d 7573 7420 6170 7065  meters must appe
-0000adb0: 6172 2069 6e20 6120 6060 5b73 6e61 3263  ar in a ``[sna2c
-0000adc0: 746c 5d60 6020 7365 6374 696f 6e2e 2046  tl]`` section. F
-0000add0: 6f72 2065 7861 6d70 6c65 2c0a 746f 206d  or example,.to m
-0000ade0: 616b 6520 6073 6e61 3263 746c 2e70 7960  ake `sna2ctl.py`
-0000adf0: 2077 7269 7465 2075 7070 6572 2063 6173   write upper cas
-0000ae00: 6520 6865 7861 6465 6369 6d61 6c20 6164  e hexadecimal ad
-0000ae10: 6472 6573 7365 7320 6279 2064 6566 6175  dresses by defau
-0000ae20: 6c74 2028 7769 7468 6f75 740a 6861 7669  lt (without.havi
-0000ae30: 6e67 2074 6f20 7573 6520 7468 6520 6060  ng to use the ``
-0000ae40: 2d68 6060 206f 7074 696f 6e20 6f6e 2074  -h`` option on t
-0000ae50: 6865 2063 6f6d 6d61 6e64 206c 696e 6529  he command line)
-0000ae60: 2c20 6164 6420 7468 6520 666f 6c6c 6f77  , add the follow
-0000ae70: 696e 6720 7365 6374 696f 6e0a 746f 2060  ing section.to `
-0000ae80: 736b 6f6f 6c6b 6974 2e69 6e69 603a 3a0a  skoolkit.ini`::.
-0000ae90: 0a20 205b 736e 6132 6374 6c5d 0a20 2048  .  [sna2ctl].  H
-0000aea0: 6578 3d32 0a0a 436f 6e66 6967 7572 6174  ex=2..Configurat
-0000aeb0: 696f 6e20 7061 7261 6d65 7465 7273 206d  ion parameters m
-0000aec0: 6179 2061 6c73 6f20 6265 2073 6574 206f  ay also be set o
-0000aed0: 6e20 7468 6520 636f 6d6d 616e 6420 6c69  n the command li
-0000aee0: 6e65 2062 7920 7573 696e 6720 7468 650a  ne by using the.
-0000aef0: 6060 2d2d 696e 6960 6020 6f70 7469 6f6e  ``--ini`` option
-0000af00: 2e20 5061 7261 6d65 7465 7220 7661 6c75  . Parameter valu
-0000af10: 6573 2073 6574 2074 6869 7320 7761 7920  es set this way 
-0000af20: 7769 6c6c 206f 7665 7272 6964 6520 616e  will override an
-0000af30: 7920 666f 756e 6420 696e 0a60 736b 6f6f  y found in.`skoo
-0000af40: 6c6b 6974 2e69 6e69 602e 0a0a 2b2d 2d2d  lkit.ini`...+---
-0000af50: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-0000af60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000af70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009090: 2020 2020 2020 2020 2020 6920 3d20 4469            i = Di
+000090a0: 7361 7373 656d 626c 7920 696e 6465 7820  sassembly index 
+000090b0: 2020 5020 3d20 4f74 6865 7220 7061 6765    P = Other page
+000090c0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000090d0: 2020 2020 2020 2020 2020 2020 2020 6d20                m 
+000090e0: 3d20 4d65 6d6f 7279 206d 6170 730a 2020  = Memory maps.  
+000090f0: 2020 2d57 2043 4c41 5353 2c20 2d2d 7772    -W CLASS, --wr
+00009100: 6974 6572 2043 4c41 5353 0a20 2020 2020  iter CLASS.     
+00009110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009120: 2020 2020 2053 7065 6369 6679 2074 6865       Specify the
+00009130: 2048 544d 4c20 7772 6974 6572 2063 6c61   HTML writer cla
+00009140: 7373 2074 6f20 7573 653b 2073 686f 7274  ss to use; short
+00009150: 6861 6e64 2066 6f72 0a20 2020 2020 2020  hand for.       
+00009160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009170: 2020 2027 2d2d 636f 6e66 6967 2043 6f6e     '--config Con
+00009180: 6669 672f 4874 6d6c 5772 6974 6572 436c  fig/HtmlWriterCl
+00009190: 6173 733d 434c 4153 5327 2e0a 0a60 736b  ass=CLASS'...`sk
+000091a0: 6f6f 6c32 6874 6d6c 2e70 7960 2073 6561  ool2html.py` sea
+000091b0: 7263 6865 7320 7468 6520 666f 6c6c 6f77  rches the follow
+000091c0: 696e 6720 6469 7265 6374 6f72 6965 7320  ing directories 
+000091d0: 666f 7220 4353 5320 6669 6c65 732c 204a  for CSS files, J
+000091e0: 6176 6153 6372 6970 740a 6669 6c65 732c  avaScript.files,
+000091f0: 2066 6f6e 7420 6669 6c65 732c 2061 6e64   font files, and
+00009200: 2066 696c 6573 206c 6973 7465 6420 696e   files listed in
+00009210: 2074 6865 203a 7265 663a 6072 6573 6f75   the :ref:`resou
+00009220: 7263 6573 6020 7365 6374 696f 6e20 6f66  rces` section of
+00009230: 2074 6865 2072 6566 0a66 696c 653a 0a0a   the ref.file:..
+00009240: 2a20 5468 6520 6469 7265 6374 6f72 7920  * The directory 
+00009250: 7468 6174 2063 6f6e 7461 696e 7320 7468  that contains th
+00009260: 6520 736b 6f6f 6c20 6669 6c65 206e 616d  e skool file nam
+00009270: 6564 206f 6e20 7468 6520 636f 6d6d 616e  ed on the comman
+00009280: 6420 6c69 6e65 0a2a 2054 6865 2063 7572  d line.* The cur
+00009290: 7265 6e74 2077 6f72 6b69 6e67 2064 6972  rent working dir
+000092a0: 6563 746f 7279 0a2a 2060 2e2f 7265 736f  ectory.* `./reso
+000092b0: 7572 6365 7360 0a2a 2060 7e2f 2e73 6b6f  urces`.* `~/.sko
+000092c0: 6f6c 6b69 7460 0a2a 2060 2450 4143 4b41  olkit`.* `$PACKA
+000092d0: 4745 5f44 4952 2f72 6573 6f75 7263 6573  GE_DIR/resources
+000092e0: 600a 2a20 416e 7920 6f74 6865 7220 6469  `.* Any other di
+000092f0: 7265 6374 6f72 6965 7320 7370 6563 6966  rectories specif
+00009300: 6965 6420 6279 2074 6865 2060 602d 5360  ied by the ``-S`
+00009310: 602f 6060 2d2d 7365 6172 6368 6060 206f  `/``--search`` o
+00009320: 7074 696f 6e0a 0a77 6865 7265 2060 2450  ption..where `$P
+00009330: 4143 4b41 4745 5f44 4952 6020 6973 2074  ACKAGE_DIR` is t
+00009340: 6865 2064 6972 6563 746f 7279 2069 6e20  he directory in 
+00009350: 7768 6963 6820 7468 6520 6073 6b6f 6f6c  which the `skool
+00009360: 6b69 7460 2070 6163 6b61 6765 2069 730a  kit` package is.
+00009370: 696e 7374 616c 6c65 6420 2861 7320 7368  installed (as sh
+00009380: 6f77 6e20 6279 2060 6073 6b6f 6f6c 3268  own by ``skool2h
+00009390: 746d 6c2e 7079 202d 7060 6029 2e20 5768  tml.py -p``). Wh
+000093a0: 656e 2079 6f75 206e 6565 6420 6120 7265  en you need a re
+000093b0: 6d69 6e64 6572 206f 6620 7468 6573 650a  minder of these.
+000093c0: 6c6f 6361 7469 6f6e 732c 2072 756e 2060  locations, run `
+000093d0: 6073 6b6f 6f6c 3268 746d 6c2e 7079 202d  `skool2html.py -
+000093e0: 7360 602e 0a0a 5468 6520 6060 2d54 6060  s``...The ``-T``
+000093f0: 206f 7074 696f 6e20 7365 7473 2074 6865   option sets the
+00009400: 2043 5353 2074 6865 6d65 2e20 466f 7220   CSS theme. For 
+00009410: 6578 616d 706c 652c 2069 6620 6067 616d  example, if `gam
+00009420: 652e 7265 6660 2073 7065 6369 6669 6573  e.ref` specifies
+00009430: 2074 6865 0a43 5353 2066 696c 6573 2074   the.CSS files t
+00009440: 6f20 7573 6520 7468 7573 3a3a 0a0a 2020  o use thus::..  
+00009450: 5b47 616d 655d 0a20 2053 7479 6c65 5368  [Game].  StyleSh
+00009460: 6565 743d 736b 6f6f 6c6b 6974 2e63 7373  eet=skoolkit.css
+00009470: 3b67 616d 652e 6373 730a 0a74 6865 6e3a  ;game.css..then:
+00009480: 3a0a 0a20 2024 2073 6b6f 6f6c 3268 746d  :..  $ skool2htm
+00009490: 6c2e 7079 202d 5420 6461 726b 202d 5420  l.py -T dark -T 
+000094a0: 7769 6465 2067 616d 652e 736b 6f6f 6c0a  wide game.skool.
+000094b0: 0a77 696c 6c20 7573 6520 7468 6520 666f  .will use the fo
+000094c0: 6c6c 6f77 696e 6720 4353 5320 6669 6c65  llowing CSS file
+000094d0: 732c 2069 6620 7468 6579 2065 7869 7374  s, if they exist
+000094e0: 2c20 696e 2074 6865 206f 7264 6572 206c  , in the order l
+000094f0: 6973 7465 643a 0a0a 2a20 6073 6b6f 6f6c  isted:..* `skool
+00009500: 6b69 742e 6373 7360 0a2a 2060 736b 6f6f  kit.css`.* `skoo
+00009510: 6c6b 6974 2d64 6172 6b2e 6373 7360 0a2a  lkit-dark.css`.*
+00009520: 2060 736b 6f6f 6c6b 6974 2d77 6964 652e   `skoolkit-wide.
+00009530: 6373 7360 0a2a 2060 6761 6d65 2e63 7373  css`.* `game.css
+00009540: 600a 2a20 6067 616d 652d 6461 726b 2e63  `.* `game-dark.c
+00009550: 7373 600a 2a20 6067 616d 652d 7769 6465  ss`.* `game-wide
+00009560: 2e63 7373 600a 2a20 6064 6172 6b2e 6373  .css`.* `dark.cs
+00009570: 7360 0a2a 2060 7769 6465 2e63 7373 600a  s`.* `wide.css`.
+00009580: 0a2e 2e20 5f73 6b6f 6f6c 3268 746d 6c2d  ... _skool2html-
+00009590: 636f 6e66 3a0a 0a43 6f6e 6669 6775 7261  conf:..Configura
+000095a0: 7469 6f6e 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e  tion.^^^^^^^^^^^
+000095b0: 5e5e 0a60 736b 6f6f 6c32 6874 6d6c 2e70  ^^.`skool2html.p
+000095c0: 7960 2077 696c 6c20 7265 6164 2063 6f6e  y` will read con
+000095d0: 6669 6775 7261 7469 6f6e 2066 726f 6d20  figuration from 
+000095e0: 6120 6669 6c65 206e 616d 6564 2060 736b  a file named `sk
+000095f0: 6f6f 6c6b 6974 2e69 6e69 6020 696e 2074  oolkit.ini` in t
+00009600: 6865 0a63 7572 7265 6e74 2077 6f72 6b69  he.current worki
+00009610: 6e67 2064 6972 6563 746f 7279 206f 7220  ng directory or 
+00009620: 696e 2060 7e2f 2e73 6b6f 6f6c 6b69 7460  in `~/.skoolkit`
+00009630: 2c20 6966 2070 7265 7365 6e74 2e20 5468  , if present. Th
+00009640: 6520 7265 636f 676e 6973 6564 0a63 6f6e  e recognised.con
+00009650: 6669 6775 7261 7469 6f6e 2070 6172 616d  figuration param
+00009660: 6574 6572 7320 6172 653a 0a0a 2a20 6060  eters are:..* ``
+00009670: 4173 6d4c 6162 656c 7360 6020 2d20 7573  AsmLabels`` - us
+00009680: 6520 4153 4d20 6c61 6265 6c73 2028 6060  e ASM labels (``
+00009690: 3160 6029 2c20 6f72 2064 6f6e 2774 2028  1``), or don't (
+000096a0: 6060 3060 602c 2074 6865 2064 6566 6175  ``0``, the defau
+000096b0: 6c74 290a 2a20 6060 4173 6d4f 6e65 5061  lt).* ``AsmOnePa
+000096c0: 6765 6060 202d 2077 7269 7465 2061 6c6c  ge`` - write all
+000096d0: 2072 6f75 7469 6e65 7320 616e 6420 6461   routines and da
+000096e0: 7461 2062 6c6f 636b 7320 746f 2061 2073  ta blocks to a s
+000096f0: 696e 676c 6520 7061 6765 2028 6060 3160  ingle page (``1`
+00009700: 6029 2c0a 2020 6f72 2074 6f20 6d75 6c74  `),.  or to mult
+00009710: 6970 6c65 2070 6167 6573 2028 6060 3060  iple pages (``0`
+00009720: 602c 2074 6865 2064 6566 6175 6c74 290a  `, the default).
+00009730: 2a20 6060 4261 7365 6060 202d 2063 6f6e  * ``Base`` - con
+00009740: 7665 7274 2061 6464 7265 7373 6573 2061  vert addresses a
+00009750: 6e64 2069 6e73 7472 7563 7469 6f6e 206f  nd instruction o
+00009760: 7065 7261 6e64 7320 746f 2068 6578 6164  perands to hexad
+00009770: 6563 696d 616c 2028 6060 3136 6060 290a  ecimal (``16``).
+00009780: 2020 6f72 2064 6563 696d 616c 2028 6060    or decimal (``
+00009790: 3130 6060 292c 206f 7220 6c65 6176 6520  10``), or leave 
+000097a0: 7468 656d 2061 7320 7468 6579 2061 7265  them as they are
+000097b0: 2028 6060 3060 602c 2074 6865 2064 6566   (``0``, the def
+000097c0: 6175 6c74 290a 2a20 6060 4361 7365 6060  ault).* ``Case``
+000097d0: 202d 2077 7269 7465 2074 6865 2064 6973   - write the dis
+000097e0: 6173 7365 6d62 6c79 2069 6e20 6c6f 7765  assembly in lowe
+000097f0: 7220 6361 7365 2028 6060 3160 6029 206f  r case (``1``) o
+00009800: 7220 7570 7065 7220 6361 7365 2028 6060  r upper case (``
+00009810: 3260 6029 2c0a 2020 6f72 206c 6561 7665  2``),.  or leave
+00009820: 2069 7420 6173 2069 7420 6973 2028 6060   it as it is (``
+00009830: 3060 602c 2074 6865 2064 6566 6175 6c74  0``, the default
+00009840: 290a 2a20 6060 4372 6561 7465 4c61 6265  ).* ``CreateLabe
+00009850: 6c73 6060 202d 2063 7265 6174 6520 6465  ls`` - create de
+00009860: 6661 756c 7420 6c61 6265 6c73 2066 6f72  fault labels for
+00009870: 2075 6e6c 6162 656c 6c65 6420 696e 7374   unlabelled inst
+00009880: 7275 6374 696f 6e73 2028 6060 3160 6029  ructions (``1``)
+00009890: 2c0a 2020 6f72 2064 6f6e 2774 2028 6060  ,.  or don't (``
+000098a0: 3060 602c 2074 6865 2064 6566 6175 6c74  0``, the default
+000098b0: 290a 2a20 6060 456e 7472 794c 6162 656c  ).* ``EntryLabel
+000098c0: 6060 202d 2074 6865 2066 6f72 6d61 7420  `` - the format 
+000098d0: 6f66 2074 6865 2064 6566 6175 6c74 206c  of the default l
+000098e0: 6162 656c 2066 6f72 2074 6865 2066 6972  abel for the fir
+000098f0: 7374 2069 6e73 7472 7563 7469 6f6e 2069  st instruction i
+00009900: 6e0a 2020 6120 726f 7574 696e 6520 6f72  n.  a routine or
+00009910: 2064 6174 6120 626c 6f63 6b20 2864 6566   data block (def
+00009920: 6175 6c74 3a20 6060 4c7b 6164 6472 6573  ault: ``L{addres
+00009930: 737d 6060 290a 2a20 6060 456e 7472 7950  s}``).* ``EntryP
+00009940: 6f69 6e74 4c61 6265 6c60 6020 2d20 7468  ointLabel`` - th
+00009950: 6520 666f 726d 6174 206f 6620 7468 6520  e format of the 
+00009960: 6465 6661 756c 7420 6c61 6265 6c20 666f  default label fo
+00009970: 7220 616e 2069 6e73 7472 7563 7469 6f6e  r an instruction
+00009980: 0a20 206f 7468 6572 2074 6861 6e20 7468  .  other than th
+00009990: 6520 6669 7273 7420 696e 2061 2072 6f75  e first in a rou
+000099a0: 7469 6e65 206f 7220 6461 7461 2062 6c6f  tine or data blo
+000099b0: 636b 2028 6465 6661 756c 743a 2060 607b  ck (default: ``{
+000099c0: 6d61 696e 7d5f 7b69 6e64 6578 7d60 6029  main}_{index}``)
+000099d0: 0a2a 2060 604a 6f69 6e43 7373 6060 202d  .* ``JoinCss`` -
+000099e0: 2069 6620 7370 6563 6966 6965 642c 2063   if specified, c
+000099f0: 6f6e 6361 7465 6e61 7465 2043 5353 2066  oncatenate CSS f
+00009a00: 696c 6573 2069 6e74 6f20 6120 7369 6e67  iles into a sing
+00009a10: 6c65 2066 696c 6520 7769 7468 0a20 2074  le file with.  t
+00009a20: 6869 7320 6e61 6d65 0a2a 2060 604f 7574  his name.* ``Out
+00009a30: 7075 7444 6972 6060 202d 2077 7269 7465  putDir`` - write
+00009a40: 2066 696c 6573 2069 6e20 7468 6973 2064   files in this d
+00009a50: 6972 6563 746f 7279 2028 6465 6661 756c  irectory (defaul
+00009a60: 743a 2060 602e 6060 290a 2a20 6060 5175  t: ``.``).* ``Qu
+00009a70: 6965 7460 6020 2d20 6265 2071 7569 6574  iet`` - be quiet
+00009a80: 2028 6060 3160 6029 206f 7220 7665 7262   (``1``) or verb
+00009a90: 6f73 6520 2860 6030 6060 2c20 7468 6520  ose (``0``, the 
+00009aa0: 6465 6661 756c 7429 0a2a 2060 6052 6562  default).* ``Reb
+00009ab0: 7569 6c64 4175 6469 6f60 6020 2d20 6f76  uildAudio`` - ov
+00009ac0: 6572 7772 6974 6520 6578 6973 7469 6e67  erwrite existing
+00009ad0: 2061 7564 696f 2066 696c 6573 2028 6060   audio files (``
+00009ae0: 3160 6029 2c20 6f72 206c 6561 7665 2074  1``), or leave t
+00009af0: 6865 6d0a 2020 616c 6f6e 6520 2860 6030  hem.  alone (``0
+00009b00: 6060 2c20 7468 6520 6465 6661 756c 7429  ``, the default)
+00009b10: 0a2a 2060 6052 6562 7569 6c64 496d 6167  .* ``RebuildImag
+00009b20: 6573 6060 202d 206f 7665 7277 7269 7465  es`` - overwrite
+00009b30: 2065 7869 7374 696e 6720 696d 6167 6520   existing image 
+00009b40: 6669 6c65 7320 2860 6031 6060 292c 206f  files (``1``), o
+00009b50: 7220 6c65 6176 6520 7468 656d 0a20 2061  r leave them.  a
+00009b60: 6c6f 6e65 2028 6060 3060 602c 2074 6865  lone (``0``, the
+00009b70: 2064 6566 6175 6c74 290a 2a20 6060 5365   default).* ``Se
+00009b80: 6172 6368 6060 202d 2064 6972 6563 746f  arch`` - directo
+00009b90: 7279 2074 6f20 6164 6420 746f 2074 6865  ry to add to the
+00009ba0: 2072 6573 6f75 7263 6520 7365 6172 6368   resource search
+00009bb0: 2070 6174 683b 2074 6f20 7370 6563 6966   path; to specif
+00009bc0: 7920 7477 6f20 6f72 0a20 206d 6f72 6520  y two or.  more 
+00009bd0: 6469 7265 6374 6f72 6965 732c 2073 6570  directories, sep
+00009be0: 6172 6174 6520 7468 656d 2077 6974 6820  arate them with 
+00009bf0: 636f 6d6d 6173 0a2a 2060 6054 6865 6d65  commas.* ``Theme
+00009c00: 6060 202d 2043 5353 2074 6865 6d65 2074  `` - CSS theme t
+00009c10: 6f20 7573 653b 2074 6f20 7370 6563 6966  o use; to specif
+00009c20: 7920 7477 6f20 6f72 206d 6f72 6520 7468  y two or more th
+00009c30: 656d 6573 2c20 7365 7061 7261 7465 2074  emes, separate t
+00009c40: 6865 6d0a 2020 7769 7468 2063 6f6d 6d61  hem.  with comma
+00009c50: 730a 2a20 6060 5469 6d65 6060 202d 2073  s.* ``Time`` - s
+00009c60: 686f 7720 7469 6d69 6e67 7320 2860 6031  how timings (``1
+00009c70: 6060 292c 206f 7220 646f 6e27 7420 2860  ``), or don't (`
+00009c80: 6030 6060 2c20 7468 6520 6465 6661 756c  `0``, the defaul
+00009c90: 7429 0a0a 6060 456e 7472 794c 6162 656c  t)..``EntryLabel
+00009ca0: 6060 2061 6e64 2060 6045 6e74 7279 506f  `` and ``EntryPo
+00009cb0: 696e 744c 6162 656c 6060 2061 7265 2073  intLabel`` are s
+00009cc0: 7461 6e64 6172 6420 5079 7468 6f6e 2066  tandard Python f
+00009cd0: 6f72 6d61 7420 7374 7269 6e67 732e 0a60  ormat strings..`
+00009ce0: 6045 6e74 7279 4c61 6265 6c60 6020 7265  `EntryLabel`` re
+00009cf0: 636f 676e 6973 6573 2074 6865 2066 6f6c  cognises the fol
+00009d00: 6c6f 7769 6e67 2072 6570 6c61 6365 6d65  lowing replaceme
+00009d10: 6e74 2066 6965 6c64 733a 0a0a 2a20 6060  nt fields:..* ``
+00009d20: 6164 6472 6573 7360 6020 2d20 7468 6520  address`` - the 
+00009d30: 6164 6472 6573 7320 6f66 2074 6865 2072  address of the r
+00009d40: 6f75 7469 6e65 206f 7220 6461 7461 2062  outine or data b
+00009d50: 6c6f 636b 2061 7320 6974 2061 7070 6561  lock as it appea
+00009d60: 7273 2069 6e20 7468 650a 2020 736b 6f6f  rs in the.  skoo
+00009d70: 6c20 6669 6c65 0a2a 2060 606c 6f63 6174  l file.* ``locat
+00009d80: 696f 6e60 6020 2d20 7468 6520 6164 6472  ion`` - the addr
+00009d90: 6573 7320 6f66 2074 6865 2072 6f75 7469  ess of the routi
+00009da0: 6e65 206f 7220 6461 7461 2062 6c6f 636b  ne or data block
+00009db0: 2061 7320 616e 2069 6e74 6567 6572 0a0a   as an integer..
+00009dc0: 6060 456e 7472 7950 6f69 6e74 4c61 6265  ``EntryPointLabe
+00009dd0: 6c60 6020 7265 636f 676e 6973 6573 2074  l`` recognises t
+00009de0: 6865 2066 6f6c 6c6f 7769 6e67 2072 6570  he following rep
+00009df0: 6c61 6365 6d65 6e74 2066 6965 6c64 733a  lacement fields:
+00009e00: 0a0a 2a20 6060 6164 6472 6573 7360 6020  ..* ``address`` 
+00009e10: 2d20 7468 6520 6164 6472 6573 7320 6f66  - the address of
+00009e20: 2074 6865 2069 6e73 7472 7563 7469 6f6e   the instruction
+00009e30: 2061 7320 6974 2061 7070 6561 7273 2069   as it appears i
+00009e40: 6e20 7468 6520 736b 6f6f 6c20 6669 6c65  n the skool file
+00009e50: 0a2a 2060 6069 6e64 6578 6060 202d 2030  .* ``index`` - 0
+00009e60: 2066 6f72 2074 6865 2066 6972 7374 2075   for the first u
+00009e70: 6e6c 6162 656c 6c65 6420 696e 7374 7275  nlabelled instru
+00009e80: 6374 696f 6e20 696e 2074 6865 2072 6f75  ction in the rou
+00009e90: 7469 6e65 206f 7220 6461 7461 0a20 2062  tine or data.  b
+00009ea0: 6c6f 636b 2c20 3120 666f 7220 7468 6520  lock, 1 for the 
+00009eb0: 7365 636f 6e64 2c20 6574 632e 0a2a 2060  second, etc..* `
+00009ec0: 606c 6f63 6174 696f 6e60 6020 2d20 7468  `location`` - th
+00009ed0: 6520 6164 6472 6573 7320 6f66 2074 6865  e address of the
+00009ee0: 2069 6e73 7472 7563 7469 6f6e 2061 7320   instruction as 
+00009ef0: 616e 2069 6e74 6567 6572 0a2a 2060 606d  an integer.* ``m
+00009f00: 6169 6e60 6020 2d20 7468 6520 6c61 6265  ain`` - the labe
+00009f10: 6c20 6f66 2074 6865 2066 6972 7374 2069  l of the first i
+00009f20: 6e73 7472 7563 7469 6f6e 2069 6e20 7468  nstruction in th
+00009f30: 6520 726f 7574 696e 6520 6f72 2064 6174  e routine or dat
+00009f40: 6120 626c 6f63 6b0a 0a43 6f6e 6669 6775  a block..Configu
+00009f50: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+00009f60: 7320 6d75 7374 2061 7070 6561 7220 696e  s must appear in
+00009f70: 2061 2060 605b 736b 6f6f 6c32 6874 6d6c   a ``[skool2html
+00009f80: 5d60 6020 7365 6374 696f 6e2e 2046 6f72  ]`` section. For
+00009f90: 0a65 7861 6d70 6c65 2c20 746f 206d 616b  .example, to mak
+00009fa0: 6520 6073 6b6f 6f6c 3268 746d 6c2e 7079  e `skool2html.py
+00009fb0: 6020 7573 6520 4153 4d20 6c61 6265 6c73  ` use ASM labels
+00009fc0: 2061 6e64 2077 7269 7465 2074 6865 2064   and write the d
+00009fd0: 6973 6173 7365 6d62 6c79 2069 6e0a 6865  isassembly in.he
+00009fe0: 7861 6465 6369 6d61 6c20 6279 2064 6566  xadecimal by def
+00009ff0: 6175 6c74 2028 7769 7468 6f75 7420 6861  ault (without ha
+0000a000: 7669 6e67 2074 6f20 7573 6520 7468 6520  ving to use the 
+0000a010: 6060 2d48 6060 2061 6e64 2060 602d 6160  ``-H`` and ``-a`
+0000a020: 6020 6f70 7469 6f6e 7320 6f6e 0a74 6865  ` options on.the
+0000a030: 2063 6f6d 6d61 6e64 206c 696e 6529 2c20   command line), 
+0000a040: 6164 6420 7468 6520 666f 6c6c 6f77 696e  add the followin
+0000a050: 6720 7365 6374 696f 6e20 746f 2060 736b  g section to `sk
+0000a060: 6f6f 6c6b 6974 2e69 6e69 603a 3a0a 0a20  oolkit.ini`::.. 
+0000a070: 205b 736b 6f6f 6c32 6874 6d6c 5d0a 2020   [skool2html].  
+0000a080: 4173 6d4c 6162 656c 733d 310a 2020 4261  AsmLabels=1.  Ba
+0000a090: 7365 3d31 360a 0a43 6f6e 6669 6775 7261  se=16..Configura
+0000a0a0: 7469 6f6e 2070 6172 616d 6574 6572 7320  tion parameters 
+0000a0b0: 6d61 7920 616c 736f 2062 6520 7365 7420  may also be set 
+0000a0c0: 6f6e 2074 6865 2063 6f6d 6d61 6e64 206c  on the command l
+0000a0d0: 696e 6520 6279 2075 7369 6e67 2074 6865  ine by using the
+0000a0e0: 0a60 602d 2d69 6e69 6060 206f 7074 696f  .``--ini`` optio
+0000a0f0: 6e2e 2050 6172 616d 6574 6572 2076 616c  n. Parameter val
+0000a100: 7565 7320 7365 7420 7468 6973 2077 6179  ues set this way
+0000a110: 2077 696c 6c20 6f76 6572 7269 6465 2061   will override a
+0000a120: 6e79 2066 6f75 6e64 2069 6e0a 6073 6b6f  ny found in.`sko
+0000a130: 6f6c 6b69 742e 696e 6960 2e0a 0a2b 2d2d  olkit.ini`...+--
+0000a140: 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d  -------+--------
+0000a150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a180: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 5665  ----------+.| Ve
+0000a190: 7273 696f 6e20 7c20 4368 616e 6765 7320  rsion | Changes 
+0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1d0: 2020 2020 2020 2020 207c 0a2b 3d3d 3d3d           |.+====
+0000a1e0: 3d3d 3d3d 3d2b 3d3d 3d3d 3d3d 3d3d 3d3d  =====+==========
+0000a1f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a200: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a210: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000a220: 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 382e 3720  ========+.| 8.7 
+0000a230: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
+0000a240: 6060 2d2d 7265 6275 696c 642d 6175 6469  ``--rebuild-audi
+0000a250: 6f60 6020 6f70 7469 6f6e 2061 6e64 2074  o`` option and t
+0000a260: 6865 2060 6052 6562 7569 6c64 4175 6469  he ``RebuildAudi
+0000a270: 6f60 6020 2020 207c 0a7c 2020 2020 2020  o``    |.|      
+0000a280: 2020 207c 2063 6f6e 6669 6775 7261 7469     | configurati
+0000a290: 6f6e 2070 6172 616d 6574 6572 2020 2020  on parameter    
+0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2c0: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000a2d0: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000a2e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a2f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a310: 2d2d 2d2d 2d2b 0a7c 2038 2e35 2020 2020  -----+.| 8.5    
+0000a320: 207c 2041 6464 6564 2074 6865 2060 6045   | Added the ``E
+0000a330: 6e74 7279 4c61 6265 6c60 6020 616e 6420  ntryLabel`` and 
+0000a340: 6060 456e 7472 7950 6f69 6e74 4c61 6265  ``EntryPointLabe
+0000a350: 6c60 6020 636f 6e66 6967 7572 6174 696f  l`` configuratio
+0000a360: 6e20 2020 7c0a 7c20 2020 2020 2020 2020  n   |.|         
+0000a370: 7c20 7061 7261 6d65 7465 7273 2020 2020  | parameters    
+0000a380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3b0: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
+0000a3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a3e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a3f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a400: 2d2d 2b0a 7c20 372e 3020 2020 2020 7c20  --+.| 7.0     | 
+0000a410: 5772 6974 6573 2061 2073 696e 676c 6520  Writes a single 
+0000a420: 6469 7361 7373 656d 626c 7920 6672 6f6d  disassembly from
+0000a430: 2074 6865 2073 6b6f 6f6c 2066 696c 6520   the skool file 
+0000a440: 6769 7665 6e20 6279 2074 6865 2020 2020  given by the    
+0000a450: 207c 0a7c 2020 2020 2020 2020 207c 2066   |.|         | f
+0000a460: 6972 7374 2070 6f73 6974 696f 6e61 6c20  irst positional 
+0000a470: 6172 6775 6d65 6e74 2020 2020 2020 2020  argument        
+0000a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4a0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000a4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a4d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a4e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+0000a4f0: 0a7c 2036 2e34 2020 2020 207c 2041 6464  .| 6.4     | Add
+0000a500: 6564 2074 6865 2060 602d 2d76 6172 6060  ed the ``--var``
+0000a510: 206f 7074 696f 6e20 2020 2020 2020 2020   option         
+0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a530: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
+0000a540: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+0000a550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+0000a590: 2036 2e32 2020 2020 207c 2041 6464 6564   6.2     | Added
+0000a5a0: 2074 6865 2060 602d 2d73 686f 772d 636f   the ``--show-co
+0000a5b0: 6e66 6967 6060 206f 7074 696f 6e20 2020  nfig`` option   
+0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5d0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000a5e0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000a5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2036  -----------+.| 6
+0000a630: 2e31 2020 2020 207c 2043 6f6e 6669 6775  .1     | Configu
+0000a640: 7261 7469 6f6e 2069 7320 7265 6164 2066  ration is read f
+0000a650: 726f 6d20 6073 6b6f 6f6c 6b69 742e 696e  rom `skoolkit.in
+0000a660: 6960 2069 6620 7072 6573 656e 743b 2061  i` if present; a
+0000a670: 6464 6564 2074 6865 2020 7c0a 7c20 2020  dded the  |.|   
+0000a680: 2020 2020 2020 7c20 6060 2d2d 696e 6960        | ``--ini`
+0000a690: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
+0000a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6c0: 2020 2020 2020 2020 207c 0a2b 2d2d 2d2d           |.+----
+0000a6d0: 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d  -----+----------
+0000a6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a710: 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 352e 3420  --------+.| 5.4 
+0000a720: 2020 2020 7c20 4164 6465 6420 7468 6520      | Added the 
+0000a730: 6060 2d2d 6173 6d2d 6f6e 652d 7061 6765  ``--asm-one-page
+0000a740: 6060 206f 7074 696f 6e20 2020 2020 2020  `` option       
+0000a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a760: 2020 2020 2020 207c 0a2b 2d2d 2d2d 2d2d         |.+------
+0000a770: 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ---+------------
+0000a780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a7a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a7b0: 2d2d 2d2d 2d2d 2b0a 7c20 352e 3020 2020  ------+.| 5.0   
+0000a7c0: 2020 7c20 5468 6520 6060 2d2d 7468 656d    | The ``--them
+0000a7d0: 6560 6020 6f70 7469 6f6e 2061 6c73 6f20  e`` option also 
+0000a7e0: 6c6f 6f6b 7320 666f 7220 6120 4353 5320  looks for a CSS 
+0000a7f0: 6669 6c65 2077 686f 7365 2062 6173 6520  file whose base 
+0000a800: 6e61 6d65 207c 0a7c 2020 2020 2020 2020  name |.|        
+0000a810: 207c 206d 6174 6368 6573 2074 6865 2074   | matches the t
+0000a820: 6865 6d65 206e 616d 6520 2020 2020 2020  heme name       
+0000a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a850: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+0000a860: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+0000a870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a8a0: 2d2d 2d2b 0a7c 2034 2e31 2020 2020 207c  ---+.| 4.1     |
+0000a8b0: 2041 6464 6564 2074 6865 2060 602d 2d73   Added the ``--s
+0000a8c0: 6561 7263 6860 6020 616e 6420 6060 2d2d  earch`` and ``--
+0000a8d0: 7772 6974 6572 6060 206f 7074 696f 6e73  writer`` options
+0000a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8f0: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+0000a900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a940: 2d2b 0a7c 2034 2e30 2020 2020 207c 2041  -+.| 4.0     | A
+0000a950: 6464 6564 2074 6865 2060 602d 2d72 6566  dded the ``--ref
+0000a960: 2d73 6563 7469 6f6e 7360 6020 616e 6420  -sections`` and 
+0000a970: 6060 2d2d 7265 662d 6669 6c65 6060 206f  ``--ref-file`` o
+0000a980: 7074 696f 6e73 2020 2020 2020 2020 2020  ptions          
+0000a990: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000a9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a9b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a9c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000a9d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+0000a9e0: 0a7c 2033 2e36 2020 2020 207c 2041 6464  .| 3.6     | Add
+0000a9f0: 6564 2074 6865 2060 602d 2d6a 6f69 6e2d  ed the ``--join-
+0000aa00: 6373 7360 6020 616e 6420 6060 2d2d 7365  css`` and ``--se
+0000aa10: 6172 6368 2d64 6972 7360 6020 6f70 7469  arch-dirs`` opti
+0000aa20: 6f6e 7320 2020 2020 2020 2020 2020 7c0a  ons           |.
+0000aa30: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
+0000aa40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aa50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aa60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aa70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c  -------------+.|
+0000aa80: 2033 2e35 2020 2020 207c 2041 6464 6564   3.5     | Added
+0000aa90: 2073 7570 706f 7274 2066 6f72 206d 756c   support for mul
+0000aaa0: 7469 706c 6520 4353 5320 7468 656d 6573  tiple CSS themes
+0000aab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aac0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000aad0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000aae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aaf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ab00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ab10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2033  -----------+.| 3
+0000ab20: 2e34 2020 2020 207c 2041 6464 6564 2074  .4     | Added t
+0000ab30: 6865 2060 602d 6160 6020 616e 6420 6060  he ``-a`` and ``
+0000ab40: 2d43 6060 206f 7074 696f 6e73 2061 6e64  -C`` options and
+0000ab50: 2074 6865 206c 6f6e 6720 6f70 7469 6f6e   the long option
+0000ab60: 7320 2020 2020 2020 2020 7c0a 2b2d 2d2d  s         |.+---
+0000ab70: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
+0000ab80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ab90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000abb0: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2033 2e33  ---------+.| 3.3
+0000abc0: 2e32 2020 207c 2041 6464 6564 2060 2450  .2   | Added `$P
+0000abd0: 4143 4b41 4745 5f44 4952 2f72 6573 6f75  ACKAGE_DIR/resou
+0000abe0: 7263 6573 6020 746f 2074 6865 2073 6561  rces` to the sea
+0000abf0: 7263 6820 7061 7468 3b20 6164 6465 6420  rch path; added 
+0000ac00: 7468 6520 2020 2020 7c0a 7c20 2020 2020  the     |.|     
+0000ac10: 2020 2020 7c20 6060 2d70 6060 2061 6e64      | ``-p`` and
+0000ac20: 2060 602d 5460 6020 6f70 7469 6f6e 7320   ``-T`` options 
+0000ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac50: 2020 2020 2020 207c 0a2b 2d2d 2d2d 2d2d         |.+------
+0000ac60: 2d2d 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ---+------------
+0000ac70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ac80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ac90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aca0: 2d2d 2d2d 2d2d 2b0a 7c20 332e 3220 2020  ------+.| 3.2   
+0000acb0: 2020 7c20 4164 6465 6420 607e 2f2e 736b    | Added `~/.sk
+0000acc0: 6f6f 6c6b 6974 6020 746f 2074 6865 2073  oolkit` to the s
+0000acd0: 6561 7263 6820 7061 7468 2020 2020 2020  earch path      
+0000ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000acf0: 2020 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d       |.+--------
+0000ad00: 2d2b 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  -+--------------
+0000ad10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ad20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ad30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ad40: 2d2d 2d2d 2b0a 7c20 332e 3120 2020 2020  ----+.| 3.1     
+0000ad50: 7c20 4164 6465 6420 7468 6520 6060 2d63  | Added the ``-c
+0000ad60: 6060 206f 7074 696f 6e20 2020 2020 2020  `` option       
+0000ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad90: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
+0000ada0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000adb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000adc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000add0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ade0: 2d2d 2b0a 7c20 332e 302e 3220 2020 7c20  --+.| 3.0.2   | 
+0000adf0: 4e6f 206c 6f6e 6765 7220 7368 6f77 7320  No longer shows 
+0000ae00: 7469 6d69 6e67 7320 6279 2064 6566 6175  timings by defau
+0000ae10: 6c74 3b20 6164 6465 6420 7468 6520 6060  lt; added the ``
+0000ae20: 2d74 6060 206f 7074 696f 6e20 2020 2020  -t`` option     
+0000ae30: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+0000ae40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ae50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ae60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ae70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ae80: 2b0a 7c20 322e 332e 3120 2020 7c20 4164  +.| 2.3.1   | Ad
+0000ae90: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+0000aea0: 7265 6164 696e 6720 6d75 6c74 6970 6c65  reading multiple
+0000aeb0: 2072 6566 2066 696c 6573 2070 6572 2064   ref files per d
+0000aec0: 6973 6173 7365 6d62 6c79 2020 2020 207c  isassembly     |
+0000aed0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+0000aee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000aef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000af00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000af10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
+0000af20: 7c20 322e 322e 3220 2020 7c20 4164 6465  | 2.2.2   | Adde
+0000af30: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
+0000af40: 2072 6561 6420 6120 736b 6f6f 6c20 6669   read a skool fi
+0000af50: 6c65 2066 726f 6d20 7374 616e 6461 7264  le from standard
+0000af60: 2069 6e70 7574 2020 2020 2020 207c 0a2b   input       |.+
+0000af70: 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d 2d2d  ---------+------
 0000af80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000af90: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 5665  ----------+.| Ve
-0000afa0: 7273 696f 6e20 7c20 4368 616e 6765 7320  rsion | Changes 
-0000afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afe0: 2020 2020 2020 2020 2020 7c0a 2b3d 3d3d            |.+===
-0000aff0: 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d 3d3d  ======+=========
-0000b000: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b010: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b020: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000b030: 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 372e  ==========+.| 7.
-0000b040: 3220 2020 2020 7c20 4164 6465 6420 7468  2     | Added th
-0000b050: 6520 6060 4469 6374 696f 6e61 7279 6060  e ``Dictionary``
-0000b060: 2063 6f6e 6669 6775 7261 7469 6f6e 2070   configuration p
-0000b070: 6172 616d 6574 6572 2020 2020 2020 2020  arameter        
-0000b080: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-0000b090: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-0000b0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b0b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b0c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b0d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 372e  ----------+.| 7.
-0000b0e0: 3120 2020 2020 7c20 436f 6e66 6967 7572  1     | Configur
-0000b0f0: 6174 696f 6e20 6973 2072 6561 6420 6672  ation is read fr
-0000b100: 6f6d 2060 736b 6f6f 6c6b 6974 2e69 6e69  om `skoolkit.ini
-0000b110: 6020 6966 2070 7265 7365 6e74 3b20 6164  ` if present; ad
-0000b120: 6465 6420 7468 6520 2020 7c0a 7c20 2020  ded the   |.|   
-0000b130: 2020 2020 2020 7c20 6060 2d2d 696e 6960        | ``--ini`
-0000b140: 6020 616e 6420 6060 2d2d 7368 6f77 2d63  ` and ``--show-c
-0000b150: 6f6e 6669 6760 6020 6f70 7469 6f6e 7320  onfig`` options 
-0000b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b170: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-0000b180: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-0000b190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000af90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000afa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000afb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+0000afc0: 322e 3220 2020 2020 7c20 4e6f 206c 6f6e  2.2     | No lon
+0000afd0: 6765 7220 7772 6974 6573 2074 6865 2053  ger writes the S
+0000afe0: 6b6f 6f6c 2044 617a 6520 616e 6420 4261  kool Daze and Ba
+0000aff0: 636b 2074 6f20 536b 6f6f 6c20 6469 7361  ck to Skool disa
+0000b000: 7373 656d 626c 6965 7320 207c 0a7c 2020  ssemblies  |.|  
+0000b010: 2020 2020 2020 207c 2062 7920 6465 6661         | by defa
+0000b020: 756c 743b 2061 6464 6564 2074 6865 2060  ult; added the `
+0000b030: 602d 6460 6020 6f70 7469 6f6e 2020 2020  `-d`` option    
+0000b040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b050: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
+0000b060: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
+0000b070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b0a0: 2d2d 2d2d 2d2d 2d2d 2d2b 0a7c 2032 2e31  ---------+.| 2.1
+0000b0b0: 2e31 2020 207c 2041 6464 6564 2074 6865  .1   | Added the
+0000b0c0: 2060 602d 6c60 602c 2060 602d 7560 602c   ``-l``, ``-u``,
+0000b0d0: 2060 602d 4460 6020 616e 6420 6060 2d48   ``-D`` and ``-H
+0000b0e0: 6060 206f 7074 696f 6e73 2020 2020 2020  `` options      
+0000b0f0: 2020 2020 2020 2020 7c0a 2b2d 2d2d 2d2d          |.+-----
+0000b100: 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----+-----------
+0000b110: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b120: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b140: 2d2d 2d2d 2d2d 2d2b 0a7c 2032 2e31 2020  -------+.| 2.1  
+0000b150: 2020 207c 2041 6464 6564 2074 6865 2060     | Added the `
+0000b160: 602d 6f60 6020 616e 6420 6060 2d50 6060  `-o`` and ``-P``
+0000b170: 206f 7074 696f 6e73 2020 2020 2020 2020   options        
+0000b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b190: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000b1a0: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
 0000b1b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b1c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 372e  ----------+.| 7.
-0000b1d0: 3020 2020 2020 7c20 4e65 7720 2020 2020  0     | New     
-0000b1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b210: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-0000b220: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-0000b230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b1c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b1d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b1e0: 2d2d 2d2d 2d2b 0a7c 2031 2e34 2020 2020  -----+.| 1.4    
+0000b1f0: 207c 2041 6464 6564 2074 6865 2060 602d   | Added the ``-
+0000b200: 5660 6020 6f70 7469 6f6e 2020 2020 2020  V`` option      
+0000b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b230: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+0000b240: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
 0000b250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000b260: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e 2e20  ----------+.... 
-0000b270: 5f73 6e61 3269 6d67 2e70 793a 0a0a 736e  _sna2img.py:..sn
-0000b280: 6132 696d 672e 7079 0a2d 2d2d 2d2d 2d2d  a2img.py.-------
-0000b290: 2d2d 2d0a 6073 6e61 3269 6d67 2e70 7960  ---.`sna2img.py`
-0000b2a0: 2063 6f6e 7665 7274 7320 7468 6520 7363   converts the sc
-0000b2b0: 7265 656e 7368 6f74 206f 7220 6f74 6865  reenshot or othe
-0000b2c0: 7220 6772 6170 6869 6320 6461 7461 2069  r graphic data i
-0000b2d0: 6e20 6120 6269 6e61 7279 2028 7261 770a  n a binary (raw.
-0000b2e0: 6d65 6d6f 7279 2920 6669 6c65 2c20 5343  memory) file, SC
-0000b2f0: 5220 6669 6c65 2c20 736b 6f6f 6c20 6669  R file, skool fi
-0000b300: 6c65 2c20 6f72 2053 4e41 2f53 5a58 2f5a  le, or SNA/SZX/Z
-0000b310: 3830 2073 6e61 7073 686f 7420 696e 746f  80 snapshot into
-0000b320: 2061 2050 4e47 2066 696c 652e 0a46 6f72   a PNG file..For
-0000b330: 2065 7861 6d70 6c65 3a3a 0a0a 2020 2420   example::..  $ 
-0000b340: 736e 6132 696d 672e 7079 2067 616d 652e  sna2img.py game.
-0000b350: 7363 720a 0a77 696c 6c20 6372 6561 7465  scr..will create
-0000b360: 2061 2066 696c 6520 6e61 6d65 6420 6067   a file named `g
-0000b370: 616d 652e 706e 6760 2e0a 0a54 6f20 6c69  ame.png`...To li
-0000b380: 7374 2074 6865 206f 7074 696f 6e73 2073  st the options s
-0000b390: 7570 706f 7274 6564 2062 7920 6073 6e61  upported by `sna
-0000b3a0: 3269 6d67 2e70 7960 2c20 7275 6e20 6974  2img.py`, run it
-0000b3b0: 2077 6974 6820 6e6f 2061 7267 756d 656e   with no argumen
-0000b3c0: 7473 3a3a 0a0a 2020 7573 6167 653a 2073  ts::..  usage: s
-0000b3d0: 6e61 3269 6d67 2e70 7920 5b6f 7074 696f  na2img.py [optio
-0000b3e0: 6e73 5d20 494e 5055 5420 5b4f 5554 5055  ns] INPUT [OUTPU
-0000b3f0: 545d 0a0a 2020 436f 6e76 6572 7420 6120  T]..  Convert a 
-0000b400: 5370 6563 7472 756d 2073 6372 6565 6e73  Spectrum screens
-0000b410: 686f 7420 6f72 206f 7468 6572 2067 7261  hot or other gra
-0000b420: 7068 6963 2064 6174 6120 696e 746f 2061  phic data into a
-0000b430: 2050 4e47 2066 696c 652e 2049 4e50 5554   PNG file. INPUT
-0000b440: 206d 6179 0a20 2062 6520 6120 6269 6e61   may.  be a bina
-0000b450: 7279 2028 7261 7720 6d65 6d6f 7279 2920  ry (raw memory) 
-0000b460: 6669 6c65 2c20 6120 5343 5220 6669 6c65  file, a SCR file
-0000b470: 2c20 6120 736b 6f6f 6c20 6669 6c65 2c20  , a skool file, 
-0000b480: 6f72 2061 2053 4e41 2c20 535a 5820 6f72  or a SNA, SZX or
-0000b490: 205a 3830 0a20 2073 6e61 7073 686f 742e   Z80.  snapshot.
-0000b4a0: 0a0a 2020 4f70 7469 6f6e 733a 0a20 2020  ..  Options:.   
-0000b4b0: 202d 622c 202d 2d62 6669 7820 2020 2020   -b, --bfix     
-0000b4c0: 2020 2020 2020 2050 6172 7365 2061 2073         Parse a s
-0000b4d0: 6b6f 6f6c 2066 696c 6520 696e 2040 6266  kool file in @bf
-0000b4e0: 6978 206d 6f64 652e 0a20 2020 202d 422c  ix mode..    -B,
-0000b4f0: 202d 2d62 696e 6172 7920 2020 2020 2020   --binary       
-0000b500: 2020 2052 6561 6420 7468 6520 696e 7075     Read the inpu
-0000b510: 7420 6173 2061 2062 696e 6172 7920 2872  t as a binary (r
-0000b520: 6177 206d 656d 6f72 7929 2066 696c 652e  aw memory) file.
-0000b530: 0a20 2020 202d 6520 4d41 4352 4f2c 202d  .    -e MACRO, -
-0000b540: 2d65 7870 616e 6420 4d41 4352 4f0a 2020  -expand MACRO.  
-0000b550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b560: 2020 2020 2020 2020 4578 7061 6e64 2061          Expand a
-0000b570: 2023 464f 4e54 2c20 2353 4352 2c20 2355   #FONT, #SCR, #U
-0000b580: 4447 206f 7220 2355 4447 4152 5241 5920  DG or #UDGARRAY 
-0000b590: 6d61 6372 6f2e 2054 6865 2027 2327 0a20  macro. The '#'. 
-0000b5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b5b0: 2020 2020 2020 2020 2070 7265 6669 7820           prefix 
-0000b5c0: 6d61 7920 6265 206f 6d69 7474 6564 2e0a  may be omitted..
-0000b5d0: 2020 2020 2d66 204e 2c20 2d2d 666c 6970      -f N, --flip
-0000b5e0: 204e 2020 2020 2020 2020 466c 6970 2074   N        Flip t
-0000b5f0: 6865 2069 6d61 6765 2068 6f72 697a 6f6e  he image horizon
-0000b600: 7461 6c6c 7920 284e 3d31 292c 2076 6572  tally (N=1), ver
-0000b610: 7469 6361 6c6c 7920 284e 3d32 292c 0a20  tically (N=2),. 
-0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b630: 2020 2020 2020 2020 206f 7220 626f 7468           or both
-0000b640: 2028 4e3d 3329 2e0a 2020 2020 2d69 2c20   (N=3)..    -i, 
-0000b650: 2d2d 696e 7665 7274 2020 2020 2020 2020  --invert        
-0000b660: 2020 496e 7665 7274 2076 6964 656f 2066    Invert video f
-0000b670: 6f72 2063 656c 6c73 2074 6861 7420 6172  or cells that ar
-0000b680: 6520 666c 6173 6869 6e67 2e0a 2020 2020  e flashing..    
-0000b690: 2d6d 2073 7263 2c73 697a 652c 6465 7374  -m src,size,dest
-0000b6a0: 2c20 2d2d 6d6f 7665 2073 7263 2c73 697a  , --move src,siz
-0000b6b0: 652c 6465 7374 0a20 2020 2020 2020 2020  e,dest.         
+0000b260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000b280: 2d2d 2d2b 0a0a 2e2e 205f 736e 6132 6374  ---+.... _sna2ct
+0000b290: 6c2e 7079 3a0a 0a73 6e61 3263 746c 2e70  l.py:..sna2ctl.p
+0000b2a0: 790a 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 736e  y.----------.`sn
+0000b2b0: 6132 6374 6c2e 7079 6020 6765 6e65 7261  a2ctl.py` genera
+0000b2c0: 7465 7320 6120 636f 6e74 726f 6c20 6669  tes a control fi
+0000b2d0: 6c65 2066 6f72 2061 2062 696e 6172 7920  le for a binary 
+0000b2e0: 2872 6177 206d 656d 6f72 7929 2066 696c  (raw memory) fil
+0000b2f0: 6520 6f72 2061 2053 4e41 2c0a 535a 5820  e or a SNA,.SZX 
+0000b300: 6f72 205a 3830 2073 6e61 7073 686f 742e  or Z80 snapshot.
+0000b310: 2046 6f72 2065 7861 6d70 6c65 3a3a 0a0a   For example::..
+0000b320: 2020 2420 736e 6132 6374 6c2e 7079 2067    $ sna2ctl.py g
+0000b330: 616d 652e 7a38 3020 3e20 6761 6d65 2e63  ame.z80 > game.c
+0000b340: 746c 0a0a 4e6f 7720 6067 616d 652e 6374  tl..Now `game.ct
+0000b350: 6c60 2063 616e 2062 6520 7573 6564 2062  l` can be used b
+0000b360: 7920 3a72 6566 3a60 736e 6132 736b 6f6f  y :ref:`sna2skoo
+0000b370: 6c2e 7079 6020 746f 2063 6f6e 7665 7274  l.py` to convert
+0000b380: 2060 6761 6d65 2e7a 3830 6020 696e 746f   `game.z80` into
+0000b390: 2061 0a73 6b6f 6f6c 2066 696c 6520 7370   a.skool file sp
+0000b3a0: 6c69 7420 696e 746f 2062 6c6f 636b 7320  lit into blocks 
+0000b3b0: 6f66 2063 6f64 6520 616e 6420 6461 7461  of code and data
+0000b3c0: 2e0a 0a60 736e 6132 6374 6c2e 7079 6020  ...`sna2ctl.py` 
+0000b3d0: 7375 7070 6f72 7473 2073 6576 6572 616c  supports several
+0000b3e0: 206f 7074 696f 6e73 3b20 7275 6e20 6974   options; run it
+0000b3f0: 2077 6974 6820 6e6f 2061 7267 756d 656e   with no argumen
+0000b400: 7473 2074 6f20 7365 6520 6120 6c69 7374  ts to see a list
+0000b410: 3a3a 0a0a 2020 7573 6167 653a 2073 6e61  ::..  usage: sna
+0000b420: 3263 746c 2e70 7920 5b6f 7074 696f 6e73  2ctl.py [options
+0000b430: 5d20 4649 4c45 0a0a 2020 4765 6e65 7261  ] FILE..  Genera
+0000b440: 7465 2061 2063 6f6e 7472 6f6c 2066 696c  te a control fil
+0000b450: 6520 666f 7220 6120 6269 6e61 7279 2028  e for a binary (
+0000b460: 7261 7720 6d65 6d6f 7279 2920 6669 6c65  raw memory) file
+0000b470: 206f 7220 6120 534e 412c 2053 5a58 206f   or a SNA, SZX o
+0000b480: 7220 5a38 300a 2020 736e 6170 7368 6f74  r Z80.  snapshot
+0000b490: 2e20 4649 4c45 206d 6179 2062 6520 6120  . FILE may be a 
+0000b4a0: 7265 6775 6c61 7220 6669 6c65 2c20 6f72  regular file, or
+0000b4b0: 2027 2d27 2066 6f72 2073 7461 6e64 6172   '-' for standar
+0000b4c0: 6420 696e 7075 742e 0a0a 2020 4f70 7469  d input...  Opti
+0000b4d0: 6f6e 733a 0a20 2020 202d 6520 4144 4452  ons:.    -e ADDR
+0000b4e0: 2c20 2d2d 656e 6420 4144 4452 2020 2053  , --end ADDR   S
+0000b4f0: 746f 7020 6174 2074 6869 7320 6164 6472  top at this addr
+0000b500: 6573 7320 2864 6566 6175 6c74 3d36 3535  ess (default=655
+0000b510: 3336 292e 0a20 2020 202d 682c 202d 2d68  36)..    -h, --h
+0000b520: 6578 2020 2020 2020 2020 2020 2020 2057  ex             W
+0000b530: 7269 7465 2075 7070 6572 2063 6173 6520  rite upper case 
+0000b540: 6865 7861 6465 6369 6d61 6c20 6164 6472  hexadecimal addr
+0000b550: 6573 7365 732e 0a20 2020 202d 4920 703d  esses..    -I p=
+0000b560: 762c 202d 2d69 6e69 2070 3d76 2020 2020  v, --ini p=v    
+0000b570: 2053 6574 2074 6865 2076 616c 7565 206f   Set the value o
+0000b580: 6620 7468 6520 636f 6e66 6967 7572 6174  f the configurat
+0000b590: 696f 6e20 7061 7261 6d65 7465 7220 2770  ion parameter 'p
+0000b5a0: 2720 746f 0a20 2020 2020 2020 2020 2020  ' to.           
+0000b5b0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000b5c0: 7627 2e20 5468 6973 206f 7074 696f 6e20  v'. This option 
+0000b5d0: 6d61 7920 6265 2075 7365 6420 6d75 6c74  may be used mult
+0000b5e0: 6970 6c65 2074 696d 6573 2e0a 2020 2020  iple times..    
+0000b5f0: 2d6c 2c20 2d2d 6865 782d 6c6f 7765 7220  -l, --hex-lower 
+0000b600: 2020 2020 2020 5772 6974 6520 6c6f 7765        Write lowe
+0000b610: 7220 6361 7365 2068 6578 6164 6563 696d  r case hexadecim
+0000b620: 616c 2061 6464 7265 7373 6573 2e0a 2020  al addresses..  
+0000b630: 2020 2d6d 2046 494c 452c 202d 2d6d 6170    -m FILE, --map
+0000b640: 2046 494c 4520 2020 5573 6520 4649 4c45   FILE   Use FILE
+0000b650: 2061 7320 6120 636f 6465 2065 7865 6375   as a code execu
+0000b660: 7469 6f6e 206d 6170 2e0a 2020 2020 2d6f  tion map..    -o
+0000b670: 2041 4444 522c 202d 2d6f 7267 2041 4444   ADDR, --org ADD
+0000b680: 5220 2020 5370 6563 6966 7920 7468 6520  R   Specify the 
+0000b690: 6f72 6967 696e 2061 6464 7265 7373 206f  origin address o
+0000b6a0: 6620 6120 6269 6e61 7279 2066 696c 6520  f a binary file 
+0000b6b0: 2864 6566 6175 6c74 3a0a 2020 2020 2020  (default:.      
 0000b6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6d0: 204d 6f76 6520 6120 626c 6f63 6b20 6f66   Move a block of
-0000b6e0: 2062 7974 6573 206f 6620 7468 6520 6769   bytes of the gi
-0000b6f0: 7665 6e20 7369 7a65 2066 726f 6d20 7372  ven size from sr
-0000b700: 6320 746f 0a20 2020 2020 2020 2020 2020  c to.           
-0000b710: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0000b720: 6573 742e 2054 6869 7320 6f70 7469 6f6e  est. This option
-0000b730: 206d 6179 2062 6520 7573 6564 206d 756c   may be used mul
-0000b740: 7469 706c 6520 7469 6d65 732e 0a20 2020  tiple times..   
-0000b750: 202d 6e2c 202d 2d6e 6f2d 616e 696d 6174   -n, --no-animat
-0000b760: 696f 6e20 2020 2044 6f20 6e6f 7420 616e  ion    Do not an
-0000b770: 696d 6174 6520 666c 6173 6869 6e67 2063  imate flashing c
-0000b780: 656c 6c73 2e0a 2020 2020 2d6f 2058 2c59  ells..    -o X,Y
-0000b790: 2c20 2d2d 6f72 6967 696e 2058 2c59 2020  , --origin X,Y  
-0000b7a0: 546f 702d 6c65 6674 2063 726f 7020 6174  Top-left crop at
-0000b7b0: 2028 582c 5929 2e0a 2020 2020 2d4f 204f   (X,Y)..    -O O
-0000b7c0: 5247 2c20 2d2d 6f72 6720 4f52 4720 2020  RG, --org ORG   
-0000b7d0: 2020 5365 7420 7468 6520 6f72 6967 696e    Set the origin
-0000b7e0: 2061 6464 7265 7373 206f 6620 6120 6269   address of a bi
-0000b7f0: 6e61 7279 2066 696c 6520 2864 6566 6175  nary file (defau
-0000b800: 6c74 3a0a 2020 2020 2020 2020 2020 2020  lt:.            
-0000b810: 2020 2020 2020 2020 2020 2020 2020 3635                65
-0000b820: 3533 3620 6d69 6e75 7320 7468 6520 6c65  536 minus the le
-0000b830: 6e67 7468 206f 6620 7468 6520 6669 6c65  ngth of the file
-0000b840: 292e 0a20 2020 202d 7020 615b 2d62 5b2d  )..    -p a[-b[-
-0000b850: 635d 5d2c 5b5e 2b5d 762c 202d 2d70 6f6b  c]],[^+]v, --pok
-0000b860: 6520 615b 2d62 5b2d 635d 5d2c 5b5e 2b5d  e a[-b[-c]],[^+]
-0000b870: 760a 2020 2020 2020 2020 2020 2020 2020  v.              
-0000b880: 2020 2020 2020 2020 2020 2020 504f 4b45              POKE
-0000b890: 204e 2c76 2066 6f72 204e 2069 6e20 7b61   N,v for N in {a
-0000b8a0: 2c20 612b 632c 2061 2b32 632e 2e2e 2c20  , a+c, a+2c..., 
-0000b8b0: 627d 2e20 5072 6566 6978 2027 7627 0a20  b}. Prefix 'v'. 
-0000b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8d0: 2020 2020 2020 2020 2077 6974 6820 275e           with '^
-0000b8e0: 2720 746f 2070 6572 666f 726d 2061 6e20  ' to perform an 
-0000b8f0: 584f 5220 6f70 6572 6174 696f 6e2c 206f  XOR operation, o
-0000b900: 7220 272b 2720 746f 0a20 2020 2020 2020  r '+' to.       
-0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b920: 2020 2070 6572 666f 726d 2061 6e20 4144     perform an AD
-0000b930: 4420 6f70 6572 6174 696f 6e2e 2054 6869  D operation. Thi
-0000b940: 7320 6f70 7469 6f6e 206d 6179 2062 6520  s option may be 
-0000b950: 7573 6564 0a20 2020 2020 2020 2020 2020  used.           
-0000b960: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000b970: 756c 7469 706c 6520 7469 6d65 732e 0a20  ultiple times.. 
-0000b980: 2020 202d 7220 4e2c 202d 2d72 6f74 6174     -r N, --rotat
-0000b990: 6520 4e20 2020 2020 2052 6f74 6174 6520  e N      Rotate 
-0000b9a0: 7468 6520 696d 6167 6520 3930 2a4e 2064  the image 90*N d
-0000b9b0: 6567 7265 6573 2063 6c6f 636b 7769 7365  egrees clockwise
-0000b9c0: 2e0a 2020 2020 2d73 2053 4341 4c45 2c20  ..    -s SCALE, 
-0000b9d0: 2d2d 7363 616c 6520 5343 414c 450a 2020  --scale SCALE.  
-0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9f0: 2020 2020 2020 2020 5365 7420 7468 6520          Set the 
-0000ba00: 7363 616c 6520 6f66 2074 6865 2069 6d61  scale of the ima
-0000ba10: 6765 2028 6465 6661 756c 743d 3129 2e0a  ge (default=1)..
-0000ba20: 2020 2020 2d53 2057 7848 2c20 2d2d 7369      -S WxH, --si
-0000ba30: 7a65 2057 7848 2020 2020 4372 6f70 2074  ze WxH    Crop t
-0000ba40: 6f20 7468 6973 2077 6964 7468 2061 6e64  o this width and
-0000ba50: 2068 6569 6768 7420 2869 6e20 7469 6c65   height (in tile
-0000ba60: 7329 2e0a 2020 2020 2d56 2c20 2d2d 7665  s)..    -V, --ve
-0000ba70: 7273 696f 6e20 2020 2020 2020 2020 5368  rsion         Sh
-0000ba80: 6f77 2053 6b6f 6f6c 4b69 7420 7665 7273  ow SkoolKit vers
-0000ba90: 696f 6e20 6e75 6d62 6572 2061 6e64 2065  ion number and e
-0000baa0: 7869 742e 0a0a 2b2d 2d2d 2d2d 2d2d 2d2d  xit...+---------
-0000bab0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-0000bac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000baf0: 2d2d 2d2d 2b0a 7c20 5665 7273 696f 6e20  ----+.| Version 
-0000bb00: 7c20 4368 616e 6765 7320 2020 2020 2020  | Changes       
-0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb40: 2020 2020 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d      |.+=========
-0000bb50: 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  +===============
-0000bb60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000bb70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000bb80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000bb90: 3d3d 3d3d 2b0a 7c20 362e 3220 2020 2020  ====+.| 6.2     
-0000bba0: 7c20 4164 6465 6420 7468 6520 6060 2d2d  | Added the ``--
-0000bbb0: 6269 6e61 7279 6060 2061 6e64 2060 602d  binary`` and ``-
-0000bbc0: 2d6f 7267 6060 206f 7074 696f 6e73 2061  -org`` options a
-0000bbd0: 6e64 2074 6865 2061 6269 6c69 7479 2074  nd the ability t
-0000bbe0: 6f20 2020 7c0a 7c20 2020 2020 2020 2020  o   |.|         
-0000bbf0: 7c20 7265 6164 2062 696e 6172 7920 2872  | read binary (r
-0000bc00: 6177 206d 656d 6f72 7929 2066 696c 6573  aw memory) files
-0000bc10: 3b20 7468 6520 6060 2d2d 6d6f 7665 6060  ; the ``--move``
-0000bc20: 2061 6e64 2060 602d 2d70 6f6b 6560 6020   and ``--poke`` 
-0000bc30: 2020 2020 7c0a 7c20 2020 2020 2020 2020      |.|         
-0000bc40: 7c20 6f70 7469 6f6e 7320 6163 6365 7074  | options accept
-0000bc50: 2068 6578 6164 6563 696d 616c 2069 6e74   hexadecimal int
-0000bc60: 6567 6572 7320 7072 6566 6978 6564 2062  egers prefixed b
-0000bc70: 7920 2730 7827 2020 2020 2020 2020 2020  y '0x'          
-0000bc80: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
-0000bc90: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-0000bca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bcd0: 2d2d 2d2d 2b0a 7c20 362e 3120 2020 2020  ----+.| 6.1     
-0000bce0: 7c20 4164 6465 6420 7468 6520 6162 696c  | Added the abil
-0000bcf0: 6974 7920 746f 2072 6561 6420 736b 6f6f  ity to read skoo
-0000bd00: 6c20 6669 6c65 733b 2061 6464 6564 2074  l files; added t
-0000bd10: 6865 2060 602d 2d62 6669 7860 6020 616e  he ``--bfix`` an
-0000bd20: 6420 2020 7c0a 7c20 2020 2020 2020 2020  d   |.|         
-0000bd30: 7c20 6060 2d2d 6d6f 7665 6060 206f 7074  | ``--move`` opt
-0000bd40: 696f 6e73 2020 2020 2020 2020 2020 2020  ions            
-0000bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bd70: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
-0000bd80: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-0000bd90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bda0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bdb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bdc0: 2d2d 2d2d 2b0a 7c20 362e 3020 2020 2020  ----+.| 6.0     
-0000bdd0: 7c20 4164 6465 6420 7468 6520 6060 2d2d  | Added the ``--
-0000bde0: 6578 7061 6e64 6060 206f 7074 696f 6e20  expand`` option 
-0000bdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be10: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
-0000be20: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-0000be30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000be40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000be50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000be60: 2d2d 2d2d 2b0a 7c20 352e 3420 2020 2020  ----+.| 5.4     
-0000be70: 7c20 4e65 7720 2020 2020 2020 2020 2020  | New           
-0000be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000beb0: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
-0000bec0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
-0000bed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000bf00: 2d2d 2d2d 2b0a 0a2e 2e20 5f73 6e61 3273  ----+.... _sna2s
-0000bf10: 6b6f 6f6c 2e70 793a 0a0a 736e 6132 736b  kool.py:..sna2sk
-0000bf20: 6f6f 6c2e 7079 0a2d 2d2d 2d2d 2d2d 2d2d  ool.py.---------
-0000bf30: 2d2d 2d0a 6073 6e61 3273 6b6f 6f6c 2e70  ---.`sna2skool.p
-0000bf40: 7960 2063 6f6e 7665 7274 7320 6120 6269  y` converts a bi
-0000bf50: 6e61 7279 2028 7261 7720 6d65 6d6f 7279  nary (raw memory
-0000bf60: 2920 6669 6c65 206f 7220 6120 534e 412c  ) file or a SNA,
-0000bf70: 2053 5a58 206f 7220 5a38 300a 736e 6170   SZX or Z80.snap
-0000bf80: 7368 6f74 2069 6e74 6f20 6120 736b 6f6f  shot into a skoo
-0000bf90: 6c20 6669 6c65 2e20 466f 7220 6578 616d  l file. For exam
-0000bfa0: 706c 653a 3a0a 0a20 2024 2073 6e61 3273  ple::..  $ sna2s
-0000bfb0: 6b6f 6f6c 2e70 7920 6761 6d65 2e7a 3830  kool.py game.z80
-0000bfc0: 203e 2067 616d 652e 736b 6f6f 6c0a 0a4e   > game.skool..N
-0000bfd0: 6f77 2060 6761 6d65 2e73 6b6f 6f6c 6020  ow `game.skool` 
-0000bfe0: 6361 6e20 6265 2063 6f6e 7665 7274 6564  can be converted
-0000bff0: 2069 6e74 6f20 6120 6272 6f77 7361 626c   into a browsabl
-0000c000: 6520 4854 4d4c 2064 6973 6173 7365 6d62  e HTML disassemb
-0000c010: 6c79 2075 7369 6e67 0a3a 7265 663a 6073  ly using.:ref:`s
-0000c020: 6b6f 6f6c 3268 746d 6c2e 7079 203c 736b  kool2html.py <sk
-0000c030: 6f6f 6c32 6874 6d6c 2e70 793e 602c 206f  ool2html.py>`, o
-0000c040: 7220 696e 746f 2061 6e20 6173 7365 6d62  r into an assemb
-0000c050: 6c65 722d 7265 6164 7920 4153 4d20 6669  ler-ready ASM fi
-0000c060: 6c65 2075 7369 6e67 0a3a 7265 663a 6073  le using.:ref:`s
-0000c070: 6b6f 6f6c 3261 736d 2e70 7920 3c73 6b6f  kool2asm.py <sko
-0000c080: 6f6c 3261 736d 2e70 793e 602e 0a0a 6073  ol2asm.py>`...`s
-0000c090: 6e61 3273 6b6f 6f6c 2e70 7960 2073 7570  na2skool.py` sup
-0000c0a0: 706f 7274 7320 7365 7665 7261 6c20 6f70  ports several op
-0000c0b0: 7469 6f6e 733b 2072 756e 2069 7420 7769  tions; run it wi
-0000c0c0: 7468 206e 6f20 6172 6775 6d65 6e74 7320  th no arguments 
-0000c0d0: 746f 2073 6565 2061 0a6c 6973 743a 3a0a  to see a.list::.
-0000c0e0: 0a20 2075 7361 6765 3a20 736e 6132 736b  .  usage: sna2sk
-0000c0f0: 6f6f 6c2e 7079 205b 6f70 7469 6f6e 735d  ool.py [options]
-0000c100: 2046 494c 450a 0a20 2043 6f6e 7665 7274   FILE..  Convert
-0000c110: 2061 2062 696e 6172 7920 2872 6177 206d   a binary (raw m
-0000c120: 656d 6f72 7929 2066 696c 6520 6f72 2061  emory) file or a
-0000c130: 2053 4e41 2c20 535a 5820 6f72 205a 3830   SNA, SZX or Z80
-0000c140: 2073 6e61 7073 686f 7420 696e 746f 2061   snapshot into a
-0000c150: 2073 6b6f 6f6c 0a20 2066 696c 652e 2046   skool.  file. F
-0000c160: 494c 4520 6d61 7920 6265 2061 2072 6567  ILE may be a reg
-0000c170: 756c 6172 2066 696c 652c 206f 7220 272d  ular file, or '-
-0000c180: 2720 666f 7220 7374 616e 6461 7264 2069  ' for standard i
-0000c190: 6e70 7574 2e0a 0a20 204f 7074 696f 6e73  nput...  Options
-0000c1a0: 3a0a 2020 2020 2d63 2050 4154 482c 202d  :.    -c PATH, -
-0000c1b0: 2d63 746c 2050 4154 4820 2020 5370 6563  -ctl PATH   Spec
-0000c1c0: 6966 7920 6120 636f 6e74 726f 6c20 6669  ify a control fi
-0000c1d0: 6c65 2074 6f20 7573 652c 206f 7220 6120  le to use, or a 
-0000c1e0: 6469 7265 6374 6f72 7920 6672 6f6d 0a20  directory from. 
-0000c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c200: 2020 2020 2020 2020 2077 6869 6368 2074           which t
-0000c210: 6f20 7265 6164 2063 6f6e 7472 6f6c 2066  o read control f
-0000c220: 696c 6573 2e20 5041 5448 206d 6179 2062  iles. PATH may b
-0000c230: 6520 272d 2720 666f 720a 2020 2020 2020  e '-' for.      
-0000c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c250: 2020 2020 7374 616e 6461 7264 2069 6e70      standard inp
-0000c260: 7574 2c20 6f72 2027 3027 2074 6f20 7573  ut, or '0' to us
-0000c270: 6520 6e6f 2063 6f6e 7472 6f6c 2066 696c  e no control fil
-0000c280: 652e 2054 6869 730a 2020 2020 2020 2020  e. This.        
-0000c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c2a0: 2020 6f70 7469 6f6e 206d 6179 2062 6520    option may be 
-0000c2b0: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
-0000c2c0: 6d65 732e 0a20 2020 202d 6420 5349 5a45  mes..    -d SIZE
-0000c2d0: 2c20 2d2d 6465 6662 2053 495a 4520 2044  , --defb SIZE  D
-0000c2e0: 6973 6173 7365 6d62 6c65 2061 7320 4445  isassemble as DE
-0000c2f0: 4642 2073 7461 7465 6d65 6e74 7320 6f66  FB statements of
-0000c300: 2074 6869 7320 7369 7a65 2e0a 2020 2020   this size..    
-0000c310: 2d65 2041 4444 522c 202d 2d65 6e64 2041  -e ADDR, --end A
-0000c320: 4444 5220 2020 5374 6f70 2064 6973 6173  DDR   Stop disas
-0000c330: 7365 6d62 6c69 6e67 2061 7420 7468 6973  sembling at this
-0000c340: 2061 6464 7265 7373 2028 6465 6661 756c   address (defaul
-0000c350: 743d 3635 3533 3629 2e0a 2020 2020 2d48  t=65536)..    -H
-0000c360: 2c20 2d2d 6865 7820 2020 2020 2020 2020  , --hex         
-0000c370: 2020 2020 5772 6974 6520 6865 7861 6465      Write hexade
-0000c380: 6369 6d61 6c20 6164 6472 6573 7365 7320  cimal addresses 
-0000c390: 616e 6420 6f70 6572 616e 6473 2069 6e20  and operands in 
-0000c3a0: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
-0000c3b0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-0000c3c0: 7361 7373 656d 626c 792e 0a20 2020 202d  sassembly..    -
-0000c3d0: 4920 703d 762c 202d 2d69 6e69 2070 3d76  I p=v, --ini p=v
-0000c3e0: 2020 2020 2053 6574 2074 6865 2076 616c       Set the val
-0000c3f0: 7565 206f 6620 7468 6520 636f 6e66 6967  ue of the config
-0000c400: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
-0000c410: 7220 2770 2720 746f 0a20 2020 2020 2020  r 'p' to.       
-0000c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c430: 2020 2027 7627 2e20 5468 6973 206f 7074     'v'. This opt
-0000c440: 696f 6e20 6d61 7920 6265 2075 7365 6420  ion may be used 
-0000c450: 6d75 6c74 6970 6c65 2074 696d 6573 2e0a  multiple times..
-0000c460: 2020 2020 2d6c 2c20 2d2d 6c6f 7765 7220      -l, --lower 
-0000c470: 2020 2020 2020 2020 2020 5772 6974 6520            Write 
-0000c480: 7468 6520 6469 7361 7373 656d 626c 7920  the disassembly 
-0000c490: 696e 206c 6f77 6572 2063 6173 652e 0a20  in lower case.. 
-0000c4a0: 2020 202d 6f20 4144 4452 2c20 2d2d 6f72     -o ADDR, --or
-0000c4b0: 6720 4144 4452 2020 2053 7065 6369 6679  g ADDR   Specify
-0000c4c0: 2074 6865 206f 7269 6769 6e20 6164 6472   the origin addr
-0000c4d0: 6573 7320 6f66 2061 2062 696e 6172 7920  ess of a binary 
-0000c4e0: 282e 6269 6e29 2066 696c 650a 2020 2020  (.bin) file.    
-0000c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c500: 2020 2020 2020 2864 6566 6175 6c74 3a20        (default: 
-0000c510: 3635 3533 3620 2d20 6c65 6e67 7468 292e  65536 - length).
-0000c520: 0a20 2020 202d 7020 5041 4745 2c20 2d2d  .    -p PAGE, --
-0000c530: 7061 6765 2050 4147 4520 2053 7065 6369  page PAGE  Speci
-0000c540: 6679 2074 6865 2070 6167 6520 2830 2d37  fy the page (0-7
-0000c550: 2920 6f66 2061 2031 3238 4b20 736e 6170  ) of a 128K snap
-0000c560: 7368 6f74 2074 6f20 6d61 7020 746f 0a20  shot to map to. 
-0000c570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c580: 2020 2020 2020 2020 2034 3931 3532 2d36           49152-6
-0000c590: 3535 3335 2e0a 2020 2020 2d2d 7368 6f77  5535..    --show
-0000c5a0: 2d63 6f6e 6669 6720 2020 2020 2020 2020  -config         
-0000c5b0: 5368 6f77 2063 6f6e 6669 6775 7261 7469  Show configurati
-0000c5c0: 6f6e 2070 6172 616d 6574 6572 2076 616c  on parameter val
-0000c5d0: 7565 732e 0a20 2020 202d 7320 4144 4452  ues..    -s ADDR
-0000c5e0: 2c20 2d2d 7374 6172 7420 4144 4452 0a20  , --start ADDR. 
-0000c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c600: 2020 2020 2020 2020 2053 7461 7274 2064           Start d
-0000c610: 6973 6173 7365 6d62 6c69 6e67 2061 7420  isassembling at 
-0000c620: 7468 6973 2061 6464 7265 7373 2e0a 2020  this address..  
-0000c630: 2020 2d56 2c20 2d2d 7665 7273 696f 6e20    -V, --version 
-0000c640: 2020 2020 2020 2020 5368 6f77 2053 6b6f          Show Sko
-0000c650: 6f6c 4b69 7420 7665 7273 696f 6e20 6e75  olKit version nu
-0000c660: 6d62 6572 2061 6e64 2065 7869 742e 0a20  mber and exit.. 
-0000c670: 2020 202d 7720 572c 202d 2d6c 696e 652d     -w W, --line-
-0000c680: 7769 6474 6820 5720 2053 6574 2074 6865  width W  Set the
-0000c690: 206d 6178 696d 756d 206c 696e 6520 7769   maximum line wi
-0000c6a0: 6474 6820 6f66 2074 6865 2073 6b6f 6f6c  dth of the skool
-0000c6b0: 2066 696c 6520 2864 6566 6175 6c74 3a0a   file (default:.
-0000c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c6d0: 2020 2020 2020 2020 2020 3739 292e 0a0a            79)...
-0000c6e0: 4966 2074 6865 2069 6e70 7574 2066 696c  If the input fil
-0000c6f0: 656e 616d 6520 646f 6573 206e 6f74 2065  ename does not e
-0000c700: 6e64 2077 6974 6820 272e 736e 6127 2c20  nd with '.sna', 
-0000c710: 272e 737a 7827 206f 7220 272e 7a38 3027  '.szx' or '.z80'
-0000c720: 2c20 6974 2069 7320 6173 7375 6d65 640a  , it is assumed.
-0000c730: 746f 2062 6520 6120 6269 6e61 7279 2066  to be a binary f
-0000c740: 696c 652e 0a0a 4279 2064 6566 6175 6c74  ile...By default
-0000c750: 2c20 616e 7920 6669 6c65 7320 7768 6f73  , any files whos
-0000c760: 6520 6e61 6d65 7320 7374 6172 7420 7769  e names start wi
-0000c770: 7468 2074 6865 2069 6e70 7574 2066 696c  th the input fil
-0000c780: 656e 616d 6520 286d 696e 7573 2074 6865  ename (minus the
-0000c790: 0a27 2e62 696e 272c 2027 2e73 6e61 272c  .'.bin', '.sna',
-0000c7a0: 2027 2e73 7a78 2720 6f72 2027 2e7a 3830   '.szx' or '.z80
-0000c7b0: 2720 7375 6666 6978 2c20 6966 2061 6e79  ' suffix, if any
-0000c7c0: 2920 616e 6420 656e 6420 7769 7468 2027  ) and end with '
-0000c7d0: 2e63 746c 2720 7769 6c6c 2062 650a 7573  .ctl' will be.us
-0000c7e0: 6564 2061 7320 3a72 6566 3a60 636f 6e74  ed as :ref:`cont
-0000c7f0: 726f 6c20 6669 6c65 7320 3c63 6f6e 7472  rol files <contr
-0000c800: 6f6c 4669 6c65 733e 602e 0a0a 2e2e 205f  olFiles>`..... _
-0000c810: 736e 6132 736b 6f6f 6c2d 636f 6e66 3a0a  sna2skool-conf:.
-0000c820: 0a43 6f6e 6669 6775 7261 7469 6f6e 0a5e  .Configuration.^
-0000c830: 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 0a60 736e  ^^^^^^^^^^^^.`sn
-0000c840: 6132 736b 6f6f 6c2e 7079 6020 7769 6c6c  a2skool.py` will
-0000c850: 2072 6561 6420 636f 6e66 6967 7572 6174   read configurat
-0000c860: 696f 6e20 6672 6f6d 2061 2066 696c 6520  ion from a file 
-0000c870: 6e61 6d65 6420 6073 6b6f 6f6c 6b69 742e  named `skoolkit.
-0000c880: 696e 6960 2069 6e20 7468 650a 6375 7272  ini` in the.curr
-0000c890: 656e 7420 776f 726b 696e 6720 6469 7265  ent working dire
-0000c8a0: 6374 6f72 7920 6f72 2069 6e20 607e 2f2e  ctory or in `~/.
-0000c8b0: 736b 6f6f 6c6b 6974 602c 2069 6620 7072  skoolkit`, if pr
-0000c8c0: 6573 656e 742e 2054 6865 2072 6563 6f67  esent. The recog
-0000c8d0: 6e69 7365 640a 636f 6e66 6967 7572 6174  nised.configurat
-0000c8e0: 696f 6e20 7061 7261 6d65 7465 7273 2061  ion parameters a
-0000c8f0: 7265 3a0a 0a2a 2060 6042 6173 6560 6020  re:..* ``Base`` 
-0000c900: 2d20 7772 6974 6520 6164 6472 6573 7365  - write addresse
-0000c910: 7320 616e 6420 696e 7374 7275 6374 696f  s and instructio
-0000c920: 6e20 6f70 6572 616e 6473 2069 6e20 6865  n operands in he
-0000c930: 7861 6465 6369 6d61 6c20 2860 6031 3660  xadecimal (``16`
-0000c940: 6029 0a20 206f 7220 6465 6369 6d61 6c20  `).  or decimal 
-0000c950: 2860 6031 3060 602c 2074 6865 2064 6566  (``10``, the def
-0000c960: 6175 6c74 290a 2a20 6060 4361 7365 6060  ault).* ``Case``
-0000c970: 202d 2077 7269 7465 2074 6865 2064 6973   - write the dis
-0000c980: 6173 7365 6d62 6c79 2069 6e20 6c6f 7765  assembly in lowe
-0000c990: 7220 6361 7365 2028 6060 3160 6029 206f  r case (``1``) o
-0000c9a0: 7220 7570 7065 7220 6361 7365 2028 6060  r upper case (``
-0000c9b0: 3260 602c 0a20 2074 6865 2064 6566 6175  2``,.  the defau
-0000c9c0: 6c74 290a 2a20 6060 436f 6d6d 656e 7457  lt).* ``CommentW
-0000c9d0: 6964 7468 4d69 6e60 6020 2d20 6d69 6e69  idthMin`` - mini
-0000c9e0: 6d75 6d20 7769 6474 6820 6f66 2074 6865  mum width of the
-0000c9f0: 2069 6e73 7472 7563 7469 6f6e 2063 6f6d   instruction com
-0000ca00: 6d65 6e74 2066 6965 6c64 2069 6e20 7468  ment field in th
-0000ca10: 650a 2020 736b 6f6f 6c20 6669 6c65 2028  e.  skool file (
-0000ca20: 6465 6661 756c 743a 2060 6031 3060 6029  default: ``10``)
-0000ca30: 0a2a 2060 6044 6566 6253 697a 6560 6020  .* ``DefbSize`` 
-0000ca40: 2d20 6d61 7869 6d75 6d20 6e75 6d62 6572  - maximum number
-0000ca50: 206f 6620 6279 7465 7320 696e 2061 2044   of bytes in a D
-0000ca60: 4546 4220 7374 6174 656d 656e 7420 2864  EFB statement (d
-0000ca70: 6566 6175 6c74 3a20 6060 3860 6029 0a2a  efault: ``8``).*
-0000ca80: 2060 6044 6566 6d53 697a 6560 6020 2d20   ``DefmSize`` - 
-0000ca90: 6d61 7869 6d75 6d20 6e75 6d62 6572 206f  maximum number o
-0000caa0: 6620 6368 6172 6163 7465 7273 2069 6e20  f characters in 
-0000cab0: 6120 4445 464d 2073 7461 7465 6d65 6e74  a DEFM statement
-0000cac0: 2028 6465 6661 756c 743a 0a20 2060 6036   (default:.  ``6
-0000cad0: 3560 6029 0a2a 2060 6044 6566 7753 697a  5``).* ``DefwSiz
-0000cae0: 6560 6020 2d20 6d61 7869 6d75 6d20 6e75  e`` - maximum nu
-0000caf0: 6d62 6572 206f 6620 776f 7264 7320 696e  mber of words in
-0000cb00: 2061 2044 4546 5720 7374 6174 656d 656e   a DEFW statemen
-0000cb10: 7420 2864 6566 6175 6c74 3a20 6060 3160  t (default: ``1`
-0000cb20: 6029 0a2a 2060 6045 6e74 7279 506f 696e  `).* ``EntryPoin
-0000cb30: 7452 6566 6060 202d 2074 656d 706c 6174  tRef`` - templat
-0000cb40: 6520 7573 6564 2074 6f20 666f 726d 6174  e used to format
-0000cb50: 2074 6865 2063 6f6d 6d65 6e74 2066 6f72   the comment for
-0000cb60: 2061 6e20 656e 7472 7920 706f 696e 740a   an entry point.
-0000cb70: 2020 7769 7468 2065 7861 6374 6c79 206f    with exactly o
-0000cb80: 6e65 2072 6566 6572 7265 7220 2864 6566  ne referrer (def
-0000cb90: 6175 6c74 3a20 6060 5468 6973 2065 6e74  ault: ``This ent
-0000cba0: 7279 2070 6f69 6e74 2069 7320 7573 6564  ry point is used
-0000cbb0: 2062 7920 7468 6520 726f 7574 696e 650a   by the routine.
-0000cbc0: 2020 6174 207b 7265 667d 2e60 6029 0a2a    at {ref}.``).*
-0000cbd0: 2060 6045 6e74 7279 506f 696e 7452 6566   ``EntryPointRef
-0000cbe0: 7360 6020 2d20 7465 6d70 6c61 7465 2075  s`` - template u
-0000cbf0: 7365 6420 746f 2066 6f72 6d61 7420 7468  sed to format th
-0000cc00: 6520 636f 6d6d 656e 7420 666f 7220 616e  e comment for an
-0000cc10: 2065 6e74 7279 2070 6f69 6e74 0a20 2077   entry point.  w
-0000cc20: 6974 6820 7477 6f20 6f72 206d 6f72 6520  ith two or more 
-0000cc30: 7265 6665 7272 6572 7320 2864 6566 6175  referrers (defau
-0000cc40: 6c74 3a20 6060 5468 6973 2065 6e74 7279  lt: ``This entry
-0000cc50: 2070 6f69 6e74 2069 7320 7573 6564 2062   point is used b
-0000cc60: 7920 7468 650a 2020 726f 7574 696e 6573  y the.  routines
-0000cc70: 2061 7420 7b72 6566 737d 2061 6e64 207b   at {refs} and {
-0000cc80: 7265 667d 2e60 6029 0a2a 2060 6049 6e73  ref}.``).* ``Ins
-0000cc90: 7472 7563 7469 6f6e 5769 6474 6860 6020  tructionWidth`` 
-0000cca0: 2d20 6d69 6e69 6d75 6d20 7769 6474 6820  - minimum width 
-0000ccb0: 6f66 2074 6865 2069 6e73 7472 7563 7469  of the instructi
-0000ccc0: 6f6e 2066 6965 6c64 2069 6e20 7468 6520  on field in the 
-0000ccd0: 736b 6f6f 6c0a 2020 6669 6c65 2028 6465  skool.  file (de
-0000cce0: 6661 756c 743a 2060 6031 3360 6029 0a2a  fault: ``13``).*
-0000ccf0: 2060 604c 696e 6557 6964 7468 6060 202d   ``LineWidth`` -
-0000cd00: 206d 6178 696d 756d 206c 696e 6520 7769   maximum line wi
-0000cd10: 6474 6820 6f66 2074 6865 2073 6b6f 6f6c  dth of the skool
-0000cd20: 2066 696c 6520 2864 6566 6175 6c74 3a20   file (default: 
-0000cd30: 6060 3739 6060 290a 2a20 6060 4c69 7374  ``79``).* ``List
-0000cd40: 5265 6673 6060 202d 2077 6865 6e20 746f  Refs`` - when to
-0000cd50: 2061 6464 2061 2063 6f6d 6d65 6e74 2074   add a comment t
-0000cd60: 6861 7420 6c69 7374 7320 726f 7574 696e  hat lists routin
-0000cd70: 6520 6f72 2065 6e74 7279 2070 6f69 6e74  e or entry point
-0000cd80: 0a20 2072 6566 6572 7265 7273 3a20 6e65  .  referrers: ne
-0000cd90: 7665 7220 2860 6030 6060 292c 2069 6620  ver (``0``), if 
-0000cda0: 6e6f 206f 7468 6572 2063 6f6d 6d65 6e74  no other comment
-0000cdb0: 2069 7320 6465 6669 6e65 6420 6174 2074   is defined at t
-0000cdc0: 6865 2065 6e74 7279 2070 6f69 6e74 0a20  he entry point. 
-0000cdd0: 2028 6060 3160 602c 2074 6865 2064 6566   (``1``, the def
-0000cde0: 6175 6c74 292c 206f 7220 616c 7761 7973  ault), or always
-0000cdf0: 2028 6060 3260 6029 0a2a 2060 6052 6566   (``2``).* ``Ref
-0000ce00: 6060 202d 2074 656d 706c 6174 6520 7573  `` - template us
-0000ce10: 6564 2074 6f20 666f 726d 6174 2074 6865  ed to format the
-0000ce20: 2063 6f6d 6d65 6e74 2066 6f72 2061 2072   comment for a r
-0000ce30: 6f75 7469 6e65 2077 6974 6820 6578 6163  outine with exac
-0000ce40: 746c 7920 6f6e 650a 2020 7265 6665 7272  tly one.  referr
-0000ce50: 6572 2028 6465 6661 756c 743a 2060 6055  er (default: ``U
-0000ce60: 7365 6420 6279 2074 6865 2072 6f75 7469  sed by the routi
-0000ce70: 6e65 2061 7420 7b72 6566 7d2e 6060 290a  ne at {ref}.``).
-0000ce80: 2a20 6060 5265 6646 6f72 6d61 7460 6020  * ``RefFormat`` 
-0000ce90: 2d20 7465 6d70 6c61 7465 2075 7365 6420  - template used 
-0000cea0: 746f 2066 6f72 6d61 7420 7265 6665 7272  to format referr
-0000ceb0: 6572 7320 696e 2074 6865 2060 607b 7265  ers in the ``{re
-0000cec0: 667d 6060 2061 6e64 0a20 2060 607b 7265  f}`` and.  ``{re
-0000ced0: 6673 7d60 6020 6669 656c 6473 206f 6620  fs}`` fields of 
-0000cee0: 7468 6520 6060 5265 6660 6020 616e 6420  the ``Ref`` and 
-0000cef0: 6060 5265 6673 6060 2074 656d 706c 6174  ``Refs`` templat
-0000cf00: 6573 2028 6465 6661 756c 743a 0a20 2060  es (default:.  `
-0000cf10: 6023 527b 6164 6472 6573 737d 6060 293b  `#R{address}``);
-0000cf20: 2074 6865 2072 6570 6c61 6365 6d65 6e74   the replacement
-0000cf30: 2066 6965 6c64 2060 6061 6464 7265 7373   field ``address
-0000cf40: 6060 2069 7320 7468 6520 6164 6472 6573  `` is the addres
-0000cf50: 7320 6f66 2074 6865 0a20 2072 6566 6572  s of the.  refer
-0000cf60: 7265 7220 666f 726d 6174 7465 6420 6173  rer formatted as
-0000cf70: 2061 2064 6563 696d 616c 206f 7220 6865   a decimal or he
-0000cf80: 7861 6465 6369 6d61 6c20 6e75 6d62 6572  xadecimal number
-0000cf90: 2069 6e20 6163 636f 7264 616e 6365 2077   in accordance w
-0000cfa0: 6974 6820 7468 650a 2020 6060 4261 7365  ith the.  ``Base
-0000cfb0: 6060 2061 6e64 2060 6043 6173 6560 6020  `` and ``Case`` 
-0000cfc0: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
-0000cfd0: 7261 6d65 7465 7273 0a2a 2060 6052 6566  rameters.* ``Ref
-0000cfe0: 7360 6020 2d20 7465 6d70 6c61 7465 2075  s`` - template u
-0000cff0: 7365 6420 746f 2066 6f72 6d61 7420 7468  sed to format th
-0000d000: 6520 636f 6d6d 656e 7420 666f 7220 6120  e comment for a 
-0000d010: 726f 7574 696e 6520 7769 7468 2074 776f  routine with two
-0000d020: 206f 7220 6d6f 7265 0a20 2072 6566 6572   or more.  refer
-0000d030: 7265 7273 2028 6465 6661 756c 743a 2060  rers (default: `
-0000d040: 6055 7365 6420 6279 2074 6865 2072 6f75  `Used by the rou
-0000d050: 7469 6e65 7320 6174 207b 7265 6673 7d20  tines at {refs} 
-0000d060: 616e 6420 7b72 6566 7d2e 6060 290a 2a20  and {ref}.``).* 
-0000d070: 6060 5365 6d69 636f 6c6f 6e73 6060 202d  ``Semicolons`` -
-0000d080: 2062 6c6f 636b 2074 7970 6573 2028 6060   block types (``
-0000d090: 6260 602c 2060 6063 6060 2c20 6060 6760  b``, ``c``, ``g`
-0000d0a0: 602c 2060 6069 6060 2c20 6060 7360 602c  `, ``i``, ``s``,
-0000d0b0: 2060 6074 6060 2c0a 2020 6060 7560 602c   ``t``,.  ``u``,
-0000d0c0: 2060 6077 6060 2920 696e 2077 6869 6368   ``w``) in which
-0000d0d0: 2063 6f6d 6d65 6e74 2073 656d 6963 6f6c   comment semicol
-0000d0e0: 6f6e 7320 6172 6520 7772 6974 7465 6e20  ons are written 
-0000d0f0: 666f 7220 696e 7374 7275 6374 696f 6e73  for instructions
-0000d100: 2074 6861 740a 2020 6861 7665 206e 6f20   that.  have no 
-0000d110: 636f 6d6d 656e 7420 2864 6566 6175 6c74  comment (default
-0000d120: 3a20 6060 6360 6029 0a2a 2060 6054 6578  : ``c``).* ``Tex
-0000d130: 7460 6020 2d20 7368 6f77 2041 5343 4949  t`` - show ASCII
-0000d140: 2074 6578 7420 696e 2074 6865 2063 6f6d   text in the com
-0000d150: 6d65 6e74 2066 6965 6c64 7320 2860 6031  ment fields (``1
-0000d160: 6060 292c 206f 7220 646f 6e27 7420 2860  ``), or don't (`
-0000d170: 6030 6060 2c0a 2020 7468 6520 6465 6661  `0``,.  the defa
-0000d180: 756c 7429 0a2a 2060 6054 696d 696e 6773  ult).* ``Timings
-0000d190: 6060 202d 2073 686f 7720 696e 7374 7275  `` - show instru
-0000d1a0: 6374 696f 6e20 7469 6d69 6e67 7320 696e  ction timings in
-0000d1b0: 2074 6865 2063 6f6d 6d65 6e74 2066 6965   the comment fie
-0000d1c0: 6c64 7320 2860 6031 6060 292c 206f 720a  lds (``1``), or.
-0000d1d0: 2020 646f 6e27 7420 2860 6030 6060 2c20    don't (``0``, 
-0000d1e0: 7468 6520 6465 6661 756c 7429 0a2a 2060  the default).* `
-0000d1f0: 6054 6974 6c65 2d62 6060 202d 2074 656d  `Title-b`` - tem
-0000d200: 706c 6174 6520 7573 6564 2074 6f20 666f  plate used to fo
-0000d210: 726d 6174 2074 6865 2074 6974 6c65 2066  rmat the title f
-0000d220: 6f72 2061 6e20 756e 7469 746c 6564 2027  or an untitled '
-0000d230: 6227 2062 6c6f 636b 0a20 2028 6465 6661  b' block.  (defa
-0000d240: 756c 743a 2060 6044 6174 6120 626c 6f63  ult: ``Data bloc
-0000d250: 6b20 6174 207b 6164 6472 6573 737d 6060  k at {address}``
-0000d260: 290a 2a20 6060 5469 746c 652d 6360 6020  ).* ``Title-c`` 
-0000d270: 2d20 7465 6d70 6c61 7465 2075 7365 6420  - template used 
-0000d280: 746f 2066 6f72 6d61 7420 7468 6520 7469  to format the ti
-0000d290: 746c 6520 666f 7220 616e 2075 6e74 6974  tle for an untit
-0000d2a0: 6c65 6420 2763 2720 626c 6f63 6b0a 2020  led 'c' block.  
-0000d2b0: 2864 6566 6175 6c74 3a20 6060 526f 7574  (default: ``Rout
-0000d2c0: 696e 6520 6174 207b 6164 6472 6573 737d  ine at {address}
-0000d2d0: 6060 290a 2a20 6060 5469 746c 652d 6760  ``).* ``Title-g`
-0000d2e0: 6020 2d20 7465 6d70 6c61 7465 2075 7365  ` - template use
-0000d2f0: 6420 746f 2066 6f72 6d61 7420 7468 6520  d to format the 
-0000d300: 7469 746c 6520 666f 7220 616e 2075 6e74  title for an unt
-0000d310: 6974 6c65 6420 2767 2720 626c 6f63 6b0a  itled 'g' block.
-0000d320: 2020 2864 6566 6175 6c74 3a20 6060 4761    (default: ``Ga
-0000d330: 6d65 2073 7461 7475 7320 6275 6666 6572  me status buffer
-0000d340: 2065 6e74 7279 2061 7420 7b61 6464 7265   entry at {addre
-0000d350: 7373 7d60 6029 0a2a 2060 6054 6974 6c65  ss}``).* ``Title
-0000d360: 2d69 6060 202d 2074 656d 706c 6174 6520  -i`` - template 
-0000d370: 7573 6564 2074 6f20 666f 726d 6174 2074  used to format t
-0000d380: 6865 2074 6974 6c65 2066 6f72 2061 6e20  he title for an 
-0000d390: 756e 7469 746c 6564 2027 6927 2062 6c6f  untitled 'i' blo
-0000d3a0: 636b 0a20 2028 6465 6661 756c 743a 2060  ck.  (default: `
-0000d3b0: 6049 676e 6f72 6564 6060 290a 2a20 6060  `Ignored``).* ``
-0000d3c0: 5469 746c 652d 7360 6020 2d20 7465 6d70  Title-s`` - temp
-0000d3d0: 6c61 7465 2075 7365 6420 746f 2066 6f72  late used to for
-0000d3e0: 6d61 7420 7468 6520 7469 746c 6520 666f  mat the title fo
-0000d3f0: 7220 616e 2075 6e74 6974 6c65 6420 2773  r an untitled 's
-0000d400: 2720 626c 6f63 6b0a 2020 2864 6566 6175  ' block.  (defau
-0000d410: 6c74 3a20 6060 556e 7573 6564 6060 290a  lt: ``Unused``).
-0000d420: 2a20 6060 5469 746c 652d 7460 6020 2d20  * ``Title-t`` - 
-0000d430: 7465 6d70 6c61 7465 2075 7365 6420 746f  template used to
-0000d440: 2066 6f72 6d61 7420 7468 6520 7469 746c   format the titl
-0000d450: 6520 666f 7220 616e 2075 6e74 6974 6c65  e for an untitle
-0000d460: 6420 2774 2720 626c 6f63 6b0a 2020 2864  d 't' block.  (d
-0000d470: 6566 6175 6c74 3a20 6060 4d65 7373 6167  efault: ``Messag
-0000d480: 6520 6174 207b 6164 6472 6573 737d 6060  e at {address}``
-0000d490: 290a 2a20 6060 5469 746c 652d 7560 6020  ).* ``Title-u`` 
-0000d4a0: 2d20 7465 6d70 6c61 7465 2075 7365 6420  - template used 
-0000d4b0: 746f 2066 6f72 6d61 7420 7468 6520 7469  to format the ti
-0000d4c0: 746c 6520 666f 7220 616e 2075 6e74 6974  tle for an untit
-0000d4d0: 6c65 6420 2775 2720 626c 6f63 6b0a 2020  led 'u' block.  
-0000d4e0: 2864 6566 6175 6c74 3a20 6060 556e 7573  (default: ``Unus
-0000d4f0: 6564 6060 290a 2a20 6060 5469 746c 652d  ed``).* ``Title-
-0000d500: 7760 6020 2d20 7465 6d70 6c61 7465 2075  w`` - template u
-0000d510: 7365 6420 746f 2066 6f72 6d61 7420 7468  sed to format th
-0000d520: 6520 7469 746c 6520 666f 7220 616e 2075  e title for an u
-0000d530: 6e74 6974 6c65 6420 2777 2720 626c 6f63  ntitled 'w' bloc
-0000d540: 6b0a 2020 2864 6566 6175 6c74 3a20 6060  k.  (default: ``
-0000d550: 4461 7461 2062 6c6f 636b 2061 7420 7b61  Data block at {a
-0000d560: 6464 7265 7373 7d60 6029 0a2a 2060 6057  ddress}``).* ``W
-0000d570: 7261 7060 6020 2d20 6469 7361 7373 656d  rap`` - disassem
-0000d580: 626c 6520 616e 2069 6e73 7472 7563 7469  ble an instructi
-0000d590: 6f6e 2074 6861 7420 7772 6170 7320 6172  on that wraps ar
-0000d5a0: 6f75 6e64 2074 6865 2036 344b 2062 6f75  ound the 64K bou
-0000d5b0: 6e64 6172 790a 2020 2860 6031 6060 292c  ndary.  (``1``),
-0000d5c0: 206f 7220 646f 6e27 7420 2860 6030 6060   or don't (``0``
-0000d5d0: 2c20 7468 6520 6465 6661 756c 7429 0a0a  , the default)..
-0000d5e0: 436f 6e66 6967 7572 6174 696f 6e20 7061  Configuration pa
-0000d5f0: 7261 6d65 7465 7273 206d 7573 7420 6170  rameters must ap
-0000d600: 7065 6172 2069 6e20 6120 6060 5b73 6e61  pear in a ``[sna
-0000d610: 3273 6b6f 6f6c 5d60 6020 7365 6374 696f  2skool]`` sectio
-0000d620: 6e2e 2046 6f72 2065 7861 6d70 6c65 2c0a  n. For example,.
-0000d630: 746f 206d 616b 6520 6073 6e61 3273 6b6f  to make `sna2sko
-0000d640: 6f6c 2e70 7960 2067 656e 6572 6174 6520  ol.py` generate 
-0000d650: 6865 7861 6465 6369 6d61 6c20 736b 6f6f  hexadecimal skoo
-0000d660: 6c20 6669 6c65 7320 7769 7468 2061 206c  l files with a l
-0000d670: 696e 6520 7769 6474 6820 6f66 0a31 3230  ine width of.120
-0000d680: 2063 6861 7261 6374 6572 7320 6279 2064   characters by d
-0000d690: 6566 6175 6c74 2028 7769 7468 6f75 7420  efault (without 
-0000d6a0: 6861 7669 6e67 2074 6f20 7573 6520 7468  having to use th
-0000d6b0: 6520 6060 2d48 6060 2061 6e64 2060 602d  e ``-H`` and ``-
-0000d6c0: 7760 6020 6f70 7469 6f6e 730a 6f6e 2074  w`` options.on t
-0000d6d0: 6865 2063 6f6d 6d61 6e64 206c 696e 6529  he command line)
-0000d6e0: 2c20 6164 6420 7468 6520 666f 6c6c 6f77  , add the follow
-0000d6f0: 696e 6720 7365 6374 696f 6e20 746f 2060  ing section to `
-0000d700: 736b 6f6f 6c6b 6974 2e69 6e69 603a 3a0a  skoolkit.ini`::.
-0000d710: 0a20 205b 736e 6132 736b 6f6f 6c5d 0a20  .  [sna2skool]. 
-0000d720: 2042 6173 653d 3136 0a20 204c 696e 6557   Base=16.  LineW
-0000d730: 6964 7468 3d31 3230 0a0a 436f 6e66 6967  idth=120..Config
-0000d740: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
-0000d750: 7273 206d 6179 2061 6c73 6f20 6265 2073  rs may also be s
-0000d760: 6574 206f 6e20 7468 6520 636f 6d6d 616e  et on the comman
-0000d770: 6420 6c69 6e65 2062 7920 7573 696e 6720  d line by using 
-0000d780: 7468 650a 6060 2d2d 696e 6960 6020 6f70  the.``--ini`` op
-0000d790: 7469 6f6e 2e20 5061 7261 6d65 7465 7220  tion. Parameter 
-0000d7a0: 7661 6c75 6573 2073 6574 2074 6869 7320  values set this 
-0000d7b0: 7761 7920 7769 6c6c 206f 7665 7272 6964  way will overrid
-0000d7c0: 6520 616e 7920 666f 756e 6420 696e 0a60  e any found in.`
-0000d7d0: 736b 6f6f 6c6b 6974 2e69 6e69 602e 0a0a  skoolkit.ini`...
-0000d7e0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000d7f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000d830: 7c20 5665 7273 696f 6e20 7c20 4368 616e  | Version | Chan
-0000d840: 6765 7320 2020 2020 2020 2020 2020 2020  ges             
-0000d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d870: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000d880: 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d  +=========+=====
-0000d890: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d8a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d8b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000d8c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a  ==============+.
-0000d8d0: 7c20 382e 3720 2020 2020 7c20 4164 6465  | 8.7     | Adde
-0000d8e0: 6420 7468 6520 6060 2d2d 6465 6662 6060  d the ``--defb``
-0000d8f0: 206f 7074 696f 6e20 616e 6420 7468 6520   option and the 
-0000d900: 6060 5469 6d69 6e67 7360 6020 636f 6e66  ``Timings`` conf
-0000d910: 6967 7572 6174 696f 6e20 2020 2020 7c0a  iguration     |.
-0000d920: 7c20 2020 2020 2020 2020 7c20 7061 7261  |         | para
-0000d930: 6d65 7465 7220 2020 2020 2020 2020 2020  meter           
-0000d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d960: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000d970: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000d980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000d9b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000d9c0: 7c20 382e 3520 2020 2020 7c20 4164 6465  | 8.5     | Adde
-0000d9d0: 6420 7468 6520 6060 5772 6170 6060 2063  d the ``Wrap`` c
-0000d9e0: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
-0000d9f0: 616d 6574 6572 2061 6e64 2074 6865 2061  ameter and the a
-0000da00: 6269 6c69 7479 2074 6f20 2020 2020 7c0a  bility to     |.
-0000da10: 7c20 2020 2020 2020 2020 7c20 6469 7361  |         | disa
-0000da20: 7373 656d 626c 6520 616e 2069 6e73 7472  ssemble an instr
-0000da30: 7563 7469 6f6e 2074 6861 7420 7772 6170  uction that wrap
-0000da40: 7320 6172 6f75 6e64 2074 6865 2036 344b  s around the 64K
-0000da50: 2062 6f75 6e64 6172 793b 2020 2020 7c0a   boundary;    |.
-0000da60: 7c20 2020 2020 2020 2020 7c20 6164 6465  |         | adde
-0000da70: 6420 7468 6520 6060 5265 6646 6f72 6d61  d the ``RefForma
-0000da80: 7460 6020 636f 6e66 6967 7572 6174 696f  t`` configuratio
-0000da90: 6e20 7061 7261 6d65 7465 7220 2020 2020  n parameter     
-0000daa0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000dab0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000dac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000daf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000db00: 7c20 382e 3420 2020 2020 7c20 4368 616e  | 8.4     | Chan
-0000db10: 6765 6420 7468 6520 6465 6661 756c 7420  ged the default 
-0000db20: 7661 6c75 6520 6f66 2074 6865 2060 6044  value of the ``D
-0000db30: 6566 6d53 697a 6560 6020 636f 6e66 6967  efmSize`` config
-0000db40: 7572 6174 696f 6e20 2020 2020 2020 7c0a  uration       |.
-0000db50: 7c20 2020 2020 2020 2020 7c20 7061 7261  |         | para
-0000db60: 6d65 7465 7220 6672 6f6d 2036 3620 746f  meter from 66 to
-0000db70: 2036 3520 2020 2020 2020 2020 2020 2020   65             
-0000db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db90: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000dba0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000dbb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dbc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dbd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dbe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000dbf0: 7c20 382e 3320 2020 2020 7c20 4164 6465  | 8.3     | Adde
-0000dc00: 6420 7375 7070 6f72 7420 666f 7220 7265  d support for re
-0000dc10: 6164 696e 6720 636f 6e74 726f 6c20 6669  ading control fi
-0000dc20: 6c65 7320 6672 6f6d 2061 2064 6972 6563  les from a direc
-0000dc30: 746f 7279 2020 2020 2020 2020 2020 7c0a  tory          |.
-0000dc40: 7c20 2020 2020 2020 2020 7c20 2860 602d  |         | (``-
-0000dc50: 2d63 746c 2044 4952 6060 2920 2020 2020  -ctl DIR``)     
-0000dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc80: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000dc90: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000dca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dcb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dcc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dcd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000dce0: 7c20 382e 3120 2020 2020 7c20 4164 6465  | 8.1     | Adde
-0000dcf0: 6420 7375 7070 6f72 7420 666f 7220 6967  d support for ig
-0000dd00: 6e6f 7269 6e67 2064 6566 6175 6c74 2063  noring default c
-0000dd10: 6f6e 7472 6f6c 2066 696c 6573 2028 6060  ontrol files (``
-0000dd20: 2d2d 6374 6c20 3060 6029 2020 2020 7c0a  --ctl 0``)    |.
-0000dd30: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000dd40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dd50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dd60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dd70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000dd80: 7c20 382e 3020 2020 2020 7c20 4164 6465  | 8.0     | Adde
-0000dd90: 6420 7468 6520 6060 4465 6677 5369 7a65  d the ``DefwSize
-0000dda0: 6060 2063 6f6e 6669 6775 7261 7469 6f6e  `` configuration
-0000ddb0: 2070 6172 616d 6574 6572 2020 2020 2020   parameter      
-0000ddc0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000ddd0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000dde0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ddf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000de00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000de10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000de20: 7c20 372e 3120 2020 2020 7c20 4164 6465  | 7.1     | Adde
-0000de30: 6420 7375 7070 6f72 7420 666f 7220 7265  d support for re
-0000de40: 6164 696e 6720 6d75 6c74 6970 6c65 2064  ading multiple d
-0000de50: 6566 6175 6c74 2063 6f6e 7472 6f6c 2066  efault control f
-0000de60: 696c 6573 2c20 616e 6420 666f 7220 7c0a  iles, and for |.
-0000de70: 7c20 2020 2020 2020 2020 7c20 7573 696e  |         | usin
-0000de80: 6720 7468 6520 6060 2d2d 6374 6c60 6020  g the ``--ctl`` 
-0000de90: 6f70 7469 6f6e 206d 756c 7469 706c 6520  option multiple 
-0000dea0: 7469 6d65 733b 2061 6464 6564 2074 6865  times; added the
-0000deb0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000dec0: 7c20 2020 2020 2020 2020 7c20 6060 436f  |         | ``Co
-0000ded0: 6d6d 656e 7457 6964 7468 4d69 6e60 602c  mmentWidthMin``,
-0000dee0: 2060 6049 6e73 7472 7563 7469 6f6e 5769   ``InstructionWi
-0000def0: 6474 6860 6020 616e 6420 6060 5365 6d69  dth`` and ``Semi
-0000df00: 636f 6c6f 6e73 6060 2020 2020 2020 7c0a  colons``      |.
-0000df10: 7c20 2020 2020 2020 2020 7c20 636f 6e66  |         | conf
-0000df20: 6967 7572 6174 696f 6e20 7061 7261 6d65  iguration parame
-0000df30: 7465 7273 2020 2020 2020 2020 2020 2020  ters            
-0000df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000df50: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000df60: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000df70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000df80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000df90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000dfa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000dfb0: 7c20 372e 3020 2020 2020 7c20 5468 6520  | 7.0     | The 
-0000dfc0: 7368 6f72 7420 6f70 7469 6f6e 2066 6f72  short option for
-0000dfd0: 2060 602d 2d6c 6f77 6572 6060 2069 7320   ``--lower`` is 
-0000dfe0: 6060 2d6c 6060 3b20 7468 6520 6c6f 6e67  ``-l``; the long
-0000dff0: 206f 7074 696f 6e20 666f 7220 2020 7c0a   option for   |.
-0000e000: 7c20 2020 2020 2020 2020 7c20 6060 2d48  |         | ``-H
-0000e010: 6060 2069 7320 6060 2d2d 6865 7860 6020  `` is ``--hex`` 
-0000e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e040: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e050: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e0a0: 7c20 362e 3220 2020 2020 7c20 4164 6465  | 6.2     | Adde
-0000e0b0: 6420 7468 6520 6060 2d2d 7368 6f77 2d63  d the ``--show-c
-0000e0c0: 6f6e 6669 6760 6020 6f70 7469 6f6e 3b20  onfig`` option; 
-0000e0d0: 7468 6520 6060 2d2d 656e 6460 602c 2060  the ``--end``, `
-0000e0e0: 602d 2d6f 7267 6060 2061 6e64 2020 7c0a  `--org`` and  |.
-0000e0f0: 7c20 2020 2020 2020 2020 7c20 6060 2d2d  |         | ``--
-0000e100: 7374 6172 7460 6020 6f70 7469 6f6e 7320  start`` options 
-0000e110: 6163 6365 7074 2061 2068 6578 6164 6563  accept a hexadec
-0000e120: 696d 616c 2069 6e74 6567 6572 2070 7265  imal integer pre
-0000e130: 6669 7865 6420 6279 2027 3078 2720 7c0a  fixed by '0x' |.
-0000e140: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e190: 7c20 362e 3120 2020 2020 7c20 436f 6e66  | 6.1     | Conf
-0000e1a0: 6967 7572 6174 696f 6e20 6973 2072 6561  iguration is rea
-0000e1b0: 6420 6672 6f6d 2060 736b 6f6f 6c6b 6974  d from `skoolkit
-0000e1c0: 2e69 6e69 6020 6966 2070 7265 7365 6e74  .ini` if present
-0000e1d0: 3b20 6164 6465 6420 7468 6520 2020 7c0a  ; added the   |.
-0000e1e0: 7c20 2020 2020 2020 2020 7c20 6060 2d2d  |         | ``--
-0000e1f0: 696e 6960 6020 6f70 7469 6f6e 2020 2020  ini`` option    
-0000e200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e220: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e230: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e280: 7c20 342e 3420 2020 2020 7c20 4164 6465  | 4.4     | Adde
-0000e290: 6420 7468 6520 6060 2d2d 656e 6460 6020  d the ``--end`` 
-0000e2a0: 6f70 7469 6f6e 2020 2020 2020 2020 2020  option          
-0000e2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e2c0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e2d0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e2e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e2f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e320: 7c20 342e 3320 2020 2020 7c20 4164 6465  | 4.3     | Adde
-0000e330: 6420 7468 6520 6060 2d2d 6c69 6e65 2d77  d the ``--line-w
-0000e340: 6964 7468 6060 206f 7074 696f 6e20 2020  idth`` option   
-0000e350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e360: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e370: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e3a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e3c0: 7c20 332e 3420 2020 2020 7c20 4164 6465  | 3.4     | Adde
-0000e3d0: 6420 7468 6520 6060 2d56 6060 206f 7074  d the ``-V`` opt
-0000e3e0: 696f 6e20 616e 6420 7468 6520 6c6f 6e67  ion and the long
-0000e3f0: 206f 7074 696f 6e73 2c20 616e 6420 7468   options, and th
-0000e400: 6520 6162 696c 6974 7920 746f 2020 7c0a  e ability to  |.
-0000e410: 7c20 2020 2020 2020 2020 7c20 6164 6420  |         | add 
-0000e420: 6120 636f 6d6d 656e 7420 6c69 7374 696e  a comment listin
-0000e430: 6720 7265 6665 7272 6572 7320 6174 2065  g referrers at e
-0000e440: 7665 7279 2072 6f75 7469 6e65 2065 6e74  very routine ent
-0000e450: 7279 2070 6f69 6e74 2020 2020 2020 7c0a  ry point      |.
-0000e460: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e4b0: 7c20 332e 3320 2020 2020 7c20 4164 6465  | 3.3     | Adde
-0000e4c0: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
-0000e4d0: 2072 6561 6420 3132 384b 2053 4e41 2073   read 128K SNA s
-0000e4e0: 6e61 7073 686f 7473 2020 2020 2020 2020  napshots        
-0000e4f0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e500: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e550: 7c20 332e 3220 2020 2020 7c20 4164 6465  | 3.2     | Adde
-0000e560: 6420 7468 6520 6060 2d70 6060 206f 7074  d the ``-p`` opt
-0000e570: 696f 6e2c 2061 6e64 2074 6865 2061 6269  ion, and the abi
-0000e580: 6c69 7479 2074 6f20 7265 6164 2053 5a58  lity to read SZX
-0000e590: 2073 6e61 7073 686f 7473 2020 2020 7c0a   snapshots    |.
-0000e5a0: 7c20 2020 2020 2020 2020 7c20 616e 6420  |         | and 
-0000e5b0: 3132 384b 205a 3830 2073 6e61 7073 686f  128K Z80 snapsho
-0000e5c0: 7473 2020 2020 2020 2020 2020 2020 2020  ts              
-0000e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e5e0: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e5f0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e640: 7c20 322e 312e 3220 2020 7c20 4164 6465  | 2.1.2   | Adde
-0000e650: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
-0000e660: 2077 7269 7465 2074 6865 2064 6973 6173   write the disas
-0000e670: 7365 6d62 6c79 2069 6e20 6c6f 7765 7220  sembly in lower 
-0000e680: 6361 7365 2020 2020 2020 2020 2020 7c0a  case          |.
-0000e690: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e6a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e6e0: 7c20 322e 3120 2020 2020 7c20 4164 6465  | 2.1     | Adde
-0000e6f0: 6420 7468 6520 6060 2d48 6060 206f 7074  d the ``-H`` opt
-0000e700: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-0000e710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e720: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e730: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e740: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e750: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e780: 7c20 322e 302e 3120 2020 7c20 4164 6465  | 2.0.1   | Adde
-0000e790: 6420 7468 6520 6060 2d6f 6060 206f 7074  d the ``-o`` opt
-0000e7a0: 696f 6e2c 2061 6e64 2074 6865 2061 6269  ion, and the abi
-0000e7b0: 6c69 7479 2074 6f20 7265 6164 2062 696e  lity to read bin
-0000e7c0: 6172 7920 6669 6c65 732c 2074 6f20 7c0a  ary files, to |.
-0000e7d0: 7c20 2020 2020 2020 2020 7c20 7365 7420  |         | set 
-0000e7e0: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-0000e7f0: 6572 206f 6620 6368 6172 6163 7465 7273  er of characters
-0000e800: 2069 6e20 6120 4445 464d 2073 7461 7465   in a DEFM state
-0000e810: 6d65 6e74 2c20 616e 6420 746f 2020 7c0a  ment, and to  |.
-0000e820: 7c20 2020 2020 2020 2020 7c20 7375 7070  |         | supp
-0000e830: 7265 7373 2063 6f6d 6d65 6e74 7320 7468  ress comments th
-0000e840: 6174 206c 6973 7420 726f 7574 696e 6520  at list routine 
-0000e850: 656e 7472 7920 706f 696e 7420 7265 6665  entry point refe
-0000e860: 7272 6572 7320 2020 2020 2020 2020 7c0a  rrers         |.
-0000e870: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e8a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e8b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e8c0: 7c20 322e 3020 2020 2020 7c20 4164 6465  | 2.0     | Adde
-0000e8d0: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
-0000e8e0: 2073 6574 2074 6865 206d 6178 696d 756d   set the maximum
-0000e8f0: 206e 756d 6265 7220 6f66 2062 7974 6573   number of bytes
-0000e900: 2069 6e20 6120 4445 4642 2020 2020 7c0a   in a DEFB    |.
-0000e910: 7c20 2020 2020 2020 2020 7c20 7374 6174  |         | stat
-0000e920: 656d 656e 7420 2020 2020 2020 2020 2020  ement           
-0000e930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e950: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000e960: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000e970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000e9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000e9b0: 7c20 312e 302e 3520 2020 7c20 4164 6465  | 1.0.5   | Adde
-0000e9c0: 6420 7468 6520 6162 696c 6974 7920 746f  d the ability to
-0000e9d0: 2073 686f 7720 4153 4349 4920 7465 7874   show ASCII text
-0000e9e0: 2069 6e20 636f 6d6d 656e 7420 6669 656c   in comment fiel
-0000e9f0: 6473 2020 2020 2020 2020 2020 2020 7c0a  ds            |.
-0000ea00: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000ea10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ea20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ea30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ea40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000ea50: 7c20 312e 302e 3420 2020 7c20 4164 6465  | 1.0.4   | Adde
-0000ea60: 6420 7468 6520 6060 2d73 6060 206f 7074  d the ``-s`` opt
-0000ea70: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-0000ea80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ea90: 2020 2020 2020 2020 2020 2020 2020 7c0a                |.
-0000eaa0: 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d  +---------+-----
-0000eab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000ead0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-0000eae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a  --------------+.
-0000eaf0: 0a2e 2e20 5f73 6e61 7069 6e66 6f2e 7079  ... _snapinfo.py
-0000eb00: 3a0a 0a73 6e61 7069 6e66 6f2e 7079 0a2d  :..snapinfo.py.-
-0000eb10: 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 736e 6170  ----------.`snap
-0000eb20: 696e 666f 2e70 7960 2073 686f 7773 2069  info.py` shows i
-0000eb30: 6e66 6f72 6d61 7469 6f6e 206f 6e20 7468  nformation on th
-0000eb40: 6520 7265 6769 7374 6572 7320 6f72 2052  e registers or R
-0000eb50: 414d 2069 6e20 6120 6269 6e61 7279 2028  AM in a binary (
-0000eb60: 7261 770a 6d65 6d6f 7279 2920 6669 6c65  raw.memory) file
-0000eb70: 206f 7220 6120 534e 412c 2053 5a58 206f   or a SNA, SZX o
-0000eb80: 7220 5a38 3020 736e 6170 7368 6f74 2e20  r Z80 snapshot. 
-0000eb90: 466f 7220 6578 616d 706c 653a 3a0a 0a20  For example::.. 
-0000eba0: 2024 2073 6e61 7069 6e66 6f2e 7079 2067   $ snapinfo.py g
-0000ebb0: 616d 652e 7a38 300a 0a54 6f20 6c69 7374  ame.z80..To list
-0000ebc0: 2074 6865 206f 7074 696f 6e73 2073 7570   the options sup
-0000ebd0: 706f 7274 6564 2062 7920 6073 6e61 7069  ported by `snapi
-0000ebe0: 6e66 6f2e 7079 602c 2072 756e 2069 7420  nfo.py`, run it 
-0000ebf0: 7769 7468 206e 6f20 6172 6775 6d65 6e74  with no argument
-0000ec00: 733a 3a0a 0a20 2075 7361 6765 3a20 736e  s::..  usage: sn
-0000ec10: 6170 696e 666f 2e70 7920 5b6f 7074 696f  apinfo.py [optio
-0000ec20: 6e73 5d20 6669 6c65 0a0a 2020 416e 616c  ns] file..  Anal
-0000ec30: 7973 6520 6120 6269 6e61 7279 2028 7261  yse a binary (ra
-0000ec40: 7720 6d65 6d6f 7279 2920 6669 6c65 206f  w memory) file o
-0000ec50: 7220 6120 534e 412c 2053 5a58 206f 7220  r a SNA, SZX or 
-0000ec60: 5a38 3020 736e 6170 7368 6f74 2e0a 0a20  Z80 snapshot... 
-0000ec70: 204f 7074 696f 6e73 3a0a 2020 2020 2d62   Options:.    -b
-0000ec80: 2c20 2d2d 6261 7369 6320 2020 2020 2020  , --basic       
-0000ec90: 2020 2020 4c69 7374 2074 6865 2042 4153      List the BAS
-0000eca0: 4943 2070 726f 6772 616d 2e0a 2020 2020  IC program..    
-0000ecb0: 2d63 2050 4154 482c 202d 2d63 746c 2050  -c PATH, --ctl P
-0000ecc0: 4154 4820 2020 5768 656e 2067 656e 6572  ATH   When gener
-0000ecd0: 6174 696e 6720 6120 6361 6c6c 2067 7261  ating a call gra
-0000ece0: 7068 2c20 7370 6563 6966 7920 6120 636f  ph, specify a co
-0000ecf0: 6e74 726f 6c20 6669 6c65 0a20 2020 2020  ntrol file.     
+0000b6d0: 2020 2020 3635 3533 3620 2d20 6c65 6e67      65536 - leng
+0000b6e0: 7468 292e 0a20 2020 202d 7020 5041 4745  th)..    -p PAGE
+0000b6f0: 2c20 2d2d 7061 6765 2050 4147 4520 2053  , --page PAGE  S
+0000b700: 7065 6369 6679 2074 6865 2070 6167 6520  pecify the page 
+0000b710: 2830 2d37 2920 6f66 2061 2031 3238 4b20  (0-7) of a 128K 
+0000b720: 736e 6170 7368 6f74 2074 6f20 6d61 7020  snapshot to map 
+0000b730: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
+0000b740: 2020 2020 2020 2020 2020 2020 2034 3931               491
+0000b750: 3532 2d36 3535 3335 2e0a 2020 2020 2d2d  52-65535..    --
+0000b760: 7368 6f77 2d63 6f6e 6669 6720 2020 2020  show-config     
+0000b770: 2020 2020 5368 6f77 2063 6f6e 6669 6775      Show configu
+0000b780: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+0000b790: 2076 616c 7565 732e 0a20 2020 202d 7320   values..    -s 
+0000b7a0: 4144 4452 2c20 2d2d 7374 6172 7420 4144  ADDR, --start AD
+0000b7b0: 4452 0a20 2020 2020 2020 2020 2020 2020  DR.             
+0000b7c0: 2020 2020 2020 2020 2020 2020 2053 7461               Sta
+0000b7d0: 7274 2061 7420 7468 6973 2061 6464 7265  rt at this addre
+0000b7e0: 7373 2e0a 2020 2020 2d56 2c20 2d2d 7665  ss..    -V, --ve
+0000b7f0: 7273 696f 6e20 2020 2020 2020 2020 5368  rsion         Sh
+0000b800: 6f77 2053 6b6f 6f6c 4b69 7420 7665 7273  ow SkoolKit vers
+0000b810: 696f 6e20 6e75 6d62 6572 2061 6e64 2065  ion number and e
+0000b820: 7869 742e 0a0a 4966 2074 6865 2069 6e70  xit...If the inp
+0000b830: 7574 2066 696c 656e 616d 6520 646f 6573  ut filename does
+0000b840: 206e 6f74 2065 6e64 2077 6974 6820 272e   not end with '.
+0000b850: 736e 6127 2c20 272e 737a 7827 206f 7220  sna', '.szx' or 
+0000b860: 272e 7a38 3027 2c20 6974 2069 7320 6173  '.z80', it is as
+0000b870: 7375 6d65 640a 746f 2062 6520 6120 6269  sumed.to be a bi
+0000b880: 6e61 7279 2066 696c 652e 0a0a 5468 6520  nary file...The 
+0000b890: 6060 2d6d 6060 206f 7074 696f 6e20 6d61  ``-m`` option ma
+0000b8a0: 7920 6265 2075 7365 6420 746f 2073 7065  y be used to spe
+0000b8b0: 6369 6679 2061 2063 6f64 6520 6578 6563  cify a code exec
+0000b8c0: 7574 696f 6e20 6d61 7020 746f 2075 7365  ution map to use
+0000b8d0: 2077 6865 6e0a 6765 6e65 7261 7469 6e67   when.generating
+0000b8e0: 2061 2063 6f6e 7472 6f6c 2066 696c 652e   a control file.
+0000b8f0: 2054 6865 2073 7570 706f 7274 6564 2066   The supported f
+0000b900: 696c 6520 666f 726d 6174 7320 6172 653a  ile formats are:
+0000b910: 0a0a 2a20 4669 6c65 7320 6372 6561 7465  ..* Files create
+0000b920: 6420 6279 2074 6865 2060 602d 2d6d 6170  d by the ``--map
+0000b930: 6060 206f 7074 696f 6e20 6f66 203a 7265  `` option of :re
+0000b940: 663a 6072 7a78 706c 6179 2e70 7960 0a2a  f:`rzxplay.py`.*
+0000b950: 2050 726f 6669 6c65 7320 6372 6561 7465   Profiles create
+0000b960: 6420 6279 2074 6865 2046 7573 6520 656d  d by the Fuse em
+0000b970: 756c 6174 6f72 0a2a 2043 6f64 6520 6578  ulator.* Code ex
+0000b980: 6563 7574 696f 6e20 6c6f 6773 2063 7265  ecution logs cre
+0000b990: 6174 6564 2062 7920 7468 6520 5370 6563  ated by the Spec
+0000b9a0: 456d 752c 2053 7075 6420 616e 6420 5a65  Emu, Spud and Ze
+0000b9b0: 726f 2065 6d75 6c61 746f 7273 0a2a 204d  ro emulators.* M
+0000b9c0: 6170 2066 696c 6573 2063 7265 6174 6564  ap files created
+0000b9d0: 2062 7920 7468 6520 5370 6563 456d 7520   by the SpecEmu 
+0000b9e0: 616e 6420 5a38 3020 656d 756c 6174 6f72  and Z80 emulator
+0000b9f0: 730a 0a49 6620 7468 6520 6669 6c65 2073  s..If the file s
+0000ba00: 7065 6369 6669 6564 2062 7920 7468 6520  pecified by the 
+0000ba10: 6060 2d6d 6060 206f 7074 696f 6e20 6973  ``-m`` option is
+0000ba20: 2038 3139 3220 6279 7465 7320 6c6f 6e67   8192 bytes long
+0000ba30: 2c20 6974 2069 7320 6173 7375 6d65 6420  , it is assumed 
+0000ba40: 746f 0a62 6520 6120 5a38 3020 6d61 7020  to.be a Z80 map 
+0000ba50: 6669 6c65 3b20 6966 2069 7420 6973 2036  file; if it is 6
+0000ba60: 3535 3336 2062 7974 6573 206c 6f6e 672c  5536 bytes long,
+0000ba70: 2069 7420 6973 2061 7373 756d 6564 2074   it is assumed t
+0000ba80: 6f20 6265 2061 2053 7065 6345 6d75 206d  o be a SpecEmu m
+0000ba90: 6170 0a66 696c 653b 206f 7468 6572 7769  ap.file; otherwi
+0000baa0: 7365 2069 7420 6973 2061 7373 756d 6564  se it is assumed
+0000bab0: 2074 6f20 6265 2069 6e20 6f6e 6520 6f66   to be in one of
+0000bac0: 2074 6865 206f 7468 6572 2073 7570 706f   the other suppo
+0000bad0: 7274 6564 2066 6f72 6d61 7473 2e0a 0a2e  rted formats....
+0000bae0: 2e20 5f73 6e61 3263 746c 2d63 6f6e 663a  . _sna2ctl-conf:
+0000baf0: 0a0a 436f 6e66 6967 7572 6174 696f 6e0a  ..Configuration.
+0000bb00: 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 6073  ^^^^^^^^^^^^^.`s
+0000bb10: 6e61 3263 746c 2e70 7960 2077 696c 6c20  na2ctl.py` will 
+0000bb20: 7265 6164 2063 6f6e 6669 6775 7261 7469  read configurati
+0000bb30: 6f6e 2066 726f 6d20 6120 6669 6c65 206e  on from a file n
+0000bb40: 616d 6564 2060 736b 6f6f 6c6b 6974 2e69  amed `skoolkit.i
+0000bb50: 6e69 6020 696e 2074 6865 0a63 7572 7265  ni` in the.curre
+0000bb60: 6e74 2077 6f72 6b69 6e67 2064 6972 6563  nt working direc
+0000bb70: 746f 7279 206f 7220 696e 2060 7e2f 2e73  tory or in `~/.s
+0000bb80: 6b6f 6f6c 6b69 7460 2c20 6966 2070 7265  koolkit`, if pre
+0000bb90: 7365 6e74 2e20 5468 6520 7265 636f 676e  sent. The recogn
+0000bba0: 6973 6564 0a63 6f6e 6669 6775 7261 7469  ised.configurati
+0000bbb0: 6f6e 2070 6172 616d 6574 6572 7320 6172  on parameters ar
+0000bbc0: 653a 0a0a 2a20 6060 4469 6374 696f 6e61  e:..* ``Dictiona
+0000bbd0: 7279 6060 202d 2074 6865 206e 616d 6520  ry`` - the name 
+0000bbe0: 6f66 2061 2066 696c 6520 636f 6e74 6169  of a file contai
+0000bbf0: 6e69 6e67 2061 206c 6973 7420 6f66 2061  ning a list of a
+0000bc00: 6c6c 6f77 6564 2077 6f72 6473 2c20 6f6e  llowed words, on
+0000bc10: 650a 2020 7065 7220 6c69 6e65 3b20 6966  e.  per line; if
+0000bc20: 2073 7065 6369 6669 6564 2c20 6120 7374   specified, a st
+0000bc30: 7269 6e67 206f 6620 6368 6172 6163 7465  ring of characte
+0000bc40: 7273 2077 696c 6c20 6265 206d 6172 6b65  rs will be marke
+0000bc50: 6420 6173 2074 6578 7420 6f6e 6c79 2069  d as text only i
+0000bc60: 660a 2020 6974 2063 6f6e 7461 696e 7320  f.  it contains 
+0000bc70: 6174 206c 6561 7374 206f 6e65 206f 6620  at least one of 
+0000bc80: 7468 6520 776f 7264 7320 696e 2074 6869  the words in thi
+0000bc90: 7320 6669 6c65 0a2a 2060 6048 6578 6060  s file.* ``Hex``
+0000bca0: 202d 2077 7269 7465 2061 6464 7265 7373   - write address
+0000bcb0: 6573 2069 6e20 6465 6369 6d61 6c20 2860  es in decimal (`
+0000bcc0: 6030 6060 2c20 7468 6520 6465 6661 756c  `0``, the defaul
+0000bcd0: 7429 2c20 6c6f 7765 7220 6361 7365 0a20  t), lower case. 
+0000bce0: 2068 6578 6164 6563 696d 616c 2028 6060   hexadecimal (``
+0000bcf0: 3160 6029 2c20 206f 7220 7570 7065 7220  1``),  or upper 
+0000bd00: 6361 7365 2068 6578 6164 6563 696d 616c  case hexadecimal
+0000bd10: 2028 6060 3260 6029 0a2a 2060 6054 6578   (``2``).* ``Tex
+0000bd20: 7443 6861 7273 6060 202d 2063 6861 7261  tChars`` - chara
+0000bd30: 6374 6572 7320 656c 6967 6962 6c65 2066  cters eligible f
+0000bd40: 6f72 2062 6569 6e67 206d 6172 6b65 6420  or being marked 
+0000bd50: 6173 2074 6578 7420 2864 6566 6175 6c74  as text (default
+0000bd60: 3a0a 2020 6c65 7474 6572 732c 2064 6967  :.  letters, dig
+0000bd70: 6974 732c 2073 7061 6365 2c20 616e 6420  its, space, and 
+0000bd80: 7468 6520 666f 6c6c 6f77 696e 6720 6e6f  the following no
+0000bd90: 6e2d 616c 7068 616e 756d 6572 6963 2063  n-alphanumeric c
+0000bda0: 6861 7261 6374 6572 733a 0a20 2060 6021  haracters:.  ``!
+0000bdb0: 2224 2526 5c27 2829 2a2b 2c2d 2e2f 3a3b  "$%&\'()*+,-./:;
+0000bdc0: 3c3d 3e3f 5b5d 6060 290a 2a20 6060 5465  <=>?[]``).* ``Te
+0000bdd0: 7874 4d69 6e4c 656e 6774 6843 6f64 6560  xtMinLengthCode`
+0000bde0: 6020 2d20 7468 6520 6d69 6e69 6d75 6d20  ` - the minimum 
+0000bdf0: 6c65 6e67 7468 206f 6620 6120 7374 7269  length of a stri
+0000be00: 6e67 206f 6620 6368 6172 6163 7465 7273  ng of characters
+0000be10: 2065 6c69 6769 626c 650a 2020 666f 7220   eligible.  for 
+0000be20: 6265 696e 6720 6d61 726b 6564 2061 7320  being marked as 
+0000be30: 7465 7874 2069 6e20 6120 626c 6f63 6b20  text in a block 
+0000be40: 6964 656e 7469 6669 6564 2061 7320 636f  identified as co
+0000be50: 6465 2028 6465 6661 756c 743a 2060 6031  de (default: ``1
+0000be60: 3260 6029 0a2a 2060 6054 6578 744d 696e  2``).* ``TextMin
+0000be70: 4c65 6e67 7468 4461 7461 6060 202d 2074  LengthData`` - t
+0000be80: 6865 206d 696e 696d 756d 206c 656e 6774  he minimum lengt
+0000be90: 6820 6f66 2061 2073 7472 696e 6720 6f66  h of a string of
+0000bea0: 2063 6861 7261 6374 6572 7320 656c 6967   characters elig
+0000beb0: 6962 6c65 0a20 2066 6f72 2062 6569 6e67  ible.  for being
+0000bec0: 206d 6172 6b65 6420 6173 2074 6578 7420   marked as text 
+0000bed0: 696e 2061 2062 6c6f 636b 2069 6465 6e74  in a block ident
+0000bee0: 6966 6965 6420 6173 2064 6174 6120 2864  ified as data (d
+0000bef0: 6566 6175 6c74 3a20 6060 3360 6029 0a0a  efault: ``3``)..
+0000bf00: 436f 6e66 6967 7572 6174 696f 6e20 7061  Configuration pa
+0000bf10: 7261 6d65 7465 7273 206d 7573 7420 6170  rameters must ap
+0000bf20: 7065 6172 2069 6e20 6120 6060 5b73 6e61  pear in a ``[sna
+0000bf30: 3263 746c 5d60 6020 7365 6374 696f 6e2e  2ctl]`` section.
+0000bf40: 2046 6f72 2065 7861 6d70 6c65 2c0a 746f   For example,.to
+0000bf50: 206d 616b 6520 6073 6e61 3263 746c 2e70   make `sna2ctl.p
+0000bf60: 7960 2077 7269 7465 2075 7070 6572 2063  y` write upper c
+0000bf70: 6173 6520 6865 7861 6465 6369 6d61 6c20  ase hexadecimal 
+0000bf80: 6164 6472 6573 7365 7320 6279 2064 6566  addresses by def
+0000bf90: 6175 6c74 2028 7769 7468 6f75 740a 6861  ault (without.ha
+0000bfa0: 7669 6e67 2074 6f20 7573 6520 7468 6520  ving to use the 
+0000bfb0: 6060 2d68 6060 206f 7074 696f 6e20 6f6e  ``-h`` option on
+0000bfc0: 2074 6865 2063 6f6d 6d61 6e64 206c 696e   the command lin
+0000bfd0: 6529 2c20 6164 6420 7468 6520 666f 6c6c  e), add the foll
+0000bfe0: 6f77 696e 6720 7365 6374 696f 6e0a 746f  owing section.to
+0000bff0: 2060 736b 6f6f 6c6b 6974 2e69 6e69 603a   `skoolkit.ini`:
+0000c000: 3a0a 0a20 205b 736e 6132 6374 6c5d 0a20  :..  [sna2ctl]. 
+0000c010: 2048 6578 3d32 0a0a 436f 6e66 6967 7572   Hex=2..Configur
+0000c020: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
+0000c030: 206d 6179 2061 6c73 6f20 6265 2073 6574   may also be set
+0000c040: 206f 6e20 7468 6520 636f 6d6d 616e 6420   on the command 
+0000c050: 6c69 6e65 2062 7920 7573 696e 6720 7468  line by using th
+0000c060: 650a 6060 2d2d 696e 6960 6020 6f70 7469  e.``--ini`` opti
+0000c070: 6f6e 2e20 5061 7261 6d65 7465 7220 7661  on. Parameter va
+0000c080: 6c75 6573 2073 6574 2074 6869 7320 7761  lues set this wa
+0000c090: 7920 7769 6c6c 206f 7665 7272 6964 6520  y will override 
+0000c0a0: 616e 7920 666f 756e 6420 696e 0a60 736b  any found in.`sk
+0000c0b0: 6f6f 6c6b 6974 2e69 6e69 602e 0a0a 2b2d  oolkit.ini`...+-
+0000c0c0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000c0d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c0e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c0f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c100: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+0000c110: 5665 7273 696f 6e20 7c20 4368 616e 6765  Version | Change
+0000c120: 7320 2020 2020 2020 2020 2020 2020 2020  s               
+0000c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c150: 2020 2020 2020 2020 2020 2020 7c0a 2b3d              |.+=
+0000c160: 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d  ========+=======
+0000c170: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000c180: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000c190: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000c1a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a 7c20  ============+.| 
+0000c1b0: 392e 3220 2020 2020 7c20 4164 6465 6420  9.2     | Added 
+0000c1c0: 7375 7070 6f72 7420 666f 7220 7265 6164  support for read
+0000c1d0: 696e 6720 636f 6465 2065 7865 6375 7469  ing code executi
+0000c1e0: 6f6e 206d 6170 7320 7072 6f64 7563 6564  on maps produced
+0000c1f0: 2062 7920 2020 2020 2020 2020 7c0a 7c20   by         |.| 
+0000c200: 2020 2020 2020 2020 7c20 3a72 6566 3a60          | :ref:`
+0000c210: 727a 7870 6c61 792e 7079 6020 2020 2020  rzxplay.py`     
+0000c220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c240: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000c250: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000c260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+0000c2a0: 372e 3220 2020 2020 7c20 4164 6465 6420  7.2     | Added 
+0000c2b0: 7468 6520 6060 4469 6374 696f 6e61 7279  the ``Dictionary
+0000c2c0: 6060 2063 6f6e 6669 6775 7261 7469 6f6e  `` configuration
+0000c2d0: 2070 6172 616d 6574 6572 2020 2020 2020   parameter      
+0000c2e0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000c2f0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000c300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+0000c340: 372e 3120 2020 2020 7c20 436f 6e66 6967  7.1     | Config
+0000c350: 7572 6174 696f 6e20 6973 2072 6561 6420  uration is read 
+0000c360: 6672 6f6d 2060 736b 6f6f 6c6b 6974 2e69  from `skoolkit.i
+0000c370: 6e69 6020 6966 2070 7265 7365 6e74 3b20  ni` if present; 
+0000c380: 6164 6465 6420 7468 6520 2020 7c0a 7c20  added the   |.| 
+0000c390: 2020 2020 2020 2020 7c20 6060 2d2d 696e          | ``--in
+0000c3a0: 6960 6020 616e 6420 6060 2d2d 7368 6f77  i`` and ``--show
+0000c3b0: 2d63 6f6e 6669 6760 6020 6f70 7469 6f6e  -config`` option
+0000c3c0: 7320 2020 2020 2020 2020 2020 2020 2020  s               
+0000c3d0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000c3e0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000c3f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c420: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+0000c430: 372e 3020 2020 2020 7c20 4e65 7720 2020  7.0     | New   
+0000c440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c470: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+0000c480: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+0000c490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000c4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e  ------------+...
+0000c4d0: 2e20 5f73 6e61 3269 6d67 2e70 793a 0a0a  . _sna2img.py:..
+0000c4e0: 736e 6132 696d 672e 7079 0a2d 2d2d 2d2d  sna2img.py.-----
+0000c4f0: 2d2d 2d2d 2d0a 6073 6e61 3269 6d67 2e70  -----.`sna2img.p
+0000c500: 7960 2063 6f6e 7665 7274 7320 7468 6520  y` converts the 
+0000c510: 7363 7265 656e 7368 6f74 206f 7220 6f74  screenshot or ot
+0000c520: 6865 7220 6772 6170 6869 6320 6461 7461  her graphic data
+0000c530: 2069 6e20 6120 6269 6e61 7279 2028 7261   in a binary (ra
+0000c540: 770a 6d65 6d6f 7279 2920 6669 6c65 2c20  w.memory) file, 
+0000c550: 5343 5220 6669 6c65 2c20 736b 6f6f 6c20  SCR file, skool 
+0000c560: 6669 6c65 2c20 6f72 2053 4e41 2f53 5a58  file, or SNA/SZX
+0000c570: 2f5a 3830 2073 6e61 7073 686f 7420 696e  /Z80 snapshot in
+0000c580: 746f 2061 2050 4e47 2066 696c 652e 0a46  to a PNG file..F
+0000c590: 6f72 2065 7861 6d70 6c65 3a3a 0a0a 2020  or example::..  
+0000c5a0: 2420 736e 6132 696d 672e 7079 2067 616d  $ sna2img.py gam
+0000c5b0: 652e 7363 720a 0a77 696c 6c20 6372 6561  e.scr..will crea
+0000c5c0: 7465 2061 2066 696c 6520 6e61 6d65 6420  te a file named 
+0000c5d0: 6067 616d 652e 706e 6760 2e0a 0a54 6f20  `game.png`...To 
+0000c5e0: 6c69 7374 2074 6865 206f 7074 696f 6e73  list the options
+0000c5f0: 2073 7570 706f 7274 6564 2062 7920 6073   supported by `s
+0000c600: 6e61 3269 6d67 2e70 7960 2c20 7275 6e20  na2img.py`, run 
+0000c610: 6974 2077 6974 6820 6e6f 2061 7267 756d  it with no argum
+0000c620: 656e 7473 3a3a 0a0a 2020 7573 6167 653a  ents::..  usage:
+0000c630: 2073 6e61 3269 6d67 2e70 7920 5b6f 7074   sna2img.py [opt
+0000c640: 696f 6e73 5d20 494e 5055 5420 5b4f 5554  ions] INPUT [OUT
+0000c650: 5055 545d 0a0a 2020 436f 6e76 6572 7420  PUT]..  Convert 
+0000c660: 6120 5370 6563 7472 756d 2073 6372 6565  a Spectrum scree
+0000c670: 6e73 686f 7420 6f72 206f 7468 6572 2067  nshot or other g
+0000c680: 7261 7068 6963 2064 6174 6120 696e 746f  raphic data into
+0000c690: 2061 2050 4e47 2066 696c 652e 2049 4e50   a PNG file. INP
+0000c6a0: 5554 206d 6179 0a20 2062 6520 6120 6269  UT may.  be a bi
+0000c6b0: 6e61 7279 2028 7261 7720 6d65 6d6f 7279  nary (raw memory
+0000c6c0: 2920 6669 6c65 2c20 6120 5343 5220 6669  ) file, a SCR fi
+0000c6d0: 6c65 2c20 6120 736b 6f6f 6c20 6669 6c65  le, a skool file
+0000c6e0: 2c20 6f72 2061 2053 4e41 2c20 535a 5820  , or a SNA, SZX 
+0000c6f0: 6f72 205a 3830 0a20 2073 6e61 7073 686f  or Z80.  snapsho
+0000c700: 742e 0a0a 2020 4f70 7469 6f6e 733a 0a20  t...  Options:. 
+0000c710: 2020 202d 622c 202d 2d62 6669 7820 2020     -b, --bfix   
+0000c720: 2020 2020 2020 2020 2050 6172 7365 2061           Parse a
+0000c730: 2073 6b6f 6f6c 2066 696c 6520 696e 2040   skool file in @
+0000c740: 6266 6978 206d 6f64 652e 0a20 2020 202d  bfix mode..    -
+0000c750: 422c 202d 2d62 696e 6172 7920 2020 2020  B, --binary     
+0000c760: 2020 2020 2052 6561 6420 7468 6520 696e       Read the in
+0000c770: 7075 7420 6173 2061 2062 696e 6172 7920  put as a binary 
+0000c780: 2872 6177 206d 656d 6f72 7929 2066 696c  (raw memory) fil
+0000c790: 652e 0a20 2020 202d 6520 4d41 4352 4f2c  e..    -e MACRO,
+0000c7a0: 202d 2d65 7870 616e 6420 4d41 4352 4f0a   --expand MACRO.
+0000c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c7c0: 2020 2020 2020 2020 2020 4578 7061 6e64            Expand
+0000c7d0: 2061 2023 464f 4e54 2c20 2353 4352 2c20   a #FONT, #SCR, 
+0000c7e0: 2355 4447 206f 7220 2355 4447 4152 5241  #UDG or #UDGARRA
+0000c7f0: 5920 6d61 6372 6f2e 2054 6865 2027 2327  Y macro. The '#'
+0000c800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c810: 2020 2020 2020 2020 2020 2070 7265 6669             prefi
+0000c820: 7820 6d61 7920 6265 206f 6d69 7474 6564  x may be omitted
+0000c830: 2e0a 2020 2020 2d66 204e 2c20 2d2d 666c  ..    -f N, --fl
+0000c840: 6970 204e 2020 2020 2020 2020 466c 6970  ip N        Flip
+0000c850: 2074 6865 2069 6d61 6765 2068 6f72 697a   the image horiz
+0000c860: 6f6e 7461 6c6c 7920 284e 3d31 292c 2076  ontally (N=1), v
+0000c870: 6572 7469 6361 6c6c 7920 284e 3d32 292c  ertically (N=2),
+0000c880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c890: 2020 2020 2020 2020 2020 206f 7220 626f             or bo
+0000c8a0: 7468 2028 4e3d 3329 2e0a 2020 2020 2d69  th (N=3)..    -i
+0000c8b0: 2c20 2d2d 696e 7665 7274 2020 2020 2020  , --invert      
+0000c8c0: 2020 2020 496e 7665 7274 2076 6964 656f      Invert video
+0000c8d0: 2066 6f72 2063 656c 6c73 2074 6861 7420   for cells that 
+0000c8e0: 6172 6520 666c 6173 6869 6e67 2e0a 2020  are flashing..  
+0000c8f0: 2020 2d6d 2073 7263 2c73 697a 652c 6465    -m src,size,de
+0000c900: 7374 2c20 2d2d 6d6f 7665 2073 7263 2c73  st, --move src,s
+0000c910: 697a 652c 6465 7374 0a20 2020 2020 2020  ize,dest.       
+0000c920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c930: 2020 204d 6f76 6520 6120 626c 6f63 6b20     Move a block 
+0000c940: 6f66 2062 7974 6573 206f 6620 7468 6520  of bytes of the 
+0000c950: 6769 7665 6e20 7369 7a65 2066 726f 6d20  given size from 
+0000c960: 7372 6320 746f 0a20 2020 2020 2020 2020  src to.         
+0000c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c980: 2064 6573 742e 2054 6869 7320 6f70 7469   dest. This opti
+0000c990: 6f6e 206d 6179 2062 6520 7573 6564 206d  on may be used m
+0000c9a0: 756c 7469 706c 6520 7469 6d65 732e 0a20  ultiple times.. 
+0000c9b0: 2020 202d 6e2c 202d 2d6e 6f2d 616e 696d     -n, --no-anim
+0000c9c0: 6174 696f 6e20 2020 2044 6f20 6e6f 7420  ation    Do not 
+0000c9d0: 616e 696d 6174 6520 666c 6173 6869 6e67  animate flashing
+0000c9e0: 2063 656c 6c73 2e0a 2020 2020 2d6f 2058   cells..    -o X
+0000c9f0: 2c59 2c20 2d2d 6f72 6967 696e 2058 2c59  ,Y, --origin X,Y
+0000ca00: 2020 546f 702d 6c65 6674 2063 726f 7020    Top-left crop 
+0000ca10: 6174 2028 582c 5929 2e0a 2020 2020 2d4f  at (X,Y)..    -O
+0000ca20: 204f 5247 2c20 2d2d 6f72 6720 4f52 4720   ORG, --org ORG 
+0000ca30: 2020 2020 5365 7420 7468 6520 6f72 6967      Set the orig
+0000ca40: 696e 2061 6464 7265 7373 206f 6620 6120  in address of a 
+0000ca50: 6269 6e61 7279 2066 696c 6520 2864 6566  binary file (def
+0000ca60: 6175 6c74 3a0a 2020 2020 2020 2020 2020  ault:.          
+0000ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ca80: 3635 3533 3620 6d69 6e75 7320 7468 6520  65536 minus the 
+0000ca90: 6c65 6e67 7468 206f 6620 7468 6520 6669  length of the fi
+0000caa0: 6c65 292e 0a20 2020 202d 7020 615b 2d62  le)..    -p a[-b
+0000cab0: 5b2d 635d 5d2c 5b5e 2b5d 762c 202d 2d70  [-c]],[^+]v, --p
+0000cac0: 6f6b 6520 615b 2d62 5b2d 635d 5d2c 5b5e  oke a[-b[-c]],[^
+0000cad0: 2b5d 760a 2020 2020 2020 2020 2020 2020  +]v.            
+0000cae0: 2020 2020 2020 2020 2020 2020 2020 504f                PO
+0000caf0: 4b45 204e 2c76 2066 6f72 204e 2069 6e20  KE N,v for N in 
+0000cb00: 7b61 2c20 612b 632c 2061 2b32 632e 2e2e  {a, a+c, a+2c...
+0000cb10: 2c20 627d 2e20 5072 6566 6978 2027 7627  , b}. Prefix 'v'
+0000cb20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cb30: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+0000cb40: 275e 2720 746f 2070 6572 666f 726d 2061  '^' to perform a
+0000cb50: 6e20 584f 5220 6f70 6572 6174 696f 6e2c  n XOR operation,
+0000cb60: 206f 7220 272b 2720 746f 0a20 2020 2020   or '+' to.     
+0000cb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cb80: 2020 2020 2070 6572 666f 726d 2061 6e20       perform an 
+0000cb90: 4144 4420 6f70 6572 6174 696f 6e2e 2054  ADD operation. T
+0000cba0: 6869 7320 6f70 7469 6f6e 206d 6179 2062  his option may b
+0000cbb0: 6520 7573 6564 0a20 2020 2020 2020 2020  e used.         
+0000cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbd0: 206d 756c 7469 706c 6520 7469 6d65 732e   multiple times.
+0000cbe0: 0a20 2020 202d 7220 4e2c 202d 2d72 6f74  .    -r N, --rot
+0000cbf0: 6174 6520 4e20 2020 2020 2052 6f74 6174  ate N      Rotat
+0000cc00: 6520 7468 6520 696d 6167 6520 3930 2a4e  e the image 90*N
+0000cc10: 2064 6567 7265 6573 2063 6c6f 636b 7769   degrees clockwi
+0000cc20: 7365 2e0a 2020 2020 2d73 2053 4341 4c45  se..    -s SCALE
+0000cc30: 2c20 2d2d 7363 616c 6520 5343 414c 450a  , --scale SCALE.
+0000cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc50: 2020 2020 2020 2020 2020 5365 7420 7468            Set th
+0000cc60: 6520 7363 616c 6520 6f66 2074 6865 2069  e scale of the i
+0000cc70: 6d61 6765 2028 6465 6661 756c 743d 3129  mage (default=1)
+0000cc80: 2e0a 2020 2020 2d53 2057 7848 2c20 2d2d  ..    -S WxH, --
+0000cc90: 7369 7a65 2057 7848 2020 2020 4372 6f70  size WxH    Crop
+0000cca0: 2074 6f20 7468 6973 2077 6964 7468 2061   to this width a
+0000ccb0: 6e64 2068 6569 6768 7420 2869 6e20 7469  nd height (in ti
+0000ccc0: 6c65 7329 2e0a 2020 2020 2d56 2c20 2d2d  les)..    -V, --
+0000ccd0: 7665 7273 696f 6e20 2020 2020 2020 2020  version         
+0000cce0: 5368 6f77 2053 6b6f 6f6c 4b69 7420 7665  Show SkoolKit ve
+0000ccf0: 7273 696f 6e20 6e75 6d62 6572 2061 6e64  rsion number and
+0000cd00: 2065 7869 742e 0a0a 2b2d 2d2d 2d2d 2d2d   exit...+-------
+0000cd10: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000cd20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cd30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cd40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cd50: 2d2d 2d2d 2d2d 2b0a 7c20 5665 7273 696f  ------+.| Versio
+0000cd60: 6e20 7c20 4368 616e 6765 7320 2020 2020  n | Changes     
+0000cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cda0: 2020 2020 2020 7c0a 2b3d 3d3d 3d3d 3d3d        |.+=======
+0000cdb0: 3d3d 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ==+=============
+0000cdc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000cdd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000cde0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000cdf0: 3d3d 3d3d 3d3d 2b0a 7c20 362e 3220 2020  ======+.| 6.2   
+0000ce00: 2020 7c20 4164 6465 6420 7468 6520 6060    | Added the ``
+0000ce10: 2d2d 6269 6e61 7279 6060 2061 6e64 2060  --binary`` and `
+0000ce20: 602d 2d6f 7267 6060 206f 7074 696f 6e73  `--org`` options
+0000ce30: 2061 6e64 2074 6865 2061 6269 6c69 7479   and the ability
+0000ce40: 2074 6f20 2020 7c0a 7c20 2020 2020 2020   to   |.|       
+0000ce50: 2020 7c20 7265 6164 2062 696e 6172 7920    | read binary 
+0000ce60: 2872 6177 206d 656d 6f72 7929 2066 696c  (raw memory) fil
+0000ce70: 6573 3b20 7468 6520 6060 2d2d 6d6f 7665  es; the ``--move
+0000ce80: 6060 2061 6e64 2060 602d 2d70 6f6b 6560  `` and ``--poke`
+0000ce90: 6020 2020 2020 7c0a 7c20 2020 2020 2020  `     |.|       
+0000cea0: 2020 7c20 6f70 7469 6f6e 7320 6163 6365    | options acce
+0000ceb0: 7074 2068 6578 6164 6563 696d 616c 2069  pt hexadecimal i
+0000cec0: 6e74 6567 6572 7320 7072 6566 6978 6564  ntegers prefixed
+0000ced0: 2062 7920 2730 7827 2020 2020 2020 2020   by '0x'        
+0000cee0: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000cef0: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000cf00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cf10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cf20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000cf30: 2d2d 2d2d 2d2d 2b0a 7c20 362e 3120 2020  ------+.| 6.1   
+0000cf40: 2020 7c20 4164 6465 6420 7468 6520 6162    | Added the ab
+0000cf50: 696c 6974 7920 746f 2072 6561 6420 736b  ility to read sk
+0000cf60: 6f6f 6c20 6669 6c65 733b 2061 6464 6564  ool files; added
+0000cf70: 2074 6865 2060 602d 2d62 6669 7860 6020   the ``--bfix`` 
+0000cf80: 616e 6420 2020 7c0a 7c20 2020 2020 2020  and   |.|       
+0000cf90: 2020 7c20 6060 2d2d 6d6f 7665 6060 206f    | ``--move`` o
+0000cfa0: 7074 696f 6e73 2020 2020 2020 2020 2020  ptions          
+0000cfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cfd0: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000cfe0: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000cff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d020: 2d2d 2d2d 2d2d 2b0a 7c20 362e 3020 2020  ------+.| 6.0   
+0000d030: 2020 7c20 4164 6465 6420 7468 6520 6060    | Added the ``
+0000d040: 2d2d 6578 7061 6e64 6060 206f 7074 696f  --expand`` optio
+0000d050: 6e20 2020 2020 2020 2020 2020 2020 2020  n               
+0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d070: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000d080: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000d090: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d0b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d0c0: 2d2d 2d2d 2d2d 2b0a 7c20 352e 3420 2020  ------+.| 5.4   
+0000d0d0: 2020 7c20 4e65 7720 2020 2020 2020 2020    | New         
+0000d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d110: 2020 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d        |.+-------
+0000d120: 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  --+-------------
+0000d130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000d160: 2d2d 2d2d 2d2d 2b0a 0a2e 2e20 5f73 6e61  ------+.... _sna
+0000d170: 3273 6b6f 6f6c 2e70 793a 0a0a 736e 6132  2skool.py:..sna2
+0000d180: 736b 6f6f 6c2e 7079 0a2d 2d2d 2d2d 2d2d  skool.py.-------
+0000d190: 2d2d 2d2d 2d0a 6073 6e61 3273 6b6f 6f6c  -----.`sna2skool
+0000d1a0: 2e70 7960 2063 6f6e 7665 7274 7320 6120  .py` converts a 
+0000d1b0: 6269 6e61 7279 2028 7261 7720 6d65 6d6f  binary (raw memo
+0000d1c0: 7279 2920 6669 6c65 206f 7220 6120 534e  ry) file or a SN
+0000d1d0: 412c 2053 5a58 206f 7220 5a38 300a 736e  A, SZX or Z80.sn
+0000d1e0: 6170 7368 6f74 2069 6e74 6f20 6120 736b  apshot into a sk
+0000d1f0: 6f6f 6c20 6669 6c65 2e20 466f 7220 6578  ool file. For ex
+0000d200: 616d 706c 653a 3a0a 0a20 2024 2073 6e61  ample::..  $ sna
+0000d210: 3273 6b6f 6f6c 2e70 7920 6761 6d65 2e7a  2skool.py game.z
+0000d220: 3830 203e 2067 616d 652e 736b 6f6f 6c0a  80 > game.skool.
+0000d230: 0a4e 6f77 2060 6761 6d65 2e73 6b6f 6f6c  .Now `game.skool
+0000d240: 6020 6361 6e20 6265 2063 6f6e 7665 7274  ` can be convert
+0000d250: 6564 2069 6e74 6f20 6120 6272 6f77 7361  ed into a browsa
+0000d260: 626c 6520 4854 4d4c 2064 6973 6173 7365  ble HTML disasse
+0000d270: 6d62 6c79 2075 7369 6e67 0a3a 7265 663a  mbly using.:ref:
+0000d280: 6073 6b6f 6f6c 3268 746d 6c2e 7079 203c  `skool2html.py <
+0000d290: 736b 6f6f 6c32 6874 6d6c 2e70 793e 602c  skool2html.py>`,
+0000d2a0: 206f 7220 696e 746f 2061 6e20 6173 7365   or into an asse
+0000d2b0: 6d62 6c65 722d 7265 6164 7920 4153 4d20  mbler-ready ASM 
+0000d2c0: 6669 6c65 2075 7369 6e67 0a3a 7265 663a  file using.:ref:
+0000d2d0: 6073 6b6f 6f6c 3261 736d 2e70 7920 3c73  `skool2asm.py <s
+0000d2e0: 6b6f 6f6c 3261 736d 2e70 793e 602e 0a0a  kool2asm.py>`...
+0000d2f0: 6073 6e61 3273 6b6f 6f6c 2e70 7960 2073  `sna2skool.py` s
+0000d300: 7570 706f 7274 7320 7365 7665 7261 6c20  upports several 
+0000d310: 6f70 7469 6f6e 733b 2072 756e 2069 7420  options; run it 
+0000d320: 7769 7468 206e 6f20 6172 6775 6d65 6e74  with no argument
+0000d330: 7320 746f 2073 6565 2061 0a6c 6973 743a  s to see a.list:
+0000d340: 3a0a 0a20 2075 7361 6765 3a20 736e 6132  :..  usage: sna2
+0000d350: 736b 6f6f 6c2e 7079 205b 6f70 7469 6f6e  skool.py [option
+0000d360: 735d 2046 494c 450a 0a20 2043 6f6e 7665  s] FILE..  Conve
+0000d370: 7274 2061 2062 696e 6172 7920 2872 6177  rt a binary (raw
+0000d380: 206d 656d 6f72 7929 2066 696c 6520 6f72   memory) file or
+0000d390: 2061 2053 4e41 2c20 535a 5820 6f72 205a   a SNA, SZX or Z
+0000d3a0: 3830 2073 6e61 7073 686f 7420 696e 746f  80 snapshot into
+0000d3b0: 2061 2073 6b6f 6f6c 0a20 2066 696c 652e   a skool.  file.
+0000d3c0: 2046 494c 4520 6d61 7920 6265 2061 2072   FILE may be a r
+0000d3d0: 6567 756c 6172 2066 696c 652c 206f 7220  egular file, or 
+0000d3e0: 272d 2720 666f 7220 7374 616e 6461 7264  '-' for standard
+0000d3f0: 2069 6e70 7574 2e0a 0a20 204f 7074 696f   input...  Optio
+0000d400: 6e73 3a0a 2020 2020 2d63 2050 4154 482c  ns:.    -c PATH,
+0000d410: 202d 2d63 746c 2050 4154 4820 2020 5370   --ctl PATH   Sp
+0000d420: 6563 6966 7920 6120 636f 6e74 726f 6c20  ecify a control 
+0000d430: 6669 6c65 2074 6f20 7573 652c 206f 7220  file to use, or 
+0000d440: 6120 6469 7265 6374 6f72 7920 6672 6f6d  a directory from
+0000d450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d460: 2020 2020 2020 2020 2020 2077 6869 6368             which
+0000d470: 2074 6f20 7265 6164 2063 6f6e 7472 6f6c   to read control
+0000d480: 2066 696c 6573 2e20 5041 5448 206d 6179   files. PATH may
+0000d490: 2062 6520 272d 2720 666f 720a 2020 2020   be '-' for.    
+0000d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4b0: 2020 2020 2020 7374 616e 6461 7264 2069        standard i
+0000d4c0: 6e70 7574 2c20 6f72 2027 3027 2074 6f20  nput, or '0' to 
+0000d4d0: 7573 6520 6e6f 2063 6f6e 7472 6f6c 2066  use no control f
+0000d4e0: 696c 652e 2054 6869 730a 2020 2020 2020  ile. This.      
+0000d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d500: 2020 2020 6f70 7469 6f6e 206d 6179 2062      option may b
+0000d510: 6520 7573 6564 206d 756c 7469 706c 6520  e used multiple 
+0000d520: 7469 6d65 732e 0a20 2020 202d 6420 5349  times..    -d SI
+0000d530: 5a45 2c20 2d2d 6465 6662 2053 495a 4520  ZE, --defb SIZE 
+0000d540: 2044 6973 6173 7365 6d62 6c65 2061 7320   Disassemble as 
+0000d550: 4445 4642 2073 7461 7465 6d65 6e74 7320  DEFB statements 
+0000d560: 6f66 2074 6869 7320 7369 7a65 2e0a 2020  of this size..  
+0000d570: 2020 2d65 2041 4444 522c 202d 2d65 6e64    -e ADDR, --end
+0000d580: 2041 4444 5220 2020 5374 6f70 2064 6973   ADDR   Stop dis
+0000d590: 6173 7365 6d62 6c69 6e67 2061 7420 7468  assembling at th
+0000d5a0: 6973 2061 6464 7265 7373 2028 6465 6661  is address (defa
+0000d5b0: 756c 743d 3635 3533 3629 2e0a 2020 2020  ult=65536)..    
+0000d5c0: 2d48 2c20 2d2d 6865 7820 2020 2020 2020  -H, --hex       
+0000d5d0: 2020 2020 2020 5772 6974 6520 6865 7861        Write hexa
+0000d5e0: 6465 6369 6d61 6c20 6164 6472 6573 7365  decimal addresse
+0000d5f0: 7320 616e 6420 6f70 6572 616e 6473 2069  s and operands i
+0000d600: 6e20 7468 650a 2020 2020 2020 2020 2020  n the.          
+0000d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d620: 6469 7361 7373 656d 626c 792e 0a20 2020  disassembly..   
+0000d630: 202d 4920 703d 762c 202d 2d69 6e69 2070   -I p=v, --ini p
+0000d640: 3d76 2020 2020 2053 6574 2074 6865 2076  =v     Set the v
+0000d650: 616c 7565 206f 6620 7468 6520 636f 6e66  alue of the conf
+0000d660: 6967 7572 6174 696f 6e20 7061 7261 6d65  iguration parame
+0000d670: 7465 7220 2770 2720 746f 0a20 2020 2020  ter 'p' to.     
+0000d680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d690: 2020 2020 2027 7627 2e20 5468 6973 206f       'v'. This o
+0000d6a0: 7074 696f 6e20 6d61 7920 6265 2075 7365  ption may be use
+0000d6b0: 6420 6d75 6c74 6970 6c65 2074 696d 6573  d multiple times
+0000d6c0: 2e0a 2020 2020 2d6c 2c20 2d2d 6c6f 7765  ..    -l, --lowe
+0000d6d0: 7220 2020 2020 2020 2020 2020 5772 6974  r           Writ
+0000d6e0: 6520 7468 6520 6469 7361 7373 656d 626c  e the disassembl
+0000d6f0: 7920 696e 206c 6f77 6572 2063 6173 652e  y in lower case.
+0000d700: 0a20 2020 202d 6f20 4144 4452 2c20 2d2d  .    -o ADDR, --
+0000d710: 6f72 6720 4144 4452 2020 2053 7065 6369  org ADDR   Speci
+0000d720: 6679 2074 6865 206f 7269 6769 6e20 6164  fy the origin ad
+0000d730: 6472 6573 7320 6f66 2061 2062 696e 6172  dress of a binar
+0000d740: 7920 282e 6269 6e29 2066 696c 650a 2020  y (.bin) file.  
+0000d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d760: 2020 2020 2020 2020 2864 6566 6175 6c74          (default
+0000d770: 3a20 3635 3533 3620 2d20 6c65 6e67 7468  : 65536 - length
+0000d780: 292e 0a20 2020 202d 7020 5041 4745 2c20  )..    -p PAGE, 
+0000d790: 2d2d 7061 6765 2050 4147 4520 2053 7065  --page PAGE  Spe
+0000d7a0: 6369 6679 2074 6865 2070 6167 6520 2830  cify the page (0
+0000d7b0: 2d37 2920 6f66 2061 2031 3238 4b20 736e  -7) of a 128K sn
+0000d7c0: 6170 7368 6f74 2074 6f20 6d61 7020 746f  apshot to map to
+0000d7d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d7e0: 2020 2020 2020 2020 2020 2034 3931 3532             49152
+0000d7f0: 2d36 3535 3335 2e0a 2020 2020 2d2d 7368  -65535..    --sh
+0000d800: 6f77 2d63 6f6e 6669 6720 2020 2020 2020  ow-config       
+0000d810: 2020 5368 6f77 2063 6f6e 6669 6775 7261    Show configura
+0000d820: 7469 6f6e 2070 6172 616d 6574 6572 2076  tion parameter v
+0000d830: 616c 7565 732e 0a20 2020 202d 7320 4144  alues..    -s AD
+0000d840: 4452 2c20 2d2d 7374 6172 7420 4144 4452  DR, --start ADDR
+0000d850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d860: 2020 2020 2020 2020 2020 2053 7461 7274             Start
+0000d870: 2064 6973 6173 7365 6d62 6c69 6e67 2061   disassembling a
+0000d880: 7420 7468 6973 2061 6464 7265 7373 2e0a  t this address..
+0000d890: 2020 2020 2d56 2c20 2d2d 7665 7273 696f      -V, --versio
+0000d8a0: 6e20 2020 2020 2020 2020 5368 6f77 2053  n         Show S
+0000d8b0: 6b6f 6f6c 4b69 7420 7665 7273 696f 6e20  koolKit version 
+0000d8c0: 6e75 6d62 6572 2061 6e64 2065 7869 742e  number and exit.
+0000d8d0: 0a20 2020 202d 7720 572c 202d 2d6c 696e  .    -w W, --lin
+0000d8e0: 652d 7769 6474 6820 5720 2053 6574 2074  e-width W  Set t
+0000d8f0: 6865 206d 6178 696d 756d 206c 696e 6520  he maximum line 
+0000d900: 7769 6474 6820 6f66 2074 6865 2073 6b6f  width of the sko
+0000d910: 6f6c 2066 696c 6520 2864 6566 6175 6c74  ol file (default
+0000d920: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000d930: 2020 2020 2020 2020 2020 2020 3739 292e              79).
+0000d940: 0a0a 4966 2074 6865 2069 6e70 7574 2066  ..If the input f
+0000d950: 696c 656e 616d 6520 646f 6573 206e 6f74  ilename does not
+0000d960: 2065 6e64 2077 6974 6820 272e 736e 6127   end with '.sna'
+0000d970: 2c20 272e 737a 7827 206f 7220 272e 7a38  , '.szx' or '.z8
+0000d980: 3027 2c20 6974 2069 7320 6173 7375 6d65  0', it is assume
+0000d990: 640a 746f 2062 6520 6120 6269 6e61 7279  d.to be a binary
+0000d9a0: 2066 696c 652e 0a0a 4279 2064 6566 6175   file...By defau
+0000d9b0: 6c74 2c20 616e 7920 6669 6c65 7320 7768  lt, any files wh
+0000d9c0: 6f73 6520 6e61 6d65 7320 7374 6172 7420  ose names start 
+0000d9d0: 7769 7468 2074 6865 2069 6e70 7574 2066  with the input f
+0000d9e0: 696c 656e 616d 6520 286d 696e 7573 2074  ilename (minus t
+0000d9f0: 6865 0a27 2e62 696e 272c 2027 2e73 6e61  he.'.bin', '.sna
+0000da00: 272c 2027 2e73 7a78 2720 6f72 2027 2e7a  ', '.szx' or '.z
+0000da10: 3830 2720 7375 6666 6978 2c20 6966 2061  80' suffix, if a
+0000da20: 6e79 2920 616e 6420 656e 6420 7769 7468  ny) and end with
+0000da30: 2027 2e63 746c 2720 7769 6c6c 2062 650a   '.ctl' will be.
+0000da40: 7573 6564 2061 7320 3a72 6566 3a60 636f  used as :ref:`co
+0000da50: 6e74 726f 6c20 6669 6c65 7320 3c63 6f6e  ntrol files <con
+0000da60: 7472 6f6c 4669 6c65 733e 602e 0a0a 2e2e  trolFiles>`.....
+0000da70: 205f 736e 6132 736b 6f6f 6c2d 636f 6e66   _sna2skool-conf
+0000da80: 3a0a 0a43 6f6e 6669 6775 7261 7469 6f6e  :..Configuration
+0000da90: 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 0a60  .^^^^^^^^^^^^^.`
+0000daa0: 736e 6132 736b 6f6f 6c2e 7079 6020 7769  sna2skool.py` wi
+0000dab0: 6c6c 2072 6561 6420 636f 6e66 6967 7572  ll read configur
+0000dac0: 6174 696f 6e20 6672 6f6d 2061 2066 696c  ation from a fil
+0000dad0: 6520 6e61 6d65 6420 6073 6b6f 6f6c 6b69  e named `skoolki
+0000dae0: 742e 696e 6960 2069 6e20 7468 650a 6375  t.ini` in the.cu
+0000daf0: 7272 656e 7420 776f 726b 696e 6720 6469  rrent working di
+0000db00: 7265 6374 6f72 7920 6f72 2069 6e20 607e  rectory or in `~
+0000db10: 2f2e 736b 6f6f 6c6b 6974 602c 2069 6620  /.skoolkit`, if 
+0000db20: 7072 6573 656e 742e 2054 6865 2072 6563  present. The rec
+0000db30: 6f67 6e69 7365 640a 636f 6e66 6967 7572  ognised.configur
+0000db40: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
+0000db50: 2061 7265 3a0a 0a2a 2060 6042 6173 6560   are:..* ``Base`
+0000db60: 6020 2d20 7772 6974 6520 6164 6472 6573  ` - write addres
+0000db70: 7365 7320 616e 6420 696e 7374 7275 6374  ses and instruct
+0000db80: 696f 6e20 6f70 6572 616e 6473 2069 6e20  ion operands in 
+0000db90: 6865 7861 6465 6369 6d61 6c20 2860 6031  hexadecimal (``1
+0000dba0: 3660 6029 0a20 206f 7220 6465 6369 6d61  6``).  or decima
+0000dbb0: 6c20 2860 6031 3060 602c 2074 6865 2064  l (``10``, the d
+0000dbc0: 6566 6175 6c74 290a 2a20 6060 4361 7365  efault).* ``Case
+0000dbd0: 6060 202d 2077 7269 7465 2074 6865 2064  `` - write the d
+0000dbe0: 6973 6173 7365 6d62 6c79 2069 6e20 6c6f  isassembly in lo
+0000dbf0: 7765 7220 6361 7365 2028 6060 3160 6029  wer case (``1``)
+0000dc00: 206f 7220 7570 7065 7220 6361 7365 2028   or upper case (
+0000dc10: 6060 3260 602c 0a20 2074 6865 2064 6566  ``2``,.  the def
+0000dc20: 6175 6c74 290a 2a20 6060 436f 6d6d 656e  ault).* ``Commen
+0000dc30: 7457 6964 7468 4d69 6e60 6020 2d20 6d69  tWidthMin`` - mi
+0000dc40: 6e69 6d75 6d20 7769 6474 6820 6f66 2074  nimum width of t
+0000dc50: 6865 2069 6e73 7472 7563 7469 6f6e 2063  he instruction c
+0000dc60: 6f6d 6d65 6e74 2066 6965 6c64 2069 6e20  omment field in 
+0000dc70: 7468 650a 2020 736b 6f6f 6c20 6669 6c65  the.  skool file
+0000dc80: 2028 6465 6661 756c 743a 2060 6031 3060   (default: ``10`
+0000dc90: 6029 0a2a 2060 6044 6566 6253 697a 6560  `).* ``DefbSize`
+0000dca0: 6020 2d20 6d61 7869 6d75 6d20 6e75 6d62  ` - maximum numb
+0000dcb0: 6572 206f 6620 6279 7465 7320 696e 2061  er of bytes in a
+0000dcc0: 2044 4546 4220 7374 6174 656d 656e 7420   DEFB statement 
+0000dcd0: 2864 6566 6175 6c74 3a20 6060 3860 6029  (default: ``8``)
+0000dce0: 0a2a 2060 6044 6566 6d53 697a 6560 6020  .* ``DefmSize`` 
+0000dcf0: 2d20 6d61 7869 6d75 6d20 6e75 6d62 6572  - maximum number
+0000dd00: 206f 6620 6368 6172 6163 7465 7273 2069   of characters i
+0000dd10: 6e20 6120 4445 464d 2073 7461 7465 6d65  n a DEFM stateme
+0000dd20: 6e74 2028 6465 6661 756c 743a 0a20 2060  nt (default:.  `
+0000dd30: 6036 3560 6029 0a2a 2060 6044 6566 7753  `65``).* ``DefwS
+0000dd40: 697a 6560 6020 2d20 6d61 7869 6d75 6d20  ize`` - maximum 
+0000dd50: 6e75 6d62 6572 206f 6620 776f 7264 7320  number of words 
+0000dd60: 696e 2061 2044 4546 5720 7374 6174 656d  in a DEFW statem
+0000dd70: 656e 7420 2864 6566 6175 6c74 3a20 6060  ent (default: ``
+0000dd80: 3160 6029 0a2a 2060 6045 6e74 7279 506f  1``).* ``EntryPo
+0000dd90: 696e 7452 6566 6060 202d 2074 656d 706c  intRef`` - templ
+0000dda0: 6174 6520 7573 6564 2074 6f20 666f 726d  ate used to form
+0000ddb0: 6174 2074 6865 2063 6f6d 6d65 6e74 2066  at the comment f
+0000ddc0: 6f72 2061 6e20 656e 7472 7920 706f 696e  or an entry poin
+0000ddd0: 740a 2020 7769 7468 2065 7861 6374 6c79  t.  with exactly
+0000dde0: 206f 6e65 2072 6566 6572 7265 7220 2864   one referrer (d
+0000ddf0: 6566 6175 6c74 3a20 6060 5468 6973 2065  efault: ``This e
+0000de00: 6e74 7279 2070 6f69 6e74 2069 7320 7573  ntry point is us
+0000de10: 6564 2062 7920 7468 6520 726f 7574 696e  ed by the routin
+0000de20: 650a 2020 6174 207b 7265 667d 2e60 6029  e.  at {ref}.``)
+0000de30: 0a2a 2060 6045 6e74 7279 506f 696e 7452  .* ``EntryPointR
+0000de40: 6566 7360 6020 2d20 7465 6d70 6c61 7465  efs`` - template
+0000de50: 2075 7365 6420 746f 2066 6f72 6d61 7420   used to format 
+0000de60: 7468 6520 636f 6d6d 656e 7420 666f 7220  the comment for 
+0000de70: 616e 2065 6e74 7279 2070 6f69 6e74 0a20  an entry point. 
+0000de80: 2077 6974 6820 7477 6f20 6f72 206d 6f72   with two or mor
+0000de90: 6520 7265 6665 7272 6572 7320 2864 6566  e referrers (def
+0000dea0: 6175 6c74 3a20 6060 5468 6973 2065 6e74  ault: ``This ent
+0000deb0: 7279 2070 6f69 6e74 2069 7320 7573 6564  ry point is used
+0000dec0: 2062 7920 7468 650a 2020 726f 7574 696e   by the.  routin
+0000ded0: 6573 2061 7420 7b72 6566 737d 2061 6e64  es at {refs} and
+0000dee0: 207b 7265 667d 2e60 6029 0a2a 2060 6049   {ref}.``).* ``I
+0000def0: 6e73 7472 7563 7469 6f6e 5769 6474 6860  nstructionWidth`
+0000df00: 6020 2d20 6d69 6e69 6d75 6d20 7769 6474  ` - minimum widt
+0000df10: 6820 6f66 2074 6865 2069 6e73 7472 7563  h of the instruc
+0000df20: 7469 6f6e 2066 6965 6c64 2069 6e20 7468  tion field in th
+0000df30: 6520 736b 6f6f 6c0a 2020 6669 6c65 2028  e skool.  file (
+0000df40: 6465 6661 756c 743a 2060 6031 3360 6029  default: ``13``)
+0000df50: 0a2a 2060 604c 696e 6557 6964 7468 6060  .* ``LineWidth``
+0000df60: 202d 206d 6178 696d 756d 206c 696e 6520   - maximum line 
+0000df70: 7769 6474 6820 6f66 2074 6865 2073 6b6f  width of the sko
+0000df80: 6f6c 2066 696c 6520 2864 6566 6175 6c74  ol file (default
+0000df90: 3a20 6060 3739 6060 290a 2a20 6060 4c69  : ``79``).* ``Li
+0000dfa0: 7374 5265 6673 6060 202d 2077 6865 6e20  stRefs`` - when 
+0000dfb0: 746f 2061 6464 2061 2063 6f6d 6d65 6e74  to add a comment
+0000dfc0: 2074 6861 7420 6c69 7374 7320 726f 7574   that lists rout
+0000dfd0: 696e 6520 6f72 2065 6e74 7279 2070 6f69  ine or entry poi
+0000dfe0: 6e74 0a20 2072 6566 6572 7265 7273 3a20  nt.  referrers: 
+0000dff0: 6e65 7665 7220 2860 6030 6060 292c 2069  never (``0``), i
+0000e000: 6620 6e6f 206f 7468 6572 2063 6f6d 6d65  f no other comme
+0000e010: 6e74 2069 7320 6465 6669 6e65 6420 6174  nt is defined at
+0000e020: 2074 6865 2065 6e74 7279 2070 6f69 6e74   the entry point
+0000e030: 0a20 2028 6060 3160 602c 2074 6865 2064  .  (``1``, the d
+0000e040: 6566 6175 6c74 292c 206f 7220 616c 7761  efault), or alwa
+0000e050: 7973 2028 6060 3260 6029 0a2a 2060 6052  ys (``2``).* ``R
+0000e060: 6566 6060 202d 2074 656d 706c 6174 6520  ef`` - template 
+0000e070: 7573 6564 2074 6f20 666f 726d 6174 2074  used to format t
+0000e080: 6865 2063 6f6d 6d65 6e74 2066 6f72 2061  he comment for a
+0000e090: 2072 6f75 7469 6e65 2077 6974 6820 6578   routine with ex
+0000e0a0: 6163 746c 7920 6f6e 650a 2020 7265 6665  actly one.  refe
+0000e0b0: 7272 6572 2028 6465 6661 756c 743a 2060  rrer (default: `
+0000e0c0: 6055 7365 6420 6279 2074 6865 2072 6f75  `Used by the rou
+0000e0d0: 7469 6e65 2061 7420 7b72 6566 7d2e 6060  tine at {ref}.``
+0000e0e0: 290a 2a20 6060 5265 6646 6f72 6d61 7460  ).* ``RefFormat`
+0000e0f0: 6020 2d20 7465 6d70 6c61 7465 2075 7365  ` - template use
+0000e100: 6420 746f 2066 6f72 6d61 7420 7265 6665  d to format refe
+0000e110: 7272 6572 7320 696e 2074 6865 2060 607b  rrers in the ``{
+0000e120: 7265 667d 6060 2061 6e64 0a20 2060 607b  ref}`` and.  ``{
+0000e130: 7265 6673 7d60 6020 6669 656c 6473 206f  refs}`` fields o
+0000e140: 6620 7468 6520 6060 5265 6660 6020 616e  f the ``Ref`` an
+0000e150: 6420 6060 5265 6673 6060 2074 656d 706c  d ``Refs`` templ
+0000e160: 6174 6573 2028 6465 6661 756c 743a 0a20  ates (default:. 
+0000e170: 2060 6023 527b 6164 6472 6573 737d 6060   ``#R{address}``
+0000e180: 293b 2074 6865 2072 6570 6c61 6365 6d65  ); the replaceme
+0000e190: 6e74 2066 6965 6c64 2060 6061 6464 7265  nt field ``addre
+0000e1a0: 7373 6060 2069 7320 7468 6520 6164 6472  ss`` is the addr
+0000e1b0: 6573 7320 6f66 2074 6865 0a20 2072 6566  ess of the.  ref
+0000e1c0: 6572 7265 7220 666f 726d 6174 7465 6420  errer formatted 
+0000e1d0: 6173 2061 2064 6563 696d 616c 206f 7220  as a decimal or 
+0000e1e0: 6865 7861 6465 6369 6d61 6c20 6e75 6d62  hexadecimal numb
+0000e1f0: 6572 2069 6e20 6163 636f 7264 616e 6365  er in accordance
+0000e200: 2077 6974 6820 7468 650a 2020 6060 4261   with the.  ``Ba
+0000e210: 7365 6060 2061 6e64 2060 6043 6173 6560  se`` and ``Case`
+0000e220: 6020 636f 6e66 6967 7572 6174 696f 6e20  ` configuration 
+0000e230: 7061 7261 6d65 7465 7273 0a2a 2060 6052  parameters.* ``R
+0000e240: 6566 7360 6020 2d20 7465 6d70 6c61 7465  efs`` - template
+0000e250: 2075 7365 6420 746f 2066 6f72 6d61 7420   used to format 
+0000e260: 7468 6520 636f 6d6d 656e 7420 666f 7220  the comment for 
+0000e270: 6120 726f 7574 696e 6520 7769 7468 2074  a routine with t
+0000e280: 776f 206f 7220 6d6f 7265 0a20 2072 6566  wo or more.  ref
+0000e290: 6572 7265 7273 2028 6465 6661 756c 743a  errers (default:
+0000e2a0: 2060 6055 7365 6420 6279 2074 6865 2072   ``Used by the r
+0000e2b0: 6f75 7469 6e65 7320 6174 207b 7265 6673  outines at {refs
+0000e2c0: 7d20 616e 6420 7b72 6566 7d2e 6060 290a  } and {ref}.``).
+0000e2d0: 2a20 6060 5365 6d69 636f 6c6f 6e73 6060  * ``Semicolons``
+0000e2e0: 202d 2062 6c6f 636b 2074 7970 6573 2028   - block types (
+0000e2f0: 6060 6260 602c 2060 6063 6060 2c20 6060  ``b``, ``c``, ``
+0000e300: 6760 602c 2060 6069 6060 2c20 6060 7360  g``, ``i``, ``s`
+0000e310: 602c 2060 6074 6060 2c0a 2020 6060 7560  `, ``t``,.  ``u`
+0000e320: 602c 2060 6077 6060 2920 696e 2077 6869  `, ``w``) in whi
+0000e330: 6368 2063 6f6d 6d65 6e74 2073 656d 6963  ch comment semic
+0000e340: 6f6c 6f6e 7320 6172 6520 7772 6974 7465  olons are writte
+0000e350: 6e20 666f 7220 696e 7374 7275 6374 696f  n for instructio
+0000e360: 6e73 2074 6861 740a 2020 6861 7665 206e  ns that.  have n
+0000e370: 6f20 636f 6d6d 656e 7420 2864 6566 6175  o comment (defau
+0000e380: 6c74 3a20 6060 6360 6029 0a2a 2060 6054  lt: ``c``).* ``T
+0000e390: 6578 7460 6020 2d20 7368 6f77 2041 5343  ext`` - show ASC
+0000e3a0: 4949 2074 6578 7420 696e 2074 6865 2063  II text in the c
+0000e3b0: 6f6d 6d65 6e74 2066 6965 6c64 7320 2860  omment fields (`
+0000e3c0: 6031 6060 292c 206f 7220 646f 6e27 7420  `1``), or don't 
+0000e3d0: 2860 6030 6060 2c0a 2020 7468 6520 6465  (``0``,.  the de
+0000e3e0: 6661 756c 7429 0a2a 2060 6054 696d 696e  fault).* ``Timin
+0000e3f0: 6773 6060 202d 2073 686f 7720 696e 7374  gs`` - show inst
+0000e400: 7275 6374 696f 6e20 7469 6d69 6e67 7320  ruction timings 
+0000e410: 696e 2074 6865 2063 6f6d 6d65 6e74 2066  in the comment f
+0000e420: 6965 6c64 7320 2860 6031 6060 292c 206f  ields (``1``), o
+0000e430: 720a 2020 646f 6e27 7420 2860 6030 6060  r.  don't (``0``
+0000e440: 2c20 7468 6520 6465 6661 756c 7429 0a2a  , the default).*
+0000e450: 2060 6054 6974 6c65 2d62 6060 202d 2074   ``Title-b`` - t
+0000e460: 656d 706c 6174 6520 7573 6564 2074 6f20  emplate used to 
+0000e470: 666f 726d 6174 2074 6865 2074 6974 6c65  format the title
+0000e480: 2066 6f72 2061 6e20 756e 7469 746c 6564   for an untitled
+0000e490: 2027 6227 2062 6c6f 636b 0a20 2028 6465   'b' block.  (de
+0000e4a0: 6661 756c 743a 2060 6044 6174 6120 626c  fault: ``Data bl
+0000e4b0: 6f63 6b20 6174 207b 6164 6472 6573 737d  ock at {address}
+0000e4c0: 6060 290a 2a20 6060 5469 746c 652d 6360  ``).* ``Title-c`
+0000e4d0: 6020 2d20 7465 6d70 6c61 7465 2075 7365  ` - template use
+0000e4e0: 6420 746f 2066 6f72 6d61 7420 7468 6520  d to format the 
+0000e4f0: 7469 746c 6520 666f 7220 616e 2075 6e74  title for an unt
+0000e500: 6974 6c65 6420 2763 2720 626c 6f63 6b0a  itled 'c' block.
+0000e510: 2020 2864 6566 6175 6c74 3a20 6060 526f    (default: ``Ro
+0000e520: 7574 696e 6520 6174 207b 6164 6472 6573  utine at {addres
+0000e530: 737d 6060 290a 2a20 6060 5469 746c 652d  s}``).* ``Title-
+0000e540: 6760 6020 2d20 7465 6d70 6c61 7465 2075  g`` - template u
+0000e550: 7365 6420 746f 2066 6f72 6d61 7420 7468  sed to format th
+0000e560: 6520 7469 746c 6520 666f 7220 616e 2075  e title for an u
+0000e570: 6e74 6974 6c65 6420 2767 2720 626c 6f63  ntitled 'g' bloc
+0000e580: 6b0a 2020 2864 6566 6175 6c74 3a20 6060  k.  (default: ``
+0000e590: 4761 6d65 2073 7461 7475 7320 6275 6666  Game status buff
+0000e5a0: 6572 2065 6e74 7279 2061 7420 7b61 6464  er entry at {add
+0000e5b0: 7265 7373 7d60 6029 0a2a 2060 6054 6974  ress}``).* ``Tit
+0000e5c0: 6c65 2d69 6060 202d 2074 656d 706c 6174  le-i`` - templat
+0000e5d0: 6520 7573 6564 2074 6f20 666f 726d 6174  e used to format
+0000e5e0: 2074 6865 2074 6974 6c65 2066 6f72 2061   the title for a
+0000e5f0: 6e20 756e 7469 746c 6564 2027 6927 2062  n untitled 'i' b
+0000e600: 6c6f 636b 0a20 2028 6465 6661 756c 743a  lock.  (default:
+0000e610: 2060 6049 676e 6f72 6564 6060 290a 2a20   ``Ignored``).* 
+0000e620: 6060 5469 746c 652d 7360 6020 2d20 7465  ``Title-s`` - te
+0000e630: 6d70 6c61 7465 2075 7365 6420 746f 2066  mplate used to f
+0000e640: 6f72 6d61 7420 7468 6520 7469 746c 6520  ormat the title 
+0000e650: 666f 7220 616e 2075 6e74 6974 6c65 6420  for an untitled 
+0000e660: 2773 2720 626c 6f63 6b0a 2020 2864 6566  's' block.  (def
+0000e670: 6175 6c74 3a20 6060 556e 7573 6564 6060  ault: ``Unused``
+0000e680: 290a 2a20 6060 5469 746c 652d 7460 6020  ).* ``Title-t`` 
+0000e690: 2d20 7465 6d70 6c61 7465 2075 7365 6420  - template used 
+0000e6a0: 746f 2066 6f72 6d61 7420 7468 6520 7469  to format the ti
+0000e6b0: 746c 6520 666f 7220 616e 2075 6e74 6974  tle for an untit
+0000e6c0: 6c65 6420 2774 2720 626c 6f63 6b0a 2020  led 't' block.  
+0000e6d0: 2864 6566 6175 6c74 3a20 6060 4d65 7373  (default: ``Mess
+0000e6e0: 6167 6520 6174 207b 6164 6472 6573 737d  age at {address}
+0000e6f0: 6060 290a 2a20 6060 5469 746c 652d 7560  ``).* ``Title-u`
+0000e700: 6020 2d20 7465 6d70 6c61 7465 2075 7365  ` - template use
+0000e710: 6420 746f 2066 6f72 6d61 7420 7468 6520  d to format the 
+0000e720: 7469 746c 6520 666f 7220 616e 2075 6e74  title for an unt
+0000e730: 6974 6c65 6420 2775 2720 626c 6f63 6b0a  itled 'u' block.
+0000e740: 2020 2864 6566 6175 6c74 3a20 6060 556e    (default: ``Un
+0000e750: 7573 6564 6060 290a 2a20 6060 5469 746c  used``).* ``Titl
+0000e760: 652d 7760 6020 2d20 7465 6d70 6c61 7465  e-w`` - template
+0000e770: 2075 7365 6420 746f 2066 6f72 6d61 7420   used to format 
+0000e780: 7468 6520 7469 746c 6520 666f 7220 616e  the title for an
+0000e790: 2075 6e74 6974 6c65 6420 2777 2720 626c   untitled 'w' bl
+0000e7a0: 6f63 6b0a 2020 2864 6566 6175 6c74 3a20  ock.  (default: 
+0000e7b0: 6060 4461 7461 2062 6c6f 636b 2061 7420  ``Data block at 
+0000e7c0: 7b61 6464 7265 7373 7d60 6029 0a2a 2060  {address}``).* `
+0000e7d0: 6057 7261 7060 6020 2d20 6469 7361 7373  `Wrap`` - disass
+0000e7e0: 656d 626c 6520 616e 2069 6e73 7472 7563  emble an instruc
+0000e7f0: 7469 6f6e 2074 6861 7420 7772 6170 7320  tion that wraps 
+0000e800: 6172 6f75 6e64 2074 6865 2036 344b 2062  around the 64K b
+0000e810: 6f75 6e64 6172 790a 2020 2860 6031 6060  oundary.  (``1``
+0000e820: 292c 206f 7220 646f 6e27 7420 2860 6030  ), or don't (``0
+0000e830: 6060 2c20 7468 6520 6465 6661 756c 7429  ``, the default)
+0000e840: 0a0a 436f 6e66 6967 7572 6174 696f 6e20  ..Configuration 
+0000e850: 7061 7261 6d65 7465 7273 206d 7573 7420  parameters must 
+0000e860: 6170 7065 6172 2069 6e20 6120 6060 5b73  appear in a ``[s
+0000e870: 6e61 3273 6b6f 6f6c 5d60 6020 7365 6374  na2skool]`` sect
+0000e880: 696f 6e2e 2046 6f72 2065 7861 6d70 6c65  ion. For example
+0000e890: 2c0a 746f 206d 616b 6520 6073 6e61 3273  ,.to make `sna2s
+0000e8a0: 6b6f 6f6c 2e70 7960 2067 656e 6572 6174  kool.py` generat
+0000e8b0: 6520 6865 7861 6465 6369 6d61 6c20 736b  e hexadecimal sk
+0000e8c0: 6f6f 6c20 6669 6c65 7320 7769 7468 2061  ool files with a
+0000e8d0: 206c 696e 6520 7769 6474 6820 6f66 0a31   line width of.1
+0000e8e0: 3230 2063 6861 7261 6374 6572 7320 6279  20 characters by
+0000e8f0: 2064 6566 6175 6c74 2028 7769 7468 6f75   default (withou
+0000e900: 7420 6861 7669 6e67 2074 6f20 7573 6520  t having to use 
+0000e910: 7468 6520 6060 2d48 6060 2061 6e64 2060  the ``-H`` and `
+0000e920: 602d 7760 6020 6f70 7469 6f6e 730a 6f6e  `-w`` options.on
+0000e930: 2074 6865 2063 6f6d 6d61 6e64 206c 696e   the command lin
+0000e940: 6529 2c20 6164 6420 7468 6520 666f 6c6c  e), add the foll
+0000e950: 6f77 696e 6720 7365 6374 696f 6e20 746f  owing section to
+0000e960: 2060 736b 6f6f 6c6b 6974 2e69 6e69 603a   `skoolkit.ini`:
+0000e970: 3a0a 0a20 205b 736e 6132 736b 6f6f 6c5d  :..  [sna2skool]
+0000e980: 0a20 2042 6173 653d 3136 0a20 204c 696e  .  Base=16.  Lin
+0000e990: 6557 6964 7468 3d31 3230 0a0a 436f 6e66  eWidth=120..Conf
+0000e9a0: 6967 7572 6174 696f 6e20 7061 7261 6d65  iguration parame
+0000e9b0: 7465 7273 206d 6179 2061 6c73 6f20 6265  ters may also be
+0000e9c0: 2073 6574 206f 6e20 7468 6520 636f 6d6d   set on the comm
+0000e9d0: 616e 6420 6c69 6e65 2062 7920 7573 696e  and line by usin
+0000e9e0: 6720 7468 650a 6060 2d2d 696e 6960 6020  g the.``--ini`` 
+0000e9f0: 6f70 7469 6f6e 2e20 5061 7261 6d65 7465  option. Paramete
+0000ea00: 7220 7661 6c75 6573 2073 6574 2074 6869  r values set thi
+0000ea10: 7320 7761 7920 7769 6c6c 206f 7665 7272  s way will overr
+0000ea20: 6964 6520 616e 7920 666f 756e 6420 696e  ide any found in
+0000ea30: 0a60 736b 6f6f 6c6b 6974 2e69 6e69 602e  .`skoolkit.ini`.
+0000ea40: 0a0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  ..+---------+---
+0000ea50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ea60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ea70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ea80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ea90: 2b0a 7c20 5665 7273 696f 6e20 7c20 4368  +.| Version | Ch
+0000eaa0: 616e 6765 7320 2020 2020 2020 2020 2020  anges           
+0000eab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ead0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eae0: 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d  |.+=========+===
+0000eaf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eb00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eb10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eb20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000eb30: 2b0a 7c20 382e 3720 2020 2020 7c20 4164  +.| 8.7     | Ad
+0000eb40: 6465 6420 7468 6520 6060 2d2d 6465 6662  ded the ``--defb
+0000eb50: 6060 206f 7074 696f 6e20 616e 6420 7468  `` option and th
+0000eb60: 6520 6060 5469 6d69 6e67 7360 6020 636f  e ``Timings`` co
+0000eb70: 6e66 6967 7572 6174 696f 6e20 2020 2020  nfiguration     
+0000eb80: 7c0a 7c20 2020 2020 2020 2020 7c20 7061  |.|         | pa
+0000eb90: 7261 6d65 7465 7220 2020 2020 2020 2020  rameter         
+0000eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ebb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ebc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ebd0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000ebe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ebf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ec00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ec10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ec20: 2b0a 7c20 382e 3520 2020 2020 7c20 4164  +.| 8.5     | Ad
+0000ec30: 6465 6420 7468 6520 6060 5772 6170 6060  ded the ``Wrap``
+0000ec40: 2063 6f6e 6669 6775 7261 7469 6f6e 2070   configuration p
+0000ec50: 6172 616d 6574 6572 2061 6e64 2074 6865  arameter and the
+0000ec60: 2061 6269 6c69 7479 2074 6f20 2020 2020   ability to     
+0000ec70: 7c0a 7c20 2020 2020 2020 2020 7c20 6469  |.|         | di
+0000ec80: 7361 7373 656d 626c 6520 616e 2069 6e73  sassemble an ins
+0000ec90: 7472 7563 7469 6f6e 2074 6861 7420 7772  truction that wr
+0000eca0: 6170 7320 6172 6f75 6e64 2074 6865 2036  aps around the 6
+0000ecb0: 344b 2062 6f75 6e64 6172 793b 2020 2020  4K boundary;    
+0000ecc0: 7c0a 7c20 2020 2020 2020 2020 7c20 6164  |.|         | ad
+0000ecd0: 6465 6420 7468 6520 6060 5265 6646 6f72  ded the ``RefFor
+0000ece0: 6d61 7460 6020 636f 6e66 6967 7572 6174  mat`` configurat
+0000ecf0: 696f 6e20 7061 7261 6d65 7465 7220 2020  ion parameter   
 0000ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed10: 2020 2020 2074 6f20 7573 652c 206f 7220       to use, or 
-0000ed20: 6120 6469 7265 6374 6f72 7920 6672 6f6d  a directory from
-0000ed30: 2077 6869 6368 2074 6f20 7265 6164 2063   which to read c
-0000ed40: 6f6e 7472 6f6c 0a20 2020 2020 2020 2020  ontrol.         
-0000ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed60: 2066 696c 6573 2e20 5041 5448 206d 6179   files. PATH may
-0000ed70: 2062 6520 272d 2720 666f 7220 7374 616e   be '-' for stan
-0000ed80: 6461 7264 2069 6e70 7574 2e20 5468 6973  dard input. This
-0000ed90: 206f 7074 696f 6e0a 2020 2020 2020 2020   option.        
-0000eda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000edb0: 2020 6d61 7920 6265 2075 7365 6420 6d75    may be used mu
-0000edc0: 6c74 6970 6c65 2074 696d 6573 2e0a 2020  ltiple times..  
-0000edd0: 2020 2d66 2041 5b2c 422e 2e2e 5b2d 4d5b    -f A[,B...[-M[
-0000ede0: 2d4e 5d5d 5d2c 202d 2d66 696e 6420 415b  -N]]], --find A[
-0000edf0: 2c42 2e2e 2e5b 2d4d 5b2d 4e5d 5d5d 0a20  ,B...[-M[-N]]]. 
-0000ee00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee10: 2020 2020 2020 2020 2053 6561 7263 6820           Search 
-0000ee20: 666f 7220 7468 6520 6279 7465 2073 6571  for the byte seq
-0000ee30: 7565 6e63 6520 412c 422e 2e2e 2077 6974  uence A,B... wit
-0000ee40: 6820 6469 7374 616e 6365 0a20 2020 2020  h distance.     
-0000ee50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ee60: 2020 2020 2072 616e 6769 6e67 2066 726f       ranging fro
-0000ee70: 6d20 4d20 746f 204e 2028 6465 6661 756c  m M to N (defaul
-0000ee80: 743d 3129 2062 6574 7765 656e 2062 7974  t=1) between byt
-0000ee90: 6573 2e0a 2020 2020 2d67 2c20 2d2d 6361  es..    -g, --ca
-0000eea0: 6c6c 2d67 7261 7068 2020 2020 2020 4765  ll-graph      Ge
-0000eeb0: 6e65 7261 7465 2061 2063 616c 6c20 6772  nerate a call gr
-0000eec0: 6170 6820 696e 2044 4f54 2066 6f72 6d61  aph in DOT forma
-0000eed0: 742e 0a20 2020 202d 4920 703d 762c 202d  t..    -I p=v, -
-0000eee0: 2d69 6e69 2070 3d76 2020 2020 2053 6574  -ini p=v     Set
-0000eef0: 2074 6865 2076 616c 7565 206f 6620 7468   the value of th
-0000ef00: 6520 636f 6e66 6967 7572 6174 696f 6e20  e configuration 
-0000ef10: 7061 7261 6d65 7465 7220 2770 2720 746f  parameter 'p' to
-0000ef20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ef30: 2020 2020 2020 2020 2020 2027 7627 2e20             'v'. 
-0000ef40: 5468 6973 206f 7074 696f 6e20 6d61 7920  This option may 
-0000ef50: 6265 2075 7365 6420 6d75 6c74 6970 6c65  be used multiple
-0000ef60: 2074 696d 6573 2e0a 2020 2020 2d6f 2041   times..    -o A
-0000ef70: 4444 522c 202d 2d6f 7267 2041 4444 5220  DDR, --org ADDR 
-0000ef80: 2020 5370 6563 6966 7920 7468 6520 6f72    Specify the or
-0000ef90: 6967 696e 2061 6464 7265 7373 206f 6620  igin address of 
-0000efa0: 6120 6269 6e61 7279 2028 7261 7720 6d65  a binary (raw me
-0000efb0: 6d6f 7279 290a 2020 2020 2020 2020 2020  mory).          
-0000efc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000efd0: 6669 6c65 2028 6465 6661 756c 743a 2036  file (default: 6
-0000efe0: 3535 3336 202d 206c 656e 6774 6829 2e0a  5536 - length)..
-0000eff0: 2020 2020 2d70 2041 5b2d 425b 2d43 5d5d      -p A[-B[-C]]
-0000f000: 2c20 2d2d 7065 656b 2041 5b2d 425b 2d43  , --peek A[-B[-C
-0000f010: 5d5d 0a20 2020 2020 2020 2020 2020 2020  ]].             
-0000f020: 2020 2020 2020 2020 2020 2020 2053 686f               Sho
-0000f030: 7720 7468 6520 636f 6e74 656e 7473 206f  w the contents o
-0000f040: 6620 6164 6472 6573 7365 7320 4120 544f  f addresses A TO
-0000f050: 2042 2053 5445 5020 432e 2054 6869 730a   B STEP C. This.
-0000f060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f070: 2020 2020 2020 2020 2020 6f70 7469 6f6e            option
-0000f080: 206d 6179 2062 6520 7573 6564 206d 756c   may be used mul
-0000f090: 7469 706c 6520 7469 6d65 732e 0a20 2020  tiple times..   
-0000f0a0: 202d 5020 5041 4745 2c20 2d2d 7061 6765   -P PAGE, --page
-0000f0b0: 2050 4147 4520 2053 7065 6369 6679 2074   PAGE  Specify t
-0000f0c0: 6865 2070 6167 6520 2830 2d37 2920 6f66  he page (0-7) of
-0000f0d0: 2061 2031 3238 4b20 736e 6170 7368 6f74   a 128K snapshot
-0000f0e0: 2074 6f20 6d61 7020 746f 0a20 2020 2020   to map to.     
-0000f0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f100: 2020 2020 2034 3931 3532 2d36 3535 3335       49152-65535
-0000f110: 2e0a 2020 2020 2d2d 7368 6f77 2d63 6f6e  ..    --show-con
-0000f120: 6669 6720 2020 2020 2020 2020 5368 6f77  fig         Show
-0000f130: 2063 6f6e 6669 6775 7261 7469 6f6e 2070   configuration p
-0000f140: 6172 616d 6574 6572 2076 616c 7565 732e  arameter values.
-0000f150: 0a20 2020 202d 7420 5445 5854 2c20 2d2d  .    -t TEXT, --
-0000f160: 6669 6e64 2d74 6578 7420 5445 5854 0a20  find-text TEXT. 
-0000f170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f180: 2020 2020 2020 2020 2053 6561 7263 6820           Search 
-0000f190: 666f 7220 6120 7465 7874 2073 7472 696e  for a text strin
-0000f1a0: 672e 0a20 2020 202d 5420 582c 595b 2d4d  g..    -T X,Y[-M
-0000f1b0: 5b2d 4e5d 5d2c 202d 2d66 696e 642d 7469  [-N]], --find-ti
-0000f1c0: 6c65 2058 2c59 5b2d 4d5b 2d4e 5d5d 0a20  le X,Y[-M[-N]]. 
-0000f1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f1e0: 2020 2020 2020 2020 2053 6561 7263 6820           Search 
-0000f1f0: 666f 7220 7468 6520 6772 6170 6869 6320  for the graphic 
-0000f200: 6461 7461 206f 6620 7468 6520 7469 6c65  data of the tile
-0000f210: 2061 7420 2858 2c59 2920 7769 7468 0a20   at (X,Y) with. 
-0000f220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f230: 2020 2020 2020 2020 2064 6973 7461 6e63           distanc
-0000f240: 6520 7261 6e67 696e 6720 6672 6f6d 204d  e ranging from M
-0000f250: 2074 6f20 4e20 2864 6566 6175 6c74 3d31   to N (default=1
-0000f260: 2920 6265 7477 6565 6e0a 2020 2020 2020  ) between.      
-0000f270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f280: 2020 2020 6279 7465 732e 0a20 2020 202d      bytes..    -
-0000f290: 762c 202d 2d76 6172 6961 626c 6573 2020  v, --variables  
-0000f2a0: 2020 2020 204c 6973 7420 7661 7269 6162       List variab
-0000f2b0: 6c65 732e 0a20 2020 202d 562c 202d 2d76  les..    -V, --v
-0000f2c0: 6572 7369 6f6e 2020 2020 2020 2020 2053  ersion         S
-0000f2d0: 686f 7720 536b 6f6f 6c4b 6974 2076 6572  how SkoolKit ver
-0000f2e0: 7369 6f6e 206e 756d 6265 7220 616e 6420  sion number and 
-0000f2f0: 6578 6974 2e0a 2020 2020 2d77 2041 5b2d  exit..    -w A[-
-0000f300: 425b 2d43 5d5d 2c20 2d2d 776f 7264 2041  B[-C]], --word A
-0000f310: 5b2d 425b 2d43 5d5d 0a20 2020 2020 2020  [-B[-C]].       
-0000f320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f330: 2020 2053 686f 7720 7468 6520 776f 7264     Show the word
-0000f340: 7320 6174 2061 6464 7265 7373 6573 2041  s at addresses A
-0000f350: 2054 4f20 4220 5354 4550 2043 2e20 5468   TO B STEP C. Th
-0000f360: 6973 206f 7074 696f 6e0a 2020 2020 2020  is option.      
-0000f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f380: 2020 2020 6d61 7920 6265 2075 7365 6420      may be used 
-0000f390: 6d75 6c74 6970 6c65 2074 696d 6573 2e0a  multiple times..
-0000f3a0: 0a57 6974 6820 6e6f 206f 7074 696f 6e73  .With no options
-0000f3b0: 2c20 6073 6e61 7069 6e66 6f2e 7079 6020  , `snapinfo.py` 
-0000f3c0: 6469 7370 6c61 7973 2072 6567 6973 7465  displays registe
-0000f3d0: 7220 7661 6c75 6573 2c20 7468 6520 696e  r values, the in
-0000f3e0: 7465 7272 7570 7420 6d6f 6465 2c0a 7468  terrupt mode,.th
-0000f3f0: 6520 626f 7264 6572 2063 6f6c 6f75 722c  e border colour,
-0000f400: 2061 6e64 2076 6172 696f 7573 206f 7468   and various oth
-0000f410: 6572 2061 7474 7269 6275 7465 732e 2042  er attributes. B
-0000f420: 7920 7573 696e 6720 6f6e 6520 6f66 2074  y using one of t
-0000f430: 6865 206f 7074 696f 6e73 0a73 686f 776e  he options.shown
-0000f440: 2061 626f 7665 2c20 6974 2063 616e 206c   above, it can l
-0000f450: 6973 7420 7468 6520 4241 5349 4320 7072  ist the BASIC pr
-0000f460: 6f67 7261 6d20 616e 6420 7661 7269 6162  ogram and variab
-0000f470: 6c65 7320 2869 6620 7072 6573 656e 7429  les (if present)
-0000f480: 2c20 7368 6f77 2074 6865 0a63 6f6e 7465  , show the.conte
-0000f490: 6e74 7320 6f66 2061 2072 616e 6765 206f  nts of a range o
-0000f4a0: 6620 6164 6472 6573 7365 732c 2073 6561  f addresses, sea
-0000f4b0: 7263 6820 7468 6520 5241 4d20 666f 7220  rch the RAM for 
-0000f4c0: 6120 7365 7175 656e 6365 206f 6620 6279  a sequence of by
-0000f4d0: 7465 2076 616c 7565 730a 6f72 2061 2074  te values.or a t
-0000f4e0: 6578 7420 7374 7269 6e67 2c20 6f72 2067  ext string, or g
-0000f4f0: 656e 6572 6174 6520 6120 6361 6c6c 2067  enerate a call g
-0000f500: 7261 7068 2e0a 0a2e 2e20 5f73 6e61 7069  raph..... _snapi
-0000f510: 6e66 6f2d 6361 6c6c 2d67 7261 7068 3a0a  nfo-call-graph:.
-0000f520: 0a43 616c 6c20 6772 6170 6873 0a5e 5e5e  .Call graphs.^^^
-0000f530: 5e5e 5e5e 5e5e 5e5e 0a60 736e 6170 696e  ^^^^^^^^.`snapin
-0000f540: 666f 2e70 7960 2063 616e 2067 656e 6572  fo.py` can gener
-0000f550: 6174 6520 6120 6361 6c6c 2067 7261 7068  ate a call graph
-0000f560: 2069 6e20 6044 4f54 2066 6f72 6d61 7460   in `DOT format`
-0000f570: 5f20 6672 6f6d 2061 2073 6e61 7073 686f  _ from a snapsho
-0000f580: 7420 616e 6420 610a 636f 7272 6573 706f  t and a.correspo
-0000f590: 6e64 696e 6720 636f 6e74 726f 6c20 6669  nding control fi
-0000f5a0: 6c65 2e20 466f 7220 6578 616d 706c 652c  le. For example,
-0000f5b0: 2069 6620 6067 616d 652e 6374 6c60 2069   if `game.ctl` i
-0000f5c0: 7320 7072 6573 656e 7420 616c 6f6e 6773  s present alongs
-0000f5d0: 6964 650a 6067 616d 652e 7a38 3060 2c20  ide.`game.z80`, 
-0000f5e0: 7468 656e 3a3a 0a0a 2020 2420 736e 6170  then::..  $ snap
-0000f5f0: 696e 666f 2e70 7920 2d67 2067 616d 652e  info.py -g game.
-0000f600: 7a38 3020 3e20 6761 6d65 2e64 6f74 0a0a  z80 > game.dot..
-0000f610: 7769 6c6c 2070 726f 6475 6365 2061 2063  will produce a c
-0000f620: 616c 6c20 6772 6170 6820 696e 2060 6761  all graph in `ga
-0000f630: 6d65 2e64 6f74 602c 2077 6974 6820 6120  me.dot`, with a 
-0000f640: 6e6f 6465 2066 6f72 2065 6163 6820 726f  node for each ro
-0000f650: 7574 696e 6520 6465 636c 6172 6564 0a69  utine declared.i
-0000f660: 6e20 6067 616d 652e 6374 6c60 2c20 616e  n `game.ctl`, an
-0000f670: 6420 616e 2065 6467 6520 6265 7477 6565  d an edge betwee
-0000f680: 6e20 7477 6f20 6e6f 6465 7320 7768 656e  n two nodes when
-0000f690: 6576 6572 2074 6865 2072 6f75 7469 6e65  ever the routine
-0000f6a0: 2072 6570 7265 7365 6e74 6564 0a62 7920   represented.by 
-0000f6b0: 7468 6520 6669 7273 7420 6e6f 6465 2063  the first node c
-0000f6c0: 616c 6c73 2c20 6a75 6d70 7320 746f 2c20  alls, jumps to, 
-0000f6d0: 6f72 2063 6f6e 7469 6e75 6573 2069 6e74  or continues int
-0000f6e0: 6f20 7468 6520 726f 7574 696e 6520 7265  o the routine re
-0000f6f0: 7072 6573 656e 7465 6420 6279 0a74 6865  presented by.the
-0000f700: 2073 6563 6f6e 6420 6e6f 6465 2e0a 0a54   second node...T
-0000f710: 6f20 6372 6561 7465 2061 2050 4e47 2069  o create a PNG i
-0000f720: 6d61 6765 2066 696c 6520 6e61 6d65 6420  mage file named 
-0000f730: 6067 616d 652e 706e 6760 2066 726f 6d20  `game.png` from 
-0000f740: 6067 616d 652e 646f 7460 2c20 7468 6520  `game.dot`, the 
-0000f750: 6064 6f74 6020 7574 696c 6974 790a 2869  `dot` utility.(i
-0000f760: 6e63 6c75 6465 6420 696e 2047 7261 7068  ncluded in Graph
-0000f770: 7669 7a5f 2920 6d61 7920 6265 2075 7365  viz_) may be use
-0000f780: 643a 3a0a 0a20 2024 2064 6f74 202d 5470  d::..  $ dot -Tp
-0000f790: 6e67 2067 616d 652e 646f 7420 3e20 6761  ng game.dot > ga
-0000f7a0: 6d65 2e70 6e67 0a0a 4120 6361 6c6c 2067  me.png..A call g
-0000f7b0: 7261 7068 206d 6179 2063 6f6e 7461 696e  raph may contain
-0000f7c0: 206f 6e65 206f 7220 6d6f 7265 2027 6f72   one or more 'or
-0000f7d0: 7068 616e 7327 2c20 616e 206f 7270 6861  phans', an orpha
-0000f7e0: 6e20 6265 696e 6720 6120 6e6f 6465 2074  n being a node t
-0000f7f0: 6861 7420 6973 0a6e 6f74 2061 7420 7468  hat is.not at th
-0000f800: 6520 6865 6164 206f 6620 616e 7920 6172  e head of any ar
-0000f810: 726f 772c 2061 6e64 2074 6875 7320 7265  row, and thus re
-0000f820: 7072 6573 656e 7473 2061 2072 6f75 7469  presents a routi
-0000f830: 6e65 2074 6861 7420 6973 2028 6173 2066  ne that is (as f
-0000f840: 6172 2061 730a 6073 6e61 7069 6e66 6f2e  ar as.`snapinfo.
-0000f850: 7079 6020 6361 6e20 7465 6c6c 2920 6e6f  py` can tell) no
-0000f860: 7420 7573 6564 2062 7920 616e 7920 6f74  t used by any ot
-0000f870: 6865 7220 726f 7574 696e 6573 2e20 546f  her routines. To
-0000f880: 2064 6563 6c61 7265 2074 6865 2063 616c   declare the cal
-0000f890: 6c65 7273 0a6f 6620 7375 6368 2061 2072  lers.of such a r
-0000f8a0: 6f75 7469 6e65 2028 696e 2063 6173 6520  outine (in case 
-0000f8b0: 6974 2069 7320 6e6f 7420 6120 7472 7565  it is not a true
-0000f8c0: 206f 7270 6861 6e29 2c20 7468 6520 3a72   orphan), the :r
-0000f8d0: 6566 3a60 7265 6673 6020 6469 7265 6374  ef:`refs` direct
-0000f8e0: 6976 650a 6d61 7920 6265 2075 7365 642e  ive.may be used.
-0000f8f0: 0a0a 546f 2068 656c 7020 6964 656e 7469  ..To help identi
-0000f900: 6679 206f 7270 6861 6e20 6e6f 6465 7320  fy orphan nodes 
-0000f910: 616e 6420 6d69 7373 696e 6720 6564 6765  and missing edge
-0000f920: 732c 2065 6163 6820 6f66 2074 6865 2066  s, each of the f
-0000f930: 6972 7374 2074 6872 6565 206c 696e 6573  irst three lines
-0000f940: 0a6f 6620 7468 6520 444f 5420 6669 6c65  .of the DOT file
-0000f950: 2070 726f 6475 6365 6420 6279 2060 736e   produced by `sn
-0000f960: 6170 696e 666f 2e70 7960 2063 6f6e 7461  apinfo.py` conta
-0000f970: 696e 7320 6120 6c69 7374 206f 6620 4944  ins a list of ID
-0000f980: 7320 6f66 2074 6865 0a66 6f6c 6c6f 7769  s of the.followi
-0000f990: 6e67 2074 7970 6573 206f 6620 6e6f 6465  ng types of node
-0000f9a0: 3a0a 0a2a 2075 6e63 6f6e 6e65 6374 6564  :..* unconnected
-0000f9b0: 206e 6f64 6573 0a2a 206f 7270 6861 6e20   nodes.* orphan 
-0000f9c0: 6e6f 6465 7320 636f 6e6e 6563 7465 6420  nodes connected 
-0000f9d0: 746f 206f 7468 6572 206e 6f64 6573 0a2a  to other nodes.*
-0000f9e0: 206e 6f6e 2d6f 7270 6861 6e20 6e6f 6465   non-orphan node
-0000f9f0: 7320 7768 6f73 6520 6669 7273 7420 696e  s whose first in
-0000fa00: 7374 7275 6374 696f 6e20 6973 206e 6f74  struction is not
-0000fa10: 2075 7365 640a 0a54 6865 2061 7070 6561   used..The appea
-0000fa20: 7261 6e63 6520 6f66 206e 6f64 6573 2061  rance of nodes a
-0000fa30: 6e64 2065 6467 6573 2069 6e20 6120 6361  nd edges in a ca
-0000fa40: 6c6c 2067 7261 7068 2069 6d61 6765 2063  ll graph image c
-0000fa50: 616e 2062 6520 636f 6e66 6967 7572 6564  an be configured
-0000fa60: 2076 6961 0a74 6865 2060 6045 6467 6541   via.the ``EdgeA
-0000fa70: 7474 7269 6275 7465 7360 602c 2060 6047  ttributes``, ``G
-0000fa80: 7261 7068 4174 7472 6962 7574 6573 6060  raphAttributes``
-0000fa90: 2c20 6060 4e6f 6465 4174 7472 6962 7574  , ``NodeAttribut
-0000faa0: 6573 6060 2061 6e64 0a60 604e 6f64 654c  es`` and.``NodeL
-0000fab0: 6162 656c 6060 2063 6f6e 6669 6775 7261  abel`` configura
-0000fac0: 7469 6f6e 2070 6172 616d 6574 6572 7320  tion parameters 
-0000fad0: 2873 6565 2062 656c 6f77 292e 0a0a 2e2e  (see below).....
-0000fae0: 205f 736e 6170 696e 666f 2d63 6f6e 663a   _snapinfo-conf:
-0000faf0: 0a0a 436f 6e66 6967 7572 6174 696f 6e0a  ..Configuration.
-0000fb00: 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 6073  ^^^^^^^^^^^^^.`s
-0000fb10: 6e61 7069 6e66 6f2e 7079 6020 7769 6c6c  napinfo.py` will
-0000fb20: 2072 6561 6420 636f 6e66 6967 7572 6174   read configurat
-0000fb30: 696f 6e20 6672 6f6d 2061 2066 696c 6520  ion from a file 
-0000fb40: 6e61 6d65 6420 6073 6b6f 6f6c 6b69 742e  named `skoolkit.
-0000fb50: 696e 6960 2069 6e20 7468 650a 6375 7272  ini` in the.curr
-0000fb60: 656e 7420 776f 726b 696e 6720 6469 7265  ent working dire
-0000fb70: 6374 6f72 7920 6f72 2069 6e20 607e 2f2e  ctory or in `~/.
-0000fb80: 736b 6f6f 6c6b 6974 602c 2069 6620 7072  skoolkit`, if pr
-0000fb90: 6573 656e 742e 2054 6865 2072 6563 6f67  esent. The recog
-0000fba0: 6e69 7365 640a 636f 6e66 6967 7572 6174  nised.configurat
-0000fbb0: 696f 6e20 7061 7261 6d65 7465 7273 2061  ion parameters a
-0000fbc0: 7265 3a0a 0a2a 2060 6045 6467 6541 7474  re:..* ``EdgeAtt
-0000fbd0: 7269 6275 7465 7360 6020 2d20 7468 6520  ributes`` - the 
-0000fbe0: 6465 6661 756c 7420 6174 7472 6962 7574  default attribut
-0000fbf0: 6573 5f20 666f 7220 6564 6765 7320 696e  es_ for edges in
-0000fc00: 2061 2063 616c 6c20 6772 6170 680a 2020   a call graph.  
-0000fc10: 2864 6566 6175 6c74 3a20 6e6f 6e65 290a  (default: none).
-0000fc20: 2a20 6060 4772 6170 6841 7474 7269 6275  * ``GraphAttribu
-0000fc30: 7465 7360 6020 2d20 7468 6520 6465 6661  tes`` - the defa
-0000fc40: 756c 7420 6174 7472 6962 7574 6573 5f20  ult attributes_ 
-0000fc50: 666f 7220 6120 6361 6c6c 2067 7261 7068  for a call graph
-0000fc60: 2028 6465 6661 756c 743a 0a20 206e 6f6e   (default:.  non
-0000fc70: 6529 0a2a 2060 604e 6f64 6541 7474 7269  e).* ``NodeAttri
-0000fc80: 6275 7465 7360 6020 2d20 7468 6520 6465  butes`` - the de
-0000fc90: 6661 756c 7420 6174 7472 6962 7574 6573  fault attributes
-0000fca0: 5f20 666f 7220 6e6f 6465 7320 696e 2061  _ for nodes in a
-0000fcb0: 2063 616c 6c20 6772 6170 680a 2020 2864   call graph.  (d
-0000fcc0: 6566 6175 6c74 3a20 6060 7368 6170 653d  efault: ``shape=
-0000fcd0: 7265 636f 7264 6060 290a 2a20 6060 4e6f  record``).* ``No
-0000fce0: 6465 4964 6060 202d 2074 6865 2066 6f72  deId`` - the for
-0000fcf0: 6d61 7420 6f66 2074 6865 206e 6f64 6520  mat of the node 
-0000fd00: 4944 7320 696e 2061 2063 616c 6c20 6772  IDs in a call gr
-0000fd10: 6170 6820 2864 6566 6175 6c74 3a0a 2020  aph (default:.  
-0000fd20: 6060 7b61 6464 7265 7373 7d60 6029 0a2a  ``{address}``).*
-0000fd30: 2060 604e 6f64 654c 6162 656c 6060 202d   ``NodeLabel`` -
-0000fd40: 2074 6865 2066 6f72 6d61 7420 6f66 2074   the format of t
-0000fd50: 6865 206e 6f64 6520 6c61 6265 6c73 2069  he node labels i
-0000fd60: 6e20 6120 6361 6c6c 2067 7261 7068 2028  n a call graph (
-0000fd70: 6465 6661 756c 743a 0a20 2060 6022 7b61  default:.  ``"{a
-0000fd80: 6464 7265 7373 7d20 7b61 6464 7265 7373  ddress} {address
-0000fd90: 3a30 3458 7d5c 6e7b 6c61 6265 6c7d 2260  :04X}\n{label}"`
-0000fda0: 6029 0a2a 2060 6050 6565 6b60 6020 2d20  `).* ``Peek`` - 
-0000fdb0: 7468 6520 666f 726d 6174 206f 6620 6561  the format of ea
-0000fdc0: 6368 206c 696e 6520 6f66 2074 6865 206f  ch line of the o
-0000fdd0: 7574 7075 7420 7072 6f64 7563 6564 2062  utput produced b
-0000fde0: 7920 7468 6520 6060 2d2d 7065 656b 6060  y the ``--peek``
-0000fdf0: 0a20 206f 7074 696f 6e20 2864 6566 6175  .  option (defau
-0000fe00: 6c74 3a0a 2020 6060 7b61 6464 7265 7373  lt:.  ``{address
-0000fe10: 3a3e 357d 207b 6164 6472 6573 733a 3034  :>5} {address:04
-0000fe20: 587d 3a20 7b76 616c 7565 3a3e 337d 2020  X}: {value:>3}  
-0000fe30: 7b76 616c 7565 3a30 3258 7d20 207b 7661  {value:02X}  {va
-0000fe40: 6c75 653a 3038 627d 2020 7b63 6861 727d  lue:08b}  {char}
-0000fe50: 6060 290a 2a20 6060 576f 7264 6060 202d  ``).* ``Word`` -
-0000fe60: 2074 6865 2066 6f72 6d61 7420 6f66 2065   the format of e
-0000fe70: 6163 6820 6c69 6e65 206f 6620 7468 6520  ach line of the 
-0000fe80: 6f75 7470 7574 2070 726f 6475 6365 6420  output produced 
-0000fe90: 6279 2074 6865 2060 602d 2d77 6f72 6460  by the ``--word`
-0000fea0: 600a 2020 6f70 7469 6f6e 2028 6465 6661  `.  option (defa
-0000feb0: 756c 743a 2060 607b 6164 6472 6573 733a  ult: ``{address:
-0000fec0: 3e35 7d20 7b61 6464 7265 7373 3a30 3458  >5} {address:04X
-0000fed0: 7d3a 207b 7661 6c75 653a 3e35 7d20 207b  }: {value:>5}  {
-0000fee0: 7661 6c75 653a 3034 587d 6060 290a 0a60  value:04X}``)..`
-0000fef0: 604e 6f64 6549 6460 6020 616e 6420 6060  `NodeId`` and ``
-0000ff00: 4e6f 6465 4c61 6265 6c60 6020 6172 6520  NodeLabel`` are 
-0000ff10: 7374 616e 6461 7264 2050 7974 686f 6e20  standard Python 
-0000ff20: 666f 726d 6174 2073 7472 696e 6773 2074  format strings t
-0000ff30: 6861 7420 7265 636f 676e 6973 650a 7468  hat recognise.th
-0000ff40: 6520 7265 706c 6163 656d 656e 7420 6669  e replacement fi
-0000ff50: 656c 6473 2060 6061 6464 7265 7373 6060  elds ``address``
-0000ff60: 2061 6e64 2060 606c 6162 656c 6060 2028   and ``label`` (
-0000ff70: 7468 6520 6164 6472 6573 7320 616e 6420  the address and 
-0000ff80: 6c61 6265 6c20 6f66 2074 6865 0a66 6972  label of the.fir
-0000ff90: 7374 2069 6e73 7472 7563 7469 6f6e 2069  st instruction i
-0000ffa0: 6e20 7468 6520 726f 7574 696e 6520 7265  n the routine re
-0000ffb0: 7072 6573 656e 7465 6420 6279 2074 6865  presented by the
-0000ffc0: 206e 6f64 6529 2e0a 0a43 6f6e 6669 6775   node)...Configu
-0000ffd0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
-0000ffe0: 7320 6d75 7374 2061 7070 6561 7220 696e  s must appear in
-0000fff0: 2061 2060 605b 736e 6170 696e 666f 5d60   a ``[snapinfo]`
-00010000: 6020 7365 6374 696f 6e2e 2046 6f72 2065  ` section. For e
-00010010: 7861 6d70 6c65 2c0a 746f 206d 616b 6520  xample,.to make 
-00010020: 6073 6e61 7069 6e66 6f2e 7079 6020 7573  `snapinfo.py` us
-00010030: 6520 6f70 656e 2061 7272 6f77 6865 6164  e open arrowhead
-00010040: 7320 616e 6420 6120 6379 616e 2062 6163  s and a cyan bac
-00010050: 6b67 726f 756e 6420 636f 6c6f 7572 2069  kground colour i
-00010060: 6e20 6361 6c6c 0a67 7261 7068 7320 6279  n call.graphs by
-00010070: 2064 6566 6175 6c74 2c20 6164 6420 7468   default, add th
-00010080: 6520 666f 6c6c 6f77 696e 6720 7365 6374  e following sect
-00010090: 696f 6e20 746f 2060 736b 6f6f 6c6b 6974  ion to `skoolkit
-000100a0: 2e69 6e69 603a 3a0a 0a20 205b 736e 6170  .ini`::..  [snap
-000100b0: 696e 666f 5d0a 2020 4564 6765 4174 7472  info].  EdgeAttr
-000100c0: 6962 7574 6573 3d61 7272 6f77 6865 6164  ibutes=arrowhead
-000100d0: 3d6f 7065 6e0a 2020 4772 6170 6841 7474  =open.  GraphAtt
-000100e0: 7269 6275 7465 733d 6267 636f 6c6f 723d  ributes=bgcolor=
-000100f0: 6379 616e 0a0a 436f 6e66 6967 7572 6174  cyan..Configurat
-00010100: 696f 6e20 7061 7261 6d65 7465 7273 206d  ion parameters m
-00010110: 6179 2061 6c73 6f20 6265 2073 6574 206f  ay also be set o
-00010120: 6e20 7468 6520 636f 6d6d 616e 6420 6c69  n the command li
-00010130: 6e65 2062 7920 7573 696e 6720 7468 650a  ne by using the.
-00010140: 6060 2d2d 696e 6960 6020 6f70 7469 6f6e  ``--ini`` option
-00010150: 2e20 5061 7261 6d65 7465 7220 7661 6c75  . Parameter valu
-00010160: 6573 2073 6574 2074 6869 7320 7761 7920  es set this way 
-00010170: 7769 6c6c 206f 7665 7272 6964 6520 616e  will override an
-00010180: 7920 666f 756e 6420 696e 0a60 736b 6f6f  y found in.`skoo
-00010190: 6c6b 6974 2e69 6e69 602e 0a0a 2e2e 205f  lkit.ini`..... _
-000101a0: 444f 5420 666f 726d 6174 3a20 6874 7470  DOT format: http
-000101b0: 733a 2f2f 6772 6170 6876 697a 2e67 6974  s://graphviz.git
-000101c0: 6c61 622e 696f 2f5f 7061 6765 732f 646f  lab.io/_pages/do
-000101d0: 632f 696e 666f 2f6c 616e 672e 6874 6d6c  c/info/lang.html
-000101e0: 0a2e 2e20 5f47 7261 7068 7669 7a3a 2068  ... _Graphviz: h
-000101f0: 7474 7073 3a2f 2f67 7261 7068 7669 7a2e  ttps://graphviz.
-00010200: 6769 746c 6162 2e69 6f2f 0a2e 2e20 5f61  gitlab.io/... _a
-00010210: 7474 7269 6275 7465 733a 2068 7474 7073  ttributes: https
-00010220: 3a2f 2f67 7261 7068 7669 7a2e 6769 746c  ://graphviz.gitl
-00010230: 6162 2e69 6f2f 5f70 6167 6573 2f64 6f63  ab.io/_pages/doc
-00010240: 2f69 6e66 6f2f 6174 7472 732e 6874 6d6c  /info/attrs.html
-00010250: 0a0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  ..+---------+---
-00010260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000102a0: 2b0a 7c20 5665 7273 696f 6e20 7c20 4368  +.| Version | Ch
-000102b0: 616e 6765 7320 2020 2020 2020 2020 2020  anges           
-000102c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102f0: 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d  |.+=========+===
-00010300: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010310: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010320: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010330: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010340: 2b0a 7c20 392e 3020 2020 2020 7c20 5368  +.| 9.0     | Sh
-00010350: 6f77 7320 7468 6520 6375 7272 656e 7420  ows the current 
-00010360: 4159 2072 6567 6973 7465 7220 696e 2031  AY register in 1
-00010370: 3238 4b20 535a 5820 616e 6420 5a38 3020  28K SZX and Z80 
-00010380: 736e 6170 7368 6f74 7320 2020 2020 2020  snapshots       
-00010390: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-000103a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000103b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000103c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000103d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000103e0: 2b0a 7c20 382e 3130 2020 2020 7c20 5368  +.| 8.10    | Sh
-000103f0: 6f77 7320 7468 6520 7661 6c75 6520 6f66  ows the value of
-00010400: 2074 6865 2054 2d73 7461 7465 7320 636f   the T-states co
-00010410: 756e 7465 7220 616e 6420 7468 6520 6973  unter and the is
-00010420: 7375 6520 3220 656d 756c 6174 696f 6e20  sue 2 emulation 
-00010430: 7c0a 7c20 2020 2020 2020 2020 7c20 666c  |.|         | fl
-00010440: 6167 2069 6e20 535a 5820 616e 6420 5a38  ag in SZX and Z8
-00010450: 3020 736e 6170 7368 6f74 7320 2020 2020  0 snapshots     
-00010460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010480: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00010490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000104a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000104b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000104c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000104d0: 2b0a 7c20 382e 3420 2020 2020 7c20 4164  +.| 8.4     | Ad
-000104e0: 6465 6420 7468 6520 6060 5065 656b 6060  ded the ``Peek``
-000104f0: 2061 6e64 2060 6057 6f72 6460 6020 636f   and ``Word`` co
-00010500: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
-00010510: 6d65 7465 7273 2020 2020 2020 2020 2020  meters          
-00010520: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00010530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010570: 2b0a 7c20 382e 3320 2020 2020 7c20 4164  +.| 8.3     | Ad
-00010580: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
-00010590: 7265 6164 696e 6720 636f 6e74 726f 6c20  reading control 
-000105a0: 6669 6c65 7320 6672 6f6d 2061 2064 6972  files from a dir
-000105b0: 6563 746f 7279 2020 2020 2020 2020 2020  ectory          
-000105c0: 7c0a 7c20 2020 2020 2020 2020 7c20 2860  |.|         | (`
-000105d0: 602d 2d63 746c 2044 4952 6060 2920 2020  `--ctl DIR``)   
-000105e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000105f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010610: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00010620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010660: 2b0a 7c20 382e 3220 2020 2020 7c20 436f  +.| 8.2     | Co
-00010670: 6e66 6967 7572 6174 696f 6e20 6973 2072  nfiguration is r
-00010680: 6561 6420 6672 6f6d 2060 736b 6f6f 6c6b  ead from `skoolk
-00010690: 6974 2e69 6e69 6020 6966 2070 7265 7365  it.ini` if prese
-000106a0: 6e74 3b20 6164 6465 6420 7468 6520 2020  nt; added the   
-000106b0: 7c0a 7c20 2020 2020 2020 2020 7c20 6162  |.|         | ab
-000106c0: 696c 6974 7920 746f 2072 6561 6420 6269  ility to read bi
-000106d0: 6e61 7279 2066 696c 6573 3b20 6164 6465  nary files; adde
-000106e0: 6420 7468 6520 6060 2d2d 6361 6c6c 2d67  d the ``--call-g
-000106f0: 7261 7068 6060 2c20 2020 2020 2020 2020  raph``,         
-00010700: 7c0a 7c20 2020 2020 2020 2020 7c20 6060  |.|         | ``
-00010710: 2d2d 6374 6c60 602c 2060 602d 2d69 6e69  --ctl``, ``--ini
-00010720: 6060 2c20 6060 2d2d 6f72 6760 602c 2060  ``, ``--org``, `
-00010730: 602d 2d70 6167 6560 6020 616e 6420 6060  `--page`` and ``
-00010740: 2d2d 7368 6f77 2d63 6f6e 6669 6760 6020  --show-config`` 
-00010750: 7c0a 7c20 2020 2020 2020 2020 7c20 6f70  |.|         | op
-00010760: 7469 6f6e 7320 2020 2020 2020 2020 2020  tions           
-00010770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000107a0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-000107b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000107f0: 2b0a 7c20 362e 3220 2020 2020 7c20 5468  +.| 6.2     | Th
-00010800: 6520 6060 2d2d 6669 6e64 6060 2c20 6060  e ``--find``, ``
-00010810: 2d2d 6669 6e64 2d74 696c 6560 602c 2060  --find-tile``, `
-00010820: 602d 2d70 6565 6b60 6020 616e 6420 6060  `--peek`` and ``
-00010830: 2d2d 776f 7264 6060 2020 2020 2020 2020  --word``        
-00010840: 7c0a 7c20 2020 2020 2020 2020 7c20 6f70  |.|         | op
-00010850: 7469 6f6e 7320 6163 6365 7074 2068 6578  tions accept hex
-00010860: 6164 6563 696d 616c 2069 6e74 6567 6572  adecimal integer
-00010870: 7320 7072 6566 6978 6564 2062 7920 2730  s prefixed by '0
-00010880: 7827 2020 2020 2020 2020 2020 2020 2020  x'              
-00010890: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-000108a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000108b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000108c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000108d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000108e0: 2b0a 7c20 362e 3020 2020 2020 7c20 4164  +.| 6.0     | Ad
-000108f0: 6465 6420 7375 7070 6f72 7420 746f 2074  ded support to t
-00010900: 6865 2060 602d 2d66 696e 6460 6020 6f70  he ``--find`` op
-00010910: 7469 6f6e 2066 6f72 2064 6973 7461 6e63  tion for distanc
-00010920: 6520 7261 6e67 6573 3b20 6164 6465 6420  e ranges; added 
-00010930: 7c0a 7c20 2020 2020 2020 2020 7c20 7468  |.|         | th
-00010940: 6520 6060 2d2d 6669 6e64 2d74 696c 6560  e ``--find-tile`
-00010950: 6020 616e 6420 6060 2d2d 776f 7264 6060  ` and ``--word``
-00010960: 206f 7074 696f 6e73 3b20 7468 6520 6060   options; the ``
-00010970: 2d2d 7065 656b 6060 206f 7074 696f 6e20  --peek`` option 
-00010980: 7c0a 7c20 2020 2020 2020 2020 7c20 7368  |.|         | sh
-00010990: 6f77 7320 5544 4773 2061 6e64 2042 4153  ows UDGs and BAS
-000109a0: 4943 2074 6f6b 656e 7320 2020 2020 2020  IC tokens       
-000109b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000109c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000109d0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-000109e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000109f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010a20: 2b0a 7c20 352e 3420 2020 2020 7c20 4164  +.| 5.4     | Ad
-00010a30: 6465 6420 7468 6520 6060 2d2d 7661 7269  ded the ``--vari
-00010a40: 6162 6c65 7360 6020 6f70 7469 6f6e 3b20  ables`` option; 
-00010a50: 5544 4773 2069 6e20 6120 4241 5349 4320  UDGs in a BASIC 
-00010a60: 7072 6f67 7261 6d20 6172 6520 2020 2020  program are     
-00010a70: 7c0a 7c20 2020 2020 2020 2020 7c20 7368  |.|         | sh
-00010a80: 6f77 6e20 6173 2073 7065 6369 616c 2073  own as special s
-00010a90: 796d 626f 6c73 2028 652e 672e 2060 607b  ymbols (e.g. ``{
-00010aa0: 5544 472d 417d 6060 2920 2020 2020 2020  UDG-A}``)       
-00010ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ac0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00010ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b10: 2b0a 7c20 352e 3320 2020 2020 7c20 4e65  +.| 5.3     | Ne
-00010b20: 7720 2020 2020 2020 2020 2020 2020 2020  w               
-00010b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010b60: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
-00010b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00010bb0: 2b0a 0a2e 2e20 5f73 6e61 706d 6f64 2e70  +.... _snapmod.p
-00010bc0: 793a 0a0a 736e 6170 6d6f 642e 7079 0a2d  y:..snapmod.py.-
-00010bd0: 2d2d 2d2d 2d2d 2d2d 2d0a 6073 6e61 706d  ---------.`snapm
-00010be0: 6f64 2e70 7960 206d 6f64 6966 6965 7320  od.py` modifies 
-00010bf0: 7468 6520 7265 6769 7374 6572 7320 616e  the registers an
-00010c00: 6420 5241 4d20 696e 2061 6e20 535a 5820  d RAM in an SZX 
-00010c10: 6f72 205a 3830 2073 6e61 7073 686f 742e  or Z80 snapshot.
-00010c20: 2046 6f72 0a65 7861 6d70 6c65 3a3a 0a0a   For.example::..
-00010c30: 2020 2420 736e 6170 6d6f 642e 7079 202d    $ snapmod.py -
-00010c40: 2d70 6f6b 6520 3332 3736 382c 3020 6761  -poke 32768,0 ga
-00010c50: 6d65 2e7a 3830 2070 6f6b 6564 2e7a 3830  me.z80 poked.z80
-00010c60: 0a0a 546f 206c 6973 7420 7468 6520 6f70  ..To list the op
-00010c70: 7469 6f6e 7320 7375 7070 6f72 7465 6420  tions supported 
-00010c80: 6279 2060 736e 6170 6d6f 642e 7079 602c  by `snapmod.py`,
-00010c90: 2072 756e 2069 7420 7769 7468 206e 6f20   run it with no 
-00010ca0: 6172 6775 6d65 6e74 733a 3a0a 0a20 2075  arguments::..  u
-00010cb0: 7361 6765 3a20 736e 6170 6d6f 642e 7079  sage: snapmod.py
-00010cc0: 205b 6f70 7469 6f6e 735d 2069 6e66 696c   [options] infil
-00010cd0: 6520 5b6f 7574 6669 6c65 5d0a 0a20 204d  e [outfile]..  M
-00010ce0: 6f64 6966 7920 616e 2053 5a58 206f 7220  odify an SZX or 
-00010cf0: 5a38 3020 736e 6170 7368 6f74 2e0a 0a20  Z80 snapshot... 
-00010d00: 204f 7074 696f 6e73 3a0a 2020 2020 2d6d   Options:.    -m
-00010d10: 205b 733a 5d73 7263 2c73 697a 652c 5b64   [s:]src,size,[d
-00010d20: 3a5d 6465 7374 2c20 2d2d 6d6f 7665 205b  :]dest, --move [
-00010d30: 733a 5d73 7263 2c73 697a 652c 5b64 3a5d  s:]src,size,[d:]
-00010d40: 6465 7374 0a20 2020 2020 2020 2020 2020  dest.           
-00010d50: 2020 2020 2020 2020 2020 2020 2020 2043                 C
-00010d60: 6f70 7920 6120 626c 6f63 6b20 6f66 2062  opy a block of b
-00010d70: 7974 6573 206f 6620 7468 6520 6769 7665  ytes of the give
-00010d80: 6e20 7369 7a65 2066 726f 6d20 7372 6320  n size from src 
-00010d90: 696e 0a20 2020 2020 2020 2020 2020 2020  in.             
-00010da0: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
-00010db0: 2062 616e 6b20 7320 746f 2064 6573 7420   bank s to dest 
-00010dc0: 696e 2052 414d 2062 616e 6b20 642e 2054  in RAM bank d. T
-00010dd0: 6869 7320 6f70 7469 6f6e 206d 6179 2062  his option may b
-00010de0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00010df0: 2020 2020 2020 2020 2020 2020 7573 6564              used
-00010e00: 206d 756c 7469 706c 6520 7469 6d65 732e   multiple times.
-00010e10: 0a20 2020 202d 7020 5b70 3a5d 615b 2d62  .    -p [p:]a[-b
-00010e20: 5b2d 635d 5d2c 5b5e 2b5d 762c 202d 2d70  [-c]],[^+]v, --p
-00010e30: 6f6b 6520 5b70 3a5d 615b 2d62 5b2d 635d  oke [p:]a[-b[-c]
-00010e40: 5d2c 5b5e 2b5d 760a 2020 2020 2020 2020  ],[^+]v.        
-00010e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e60: 2020 504f 4b45 204e 2c76 2069 6e20 5241    POKE N,v in RA
-00010e70: 4d20 6261 6e6b 2070 2066 6f72 204e 2069  M bank p for N i
-00010e80: 6e20 7b61 2c20 612b 632c 2061 2b32 632e  n {a, a+c, a+2c.
-00010e90: 2e2e 2c20 627d 2e0a 2020 2020 2020 2020  .., b}..        
-00010ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010eb0: 2020 5072 6566 6978 2027 7627 2077 6974    Prefix 'v' wit
-00010ec0: 6820 275e 2720 746f 2070 6572 666f 726d  h '^' to perform
-00010ed0: 2061 6e20 584f 5220 6f70 6572 6174 696f   an XOR operatio
-00010ee0: 6e2c 206f 720a 2020 2020 2020 2020 2020  n, or.          
-00010ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f00: 272b 2720 746f 2070 6572 666f 726d 2061  '+' to perform a
-00010f10: 6e20 4144 4420 6f70 6572 6174 696f 6e2e  n ADD operation.
-00010f20: 2054 6869 7320 6f70 7469 6f6e 206d 6179   This option may
-00010f30: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
-00010f40: 2020 2020 2020 2020 2020 2020 2020 7573                us
-00010f50: 6564 206d 756c 7469 706c 6520 7469 6d65  ed multiple time
-00010f60: 732e 0a20 2020 202d 7220 6e61 6d65 3d76  s..    -r name=v
-00010f70: 616c 7565 2c20 2d2d 7265 6720 6e61 6d65  alue, --reg name
-00010f80: 3d76 616c 7565 0a20 2020 2020 2020 2020  =value.         
-00010f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010fa0: 2053 6574 2074 6865 2076 616c 7565 206f   Set the value o
-00010fb0: 6620 6120 7265 6769 7374 6572 2e20 446f  f a register. Do
-00010fc0: 2027 2d2d 7265 6720 6865 6c70 2720 666f   '--reg help' fo
-00010fd0: 7220 6d6f 7265 0a20 2020 2020 2020 2020  r more.         
-00010fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ff0: 2069 6e66 6f72 6d61 7469 6f6e 2e20 5468   information. Th
-00011000: 6973 206f 7074 696f 6e20 6d61 7920 6265  is option may be
-00011010: 2075 7365 6420 6d75 6c74 6970 6c65 2074   used multiple t
-00011020: 696d 6573 2e0a 2020 2020 2d73 206e 616d  imes..    -s nam
-00011030: 653d 7661 6c75 652c 202d 2d73 7461 7465  e=value, --state
-00011040: 206e 616d 653d 7661 6c75 650a 2020 2020   name=value.    
-00011050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011060: 2020 2020 2020 5365 7420 6120 6861 7264        Set a hard
-00011070: 7761 7265 2073 7461 7465 2061 7474 7269  ware state attri
-00011080: 6275 7465 2e20 446f 2027 2d2d 7374 6174  bute. Do '--stat
-00011090: 6520 6865 6c70 2720 666f 720a 2020 2020  e help' for.    
-000110a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110b0: 2020 2020 2020 6d6f 7265 2069 6e66 6f72        more infor
-000110c0: 6d61 7469 6f6e 2e20 5468 6973 206f 7074  mation. This opt
-000110d0: 696f 6e20 6d61 7920 6265 2075 7365 6420  ion may be used 
-000110e0: 6d75 6c74 6970 6c65 0a20 2020 2020 2020  multiple.       
-000110f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011100: 2020 2074 696d 6573 2e0a 2020 2020 2d56     times..    -V
-00011110: 2c20 2d2d 7665 7273 696f 6e20 2020 2020  , --version     
-00011120: 2020 2020 5368 6f77 2053 6b6f 6f6c 4b69      Show SkoolKi
-00011130: 7420 7665 7273 696f 6e20 6e75 6d62 6572  t version number
-00011140: 2061 6e64 2065 7869 742e 0a0a 2b2d 2d2d   and exit...+---
-00011150: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-00011160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011170: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011190: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 5665  ----------+.| Ve
-000111a0: 7273 696f 6e20 7c20 4368 616e 6765 7320  rsion | Changes 
-000111b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111e0: 2020 2020 2020 2020 2020 7c0a 2b3d 3d3d            |.+===
-000111f0: 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d 3d3d  ======+=========
-00011200: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011210: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011220: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00011230: 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a 7c20 392e  ==========+.| 9.
-00011240: 3120 2020 2020 7c20 4164 6465 6420 7375  1     | Added su
-00011250: 7070 6f72 7420 666f 7220 6d6f 6469 6679  pport for modify
-00011260: 696e 6720 535a 5820 736e 6170 7368 6f74  ing SZX snapshot
-00011270: 7320 616e 6420 3132 384b 2073 6e61 7073  s and 128K snaps
-00011280: 686f 7473 3b20 7468 6520 7c0a 7c20 2020  hots; the |.|   
-00011290: 2020 2020 2020 7c20 6060 2d2d 6d6f 7665        | ``--move
-000112a0: 6060 2061 6e64 2060 602d 2d70 6f6b 6560  `` and ``--poke`
-000112b0: 6020 6f70 7469 6f6e 7320 6361 6e20 6d6f  ` options can mo
-000112c0: 6469 6679 2073 7065 6369 6669 6320 5241  dify specific RA
-000112d0: 4d20 6261 6e6b 7320 2020 7c0a 2b2d 2d2d  M banks   |.+---
-000112e0: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-000112f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011320: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 382e  ----------+.| 8.
-00011330: 3130 2020 2020 7c20 4164 6465 6420 7468  10    | Added th
-00011340: 6520 6060 6973 7375 6532 6060 2068 6172  e ``issue2`` har
-00011350: 6477 6172 6520 7374 6174 6520 6174 7472  dware state attr
-00011360: 6962 7574 6520 2020 2020 2020 2020 2020  ibute           
-00011370: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-00011380: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-00011390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000113a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000113b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000113c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 382e  ----------+.| 8.
-000113d0: 3920 2020 2020 7c20 4164 6465 6420 7468  9     | Added th
-000113e0: 6520 6060 7473 7461 7465 7360 6020 6861  e ``tstates`` ha
-000113f0: 7264 7761 7265 2073 7461 7465 2061 7474  rdware state att
-00011400: 7269 6275 7465 2020 2020 2020 2020 2020  ribute          
-00011410: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-00011420: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-00011430: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011440: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011460: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 362e  ----------+.| 6.
-00011470: 3220 2020 2020 7c20 5468 6520 6060 2d2d  2     | The ``--
-00011480: 6d6f 7665 6060 2c20 6060 2d2d 706f 6b65  move``, ``--poke
-00011490: 6060 2061 6e64 2060 602d 2d72 6567 6060  `` and ``--reg``
-000114a0: 206f 7074 696f 6e73 2061 6363 6570 7420   options accept 
-000114b0: 2020 2020 2020 2020 2020 7c0a 7c20 2020            |.|   
-000114c0: 2020 2020 2020 7c20 6865 7861 6465 6369        | hexadeci
-000114d0: 6d61 6c20 696e 7465 6765 7273 2070 7265  mal integers pre
-000114e0: 6669 7865 6420 6279 2027 3078 2720 2020  fixed by '0x'   
-000114f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011500: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-00011510: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-00011520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00011550: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20 352e  ----------+.| 5.
-00011560: 3320 2020 2020 7c20 4e65 7720 2020 2020  3     | New     
-00011570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115a0: 2020 2020 2020 2020 2020 7c0a 2b2d 2d2d            |.+---
-000115b0: 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d 2d2d  ------+---------
-000115c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000115d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000115e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000115f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e 2e20  ----------+.... 
-00011600: 5f74 6170 3273 6e61 2e70 793a 0a0a 7461  _tap2sna.py:..ta
-00011610: 7032 736e 612e 7079 0a2d 2d2d 2d2d 2d2d  p2sna.py.-------
-00011620: 2d2d 2d0a 6074 6170 3273 6e61 2e70 7960  ---.`tap2sna.py`
-00011630: 2063 6f6e 7665 7274 7320 6120 5441 5020   converts a TAP 
-00011640: 6f72 2054 5a58 2066 696c 6520 2877 6869  or TZX file (whi
-00011650: 6368 206d 6179 2062 6520 696e 7369 6465  ch may be inside
-00011660: 2061 207a 6970 2061 7263 6869 7665 290a   a zip archive).
-00011670: 696e 746f 2061 6e20 535a 5820 6f72 205a  into an SZX or Z
-00011680: 3830 2073 6e61 7073 686f 742e 2046 6f72  80 snapshot. For
-00011690: 2065 7861 6d70 6c65 3a3a 0a0a 2020 2420   example::..  $ 
-000116a0: 7461 7032 736e 612e 7079 2067 616d 652e  tap2sna.py game.
-000116b0: 7461 7020 6761 6d65 2e7a 3830 0a0a 546f  tap game.z80..To
-000116c0: 206c 6973 7420 7468 6520 6f70 7469 6f6e   list the option
-000116d0: 7320 7375 7070 6f72 7465 6420 6279 2060  s supported by `
-000116e0: 7461 7032 736e 612e 7079 602c 2072 756e  tap2sna.py`, run
-000116f0: 2069 7420 7769 7468 206e 6f20 6172 6775   it with no argu
-00011700: 6d65 6e74 733a 3a0a 0a20 2075 7361 6765  ments::..  usage
-00011710: 3a0a 2020 2020 7461 7032 736e 612e 7079  :.    tap2sna.py
-00011720: 205b 6f70 7469 6f6e 735d 2049 4e50 5554   [options] INPUT
-00011730: 205b 4f55 5446 494c 455d 0a20 2020 2074   [OUTFILE].    t
-00011740: 6170 3273 6e61 2e70 7920 4046 494c 4520  ap2sna.py @FILE 
-00011750: 5b61 7267 735d 0a0a 2020 436f 6e76 6572  [args]..  Conver
-00011760: 7420 6120 5441 5020 6f72 2054 5a58 2066  t a TAP or TZX f
-00011770: 696c 6520 2877 6869 6368 206d 6179 2062  ile (which may b
-00011780: 6520 696e 7369 6465 2061 207a 6970 2061  e inside a zip a
-00011790: 7263 6869 7665 2920 696e 746f 2061 6e20  rchive) into an 
-000117a0: 535a 5820 6f72 0a20 205a 3830 2073 6e61  SZX or.  Z80 sna
-000117b0: 7073 686f 742e 2049 4e50 5554 206d 6179  pshot. INPUT may
-000117c0: 2062 6520 7468 6520 6675 6c6c 2055 524c   be the full URL
-000117d0: 2074 6f20 6120 7265 6d6f 7465 207a 6970   to a remote zip
-000117e0: 2061 7263 6869 7665 206f 7220 5441 502f   archive or TAP/
-000117f0: 545a 580a 2020 6669 6c65 2c20 6f72 2074  TZX.  file, or t
-00011800: 6865 2070 6174 6820 746f 2061 206c 6f63  he path to a loc
-00011810: 616c 2066 696c 652e 2041 7267 756d 656e  al file. Argumen
-00011820: 7473 206d 6179 2062 6520 7265 6164 2066  ts may be read f
-00011830: 726f 6d20 4649 4c45 2069 6e73 7465 6164  rom FILE instead
-00011840: 206f 660a 2020 286f 7220 6173 2077 656c   of.  (or as wel
-00011850: 6c20 6173 2920 6265 696e 6720 6769 7665  l as) being give
-00011860: 6e20 6f6e 2074 6865 2063 6f6d 6d61 6e64  n on the command
-00011870: 206c 696e 652e 0a0a 2020 4f70 7469 6f6e   line...  Option
-00011880: 733a 0a20 2020 202d 6320 6e61 6d65 3d76  s:.    -c name=v
-00011890: 616c 7565 2c20 2d2d 7369 6d2d 6c6f 6164  alue, --sim-load
-000118a0: 2d63 6f6e 6669 6720 6e61 6d65 3d76 616c  -config name=val
-000118b0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-000118c0: 2020 2020 2020 2020 2020 2020 2053 6574               Set
-000118d0: 2074 6865 2076 616c 7565 206f 6620 6120   the value of a 
-000118e0: 7369 6d75 6c61 7465 6420 4c4f 4144 2063  simulated LOAD c
-000118f0: 6f6e 6669 6775 7261 7469 6f6e 0a20 2020  onfiguration.   
-00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011910: 2020 2020 2020 2070 6172 616d 6574 6572         parameter
-00011920: 2e20 446f 2027 2d63 2068 656c 7027 2066  . Do '-c help' f
-00011930: 6f72 206d 6f72 6520 696e 666f 726d 6174  or more informat
-00011940: 696f 6e2e 2054 6869 730a 2020 2020 2020  ion. This.      
-00011950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011960: 2020 2020 6f70 7469 6f6e 206d 6179 2062      option may b
-00011970: 6520 7573 6564 206d 756c 7469 706c 6520  e used multiple 
-00011980: 7469 6d65 732e 0a20 2020 202d 6420 4449  times..    -d DI
-00011990: 522c 202d 2d6f 7574 7075 742d 6469 7220  R, --output-dir 
-000119a0: 4449 520a 2020 2020 2020 2020 2020 2020  DIR.            
-000119b0: 2020 2020 2020 2020 2020 2020 2020 5772                Wr
-000119c0: 6974 6520 7468 6520 736e 6170 7368 6f74  ite the snapshot
-000119d0: 2066 696c 6520 696e 2074 6869 7320 6469   file in this di
-000119e0: 7265 6374 6f72 792e 0a20 2020 202d 4920  rectory..    -I 
-000119f0: 703d 762c 202d 2d69 6e69 2070 3d76 2020  p=v, --ini p=v  
-00011a00: 2020 2053 6574 2074 6865 2076 616c 7565     Set the value
-00011a10: 206f 6620 7468 6520 636f 6e66 6967 7572   of the configur
-00011a20: 6174 696f 6e20 7061 7261 6d65 7465 7220  ation parameter 
-00011a30: 2770 2720 746f 0a20 2020 2020 2020 2020  'p' to.         
-00011a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a50: 2027 7627 2e20 5468 6973 206f 7074 696f   'v'. This optio
-00011a60: 6e20 6d61 7920 6265 2075 7365 6420 6d75  n may be used mu
-00011a70: 6c74 6970 6c65 2074 696d 6573 2e0a 2020  ltiple times..  
-00011a80: 2020 2d70 2053 5441 434b 2c20 2d2d 7374    -p STACK, --st
-00011a90: 6163 6b20 5354 4143 4b0a 2020 2020 2020  ack STACK.      
-00011aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ab0: 2020 2020 5365 7420 7468 6520 7374 6163      Set the stac
-00011ac0: 6b20 706f 696e 7465 722e 0a20 2020 202d  k pointer..    -
-00011ad0: 2d72 616d 204f 5045 5241 5449 4f4e 2020  -ram OPERATION  
-00011ae0: 2020 2020 2050 6572 666f 726d 2061 206c       Perform a l
-00011af0: 6f61 6420 6f70 6572 6174 696f 6e20 6f72  oad operation or
-00011b00: 206f 7468 6572 7769 7365 206d 6f64 6966   otherwise modif
-00011b10: 7920 7468 650a 2020 2020 2020 2020 2020  y the.          
-00011b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b30: 6d65 6d6f 7279 2073 6e61 7073 686f 7420  memory snapshot 
-00011b40: 6265 696e 6720 6275 696c 742e 2044 6f20  being built. Do 
-00011b50: 272d 2d72 616d 2068 656c 7027 2066 6f72  '--ram help' for
-00011b60: 206d 6f72 650a 2020 2020 2020 2020 2020   more.          
-00011b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b80: 696e 666f 726d 6174 696f 6e2e 2054 6869  information. Thi
-00011b90: 7320 6f70 7469 6f6e 206d 6179 2062 6520  s option may be 
-00011ba0: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
-00011bb0: 6d65 732e 0a20 2020 202d 2d72 6567 206e  mes..    --reg n
-00011bc0: 616d 653d 7661 6c75 6520 2020 2020 2053  ame=value      S
-00011bd0: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
-00011be0: 6120 7265 6769 7374 6572 2e20 446f 2027  a register. Do '
-00011bf0: 2d2d 7265 6720 6865 6c70 2720 666f 7220  --reg help' for 
-00011c00: 6d6f 7265 0a20 2020 2020 2020 2020 2020  more.           
-00011c10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00011c20: 6e66 6f72 6d61 7469 6f6e 2e20 5468 6973  nformation. This
-00011c30: 206f 7074 696f 6e20 6d61 7920 6265 2075   option may be u
-00011c40: 7365 6420 6d75 6c74 6970 6c65 2074 696d  sed multiple tim
-00011c50: 6573 2e0a 2020 2020 2d2d 7368 6f77 2d63  es..    --show-c
-00011c60: 6f6e 6669 6720 2020 2020 2020 2020 5368  onfig         Sh
-00011c70: 6f77 2063 6f6e 6669 6775 7261 7469 6f6e  ow configuration
-00011c80: 2070 6172 616d 6574 6572 2076 616c 7565   parameter value
-00011c90: 732e 0a20 2020 202d 7320 5354 4152 542c  s..    -s START,
-00011ca0: 202d 2d73 7461 7274 2053 5441 5254 0a20   --start START. 
-00011cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cc0: 2020 2020 2020 2020 2053 6574 2074 6865           Set the
-00011cd0: 2073 7461 7274 2061 6464 7265 7373 2074   start address t
-00011ce0: 6f20 4a50 2074 6f2e 0a20 2020 202d 2d73  o JP to..    --s
-00011cf0: 7461 7465 206e 616d 653d 7661 6c75 6520  tate name=value 
-00011d00: 2020 2053 6574 2061 2068 6172 6477 6172     Set a hardwar
-00011d10: 6520 7374 6174 6520 6174 7472 6962 7574  e state attribut
-00011d20: 652e 2044 6f20 272d 2d73 7461 7465 2068  e. Do '--state h
-00011d30: 656c 7027 2066 6f72 0a20 2020 2020 2020  elp' for.       
-00011d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d50: 2020 206d 6f72 6520 696e 666f 726d 6174     more informat
-00011d60: 696f 6e2e 2054 6869 7320 6f70 7469 6f6e  ion. This option
-00011d70: 206d 6179 2062 6520 7573 6564 206d 756c   may be used mul
-00011d80: 7469 706c 650a 2020 2020 2020 2020 2020  tiple.          
+0000ed10: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000ed20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ed30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ed40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ed50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ed60: 2b0a 7c20 382e 3420 2020 2020 7c20 4368  +.| 8.4     | Ch
+0000ed70: 616e 6765 6420 7468 6520 6465 6661 756c  anged the defaul
+0000ed80: 7420 7661 6c75 6520 6f66 2074 6865 2060  t value of the `
+0000ed90: 6044 6566 6d53 697a 6560 6020 636f 6e66  `DefmSize`` conf
+0000eda0: 6967 7572 6174 696f 6e20 2020 2020 2020  iguration       
+0000edb0: 7c0a 7c20 2020 2020 2020 2020 7c20 7061  |.|         | pa
+0000edc0: 7261 6d65 7465 7220 6672 6f6d 2036 3620  rameter from 66 
+0000edd0: 746f 2036 3520 2020 2020 2020 2020 2020  to 65           
+0000ede0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000edf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ee00: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000ee10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ee20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ee30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ee40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ee50: 2b0a 7c20 382e 3320 2020 2020 7c20 4164  +.| 8.3     | Ad
+0000ee60: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+0000ee70: 7265 6164 696e 6720 636f 6e74 726f 6c20  reading control 
+0000ee80: 6669 6c65 7320 6672 6f6d 2061 2064 6972  files from a dir
+0000ee90: 6563 746f 7279 2020 2020 2020 2020 2020  ectory          
+0000eea0: 7c0a 7c20 2020 2020 2020 2020 7c20 2860  |.|         | (`
+0000eeb0: 602d 2d63 746c 2044 4952 6060 2920 2020  `--ctl DIR``)   
+0000eec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000eef0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000ef00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000ef40: 2b0a 7c20 382e 3120 2020 2020 7c20 4164  +.| 8.1     | Ad
+0000ef50: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+0000ef60: 6967 6e6f 7269 6e67 2064 6566 6175 6c74  ignoring default
+0000ef70: 2063 6f6e 7472 6f6c 2066 696c 6573 2028   control files (
+0000ef80: 6060 2d2d 6374 6c20 3060 6029 2020 2020  ``--ctl 0``)    
+0000ef90: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000efa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000efb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000efc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000efd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000efe0: 2b0a 7c20 382e 3020 2020 2020 7c20 4164  +.| 8.0     | Ad
+0000eff0: 6465 6420 7468 6520 6060 4465 6677 5369  ded the ``DefwSi
+0000f000: 7a65 6060 2063 6f6e 6669 6775 7261 7469  ze`` configurati
+0000f010: 6f6e 2070 6172 616d 6574 6572 2020 2020  on parameter    
+0000f020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f030: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f050: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f060: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f080: 2b0a 7c20 372e 3120 2020 2020 7c20 4164  +.| 7.1     | Ad
+0000f090: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+0000f0a0: 7265 6164 696e 6720 6d75 6c74 6970 6c65  reading multiple
+0000f0b0: 2064 6566 6175 6c74 2063 6f6e 7472 6f6c   default control
+0000f0c0: 2066 696c 6573 2c20 616e 6420 666f 7220   files, and for 
+0000f0d0: 7c0a 7c20 2020 2020 2020 2020 7c20 7573  |.|         | us
+0000f0e0: 696e 6720 7468 6520 6060 2d2d 6374 6c60  ing the ``--ctl`
+0000f0f0: 6020 6f70 7469 6f6e 206d 756c 7469 706c  ` option multipl
+0000f100: 6520 7469 6d65 733b 2061 6464 6564 2074  e times; added t
+0000f110: 6865 2020 2020 2020 2020 2020 2020 2020  he              
+0000f120: 7c0a 7c20 2020 2020 2020 2020 7c20 6060  |.|         | ``
+0000f130: 436f 6d6d 656e 7457 6964 7468 4d69 6e60  CommentWidthMin`
+0000f140: 602c 2060 6049 6e73 7472 7563 7469 6f6e  `, ``Instruction
+0000f150: 5769 6474 6860 6020 616e 6420 6060 5365  Width`` and ``Se
+0000f160: 6d69 636f 6c6f 6e73 6060 2020 2020 2020  micolons``      
+0000f170: 7c0a 7c20 2020 2020 2020 2020 7c20 636f  |.|         | co
+0000f180: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
+0000f190: 6d65 7465 7273 2020 2020 2020 2020 2020  meters          
+0000f1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f1c0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f1d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f1e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f1f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f210: 2b0a 7c20 372e 3020 2020 2020 7c20 5468  +.| 7.0     | Th
+0000f220: 6520 7368 6f72 7420 6f70 7469 6f6e 2066  e short option f
+0000f230: 6f72 2060 602d 2d6c 6f77 6572 6060 2069  or ``--lower`` i
+0000f240: 7320 6060 2d6c 6060 3b20 7468 6520 6c6f  s ``-l``; the lo
+0000f250: 6e67 206f 7074 696f 6e20 666f 7220 2020  ng option for   
+0000f260: 7c0a 7c20 2020 2020 2020 2020 7c20 6060  |.|         | ``
+0000f270: 2d48 6060 2069 7320 6060 2d2d 6865 7860  -H`` is ``--hex`
+0000f280: 6020 2020 2020 2020 2020 2020 2020 2020  `               
+0000f290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f2b0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f2c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f2f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f300: 2b0a 7c20 362e 3220 2020 2020 7c20 4164  +.| 6.2     | Ad
+0000f310: 6465 6420 7468 6520 6060 2d2d 7368 6f77  ded the ``--show
+0000f320: 2d63 6f6e 6669 6760 6020 6f70 7469 6f6e  -config`` option
+0000f330: 3b20 7468 6520 6060 2d2d 656e 6460 602c  ; the ``--end``,
+0000f340: 2060 602d 2d6f 7267 6060 2061 6e64 2020   ``--org`` and  
+0000f350: 7c0a 7c20 2020 2020 2020 2020 7c20 6060  |.|         | ``
+0000f360: 2d2d 7374 6172 7460 6020 6f70 7469 6f6e  --start`` option
+0000f370: 7320 6163 6365 7074 2061 2068 6578 6164  s accept a hexad
+0000f380: 6563 696d 616c 2069 6e74 6567 6572 2070  ecimal integer p
+0000f390: 7265 6669 7865 6420 6279 2027 3078 2720  refixed by '0x' 
+0000f3a0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f3b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f3c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f3d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f3e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f3f0: 2b0a 7c20 362e 3120 2020 2020 7c20 436f  +.| 6.1     | Co
+0000f400: 6e66 6967 7572 6174 696f 6e20 6973 2072  nfiguration is r
+0000f410: 6561 6420 6672 6f6d 2060 736b 6f6f 6c6b  ead from `skoolk
+0000f420: 6974 2e69 6e69 6020 6966 2070 7265 7365  it.ini` if prese
+0000f430: 6e74 3b20 6164 6465 6420 7468 6520 2020  nt; added the   
+0000f440: 7c0a 7c20 2020 2020 2020 2020 7c20 6060  |.|         | ``
+0000f450: 2d2d 696e 6960 6020 6f70 7469 6f6e 2020  --ini`` option  
+0000f460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f490: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f4a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f4b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f4c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f4d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f4e0: 2b0a 7c20 342e 3420 2020 2020 7c20 4164  +.| 4.4     | Ad
+0000f4f0: 6465 6420 7468 6520 6060 2d2d 656e 6460  ded the ``--end`
+0000f500: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
+0000f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f530: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f580: 2b0a 7c20 342e 3320 2020 2020 7c20 4164  +.| 4.3     | Ad
+0000f590: 6465 6420 7468 6520 6060 2d2d 6c69 6e65  ded the ``--line
+0000f5a0: 2d77 6964 7468 6060 206f 7074 696f 6e20  -width`` option 
+0000f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f5d0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f5e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f5f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f620: 2b0a 7c20 332e 3420 2020 2020 7c20 4164  +.| 3.4     | Ad
+0000f630: 6465 6420 7468 6520 6060 2d56 6060 206f  ded the ``-V`` o
+0000f640: 7074 696f 6e20 616e 6420 7468 6520 6c6f  ption and the lo
+0000f650: 6e67 206f 7074 696f 6e73 2c20 616e 6420  ng options, and 
+0000f660: 7468 6520 6162 696c 6974 7920 746f 2020  the ability to  
+0000f670: 7c0a 7c20 2020 2020 2020 2020 7c20 6164  |.|         | ad
+0000f680: 6420 6120 636f 6d6d 656e 7420 6c69 7374  d a comment list
+0000f690: 696e 6720 7265 6665 7272 6572 7320 6174  ing referrers at
+0000f6a0: 2065 7665 7279 2072 6f75 7469 6e65 2065   every routine e
+0000f6b0: 6e74 7279 2070 6f69 6e74 2020 2020 2020  ntry point      
+0000f6c0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f6d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f6f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f710: 2b0a 7c20 332e 3320 2020 2020 7c20 4164  +.| 3.3     | Ad
+0000f720: 6465 6420 7468 6520 6162 696c 6974 7920  ded the ability 
+0000f730: 746f 2072 6561 6420 3132 384b 2053 4e41  to read 128K SNA
+0000f740: 2073 6e61 7073 686f 7473 2020 2020 2020   snapshots      
+0000f750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f760: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f7a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f7b0: 2b0a 7c20 332e 3220 2020 2020 7c20 4164  +.| 3.2     | Ad
+0000f7c0: 6465 6420 7468 6520 6060 2d70 6060 206f  ded the ``-p`` o
+0000f7d0: 7074 696f 6e2c 2061 6e64 2074 6865 2061  ption, and the a
+0000f7e0: 6269 6c69 7479 2074 6f20 7265 6164 2053  bility to read S
+0000f7f0: 5a58 2073 6e61 7073 686f 7473 2020 2020  ZX snapshots    
+0000f800: 7c0a 7c20 2020 2020 2020 2020 7c20 616e  |.|         | an
+0000f810: 6420 3132 384b 205a 3830 2073 6e61 7073  d 128K Z80 snaps
+0000f820: 686f 7473 2020 2020 2020 2020 2020 2020  hots            
+0000f830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f850: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f8a0: 2b0a 7c20 322e 312e 3220 2020 7c20 4164  +.| 2.1.2   | Ad
+0000f8b0: 6465 6420 7468 6520 6162 696c 6974 7920  ded the ability 
+0000f8c0: 746f 2077 7269 7465 2074 6865 2064 6973  to write the dis
+0000f8d0: 6173 7365 6d62 6c79 2069 6e20 6c6f 7765  assembly in lowe
+0000f8e0: 7220 6361 7365 2020 2020 2020 2020 2020  r case          
+0000f8f0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f940: 2b0a 7c20 322e 3120 2020 2020 7c20 4164  +.| 2.1     | Ad
+0000f950: 6465 6420 7468 6520 6060 2d48 6060 206f  ded the ``-H`` o
+0000f960: 7074 696f 6e20 2020 2020 2020 2020 2020  ption           
+0000f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f990: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000f9a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f9b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f9c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f9d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000f9e0: 2b0a 7c20 322e 302e 3120 2020 7c20 4164  +.| 2.0.1   | Ad
+0000f9f0: 6465 6420 7468 6520 6060 2d6f 6060 206f  ded the ``-o`` o
+0000fa00: 7074 696f 6e2c 2061 6e64 2074 6865 2061  ption, and the a
+0000fa10: 6269 6c69 7479 2074 6f20 7265 6164 2062  bility to read b
+0000fa20: 696e 6172 7920 6669 6c65 732c 2074 6f20  inary files, to 
+0000fa30: 7c0a 7c20 2020 2020 2020 2020 7c20 7365  |.|         | se
+0000fa40: 7420 7468 6520 6d61 7869 6d75 6d20 6e75  t the maximum nu
+0000fa50: 6d62 6572 206f 6620 6368 6172 6163 7465  mber of characte
+0000fa60: 7273 2069 6e20 6120 4445 464d 2073 7461  rs in a DEFM sta
+0000fa70: 7465 6d65 6e74 2c20 616e 6420 746f 2020  tement, and to  
+0000fa80: 7c0a 7c20 2020 2020 2020 2020 7c20 7375  |.|         | su
+0000fa90: 7070 7265 7373 2063 6f6d 6d65 6e74 7320  ppress comments 
+0000faa0: 7468 6174 206c 6973 7420 726f 7574 696e  that list routin
+0000fab0: 6520 656e 7472 7920 706f 696e 7420 7265  e entry point re
+0000fac0: 6665 7272 6572 7320 2020 2020 2020 2020  ferrers         
+0000fad0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000fae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000faf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fb00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fb10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fb20: 2b0a 7c20 322e 3020 2020 2020 7c20 4164  +.| 2.0     | Ad
+0000fb30: 6465 6420 7468 6520 6162 696c 6974 7920  ded the ability 
+0000fb40: 746f 2073 6574 2074 6865 206d 6178 696d  to set the maxim
+0000fb50: 756d 206e 756d 6265 7220 6f66 2062 7974  um number of byt
+0000fb60: 6573 2069 6e20 6120 4445 4642 2020 2020  es in a DEFB    
+0000fb70: 7c0a 7c20 2020 2020 2020 2020 7c20 7374  |.|         | st
+0000fb80: 6174 656d 656e 7420 2020 2020 2020 2020  atement         
+0000fb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fbc0: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000fbd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fbe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fbf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc10: 2b0a 7c20 312e 302e 3520 2020 7c20 4164  +.| 1.0.5   | Ad
+0000fc20: 6465 6420 7468 6520 6162 696c 6974 7920  ded the ability 
+0000fc30: 746f 2073 686f 7720 4153 4349 4920 7465  to show ASCII te
+0000fc40: 7874 2069 6e20 636f 6d6d 656e 7420 6669  xt in comment fi
+0000fc50: 656c 6473 2020 2020 2020 2020 2020 2020  elds            
+0000fc60: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000fc70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fc90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fcb0: 2b0a 7c20 312e 302e 3420 2020 7c20 4164  +.| 1.0.4   | Ad
+0000fcc0: 6465 6420 7468 6520 6060 2d73 6060 206f  ded the ``-s`` o
+0000fcd0: 7074 696f 6e20 2020 2020 2020 2020 2020  ption           
+0000fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fd00: 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d  |.+---------+---
+0000fd10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fd20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fd30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fd40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0000fd50: 2b0a 0a2e 2e20 5f73 6e61 7069 6e66 6f2e  +.... _snapinfo.
+0000fd60: 7079 3a0a 0a73 6e61 7069 6e66 6f2e 7079  py:..snapinfo.py
+0000fd70: 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 736e  .-----------.`sn
+0000fd80: 6170 696e 666f 2e70 7960 2073 686f 7773  apinfo.py` shows
+0000fd90: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
+0000fda0: 7468 6520 7265 6769 7374 6572 7320 6f72  the registers or
+0000fdb0: 2052 414d 2069 6e20 6120 6269 6e61 7279   RAM in a binary
+0000fdc0: 2028 7261 770a 6d65 6d6f 7279 2920 6669   (raw.memory) fi
+0000fdd0: 6c65 206f 7220 6120 534e 412c 2053 5a58  le or a SNA, SZX
+0000fde0: 206f 7220 5a38 3020 736e 6170 7368 6f74   or Z80 snapshot
+0000fdf0: 2e20 466f 7220 6578 616d 706c 653a 3a0a  . For example::.
+0000fe00: 0a20 2024 2073 6e61 7069 6e66 6f2e 7079  .  $ snapinfo.py
+0000fe10: 2067 616d 652e 7a38 300a 0a54 6f20 6c69   game.z80..To li
+0000fe20: 7374 2074 6865 206f 7074 696f 6e73 2073  st the options s
+0000fe30: 7570 706f 7274 6564 2062 7920 6073 6e61  upported by `sna
+0000fe40: 7069 6e66 6f2e 7079 602c 2072 756e 2069  pinfo.py`, run i
+0000fe50: 7420 7769 7468 206e 6f20 6172 6775 6d65  t with no argume
+0000fe60: 6e74 733a 3a0a 0a20 2075 7361 6765 3a20  nts::..  usage: 
+0000fe70: 736e 6170 696e 666f 2e70 7920 5b6f 7074  snapinfo.py [opt
+0000fe80: 696f 6e73 5d20 6669 6c65 0a0a 2020 416e  ions] file..  An
+0000fe90: 616c 7973 6520 6120 6269 6e61 7279 2028  alyse a binary (
+0000fea0: 7261 7720 6d65 6d6f 7279 2920 6669 6c65  raw memory) file
+0000feb0: 206f 7220 6120 534e 412c 2053 5a58 206f   or a SNA, SZX o
+0000fec0: 7220 5a38 3020 736e 6170 7368 6f74 2e0a  r Z80 snapshot..
+0000fed0: 0a20 204f 7074 696f 6e73 3a0a 2020 2020  .  Options:.    
+0000fee0: 2d62 2c20 2d2d 6261 7369 6320 2020 2020  -b, --basic     
+0000fef0: 2020 2020 2020 4c69 7374 2074 6865 2042        List the B
+0000ff00: 4153 4943 2070 726f 6772 616d 2e0a 2020  ASIC program..  
+0000ff10: 2020 2d63 2050 4154 482c 202d 2d63 746c    -c PATH, --ctl
+0000ff20: 2050 4154 4820 2020 5768 656e 2067 656e   PATH   When gen
+0000ff30: 6572 6174 696e 6720 6120 6361 6c6c 2067  erating a call g
+0000ff40: 7261 7068 2c20 7370 6563 6966 7920 6120  raph, specify a 
+0000ff50: 636f 6e74 726f 6c20 6669 6c65 0a20 2020  control file.   
+0000ff60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ff70: 2020 2020 2020 2074 6f20 7573 652c 206f         to use, o
+0000ff80: 7220 6120 6469 7265 6374 6f72 7920 6672  r a directory fr
+0000ff90: 6f6d 2077 6869 6368 2074 6f20 7265 6164  om which to read
+0000ffa0: 2063 6f6e 7472 6f6c 0a20 2020 2020 2020   control.       
+0000ffb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ffc0: 2020 2066 696c 6573 2e20 5041 5448 206d     files. PATH m
+0000ffd0: 6179 2062 6520 272d 2720 666f 7220 7374  ay be '-' for st
+0000ffe0: 616e 6461 7264 2069 6e70 7574 2e20 5468  andard input. Th
+0000fff0: 6973 206f 7074 696f 6e0a 2020 2020 2020  is option.      
+00010000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010010: 2020 2020 6d61 7920 6265 2075 7365 6420      may be used 
+00010020: 6d75 6c74 6970 6c65 2074 696d 6573 2e0a  multiple times..
+00010030: 2020 2020 2d66 2041 5b2c 422e 2e2e 5b2d      -f A[,B...[-
+00010040: 4d5b 2d4e 5d5d 5d2c 202d 2d66 696e 6420  M[-N]]], --find 
+00010050: 415b 2c42 2e2e 2e5b 2d4d 5b2d 4e5d 5d5d  A[,B...[-M[-N]]]
+00010060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010070: 2020 2020 2020 2020 2020 2053 6561 7263             Searc
+00010080: 6820 666f 7220 7468 6520 6279 7465 2073  h for the byte s
+00010090: 6571 7565 6e63 6520 412c 422e 2e2e 2077  equence A,B... w
+000100a0: 6974 6820 6469 7374 616e 6365 0a20 2020  ith distance.   
+000100b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000100c0: 2020 2020 2020 2072 616e 6769 6e67 2066         ranging f
+000100d0: 726f 6d20 4d20 746f 204e 2028 6465 6661  rom M to N (defa
+000100e0: 756c 743d 3129 2062 6574 7765 656e 2062  ult=1) between b
+000100f0: 7974 6573 2e0a 2020 2020 2d67 2c20 2d2d  ytes..    -g, --
+00010100: 6361 6c6c 2d67 7261 7068 2020 2020 2020  call-graph      
+00010110: 4765 6e65 7261 7465 2061 2063 616c 6c20  Generate a call 
+00010120: 6772 6170 6820 696e 2044 4f54 2066 6f72  graph in DOT for
+00010130: 6d61 742e 0a20 2020 202d 4920 703d 762c  mat..    -I p=v,
+00010140: 202d 2d69 6e69 2070 3d76 2020 2020 2053   --ini p=v     S
+00010150: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
+00010160: 7468 6520 636f 6e66 6967 7572 6174 696f  the configuratio
+00010170: 6e20 7061 7261 6d65 7465 7220 2770 2720  n parameter 'p' 
+00010180: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
+00010190: 2020 2020 2020 2020 2020 2020 2027 7627               'v'
+000101a0: 2e20 5468 6973 206f 7074 696f 6e20 6d61  . This option ma
+000101b0: 7920 6265 2075 7365 6420 6d75 6c74 6970  y be used multip
+000101c0: 6c65 2074 696d 6573 2e0a 2020 2020 2d6f  le times..    -o
+000101d0: 2041 4444 522c 202d 2d6f 7267 2041 4444   ADDR, --org ADD
+000101e0: 5220 2020 5370 6563 6966 7920 7468 6520  R   Specify the 
+000101f0: 6f72 6967 696e 2061 6464 7265 7373 206f  origin address o
+00010200: 6620 6120 6269 6e61 7279 2028 7261 7720  f a binary (raw 
+00010210: 6d65 6d6f 7279 290a 2020 2020 2020 2020  memory).        
+00010220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010230: 2020 6669 6c65 2028 6465 6661 756c 743a    file (default:
+00010240: 2036 3535 3336 202d 206c 656e 6774 6829   65536 - length)
+00010250: 2e0a 2020 2020 2d70 2041 5b2d 425b 2d43  ..    -p A[-B[-C
+00010260: 5d5d 2c20 2d2d 7065 656b 2041 5b2d 425b  ]], --peek A[-B[
+00010270: 2d43 5d5d 0a20 2020 2020 2020 2020 2020  -C]].           
+00010280: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+00010290: 686f 7720 7468 6520 636f 6e74 656e 7473  how the contents
+000102a0: 206f 6620 6164 6472 6573 7365 7320 4120   of addresses A 
+000102b0: 544f 2042 2053 5445 5020 432e 2054 6869  TO B STEP C. Thi
+000102c0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000102d0: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
+000102e0: 6f6e 206d 6179 2062 6520 7573 6564 206d  on may be used m
+000102f0: 756c 7469 706c 6520 7469 6d65 732e 0a20  ultiple times.. 
+00010300: 2020 202d 5020 5041 4745 2c20 2d2d 7061     -P PAGE, --pa
+00010310: 6765 2050 4147 4520 2053 7065 6369 6679  ge PAGE  Specify
+00010320: 2074 6865 2070 6167 6520 2830 2d37 2920   the page (0-7) 
+00010330: 6f66 2061 2031 3238 4b20 736e 6170 7368  of a 128K snapsh
+00010340: 6f74 2074 6f20 6d61 7020 746f 0a20 2020  ot to map to.   
+00010350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010360: 2020 2020 2020 2034 3931 3532 2d36 3535         49152-655
+00010370: 3335 2e0a 2020 2020 2d2d 7368 6f77 2d63  35..    --show-c
+00010380: 6f6e 6669 6720 2020 2020 2020 2020 5368  onfig         Sh
+00010390: 6f77 2063 6f6e 6669 6775 7261 7469 6f6e  ow configuration
+000103a0: 2070 6172 616d 6574 6572 2076 616c 7565   parameter value
+000103b0: 732e 0a20 2020 202d 7420 5445 5854 2c20  s..    -t TEXT, 
+000103c0: 2d2d 6669 6e64 2d74 6578 7420 5445 5854  --find-text TEXT
+000103d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000103e0: 2020 2020 2020 2020 2020 2053 6561 7263             Searc
+000103f0: 6820 666f 7220 6120 7465 7874 2073 7472  h for a text str
+00010400: 696e 672e 0a20 2020 202d 5420 582c 595b  ing..    -T X,Y[
+00010410: 2d4d 5b2d 4e5d 5d2c 202d 2d66 696e 642d  -M[-N]], --find-
+00010420: 7469 6c65 2058 2c59 5b2d 4d5b 2d4e 5d5d  tile X,Y[-M[-N]]
+00010430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010440: 2020 2020 2020 2020 2020 2053 6561 7263             Searc
+00010450: 6820 666f 7220 7468 6520 6772 6170 6869  h for the graphi
+00010460: 6320 6461 7461 206f 6620 7468 6520 7469  c data of the ti
+00010470: 6c65 2061 7420 2858 2c59 2920 7769 7468  le at (X,Y) with
+00010480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010490: 2020 2020 2020 2020 2020 2064 6973 7461             dista
+000104a0: 6e63 6520 7261 6e67 696e 6720 6672 6f6d  nce ranging from
+000104b0: 204d 2074 6f20 4e20 2864 6566 6175 6c74   M to N (default
+000104c0: 3d31 2920 6265 7477 6565 6e0a 2020 2020  =1) between.    
+000104d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104e0: 2020 2020 2020 6279 7465 732e 0a20 2020        bytes..   
+000104f0: 202d 762c 202d 2d76 6172 6961 626c 6573   -v, --variables
+00010500: 2020 2020 2020 204c 6973 7420 7661 7269         List vari
+00010510: 6162 6c65 732e 0a20 2020 202d 562c 202d  ables..    -V, -
+00010520: 2d76 6572 7369 6f6e 2020 2020 2020 2020  -version        
+00010530: 2053 686f 7720 536b 6f6f 6c4b 6974 2076   Show SkoolKit v
+00010540: 6572 7369 6f6e 206e 756d 6265 7220 616e  ersion number an
+00010550: 6420 6578 6974 2e0a 2020 2020 2d77 2041  d exit..    -w A
+00010560: 5b2d 425b 2d43 5d5d 2c20 2d2d 776f 7264  [-B[-C]], --word
+00010570: 2041 5b2d 425b 2d43 5d5d 0a20 2020 2020   A[-B[-C]].     
+00010580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010590: 2020 2020 2053 686f 7720 7468 6520 776f       Show the wo
+000105a0: 7264 7320 6174 2061 6464 7265 7373 6573  rds at addresses
+000105b0: 2041 2054 4f20 4220 5354 4550 2043 2e20   A TO B STEP C. 
+000105c0: 5468 6973 206f 7074 696f 6e0a 2020 2020  This option.    
+000105d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000105e0: 2020 2020 2020 6d61 7920 6265 2075 7365        may be use
+000105f0: 6420 6d75 6c74 6970 6c65 2074 696d 6573  d multiple times
+00010600: 2e0a 0a57 6974 6820 6e6f 206f 7074 696f  ...With no optio
+00010610: 6e73 2c20 6073 6e61 7069 6e66 6f2e 7079  ns, `snapinfo.py
+00010620: 6020 6469 7370 6c61 7973 2072 6567 6973  ` displays regis
+00010630: 7465 7220 7661 6c75 6573 2c20 7468 6520  ter values, the 
+00010640: 696e 7465 7272 7570 7420 6d6f 6465 2c0a  interrupt mode,.
+00010650: 7468 6520 626f 7264 6572 2063 6f6c 6f75  the border colou
+00010660: 722c 2061 6e64 2076 6172 696f 7573 206f  r, and various o
+00010670: 7468 6572 2061 7474 7269 6275 7465 732e  ther attributes.
+00010680: 2042 7920 7573 696e 6720 6f6e 6520 6f66   By using one of
+00010690: 2074 6865 206f 7074 696f 6e73 0a73 686f   the options.sho
+000106a0: 776e 2061 626f 7665 2c20 6974 2063 616e  wn above, it can
+000106b0: 206c 6973 7420 7468 6520 4241 5349 4320   list the BASIC 
+000106c0: 7072 6f67 7261 6d20 616e 6420 7661 7269  program and vari
+000106d0: 6162 6c65 7320 2869 6620 7072 6573 656e  ables (if presen
+000106e0: 7429 2c20 7368 6f77 2074 6865 0a63 6f6e  t), show the.con
+000106f0: 7465 6e74 7320 6f66 2061 2072 616e 6765  tents of a range
+00010700: 206f 6620 6164 6472 6573 7365 732c 2073   of addresses, s
+00010710: 6561 7263 6820 7468 6520 5241 4d20 666f  earch the RAM fo
+00010720: 7220 6120 7365 7175 656e 6365 206f 6620  r a sequence of 
+00010730: 6279 7465 2076 616c 7565 730a 6f72 2061  byte values.or a
+00010740: 2074 6578 7420 7374 7269 6e67 2c20 6f72   text string, or
+00010750: 2067 656e 6572 6174 6520 6120 6361 6c6c   generate a call
+00010760: 2067 7261 7068 2e0a 0a2e 2e20 5f73 6e61   graph..... _sna
+00010770: 7069 6e66 6f2d 6361 6c6c 2d67 7261 7068  pinfo-call-graph
+00010780: 3a0a 0a43 616c 6c20 6772 6170 6873 0a5e  :..Call graphs.^
+00010790: 5e5e 5e5e 5e5e 5e5e 5e5e 0a60 736e 6170  ^^^^^^^^^^.`snap
+000107a0: 696e 666f 2e70 7960 2063 616e 2067 656e  info.py` can gen
+000107b0: 6572 6174 6520 6120 6361 6c6c 2067 7261  erate a call gra
+000107c0: 7068 2069 6e20 6044 4f54 2066 6f72 6d61  ph in `DOT forma
+000107d0: 7460 5f20 6672 6f6d 2061 2073 6e61 7073  t`_ from a snaps
+000107e0: 686f 7420 616e 6420 610a 636f 7272 6573  hot and a.corres
+000107f0: 706f 6e64 696e 6720 636f 6e74 726f 6c20  ponding control 
+00010800: 6669 6c65 2e20 466f 7220 6578 616d 706c  file. For exampl
+00010810: 652c 2069 6620 6067 616d 652e 6374 6c60  e, if `game.ctl`
+00010820: 2069 7320 7072 6573 656e 7420 616c 6f6e   is present alon
+00010830: 6773 6964 650a 6067 616d 652e 7a38 3060  gside.`game.z80`
+00010840: 2c20 7468 656e 3a3a 0a0a 2020 2420 736e  , then::..  $ sn
+00010850: 6170 696e 666f 2e70 7920 2d67 2067 616d  apinfo.py -g gam
+00010860: 652e 7a38 3020 3e20 6761 6d65 2e64 6f74  e.z80 > game.dot
+00010870: 0a0a 7769 6c6c 2070 726f 6475 6365 2061  ..will produce a
+00010880: 2063 616c 6c20 6772 6170 6820 696e 2060   call graph in `
+00010890: 6761 6d65 2e64 6f74 602c 2077 6974 6820  game.dot`, with 
+000108a0: 6120 6e6f 6465 2066 6f72 2065 6163 6820  a node for each 
+000108b0: 726f 7574 696e 6520 6465 636c 6172 6564  routine declared
+000108c0: 0a69 6e20 6067 616d 652e 6374 6c60 2c20  .in `game.ctl`, 
+000108d0: 616e 6420 616e 2065 6467 6520 6265 7477  and an edge betw
+000108e0: 6565 6e20 7477 6f20 6e6f 6465 7320 7768  een two nodes wh
+000108f0: 656e 6576 6572 2074 6865 2072 6f75 7469  enever the routi
+00010900: 6e65 2072 6570 7265 7365 6e74 6564 0a62  ne represented.b
+00010910: 7920 7468 6520 6669 7273 7420 6e6f 6465  y the first node
+00010920: 2063 616c 6c73 2c20 6a75 6d70 7320 746f   calls, jumps to
+00010930: 2c20 6f72 2063 6f6e 7469 6e75 6573 2069  , or continues i
+00010940: 6e74 6f20 7468 6520 726f 7574 696e 6520  nto the routine 
+00010950: 7265 7072 6573 656e 7465 6420 6279 0a74  represented by.t
+00010960: 6865 2073 6563 6f6e 6420 6e6f 6465 2e0a  he second node..
+00010970: 0a54 6f20 6372 6561 7465 2061 2050 4e47  .To create a PNG
+00010980: 2069 6d61 6765 2066 696c 6520 6e61 6d65   image file name
+00010990: 6420 6067 616d 652e 706e 6760 2066 726f  d `game.png` fro
+000109a0: 6d20 6067 616d 652e 646f 7460 2c20 7468  m `game.dot`, th
+000109b0: 6520 6064 6f74 6020 7574 696c 6974 790a  e `dot` utility.
+000109c0: 2869 6e63 6c75 6465 6420 696e 2047 7261  (included in Gra
+000109d0: 7068 7669 7a5f 2920 6d61 7920 6265 2075  phviz_) may be u
+000109e0: 7365 643a 3a0a 0a20 2024 2064 6f74 202d  sed::..  $ dot -
+000109f0: 5470 6e67 2067 616d 652e 646f 7420 3e20  Tpng game.dot > 
+00010a00: 6761 6d65 2e70 6e67 0a0a 4120 6361 6c6c  game.png..A call
+00010a10: 2067 7261 7068 206d 6179 2063 6f6e 7461   graph may conta
+00010a20: 696e 206f 6e65 206f 7220 6d6f 7265 2027  in one or more '
+00010a30: 6f72 7068 616e 7327 2c20 616e 206f 7270  orphans', an orp
+00010a40: 6861 6e20 6265 696e 6720 6120 6e6f 6465  han being a node
+00010a50: 2074 6861 7420 6973 0a6e 6f74 2061 7420   that is.not at 
+00010a60: 7468 6520 6865 6164 206f 6620 616e 7920  the head of any 
+00010a70: 6172 726f 772c 2061 6e64 2074 6875 7320  arrow, and thus 
+00010a80: 7265 7072 6573 656e 7473 2061 2072 6f75  represents a rou
+00010a90: 7469 6e65 2074 6861 7420 6973 2028 6173  tine that is (as
+00010aa0: 2066 6172 2061 730a 6073 6e61 7069 6e66   far as.`snapinf
+00010ab0: 6f2e 7079 6020 6361 6e20 7465 6c6c 2920  o.py` can tell) 
+00010ac0: 6e6f 7420 7573 6564 2062 7920 616e 7920  not used by any 
+00010ad0: 6f74 6865 7220 726f 7574 696e 6573 2e20  other routines. 
+00010ae0: 546f 2064 6563 6c61 7265 2074 6865 2063  To declare the c
+00010af0: 616c 6c65 7273 0a6f 6620 7375 6368 2061  allers.of such a
+00010b00: 2072 6f75 7469 6e65 2028 696e 2063 6173   routine (in cas
+00010b10: 6520 6974 2069 7320 6e6f 7420 6120 7472  e it is not a tr
+00010b20: 7565 206f 7270 6861 6e29 2c20 7468 6520  ue orphan), the 
+00010b30: 3a72 6566 3a60 7265 6673 6020 6469 7265  :ref:`refs` dire
+00010b40: 6374 6976 650a 6d61 7920 6265 2075 7365  ctive.may be use
+00010b50: 642e 0a0a 546f 2068 656c 7020 6964 656e  d...To help iden
+00010b60: 7469 6679 206f 7270 6861 6e20 6e6f 6465  tify orphan node
+00010b70: 7320 616e 6420 6d69 7373 696e 6720 6564  s and missing ed
+00010b80: 6765 732c 2065 6163 6820 6f66 2074 6865  ges, each of the
+00010b90: 2066 6972 7374 2074 6872 6565 206c 696e   first three lin
+00010ba0: 6573 0a6f 6620 7468 6520 444f 5420 6669  es.of the DOT fi
+00010bb0: 6c65 2070 726f 6475 6365 6420 6279 2060  le produced by `
+00010bc0: 736e 6170 696e 666f 2e70 7960 2063 6f6e  snapinfo.py` con
+00010bd0: 7461 696e 7320 6120 6c69 7374 206f 6620  tains a list of 
+00010be0: 4944 7320 6f66 2074 6865 0a66 6f6c 6c6f  IDs of the.follo
+00010bf0: 7769 6e67 2074 7970 6573 206f 6620 6e6f  wing types of no
+00010c00: 6465 3a0a 0a2a 2075 6e63 6f6e 6e65 6374  de:..* unconnect
+00010c10: 6564 206e 6f64 6573 0a2a 206f 7270 6861  ed nodes.* orpha
+00010c20: 6e20 6e6f 6465 7320 636f 6e6e 6563 7465  n nodes connecte
+00010c30: 6420 746f 206f 7468 6572 206e 6f64 6573  d to other nodes
+00010c40: 0a2a 206e 6f6e 2d6f 7270 6861 6e20 6e6f  .* non-orphan no
+00010c50: 6465 7320 7768 6f73 6520 6669 7273 7420  des whose first 
+00010c60: 696e 7374 7275 6374 696f 6e20 6973 206e  instruction is n
+00010c70: 6f74 2075 7365 640a 0a54 6865 2061 7070  ot used..The app
+00010c80: 6561 7261 6e63 6520 6f66 206e 6f64 6573  earance of nodes
+00010c90: 2061 6e64 2065 6467 6573 2069 6e20 6120   and edges in a 
+00010ca0: 6361 6c6c 2067 7261 7068 2069 6d61 6765  call graph image
+00010cb0: 2063 616e 2062 6520 636f 6e66 6967 7572   can be configur
+00010cc0: 6564 2076 6961 0a74 6865 2060 6045 6467  ed via.the ``Edg
+00010cd0: 6541 7474 7269 6275 7465 7360 602c 2060  eAttributes``, `
+00010ce0: 6047 7261 7068 4174 7472 6962 7574 6573  `GraphAttributes
+00010cf0: 6060 2c20 6060 4e6f 6465 4174 7472 6962  ``, ``NodeAttrib
+00010d00: 7574 6573 6060 2061 6e64 0a60 604e 6f64  utes`` and.``Nod
+00010d10: 654c 6162 656c 6060 2063 6f6e 6669 6775  eLabel`` configu
+00010d20: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+00010d30: 7320 2873 6565 2062 656c 6f77 292e 0a0a  s (see below)...
+00010d40: 2e2e 205f 736e 6170 696e 666f 2d63 6f6e  .. _snapinfo-con
+00010d50: 663a 0a0a 436f 6e66 6967 7572 6174 696f  f:..Configuratio
+00010d60: 6e0a 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a  n.^^^^^^^^^^^^^.
+00010d70: 6073 6e61 7069 6e66 6f2e 7079 6020 7769  `snapinfo.py` wi
+00010d80: 6c6c 2072 6561 6420 636f 6e66 6967 7572  ll read configur
+00010d90: 6174 696f 6e20 6672 6f6d 2061 2066 696c  ation from a fil
+00010da0: 6520 6e61 6d65 6420 6073 6b6f 6f6c 6b69  e named `skoolki
+00010db0: 742e 696e 6960 2069 6e20 7468 650a 6375  t.ini` in the.cu
+00010dc0: 7272 656e 7420 776f 726b 696e 6720 6469  rrent working di
+00010dd0: 7265 6374 6f72 7920 6f72 2069 6e20 607e  rectory or in `~
+00010de0: 2f2e 736b 6f6f 6c6b 6974 602c 2069 6620  /.skoolkit`, if 
+00010df0: 7072 6573 656e 742e 2054 6865 2072 6563  present. The rec
+00010e00: 6f67 6e69 7365 640a 636f 6e66 6967 7572  ognised.configur
+00010e10: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
+00010e20: 2061 7265 3a0a 0a2a 2060 6045 6467 6541   are:..* ``EdgeA
+00010e30: 7474 7269 6275 7465 7360 6020 2d20 7468  ttributes`` - th
+00010e40: 6520 6465 6661 756c 7420 6174 7472 6962  e default attrib
+00010e50: 7574 6573 5f20 666f 7220 6564 6765 7320  utes_ for edges 
+00010e60: 696e 2061 2063 616c 6c20 6772 6170 680a  in a call graph.
+00010e70: 2020 2864 6566 6175 6c74 3a20 6e6f 6e65    (default: none
+00010e80: 290a 2a20 6060 4772 6170 6841 7474 7269  ).* ``GraphAttri
+00010e90: 6275 7465 7360 6020 2d20 7468 6520 6465  butes`` - the de
+00010ea0: 6661 756c 7420 6174 7472 6962 7574 6573  fault attributes
+00010eb0: 5f20 666f 7220 6120 6361 6c6c 2067 7261  _ for a call gra
+00010ec0: 7068 2028 6465 6661 756c 743a 0a20 206e  ph (default:.  n
+00010ed0: 6f6e 6529 0a2a 2060 604e 6f64 6541 7474  one).* ``NodeAtt
+00010ee0: 7269 6275 7465 7360 6020 2d20 7468 6520  ributes`` - the 
+00010ef0: 6465 6661 756c 7420 6174 7472 6962 7574  default attribut
+00010f00: 6573 5f20 666f 7220 6e6f 6465 7320 696e  es_ for nodes in
+00010f10: 2061 2063 616c 6c20 6772 6170 680a 2020   a call graph.  
+00010f20: 2864 6566 6175 6c74 3a20 6060 7368 6170  (default: ``shap
+00010f30: 653d 7265 636f 7264 6060 290a 2a20 6060  e=record``).* ``
+00010f40: 4e6f 6465 4964 6060 202d 2074 6865 2066  NodeId`` - the f
+00010f50: 6f72 6d61 7420 6f66 2074 6865 206e 6f64  ormat of the nod
+00010f60: 6520 4944 7320 696e 2061 2063 616c 6c20  e IDs in a call 
+00010f70: 6772 6170 6820 2864 6566 6175 6c74 3a0a  graph (default:.
+00010f80: 2020 6060 7b61 6464 7265 7373 7d60 6029    ``{address}``)
+00010f90: 0a2a 2060 604e 6f64 654c 6162 656c 6060  .* ``NodeLabel``
+00010fa0: 202d 2074 6865 2066 6f72 6d61 7420 6f66   - the format of
+00010fb0: 2074 6865 206e 6f64 6520 6c61 6265 6c73   the node labels
+00010fc0: 2069 6e20 6120 6361 6c6c 2067 7261 7068   in a call graph
+00010fd0: 2028 6465 6661 756c 743a 0a20 2060 6022   (default:.  ``"
+00010fe0: 7b61 6464 7265 7373 7d20 7b61 6464 7265  {address} {addre
+00010ff0: 7373 3a30 3458 7d5c 6e7b 6c61 6265 6c7d  ss:04X}\n{label}
+00011000: 2260 6029 0a2a 2060 6050 6565 6b60 6020  "``).* ``Peek`` 
+00011010: 2d20 7468 6520 666f 726d 6174 206f 6620  - the format of 
+00011020: 6561 6368 206c 696e 6520 6f66 2074 6865  each line of the
+00011030: 206f 7574 7075 7420 7072 6f64 7563 6564   output produced
+00011040: 2062 7920 7468 6520 6060 2d2d 7065 656b   by the ``--peek
+00011050: 6060 0a20 206f 7074 696f 6e20 2864 6566  ``.  option (def
+00011060: 6175 6c74 3a0a 2020 6060 7b61 6464 7265  ault:.  ``{addre
+00011070: 7373 3a3e 357d 207b 6164 6472 6573 733a  ss:>5} {address:
+00011080: 3034 587d 3a20 7b76 616c 7565 3a3e 337d  04X}: {value:>3}
+00011090: 2020 7b76 616c 7565 3a30 3258 7d20 207b    {value:02X}  {
+000110a0: 7661 6c75 653a 3038 627d 2020 7b63 6861  value:08b}  {cha
+000110b0: 727d 6060 290a 2a20 6060 576f 7264 6060  r}``).* ``Word``
+000110c0: 202d 2074 6865 2066 6f72 6d61 7420 6f66   - the format of
+000110d0: 2065 6163 6820 6c69 6e65 206f 6620 7468   each line of th
+000110e0: 6520 6f75 7470 7574 2070 726f 6475 6365  e output produce
+000110f0: 6420 6279 2074 6865 2060 602d 2d77 6f72  d by the ``--wor
+00011100: 6460 600a 2020 6f70 7469 6f6e 2028 6465  d``.  option (de
+00011110: 6661 756c 743a 2060 607b 6164 6472 6573  fault: ``{addres
+00011120: 733a 3e35 7d20 7b61 6464 7265 7373 3a30  s:>5} {address:0
+00011130: 3458 7d3a 207b 7661 6c75 653a 3e35 7d20  4X}: {value:>5} 
+00011140: 207b 7661 6c75 653a 3034 587d 6060 290a   {value:04X}``).
+00011150: 0a60 604e 6f64 6549 6460 6020 616e 6420  .``NodeId`` and 
+00011160: 6060 4e6f 6465 4c61 6265 6c60 6020 6172  ``NodeLabel`` ar
+00011170: 6520 7374 616e 6461 7264 2050 7974 686f  e standard Pytho
+00011180: 6e20 666f 726d 6174 2073 7472 696e 6773  n format strings
+00011190: 2074 6861 7420 7265 636f 676e 6973 650a   that recognise.
+000111a0: 7468 6520 7265 706c 6163 656d 656e 7420  the replacement 
+000111b0: 6669 656c 6473 2060 6061 6464 7265 7373  fields ``address
+000111c0: 6060 2061 6e64 2060 606c 6162 656c 6060  `` and ``label``
+000111d0: 2028 7468 6520 6164 6472 6573 7320 616e   (the address an
+000111e0: 6420 6c61 6265 6c20 6f66 2074 6865 0a66  d label of the.f
+000111f0: 6972 7374 2069 6e73 7472 7563 7469 6f6e  irst instruction
+00011200: 2069 6e20 7468 6520 726f 7574 696e 6520   in the routine 
+00011210: 7265 7072 6573 656e 7465 6420 6279 2074  represented by t
+00011220: 6865 206e 6f64 6529 2e0a 0a43 6f6e 6669  he node)...Confi
+00011230: 6775 7261 7469 6f6e 2070 6172 616d 6574  guration paramet
+00011240: 6572 7320 6d75 7374 2061 7070 6561 7220  ers must appear 
+00011250: 696e 2061 2060 605b 736e 6170 696e 666f  in a ``[snapinfo
+00011260: 5d60 6020 7365 6374 696f 6e2e 2046 6f72  ]`` section. For
+00011270: 2065 7861 6d70 6c65 2c0a 746f 206d 616b   example,.to mak
+00011280: 6520 6073 6e61 7069 6e66 6f2e 7079 6020  e `snapinfo.py` 
+00011290: 7573 6520 6f70 656e 2061 7272 6f77 6865  use open arrowhe
+000112a0: 6164 7320 616e 6420 6120 6379 616e 2062  ads and a cyan b
+000112b0: 6163 6b67 726f 756e 6420 636f 6c6f 7572  ackground colour
+000112c0: 2069 6e20 6361 6c6c 0a67 7261 7068 7320   in call.graphs 
+000112d0: 6279 2064 6566 6175 6c74 2c20 6164 6420  by default, add 
+000112e0: 7468 6520 666f 6c6c 6f77 696e 6720 7365  the following se
+000112f0: 6374 696f 6e20 746f 2060 736b 6f6f 6c6b  ction to `skoolk
+00011300: 6974 2e69 6e69 603a 3a0a 0a20 205b 736e  it.ini`::..  [sn
+00011310: 6170 696e 666f 5d0a 2020 4564 6765 4174  apinfo].  EdgeAt
+00011320: 7472 6962 7574 6573 3d61 7272 6f77 6865  tributes=arrowhe
+00011330: 6164 3d6f 7065 6e0a 2020 4772 6170 6841  ad=open.  GraphA
+00011340: 7474 7269 6275 7465 733d 6267 636f 6c6f  ttributes=bgcolo
+00011350: 723d 6379 616e 0a0a 436f 6e66 6967 7572  r=cyan..Configur
+00011360: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
+00011370: 206d 6179 2061 6c73 6f20 6265 2073 6574   may also be set
+00011380: 206f 6e20 7468 6520 636f 6d6d 616e 6420   on the command 
+00011390: 6c69 6e65 2062 7920 7573 696e 6720 7468  line by using th
+000113a0: 650a 6060 2d2d 696e 6960 6020 6f70 7469  e.``--ini`` opti
+000113b0: 6f6e 2e20 5061 7261 6d65 7465 7220 7661  on. Parameter va
+000113c0: 6c75 6573 2073 6574 2074 6869 7320 7761  lues set this wa
+000113d0: 7920 7769 6c6c 206f 7665 7272 6964 6520  y will override 
+000113e0: 616e 7920 666f 756e 6420 696e 0a60 736b  any found in.`sk
+000113f0: 6f6f 6c6b 6974 2e69 6e69 602e 0a0a 2e2e  oolkit.ini`.....
+00011400: 205f 444f 5420 666f 726d 6174 3a20 6874   _DOT format: ht
+00011410: 7470 733a 2f2f 6772 6170 6876 697a 2e67  tps://graphviz.g
+00011420: 6974 6c61 622e 696f 2f5f 7061 6765 732f  itlab.io/_pages/
+00011430: 646f 632f 696e 666f 2f6c 616e 672e 6874  doc/info/lang.ht
+00011440: 6d6c 0a2e 2e20 5f47 7261 7068 7669 7a3a  ml... _Graphviz:
+00011450: 2068 7474 7073 3a2f 2f67 7261 7068 7669   https://graphvi
+00011460: 7a2e 6769 746c 6162 2e69 6f2f 0a2e 2e20  z.gitlab.io/... 
+00011470: 5f61 7474 7269 6275 7465 733a 2068 7474  _attributes: htt
+00011480: 7073 3a2f 2f67 7261 7068 7669 7a2e 6769  ps://graphviz.gi
+00011490: 746c 6162 2e69 6f2f 5f70 6167 6573 2f64  tlab.io/_pages/d
+000114a0: 6f63 2f69 6e66 6f2f 6174 7472 732e 6874  oc/info/attrs.ht
+000114b0: 6d6c 0a0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d  ml..+---------+-
+000114c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000114d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000114e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000114f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011500: 2d2d 2b0a 7c20 5665 7273 696f 6e20 7c20  --+.| Version | 
+00011510: 4368 616e 6765 7320 2020 2020 2020 2020  Changes         
+00011520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011550: 2020 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d 2b3d    |.+=========+=
+00011560: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011570: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011580: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00011590: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000115a0: 3d3d 2b0a 7c20 392e 3020 2020 2020 7c20  ==+.| 9.0     | 
+000115b0: 5368 6f77 7320 7468 6520 6375 7272 656e  Shows the curren
+000115c0: 7420 4159 2072 6567 6973 7465 7220 696e  t AY register in
+000115d0: 2031 3238 4b20 535a 5820 616e 6420 5a38   128K SZX and Z8
+000115e0: 3020 736e 6170 7368 6f74 7320 2020 2020  0 snapshots     
+000115f0: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011640: 2d2d 2b0a 7c20 382e 3130 2020 2020 7c20  --+.| 8.10    | 
+00011650: 5368 6f77 7320 7468 6520 7661 6c75 6520  Shows the value 
+00011660: 6f66 2074 6865 2054 2d73 7461 7465 7320  of the T-states 
+00011670: 636f 756e 7465 7220 616e 6420 7468 6520  counter and the 
+00011680: 6973 7375 6520 3220 656d 756c 6174 696f  issue 2 emulatio
+00011690: 6e20 7c0a 7c20 2020 2020 2020 2020 7c20  n |.|         | 
+000116a0: 666c 6167 2069 6e20 535a 5820 616e 6420  flag in SZX and 
+000116b0: 5a38 3020 736e 6170 7368 6f74 7320 2020  Z80 snapshots   
+000116c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116e0: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+000116f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011730: 2d2d 2b0a 7c20 382e 3420 2020 2020 7c20  --+.| 8.4     | 
+00011740: 4164 6465 6420 7468 6520 6060 5065 656b  Added the ``Peek
+00011750: 6060 2061 6e64 2060 6057 6f72 6460 6020  `` and ``Word`` 
+00011760: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
+00011770: 7261 6d65 7465 7273 2020 2020 2020 2020  rameters        
+00011780: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000117a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000117b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000117c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000117d0: 2d2d 2b0a 7c20 382e 3320 2020 2020 7c20  --+.| 8.3     | 
+000117e0: 4164 6465 6420 7375 7070 6f72 7420 666f  Added support fo
+000117f0: 7220 7265 6164 696e 6720 636f 6e74 726f  r reading contro
+00011800: 6c20 6669 6c65 7320 6672 6f6d 2061 2064  l files from a d
+00011810: 6972 6563 746f 7279 2020 2020 2020 2020  irectory        
+00011820: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
+00011830: 2860 602d 2d63 746c 2044 4952 6060 2920  (``--ctl DIR``) 
+00011840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011870: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000118c0: 2d2d 2b0a 7c20 382e 3220 2020 2020 7c20  --+.| 8.2     | 
+000118d0: 436f 6e66 6967 7572 6174 696f 6e20 6973  Configuration is
+000118e0: 2072 6561 6420 6672 6f6d 2060 736b 6f6f   read from `skoo
+000118f0: 6c6b 6974 2e69 6e69 6020 6966 2070 7265  lkit.ini` if pre
+00011900: 7365 6e74 3b20 6164 6465 6420 7468 6520  sent; added the 
+00011910: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
+00011920: 6162 696c 6974 7920 746f 2072 6561 6420  ability to read 
+00011930: 6269 6e61 7279 2066 696c 6573 3b20 6164  binary files; ad
+00011940: 6465 6420 7468 6520 6060 2d2d 6361 6c6c  ded the ``--call
+00011950: 2d67 7261 7068 6060 2c20 2020 2020 2020  -graph``,       
+00011960: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
+00011970: 6060 2d2d 6374 6c60 602c 2060 602d 2d69  ``--ctl``, ``--i
+00011980: 6e69 6060 2c20 6060 2d2d 6f72 6760 602c  ni``, ``--org``,
+00011990: 2060 602d 2d70 6167 6560 6020 616e 6420   ``--page`` and 
+000119a0: 6060 2d2d 7368 6f77 2d63 6f6e 6669 6760  ``--show-config`
+000119b0: 6020 7c0a 7c20 2020 2020 2020 2020 7c20  ` |.|         | 
+000119c0: 6f70 7469 6f6e 7320 2020 2020 2020 2020  options         
+000119d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a00: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011a50: 2d2d 2b0a 7c20 362e 3220 2020 2020 7c20  --+.| 6.2     | 
+00011a60: 5468 6520 6060 2d2d 6669 6e64 6060 2c20  The ``--find``, 
+00011a70: 6060 2d2d 6669 6e64 2d74 696c 6560 602c  ``--find-tile``,
+00011a80: 2060 602d 2d70 6565 6b60 6020 616e 6420   ``--peek`` and 
+00011a90: 6060 2d2d 776f 7264 6060 2020 2020 2020  ``--word``      
+00011aa0: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
+00011ab0: 6f70 7469 6f6e 7320 6163 6365 7074 2068  options accept h
+00011ac0: 6578 6164 6563 696d 616c 2069 6e74 6567  exadecimal integ
+00011ad0: 6572 7320 7072 6566 6978 6564 2062 7920  ers prefixed by 
+00011ae0: 2730 7827 2020 2020 2020 2020 2020 2020  '0x'            
+00011af0: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011b40: 2d2d 2b0a 7c20 362e 3020 2020 2020 7c20  --+.| 6.0     | 
+00011b50: 4164 6465 6420 7375 7070 6f72 7420 746f  Added support to
+00011b60: 2074 6865 2060 602d 2d66 696e 6460 6020   the ``--find`` 
+00011b70: 6f70 7469 6f6e 2066 6f72 2064 6973 7461  option for dista
+00011b80: 6e63 6520 7261 6e67 6573 3b20 6164 6465  nce ranges; adde
+00011b90: 6420 7c0a 7c20 2020 2020 2020 2020 7c20  d |.|         | 
+00011ba0: 7468 6520 6060 2d2d 6669 6e64 2d74 696c  the ``--find-til
+00011bb0: 6560 6020 616e 6420 6060 2d2d 776f 7264  e`` and ``--word
+00011bc0: 6060 206f 7074 696f 6e73 3b20 7468 6520  `` options; the 
+00011bd0: 6060 2d2d 7065 656b 6060 206f 7074 696f  ``--peek`` optio
+00011be0: 6e20 7c0a 7c20 2020 2020 2020 2020 7c20  n |.|         | 
+00011bf0: 7368 6f77 7320 5544 4773 2061 6e64 2042  shows UDGs and B
+00011c00: 4153 4943 2074 6f6b 656e 7320 2020 2020  ASIC tokens     
+00011c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c30: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011c80: 2d2d 2b0a 7c20 352e 3420 2020 2020 7c20  --+.| 5.4     | 
+00011c90: 4164 6465 6420 7468 6520 6060 2d2d 7661  Added the ``--va
+00011ca0: 7269 6162 6c65 7360 6020 6f70 7469 6f6e  riables`` option
+00011cb0: 3b20 5544 4773 2069 6e20 6120 4241 5349  ; UDGs in a BASI
+00011cc0: 4320 7072 6f67 7261 6d20 6172 6520 2020  C program are   
+00011cd0: 2020 7c0a 7c20 2020 2020 2020 2020 7c20    |.|         | 
+00011ce0: 7368 6f77 6e20 6173 2073 7065 6369 616c  shown as special
+00011cf0: 2073 796d 626f 6c73 2028 652e 672e 2060   symbols (e.g. `
+00011d00: 607b 5544 472d 417d 6060 2920 2020 2020  `{UDG-A}``)     
+00011d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d20: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011d70: 2d2d 2b0a 7c20 352e 3320 2020 2020 7c20  --+.| 5.3     | 
+00011d80: 4e65 7720 2020 2020 2020 2020 2020 2020  New             
 00011d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011da0: 7469 6d65 732e 0a20 2020 202d 2d74 6170  times..    --tap
-00011db0: 652d 616e 616c 7973 6973 2020 2020 2020  e-analysis      
-00011dc0: 2053 686f 7720 616e 2061 6e61 6c79 7369   Show an analysi
-00011dd0: 7320 6f66 2074 6865 2074 6170 6527 7320  s of the tape's 
-00011de0: 746f 6e65 732c 2070 756c 7365 2073 6571  tones, pulse seq
-00011df0: 7565 6e63 6573 0a20 2020 2020 2020 2020  uences.         
-00011e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e10: 2061 6e64 2064 6174 6120 626c 6f63 6b73   and data blocks
-00011e20: 2e0a 2020 2020 2d2d 7461 7065 2d6e 616d  ..    --tape-nam
-00011e30: 6520 4e41 4d45 2020 2020 2020 5370 6563  e NAME      Spec
-00011e40: 6966 7920 7468 6520 6e61 6d65 206f 6620  ify the name of 
-00011e50: 6120 5441 502f 545a 5820 6669 6c65 2069  a TAP/TZX file i
-00011e60: 6e20 6120 7a69 7020 6172 6368 6976 652e  n a zip archive.
-00011e70: 0a20 2020 202d 2d74 6170 652d 7374 6172  .    --tape-star
-00011e80: 7420 424c 4f43 4b20 2020 2053 7461 7274  t BLOCK    Start
-00011e90: 2074 6865 2074 6170 6520 6174 2074 6869   the tape at thi
-00011ea0: 7320 626c 6f63 6b20 6e75 6d62 6572 2e0a  s block number..
-00011eb0: 2020 2020 2d2d 7461 7065 2d73 746f 7020      --tape-stop 
-00011ec0: 424c 4f43 4b20 2020 2020 5374 6f70 2074  BLOCK     Stop t
-00011ed0: 6865 2074 6170 6520 6174 2074 6869 7320  he tape at this 
-00011ee0: 626c 6f63 6b20 6e75 6d62 6572 2e0a 2020  block number..  
-00011ef0: 2020 2d2d 7461 7065 2d73 756d 204d 4435    --tape-sum MD5
-00011f00: 5355 4d20 2020 2020 5370 6563 6966 7920  SUM     Specify 
-00011f10: 7468 6520 4d44 3520 6368 6563 6b73 756d  the MD5 checksum
-00011f20: 206f 6620 7468 6520 5441 502f 545a 5820   of the TAP/TZX 
-00011f30: 6669 6c65 2e0a 2020 2020 2d75 2041 4745  file..    -u AGE
-00011f40: 4e54 2c20 2d2d 7573 6572 2d61 6765 6e74  NT, --user-agent
-00011f50: 2041 4745 4e54 0a20 2020 2020 2020 2020   AGENT.         
-00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f70: 2053 6574 2074 6865 2055 7365 722d 4167   Set the User-Ag
-00011f80: 656e 7420 6865 6164 6572 2e0a 2020 2020  ent header..    
-00011f90: 2d56 2c20 2d2d 7665 7273 696f 6e20 2020  -V, --version   
-00011fa0: 2020 2020 2020 5368 6f77 2053 6b6f 6f6c        Show Skool
-00011fb0: 4b69 7420 7665 7273 696f 6e20 6e75 6d62  Kit version numb
-00011fc0: 6572 2061 6e64 2065 7869 742e 0a0a 4e6f  er and exit...No
-00011fd0: 7465 2074 6861 7420 6074 6170 3273 6e61  te that `tap2sna
-00011fe0: 2e70 7960 2063 616e 6e6f 7420 7265 6164  .py` cannot read
-00011ff0: 2064 6174 6120 6672 6f6d 2054 5a58 2062   data from TZX b
-00012000: 6c6f 636b 2074 7970 6573 2030 7831 3520  lock types 0x15 
-00012010: 2864 6972 6563 740a 7265 636f 7264 696e  (direct.recordin
-00012020: 6729 2c20 3078 3138 2028 4353 5720 7265  g), 0x18 (CSW re
-00012030: 636f 7264 696e 6729 206f 7220 3078 3139  cording) or 0x19
-00012040: 2028 6765 6e65 7261 6c69 7a65 6420 6461   (generalized da
-00012050: 7461 2062 6c6f 636b 292e 0a0a 4279 2064  ta block)...By d
-00012060: 6566 6175 6c74 2c20 6074 6170 3273 6e61  efault, `tap2sna
-00012070: 2e70 7960 2061 7474 656d 7074 7320 746f  .py` attempts to
-00012080: 206c 6f61 6420 6120 7461 7065 2065 7861   load a tape exa
-00012090: 6374 6c79 2061 7320 6120 3438 4b20 5370  ctly as a 48K Sp
-000120a0: 6563 7472 756d 0a77 6f75 6c64 2028 7365  ectrum.would (se
-000120b0: 6520 3a72 6566 3a60 7461 7032 736e 612d  e :ref:`tap2sna-
-000120c0: 7369 6d2d 6c6f 6164 6029 2e20 4966 2074  sim-load`). If t
-000120d0: 6861 7420 646f 6573 6e27 7420 776f 726b  hat doesn't work
-000120e0: 2c20 7468 6520 6060 2d2d 7261 6d60 6020  , the ``--ram`` 
-000120f0: 6f70 7469 6f6e 0a63 616e 2062 6520 7573  option.can be us
-00012100: 6564 2074 6f20 6c6f 6164 2062 7974 6573  ed to load bytes
-00012110: 2066 726f 6d20 7370 6563 6966 6963 2074   from specific t
-00012120: 6170 6520 626c 6f63 6b73 2061 7420 7468  ape blocks at th
-00012130: 6520 6170 7072 6f70 7269 6174 650a 6164  e appropriate.ad
-00012140: 6472 6573 7365 732e 2046 6f72 2065 7861  dresses. For exa
-00012150: 6d70 6c65 3a3a 0a0a 2020 2420 7461 7032  mple::..  $ tap2
-00012160: 736e 612e 7079 202d 2d72 616d 206c 6f61  sna.py --ram loa
-00012170: 643d 332c 3330 3030 3020 6761 6d65 2e74  d=3,30000 game.t
-00012180: 7a78 2067 616d 652e 7a38 300a 0a6c 6f61  zx game.z80..loa
-00012190: 6473 2074 6865 2074 6869 7264 2062 6c6f  ds the third blo
-000121a0: 636b 206f 6e20 7468 6520 7461 7065 2061  ck on the tape a
-000121b0: 7420 6164 6472 6573 7320 3330 3030 302c  t address 30000,
-000121c0: 2061 6e64 2069 676e 6f72 6573 2061 6c6c   and ignores all
-000121d0: 206f 7468 6572 0a62 6c6f 636b 732e 2028   other.blocks. (
-000121e0: 546f 2073 6565 2069 6e66 6f72 6d61 7469  To see informati
-000121f0: 6f6e 206f 6e20 7468 6520 626c 6f63 6b73  on on the blocks
-00012200: 2069 6e20 6120 5441 5020 6f72 2054 5a58   in a TAP or TZX
-00012210: 2066 696c 652c 2075 7365 2074 6865 0a3a   file, use the.:
-00012220: 7265 663a 6074 6170 696e 666f 2e70 7960  ref:`tapinfo.py`
-00012230: 2063 6f6d 6d61 6e64 2e29 0a0a 5468 6520   command.)..The 
-00012240: 6060 2d2d 7261 6d60 6020 6f70 7469 6f6e  ``--ram`` option
-00012250: 2063 616e 2061 6c73 6f20 6265 2075 7365   can also be use
-00012260: 6420 746f 206d 6f76 6520 626c 6f63 6b73  d to move blocks
-00012270: 206f 6620 6279 7465 7320 6672 6f6d 206f   of bytes from o
-00012280: 6e65 206c 6f63 6174 696f 6e0a 746f 2061  ne location.to a
-00012290: 6e6f 7468 6572 2c20 504f 4b45 2076 616c  nother, POKE val
-000122a0: 7565 7320 696e 746f 2069 6e64 6976 6964  ues into individ
-000122b0: 7561 6c20 6164 6472 6573 7365 7320 6f72  ual addresses or
-000122c0: 2061 6464 7265 7373 2072 616e 6765 732c   address ranges,
-000122d0: 206d 6f64 6966 790a 6d65 6d6f 7279 2077   modify.memory w
-000122e0: 6974 6820 584f 5220 616e 6420 4144 4420  ith XOR and ADD 
-000122f0: 6f70 6572 6174 696f 6e73 2c20 696e 6974  operations, init
-00012300: 6961 6c69 7365 2074 6865 2073 7973 7465  ialise the syste
-00012310: 6d20 7661 7269 6162 6c65 732c 206f 7220  m variables, or 
-00012320: 6361 6c6c 2061 0a50 7974 686f 6e20 6675  call a.Python fu
-00012330: 6e63 7469 6f6e 2074 6f20 6d6f 6469 6679  nction to modify
-00012340: 2074 6865 206d 656d 6f72 7920 736e 6170   the memory snap
-00012350: 7368 6f74 2069 6e20 616e 2061 7262 6974  shot in an arbit
-00012360: 7261 7279 2077 6179 2062 6566 6f72 6520  rary way before 
-00012370: 6974 2069 730a 7361 7665 642e 2046 6f72  it is.saved. For
-00012380: 206d 6f72 6520 696e 666f 726d 6174 696f   more informatio
-00012390: 6e20 6f6e 2074 6865 7365 206f 7065 7261  n on these opera
-000123a0: 7469 6f6e 732c 2072 756e 3a3a 0a0a 2020  tions, run::..  
-000123b0: 2420 7461 7032 736e 612e 7079 202d 2d72  $ tap2sna.py --r
-000123c0: 616d 2068 656c 700a 0a46 6f72 2063 6f6d  am help..For com
-000123d0: 706c 6578 2073 6e61 7073 686f 7473 2074  plex snapshots t
-000123e0: 6861 7420 7265 7175 6972 6520 6d61 6e79  hat require many
-000123f0: 206f 7074 696f 6e73 2074 6f20 6275 696c   options to buil
-00012400: 642c 2069 7420 6d61 7920 6265 206d 6f72  d, it may be mor
-00012410: 650a 636f 6e76 656e 6965 6e74 2074 6f20  e.convenient to 
-00012420: 7374 6f72 6520 7468 6520 6172 6775 6d65  store the argume
-00012430: 6e74 7320 746f 2060 7461 7032 736e 612e  nts to `tap2sna.
-00012440: 7079 6020 696e 2061 2066 696c 652e 2046  py` in a file. F
-00012450: 6f72 2065 7861 6d70 6c65 2c20 6966 0a74  or example, if.t
-00012460: 6865 2066 696c 6520 6067 616d 652e 7432  he file `game.t2
-00012470: 7360 2068 6173 2074 6865 2066 6f6c 6c6f  s` has the follo
-00012480: 7769 6e67 2063 6f6e 7465 6e74 733a 3a0a  wing contents::.
-00012490: 0a20 203b 0a20 203b 2074 6170 3273 6e61  .  ;.  ; tap2sna
-000124a0: 2e70 7920 6669 6c65 2066 6f72 2047 414d  .py file for GAM
-000124b0: 450a 2020 3b0a 2020 6874 7470 3a2f 2f65  E.  ;.  http://e
-000124c0: 7861 6d70 6c65 2e63 6f6d 2f70 7562 2f67  xample.com/pub/g
-000124d0: 616d 6573 2f47 414d 452e 7a69 700a 2020  ames/GAME.zip.  
-000124e0: 2d63 2066 6173 742d 6c6f 6164 3d30 2020  -c fast-load=0  
-000124f0: 2020 2020 2023 2044 6973 6162 6c65 2066       # Disable f
-00012500: 6173 7420 6c6f 6164 696e 670a 2020 2d63  ast loading.  -c
-00012510: 2061 6363 656c 6572 6174 6f72 3d6e 6f6e   accelerator=non
-00012520: 6520 2023 2044 6973 6162 6c65 2074 6170  e  # Disable tap
-00012530: 652d 7361 6d70 6c69 6e67 206c 6f6f 7020  e-sampling loop 
-00012540: 6163 6365 6c65 7261 7469 6f6e 0a20 202d  acceleration.  -
-00012550: 2d73 7461 7465 2069 7373 7565 323d 3120  -state issue2=1 
-00012560: 2020 2020 2320 456e 6162 6c65 2069 7373      # Enable iss
-00012570: 7565 2032 206b 6579 626f 6172 6420 656d  ue 2 keyboard em
-00012580: 756c 6174 696f 6e0a 2020 2d2d 7374 6172  ulation.  --star
-00012590: 7420 3334 3831 3620 2020 2020 2020 2023  t 34816        #
-000125a0: 2053 7461 7274 2061 7420 3334 3831 360a   Start at 34816.
-000125b0: 0a74 6865 6e3a 3a0a 0a20 2024 2074 6170  .then::..  $ tap
-000125c0: 3273 6e61 2e70 7920 4067 616d 652e 7432  2sna.py @game.t2
-000125d0: 730a 0a77 696c 6c20 6372 6561 7465 2060  s..will create `
-000125e0: 6761 6d65 2e7a 3830 6020 6173 2069 6620  game.z80` as if 
-000125f0: 7468 6520 6172 6775 6d65 6e74 7320 7370  the arguments sp
-00012600: 6563 6966 6965 6420 696e 2060 6761 6d65  ecified in `game
-00012610: 2e74 3273 6020 6861 6420 6265 656e 0a67  .t2s` had been.g
-00012620: 6976 656e 206f 6e20 7468 6520 636f 6d6d  iven on the comm
-00012630: 616e 6420 6c69 6e65 2e20 5768 656e 2060  and line. When `
-00012640: 7461 7032 736e 612e 7079 6020 7265 6164  tap2sna.py` read
-00012650: 7320 6172 6775 6d65 6e74 7320 6672 6f6d  s arguments from
-00012660: 2061 2066 696c 6520 7768 6f73 650a 6e61   a file whose.na
-00012670: 6d65 2065 6e64 7320 7769 7468 2027 2e74  me ends with '.t
-00012680: 3273 272c 2074 6865 206f 7574 7075 7420  2s', the output 
-00012690: 736e 6170 7368 6f74 2066 696c 656e 616d  snapshot filenam
-000126a0: 6520 6465 6661 756c 7473 2074 6f20 7468  e defaults to th
-000126b0: 6520 6e61 6d65 206f 660a 7468 6174 2061  e name of.that a
-000126c0: 7267 756d 656e 7473 2066 696c 6520 7769  rguments file wi
-000126d0: 7468 2027 2e74 3273 2720 7265 706c 6163  th '.t2s' replac
-000126e0: 6564 2062 7920 6569 7468 6572 2027 2e7a  ed by either '.z
-000126f0: 3830 2720 6f72 2027 2e73 7a78 2720 2864  80' or '.szx' (d
-00012700: 6570 656e 6469 6e67 0a6f 6e20 7468 6520  epending.on the 
-00012710: 7661 6c75 6520 6f66 2074 6865 2060 6044  value of the ``D
-00012720: 6566 6175 6c74 536e 6170 7368 6f74 466f  efaultSnapshotFo
-00012730: 726d 6174 6060 2063 6f6e 6669 6775 7261  rmat`` configura
-00012740: 7469 6f6e 2070 6172 616d 6574 6572 292e  tion parameter).
-00012750: 0a0a 2e2e 205f 7461 7032 736e 612d 7369  .... _tap2sna-si
-00012760: 6d2d 6c6f 6164 3a0a 0a53 696d 756c 6174  m-load:..Simulat
-00012770: 6564 204c 4f41 440a 5e5e 5e5e 5e5e 5e5e  ed LOAD.^^^^^^^^
-00012780: 5e5e 5e5e 5e5e 0a42 7920 6465 6661 756c  ^^^^^^.By defaul
-00012790: 742c 2060 7461 7032 736e 612e 7079 6020  t, `tap2sna.py` 
-000127a0: 7369 6d75 6c61 7465 7320 6120 6672 6573  simulates a fres
-000127b0: 686c 7920 626f 6f74 6564 2034 384b 205a  hly booted 48K Z
-000127c0: 5820 5370 6563 7472 756d 2072 756e 6e69  X Spectrum runni
-000127d0: 6e67 0a4c 4f41 4420 2222 2028 6f72 204c  ng.LOAD "" (or L
-000127e0: 4f41 4420 2222 434f 4445 2c20 6966 2074  OAD ""CODE, if t
-000127f0: 6865 2066 6972 7374 2062 6c6f 636b 206f  he first block o
-00012800: 6e20 7468 6520 7461 7065 2069 7320 6120  n the tape is a 
-00012810: 2742 7974 6573 2720 6865 6164 6572 292e  'Bytes' header).
-00012820: 0a57 6865 6e65 7665 7220 7468 6520 5370  .Whenever the Sp
-00012830: 6563 7472 756d 2052 4f4d 2773 206c 6f61  ectrum ROM's loa
-00012840: 6420 726f 7574 696e 6520 6174 2024 3035  d routine at $05
-00012850: 3536 2069 7320 6361 6c6c 6564 2c20 6120  56 is called, a 
-00012860: 7368 6f72 7463 7574 2069 730a 7461 6b65  shortcut is.take
-00012870: 6e20 6279 2022 6661 7374 206c 6f61 6469  n by "fast loadi
-00012880: 6e67 2220 7468 6520 6e65 7874 2062 6c6f  ng" the next blo
-00012890: 636b 206f 6e20 7468 6520 7461 7065 2e20  ck on the tape. 
-000128a0: 416c 6c20 6f74 6865 7220 636f 6465 2028  All other code (
-000128b0: 696e 636c 7564 696e 670a 616e 7920 6375  including.any cu
-000128c0: 7374 6f6d 206c 6f61 6465 7229 2069 7320  stom loader) is 
-000128d0: 6675 6c6c 7920 7369 6d75 6c61 7465 642e  fully simulated.
-000128e0: 2053 696d 756c 6174 696f 6e20 636f 6e74   Simulation cont
-000128f0: 696e 7565 7320 756e 7469 6c20 7468 6520  inues until the 
-00012900: 7072 6f67 7261 6d0a 636f 756e 7465 7220  program.counter 
-00012910: 6869 7473 2074 6865 2073 7461 7274 2061  hits the start a
-00012920: 6464 7265 7373 2067 6976 656e 2062 7920  ddress given by 
-00012930: 7468 6520 6060 2d2d 7374 6172 7460 6020  the ``--start`` 
-00012940: 6f70 7469 6f6e 2c20 6f72 2031 3520 6d69  option, or 15 mi
-00012950: 6e75 7465 730a 6f66 2073 696d 756c 6174  nutes.of simulat
-00012960: 6564 205a 3830 2043 5055 2074 696d 6520  ed Z80 CPU time 
-00012970: 6861 7320 656c 6170 7365 642c 206f 7220  has elapsed, or 
-00012980: 7468 6520 656e 6420 6f66 2074 6865 2074  the end of the t
-00012990: 6170 6520 6973 2072 6561 6368 6564 2061  ape is reached a
-000129a0: 6e64 0a6f 6e65 206f 6620 7468 6520 666f  nd.one of the fo
-000129b0: 6c6c 6f77 696e 6720 636f 6e64 6974 696f  llowing conditio
-000129c0: 6e73 2069 7320 7361 7469 7366 6965 643a  ns is satisfied:
-000129d0: 0a0a 2a20 6120 6375 7374 6f6d 206c 6f61  ..* a custom loa
-000129e0: 6465 7220 7761 7320 6465 7465 6374 6564  der was detected
-000129f0: 0a2a 2074 6865 2070 726f 6772 616d 2063  .* the program c
-00012a00: 6f75 6e74 6572 2068 6974 7320 616e 2061  ounter hits an a
-00012a10: 6464 7265 7373 206f 7574 7369 6465 2074  ddress outside t
-00012a20: 6865 2052 4f4d 0a2a 206d 6f72 6520 7468  he ROM.* more th
-00012a30: 616e 206f 6e65 2073 6563 6f6e 6420 6f66  an one second of
-00012a40: 2073 696d 756c 6174 6564 205a 3830 2043   simulated Z80 C
-00012a50: 5055 2074 696d 6520 6861 7320 656c 6170  PU time has elap
-00012a60: 7365 6420 7369 6e63 6520 7468 6520 656e  sed since the en
-00012a70: 6420 6f66 0a20 2074 6865 2074 6170 6520  d of.  the tape 
-00012a80: 7761 7320 7265 6163 6865 640a 0a41 2073  was reached..A s
-00012a90: 696d 756c 6174 6564 204c 4f41 4420 6361  imulated LOAD ca
-00012aa0: 6e20 616c 736f 2062 6520 6162 6f72 7465  n also be aborte
-00012ab0: 6420 6279 2070 7265 7373 696e 6720 4374  d by pressing Ct
-00012ac0: 726c 2d43 2e20 5768 656e 2061 2073 696d  rl-C. When a sim
-00012ad0: 756c 6174 6564 204c 4f41 440a 6861 7320  ulated LOAD.has 
-00012ae0: 636f 6d70 6c65 7465 6420 6f72 2062 6565  completed or bee
-00012af0: 6e20 6162 6f72 7465 642c 2074 6865 2076  n aborted, the v
-00012b00: 616c 7565 7320 6f66 2074 6865 2072 6567  alues of the reg
-00012b10: 6973 7465 7273 2028 696e 636c 7564 696e  isters (includin
-00012b20: 6720 7468 650a 7072 6f67 7261 6d20 636f  g the.program co
-00012b30: 756e 7465 7229 2069 6e20 7468 6520 7369  unter) in the si
-00012b40: 6d75 6c61 746f 7220 6172 6520 7573 6564  mulator are used
-00012b50: 2074 6f20 706f 7075 6c61 7465 2074 6865   to populate the
-00012b60: 2073 6e61 7073 686f 742e 0a0a 4120 7369   snapshot...A si
-00012b70: 6d75 6c61 7465 6420 4c4f 4144 2063 616e  mulated LOAD can
-00012b80: 2062 6520 636f 6e66 6967 7572 6564 2076   be configured v
-00012b90: 6961 2070 6172 616d 6574 6572 7320 7468  ia parameters th
-00012ba0: 6174 2061 7265 2073 6574 2062 7920 7468  at are set by th
-00012bb0: 650a 6060 2d2d 7369 6d2d 6c6f 6164 2d63  e.``--sim-load-c
-00012bc0: 6f6e 6669 6760 6020 286f 7220 6060 2d63  onfig`` (or ``-c
-00012bd0: 6060 2920 6f70 7469 6f6e 2e20 5468 6520  ``) option. The 
-00012be0: 7265 636f 676e 6973 6564 2063 6f6e 6669  recognised confi
-00012bf0: 6775 7261 7469 6f6e 0a70 6172 616d 6574  guration.paramet
-00012c00: 6572 7320 6172 653a 0a0a 2a20 6060 6163  ers are:..* ``ac
-00012c10: 6365 6c65 7261 7465 2d64 6563 2d61 6060  celerate-dec-a``
-00012c20: 202d 2065 6e61 626c 6520 6163 6365 6c65   - enable accele
-00012c30: 7261 7469 6f6e 206f 6620 2744 4543 2041  ration of 'DEC A
-00012c40: 3a20 4a52 204e 5a2c 242d 3127 2064 656c  : JR NZ,$-1' del
-00012c50: 6179 206c 6f6f 7073 0a20 2028 6060 3160  ay loops.  (``1`
-00012c60: 602c 2074 6865 2064 6566 6175 6c74 292c  `, the default),
-00012c70: 206f 7220 2744 4543 2041 3a20 4a50 204e   or 'DEC A: JP N
-00012c80: 5a2c 242d 3127 2064 656c 6179 206c 6f6f  Z,$-1' delay loo
-00012c90: 7073 2028 6060 3260 6029 2c20 6f72 206e  ps (``2``), or n
-00012ca0: 6569 7468 6572 0a20 2028 6060 3060 6029  either.  (``0``)
-00012cb0: 0a2a 2060 6061 6363 656c 6572 6174 6f72  .* ``accelerator
-00012cc0: 6060 202d 2061 2063 6f6d 6d61 2d73 6570  `` - a comma-sep
-00012cd0: 6172 6174 6564 206c 6973 7420 6f66 2074  arated list of t
-00012ce0: 6170 652d 7361 6d70 6c69 6e67 206c 6f6f  ape-sampling loo
-00012cf0: 7020 6163 6365 6c65 7261 746f 7273 0a20  p accelerators. 
-00012d00: 2074 6f20 7573 6520 2873 6565 203a 7265   to use (see :re
-00012d10: 663a 6074 6170 3273 6e61 2d61 6363 656c  f:`tap2sna-accel
-00012d20: 6572 6174 6f72 7360 290a 2a20 6060 636d  erators`).* ``cm
-00012d30: 696f 6060 202d 2065 6e61 626c 6520 7369  io`` - enable si
-00012d40: 6d75 6c61 7469 6f6e 206f 6620 6d65 6d6f  mulation of memo
-00012d50: 7279 2063 6f6e 7465 6e74 696f 6e20 616e  ry contention an
-00012d60: 6420 492f 4f20 636f 6e74 656e 7469 6f6e  d I/O contention
-00012d70: 2064 656c 6179 730a 2020 2860 6031 6060   delays.  (``1``
-00012d80: 292c 206f 7220 6469 7361 626c 6520 6974  ), or disable it
-00012d90: 2028 6060 3060 6029 3b20 7468 6973 2069   (``0``); this i
-00012da0: 7320 6469 7361 626c 6564 2062 7920 6465  s disabled by de
-00012db0: 6661 756c 7420 746f 2069 6d70 726f 7665  fault to improve
-00012dc0: 0a20 2070 6572 666f 726d 616e 6365 2c20  .  performance, 
-00012dd0: 6275 7420 736f 6d65 206c 6f61 6465 7273  but some loaders
-00012de0: 206d 6179 2072 6571 7569 7265 2069 740a   may require it.
-00012df0: 2a20 6060 6661 7374 2d6c 6f61 6460 6020  * ``fast-load`` 
-00012e00: 2d20 656e 6162 6c65 2066 6173 7420 6c6f  - enable fast lo
-00012e10: 6164 696e 6720 2860 6031 6060 2c20 7468  ading (``1``, th
-00012e20: 6520 6465 6661 756c 7429 2c20 6f72 2064  e default), or d
-00012e30: 6973 6162 6c65 2069 740a 2020 2860 6030  isable it.  (``0
-00012e40: 6060 293b 2066 6173 7420 6c6f 6164 696e  ``); fast loadin
-00012e50: 6720 7369 676e 6966 6963 616e 746c 7920  g significantly 
-00012e60: 7265 6475 6365 7320 7468 6520 6c6f 6164  reduces the load
-00012e70: 2074 696d 6520 666f 7220 6d61 6e79 2074   time for many t
-00012e80: 6170 6573 2c20 6275 740a 2020 6361 6e20  apes, but.  can 
-00012e90: 616c 736f 2063 6175 7365 2073 6f6d 6520  also cause some 
-00012ea0: 6c6f 6164 6572 7320 746f 2066 6169 6c0a  loaders to fail.
-00012eb0: 2a20 6060 6669 6e69 7368 2d74 6170 6560  * ``finish-tape`
-00012ec0: 6020 2d20 7275 6e20 7468 6520 7461 7065  ` - run the tape
-00012ed0: 2074 6f20 7468 6520 656e 6420 6265 666f   to the end befo
-00012ee0: 7265 2073 746f 7070 696e 6720 7468 6520  re stopping the 
-00012ef0: 7369 6d75 6c61 7469 6f6e 2061 740a 2020  simulation at.  
-00012f00: 7468 6520 6164 6472 6573 7320 7370 6563  the address spec
-00012f10: 6966 6965 6420 6279 2074 6865 2060 602d  ified by the ``-
-00012f20: 2d73 7461 7274 6060 206f 7074 696f 6e20  -start`` option 
-00012f30: 2860 6031 6060 292c 206f 7220 7374 6f70  (``1``), or stop
-00012f40: 2074 6865 0a20 2073 696d 756c 6174 696f   the.  simulatio
-00012f50: 6e20 6173 2073 6f6f 6e20 6173 2074 6861  n as soon as tha
-00012f60: 7420 6164 6472 6573 7320 6973 2072 6561  t address is rea
-00012f70: 6368 6564 2c20 7265 6761 7264 6c65 7373  ched, regardless
-00012f80: 206f 6620 7768 6574 6865 7220 7468 6520   of whether the 
-00012f90: 7461 7065 0a20 2068 6173 2066 696e 6973  tape.  has finis
-00012fa0: 6865 6420 2860 6030 6060 2c20 7468 6520  hed (``0``, the 
-00012fb0: 6465 6661 756c 7429 0a2a 2060 6066 6972  default).* ``fir
-00012fc0: 7374 2d65 6467 6560 6020 2d20 7468 6520  st-edge`` - the 
-00012fd0: 7469 6d65 2028 696e 2054 2d73 7461 7465  time (in T-state
-00012fe0: 7329 2066 726f 6d20 7468 6520 7374 6172  s) from the star
-00012ff0: 7420 6f66 2074 6865 2074 6170 6520 6174  t of the tape at
-00013000: 2077 6869 6368 0a20 2074 6f20 706c 6163   which.  to plac
-00013010: 6520 7468 6520 6c65 6164 696e 6720 6564  e the leading ed
-00013020: 6765 206f 6620 7468 6520 6669 7273 7420  ge of the first 
-00013030: 7075 6c73 6520 2864 6566 6175 6c74 3a20  pulse (default: 
-00013040: 6060 3060 6029 0a2a 2060 6069 6e2d 666c  ``0``).* ``in-fl
-00013050: 6167 7360 6020 2d20 7661 7269 6f75 7320  ags`` - various 
-00013060: 666c 6167 7320 7370 6563 6966 7969 6e67  flags specifying
-00013070: 2068 6f77 2074 6f20 6861 6e64 6c65 2027   how to handle '
-00013080: 494e 2720 696e 7374 7275 6374 696f 6e73  IN' instructions
-00013090: 2028 7365 650a 2020 6265 6c6f 7729 0a2a   (see.  below).*
-000130a0: 2060 606c 6f61 6460 6020 2d20 6120 7370   ``load`` - a sp
-000130b0: 6163 652d 7365 7061 7261 7465 6420 6c69  ace-separated li
-000130c0: 7374 206f 6620 6b65 7973 2074 6f20 7072  st of keys to pr
-000130d0: 6573 7320 746f 2062 7569 6c64 2061 6e20  ess to build an 
-000130e0: 616c 7465 726e 6174 6976 650a 2020 636f  alternative.  co
-000130f0: 6d6d 616e 6420 6c69 6e65 2074 6f20 6c6f  mmand line to lo
-00013100: 6164 2074 6865 2074 6170 6520 2873 6565  ad the tape (see
-00013110: 203a 7265 663a 6074 6170 3273 6e61 2d6c   :ref:`tap2sna-l
-00013120: 6f61 6460 290a 2a20 6060 6d61 6368 696e  oad`).* ``machin
-00013130: 6560 6020 2d20 7468 6520 7479 7065 206f  e`` - the type o
-00013140: 6620 6d61 6368 696e 6520 746f 2073 696d  f machine to sim
-00013150: 756c 6174 653a 2061 2034 384b 2053 7065  ulate: a 48K Spe
-00013160: 6374 7275 6d20 2860 6034 3860 602c 2074  ctrum (``48``, t
-00013170: 6865 0a20 2064 6566 6175 6c74 292c 206f  he.  default), o
-00013180: 7220 6120 3132 384b 2053 7065 6374 7275  r a 128K Spectru
-00013190: 6d20 2860 6031 3238 6060 290a 2a20 6060  m (``128``).* ``
-000131a0: 7061 7573 6560 6020 2d20 7061 7573 6520  pause`` - pause 
-000131b0: 7468 6520 7461 7065 2062 6574 7765 656e  the tape between
-000131c0: 2062 6c6f 636b 7320 616e 6420 7265 7375   blocks and resu
-000131d0: 6d65 2070 6c61 7962 6163 6b20 7768 656e  me playback when
-000131e0: 2070 6f72 7420 3235 340a 2020 6973 2072   port 254.  is r
-000131f0: 6561 6420 2860 6031 6060 2c20 7468 6520  ead (``1``, the 
-00013200: 6465 6661 756c 7429 2c20 6f72 2072 756e  default), or run
-00013210: 2074 6865 2074 6170 6520 636f 6e74 696e   the tape contin
-00013220: 756f 7573 6c79 2028 6060 3060 6029 3b20  uously (``0``); 
-00013230: 7061 7573 696e 670a 2020 6361 6e20 6865  pausing.  can he
-00013240: 6c70 2077 6974 6820 7461 7065 7320 7468  lp with tapes th
-00013250: 6174 2072 6571 7569 7265 2028 6275 7420  at require (but 
-00013260: 646f 206e 6f74 2061 6374 7561 6c6c 7920  do not actually 
-00013270: 636f 6e74 6169 6e29 206c 6f6e 6720 7061  contain) long pa
-00013280: 7573 6573 0a20 2062 6574 7765 656e 2062  uses.  between b
-00013290: 6c6f 636b 732c 2062 7574 2063 616e 2063  locks, but can c
-000132a0: 6175 7365 2073 6f6d 6520 6c6f 6164 6572  ause some loader
-000132b0: 7320 746f 2066 6169 6c0a 2a20 6060 706f  s to fail.* ``po
-000132c0: 6c61 7269 7479 6060 202d 2074 6865 2045  larity`` - the E
-000132d0: 4152 2062 6974 2072 6561 6469 6e67 2070  AR bit reading p
-000132e0: 726f 6475 6365 6420 6279 2074 6865 2066  roduced by the f
-000132f0: 6972 7374 2070 756c 7365 206f 6e20 7468  irst pulse on th
-00013300: 6520 7461 7065 3a0a 2020 6060 3060 6020  e tape:.  ``0`` 
-00013310: 2874 6865 2064 6566 6175 6c74 2920 6f72  (the default) or
-00013320: 2060 6031 6060 3b20 7375 6273 6571 7565   ``1``; subseque
-00013330: 6e74 2070 756c 7365 7320 6769 7665 2072  nt pulses give r
-00013340: 6561 6469 6e67 7320 7468 6174 2061 6c74  eadings that alt
-00013350: 6572 6e61 7465 0a20 2062 6574 7765 656e  ernate.  between
-00013360: 2030 2061 6e64 2031 0a2a 2060 6074 696d   0 and 1.* ``tim
-00013370: 656f 7574 6060 202d 2074 6865 206e 756d  eout`` - the num
-00013380: 6265 7220 6f66 2073 6563 6f6e 6473 206f  ber of seconds o
-00013390: 6620 5a38 3020 4350 5520 7469 6d65 2061  f Z80 CPU time a
-000133a0: 6674 6572 2077 6869 6368 2074 6f20 6162  fter which to ab
-000133b0: 6f72 7420 7468 650a 2020 7369 6d75 6c61  ort the.  simula
-000133c0: 7465 6420 4c4f 4144 2069 6620 6974 2773  ted LOAD if it's
-000133d0: 2073 7469 6c6c 2069 6e20 7072 6f67 7265   still in progre
-000133e0: 7373 2028 6465 6661 756c 743a 2039 3030  ss (default: 900
-000133f0: 290a 2a20 6060 7472 6163 6560 6020 2d20  ).* ``trace`` - 
-00013400: 7468 6520 6669 6c65 2074 6f20 7768 6963  the file to whic
-00013410: 6820 746f 206c 6f67 2061 6c6c 2069 6e73  h to log all ins
-00013420: 7472 7563 7469 6f6e 7320 6578 6563 7574  tructions execut
-00013430: 6564 2064 7572 696e 6720 7468 650a 2020  ed during the.  
-00013440: 7369 6d75 6c61 7465 6420 4c4f 4144 2028  simulated LOAD (
-00013450: 6465 6661 756c 743a 206e 6f6e 6529 0a0a  default: none)..
-00013460: 5468 6520 6060 696e 2d66 6c61 6773 6060  The ``in-flags``
-00013470: 2070 6172 616d 6574 6572 2069 7320 7468   parameter is th
-00013480: 6520 7375 6d20 6f66 2074 6865 2066 6f6c  e sum of the fol
-00013490: 6c6f 7769 6e67 2076 616c 7565 732c 2063  lowing values, c
-000134a0: 686f 7365 6e20 6163 636f 7264 696e 670a  hosen according.
-000134b0: 746f 2074 6865 2064 6573 6972 6564 2062  to the desired b
-000134c0: 6568 6176 696f 7572 3a0a 0a2a 2031 202d  ehaviour:..* 1 -
-000134d0: 2069 6e74 6572 7072 6574 2027 494e 2041   interpret 'IN A
-000134e0: 2c28 2446 4529 2720 696e 7374 7275 6374  ,($FE)' instruct
-000134f0: 696f 6e73 2069 6e20 7468 6520 6164 6472  ions in the addr
-00013500: 6573 7320 7261 6e67 6520 2434 3030 302d  ess range $4000-
-00013510: 2437 4646 4620 6173 0a20 2072 6561 6469  $7FFF as.  readi
-00013520: 6e67 2074 6865 2074 6170 6520 2862 7920  ng the tape (by 
-00013530: 6465 6661 756c 7420 7468 6579 2061 7265  default they are
-00013540: 2069 676e 6f72 6564 290a 2a20 3220 2d20   ignored).* 2 - 
-00013550: 6967 6e6f 7265 2027 494e 2720 696e 7374  ignore 'IN' inst
-00013560: 7275 6374 696f 6e73 2069 6e20 7468 6520  ructions in the 
-00013570: 6164 6472 6573 7320 7261 6e67 6520 2434  address range $4
-00013580: 3030 302d 2446 4646 4620 2869 2e65 2e20  000-$FFFF (i.e. 
-00013590: 696e 2052 414d 290a 2020 7468 6174 2072  in RAM).  that r
-000135a0: 6561 6420 706f 7274 2024 4645 0a2a 2034  ead port $FE.* 4
-000135b0: 202d 2079 6965 6c64 2061 2073 696d 756c   - yield a simul
-000135c0: 6174 6564 2070 6f72 7420 7265 6164 696e  ated port readin
-000135d0: 6720 7768 656e 2065 7865 6375 7469 6e67  g when executing
-000135e0: 2061 6e20 2749 4e20 722c 2843 2927 2069   an 'IN r,(C)' i
-000135f0: 6e73 7472 7563 7469 6f6e 0a20 2028 6279  nstruction.  (by
-00013600: 2064 6566 6175 6c74 2073 7563 6820 616e   default such an
-00013610: 2069 6e73 7472 7563 7469 6f6e 2061 6c77   instruction alw
-00013620: 6179 7320 7969 656c 6473 2074 6865 2076  ays yields the v
-00013630: 616c 7565 2024 4646 290a 0a42 7920 6465  alue $FF)..By de
-00013640: 6661 756c 742c 2074 6865 2045 4152 2062  fault, the EAR b
-00013650: 6974 2072 6561 6469 6e67 2070 726f 6475  it reading produ
-00013660: 6365 6420 6279 2061 2070 756c 7365 2069  ced by a pulse i
-00013670: 7320 3020 6966 2074 6865 2030 2d62 6173  s 0 if the 0-bas
-00013680: 6564 2069 6e64 6578 0a6f 6620 7468 6520  ed index.of the 
-00013690: 7075 6c73 6520 6973 2065 7665 6e20 2869  pulse is even (i
-000136a0: 2e65 2e20 6669 7273 742c 2074 6869 7264  .e. first, third
-000136b0: 2c20 6669 6674 6820 7075 6c73 6573 2065  , fifth pulses e
-000136c0: 7463 2e29 2c20 6f72 2031 206f 7468 6572  tc.), or 1 other
-000136d0: 7769 7365 2e0a 5468 6973 2063 616e 2062  wise..This can b
-000136e0: 6520 7265 7665 7273 6564 2062 7920 7365  e reversed by se
-000136f0: 7474 696e 6720 6060 706f 6c61 7269 7479  tting ``polarity
-00013700: 3d31 6060 2e20 5275 6e20 2a74 6170 3273  =1``. Run *tap2s
-00013710: 6e61 2e70 792a 2077 6974 6820 7468 650a  na.py* with the.
-00013720: 6060 2d2d 7461 7065 2d61 6e61 6c79 7369  ``--tape-analysi
-00013730: 7360 6020 6f70 7469 6f6e 2074 6f20 7365  s`` option to se
-00013740: 6520 7468 6520 7469 6d69 6e67 7320 616e  e the timings an
-00013750: 6420 4541 5220 6269 7420 7265 6164 696e  d EAR bit readin
-00013760: 6773 206f 6620 7468 650a 7075 6c73 6573  gs of the.pulses
-00013770: 206f 6e20 6120 7461 7065 2e0a 0a2e 2e20   on a tape..... 
-00013780: 5f74 6170 3273 6e61 2d61 6363 656c 6572  _tap2sna-acceler
-00013790: 6174 6f72 733a 0a0a 4163 6365 6c65 7261  ators:..Accelera
-000137a0: 746f 7273 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e  tors.^^^^^^^^^^^
-000137b0: 5e0a 5468 6520 6060 6163 6365 6c65 7261  ^.The ``accelera
-000137c0: 746f 7260 6020 7369 6d75 6c61 7465 6420  tor`` simulated 
-000137d0: 4c4f 4144 2063 6f6e 6669 6775 7261 7469  LOAD configurati
-000137e0: 6f6e 2070 6172 616d 6574 6572 206d 7573  on parameter mus
-000137f0: 7420 6265 2065 6974 6865 7220 610a 636f  t be either a.co
-00013800: 6d6d 612d 7365 7061 7261 7465 6420 6c69  mma-separated li
-00013810: 7374 206f 6620 7370 6563 6966 6963 2061  st of specific a
-00013820: 6363 656c 6572 6174 6f72 206e 616d 6573  ccelerator names
-00013830: 206f 7220 6f6e 6520 6f66 2074 6865 2066   or one of the f
-00013840: 6f6c 6c6f 7769 6e67 0a73 7065 6369 616c  ollowing.special
-00013850: 2076 616c 7565 733a 0a0a 2a20 6060 6175   values:..* ``au
-00013860: 746f 6060 202d 2073 656c 6563 7420 6163  to`` - select ac
-00013870: 6365 6c65 7261 746f 7273 2061 7574 6f6d  celerators autom
-00013880: 6174 6963 616c 6c79 2028 7468 6973 2069  atically (this i
-00013890: 7320 7468 6520 6465 6661 756c 7429 0a2a  s the default).*
-000138a0: 2060 606c 6973 7460 6020 2d20 6c69 7374   ``list`` - list
-000138b0: 2074 6865 2061 6363 656c 6572 6174 6f72   the accelerator
-000138c0: 7320 7573 6564 2064 7572 696e 6720 6120  s used during a 
-000138d0: 7369 6d75 6c61 7465 6420 4c4f 4144 2c20  simulated LOAD, 
-000138e0: 616c 6f6e 6720 7769 7468 2074 6865 0a20  along with the. 
-000138f0: 2068 6974 2f6d 6973 7320 636f 756e 7473   hit/miss counts
-00013900: 2067 656e 6572 6174 6564 2062 7920 7468   generated by th
-00013910: 6520 7461 7065 2d73 616d 706c 696e 6720  e tape-sampling 
-00013920: 6c6f 6f70 2064 6574 6563 746f 720a 2a20  loop detector.* 
-00013930: 6060 6e6f 6e65 6060 202d 2064 6973 6162  ``none`` - disab
-00013940: 6c65 2061 6363 656c 6572 6174 696f 6e3b  le acceleration;
-00013950: 2074 6865 206c 6f61 6469 6e67 2074 696d   the loading tim
-00013960: 6520 666f 7220 6120 6761 6d65 2077 6974  e for a game wit
-00013970: 6820 6120 6375 7374 6f6d 0a20 206c 6f61  h a custom.  loa
-00013980: 6465 7220 7468 6174 2075 7365 7320 616e  der that uses an
-00013990: 2075 6e72 6563 6f67 6e69 7365 6420 7461   unrecognised ta
-000139a0: 7065 2d73 616d 706c 696e 6720 6c6f 6f70  pe-sampling loop
-000139b0: 206d 6179 2062 6520 7265 6475 6365 6420   may be reduced 
-000139c0: 6279 0a20 2073 7065 6369 6679 696e 6720  by.  specifying 
-000139d0: 7468 6973 2076 616c 7565 0a0a 5468 6520  this value..The 
-000139e0: 6f75 7470 7574 2070 726f 6475 6365 6420  output produced 
-000139f0: 6279 2060 6061 6363 656c 6572 6174 6f72  by ``accelerator
-00013a00: 3d6c 6973 7460 6020 6c6f 6f6b 7320 736f  =list`` looks so
-00013a10: 6d65 7468 696e 6720 6c69 6b65 2074 6869  mething like thi
-00013a20: 733a 3a0a 0a20 2041 6363 656c 6572 6174  s::..  Accelerat
-00013a30: 6f72 733a 206d 6963 726f 7370 6865 7265  ors: microsphere
-00013a40: 3a20 3636 3935 3b20 726f 6d3a 2037 3934  : 6695; rom: 794
-00013a50: 3031 333b 206d 6973 7365 733a 2031 392f  013; misses: 19/
-00013a60: 393b 2064 6563 2d61 3a20 3830 3037 3038  9; dec-a: 800708
-00013a70: 2f30 2f32 3234 0a0a 5468 6973 206d 6561  /0/224..This mea
-00013a80: 6e73 2074 6861 743a 0a0a 2a20 7468 6520  ns that:..* the 
-00013a90: 6060 6d69 6372 6f73 7068 6572 6560 6020  ``microsphere`` 
-00013aa0: 616e 6420 6060 726f 6d60 6020 7461 7065  and ``rom`` tape
-00013ab0: 2d73 616d 706c 696e 6720 6c6f 6f70 7320  -sampling loops 
-00013ac0: 7765 7265 2064 6574 6563 7465 642c 2061  were detected, a
-00013ad0: 6e64 2077 6572 650a 2020 656e 7465 7265  nd were.  entere
-00013ae0: 6420 3636 3935 2074 696d 6573 2061 6e64  d 6695 times and
-00013af0: 2037 3934 3031 3320 7469 6d65 7320 7265   794013 times re
-00013b00: 7370 6563 7469 7665 6c79 0a2a 2031 3920  spectively.* 19 
-00013b10: 696e 7374 616e 6365 7320 6f66 2027 494e  instances of 'IN
-00013b20: 4320 4227 206f 7574 7369 6465 2061 2072  C B' outside a r
-00013b30: 6563 6f67 6e69 7365 6420 7461 7065 2d73  ecognised tape-s
-00013b40: 616d 706c 696e 6720 6c6f 6f70 2077 6572  ampling loop wer
-00013b50: 650a 2020 6578 6563 7574 6564 2c20 616e  e.  executed, an
-00013b60: 6420 7468 6520 636f 7272 6573 706f 6e64  d the correspond
-00013b70: 696e 6720 6669 6775 7265 2066 6f72 2027  ing figure for '
-00013b80: 4445 4320 4227 2069 7320 390a 2a20 3830  DEC B' is 9.* 80
-00013b90: 3037 3038 2027 4445 4320 413a 204a 5220  0708 'DEC A: JR 
-00013ba0: 4e5a 2c24 2d31 2720 6465 6c61 7920 6c6f  NZ,$-1' delay lo
-00013bb0: 6f70 7320 7765 7265 2065 6e74 6572 6564  ops were entered
-00013bc0: 2c20 6e6f 2027 4445 4320 413a 204a 5020  , no 'DEC A: JP 
-00013bd0: 4e5a 2c24 2d31 270a 2020 6465 6c61 7920  NZ,$-1'.  delay 
-00013be0: 6c6f 6f70 7320 7765 7265 2065 6e74 6572  loops were enter
-00013bf0: 6564 2c20 616e 6420 3232 3420 696e 7374  ed, and 224 inst
-00013c00: 616e 6365 7320 6f66 2027 4445 4320 4127  ances of 'DEC A'
-00013c10: 206f 7574 7369 6465 2073 7563 6820 6465   outside such de
-00013c20: 6c61 790a 2020 6c6f 6f70 7320 7765 7265  lay.  loops were
-00013c30: 2065 7865 6375 7465 640a 0a53 7065 6369   executed..Speci
-00013c40: 6679 696e 6720 6279 206e 616d 6520 7468  fying by name th
-00013c50: 6520 7479 7065 7320 6f66 2074 6170 652d  e types of tape-
-00013c60: 7361 6d70 6c69 6e67 206c 6f6f 7020 7573  sampling loop us
-00013c70: 6564 2062 7920 6120 6761 6d65 2773 2063  ed by a game's c
-00013c80: 7573 746f 6d0a 6c6f 6164 6572 206d 6179  ustom.loader may
-00013c90: 2072 6564 7563 6520 7468 6520 6c6f 6164   reduce the load
-00013ca0: 696e 6720 7469 6d65 2e20 5468 6520 6e61  ing time. The na
-00013cb0: 6d65 7320 6f66 2074 6865 2061 7661 696c  mes of the avail
-00013cc0: 6162 6c65 2074 6170 652d 7361 6d70 6c69  able tape-sampli
-00013cd0: 6e67 0a6c 6f6f 7020 6163 6365 6c65 7261  ng.loop accelera
-00013ce0: 746f 7273 2061 7265 3a0a 0a2a 2060 6061  tors are:..* ``a
-00013cf0: 6c6b 6174 7261 7a60 6020 2841 6c6b 6174  lkatraz`` (Alkat
-00013d00: 7261 7a29 0a2a 2060 6061 6c6b 6174 7261  raz).* ``alkatra
-00013d10: 7a2d 3035 6060 2028 4974 616c 7920 3139  z-05`` (Italy 19
-00013d20: 3930 2c20 4974 616c 7920 3139 3930 202d  90, Italy 1990 -
-00013d30: 2057 696e 6e65 7273 2045 6469 7469 6f6e   Winners Edition
-00013d40: 290a 2a20 6060 616c 6b61 7472 617a 2d30  ).* ``alkatraz-0
-00013d50: 3960 6020 2849 7461 6c79 2031 3939 302c  9`` (Italy 1990,
-00013d60: 2049 7461 6c79 2031 3939 3020 2d20 5769   Italy 1990 - Wi
-00013d70: 6e6e 6572 7320 4564 6974 696f 6e29 0a2a  nners Edition).*
-00013d80: 2060 6061 6c6b 6174 7261 7a2d 3061 6060   ``alkatraz-0a``
-00013d90: 2028 7661 7269 6f75 7320 6761 6d65 7320   (various games 
-00013da0: 7075 626c 6973 6865 6420 6279 2055 2e53  published by U.S
-00013db0: 2e20 476f 6c64 290a 2a20 6060 616c 6b61  . Gold).* ``alka
-00013dc0: 7472 617a 2d30 6260 6020 2846 6173 7420  traz-0b`` (Fast 
-00013dd0: 276e 2720 4675 7269 6f75 7329 0a2a 2060  'n' Furious).* `
-00013de0: 6061 6c6b 6174 7261 7a32 6060 2028 416c  `alkatraz2`` (Al
-00013df0: 6b61 7472 617a 2032 290a 2a20 6060 616c  katraz 2).* ``al
-00013e00: 7465 726e 6174 6976 6560 6020 2846 6972  ternative`` (Fir
-00013e10: 656d 616e 2053 616d 2c20 4875 786c 6579  eman Sam, Huxley
-00013e20: 2050 6967 290a 2a20 6060 616c 7465 726e   Pig).* ``altern
-00013e30: 6174 6976 6532 6060 2028 4b65 6e74 7563  ative2`` (Kentuc
-00013e40: 6b79 2052 6163 696e 6729 0a2a 2060 6061  ky Racing).* ``a
-00013e50: 6e74 6972 6f6d 6060 2028 426f 7865 290a  ntirom`` (Boxe).
-00013e60: 2a20 6060 626c 6565 706c 6f61 6460 6020  * ``bleepload`` 
-00013e70: 2846 6972 6562 6972 6420 426c 6565 704c  (Firebird BleepL
-00013e80: 6f61 6429 0a2a 2060 6062 6f67 7573 6c61  oad).* ``bogusla
-00013e90: 772d 6a75 7a61 6060 2028 4575 726f 2042  w-juza`` (Euro B
-00013ea0: 697a 6e65 7329 0a2a 2060 6062 756c 6c64  iznes).* ``bulld
-00013eb0: 6f67 6060 2028 5269 6765 6c27 7320 5265  og`` (Rigel's Re
-00013ec0: 7665 6e67 6529 0a2a 2060 6063 726c 6060  venge).* ``crl``
-00013ed0: 2028 4261 6c6c 2042 7265 616b 6572 2c20   (Ball Breaker, 
-00013ee0: 4261 6c6c 6272 6561 6b65 7220 4949 290a  Ballbreaker II).
-00013ef0: 2a20 6060 6372 6c32 6060 2028 5465 7272  * ``crl2`` (Terr
-00013f00: 6168 6177 6b73 290a 2a20 6060 6372 6c33  ahawks).* ``crl3
-00013f10: 6060 2028 4f69 6e6b 290a 2a20 6060 6372  `` (Oink).* ``cr
-00013f20: 6c34 6060 2028 4665 6465 7261 7469 6f6e  l4`` (Federation
-00013f30: 290a 2a20 6060 6379 6265 786c 6162 6060  ).* ``cybexlab``
-00013f40: 2028 3137 2e31 312e 3139 3839 2c20 4265   (17.11.1989, Be
-00013f50: 6c65 676f 7374 2c20 5374 6172 666f 7829  legost, Starfox)
-00013f60: 0a2a 2060 6064 2d61 6e64 2d68 6060 2028  .* ``d-and-h`` (
-00013f70: 4d75 6c74 692d 506c 6179 6572 2053 6f63  Multi-Player Soc
-00013f80: 6365 7220 4d61 6e61 6765 7229 0a2a 2060  cer Manager).* `
-00013f90: 6064 656c 7068 696e 6560 6020 285a 616b  `delphine`` (Zak
-00013fa0: 6c69 6174 7920 7ac3 a16d 6f6b 2070 726f  liaty z..mok pro
-00013fb0: 6772 616d c3a1 746f 726f 7629 0a2a 2060  gram..torov).* `
-00013fc0: 6064 6573 6967 6e2d 6465 7369 676e 6060  `design-design``
-00013fd0: 2028 7661 7269 6f75 7320 6761 6d65 7320   (various games 
-00013fe0: 7075 626c 6973 6865 6420 6279 2044 6573  published by Des
-00013ff0: 6967 6e20 4465 7369 676e 2053 6f66 7477  ign Design Softw
-00014000: 6172 6529 0a2a 2060 6064 6967 6974 616c  are).* ``digital
-00014010: 2d69 6e74 6567 7261 7469 6f6e 6060 2028  -integration`` (
-00014020: 4469 6769 7461 6c20 496e 7465 6772 6174  Digital Integrat
-00014030: 696f 6e29 0a2a 2060 6064 696e 616c 6f61  ion).* ``dinaloa
-00014040: 6460 6020 2844 696e 616c 6f61 6429 0a2a  d`` (Dinaload).*
-00014050: 2060 6065 726e 6965 7761 7265 6060 2028   ``ernieware`` (
-00014060: 5468 6520 4576 6f6c 7574 696f 6e2c 2047  The Evolution, G
-00014070: 6f6c 656d 290a 2a20 6060 6761 7267 6f79  olem).* ``gargoy
-00014080: 6c65 3260 6020 2876 6172 696f 7573 2067  le2`` (various g
-00014090: 616d 6573 2063 7265 6174 6564 206f 7220  ames created or 
-000140a0: 7075 626c 6973 6865 6420 6279 2047 6172  published by Gar
-000140b0: 676f 796c 6520 4761 6d65 7329 0a2a 2060  goyle Games).* `
-000140c0: 6067 7265 6d6c 696e 6060 2028 7661 7269  `gremlin`` (vari
-000140d0: 6f75 7320 6761 6d65 7320 7075 626c 6973  ous games publis
-000140e0: 6865 6420 6279 2047 7265 6d6c 696e 2047  hed by Gremlin G
-000140f0: 7261 7068 6963 7329 0a2a 2060 6067 7265  raphics).* ``gre
-00014100: 6d6c 696e 3260 6020 2853 7570 6572 2043  mlin2`` (Super C
-00014110: 6172 7329 0a2a 2060 6068 6f75 7365 6e6b  ars).* ``housenk
-00014120: 6160 6020 2848 6f75 7365 6e6b 6129 0a2a  a`` (Housenka).*
-00014130: 2060 606d 6963 726f 7072 6f73 6560 6020   ``microprose`` 
-00014140: 2846 2d31 3520 5374 7269 6b65 2045 6167  (F-15 Strike Eag
-00014150: 6c65 290a 2a20 6060 6d69 6372 6f73 7068  le).* ``microsph
-00014160: 6572 6560 6020 2842 6163 6b20 746f 2053  ere`` (Back to S
-00014170: 6b6f 6f6c 2c20 436f 6e74 6163 7420 5361  kool, Contact Sa
-00014180: 6d20 4372 7569 7365 2c20 536b 6f6f 6c20  m Cruise, Skool 
-00014190: 4461 7a65 2c20 536b 7920 5261 6e67 6572  Daze, Sky Ranger
-000141a0: 290a 2a20 6060 6d69 6372 6f2d 7374 796c  ).* ``micro-styl
-000141b0: 6560 6020 2858 656e 6f70 686f 6265 290a  e`` (Xenophobe).
-000141c0: 2a20 6060 6d69 7272 6f72 736f 6674 6060  * ``mirrorsoft``
-000141d0: 2028 4163 7469 6f6e 2052 6566 6c65 7829   (Action Reflex)
-000141e0: 0a2a 2060 6070 616c 6173 6060 2028 4261  .* ``palas`` (Ba
-000141f0: 6420 4e69 6768 7429 0a2a 2060 6070 6175  d Night).* ``pau
-00014200: 6c2d 6f77 656e 7360 6020 2850 6175 6c20  l-owens`` (Paul 
-00014210: 4f77 656e 7320 5072 6f74 6563 7469 6f6e  Owens Protection
-00014220: 2053 7973 7465 6d29 0a2a 2060 6072 6178   System).* ``rax
-00014230: 6f66 7460 6020 2850 6973 6b77 6f72 6b73  oft`` (Piskworks
-00014240: 2c20 506f 6472 617a 2034 290a 2a20 6060  , Podraz 4).* ``
-00014250: 7265 616c 7469 6d65 6060 2028 5374 6172  realtime`` (Star
-00014260: 7374 7269 6b65 2049 4929 0a2a 2060 6072  strike II).* ``r
-00014270: 6f6d 6060 2028 616e 7920 6c6f 6164 6572  om`` (any loader
-00014280: 2077 686f 7365 2073 616d 706c 696e 6720   whose sampling 
-00014290: 6c6f 6f70 2069 7320 7468 6520 7361 6d65  loop is the same
-000142a0: 2061 7320 7468 6520 524f 4d27 7329 0a2a   as the ROM's).*
-000142b0: 2060 6073 6561 7263 682d 6c6f 6164 6572   ``search-loader
-000142c0: 6060 2028 5365 6172 6368 204c 6f61 6465  `` (Search Loade
-000142d0: 7229 0a2a 2060 6073 696c 7665 7262 6972  r).* ``silverbir
-000142e0: 6460 6020 284f 6c6c 6920 2620 4c69 7373  d`` (Olli & Liss
-000142f0: 6120 4949 3a20 4861 6c6c 6f77 6565 6e29  a II: Halloween)
-00014300: 0a2a 2060 6073 6f66 7477 6172 652d 7072  .* ``software-pr
-00014310: 6f6a 6563 7473 6060 2028 4243 2773 2051  ojects`` (BC's Q
-00014320: 7565 7374 2066 6f72 2054 6972 6573 2c20  uest for Tires, 
-00014330: 4c6f 6465 2052 756e 6e65 7229 0a2a 2060  Lode Runner).* `
-00014340: 6073 7061 726b 6c65 7273 6060 2028 4261  `sparklers`` (Ba
-00014350: 7267 6169 6e20 4261 7365 6d65 6e74 2c20  rgain Basement, 
-00014360: 466c 756e 6b79 290a 2a20 6060 7370 6565  Flunky).* ``spee
-00014370: 646c 6f63 6b60 6020 2853 7065 6564 6c6f  dlock`` (Speedlo
-00014380: 636b 202d 2061 6c6c 2076 6572 7369 6f6e  ck - all version
-00014390: 7329 0a2a 2060 6073 757a 792d 736f 6674  s).* ``suzy-soft
-000143a0: 6060 2028 4269 6720 5472 6f75 626c 652c  `` (Big Trouble,
-000143b0: 204a 6f65 2042 616e 6b65 722c 2054 6865   Joe Banker, The
-000143c0: 2044 7269 6e6b 6572 290a 2a20 6060 7375   Drinker).* ``su
-000143d0: 7a79 2d73 6f66 7432 6060 2028 5765 7374  zy-soft2`` (West
-000143e0: 6572 6e20 4769 726c 290a 2a20 6060 7469  ern Girl).* ``ti
-000143f0: 6e79 6060 2028 496c 2043 6f62 7261 2064  ny`` (Il Cobra d
-00014400: 6920 4372 6973 7461 6c6c 6f2c 204e 6567  i Cristallo, Neg
-00014410: 7920 6120 4e79 6572 6f2c 2050 6861 6e74  y a Nyero, Phant
-00014420: 6f6d 6173 612c 2061 6e64 206f 7468 6572  omasa, and other
-00014430: 7329 0a2a 2060 6075 732d 676f 6c64 6060  s).* ``us-gold``
-00014440: 2028 4761 756e 746c 6574 2049 4929 0a2a   (Gauntlet II).*
-00014450: 2060 6077 6569 7264 2d73 6369 656e 6365   ``weird-science
-00014460: 6060 2028 466c 6173 6820 4265 6572 2054  `` (Flash Beer T
-00014470: 7269 6c6f 6779 2c20 4768 6f73 7420 4361  rilogy, Ghost Ca
-00014480: 7374 6c65 732c 2054 562d 4761 6d65 290a  stles, TV-Game).
-00014490: 0a2e 2e20 5f74 6170 3273 6e61 2d6c 6f61  ... _tap2sna-loa
-000144a0: 643a 0a0a 4c4f 4144 2063 6f6d 6d61 6e64  d:..LOAD command
-000144b0: 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a 5468  .^^^^^^^^^^^^.Th
-000144c0: 6520 6060 6c6f 6164 6060 2073 696d 756c  e ``load`` simul
-000144d0: 6174 6564 204c 4f41 4420 636f 6e66 6967  ated LOAD config
-000144e0: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
-000144f0: 7220 6d61 7920 6265 2075 7365 6420 746f  r may be used to
-00014500: 2073 7065 6369 6679 2061 6e0a 616c 7465   specify an.alte
-00014510: 726e 6174 6976 6520 636f 6d6d 616e 6420  rnative command 
-00014520: 6c69 6e65 2074 6f20 6c6f 6164 2074 6865  line to load the
-00014530: 2074 6170 6520 696e 2063 6173 6573 2077   tape in cases w
-00014540: 6865 7265 206e 6569 7468 6572 2027 4c4f  here neither 'LO
-00014550: 4144 2022 2227 206e 6f72 0a27 4c4f 4144  AD ""' nor.'LOAD
-00014560: 2022 2243 4f44 4527 2077 6f72 6b73 2e20   ""CODE' works. 
-00014570: 4974 7320 7661 6c75 6520 6973 2061 2073  Its value is a s
-00014580: 7061 6365 2d73 6570 6172 6174 6564 206c  pace-separated l
-00014590: 6973 7420 6f66 2027 776f 7264 7327 2028  ist of 'words' (
-000145a0: 6120 2777 6f72 6427 0a62 6569 6e67 2061  a 'word'.being a
-000145b0: 2073 6571 7565 6e63 6520 6f66 2061 6e79   sequence of any
-000145c0: 2063 6861 7261 6374 6572 7320 6f74 6865   characters othe
-000145d0: 7220 7468 616e 2073 7061 6365 292c 2065  r than space), e
-000145e0: 6163 6820 6f66 2077 6869 6368 2069 7320  ach of which is 
-000145f0: 6272 6f6b 656e 0a64 6f77 6e20 696e 746f  broken.down into
-00014600: 2061 2073 6571 7565 6e63 6520 6f66 206f   a sequence of o
-00014610: 6e65 206f 7220 6d6f 7265 206b 6579 7072  ne or more keypr
-00014620: 6573 7365 732e 2049 6620 6120 776f 7264  esses. If a word
-00014630: 2063 6f6e 7461 696e 7320 7468 6520 272b   contains the '+
-00014640: 270a 7379 6d62 6f6c 2c20 7468 6520 746f  '.symbol, the to
-00014650: 6b65 6e73 2069 7420 7365 7061 7261 7465  kens it separate
-00014660: 7320 6172 6520 636f 6e76 6572 7465 6420  s are converted 
-00014670: 696e 746f 206b 6579 7072 6573 7365 7320  into keypresses 
-00014680: 6d61 6465 0a73 696d 756c 7461 6e65 6f75  made.simultaneou
-00014690: 736c 792e 2049 6620 6120 776f 7264 206d  sly. If a word m
-000146a0: 6174 6368 6573 2061 2042 4153 4943 2074  atches a BASIC t
-000146b0: 6f6b 656e 2c20 7468 6520 636f 7272 6573  oken, the corres
-000146c0: 706f 6e64 696e 6720 7365 7175 656e 6365  ponding sequence
-000146d0: 206f 660a 6b65 7970 7265 7373 6573 2074   of.keypresses t
-000146e0: 6f20 7072 6f64 7563 6520 7468 6174 2074  o produce that t
-000146f0: 6f6b 656e 2061 7265 2073 7562 7374 6974  oken are substit
-00014700: 7574 6564 2e20 4f74 6865 7277 6973 652c  uted. Otherwise,
-00014710: 2065 6163 6820 6368 6172 6163 7465 7220   each character 
-00014720: 696e 0a74 6865 2077 6f72 6420 6973 2063  in.the word is c
-00014730: 6f6e 7665 7274 6564 2069 6e64 6976 6964  onverted individ
-00014740: 7561 6c6c 7920 696e 746f 2074 6865 2061  ually into the a
-00014750: 7070 726f 7072 6961 7465 206b 6579 7072  ppropriate keypr
-00014760: 6573 7365 732e 0a0a 5468 6520 666f 6c6c  esses...The foll
-00014770: 6f77 696e 6720 7370 6563 6961 6c20 746f  owing special to
-00014780: 6b65 6e73 2061 7265 2061 6c73 6f20 7265  kens are also re
-00014790: 636f 676e 6973 6564 3a0a 0a2a 2060 6043  cognised:..* ``C
-000147a0: 5360 6020 2d20 4341 5053 2053 4849 4654  S`` - CAPS SHIFT
-000147b0: 0a2a 2060 6053 5360 6020 2d20 5359 4d42  .* ``SS`` - SYMB
-000147c0: 4f4c 2053 4849 4654 0a2a 2060 6053 5041  OL SHIFT.* ``SPA
-000147d0: 4345 6060 202d 2053 5041 4345 0a2a 2060  CE`` - SPACE.* `
-000147e0: 6045 4e54 4552 6060 202d 2045 4e54 4552  `ENTER`` - ENTER
-000147f0: 0a2a 2060 6044 4f57 4e60 6020 2d20 4375  .* ``DOWN`` - Cu
-00014800: 7273 6f72 2064 6f77 6e20 2827 4353 2b36  rsor down ('CS+6
-00014810: 2729 0a2a 2060 6047 4f54 4f60 6020 2d20  ').* ``GOTO`` - 
-00014820: 474f 2054 4f20 2827 6727 290a 2a20 6060  GO TO ('g').* ``
-00014830: 474f 5355 4260 6020 2d20 474f 2053 5542  GOSUB`` - GO SUB
-00014840: 2028 2768 2729 0a2a 2060 6044 4546 464e   ('h').* ``DEFFN
-00014850: 6060 202d 2044 4546 2046 4e20 2827 4353  `` - DEF FN ('CS
-00014860: 2b53 5320 5353 2b31 2729 0a2a 2060 604f  +SS SS+1').* ``O
-00014870: 5045 4e23 6060 202d 204f 5045 4e20 2320  PEN#`` - OPEN # 
-00014880: 2827 4353 2b53 5320 5353 2b34 2729 0a2a  ('CS+SS SS+4').*
-00014890: 2060 6043 4c4f 5345 2360 6020 2d20 434c   ``CLOSE#`` - CL
-000148a0: 4f53 4520 2320 2827 4353 2b53 5320 5353  OSE # ('CS+SS SS
-000148b0: 2b35 2729 0a2a 2060 6050 433d 6164 6472  +5').* ``PC=addr
-000148c0: 6573 7360 6020 2d20 5374 6f70 2074 6865  ess`` - Stop the
-000148d0: 206b 6579 626f 6172 6420 696e 7075 7420   keyboard input 
-000148e0: 7369 6d75 6c61 7469 6f6e 2061 7420 7468  simulation at th
-000148f0: 6973 2061 6464 7265 7373 0a0a 5468 6520  is address..The 
-00014900: 6060 5043 3d61 6464 7265 7373 6060 2074  ``PC=address`` t
-00014910: 6f6b 656e 2c20 6966 2070 7265 7365 6e74  oken, if present
-00014920: 2c20 6d75 7374 2061 7070 6561 7220 6c61  , must appear la
-00014930: 7374 2e20 5468 6520 6465 6661 756c 7420  st. The default 
-00014940: 6164 6472 6573 7320 6973 0a65 6974 6865  address is.eithe
-00014950: 7220 3078 3036 3035 2028 7768 656e 2061  r 0x0605 (when a
-00014960: 2034 384b 2053 7065 6374 7275 6d20 6973   48K Spectrum is
-00014970: 2062 6569 6e67 2073 696d 756c 6174 6564   being simulated
-00014980: 2920 6f72 2030 7831 3342 4520 286f 6e20  ) or 0x13BE (on 
-00014990: 6120 3132 384b 0a53 7065 6374 7275 6d29  a 128K.Spectrum)
-000149a0: 2e20 5468 6520 7369 6d75 6c61 7465 6420  . The simulated 
-000149b0: 4c4f 4144 2062 6567 696e 7320 6174 2074  LOAD begins at t
-000149c0: 6869 7320 6164 6472 6573 732e 0a0a 6060  his address...``
-000149d0: 454e 5445 5260 6020 6973 2061 7574 6f6d  ENTER`` is autom
-000149e0: 6174 6963 616c 6c79 2061 7070 656e 6465  atically appende
-000149f0: 6420 746f 2074 6865 2063 6f6d 6d61 6e64  d to the command
-00014a00: 206c 696e 6520 6966 206e 6f74 2061 6c72   line if not alr
-00014a10: 6561 6479 2070 7265 7365 6e74 2e0a 0a46  eady present...F
-00014a20: 6f72 2065 7861 6d70 6c65 2c20 7468 6520  or example, the 
-00014a30: 6060 6c6f 6164 6060 2070 6172 616d 6574  ``load`` paramet
-00014a40: 6572 206d 6179 2062 6520 7365 7420 746f  er may be set to
-00014a50: 3a3a 0a0a 2020 434c 4541 5220 3334 3939  ::..  CLEAR 3499
-00014a60: 393a 204c 4f41 4420 2222 2043 4f44 4520  9: LOAD "" CODE 
-00014a70: 3a20 5241 4e44 4f4d 495a 4520 5553 5220  : RANDOMIZE USR 
-00014a80: 3335 3030 300a 0a4e 6f74 6520 7468 6174  35000..Note that
-00014a90: 2074 6865 2073 7061 6365 7320 6172 6f75   the spaces arou
-00014aa0: 6e64 2060 6043 4c45 4152 6060 2c20 6060  nd ``CLEAR``, ``
-00014ab0: 4c4f 4144 6060 2c20 6060 434f 4445 6060  LOAD``, ``CODE``
-00014ac0: 2c20 6060 5241 4e44 4f4d 495a 4560 6020  , ``RANDOMIZE`` 
-00014ad0: 616e 640a 6060 5553 5260 6020 6172 6520  and.``USR`` are 
-00014ae0: 7265 7175 6972 6564 2069 6e20 6f72 6465  required in orde
-00014af0: 7220 666f 7220 7468 656d 2074 6f20 6265  r for them to be
-00014b00: 2072 6563 6f67 6e69 7365 6420 6173 2042   recognised as B
-00014b10: 4153 4943 2074 6f6b 656e 732e 0a0a 2e2e  ASIC tokens.....
-00014b20: 205f 7461 7032 736e 612d 636f 6e66 3a0a   _tap2sna-conf:.
-00014b30: 0a43 6f6e 6669 6775 7261 7469 6f6e 0a5e  .Configuration.^
-00014b40: 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 0a60 7461  ^^^^^^^^^^^^.`ta
-00014b50: 7032 736e 612e 7079 6020 7769 6c6c 2072  p2sna.py` will r
-00014b60: 6561 6420 636f 6e66 6967 7572 6174 696f  ead configuratio
-00014b70: 6e20 6672 6f6d 2061 2066 696c 6520 6e61  n from a file na
-00014b80: 6d65 6420 6073 6b6f 6f6c 6b69 742e 696e  med `skoolkit.in
-00014b90: 6960 2069 6e20 7468 650a 6375 7272 656e  i` in the.curren
-00014ba0: 7420 776f 726b 696e 6720 6469 7265 6374  t working direct
-00014bb0: 6f72 7920 6f72 2069 6e20 607e 2f2e 736b  ory or in `~/.sk
-00014bc0: 6f6f 6c6b 6974 602c 2069 6620 7072 6573  oolkit`, if pres
-00014bd0: 656e 742e 2054 6865 2072 6563 6f67 6e69  ent. The recogni
-00014be0: 7365 640a 636f 6e66 6967 7572 6174 696f  sed.configuratio
-00014bf0: 6e20 7061 7261 6d65 7465 7273 2061 7265  n parameters are
-00014c00: 3a0a 0a2a 2060 6044 6566 6175 6c74 536e  :..* ``DefaultSn
-00014c10: 6170 7368 6f74 466f 726d 6174 6060 202d  apshotFormat`` -
-00014c20: 2074 6865 2066 6f72 6d61 7420 6f66 2074   the format of t
-00014c30: 6865 2073 6e61 7073 686f 7420 7772 6974  he snapshot writ
-00014c40: 7465 6e20 7768 656e 206e 6f20 6f75 7470  ten when no outp
-00014c50: 7574 0a20 2073 6e61 7073 686f 7420 6172  ut.  snapshot ar
-00014c60: 6775 6d65 6e74 2069 7320 7370 6563 6966  gument is specif
-00014c70: 6965 643b 2076 616c 6964 2076 616c 7565  ied; valid value
-00014c80: 7320 6172 6520 6060 7a38 3060 6020 2874  s are ``z80`` (t
-00014c90: 6865 2064 6566 6175 6c74 2920 616e 640a  he default) and.
-00014ca0: 2020 6060 737a 7860 600a 2a20 6060 5472    ``szx``.* ``Tr
-00014cb0: 6163 654c 696e 6560 6020 2d20 7468 6520  aceLine`` - the 
-00014cc0: 666f 726d 6174 206f 6620 6561 6368 206c  format of each l
-00014cd0: 696e 6520 696e 2074 6865 2074 7261 6365  ine in the trace
-00014ce0: 206c 6f67 2066 696c 6520 666f 7220 6120   log file for a 
-00014cf0: 7369 6d75 6c61 7465 640a 2020 4c4f 4144  simulated.  LOAD
-00014d00: 2028 6465 6661 756c 743a 2060 6024 7b70   (default: ``${p
-00014d10: 633a 3034 587d 207b 697d 6060 290a 2a20  c:04X} {i}``).* 
-00014d20: 6060 5472 6163 654f 7065 7261 6e64 6060  ``TraceOperand``
-00014d30: 202d 2074 6865 2070 7265 6669 782c 2062   - the prefix, b
-00014d40: 7974 6520 666f 726d 6174 2c20 616e 6420  yte format, and 
-00014d50: 776f 7264 2066 6f72 6d61 7420 666f 7220  word format for 
-00014d60: 7468 6520 6e75 6d65 7269 630a 2020 6f70  the numeric.  op
-00014d70: 6572 616e 6473 206f 6620 696e 7374 7275  erands of instru
-00014d80: 6374 696f 6e73 2069 6e20 7468 6520 7472  ctions in the tr
-00014d90: 6163 6520 6c6f 6720 6669 6c65 2066 6f72  ace log file for
-00014da0: 2061 2073 696d 756c 6174 6564 204c 4f41   a simulated LOA
-00014db0: 442c 0a20 2073 6570 6172 6174 6564 2062  D,.  separated b
-00014dc0: 7920 636f 6d6d 6173 2028 6465 6661 756c  y commas (defaul
-00014dd0: 743a 2060 6024 2c30 3258 2c30 3458 6060  t: ``$,02X,04X``
-00014de0: 293b 2074 6865 2062 7974 6520 616e 6420  ); the byte and 
-00014df0: 776f 7264 2066 6f72 6d61 7473 2061 7265  word formats are
-00014e00: 0a20 2073 7461 6e64 6172 6420 5079 7468  .  standard Pyth
-00014e10: 6f6e 2066 6f72 6d61 7420 7370 6563 6966  on format specif
-00014e20: 6965 7273 2066 6f72 206e 756d 6572 6963  iers for numeric
-00014e30: 2076 616c 7565 732c 2061 6e64 2064 6566   values, and def
-00014e40: 6175 6c74 2074 6f20 656d 7074 790a 2020  ault to empty.  
-00014e50: 7374 7269 6e67 7320 6966 206e 6f74 2073  strings if not s
-00014e60: 7570 706c 6965 640a 0a60 6054 7261 6365  upplied..``Trace
-00014e70: 4c69 6e65 6060 2069 7320 6120 7374 616e  Line`` is a stan
-00014e80: 6461 7264 2050 7974 686f 6e20 666f 726d  dard Python form
-00014e90: 6174 2073 7472 696e 6720 7468 6174 2072  at string that r
-00014ea0: 6563 6f67 6e69 7365 7320 7468 6520 666f  ecognises the fo
-00014eb0: 6c6c 6f77 696e 670a 7265 706c 6163 656d  llowing.replacem
-00014ec0: 656e 7420 6669 656c 6473 3a0a 0a2a 2060  ent fields:..* `
-00014ed0: 6069 6060 202d 2074 6865 2063 7572 7265  `i`` - the curre
-00014ee0: 6e74 2069 6e73 7472 7563 7469 6f6e 0a2a  nt instruction.*
-00014ef0: 2060 6070 6360 6020 2d20 7468 6520 6164   ``pc`` - the ad
-00014f00: 6472 6573 7320 6f66 2074 6865 2063 7572  dress of the cur
-00014f10: 7265 6e74 2069 6e73 7472 7563 7469 6f6e  rent instruction
-00014f20: 2028 7072 6f67 7261 6d20 636f 756e 7465   (program counte
-00014f30: 7229 0a2a 2060 6072 5b58 5d60 6020 2d20  r).* ``r[X]`` - 
-00014f40: 7468 6520 2758 2720 7265 6769 7374 6572  the 'X' register
-00014f50: 2028 7365 6520 6265 6c6f 7729 0a2a 2060   (see below).* `
-00014f60: 6074 6060 202d 2074 6865 2063 7572 7265  `t`` - the curre
-00014f70: 6e74 2074 696d 6573 7461 6d70 0a0a 5468  nt timestamp..Th
-00014f80: 6520 7265 6769 7374 6572 206e 616d 6520  e register name 
-00014f90: 6060 5860 6020 696e 2060 6072 5b58 5d60  ``X`` in ``r[X]`
-00014fa0: 6020 6d75 7374 2062 6520 6f6e 6520 6f66  ` must be one of
-00014fb0: 2074 6865 2066 6f6c 6c6f 7769 6e67 3a3a   the following::
-00014fc0: 0a0a 2020 6120 6220 6320 6420 6520 6620  ..  a b c d e f 
-00014fd0: 6820 6c20 6263 2064 6520 686c 0a20 205e  h l bc de hl.  ^
-00014fe0: 6120 5e62 205e 6320 5e64 205e 6520 5e66  a ^b ^c ^d ^e ^f
-00014ff0: 205e 6820 5e6c 205e 6263 205e 6465 205e   ^h ^l ^bc ^de ^
-00015000: 686c 0a20 2069 7820 6978 6820 6978 6c20  hl.  ix ixh ixl 
-00015010: 6979 2069 7968 2069 796c 0a20 2069 2072  iy iyh iyl.  i r
-00015020: 2073 700a 0a54 6865 206e 616d 6573 2074   sp..The names t
-00015030: 6861 7420 6265 6769 6e20 7769 7468 2060  hat begin with `
-00015040: 605e 6060 2064 656e 6f74 6520 7468 6520  `^`` denote the 
-00015050: 7368 6164 6f77 2072 6567 6973 7465 7273  shadow registers
-00015060: 2e0a 0a54 6865 2063 7572 7265 6e74 2074  ...The current t
-00015070: 696d 6573 7461 6d70 2028 6060 7460 6029  imestamp (``t``)
-00015080: 2069 7320 7468 6520 6e75 6d62 6572 206f   is the number o
-00015090: 6620 542d 7374 6174 6573 2074 6861 7420  f T-states that 
-000150a0: 6861 7665 2065 6c61 7073 6564 2073 696e  have elapsed sin
-000150b0: 6365 0a74 6865 2073 7461 7274 206f 6620  ce.the start of 
-000150c0: 7468 6520 7369 6d75 6c61 7469 6f6e 2c20  the simulation, 
-000150d0: 6163 636f 7264 696e 6720 746f 2074 6865  according to the
-000150e0: 2073 696d 756c 6174 6f72 2773 2069 6e74   simulator's int
-000150f0: 6572 6e61 6c20 636c 6f63 6b2e 2049 6e0a  ernal clock. In.
-00015100: 6f72 6465 7220 746f 206d 6169 6e74 6169  order to maintai
-00015110: 6e20 7379 6e63 6872 6f6e 6973 6174 696f  n synchronisatio
-00015120: 6e20 7769 7468 2074 6865 2074 6170 6520  n with the tape 
-00015130: 6265 696e 6720 6c6f 6164 6564 2c20 7468  being loaded, th
-00015140: 6520 7369 6d75 6c61 746f 7227 730a 636c  e simulator's.cl
-00015150: 6f63 6b20 6973 2061 646a 7573 7465 6420  ock is adjusted 
-00015160: 746f 206d 6174 6368 2074 6865 2074 696d  to match the tim
-00015170: 6573 7461 6d70 206f 6620 7468 6520 6669  estamp of the fi
-00015180: 7273 7420 7075 6c73 6520 696e 2065 6163  rst pulse in eac
-00015190: 6820 626c 6f63 6b20 2861 730a 7368 6f77  h block (as.show
-000151a0: 6e20 6279 2074 6865 2060 602d 2d74 6170  n by the ``--tap
-000151b0: 652d 616e 616c 7973 6973 6060 206f 7074  e-analysis`` opt
-000151c0: 696f 6e29 2077 6865 6e20 7468 6174 2062  ion) when that b
-000151d0: 6c6f 636b 2069 7320 7265 6163 6865 642e  lock is reached.
-000151e0: 2028 5468 650a 7369 6d75 6c61 746f 7227   (The.simulator'
-000151f0: 7320 636c 6f63 6b20 6d61 7920 6174 2074  s clock may at t
-00015200: 696d 6573 2062 6563 6f6d 6520 6465 7379  imes become desy
-00015210: 6e63 6872 6f6e 6973 6564 2077 6974 6820  nchronised with 
-00015220: 7468 6520 7461 7065 2062 6563 6175 7365  the tape because
-00015230: 2c20 6279 0a64 6566 6175 6c74 2c20 7468  , by.default, th
-00015240: 6520 7461 7065 2069 7320 7061 7573 6564  e tape is paused
-00015250: 2062 6574 7765 656e 2062 6c6f 636b 732c   between blocks,
-00015260: 2061 6e64 2072 6573 756d 6564 2077 6865   and resumed whe
-00015270: 6e20 706f 7274 2032 3534 2069 7320 7265  n port 254 is re
-00015280: 6164 2e29 0a0a 436f 6e66 6967 7572 6174  ad.)..Configurat
-00015290: 696f 6e20 7061 7261 6d65 7465 7273 206d  ion parameters m
-000152a0: 7573 7420 6170 7065 6172 2069 6e20 6120  ust appear in a 
-000152b0: 6060 5b74 6170 3273 6e61 5d60 6020 7365  ``[tap2sna]`` se
-000152c0: 6374 696f 6e2e 2046 6f72 2065 7861 6d70  ction. For examp
-000152d0: 6c65 2c0a 746f 206d 616b 6520 6074 6170  le,.to make `tap
-000152e0: 3273 6e61 2e70 7960 2077 7269 7465 2069  2sna.py` write i
-000152f0: 6e73 7472 7563 7469 6f6e 2061 6464 7265  nstruction addre
-00015300: 7373 6573 2061 6e64 206f 7065 7261 6e64  sses and operand
-00015310: 7320 696e 2061 2074 7261 6365 206c 6f67  s in a trace log
-00015320: 0a66 696c 6520 696e 2064 6563 696d 616c  .file in decimal
-00015330: 2066 6f72 6d61 7420 6279 2064 6566 6175   format by defau
-00015340: 6c74 2c20 6164 6420 7468 6520 666f 6c6c  lt, add the foll
-00015350: 6f77 696e 6720 7365 6374 696f 6e20 746f  owing section to
-00015360: 0a60 736b 6f6f 6c6b 6974 2e69 6e69 603a  .`skoolkit.ini`:
-00015370: 3a0a 0a20 205b 7461 7032 736e 615d 0a20  :..  [tap2sna]. 
-00015380: 2054 7261 6365 4c69 6e65 3d7b 7063 3a30   TraceLine={pc:0
-00015390: 357d 207b 697d 0a20 2054 7261 6365 4f70  5} {i}.  TraceOp
-000153a0: 6572 616e 643d 0a0a 436f 6e66 6967 7572  erand=..Configur
-000153b0: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
-000153c0: 206d 6179 2061 6c73 6f20 6265 2073 6574   may also be set
-000153d0: 206f 6e20 7468 6520 636f 6d6d 616e 6420   on the command 
-000153e0: 6c69 6e65 2062 7920 7573 696e 6720 7468  line by using th
-000153f0: 650a 6060 2d2d 696e 6960 6020 6f70 7469  e.``--ini`` opti
-00015400: 6f6e 2e20 5061 7261 6d65 7465 7220 7661  on. Parameter va
-00015410: 6c75 6573 2073 6574 2074 6869 7320 7761  lues set this wa
-00015420: 7920 7769 6c6c 206f 7665 7272 6964 6520  y will override 
-00015430: 616e 7920 666f 756e 6420 696e 0a60 736b  any found in.`sk
-00015440: 6f6f 6c6b 6974 2e69 6e69 602e 0a0a 2b2d  oolkit.ini`...+-
-00015450: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00015460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000154a0: 5665 7273 696f 6e20 7c20 4368 616e 6765  Version | Change
-000154b0: 7320 2020 2020 2020 2020 2020 2020 2020  s               
-000154c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154e0: 2020 2020 2020 2020 2020 2020 7c0a 2b3d              |.+=
-000154f0: 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d  ========+=======
-00015500: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015510: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00015530: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a 7c20  ============+.| 
-00015540: 392e 3120 2020 2020 7c20 5468 6520 6060  9.1     | The ``
-00015550: 2d2d 7261 6d20 6d6f 7665 6060 2061 6e64  --ram move`` and
-00015560: 2060 602d 2d72 616d 2070 6f6b 6560 6020   ``--ram poke`` 
-00015570: 6f70 7469 6f6e 7320 6361 6e20 6d6f 6469  options can modi
-00015580: 6679 2073 7065 6369 6669 6320 7c0a 7c20  fy specific |.| 
-00015590: 2020 2020 2020 2020 7c20 5241 4d20 6261          | RAM ba
-000155a0: 6e6b 733b 2061 6464 6564 2074 6865 2060  nks; added the `
-000155b0: 6063 6d69 6f60 6020 7369 6d75 6c61 7465  `cmio`` simulate
-000155c0: 6420 4c4f 4144 2063 6f6e 6669 6775 7261  d LOAD configura
-000155d0: 7469 6f6e 2020 2020 2020 2020 7c0a 7c20  tion        |.| 
-000155e0: 2020 2020 2020 2020 7c20 7061 7261 6d65          | parame
-000155f0: 7465 7220 2020 2020 2020 2020 2020 2020  ter             
-00015600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015620: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00015630: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00015640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00015680: 392e 3020 2020 2020 7c20 4120 7369 6d75  9.0     | A simu
-00015690: 6c61 7465 6420 4c4f 4144 2069 7320 7065  lated LOAD is pe
-000156a0: 7266 6f72 6d65 6420 6279 2064 6566 6175  rformed by defau
-000156b0: 6c74 3b20 616e 2065 7869 7374 696e 6720  lt; an existing 
-000156c0: 736e 6170 7368 6f74 2020 2020 7c0a 7c20  snapshot    |.| 
-000156d0: 2020 2020 2020 2020 7c20 7769 6c6c 2062          | will b
-000156e0: 6520 6f76 6572 7772 6974 7465 6e20 6279  e overwritten by
-000156f0: 2064 6566 6175 6c74 3b20 6164 6465 6420   default; added 
-00015700: 7468 6520 6060 6c6f 6164 6060 2c20 6060  the ``load``, ``
-00015710: 6d61 6368 696e 6560 602c 2020 7c0a 7c20  machine``,  |.| 
-00015720: 2020 2020 2020 2020 7c20 6060 706f 6c61          | ``pola
-00015730: 7269 7479 6060 2061 6e64 2060 6069 6e2d  rity`` and ``in-
-00015740: 666c 6167 7360 6020 7369 6d75 6c61 7465  flags`` simulate
-00015750: 6420 4c4f 4144 2063 6f6e 6669 6775 7261  d LOAD configura
-00015760: 7469 6f6e 2020 2020 2020 2020 7c0a 7c20  tion        |.| 
-00015770: 2020 2020 2020 2020 7c20 7061 7261 6d65          | parame
-00015780: 7465 7273 3b20 7468 6520 6f75 7470 7574  ters; the output
-00015790: 2073 6e61 7073 686f 7420 6172 6775 6d65   snapshot argume
-000157a0: 6e74 2069 7320 6f70 7469 6f6e 616c 3b20  nt is optional; 
-000157b0: 6164 6465 6420 2020 2020 2020 7c0a 7c20  added       |.| 
-000157c0: 2020 2020 2020 2020 7c20 7375 7070 6f72          | suppor
-000157d0: 7420 666f 7220 7772 6974 696e 6720 535a  t for writing SZ
-000157e0: 5820 736e 6170 7368 6f74 733b 2061 6464  X snapshots; add
-000157f0: 6564 2074 6865 2020 2020 2020 2020 2020  ed the          
-00015800: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015810: 2020 2020 2020 2020 7c20 6060 4465 6661          | ``Defa
-00015820: 756c 7453 6e61 7073 686f 7446 6f72 6d61  ultSnapshotForma
-00015830: 7460 6020 636f 6e66 6967 7572 6174 696f  t`` configuratio
-00015840: 6e20 7061 7261 6d65 7465 723b 2061 6464  n parameter; add
-00015850: 6564 2074 6865 2020 2020 2020 7c0a 7c20  ed the      |.| 
-00015860: 2020 2020 2020 2020 7c20 6060 6665 6060          | ``fe``
-00015870: 2068 6172 6477 6172 6520 7374 6174 6520   hardware state 
-00015880: 6174 7472 6962 7574 653b 2061 6464 6564  attribute; added
-00015890: 2073 7570 706f 7274 2066 6f72 2072 6567   support for reg
-000158a0: 6973 7465 7220 7061 6972 7320 7c0a 7c20  ister pairs |.| 
-000158b0: 2020 2020 2020 2020 7c20 2860 6072 5b62          | (``r[b
-000158c0: 635d 6060 2c20 6060 725b 6465 5d60 6020  c]``, ``r[de]`` 
-000158d0: 6574 632e 2920 696e 2074 6865 2060 6054  etc.) in the ``T
-000158e0: 7261 6365 4c69 6e65 6060 2063 6f6e 6669  raceLine`` confi
-000158f0: 6775 7261 7469 6f6e 2020 2020 7c0a 7c20  guration    |.| 
-00015900: 2020 2020 2020 2020 7c20 7061 7261 6d65          | parame
-00015910: 7465 723b 2061 6464 6564 2074 6865 2060  ter; added the `
-00015920: 6061 6e74 6972 6f6d 6060 2c20 6060 6572  `antirom``, ``er
-00015930: 6e69 6577 6172 6560 6020 616e 6420 6060  nieware`` and ``
-00015940: 686f 7573 656e 6b61 6060 2020 7c0a 7c20  housenka``  |.| 
-00015950: 2020 2020 2020 2020 7c20 7461 7065 2d73          | tape-s
-00015960: 616d 706c 696e 6720 6c6f 6f70 2061 6363  ampling loop acc
-00015970: 656c 6572 6174 6f72 733b 2073 686f 7773  elerators; shows
-00015980: 2027 4445 4320 4127 2064 656c 6179 206c   'DEC A' delay l
-00015990: 6f6f 7020 2020 2020 2020 2020 7c0a 7c20  oop         |.| 
-000159a0: 2020 2020 2020 2020 7c20 7374 6174 6973          | statis
-000159b0: 7469 6373 2077 6865 6e20 6060 6163 6365  tics when ``acce
-000159c0: 6c65 7261 746f 723d 6c69 7374 6060 2020  lerator=list``  
-000159d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000159e0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-000159f0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00015a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00015a40: 382e 3130 2020 2020 7c20 436f 6e66 6967  8.10    | Config
-00015a50: 7572 6174 696f 6e20 6973 2072 6561 6420  uration is read 
-00015a60: 6672 6f6d 2060 736b 6f6f 6c6b 6974 2e69  from `skoolkit.i
-00015a70: 6e69 6020 6966 2070 7265 7365 6e74 3b20  ni` if present; 
-00015a80: 6164 6465 6420 7468 6520 2020 7c0a 7c20  added the   |.| 
-00015a90: 2020 2020 2020 2020 7c20 6060 2d2d 696e          | ``--in
-00015aa0: 6960 602c 2060 602d 2d73 686f 772d 636f  i``, ``--show-co
-00015ab0: 6e66 6967 6060 2061 6e64 2060 602d 2d74  nfig`` and ``--t
-00015ac0: 6170 652d 616e 616c 7973 6973 6060 206f  ape-analysis`` o
-00015ad0: 7074 696f 6e73 3b20 2020 2020 7c0a 7c20  ptions;     |.| 
-00015ae0: 2020 2020 2020 2020 7c20 6164 6465 6420          | added 
-00015af0: 7468 6520 6060 5472 6163 654c 696e 6560  the ``TraceLine`
-00015b00: 6020 616e 6420 6060 5472 6163 654f 7065  ` and ``TraceOpe
-00015b10: 7261 6e64 6060 2063 6f6e 6669 6775 7261  rand`` configura
-00015b20: 7469 6f6e 2020 2020 2020 2020 7c0a 7c20  tion        |.| 
-00015b30: 2020 2020 2020 2020 7c20 7061 7261 6d65          | parame
-00015b40: 7465 7273 3b20 6164 6465 6420 7468 6520  ters; added the 
-00015b50: 6060 6163 6365 6c65 7261 7465 2d64 6563  ``accelerate-dec
-00015b60: 2d61 6060 2061 6e64 2060 6066 696e 6973  -a`` and ``finis
-00015b70: 682d 7461 7065 6060 2020 2020 7c0a 7c20  h-tape``    |.| 
-00015b80: 2020 2020 2020 2020 7c20 7369 6d75 6c61          | simula
-00015b90: 7465 6420 4c4f 4144 2063 6f6e 6669 6775  ted LOAD configu
-00015ba0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
-00015bb0: 733b 2061 6464 6564 2074 6865 2060 6069  s; added the ``i
-00015bc0: 7373 7565 3260 6020 2020 2020 7c0a 7c20  ssue2``     |.| 
-00015bd0: 2020 2020 2020 2020 7c20 6861 7264 7761          | hardwa
-00015be0: 7265 2073 7461 7465 2061 7474 7269 6275  re state attribu
-00015bf0: 7465 3b20 6164 6465 6420 7468 6520 7370  te; added the sp
-00015c00: 6563 6961 6c20 6060 6175 746f 6060 2061  ecial ``auto`` a
-00015c10: 6e64 2060 606c 6973 7460 6020 7c0a 7c20  nd ``list`` |.| 
-00015c20: 2020 2020 2020 2020 7c20 7461 7065 2d73          | tape-s
-00015c30: 616d 706c 696e 6720 6c6f 6f70 2061 6363  ampling loop acc
-00015c40: 656c 6572 6174 6f72 206e 616d 6573 2c20  elerator names, 
-00015c50: 616e 6420 7468 6520 6162 696c 6974 7920  and the ability 
-00015c60: 746f 2073 7065 6369 6679 2020 7c0a 7c20  to specify  |.| 
-00015c70: 2020 2020 2020 2020 7c20 6d75 6c74 6970          | multip
-00015c80: 6c65 2061 6363 656c 6572 6174 6f72 733b  le accelerators;
-00015c90: 2061 6464 6564 2074 6865 2060 6061 6c6b   added the ``alk
-00015ca0: 6174 7261 7a2d 3035 6060 2c20 2020 2020  atraz-05``,     
-00015cb0: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015cc0: 2020 2020 2020 2020 7c20 6060 616c 6b61          | ``alka
-00015cd0: 7472 617a 2d30 3960 602c 2060 6061 6c6b  traz-09``, ``alk
-00015ce0: 6174 7261 7a2d 3061 6060 2c20 6060 616c  atraz-0a``, ``al
-00015cf0: 6b61 7472 617a 2d30 6260 602c 2020 2020  katraz-0b``,    
-00015d00: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015d10: 2020 2020 2020 2020 7c20 6060 616c 7465          | ``alte
-00015d20: 726e 6174 6976 6560 602c 2060 6061 6c74  rnative``, ``alt
-00015d30: 6572 6e61 7469 7665 3260 602c 2060 6062  ernative2``, ``b
-00015d40: 6f67 7573 6c61 772d 6a75 7a61 6060 2c20  oguslaw-juza``, 
-00015d50: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015d60: 2020 2020 2020 2020 7c20 6060 6275 6c6c          | ``bull
-00015d70: 646f 6760 602c 2060 6063 726c 6060 2c20  dog``, ``crl``, 
-00015d80: 6060 6372 6c32 6060 2c20 6060 6372 6c33  ``crl2``, ``crl3
-00015d90: 6060 2c20 6060 6372 6c34 6060 2c20 6060  ``, ``crl4``, ``
-00015da0: 6379 6265 786c 6162 6060 2c20 7c0a 7c20  cybexlab``, |.| 
-00015db0: 2020 2020 2020 2020 7c20 6060 642d 616e          | ``d-an
-00015dc0: 642d 6860 602c 2060 6064 656c 7068 696e  d-h``, ``delphin
-00015dd0: 6560 602c 2060 6064 6573 6967 6e2d 6465  e``, ``design-de
-00015de0: 7369 676e 6060 2c20 6060 6761 7267 6f79  sign``, ``gargoy
-00015df0: 6c65 3260 602c 2020 2020 2020 7c0a 7c20  le2``,      |.| 
-00015e00: 2020 2020 2020 2020 7c20 6060 6772 656d          | ``grem
-00015e10: 6c69 6e32 6060 2c20 6060 6d69 6372 6f70  lin2``, ``microp
-00015e20: 726f 7365 6060 2c20 6060 6d69 6372 6f2d  rose``, ``micro-
-00015e30: 7374 796c 6560 602c 2060 606d 6972 726f  style``, ``mirro
-00015e40: 7273 6f66 7460 602c 2020 2020 7c0a 7c20  rsoft``,    |.| 
-00015e50: 2020 2020 2020 2020 7c20 6060 7061 6c61          | ``pala
-00015e60: 7360 602c 2060 6072 6178 6f66 7460 602c  s``, ``raxoft``,
-00015e70: 2060 6072 6561 6c74 696d 6560 602c 2060   ``realtime``, `
-00015e80: 6073 696c 7665 7262 6972 6460 602c 2020  `silverbird``,  
-00015e90: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015ea0: 2020 2020 2020 2020 7c20 6060 736f 6674          | ``soft
-00015eb0: 7761 7265 2d70 726f 6a65 6374 7360 602c  ware-projects``,
-00015ec0: 2060 6073 7061 726b 6c65 7273 6060 2c20   ``sparklers``, 
-00015ed0: 6060 7375 7a79 2d73 6f66 7460 602c 2020  ``suzy-soft``,  
-00015ee0: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00015ef0: 2020 2020 2020 2020 7c20 6060 7375 7a79          | ``suzy
-00015f00: 2d73 6f66 7432 6060 2c20 6060 7469 6e79  -soft2``, ``tiny
-00015f10: 6060 2c20 6060 7573 2d67 6f6c 6460 6020  ``, ``us-gold`` 
-00015f20: 616e 6420 6060 7765 6972 642d 7363 6965  and ``weird-scie
-00015f30: 6e63 6560 6020 2020 2020 2020 7c0a 7c20  nce``       |.| 
-00015f40: 2020 2020 2020 2020 7c20 7461 7065 2d73          | tape-s
-00015f50: 616d 706c 696e 6720 6c6f 6f70 2061 6363  ampling loop acc
-00015f60: 656c 6572 6174 6f72 7320 2020 2020 2020  elerators       
-00015f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f80: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00015f90: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00015fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00015fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00015fe0: 382e 3920 2020 2020 7c20 4164 6465 6420  8.9     | Added 
-00015ff0: 7468 6520 6060 2d2d 7369 6d2d 6c6f 6164  the ``--sim-load
-00016000: 2d63 6f6e 6669 6760 602c 2060 602d 2d74  -config``, ``--t
-00016010: 6170 652d 6e61 6d65 6060 2c20 2020 2020  ape-name``,     
-00016020: 2020 2020 2020 2020 2020 2020 7c0a 7c20              |.| 
-00016030: 2020 2020 2020 2020 7c20 6060 2d2d 7461          | ``--ta
-00016040: 7065 2d73 7461 7274 6060 2c20 6060 2d2d  pe-start``, ``--
-00016050: 7461 7065 2d73 746f 7060 6020 616e 6420  tape-stop`` and 
-00016060: 6060 2d2d 7461 7065 2d73 756d 6060 206f  ``--tape-sum`` o
-00016070: 7074 696f 6e73 3b20 2020 2020 7c0a 7c20  ptions;     |.| 
-00016080: 2020 2020 2020 2020 7c20 6164 6465 6420          | added 
-00016090: 7375 7070 6f72 7420 666f 7220 545a 5820  support for TZX 
-000160a0: 6c6f 6f70 732c 2070 6175 7365 732c 2061  loops, pauses, a
-000160b0: 6e64 2075 6e75 7365 6420 6269 7473 2069  nd unused bits i
-000160c0: 6e20 6461 7461 2020 2020 2020 7c0a 7c20  n data      |.| 
-000160d0: 2020 2020 2020 2020 7c20 626c 6f63 6b73          | blocks
-000160e0: 3b20 6164 6465 6420 7375 7070 6f72 7420  ; added support 
-000160f0: 666f 7220 7175 6f74 6564 2061 7267 756d  for quoted argum
-00016100: 656e 7473 2069 6e20 616e 2061 7267 756d  ents in an argum
-00016110: 656e 7473 2066 696c 653b 2020 7c0a 7c20  ents file;  |.| 
-00016120: 2020 2020 2020 2020 7c20 6164 6465 6420          | added 
-00016130: 7468 6520 6060 7473 7461 7465 7360 6020  the ``tstates`` 
-00016140: 6861 7264 7761 7265 2073 7461 7465 2061  hardware state a
-00016150: 7474 7269 6275 7465 2020 2020 2020 2020  ttribute        
-00016160: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00016170: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00016180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000161a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000161b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000161c0: 382e 3820 2020 2020 7c20 4120 7369 6d75  8.8     | A simu
-000161d0: 6c61 7465 6420 4c4f 4144 2070 6572 666f  lated LOAD perfo
-000161e0: 726d 7320 616e 7920 6060 6361 6c6c 2f6d  rms any ``call/m
-000161f0: 6f76 652f 706f 6b65 2f73 7973 7661 7273  ove/poke/sysvars
-00016200: 6060 2020 2020 2020 2020 2020 7c0a 7c20  ``          |.| 
-00016210: 2020 2020 2020 2020 7c20 6f70 6572 6174          | operat
-00016220: 696f 6e73 2073 7065 6369 6669 6564 2062  ions specified b
-00016230: 7920 6060 2d2d 7261 6d60 6020 2020 2020  y ``--ram``     
-00016240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016250: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00016260: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00016270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000162a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000162b0: 382e 3720 2020 2020 7c20 4164 6465 6420  8.7     | Added 
-000162c0: 7375 7070 6f72 7420 666f 7220 7369 6d75  support for simu
-000162d0: 6c61 7469 6e67 2061 2034 384b 2053 7065  lating a 48K Spe
-000162e0: 6374 7275 6d20 4c4f 4144 696e 6720 6120  ctrum LOADing a 
-000162f0: 7461 7065 3b20 7768 656e 2020 7c0a 7c20  tape; when  |.| 
-00016300: 2020 2020 2020 2020 7c20 6120 6865 6164          | a head
-00016310: 6572 6c65 7373 2062 6c6f 636b 2069 7320  erless block is 
-00016320: 6967 6e6f 7265 6420 6265 6361 7573 6520  ignored because 
-00016330: 6e6f 2060 602d 2d72 616d 206c 6f61 6460  no ``--ram load`
-00016340: 6020 6f70 7469 6f6e 7320 2020 7c0a 7c20  ` options   |.| 
-00016350: 2020 2020 2020 2020 7c20 6861 7665 2062          | have b
-00016360: 6565 6e20 7370 6563 6966 6965 642c 2061  een specified, a
-00016370: 2077 6172 6e69 6e67 2069 7320 7072 696e   warning is prin
-00016380: 7465 6420 2020 2020 2020 2020 2020 2020  ted             
-00016390: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-000163a0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-000163b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000163c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000163d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000163e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000163f0: 382e 3620 2020 2020 7c20 4164 6465 6420  8.6     | Added 
-00016400: 7375 7070 6f72 7420 746f 2074 6865 2060  support to the `
-00016410: 602d 2d72 616d 6060 206f 7074 696f 6e20  `--ram`` option 
-00016420: 666f 7220 7468 6520 6060 6361 6c6c 6060  for the ``call``
-00016430: 206f 7065 7261 7469 6f6e 2020 7c0a 2b2d   operation  |.+-
-00016440: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00016450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00016490: 382e 3420 2020 2020 7c20 4164 6465 6420  8.4     | Added 
-000164a0: 7375 7070 6f72 7420 746f 2074 6865 2060  support to the `
-000164b0: 602d 2d72 616d 6060 206f 7074 696f 6e20  `--ram`` option 
-000164c0: 666f 7220 7468 6520 6060 7379 7376 6172  for the ``sysvar
-000164d0: 7360 6020 2020 2020 2020 2020 7c0a 7c20  s``         |.| 
-000164e0: 2020 2020 2020 2020 7c20 6f70 6572 6174          | operat
-000164f0: 696f 6e20 2020 2020 2020 2020 2020 2020  ion             
-00016500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016520: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00016530: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00016540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00016580: 362e 3320 2020 2020 7c20 4164 6465 6420  6.3     | Added 
-00016590: 7468 6520 6060 2d2d 7573 6572 2d61 6765  the ``--user-age
-000165a0: 6e74 6060 206f 7074 696f 6e20 2020 2020  nt`` option     
-000165b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165c0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-000165d0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-000165e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000165f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00016620: 362e 3220 2020 2020 7c20 5468 6520 6060  6.2     | The ``
-00016630: 2d2d 7261 6d60 602c 2060 602d 2d72 6567  --ram``, ``--reg
-00016640: 6060 2c20 6060 2d2d 7374 6163 6b60 6020  ``, ``--stack`` 
-00016650: 616e 6420 6060 2d2d 7374 6172 7460 6020  and ``--start`` 
-00016660: 6f70 7469 6f6e 7320 2020 2020 7c0a 7c20  options     |.| 
-00016670: 2020 2020 2020 2020 7c20 6163 6365 7074          | accept
-00016680: 2068 6578 6164 6563 696d 616c 2069 6e74   hexadecimal int
-00016690: 6567 6572 7320 7072 6566 6978 6564 2062  egers prefixed b
-000166a0: 7920 2730 7827 2020 2020 2020 2020 2020  y '0x'          
-000166b0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-000166c0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-000166d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000166e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000166f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-00016710: 352e 3320 2020 2020 7c20 4164 6465 6420  5.3     | Added 
-00016720: 7468 6520 6060 2d2d 7374 6163 6b60 6020  the ``--stack`` 
-00016730: 616e 6420 6060 2d2d 7374 6172 7460 6020  and ``--start`` 
-00016740: 6f70 7469 6f6e 7320 2020 2020 2020 2020  options         
-00016750: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00016760: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+00011da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011dc0: 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d 2b2d    |.+---------+-
+00011dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00011e10: 2d2d 2b0a 0a2e 2e20 5f73 6e61 706d 6f64  --+.... _snapmod
+00011e20: 2e70 793a 0a0a 736e 6170 6d6f 642e 7079  .py:..snapmod.py
+00011e30: 0a2d 2d2d 2d2d 2d2d 2d2d 2d0a 6073 6e61  .----------.`sna
+00011e40: 706d 6f64 2e70 7960 206d 6f64 6966 6965  pmod.py` modifie
+00011e50: 7320 7468 6520 7265 6769 7374 6572 7320  s the registers 
+00011e60: 616e 6420 5241 4d20 696e 2061 6e20 535a  and RAM in an SZ
+00011e70: 5820 6f72 205a 3830 2073 6e61 7073 686f  X or Z80 snapsho
+00011e80: 742e 2046 6f72 0a65 7861 6d70 6c65 3a3a  t. For.example::
+00011e90: 0a0a 2020 2420 736e 6170 6d6f 642e 7079  ..  $ snapmod.py
+00011ea0: 202d 2d70 6f6b 6520 3332 3736 382c 3020   --poke 32768,0 
+00011eb0: 6761 6d65 2e7a 3830 2070 6f6b 6564 2e7a  game.z80 poked.z
+00011ec0: 3830 0a0a 546f 206c 6973 7420 7468 6520  80..To list the 
+00011ed0: 6f70 7469 6f6e 7320 7375 7070 6f72 7465  options supporte
+00011ee0: 6420 6279 2060 736e 6170 6d6f 642e 7079  d by `snapmod.py
+00011ef0: 602c 2072 756e 2069 7420 7769 7468 206e  `, run it with n
+00011f00: 6f20 6172 6775 6d65 6e74 733a 3a0a 0a20  o arguments::.. 
+00011f10: 2075 7361 6765 3a20 736e 6170 6d6f 642e   usage: snapmod.
+00011f20: 7079 205b 6f70 7469 6f6e 735d 2069 6e66  py [options] inf
+00011f30: 696c 6520 5b6f 7574 6669 6c65 5d0a 0a20  ile [outfile].. 
+00011f40: 204d 6f64 6966 7920 616e 2053 5a58 206f   Modify an SZX o
+00011f50: 7220 5a38 3020 736e 6170 7368 6f74 2e0a  r Z80 snapshot..
+00011f60: 0a20 204f 7074 696f 6e73 3a0a 2020 2020  .  Options:.    
+00011f70: 2d6d 205b 733a 5d73 7263 2c73 697a 652c  -m [s:]src,size,
+00011f80: 5b64 3a5d 6465 7374 2c20 2d2d 6d6f 7665  [d:]dest, --move
+00011f90: 205b 733a 5d73 7263 2c73 697a 652c 5b64   [s:]src,size,[d
+00011fa0: 3a5d 6465 7374 0a20 2020 2020 2020 2020  :]dest.         
+00011fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fc0: 2043 6f70 7920 6120 626c 6f63 6b20 6f66   Copy a block of
+00011fd0: 2062 7974 6573 206f 6620 7468 6520 6769   bytes of the gi
+00011fe0: 7665 6e20 7369 7a65 2066 726f 6d20 7372  ven size from sr
+00011ff0: 6320 696e 0a20 2020 2020 2020 2020 2020  c in.           
+00012000: 2020 2020 2020 2020 2020 2020 2020 2052                 R
+00012010: 414d 2062 616e 6b20 7320 746f 2064 6573  AM bank s to des
+00012020: 7420 696e 2052 414d 2062 616e 6b20 642e  t in RAM bank d.
+00012030: 2054 6869 7320 6f70 7469 6f6e 206d 6179   This option may
+00012040: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
+00012050: 2020 2020 2020 2020 2020 2020 2020 7573                us
+00012060: 6564 206d 756c 7469 706c 6520 7469 6d65  ed multiple time
+00012070: 732e 0a20 2020 202d 7020 5b70 3a5d 615b  s..    -p [p:]a[
+00012080: 2d62 5b2d 635d 5d2c 5b5e 2b5d 762c 202d  -b[-c]],[^+]v, -
+00012090: 2d70 6f6b 6520 5b70 3a5d 615b 2d62 5b2d  -poke [p:]a[-b[-
+000120a0: 635d 5d2c 5b5e 2b5d 760a 2020 2020 2020  c]],[^+]v.      
+000120b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120c0: 2020 2020 504f 4b45 204e 2c76 2069 6e20      POKE N,v in 
+000120d0: 5241 4d20 6261 6e6b 2070 2066 6f72 204e  RAM bank p for N
+000120e0: 2069 6e20 7b61 2c20 612b 632c 2061 2b32   in {a, a+c, a+2
+000120f0: 632e 2e2e 2c20 627d 2e0a 2020 2020 2020  c..., b}..      
+00012100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012110: 2020 2020 5072 6566 6978 2027 7627 2077      Prefix 'v' w
+00012120: 6974 6820 275e 2720 746f 2070 6572 666f  ith '^' to perfo
+00012130: 726d 2061 6e20 584f 5220 6f70 6572 6174  rm an XOR operat
+00012140: 696f 6e2c 206f 720a 2020 2020 2020 2020  ion, or.        
+00012150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012160: 2020 272b 2720 746f 2070 6572 666f 726d    '+' to perform
+00012170: 2061 6e20 4144 4420 6f70 6572 6174 696f   an ADD operatio
+00012180: 6e2e 2054 6869 7320 6f70 7469 6f6e 206d  n. This option m
+00012190: 6179 2062 650a 2020 2020 2020 2020 2020  ay be.          
+000121a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000121b0: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
+000121c0: 6d65 732e 0a20 2020 202d 7220 6e61 6d65  mes..    -r name
+000121d0: 3d76 616c 7565 2c20 2d2d 7265 6720 6e61  =value, --reg na
+000121e0: 6d65 3d76 616c 7565 0a20 2020 2020 2020  me=value.       
+000121f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012200: 2020 2053 6574 2074 6865 2076 616c 7565     Set the value
+00012210: 206f 6620 6120 7265 6769 7374 6572 2e20   of a register. 
+00012220: 446f 2027 2d2d 7265 6720 6865 6c70 2720  Do '--reg help' 
+00012230: 666f 7220 6d6f 7265 0a20 2020 2020 2020  for more.       
+00012240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012250: 2020 2069 6e66 6f72 6d61 7469 6f6e 2e20     information. 
+00012260: 5468 6973 206f 7074 696f 6e20 6d61 7920  This option may 
+00012270: 6265 2075 7365 6420 6d75 6c74 6970 6c65  be used multiple
+00012280: 2074 696d 6573 2e0a 2020 2020 2d73 206e   times..    -s n
+00012290: 616d 653d 7661 6c75 652c 202d 2d73 7461  ame=value, --sta
+000122a0: 7465 206e 616d 653d 7661 6c75 650a 2020  te name=value.  
+000122b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000122c0: 2020 2020 2020 2020 5365 7420 6120 6861          Set a ha
+000122d0: 7264 7761 7265 2073 7461 7465 2061 7474  rdware state att
+000122e0: 7269 6275 7465 2e20 446f 2027 2d2d 7374  ribute. Do '--st
+000122f0: 6174 6520 6865 6c70 2720 666f 720a 2020  ate help' for.  
+00012300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012310: 2020 2020 2020 2020 6d6f 7265 2069 6e66          more inf
+00012320: 6f72 6d61 7469 6f6e 2e20 5468 6973 206f  ormation. This o
+00012330: 7074 696f 6e20 6d61 7920 6265 2075 7365  ption may be use
+00012340: 6420 6d75 6c74 6970 6c65 0a20 2020 2020  d multiple.     
+00012350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012360: 2020 2020 2074 696d 6573 2e0a 2020 2020       times..    
+00012370: 2d56 2c20 2d2d 7665 7273 696f 6e20 2020  -V, --version   
+00012380: 2020 2020 2020 5368 6f77 2053 6b6f 6f6c        Show Skool
+00012390: 4b69 7420 7665 7273 696f 6e20 6e75 6d62  Kit version numb
+000123a0: 6572 2061 6e64 2065 7869 742e 0a0a 2b2d  er and exit...+-
+000123b0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+000123c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000123f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+00012400: 5665 7273 696f 6e20 7c20 4368 616e 6765  Version | Change
+00012410: 7320 2020 2020 2020 2020 2020 2020 2020  s               
+00012420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012440: 2020 2020 2020 2020 2020 2020 7c0a 2b3d              |.+=
+00012450: 3d3d 3d3d 3d3d 3d3d 2b3d 3d3d 3d3d 3d3d  ========+=======
+00012460: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012470: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012480: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012490: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2b0a 7c20  ============+.| 
+000124a0: 392e 3120 2020 2020 7c20 4164 6465 6420  9.1     | Added 
+000124b0: 7375 7070 6f72 7420 666f 7220 6d6f 6469  support for modi
+000124c0: 6679 696e 6720 535a 5820 736e 6170 7368  fying SZX snapsh
+000124d0: 6f74 7320 616e 6420 3132 384b 2073 6e61  ots and 128K sna
+000124e0: 7073 686f 7473 3b20 7468 6520 7c0a 7c20  pshots; the |.| 
+000124f0: 2020 2020 2020 2020 7c20 6060 2d2d 6d6f          | ``--mo
+00012500: 7665 6060 2061 6e64 2060 602d 2d70 6f6b  ve`` and ``--pok
+00012510: 6560 6020 6f70 7469 6f6e 7320 6361 6e20  e`` options can 
+00012520: 6d6f 6469 6679 2073 7065 6369 6669 6320  modify specific 
+00012530: 5241 4d20 6261 6e6b 7320 2020 7c0a 2b2d  RAM banks   |.+-
+00012540: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+00012550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+00012590: 382e 3130 2020 2020 7c20 4164 6465 6420  8.10    | Added 
+000125a0: 7468 6520 6060 6973 7375 6532 6060 2068  the ``issue2`` h
+000125b0: 6172 6477 6172 6520 7374 6174 6520 6174  ardware state at
+000125c0: 7472 6962 7574 6520 2020 2020 2020 2020  tribute         
+000125d0: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+000125e0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+000125f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012600: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012610: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012620: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+00012630: 382e 3920 2020 2020 7c20 4164 6465 6420  8.9     | Added 
+00012640: 7468 6520 6060 7473 7461 7465 7360 6020  the ``tstates`` 
+00012650: 6861 7264 7761 7265 2073 7461 7465 2061  hardware state a
+00012660: 7474 7269 6275 7465 2020 2020 2020 2020  ttribute        
+00012670: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+00012680: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+00012690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000126a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000126b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000126c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+000126d0: 362e 3220 2020 2020 7c20 5468 6520 6060  6.2     | The ``
+000126e0: 2d2d 6d6f 7665 6060 2c20 6060 2d2d 706f  --move``, ``--po
+000126f0: 6b65 6060 2061 6e64 2060 602d 2d72 6567  ke`` and ``--reg
+00012700: 6060 206f 7074 696f 6e73 2061 6363 6570  `` options accep
+00012710: 7420 2020 2020 2020 2020 2020 7c0a 7c20  t           |.| 
+00012720: 2020 2020 2020 2020 7c20 6865 7861 6465          | hexade
+00012730: 6369 6d61 6c20 696e 7465 6765 7273 2070  cimal integers p
+00012740: 7265 6669 7865 6420 6279 2027 3078 2720  refixed by '0x' 
+00012750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012760: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+00012770: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+00012780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000127a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000127b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
+000127c0: 352e 3320 2020 2020 7c20 4e65 7720 2020  5.3     | New   
+000127d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012800: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
+00012810: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
+00012820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00012850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e  ------------+...
+00012860: 2e20 5f74 6170 3273 6e61 2e70 793a 0a0a  . _tap2sna.py:..
+00012870: 7461 7032 736e 612e 7079 0a2d 2d2d 2d2d  tap2sna.py.-----
+00012880: 2d2d 2d2d 2d0a 6074 6170 3273 6e61 2e70  -----.`tap2sna.p
+00012890: 7960 2063 6f6e 7665 7274 7320 6120 5441  y` converts a TA
+000128a0: 5020 6f72 2054 5a58 2066 696c 6520 2877  P or TZX file (w
+000128b0: 6869 6368 206d 6179 2062 6520 696e 7369  hich may be insi
+000128c0: 6465 2061 207a 6970 2061 7263 6869 7665  de a zip archive
+000128d0: 290a 696e 746f 2061 6e20 535a 5820 6f72  ).into an SZX or
+000128e0: 205a 3830 2073 6e61 7073 686f 742e 2046   Z80 snapshot. F
+000128f0: 6f72 2065 7861 6d70 6c65 3a3a 0a0a 2020  or example::..  
+00012900: 2420 7461 7032 736e 612e 7079 2067 616d  $ tap2sna.py gam
+00012910: 652e 7461 7020 6761 6d65 2e7a 3830 0a0a  e.tap game.z80..
+00012920: 546f 206c 6973 7420 7468 6520 6f70 7469  To list the opti
+00012930: 6f6e 7320 7375 7070 6f72 7465 6420 6279  ons supported by
+00012940: 2060 7461 7032 736e 612e 7079 602c 2072   `tap2sna.py`, r
+00012950: 756e 2069 7420 7769 7468 206e 6f20 6172  un it with no ar
+00012960: 6775 6d65 6e74 733a 3a0a 0a20 2075 7361  guments::..  usa
+00012970: 6765 3a0a 2020 2020 7461 7032 736e 612e  ge:.    tap2sna.
+00012980: 7079 205b 6f70 7469 6f6e 735d 2049 4e50  py [options] INP
+00012990: 5554 205b 4f55 5446 494c 455d 0a20 2020  UT [OUTFILE].   
+000129a0: 2074 6170 3273 6e61 2e70 7920 4046 494c   tap2sna.py @FIL
+000129b0: 4520 5b61 7267 735d 0a0a 2020 436f 6e76  E [args]..  Conv
+000129c0: 6572 7420 6120 5441 5020 6f72 2054 5a58  ert a TAP or TZX
+000129d0: 2066 696c 6520 2877 6869 6368 206d 6179   file (which may
+000129e0: 2062 6520 696e 7369 6465 2061 207a 6970   be inside a zip
+000129f0: 2061 7263 6869 7665 2920 696e 746f 2061   archive) into a
+00012a00: 6e20 535a 5820 6f72 0a20 205a 3830 2073  n SZX or.  Z80 s
+00012a10: 6e61 7073 686f 742e 2049 4e50 5554 206d  napshot. INPUT m
+00012a20: 6179 2062 6520 7468 6520 6675 6c6c 2055  ay be the full U
+00012a30: 524c 2074 6f20 6120 7265 6d6f 7465 207a  RL to a remote z
+00012a40: 6970 2061 7263 6869 7665 206f 7220 5441  ip archive or TA
+00012a50: 502f 545a 580a 2020 6669 6c65 2c20 6f72  P/TZX.  file, or
+00012a60: 2074 6865 2070 6174 6820 746f 2061 206c   the path to a l
+00012a70: 6f63 616c 2066 696c 652e 2041 7267 756d  ocal file. Argum
+00012a80: 656e 7473 206d 6179 2062 6520 7265 6164  ents may be read
+00012a90: 2066 726f 6d20 4649 4c45 2069 6e73 7465   from FILE inste
+00012aa0: 6164 206f 660a 2020 286f 7220 6173 2077  ad of.  (or as w
+00012ab0: 656c 6c20 6173 2920 6265 696e 6720 6769  ell as) being gi
+00012ac0: 7665 6e20 6f6e 2074 6865 2063 6f6d 6d61  ven on the comma
+00012ad0: 6e64 206c 696e 652e 0a0a 2020 4f70 7469  nd line...  Opti
+00012ae0: 6f6e 733a 0a20 2020 202d 6320 6e61 6d65  ons:.    -c name
+00012af0: 3d76 616c 7565 2c20 2d2d 7369 6d2d 6c6f  =value, --sim-lo
+00012b00: 6164 2d63 6f6e 6669 6720 6e61 6d65 3d76  ad-config name=v
+00012b10: 616c 7565 0a20 2020 2020 2020 2020 2020  alue.           
+00012b20: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+00012b30: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
+00012b40: 6120 7369 6d75 6c61 7465 6420 4c4f 4144  a simulated LOAD
+00012b50: 2063 6f6e 6669 6775 7261 7469 6f6e 0a20   configuration. 
+00012b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b70: 2020 2020 2020 2020 2070 6172 616d 6574           paramet
+00012b80: 6572 2e20 446f 2027 2d63 2068 656c 7027  er. Do '-c help'
+00012b90: 2066 6f72 206d 6f72 6520 696e 666f 726d   for more inform
+00012ba0: 6174 696f 6e2e 2054 6869 730a 2020 2020  ation. This.    
+00012bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bc0: 2020 2020 2020 6f70 7469 6f6e 206d 6179        option may
+00012bd0: 2062 6520 7573 6564 206d 756c 7469 706c   be used multipl
+00012be0: 6520 7469 6d65 732e 0a20 2020 202d 6420  e times..    -d 
+00012bf0: 4449 522c 202d 2d6f 7574 7075 742d 6469  DIR, --output-di
+00012c00: 7220 4449 520a 2020 2020 2020 2020 2020  r DIR.          
+00012c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c20: 5772 6974 6520 7468 6520 736e 6170 7368  Write the snapsh
+00012c30: 6f74 2066 696c 6520 696e 2074 6869 7320  ot file in this 
+00012c40: 6469 7265 6374 6f72 792e 0a20 2020 202d  directory..    -
+00012c50: 4920 703d 762c 202d 2d69 6e69 2070 3d76  I p=v, --ini p=v
+00012c60: 2020 2020 2053 6574 2074 6865 2076 616c       Set the val
+00012c70: 7565 206f 6620 7468 6520 636f 6e66 6967  ue of the config
+00012c80: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
+00012c90: 7220 2770 2720 746f 0a20 2020 2020 2020  r 'p' to.       
+00012ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cb0: 2020 2027 7627 2e20 5468 6973 206f 7074     'v'. This opt
+00012cc0: 696f 6e20 6d61 7920 6265 2075 7365 6420  ion may be used 
+00012cd0: 6d75 6c74 6970 6c65 2074 696d 6573 2e0a  multiple times..
+00012ce0: 2020 2020 2d70 2053 5441 434b 2c20 2d2d      -p STACK, --
+00012cf0: 7374 6163 6b20 5354 4143 4b0a 2020 2020  stack STACK.    
+00012d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d10: 2020 2020 2020 5365 7420 7468 6520 7374        Set the st
+00012d20: 6163 6b20 706f 696e 7465 722e 0a20 2020  ack pointer..   
+00012d30: 202d 2d72 616d 204f 5045 5241 5449 4f4e   --ram OPERATION
+00012d40: 2020 2020 2020 2050 6572 666f 726d 2061         Perform a
+00012d50: 206c 6f61 6420 6f70 6572 6174 696f 6e20   load operation 
+00012d60: 6f72 206f 7468 6572 7769 7365 206d 6f64  or otherwise mod
+00012d70: 6966 7920 7468 650a 2020 2020 2020 2020  ify the.        
+00012d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d90: 2020 6d65 6d6f 7279 2073 6e61 7073 686f    memory snapsho
+00012da0: 7420 6265 696e 6720 6275 696c 742e 2044  t being built. D
+00012db0: 6f20 272d 2d72 616d 2068 656c 7027 2066  o '--ram help' f
+00012dc0: 6f72 206d 6f72 650a 2020 2020 2020 2020  or more.        
+00012dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012de0: 2020 696e 666f 726d 6174 696f 6e2e 2054    information. T
+00012df0: 6869 7320 6f70 7469 6f6e 206d 6179 2062  his option may b
+00012e00: 6520 7573 6564 206d 756c 7469 706c 6520  e used multiple 
+00012e10: 7469 6d65 732e 0a20 2020 202d 2d72 6567  times..    --reg
+00012e20: 206e 616d 653d 7661 6c75 6520 2020 2020   name=value     
+00012e30: 2053 6574 2074 6865 2076 616c 7565 206f   Set the value o
+00012e40: 6620 6120 7265 6769 7374 6572 2e20 446f  f a register. Do
+00012e50: 2027 2d2d 7265 6720 6865 6c70 2720 666f   '--reg help' fo
+00012e60: 7220 6d6f 7265 0a20 2020 2020 2020 2020  r more.         
+00012e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e80: 2069 6e66 6f72 6d61 7469 6f6e 2e20 5468   information. Th
+00012e90: 6973 206f 7074 696f 6e20 6d61 7920 6265  is option may be
+00012ea0: 2075 7365 6420 6d75 6c74 6970 6c65 2074   used multiple t
+00012eb0: 696d 6573 2e0a 2020 2020 2d2d 7368 6f77  imes..    --show
+00012ec0: 2d63 6f6e 6669 6720 2020 2020 2020 2020  -config         
+00012ed0: 5368 6f77 2063 6f6e 6669 6775 7261 7469  Show configurati
+00012ee0: 6f6e 2070 6172 616d 6574 6572 2076 616c  on parameter val
+00012ef0: 7565 732e 0a20 2020 202d 7320 5354 4152  ues..    -s STAR
+00012f00: 542c 202d 2d73 7461 7274 2053 5441 5254  T, --start START
+00012f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012f20: 2020 2020 2020 2020 2020 2053 6574 2074             Set t
+00012f30: 6865 2073 7461 7274 2061 6464 7265 7373  he start address
+00012f40: 2074 6f20 4a50 2074 6f2e 0a20 2020 202d   to JP to..    -
+00012f50: 2d73 7461 7465 206e 616d 653d 7661 6c75  -state name=valu
+00012f60: 6520 2020 2053 6574 2061 2068 6172 6477  e    Set a hardw
+00012f70: 6172 6520 7374 6174 6520 6174 7472 6962  are state attrib
+00012f80: 7574 652e 2044 6f20 272d 2d73 7461 7465  ute. Do '--state
+00012f90: 2068 656c 7027 2066 6f72 0a20 2020 2020   help' for.     
+00012fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012fb0: 2020 2020 206d 6f72 6520 696e 666f 726d       more inform
+00012fc0: 6174 696f 6e2e 2054 6869 7320 6f70 7469  ation. This opti
+00012fd0: 6f6e 206d 6179 2062 6520 7573 6564 206d  on may be used m
+00012fe0: 756c 7469 706c 650a 2020 2020 2020 2020  ultiple.        
+00012ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013000: 2020 7469 6d65 732e 0a20 2020 202d 2d74    times..    --t
+00013010: 6170 652d 616e 616c 7973 6973 2020 2020  ape-analysis    
+00013020: 2020 2053 686f 7720 616e 2061 6e61 6c79     Show an analy
+00013030: 7369 7320 6f66 2074 6865 2074 6170 6527  sis of the tape'
+00013040: 7320 746f 6e65 732c 2070 756c 7365 2073  s tones, pulse s
+00013050: 6571 7565 6e63 6573 0a20 2020 2020 2020  equences.       
+00013060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013070: 2020 2061 6e64 2064 6174 6120 626c 6f63     and data bloc
+00013080: 6b73 2e0a 2020 2020 2d2d 7461 7065 2d6e  ks..    --tape-n
+00013090: 616d 6520 4e41 4d45 2020 2020 2020 5370  ame NAME      Sp
+000130a0: 6563 6966 7920 7468 6520 6e61 6d65 206f  ecify the name o
+000130b0: 6620 6120 5441 502f 545a 5820 6669 6c65  f a TAP/TZX file
+000130c0: 2069 6e20 6120 7a69 7020 6172 6368 6976   in a zip archiv
+000130d0: 652e 0a20 2020 202d 2d74 6170 652d 7374  e..    --tape-st
+000130e0: 6172 7420 424c 4f43 4b20 2020 2053 7461  art BLOCK    Sta
+000130f0: 7274 2074 6865 2074 6170 6520 6174 2074  rt the tape at t
+00013100: 6869 7320 626c 6f63 6b20 6e75 6d62 6572  his block number
+00013110: 2e0a 2020 2020 2d2d 7461 7065 2d73 746f  ..    --tape-sto
+00013120: 7020 424c 4f43 4b20 2020 2020 5374 6f70  p BLOCK     Stop
+00013130: 2074 6865 2074 6170 6520 6174 2074 6869   the tape at thi
+00013140: 7320 626c 6f63 6b20 6e75 6d62 6572 2e0a  s block number..
+00013150: 2020 2020 2d2d 7461 7065 2d73 756d 204d      --tape-sum M
+00013160: 4435 5355 4d20 2020 2020 5370 6563 6966  D5SUM     Specif
+00013170: 7920 7468 6520 4d44 3520 6368 6563 6b73  y the MD5 checks
+00013180: 756d 206f 6620 7468 6520 5441 502f 545a  um of the TAP/TZ
+00013190: 5820 6669 6c65 2e0a 2020 2020 2d75 2041  X file..    -u A
+000131a0: 4745 4e54 2c20 2d2d 7573 6572 2d61 6765  GENT, --user-age
+000131b0: 6e74 2041 4745 4e54 0a20 2020 2020 2020  nt AGENT.       
+000131c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131d0: 2020 2053 6574 2074 6865 2055 7365 722d     Set the User-
+000131e0: 4167 656e 7420 6865 6164 6572 2e0a 2020  Agent header..  
+000131f0: 2020 2d56 2c20 2d2d 7665 7273 696f 6e20    -V, --version 
+00013200: 2020 2020 2020 2020 5368 6f77 2053 6b6f          Show Sko
+00013210: 6f6c 4b69 7420 7665 7273 696f 6e20 6e75  olKit version nu
+00013220: 6d62 6572 2061 6e64 2065 7869 742e 0a0a  mber and exit...
+00013230: 4e6f 7465 2074 6861 7420 6074 6170 3273  Note that `tap2s
+00013240: 6e61 2e70 7960 2063 616e 6e6f 7420 7265  na.py` cannot re
+00013250: 6164 2064 6174 6120 6672 6f6d 2054 5a58  ad data from TZX
+00013260: 2062 6c6f 636b 2074 7970 6573 2030 7831   block types 0x1
+00013270: 3820 2843 5357 0a72 6563 6f72 6469 6e67  8 (CSW.recording
+00013280: 2920 6f72 2030 7831 3920 2867 656e 6572  ) or 0x19 (gener
+00013290: 616c 697a 6564 2064 6174 6120 626c 6f63  alized data bloc
+000132a0: 6b29 2e0a 0a42 7920 6465 6661 756c 742c  k)...By default,
+000132b0: 2060 7461 7032 736e 612e 7079 6020 6174   `tap2sna.py` at
+000132c0: 7465 6d70 7473 2074 6f20 6c6f 6164 2061  tempts to load a
+000132d0: 2074 6170 6520 6578 6163 746c 7920 6173   tape exactly as
+000132e0: 2061 2034 384b 2053 7065 6374 7275 6d0a   a 48K Spectrum.
+000132f0: 776f 756c 6420 2873 6565 203a 7265 663a  would (see :ref:
+00013300: 6074 6170 3273 6e61 2d73 696d 2d6c 6f61  `tap2sna-sim-loa
+00013310: 6460 292e 2049 6620 7468 6174 2064 6f65  d`). If that doe
+00013320: 736e 2774 2077 6f72 6b2c 2074 6865 2060  sn't work, the `
+00013330: 602d 2d72 616d 6060 206f 7074 696f 6e0a  `--ram`` option.
+00013340: 6361 6e20 6265 2075 7365 6420 746f 206c  can be used to l
+00013350: 6f61 6420 6279 7465 7320 6672 6f6d 2073  oad bytes from s
+00013360: 7065 6369 6669 6320 7461 7065 2062 6c6f  pecific tape blo
+00013370: 636b 7320 6174 2074 6865 2061 7070 726f  cks at the appro
+00013380: 7072 6961 7465 0a61 6464 7265 7373 6573  priate.addresses
+00013390: 2e20 466f 7220 6578 616d 706c 653a 3a0a  . For example::.
+000133a0: 0a20 2024 2074 6170 3273 6e61 2e70 7920  .  $ tap2sna.py 
+000133b0: 2d2d 7261 6d20 6c6f 6164 3d33 2c33 3030  --ram load=3,300
+000133c0: 3030 2067 616d 652e 747a 7820 6761 6d65  00 game.tzx game
+000133d0: 2e7a 3830 0a0a 6c6f 6164 7320 7468 6520  .z80..loads the 
+000133e0: 7468 6972 6420 626c 6f63 6b20 6f6e 2074  third block on t
+000133f0: 6865 2074 6170 6520 6174 2061 6464 7265  he tape at addre
+00013400: 7373 2033 3030 3030 2c20 616e 6420 6967  ss 30000, and ig
+00013410: 6e6f 7265 7320 616c 6c20 6f74 6865 720a  nores all other.
+00013420: 626c 6f63 6b73 2e20 2854 6f20 7365 6520  blocks. (To see 
+00013430: 696e 666f 726d 6174 696f 6e20 6f6e 2074  information on t
+00013440: 6865 2062 6c6f 636b 7320 696e 2061 2054  he blocks in a T
+00013450: 4150 206f 7220 545a 5820 6669 6c65 2c20  AP or TZX file, 
+00013460: 7573 6520 7468 650a 3a72 6566 3a60 7461  use the.:ref:`ta
+00013470: 7069 6e66 6f2e 7079 6020 636f 6d6d 616e  pinfo.py` comman
+00013480: 642e 290a 0a54 6865 2060 602d 2d72 616d  d.)..The ``--ram
+00013490: 6060 206f 7074 696f 6e20 6361 6e20 616c  `` option can al
+000134a0: 736f 2062 6520 7573 6564 2074 6f20 6d6f  so be used to mo
+000134b0: 7665 2062 6c6f 636b 7320 6f66 2062 7974  ve blocks of byt
+000134c0: 6573 2066 726f 6d20 6f6e 6520 6c6f 6361  es from one loca
+000134d0: 7469 6f6e 0a74 6f20 616e 6f74 6865 722c  tion.to another,
+000134e0: 2050 4f4b 4520 7661 6c75 6573 2069 6e74   POKE values int
+000134f0: 6f20 696e 6469 7669 6475 616c 2061 6464  o individual add
+00013500: 7265 7373 6573 206f 7220 6164 6472 6573  resses or addres
+00013510: 7320 7261 6e67 6573 2c20 6d6f 6469 6679  s ranges, modify
+00013520: 0a6d 656d 6f72 7920 7769 7468 2058 4f52  .memory with XOR
+00013530: 2061 6e64 2041 4444 206f 7065 7261 7469   and ADD operati
+00013540: 6f6e 732c 2069 6e69 7469 616c 6973 6520  ons, initialise 
+00013550: 7468 6520 7379 7374 656d 2076 6172 6961  the system varia
+00013560: 626c 6573 2c20 6f72 2063 616c 6c20 610a  bles, or call a.
+00013570: 5079 7468 6f6e 2066 756e 6374 696f 6e20  Python function 
+00013580: 746f 206d 6f64 6966 7920 7468 6520 6d65  to modify the me
+00013590: 6d6f 7279 2073 6e61 7073 686f 7420 696e  mory snapshot in
+000135a0: 2061 6e20 6172 6269 7472 6172 7920 7761   an arbitrary wa
+000135b0: 7920 6265 666f 7265 2069 7420 6973 0a73  y before it is.s
+000135c0: 6176 6564 2e20 466f 7220 6d6f 7265 2069  aved. For more i
+000135d0: 6e66 6f72 6d61 7469 6f6e 206f 6e20 7468  nformation on th
+000135e0: 6573 6520 6f70 6572 6174 696f 6e73 2c20  ese operations, 
+000135f0: 7275 6e3a 3a0a 0a20 2024 2074 6170 3273  run::..  $ tap2s
+00013600: 6e61 2e70 7920 2d2d 7261 6d20 6865 6c70  na.py --ram help
+00013610: 0a0a 466f 7220 636f 6d70 6c65 7820 736e  ..For complex sn
+00013620: 6170 7368 6f74 7320 7468 6174 2072 6571  apshots that req
+00013630: 7569 7265 206d 616e 7920 6f70 7469 6f6e  uire many option
+00013640: 7320 746f 2062 7569 6c64 2c20 6974 206d  s to build, it m
+00013650: 6179 2062 6520 6d6f 7265 0a63 6f6e 7665  ay be more.conve
+00013660: 6e69 656e 7420 746f 2073 746f 7265 2074  nient to store t
+00013670: 6865 2061 7267 756d 656e 7473 2074 6f20  he arguments to 
+00013680: 6074 6170 3273 6e61 2e70 7960 2069 6e20  `tap2sna.py` in 
+00013690: 6120 6669 6c65 2e20 466f 7220 6578 616d  a file. For exam
+000136a0: 706c 652c 2069 660a 7468 6520 6669 6c65  ple, if.the file
+000136b0: 2060 6761 6d65 2e74 3273 6020 6861 7320   `game.t2s` has 
+000136c0: 7468 6520 666f 6c6c 6f77 696e 6720 636f  the following co
+000136d0: 6e74 656e 7473 3a3a 0a0a 2020 3b0a 2020  ntents::..  ;.  
+000136e0: 3b20 7461 7032 736e 612e 7079 2066 696c  ; tap2sna.py fil
+000136f0: 6520 666f 7220 4741 4d45 0a20 203b 0a20  e for GAME.  ;. 
+00013700: 2068 7474 703a 2f2f 6578 616d 706c 652e   http://example.
+00013710: 636f 6d2f 7075 622f 6761 6d65 732f 4741  com/pub/games/GA
+00013720: 4d45 2e7a 6970 0a20 202d 6320 6661 7374  ME.zip.  -c fast
+00013730: 2d6c 6f61 643d 3020 2020 2020 2020 2320  -load=0       # 
+00013740: 4469 7361 626c 6520 6661 7374 206c 6f61  Disable fast loa
+00013750: 6469 6e67 0a20 202d 6320 6163 6365 6c65  ding.  -c accele
+00013760: 7261 746f 723d 6e6f 6e65 2020 2320 4469  rator=none  # Di
+00013770: 7361 626c 6520 7461 7065 2d73 616d 706c  sable tape-sampl
+00013780: 696e 6720 6c6f 6f70 2061 6363 656c 6572  ing loop acceler
+00013790: 6174 696f 6e0a 2020 2d2d 7374 6174 6520  ation.  --state 
+000137a0: 6973 7375 6532 3d31 2020 2020 2023 2045  issue2=1     # E
+000137b0: 6e61 626c 6520 6973 7375 6520 3220 6b65  nable issue 2 ke
+000137c0: 7962 6f61 7264 2065 6d75 6c61 7469 6f6e  yboard emulation
+000137d0: 0a20 202d 2d73 7461 7274 2033 3438 3136  .  --start 34816
+000137e0: 2020 2020 2020 2020 2320 5374 6172 7420          # Start 
+000137f0: 6174 2033 3438 3136 0a0a 7468 656e 3a3a  at 34816..then::
+00013800: 0a0a 2020 2420 7461 7032 736e 612e 7079  ..  $ tap2sna.py
+00013810: 2040 6761 6d65 2e74 3273 0a0a 7769 6c6c   @game.t2s..will
+00013820: 2063 7265 6174 6520 6067 616d 652e 7a38   create `game.z8
+00013830: 3060 2061 7320 6966 2074 6865 2061 7267  0` as if the arg
+00013840: 756d 656e 7473 2073 7065 6369 6669 6564  uments specified
+00013850: 2069 6e20 6067 616d 652e 7432 7360 2068   in `game.t2s` h
+00013860: 6164 2062 6565 6e0a 6769 7665 6e20 6f6e  ad been.given on
+00013870: 2074 6865 2063 6f6d 6d61 6e64 206c 696e   the command lin
+00013880: 652e 2057 6865 6e20 6074 6170 3273 6e61  e. When `tap2sna
+00013890: 2e70 7960 2072 6561 6473 2061 7267 756d  .py` reads argum
+000138a0: 656e 7473 2066 726f 6d20 6120 6669 6c65  ents from a file
+000138b0: 2077 686f 7365 0a6e 616d 6520 656e 6473   whose.name ends
+000138c0: 2077 6974 6820 272e 7432 7327 2c20 7468   with '.t2s', th
+000138d0: 6520 6f75 7470 7574 2073 6e61 7073 686f  e output snapsho
+000138e0: 7420 6669 6c65 6e61 6d65 2064 6566 6175  t filename defau
+000138f0: 6c74 7320 746f 2074 6865 206e 616d 6520  lts to the name 
+00013900: 6f66 0a74 6861 7420 6172 6775 6d65 6e74  of.that argument
+00013910: 7320 6669 6c65 2077 6974 6820 272e 7432  s file with '.t2
+00013920: 7327 2072 6570 6c61 6365 6420 6279 2065  s' replaced by e
+00013930: 6974 6865 7220 272e 7a38 3027 206f 7220  ither '.z80' or 
+00013940: 272e 737a 7827 2028 6465 7065 6e64 696e  '.szx' (dependin
+00013950: 670a 6f6e 2074 6865 2076 616c 7565 206f  g.on the value o
+00013960: 6620 7468 6520 6060 4465 6661 756c 7453  f the ``DefaultS
+00013970: 6e61 7073 686f 7446 6f72 6d61 7460 6020  napshotFormat`` 
+00013980: 636f 6e66 6967 7572 6174 696f 6e20 7061  configuration pa
+00013990: 7261 6d65 7465 7229 2e0a 0a2e 2e20 5f74  rameter)..... _t
+000139a0: 6170 3273 6e61 2d73 696d 2d6c 6f61 643a  ap2sna-sim-load:
+000139b0: 0a0a 5369 6d75 6c61 7465 6420 4c4f 4144  ..Simulated LOAD
+000139c0: 0a5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a  .^^^^^^^^^^^^^^.
+000139d0: 4279 2064 6566 6175 6c74 2c20 6074 6170  By default, `tap
+000139e0: 3273 6e61 2e70 7960 2073 696d 756c 6174  2sna.py` simulat
+000139f0: 6573 2061 2066 7265 7368 6c79 2062 6f6f  es a freshly boo
+00013a00: 7465 6420 3438 4b20 5a58 2053 7065 6374  ted 48K ZX Spect
+00013a10: 7275 6d20 7275 6e6e 696e 670a 4c4f 4144  rum running.LOAD
+00013a20: 2022 2220 286f 7220 4c4f 4144 2022 2243   "" (or LOAD ""C
+00013a30: 4f44 452c 2069 6620 7468 6520 6669 7273  ODE, if the firs
+00013a40: 7420 626c 6f63 6b20 6f6e 2074 6865 2074  t block on the t
+00013a50: 6170 6520 6973 2061 2027 4279 7465 7327  ape is a 'Bytes'
+00013a60: 2068 6561 6465 7229 2e0a 5768 656e 6576   header)..Whenev
+00013a70: 6572 2074 6865 2053 7065 6374 7275 6d20  er the Spectrum 
+00013a80: 524f 4d27 7320 6c6f 6164 2072 6f75 7469  ROM's load routi
+00013a90: 6e65 2061 7420 2430 3535 3620 6973 2063  ne at $0556 is c
+00013aa0: 616c 6c65 642c 2061 2073 686f 7274 6375  alled, a shortcu
+00013ab0: 7420 6973 0a74 616b 656e 2062 7920 2266  t is.taken by "f
+00013ac0: 6173 7420 6c6f 6164 696e 6722 2074 6865  ast loading" the
+00013ad0: 206e 6578 7420 626c 6f63 6b20 6f6e 2074   next block on t
+00013ae0: 6865 2074 6170 652e 2041 6c6c 206f 7468  he tape. All oth
+00013af0: 6572 2063 6f64 6520 2869 6e63 6c75 6469  er code (includi
+00013b00: 6e67 0a61 6e79 2063 7573 746f 6d20 6c6f  ng.any custom lo
+00013b10: 6164 6572 2920 6973 2066 756c 6c79 2073  ader) is fully s
+00013b20: 696d 756c 6174 6564 2e20 5369 6d75 6c61  imulated. Simula
+00013b30: 7469 6f6e 2063 6f6e 7469 6e75 6573 2075  tion continues u
+00013b40: 6e74 696c 2074 6865 2070 726f 6772 616d  ntil the program
+00013b50: 0a63 6f75 6e74 6572 2068 6974 7320 7468  .counter hits th
+00013b60: 6520 7374 6172 7420 6164 6472 6573 7320  e start address 
+00013b70: 6769 7665 6e20 6279 2074 6865 2060 602d  given by the ``-
+00013b80: 2d73 7461 7274 6060 206f 7074 696f 6e2c  -start`` option,
+00013b90: 206f 7220 3135 206d 696e 7574 6573 0a6f   or 15 minutes.o
+00013ba0: 6620 7369 6d75 6c61 7465 6420 5a38 3020  f simulated Z80 
+00013bb0: 4350 5520 7469 6d65 2068 6173 2065 6c61  CPU time has ela
+00013bc0: 7073 6564 2c20 6f72 2074 6865 2065 6e64  psed, or the end
+00013bd0: 206f 6620 7468 6520 7461 7065 2069 7320   of the tape is 
+00013be0: 7265 6163 6865 6420 616e 640a 6f6e 6520  reached and.one 
+00013bf0: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
+00013c00: 2063 6f6e 6469 7469 6f6e 7320 6973 2073   conditions is s
+00013c10: 6174 6973 6669 6564 3a0a 0a2a 2061 2063  atisfied:..* a c
+00013c20: 7573 746f 6d20 6c6f 6164 6572 2077 6173  ustom loader was
+00013c30: 2064 6574 6563 7465 640a 2a20 7468 6520   detected.* the 
+00013c40: 7072 6f67 7261 6d20 636f 756e 7465 7220  program counter 
+00013c50: 6869 7473 2061 6e20 6164 6472 6573 7320  hits an address 
+00013c60: 6f75 7473 6964 6520 7468 6520 524f 4d0a  outside the ROM.
+00013c70: 2a20 6d6f 7265 2074 6861 6e20 6f6e 6520  * more than one 
+00013c80: 7365 636f 6e64 206f 6620 7369 6d75 6c61  second of simula
+00013c90: 7465 6420 5a38 3020 4350 5520 7469 6d65  ted Z80 CPU time
+00013ca0: 2068 6173 2065 6c61 7073 6564 2073 696e   has elapsed sin
+00013cb0: 6365 2074 6865 2065 6e64 206f 660a 2020  ce the end of.  
+00013cc0: 7468 6520 7461 7065 2077 6173 2072 6561  the tape was rea
+00013cd0: 6368 6564 0a0a 4120 7369 6d75 6c61 7465  ched..A simulate
+00013ce0: 6420 4c4f 4144 2063 616e 2061 6c73 6f20  d LOAD can also 
+00013cf0: 6265 2061 626f 7274 6564 2062 7920 7072  be aborted by pr
+00013d00: 6573 7369 6e67 2043 7472 6c2d 432e 2057  essing Ctrl-C. W
+00013d10: 6865 6e20 6120 7369 6d75 6c61 7465 6420  hen a simulated 
+00013d20: 4c4f 4144 0a68 6173 2063 6f6d 706c 6574  LOAD.has complet
+00013d30: 6564 206f 7220 6265 656e 2061 626f 7274  ed or been abort
+00013d40: 6564 2c20 7468 6520 7661 6c75 6573 206f  ed, the values o
+00013d50: 6620 7468 6520 7265 6769 7374 6572 7320  f the registers 
+00013d60: 2869 6e63 6c75 6469 6e67 2074 6865 0a70  (including the.p
+00013d70: 726f 6772 616d 2063 6f75 6e74 6572 2920  rogram counter) 
+00013d80: 696e 2074 6865 2073 696d 756c 6174 6f72  in the simulator
+00013d90: 2061 7265 2075 7365 6420 746f 2070 6f70   are used to pop
+00013da0: 756c 6174 6520 7468 6520 736e 6170 7368  ulate the snapsh
+00013db0: 6f74 2e0a 0a41 2073 696d 756c 6174 6564  ot...A simulated
+00013dc0: 204c 4f41 4420 6361 6e20 6265 2063 6f6e   LOAD can be con
+00013dd0: 6669 6775 7265 6420 7669 6120 7061 7261  figured via para
+00013de0: 6d65 7465 7273 2074 6861 7420 6172 6520  meters that are 
+00013df0: 7365 7420 6279 2074 6865 0a60 602d 2d73  set by the.``--s
+00013e00: 696d 2d6c 6f61 642d 636f 6e66 6967 6060  im-load-config``
+00013e10: 2028 6f72 2060 602d 6360 6029 206f 7074   (or ``-c``) opt
+00013e20: 696f 6e2e 2054 6865 2072 6563 6f67 6e69  ion. The recogni
+00013e30: 7365 6420 636f 6e66 6967 7572 6174 696f  sed configuratio
+00013e40: 6e0a 7061 7261 6d65 7465 7273 2061 7265  n.parameters are
+00013e50: 3a0a 0a2a 2060 6061 6363 656c 6572 6174  :..* ``accelerat
+00013e60: 652d 6465 632d 6160 6020 2d20 656e 6162  e-dec-a`` - enab
+00013e70: 6c65 2061 6363 656c 6572 6174 696f 6e20  le acceleration 
+00013e80: 6f66 2027 4445 4320 413a 204a 5220 4e5a  of 'DEC A: JR NZ
+00013e90: 2c24 2d31 2720 6465 6c61 7920 6c6f 6f70  ,$-1' delay loop
+00013ea0: 730a 2020 2860 6031 6060 2c20 7468 6520  s.  (``1``, the 
+00013eb0: 6465 6661 756c 7429 2c20 6f72 2027 4445  default), or 'DE
+00013ec0: 4320 413a 204a 5020 4e5a 2c24 2d31 2720  C A: JP NZ,$-1' 
+00013ed0: 6465 6c61 7920 6c6f 6f70 7320 2860 6032  delay loops (``2
+00013ee0: 6060 292c 206f 7220 6e65 6974 6865 720a  ``), or neither.
+00013ef0: 2020 2860 6030 6060 290a 2a20 6060 6163    (``0``).* ``ac
+00013f00: 6365 6c65 7261 746f 7260 6020 2d20 6120  celerator`` - a 
+00013f10: 636f 6d6d 612d 7365 7061 7261 7465 6420  comma-separated 
+00013f20: 6c69 7374 206f 6620 7461 7065 2d73 616d  list of tape-sam
+00013f30: 706c 696e 6720 6c6f 6f70 2061 6363 656c  pling loop accel
+00013f40: 6572 6174 6f72 730a 2020 746f 2075 7365  erators.  to use
+00013f50: 2028 7365 6520 3a72 6566 3a60 7461 7032   (see :ref:`tap2
+00013f60: 736e 612d 6163 6365 6c65 7261 746f 7273  sna-accelerators
+00013f70: 6029 0a2a 2060 6063 6d69 6f60 6020 2d20  `).* ``cmio`` - 
+00013f80: 656e 6162 6c65 2073 696d 756c 6174 696f  enable simulatio
+00013f90: 6e20 6f66 206d 656d 6f72 7920 636f 6e74  n of memory cont
+00013fa0: 656e 7469 6f6e 2061 6e64 2049 2f4f 2063  ention and I/O c
+00013fb0: 6f6e 7465 6e74 696f 6e20 6465 6c61 7973  ontention delays
+00013fc0: 0a20 2028 6060 3160 6029 2c20 6f72 2064  .  (``1``), or d
+00013fd0: 6973 6162 6c65 2069 7420 2860 6030 6060  isable it (``0``
+00013fe0: 293b 2074 6869 7320 6973 2064 6973 6162  ); this is disab
+00013ff0: 6c65 6420 6279 2064 6566 6175 6c74 2074  led by default t
+00014000: 6f20 696d 7072 6f76 650a 2020 7065 7266  o improve.  perf
+00014010: 6f72 6d61 6e63 652c 2062 7574 2073 6f6d  ormance, but som
+00014020: 6520 6c6f 6164 6572 7320 6d61 7920 7265  e loaders may re
+00014030: 7175 6972 6520 6974 3b20 7768 656e 2074  quire it; when t
+00014040: 6869 7320 6973 2065 6e61 626c 6564 2c20  his is enabled, 
+00014050: 616c 6c0a 2020 6163 6365 6c65 7261 7469  all.  accelerati
+00014060: 6f6e 2069 7320 6469 7361 626c 6564 0a2a  on is disabled.*
+00014070: 2060 6066 6173 742d 6c6f 6164 6060 202d   ``fast-load`` -
+00014080: 2065 6e61 626c 6520 6661 7374 206c 6f61   enable fast loa
+00014090: 6469 6e67 2028 6060 3160 602c 2074 6865  ding (``1``, the
+000140a0: 2064 6566 6175 6c74 292c 206f 7220 6469   default), or di
+000140b0: 7361 626c 6520 6974 0a20 2028 6060 3060  sable it.  (``0`
+000140c0: 6029 3b20 6661 7374 206c 6f61 6469 6e67  `); fast loading
+000140d0: 2073 6967 6e69 6669 6361 6e74 6c79 2072   significantly r
+000140e0: 6564 7563 6573 2074 6865 206c 6f61 6420  educes the load 
+000140f0: 7469 6d65 2066 6f72 206d 616e 7920 7461  time for many ta
+00014100: 7065 732c 2062 7574 0a20 2063 616e 2061  pes, but.  can a
+00014110: 6c73 6f20 6361 7573 6520 736f 6d65 206c  lso cause some l
+00014120: 6f61 6465 7273 2074 6f20 6661 696c 0a2a  oaders to fail.*
+00014130: 2060 6066 696e 6973 682d 7461 7065 6060   ``finish-tape``
+00014140: 202d 2072 756e 2074 6865 2074 6170 6520   - run the tape 
+00014150: 746f 2074 6865 2065 6e64 2062 6566 6f72  to the end befor
+00014160: 6520 7374 6f70 7069 6e67 2074 6865 2073  e stopping the s
+00014170: 696d 756c 6174 696f 6e20 6174 0a20 2074  imulation at.  t
+00014180: 6865 2061 6464 7265 7373 2073 7065 6369  he address speci
+00014190: 6669 6564 2062 7920 7468 6520 6060 2d2d  fied by the ``--
+000141a0: 7374 6172 7460 6020 6f70 7469 6f6e 2028  start`` option (
+000141b0: 6060 3160 6029 2c20 6f72 2073 746f 7020  ``1``), or stop 
+000141c0: 7468 650a 2020 7369 6d75 6c61 7469 6f6e  the.  simulation
+000141d0: 2061 7320 736f 6f6e 2061 7320 7468 6174   as soon as that
+000141e0: 2061 6464 7265 7373 2069 7320 7265 6163   address is reac
+000141f0: 6865 642c 2072 6567 6172 646c 6573 7320  hed, regardless 
+00014200: 6f66 2077 6865 7468 6572 2074 6865 2074  of whether the t
+00014210: 6170 650a 2020 6861 7320 6669 6e69 7368  ape.  has finish
+00014220: 6564 2028 6060 3060 602c 2074 6865 2064  ed (``0``, the d
+00014230: 6566 6175 6c74 290a 2a20 6060 6669 7273  efault).* ``firs
+00014240: 742d 6564 6765 6060 202d 2074 6865 2074  t-edge`` - the t
+00014250: 696d 6520 2869 6e20 542d 7374 6174 6573  ime (in T-states
+00014260: 2920 6672 6f6d 2074 6865 2073 7461 7274  ) from the start
+00014270: 206f 6620 7468 6520 7461 7065 2061 7420   of the tape at 
+00014280: 7768 6963 680a 2020 746f 2070 6c61 6365  which.  to place
+00014290: 2074 6865 206c 6561 6469 6e67 2065 6467   the leading edg
+000142a0: 6520 6f66 2074 6865 2066 6972 7374 2070  e of the first p
+000142b0: 756c 7365 2028 6465 6661 756c 743a 2060  ulse (default: `
+000142c0: 6030 6060 290a 2a20 6060 696e 2d66 6c61  `0``).* ``in-fla
+000142d0: 6773 6060 202d 2076 6172 696f 7573 2066  gs`` - various f
+000142e0: 6c61 6773 2073 7065 6369 6679 696e 6720  lags specifying 
+000142f0: 686f 7720 746f 2068 616e 646c 6520 2749  how to handle 'I
+00014300: 4e27 2069 6e73 7472 7563 7469 6f6e 7320  N' instructions 
+00014310: 2873 6565 0a20 2062 656c 6f77 290a 2a20  (see.  below).* 
+00014320: 6060 6c6f 6164 6060 202d 2061 2073 7061  ``load`` - a spa
+00014330: 6365 2d73 6570 6172 6174 6564 206c 6973  ce-separated lis
+00014340: 7420 6f66 206b 6579 7320 746f 2070 7265  t of keys to pre
+00014350: 7373 2074 6f20 6275 696c 6420 616e 2061  ss to build an a
+00014360: 6c74 6572 6e61 7469 7665 0a20 2063 6f6d  lternative.  com
+00014370: 6d61 6e64 206c 696e 6520 746f 206c 6f61  mand line to loa
+00014380: 6420 7468 6520 7461 7065 2028 7365 6520  d the tape (see 
+00014390: 3a72 6566 3a60 7461 7032 736e 612d 6c6f  :ref:`tap2sna-lo
+000143a0: 6164 6029 0a2a 2060 606d 6163 6869 6e65  ad`).* ``machine
+000143b0: 6060 202d 2074 6865 2074 7970 6520 6f66  `` - the type of
+000143c0: 206d 6163 6869 6e65 2074 6f20 7369 6d75   machine to simu
+000143d0: 6c61 7465 3a20 6120 3438 4b20 5370 6563  late: a 48K Spec
+000143e0: 7472 756d 2028 6060 3438 6060 2c20 7468  trum (``48``, th
+000143f0: 650a 2020 6465 6661 756c 7429 2c20 6f72  e.  default), or
+00014400: 2061 2031 3238 4b20 5370 6563 7472 756d   a 128K Spectrum
+00014410: 2028 6060 3132 3860 6029 0a2a 2060 6070   (``128``).* ``p
+00014420: 6175 7365 6060 202d 2070 6175 7365 2074  ause`` - pause t
+00014430: 6865 2074 6170 6520 6265 7477 6565 6e20  he tape between 
+00014440: 626c 6f63 6b73 2061 6e64 2072 6573 756d  blocks and resum
+00014450: 6520 706c 6179 6261 636b 2077 6865 6e20  e playback when 
+00014460: 706f 7274 2032 3534 0a20 2069 7320 7265  port 254.  is re
+00014470: 6164 2028 6060 3160 602c 2074 6865 2064  ad (``1``, the d
+00014480: 6566 6175 6c74 292c 206f 7220 7275 6e20  efault), or run 
+00014490: 7468 6520 7461 7065 2063 6f6e 7469 6e75  the tape continu
+000144a0: 6f75 736c 7920 2860 6030 6060 293b 2070  ously (``0``); p
+000144b0: 6175 7369 6e67 0a20 2063 616e 2068 656c  ausing.  can hel
+000144c0: 7020 7769 7468 2074 6170 6573 2074 6861  p with tapes tha
+000144d0: 7420 7265 7175 6972 6520 2862 7574 2064  t require (but d
+000144e0: 6f20 6e6f 7420 6163 7475 616c 6c79 2063  o not actually c
+000144f0: 6f6e 7461 696e 2920 6c6f 6e67 2070 6175  ontain) long pau
+00014500: 7365 730a 2020 6265 7477 6565 6e20 626c  ses.  between bl
+00014510: 6f63 6b73 2c20 6275 7420 6361 6e20 6361  ocks, but can ca
+00014520: 7573 6520 736f 6d65 206c 6f61 6465 7273  use some loaders
+00014530: 2074 6f20 6661 696c 0a2a 2060 6070 6f6c   to fail.* ``pol
+00014540: 6172 6974 7960 6020 2d20 7468 6520 4541  arity`` - the EA
+00014550: 5220 6269 7420 7265 6164 696e 6720 7072  R bit reading pr
+00014560: 6f64 7563 6564 2062 7920 7468 6520 6669  oduced by the fi
+00014570: 7273 7420 7075 6c73 6520 6f6e 2074 6865  rst pulse on the
+00014580: 2074 6170 653a 0a20 2060 6030 6060 2028   tape:.  ``0`` (
+00014590: 7468 6520 6465 6661 756c 7429 206f 7220  the default) or 
+000145a0: 6060 3160 603b 2073 7562 7365 7175 656e  ``1``; subsequen
+000145b0: 7420 7075 6c73 6573 2067 6976 6520 7265  t pulses give re
+000145c0: 6164 696e 6773 2074 6861 7420 616c 7465  adings that alte
+000145d0: 726e 6174 650a 2020 6265 7477 6565 6e20  rnate.  between 
+000145e0: 3020 616e 6420 310a 2a20 6060 7079 7468  0 and 1.* ``pyth
+000145f0: 6f6e 6060 202d 2077 6865 7468 6572 2074  on`` - whether t
+00014600: 6f20 7573 6520 7468 6520 7075 7265 2050  o use the pure P
+00014610: 7974 686f 6e20 5a38 3020 7369 6d75 6c61  ython Z80 simula
+00014620: 746f 7220 2860 6031 6060 292c 206f 7220  tor (``1``), or 
+00014630: 7468 650a 2020 6d75 6368 2066 6173 7465  the.  much faste
+00014640: 7220 4320 7665 7273 696f 6e20 6966 2061  r C version if a
+00014650: 7661 696c 6162 6c65 2028 6060 3060 602c  vailable (``0``,
+00014660: 2074 6865 2064 6566 6175 6c74 290a 2a20   the default).* 
+00014670: 6060 7469 6d65 6f75 7460 6020 2d20 7468  ``timeout`` - th
+00014680: 6520 6e75 6d62 6572 206f 6620 7365 636f  e number of seco
+00014690: 6e64 7320 6f66 205a 3830 2043 5055 2074  nds of Z80 CPU t
+000146a0: 696d 6520 6166 7465 7220 7768 6963 6820  ime after which 
+000146b0: 746f 2061 626f 7274 2074 6865 0a20 2073  to abort the.  s
+000146c0: 696d 756c 6174 6564 204c 4f41 4420 6966  imulated LOAD if
+000146d0: 2069 7427 7320 7374 696c 6c20 696e 2070   it's still in p
+000146e0: 726f 6772 6573 7320 2864 6566 6175 6c74  rogress (default
+000146f0: 3a20 3930 3029 0a2a 2060 6074 7261 6365  : 900).* ``trace
+00014700: 6060 202d 2074 6865 2066 696c 6520 746f  `` - the file to
+00014710: 2077 6869 6368 2074 6f20 6c6f 6720 616c   which to log al
+00014720: 6c20 696e 7374 7275 6374 696f 6e73 2065  l instructions e
+00014730: 7865 6375 7465 6420 6475 7269 6e67 2074  xecuted during t
+00014740: 6865 0a20 2073 696d 756c 6174 6564 204c  he.  simulated L
+00014750: 4f41 4420 2864 6566 6175 6c74 3a20 6e6f  OAD (default: no
+00014760: 6e65 290a 0a54 6865 2060 6069 6e2d 666c  ne)..The ``in-fl
+00014770: 6167 7360 6020 7061 7261 6d65 7465 7220  ags`` parameter 
+00014780: 6973 2074 6865 2073 756d 206f 6620 7468  is the sum of th
+00014790: 6520 666f 6c6c 6f77 696e 6720 7661 6c75  e following valu
+000147a0: 6573 2c20 6368 6f73 656e 2061 6363 6f72  es, chosen accor
+000147b0: 6469 6e67 0a74 6f20 7468 6520 6465 7369  ding.to the desi
+000147c0: 7265 6420 6265 6861 7669 6f75 723a 0a0a  red behaviour:..
+000147d0: 2a20 3120 2d20 696e 7465 7270 7265 7420  * 1 - interpret 
+000147e0: 2749 4e20 412c 2824 4645 2927 2069 6e73  'IN A,($FE)' ins
+000147f0: 7472 7563 7469 6f6e 7320 696e 2074 6865  tructions in the
+00014800: 2061 6464 7265 7373 2072 616e 6765 2024   address range $
+00014810: 3430 3030 2d24 3746 4646 2061 730a 2020  4000-$7FFF as.  
+00014820: 7265 6164 696e 6720 7468 6520 7461 7065  reading the tape
+00014830: 2028 6279 2064 6566 6175 6c74 2074 6865   (by default the
+00014840: 7920 6172 6520 6967 6e6f 7265 6429 0a2a  y are ignored).*
+00014850: 2032 202d 2069 676e 6f72 6520 2749 4e27   2 - ignore 'IN'
+00014860: 2069 6e73 7472 7563 7469 6f6e 7320 696e   instructions in
+00014870: 2074 6865 2061 6464 7265 7373 2072 616e   the address ran
+00014880: 6765 2024 3430 3030 2d24 4646 4646 2028  ge $4000-$FFFF (
+00014890: 692e 652e 2069 6e20 5241 4d29 0a20 2074  i.e. in RAM).  t
+000148a0: 6861 7420 7265 6164 2070 6f72 7420 2446  hat read port $F
+000148b0: 450a 2a20 3420 2d20 7969 656c 6420 6120  E.* 4 - yield a 
+000148c0: 7369 6d75 6c61 7465 6420 706f 7274 2072  simulated port r
+000148d0: 6561 6469 6e67 2077 6865 6e20 6578 6563  eading when exec
+000148e0: 7574 696e 6720 616e 2027 494e 2072 2c28  uting an 'IN r,(
+000148f0: 4329 2720 696e 7374 7275 6374 696f 6e0a  C)' instruction.
+00014900: 2020 2862 7920 6465 6661 756c 7420 7375    (by default su
+00014910: 6368 2061 6e20 696e 7374 7275 6374 696f  ch an instructio
+00014920: 6e20 616c 7761 7973 2079 6965 6c64 7320  n always yields 
+00014930: 7468 6520 7661 6c75 6520 2446 4629 0a0a  the value $FF)..
+00014940: 4279 2064 6566 6175 6c74 2c20 7468 6520  By default, the 
+00014950: 4541 5220 6269 7420 7265 6164 696e 6720  EAR bit reading 
+00014960: 7072 6f64 7563 6564 2062 7920 6120 7075  produced by a pu
+00014970: 6c73 6520 6973 2030 2069 6620 7468 6520  lse is 0 if the 
+00014980: 302d 6261 7365 6420 696e 6465 780a 6f66  0-based index.of
+00014990: 2074 6865 2070 756c 7365 2069 7320 6576   the pulse is ev
+000149a0: 656e 2028 692e 652e 2066 6972 7374 2c20  en (i.e. first, 
+000149b0: 7468 6972 642c 2066 6966 7468 2070 756c  third, fifth pul
+000149c0: 7365 7320 6574 632e 292c 206f 7220 3120  ses etc.), or 1 
+000149d0: 6f74 6865 7277 6973 652e 0a54 6869 7320  otherwise..This 
+000149e0: 6361 6e20 6265 2072 6576 6572 7365 6420  can be reversed 
+000149f0: 6279 2073 6574 7469 6e67 2060 6070 6f6c  by setting ``pol
+00014a00: 6172 6974 793d 3160 602e 2052 756e 202a  arity=1``. Run *
+00014a10: 7461 7032 736e 612e 7079 2a20 7769 7468  tap2sna.py* with
+00014a20: 2074 6865 0a60 602d 2d74 6170 652d 616e   the.``--tape-an
+00014a30: 616c 7973 6973 6060 206f 7074 696f 6e20  alysis`` option 
+00014a40: 746f 2073 6565 2074 6865 2074 696d 696e  to see the timin
+00014a50: 6773 2061 6e64 2045 4152 2062 6974 2072  gs and EAR bit r
+00014a60: 6561 6469 6e67 7320 6f66 2074 6865 0a70  eadings of the.p
+00014a70: 756c 7365 7320 6f6e 2061 2074 6170 652e  ulses on a tape.
+00014a80: 0a0a 2e2e 205f 7461 7032 736e 612d 6163  .... _tap2sna-ac
+00014a90: 6365 6c65 7261 746f 7273 3a0a 0a41 6363  celerators:..Acc
+00014aa0: 656c 6572 6174 6f72 730a 5e5e 5e5e 5e5e  elerators.^^^^^^
+00014ab0: 5e5e 5e5e 5e5e 0a54 6865 2060 6061 6363  ^^^^^^.The ``acc
+00014ac0: 656c 6572 6174 6f72 6060 2073 696d 756c  elerator`` simul
+00014ad0: 6174 6564 204c 4f41 4420 636f 6e66 6967  ated LOAD config
+00014ae0: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
+00014af0: 7220 6d75 7374 2062 6520 6569 7468 6572  r must be either
+00014b00: 2061 0a63 6f6d 6d61 2d73 6570 6172 6174   a.comma-separat
+00014b10: 6564 206c 6973 7420 6f66 2073 7065 6369  ed list of speci
+00014b20: 6669 6320 6163 6365 6c65 7261 746f 7220  fic accelerator 
+00014b30: 6e61 6d65 7320 6f72 206f 6e65 206f 6620  names or one of 
+00014b40: 7468 6520 666f 6c6c 6f77 696e 670a 7370  the following.sp
+00014b50: 6563 6961 6c20 7661 6c75 6573 3a0a 0a2a  ecial values:..*
+00014b60: 2060 6061 7574 6f60 6020 2d20 7365 6c65   ``auto`` - sele
+00014b70: 6374 2061 6363 656c 6572 6174 6f72 7320  ct accelerators 
+00014b80: 6175 746f 6d61 7469 6361 6c6c 7920 2874  automatically (t
+00014b90: 6869 7320 6973 2074 6865 2064 6566 6175  his is the defau
+00014ba0: 6c74 290a 2a20 6060 6c69 7374 6060 202d  lt).* ``list`` -
+00014bb0: 206c 6973 7420 7468 6520 6163 6365 6c65   list the accele
+00014bc0: 7261 746f 7273 2075 7365 6420 6475 7269  rators used duri
+00014bd0: 6e67 2061 2073 696d 756c 6174 6564 204c  ng a simulated L
+00014be0: 4f41 442c 2061 6c6f 6e67 2077 6974 6820  OAD, along with 
+00014bf0: 7468 650a 2020 6869 742f 6d69 7373 2063  the.  hit/miss c
+00014c00: 6f75 6e74 7320 6765 6e65 7261 7465 6420  ounts generated 
+00014c10: 6279 2074 6865 2074 6170 652d 7361 6d70  by the tape-samp
+00014c20: 6c69 6e67 206c 6f6f 7020 6465 7465 6374  ling loop detect
+00014c30: 6f72 0a2a 2060 606e 6f6e 6560 6020 2d20  or.* ``none`` - 
+00014c40: 6469 7361 626c 6520 6163 6365 6c65 7261  disable accelera
+00014c50: 7469 6f6e 3b20 7468 6520 6c6f 6164 696e  tion; the loadin
+00014c60: 6720 7469 6d65 2066 6f72 2061 2067 616d  g time for a gam
+00014c70: 6520 7769 7468 2061 2063 7573 746f 6d0a  e with a custom.
+00014c80: 2020 6c6f 6164 6572 2074 6861 7420 7573    loader that us
+00014c90: 6573 2061 6e20 756e 7265 636f 676e 6973  es an unrecognis
+00014ca0: 6564 2074 6170 652d 7361 6d70 6c69 6e67  ed tape-sampling
+00014cb0: 206c 6f6f 7020 6d61 7920 6265 2072 6564   loop may be red
+00014cc0: 7563 6564 2062 790a 2020 7370 6563 6966  uced by.  specif
+00014cd0: 7969 6e67 2074 6869 7320 7661 6c75 650a  ying this value.
+00014ce0: 0a54 6865 206f 7574 7075 7420 7072 6f64  .The output prod
+00014cf0: 7563 6564 2062 7920 6060 6163 6365 6c65  uced by ``accele
+00014d00: 7261 746f 723d 6c69 7374 6060 206c 6f6f  rator=list`` loo
+00014d10: 6b73 2073 6f6d 6574 6869 6e67 206c 696b  ks something lik
+00014d20: 6520 7468 6973 3a3a 0a0a 2020 4163 6365  e this::..  Acce
+00014d30: 6c65 7261 746f 7273 3a20 6d69 6372 6f73  lerators: micros
+00014d40: 7068 6572 653a 2036 3639 353b 2072 6f6d  phere: 6695; rom
+00014d50: 3a20 3739 3430 3133 3b20 6d69 7373 6573  : 794013; misses
+00014d60: 3a20 3139 2f39 3b20 6465 632d 613a 2038  : 19/9; dec-a: 8
+00014d70: 3030 3730 382f 302f 3232 340a 0a54 6869  00708/0/224..Thi
+00014d80: 7320 6d65 616e 7320 7468 6174 3a0a 0a2a  s means that:..*
+00014d90: 2074 6865 2060 606d 6963 726f 7370 6865   the ``microsphe
+00014da0: 7265 6060 2061 6e64 2060 6072 6f6d 6060  re`` and ``rom``
+00014db0: 2074 6170 652d 7361 6d70 6c69 6e67 206c   tape-sampling l
+00014dc0: 6f6f 7073 2077 6572 6520 6465 7465 6374  oops were detect
+00014dd0: 6564 2c20 616e 6420 7765 7265 0a20 2065  ed, and were.  e
+00014de0: 6e74 6572 6564 2036 3639 3520 7469 6d65  ntered 6695 time
+00014df0: 7320 616e 6420 3739 3430 3133 2074 696d  s and 794013 tim
+00014e00: 6573 2072 6573 7065 6374 6976 656c 790a  es respectively.
+00014e10: 2a20 3139 2069 6e73 7461 6e63 6573 206f  * 19 instances o
+00014e20: 6620 2749 4e43 2042 2720 6f75 7473 6964  f 'INC B' outsid
+00014e30: 6520 6120 7265 636f 676e 6973 6564 2074  e a recognised t
+00014e40: 6170 652d 7361 6d70 6c69 6e67 206c 6f6f  ape-sampling loo
+00014e50: 7020 7765 7265 0a20 2065 7865 6375 7465  p were.  execute
+00014e60: 642c 2061 6e64 2074 6865 2063 6f72 7265  d, and the corre
+00014e70: 7370 6f6e 6469 6e67 2066 6967 7572 6520  sponding figure 
+00014e80: 666f 7220 2744 4543 2042 2720 6973 2039  for 'DEC B' is 9
+00014e90: 0a2a 2038 3030 3730 3820 2744 4543 2041  .* 800708 'DEC A
+00014ea0: 3a20 4a52 204e 5a2c 242d 3127 2064 656c  : JR NZ,$-1' del
+00014eb0: 6179 206c 6f6f 7073 2077 6572 6520 656e  ay loops were en
+00014ec0: 7465 7265 642c 206e 6f20 2744 4543 2041  tered, no 'DEC A
+00014ed0: 3a20 4a50 204e 5a2c 242d 3127 0a20 2064  : JP NZ,$-1'.  d
+00014ee0: 656c 6179 206c 6f6f 7073 2077 6572 6520  elay loops were 
+00014ef0: 656e 7465 7265 642c 2061 6e64 2032 3234  entered, and 224
+00014f00: 2069 6e73 7461 6e63 6573 206f 6620 2744   instances of 'D
+00014f10: 4543 2041 2720 6f75 7473 6964 6520 7375  EC A' outside su
+00014f20: 6368 2064 656c 6179 0a20 206c 6f6f 7073  ch delay.  loops
+00014f30: 2077 6572 6520 6578 6563 7574 6564 0a0a   were executed..
+00014f40: 5370 6563 6966 7969 6e67 2062 7920 6e61  Specifying by na
+00014f50: 6d65 2074 6865 2074 7970 6573 206f 6620  me the types of 
+00014f60: 7461 7065 2d73 616d 706c 696e 6720 6c6f  tape-sampling lo
+00014f70: 6f70 2075 7365 6420 6279 2061 2067 616d  op used by a gam
+00014f80: 6527 7320 6375 7374 6f6d 0a6c 6f61 6465  e's custom.loade
+00014f90: 7220 6d61 7920 7265 6475 6365 2074 6865  r may reduce the
+00014fa0: 206c 6f61 6469 6e67 2074 696d 652e 2054   loading time. T
+00014fb0: 6865 206e 616d 6573 206f 6620 7468 6520  he names of the 
+00014fc0: 6176 6169 6c61 626c 6520 7461 7065 2d73  available tape-s
+00014fd0: 616d 706c 696e 670a 6c6f 6f70 2061 6363  ampling.loop acc
+00014fe0: 656c 6572 6174 6f72 7320 6172 653a 0a0a  elerators are:..
+00014ff0: 2a20 6060 616c 6b61 7472 617a 6060 2028  * ``alkatraz`` (
+00015000: 416c 6b61 7472 617a 290a 2a20 6060 616c  Alkatraz).* ``al
+00015010: 6b61 7472 617a 2d30 3560 6020 2849 7461  katraz-05`` (Ita
+00015020: 6c79 2031 3939 302c 2049 7461 6c79 2031  ly 1990, Italy 1
+00015030: 3939 3020 2d20 5769 6e6e 6572 7320 4564  990 - Winners Ed
+00015040: 6974 696f 6e29 0a2a 2060 6061 6c6b 6174  ition).* ``alkat
+00015050: 7261 7a2d 3039 6060 2028 4974 616c 7920  raz-09`` (Italy 
+00015060: 3139 3930 2c20 4974 616c 7920 3139 3930  1990, Italy 1990
+00015070: 202d 2057 696e 6e65 7273 2045 6469 7469   - Winners Editi
+00015080: 6f6e 290a 2a20 6060 616c 6b61 7472 617a  on).* ``alkatraz
+00015090: 2d30 6160 6020 2876 6172 696f 7573 2067  -0a`` (various g
+000150a0: 616d 6573 2070 7562 6c69 7368 6564 2062  ames published b
+000150b0: 7920 552e 532e 2047 6f6c 6429 0a2a 2060  y U.S. Gold).* `
+000150c0: 6061 6c6b 6174 7261 7a2d 3062 6060 2028  `alkatraz-0b`` (
+000150d0: 4661 7374 2027 6e27 2046 7572 696f 7573  Fast 'n' Furious
+000150e0: 290a 2a20 6060 616c 6b61 7472 617a 3260  ).* ``alkatraz2`
+000150f0: 6020 2841 6c6b 6174 7261 7a20 3229 0a2a  ` (Alkatraz 2).*
+00015100: 2060 6061 6c74 6572 6e61 7469 7665 6060   ``alternative``
+00015110: 2028 4669 7265 6d61 6e20 5361 6d2c 2048   (Fireman Sam, H
+00015120: 7578 6c65 7920 5069 6729 0a2a 2060 6061  uxley Pig).* ``a
+00015130: 6c74 6572 6e61 7469 7665 3260 6020 284b  lternative2`` (K
+00015140: 656e 7475 636b 7920 5261 6369 6e67 290a  entucky Racing).
+00015150: 2a20 6060 616e 7469 726f 6d60 6020 2842  * ``antirom`` (B
+00015160: 6f78 6529 0a2a 2060 6062 6c65 6570 6c6f  oxe).* ``bleeplo
+00015170: 6164 6060 2028 4669 7265 6269 7264 2042  ad`` (Firebird B
+00015180: 6c65 6570 4c6f 6164 290a 2a20 6060 626f  leepLoad).* ``bo
+00015190: 6775 736c 6177 2d6a 757a 6160 6020 2845  guslaw-juza`` (E
+000151a0: 7572 6f20 4269 7a6e 6573 290a 2a20 6060  uro Biznes).* ``
+000151b0: 6275 6c6c 646f 6760 6020 2852 6967 656c  bulldog`` (Rigel
+000151c0: 2773 2052 6576 656e 6765 290a 2a20 6060  's Revenge).* ``
+000151d0: 6372 6c60 6020 2842 616c 6c20 4272 6561  crl`` (Ball Brea
+000151e0: 6b65 722c 2042 616c 6c62 7265 616b 6572  ker, Ballbreaker
+000151f0: 2049 4929 0a2a 2060 6063 726c 3260 6020   II).* ``crl2`` 
+00015200: 2854 6572 7261 6861 776b 7329 0a2a 2060  (Terrahawks).* `
+00015210: 6063 726c 3360 6020 284f 696e 6b29 0a2a  `crl3`` (Oink).*
+00015220: 2060 6063 726c 3460 6020 2846 6564 6572   ``crl4`` (Feder
+00015230: 6174 696f 6e29 0a2a 2060 6063 7962 6578  ation).* ``cybex
+00015240: 6c61 6260 6020 2831 372e 3131 2e31 3938  lab`` (17.11.198
+00015250: 392c 2042 656c 6567 6f73 742c 2053 7461  9, Belegost, Sta
+00015260: 7266 6f78 290a 2a20 6060 642d 616e 642d  rfox).* ``d-and-
+00015270: 6860 6020 284d 756c 7469 2d50 6c61 7965  h`` (Multi-Playe
+00015280: 7220 536f 6363 6572 204d 616e 6167 6572  r Soccer Manager
+00015290: 290a 2a20 6060 6465 6c70 6869 6e65 6060  ).* ``delphine``
+000152a0: 2028 5a61 6b6c 6961 7479 207a c3a1 6d6f   (Zakliaty z..mo
+000152b0: 6b20 7072 6f67 7261 6dc3 a174 6f72 6f76  k program..torov
+000152c0: 290a 2a20 6060 6465 7369 676e 2d64 6573  ).* ``design-des
+000152d0: 6967 6e60 6020 2876 6172 696f 7573 2067  ign`` (various g
+000152e0: 616d 6573 2070 7562 6c69 7368 6564 2062  ames published b
+000152f0: 7920 4465 7369 676e 2044 6573 6967 6e20  y Design Design 
+00015300: 536f 6674 7761 7265 290a 2a20 6060 6469  Software).* ``di
+00015310: 6769 7461 6c2d 696e 7465 6772 6174 696f  gital-integratio
+00015320: 6e60 6020 2844 6967 6974 616c 2049 6e74  n`` (Digital Int
+00015330: 6567 7261 7469 6f6e 290a 2a20 6060 6469  egration).* ``di
+00015340: 6e61 6c6f 6164 6060 2028 4469 6e61 6c6f  naload`` (Dinalo
+00015350: 6164 290a 2a20 6060 6572 6e69 6577 6172  ad).* ``erniewar
+00015360: 6560 6020 2854 6865 2045 766f 6c75 7469  e`` (The Evoluti
+00015370: 6f6e 2c20 476f 6c65 6d29 0a2a 2060 6067  on, Golem).* ``g
+00015380: 6172 676f 796c 6532 6060 2028 7661 7269  argoyle2`` (vari
+00015390: 6f75 7320 6761 6d65 7320 6372 6561 7465  ous games create
+000153a0: 6420 6f72 2070 7562 6c69 7368 6564 2062  d or published b
+000153b0: 7920 4761 7267 6f79 6c65 2047 616d 6573  y Gargoyle Games
+000153c0: 290a 2a20 6060 6772 656d 6c69 6e60 6020  ).* ``gremlin`` 
+000153d0: 2876 6172 696f 7573 2067 616d 6573 2070  (various games p
+000153e0: 7562 6c69 7368 6564 2062 7920 4772 656d  ublished by Grem
+000153f0: 6c69 6e20 4772 6170 6869 6373 290a 2a20  lin Graphics).* 
+00015400: 6060 6772 656d 6c69 6e32 6060 2028 5375  ``gremlin2`` (Su
+00015410: 7065 7220 4361 7273 290a 2a20 6060 686f  per Cars).* ``ho
+00015420: 7573 656e 6b61 6060 2028 486f 7573 656e  usenka`` (Housen
+00015430: 6b61 290a 2a20 6060 6d69 6372 6f70 726f  ka).* ``micropro
+00015440: 7365 6060 2028 462d 3135 2053 7472 696b  se`` (F-15 Strik
+00015450: 6520 4561 676c 6529 0a2a 2060 606d 6963  e Eagle).* ``mic
+00015460: 726f 7370 6865 7265 6060 2028 4261 636b  rosphere`` (Back
+00015470: 2074 6f20 536b 6f6f 6c2c 2043 6f6e 7461   to Skool, Conta
+00015480: 6374 2053 616d 2043 7275 6973 652c 2053  ct Sam Cruise, S
+00015490: 6b6f 6f6c 2044 617a 652c 2053 6b79 2052  kool Daze, Sky R
+000154a0: 616e 6765 7229 0a2a 2060 606d 6963 726f  anger).* ``micro
+000154b0: 2d73 7479 6c65 6060 2028 5865 6e6f 7068  -style`` (Xenoph
+000154c0: 6f62 6529 0a2a 2060 606d 6972 726f 7273  obe).* ``mirrors
+000154d0: 6f66 7460 6020 2841 6374 696f 6e20 5265  oft`` (Action Re
+000154e0: 666c 6578 290a 2a20 6060 7061 6c61 7360  flex).* ``palas`
+000154f0: 6020 2842 6164 204e 6967 6874 290a 2a20  ` (Bad Night).* 
+00015500: 6060 7061 756c 2d6f 7765 6e73 6060 2028  ``paul-owens`` (
+00015510: 5061 756c 204f 7765 6e73 2050 726f 7465  Paul Owens Prote
+00015520: 6374 696f 6e20 5379 7374 656d 290a 2a20  ction System).* 
+00015530: 6060 7261 786f 6674 6060 2028 5069 736b  ``raxoft`` (Pisk
+00015540: 776f 726b 732c 2050 6f64 7261 7a20 3429  works, Podraz 4)
+00015550: 0a2a 2060 6072 6561 6c74 696d 6560 6020  .* ``realtime`` 
+00015560: 2853 7461 7273 7472 696b 6520 4949 290a  (Starstrike II).
+00015570: 2a20 6060 726f 6d60 6020 2861 6e79 206c  * ``rom`` (any l
+00015580: 6f61 6465 7220 7768 6f73 6520 7361 6d70  oader whose samp
+00015590: 6c69 6e67 206c 6f6f 7020 6973 2074 6865  ling loop is the
+000155a0: 2073 616d 6520 6173 2074 6865 2052 4f4d   same as the ROM
+000155b0: 2773 290a 2a20 6060 7365 6172 6368 2d6c  's).* ``search-l
+000155c0: 6f61 6465 7260 6020 2853 6561 7263 6820  oader`` (Search 
+000155d0: 4c6f 6164 6572 290a 2a20 6060 7369 6c76  Loader).* ``silv
+000155e0: 6572 6269 7264 6060 2028 4f6c 6c69 2026  erbird`` (Olli &
+000155f0: 204c 6973 7361 2049 493a 2048 616c 6c6f   Lissa II: Hallo
+00015600: 7765 656e 290a 2a20 6060 736f 6674 7761  ween).* ``softwa
+00015610: 7265 2d70 726f 6a65 6374 7360 6020 2842  re-projects`` (B
+00015620: 4327 7320 5175 6573 7420 666f 7220 5469  C's Quest for Ti
+00015630: 7265 732c 204c 6f64 6520 5275 6e6e 6572  res, Lode Runner
+00015640: 290a 2a20 6060 7370 6172 6b6c 6572 7360  ).* ``sparklers`
+00015650: 6020 2842 6172 6761 696e 2042 6173 656d  ` (Bargain Basem
+00015660: 656e 742c 2046 6c75 6e6b 7929 0a2a 2060  ent, Flunky).* `
+00015670: 6073 7065 6564 6c6f 636b 6060 2028 5370  `speedlock`` (Sp
+00015680: 6565 646c 6f63 6b20 2d20 616c 6c20 7665  eedlock - all ve
+00015690: 7273 696f 6e73 290a 2a20 6060 7375 7a79  rsions).* ``suzy
+000156a0: 2d73 6f66 7460 6020 2842 6967 2054 726f  -soft`` (Big Tro
+000156b0: 7562 6c65 2c20 4a6f 6520 4261 6e6b 6572  uble, Joe Banker
+000156c0: 2c20 5468 6520 4472 696e 6b65 7229 0a2a  , The Drinker).*
+000156d0: 2060 6073 757a 792d 736f 6674 3260 6020   ``suzy-soft2`` 
+000156e0: 2857 6573 7465 726e 2047 6972 6c29 0a2a  (Western Girl).*
+000156f0: 2060 6074 696e 7960 6020 2849 6c20 436f   ``tiny`` (Il Co
+00015700: 6272 6120 6469 2043 7269 7374 616c 6c6f  bra di Cristallo
+00015710: 2c20 4e65 6779 2061 204e 7965 726f 2c20  , Negy a Nyero, 
+00015720: 5068 616e 746f 6d61 7361 2c20 616e 6420  Phantomasa, and 
+00015730: 6f74 6865 7273 290a 2a20 6060 7573 2d67  others).* ``us-g
+00015740: 6f6c 6460 6020 2847 6175 6e74 6c65 7420  old`` (Gauntlet 
+00015750: 4949 290a 2a20 6060 7765 6972 642d 7363  II).* ``weird-sc
+00015760: 6965 6e63 6560 6020 2846 6c61 7368 2042  ience`` (Flash B
+00015770: 6565 7220 5472 696c 6f67 792c 2047 686f  eer Trilogy, Gho
+00015780: 7374 2043 6173 746c 6573 2c20 5456 2d47  st Castles, TV-G
+00015790: 616d 6529 0a0a 2e2e 205f 7461 7032 736e  ame).... _tap2sn
+000157a0: 612d 6c6f 6164 3a0a 0a4c 4f41 4420 636f  a-load:..LOAD co
+000157b0: 6d6d 616e 640a 5e5e 5e5e 5e5e 5e5e 5e5e  mmand.^^^^^^^^^^
+000157c0: 5e5e 0a54 6865 2060 606c 6f61 6460 6020  ^^.The ``load`` 
+000157d0: 7369 6d75 6c61 7465 6420 4c4f 4144 2063  simulated LOAD c
+000157e0: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
+000157f0: 616d 6574 6572 206d 6179 2062 6520 7573  ameter may be us
+00015800: 6564 2074 6f20 7370 6563 6966 7920 616e  ed to specify an
+00015810: 0a61 6c74 6572 6e61 7469 7665 2063 6f6d  .alternative com
+00015820: 6d61 6e64 206c 696e 6520 746f 206c 6f61  mand line to loa
+00015830: 6420 7468 6520 7461 7065 2069 6e20 6361  d the tape in ca
+00015840: 7365 7320 7768 6572 6520 6e65 6974 6865  ses where neithe
+00015850: 7220 274c 4f41 4420 2222 2720 6e6f 720a  r 'LOAD ""' nor.
+00015860: 274c 4f41 4420 2222 434f 4445 2720 776f  'LOAD ""CODE' wo
+00015870: 726b 732e 2049 7473 2076 616c 7565 2069  rks. Its value i
+00015880: 7320 6120 7370 6163 652d 7365 7061 7261  s a space-separa
+00015890: 7465 6420 6c69 7374 206f 6620 2777 6f72  ted list of 'wor
+000158a0: 6473 2720 2861 2027 776f 7264 270a 6265  ds' (a 'word'.be
+000158b0: 696e 6720 6120 7365 7175 656e 6365 206f  ing a sequence o
+000158c0: 6620 616e 7920 6368 6172 6163 7465 7273  f any characters
+000158d0: 206f 7468 6572 2074 6861 6e20 7370 6163   other than spac
+000158e0: 6529 2c20 6561 6368 206f 6620 7768 6963  e), each of whic
+000158f0: 6820 6973 2062 726f 6b65 6e0a 646f 776e  h is broken.down
+00015900: 2069 6e74 6f20 6120 7365 7175 656e 6365   into a sequence
+00015910: 206f 6620 6f6e 6520 6f72 206d 6f72 6520   of one or more 
+00015920: 6b65 7970 7265 7373 6573 2e20 4966 2061  keypresses. If a
+00015930: 2077 6f72 6420 636f 6e74 6169 6e73 2074   word contains t
+00015940: 6865 2027 2b27 0a73 796d 626f 6c2c 2074  he '+'.symbol, t
+00015950: 6865 2074 6f6b 656e 7320 6974 2073 6570  he tokens it sep
+00015960: 6172 6174 6573 2061 7265 2063 6f6e 7665  arates are conve
+00015970: 7274 6564 2069 6e74 6f20 6b65 7970 7265  rted into keypre
+00015980: 7373 6573 206d 6164 650a 7369 6d75 6c74  sses made.simult
+00015990: 616e 656f 7573 6c79 2e20 4966 2061 2077  aneously. If a w
+000159a0: 6f72 6420 6d61 7463 6865 7320 6120 4241  ord matches a BA
+000159b0: 5349 4320 746f 6b65 6e2c 2074 6865 2063  SIC token, the c
+000159c0: 6f72 7265 7370 6f6e 6469 6e67 2073 6571  orresponding seq
+000159d0: 7565 6e63 6520 6f66 0a6b 6579 7072 6573  uence of.keypres
+000159e0: 7365 7320 746f 2070 726f 6475 6365 2074  ses to produce t
+000159f0: 6861 7420 746f 6b65 6e20 6172 6520 7375  hat token are su
+00015a00: 6273 7469 7475 7465 642e 204f 7468 6572  bstituted. Other
+00015a10: 7769 7365 2c20 6561 6368 2063 6861 7261  wise, each chara
+00015a20: 6374 6572 2069 6e0a 7468 6520 776f 7264  cter in.the word
+00015a30: 2069 7320 636f 6e76 6572 7465 6420 696e   is converted in
+00015a40: 6469 7669 6475 616c 6c79 2069 6e74 6f20  dividually into 
+00015a50: 7468 6520 6170 7072 6f70 7269 6174 6520  the appropriate 
+00015a60: 6b65 7970 7265 7373 6573 2e0a 0a54 6865  keypresses...The
+00015a70: 2066 6f6c 6c6f 7769 6e67 2073 7065 6369   following speci
+00015a80: 616c 2074 6f6b 656e 7320 6172 6520 616c  al tokens are al
+00015a90: 736f 2072 6563 6f67 6e69 7365 643a 0a0a  so recognised:..
+00015aa0: 2a20 6060 4353 6060 202d 2043 4150 5320  * ``CS`` - CAPS 
+00015ab0: 5348 4946 540a 2a20 6060 5353 6060 202d  SHIFT.* ``SS`` -
+00015ac0: 2053 594d 424f 4c20 5348 4946 540a 2a20   SYMBOL SHIFT.* 
+00015ad0: 6060 5350 4143 4560 6020 2d20 5350 4143  ``SPACE`` - SPAC
+00015ae0: 450a 2a20 6060 454e 5445 5260 6020 2d20  E.* ``ENTER`` - 
+00015af0: 454e 5445 520a 2a20 6060 444f 574e 6060  ENTER.* ``DOWN``
+00015b00: 202d 2043 7572 736f 7220 646f 776e 2028   - Cursor down (
+00015b10: 2743 532b 3627 290a 2a20 6060 474f 544f  'CS+6').* ``GOTO
+00015b20: 6060 202d 2047 4f20 544f 2028 2767 2729  `` - GO TO ('g')
+00015b30: 0a2a 2060 6047 4f53 5542 6060 202d 2047  .* ``GOSUB`` - G
+00015b40: 4f20 5355 4220 2827 6827 290a 2a20 6060  O SUB ('h').* ``
+00015b50: 4445 4646 4e60 6020 2d20 4445 4620 464e  DEFFN`` - DEF FN
+00015b60: 2028 2743 532b 5353 2053 532b 3127 290a   ('CS+SS SS+1').
+00015b70: 2a20 6060 4f50 454e 2360 6020 2d20 4f50  * ``OPEN#`` - OP
+00015b80: 454e 2023 2028 2743 532b 5353 2053 532b  EN # ('CS+SS SS+
+00015b90: 3427 290a 2a20 6060 434c 4f53 4523 6060  4').* ``CLOSE#``
+00015ba0: 202d 2043 4c4f 5345 2023 2028 2743 532b   - CLOSE # ('CS+
+00015bb0: 5353 2053 532b 3527 290a 2a20 6060 5043  SS SS+5').* ``PC
+00015bc0: 3d61 6464 7265 7373 6060 202d 2053 746f  =address`` - Sto
+00015bd0: 7020 7468 6520 6b65 7962 6f61 7264 2069  p the keyboard i
+00015be0: 6e70 7574 2073 696d 756c 6174 696f 6e20  nput simulation 
+00015bf0: 6174 2074 6869 7320 6164 6472 6573 730a  at this address.
+00015c00: 0a54 6865 2060 6050 433d 6164 6472 6573  .The ``PC=addres
+00015c10: 7360 6020 746f 6b65 6e2c 2069 6620 7072  s`` token, if pr
+00015c20: 6573 656e 742c 206d 7573 7420 6170 7065  esent, must appe
+00015c30: 6172 206c 6173 742e 2054 6865 2064 6566  ar last. The def
+00015c40: 6175 6c74 2061 6464 7265 7373 2069 730a  ault address is.
+00015c50: 6569 7468 6572 2030 7830 3630 3520 2877  either 0x0605 (w
+00015c60: 6865 6e20 6120 3438 4b20 5370 6563 7472  hen a 48K Spectr
+00015c70: 756d 2069 7320 6265 696e 6720 7369 6d75  um is being simu
+00015c80: 6c61 7465 6429 206f 7220 3078 3133 4245  lated) or 0x13BE
+00015c90: 2028 6f6e 2061 2031 3238 4b0a 5370 6563   (on a 128K.Spec
+00015ca0: 7472 756d 292e 2054 6865 2073 696d 756c  trum). The simul
+00015cb0: 6174 6564 204c 4f41 4420 6265 6769 6e73  ated LOAD begins
+00015cc0: 2061 7420 7468 6973 2061 6464 7265 7373   at this address
+00015cd0: 2e0a 0a60 6045 4e54 4552 6060 2069 7320  ...``ENTER`` is 
+00015ce0: 6175 746f 6d61 7469 6361 6c6c 7920 6170  automatically ap
+00015cf0: 7065 6e64 6564 2074 6f20 7468 6520 636f  pended to the co
+00015d00: 6d6d 616e 6420 6c69 6e65 2069 6620 6e6f  mmand line if no
+00015d10: 7420 616c 7265 6164 7920 7072 6573 656e  t already presen
+00015d20: 742e 0a0a 466f 7220 6578 616d 706c 652c  t...For example,
+00015d30: 2074 6865 2060 606c 6f61 6460 6020 7061   the ``load`` pa
+00015d40: 7261 6d65 7465 7220 6d61 7920 6265 2073  rameter may be s
+00015d50: 6574 2074 6f3a 3a0a 0a20 2043 4c45 4152  et to::..  CLEAR
+00015d60: 2033 3439 3939 3a20 4c4f 4144 2022 2220   34999: LOAD "" 
+00015d70: 434f 4445 203a 2052 414e 444f 4d49 5a45  CODE : RANDOMIZE
+00015d80: 2055 5352 2033 3530 3030 0a0a 4e6f 7465   USR 35000..Note
+00015d90: 2074 6861 7420 7468 6520 7370 6163 6573   that the spaces
+00015da0: 2061 726f 756e 6420 6060 434c 4541 5260   around ``CLEAR`
+00015db0: 602c 2060 604c 4f41 4460 602c 2060 6043  `, ``LOAD``, ``C
+00015dc0: 4f44 4560 602c 2060 6052 414e 444f 4d49  ODE``, ``RANDOMI
+00015dd0: 5a45 6060 2061 6e64 0a60 6055 5352 6060  ZE`` and.``USR``
+00015de0: 2061 7265 2072 6571 7569 7265 6420 696e   are required in
+00015df0: 206f 7264 6572 2066 6f72 2074 6865 6d20   order for them 
+00015e00: 746f 2062 6520 7265 636f 676e 6973 6564  to be recognised
+00015e10: 2061 7320 4241 5349 4320 746f 6b65 6e73   as BASIC tokens
+00015e20: 2e0a 0a2e 2e20 5f74 6170 3273 6e61 2d63  ..... _tap2sna-c
+00015e30: 6f6e 663a 0a0a 436f 6e66 6967 7572 6174  onf:..Configurat
+00015e40: 696f 6e0a 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e  ion.^^^^^^^^^^^^
+00015e50: 5e0a 6074 6170 3273 6e61 2e70 7960 2077  ^.`tap2sna.py` w
+00015e60: 696c 6c20 7265 6164 2063 6f6e 6669 6775  ill read configu
+00015e70: 7261 7469 6f6e 2066 726f 6d20 6120 6669  ration from a fi
+00015e80: 6c65 206e 616d 6564 2060 736b 6f6f 6c6b  le named `skoolk
+00015e90: 6974 2e69 6e69 6020 696e 2074 6865 0a63  it.ini` in the.c
+00015ea0: 7572 7265 6e74 2077 6f72 6b69 6e67 2064  urrent working d
+00015eb0: 6972 6563 746f 7279 206f 7220 696e 2060  irectory or in `
+00015ec0: 7e2f 2e73 6b6f 6f6c 6b69 7460 2c20 6966  ~/.skoolkit`, if
+00015ed0: 2070 7265 7365 6e74 2e20 5468 6520 7265   present. The re
+00015ee0: 636f 676e 6973 6564 0a63 6f6e 6669 6775  cognised.configu
+00015ef0: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+00015f00: 7320 6172 653a 0a0a 2a20 6060 4465 6661  s are:..* ``Defa
+00015f10: 756c 7453 6e61 7073 686f 7446 6f72 6d61  ultSnapshotForma
+00015f20: 7460 6020 2d20 7468 6520 666f 726d 6174  t`` - the format
+00015f30: 206f 6620 7468 6520 736e 6170 7368 6f74   of the snapshot
+00015f40: 2077 7269 7474 656e 2077 6865 6e20 6e6f   written when no
+00015f50: 206f 7574 7075 740a 2020 736e 6170 7368   output.  snapsh
+00015f60: 6f74 2061 7267 756d 656e 7420 6973 2073  ot argument is s
+00015f70: 7065 6369 6669 6564 3b20 7661 6c69 6420  pecified; valid 
+00015f80: 7661 6c75 6573 2061 7265 2060 607a 3830  values are ``z80
+00015f90: 6060 2028 7468 6520 6465 6661 756c 7429  `` (the default)
+00015fa0: 2061 6e64 0a20 2060 6073 7a78 6060 0a2a   and.  ``szx``.*
+00015fb0: 2060 6054 7261 6365 4c69 6e65 6060 202d   ``TraceLine`` -
+00015fc0: 2074 6865 2066 6f72 6d61 7420 6f66 2065   the format of e
+00015fd0: 6163 6820 6c69 6e65 2069 6e20 7468 6520  ach line in the 
+00015fe0: 7472 6163 6520 6c6f 6720 6669 6c65 2066  trace log file f
+00015ff0: 6f72 2061 2073 696d 756c 6174 6564 0a20  or a simulated. 
+00016000: 204c 4f41 4420 2864 6566 6175 6c74 3a20   LOAD (default: 
+00016010: 6060 247b 7063 3a30 3458 7d20 7b69 7d60  ``${pc:04X} {i}`
+00016020: 6029 0a2a 2060 6054 7261 6365 4f70 6572  `).* ``TraceOper
+00016030: 616e 6460 6020 2d20 7468 6520 7072 6566  and`` - the pref
+00016040: 6978 2c20 6279 7465 2066 6f72 6d61 742c  ix, byte format,
+00016050: 2061 6e64 2077 6f72 6420 666f 726d 6174   and word format
+00016060: 2066 6f72 2074 6865 206e 756d 6572 6963   for the numeric
+00016070: 0a20 206f 7065 7261 6e64 7320 6f66 2069  .  operands of i
+00016080: 6e73 7472 7563 7469 6f6e 7320 696e 2074  nstructions in t
+00016090: 6865 2074 7261 6365 206c 6f67 2066 696c  he trace log fil
+000160a0: 6520 666f 7220 6120 7369 6d75 6c61 7465  e for a simulate
+000160b0: 6420 4c4f 4144 2c0a 2020 7365 7061 7261  d LOAD,.  separa
+000160c0: 7465 6420 6279 2063 6f6d 6d61 7320 2864  ted by commas (d
+000160d0: 6566 6175 6c74 3a20 6060 242c 3032 582c  efault: ``$,02X,
+000160e0: 3034 5860 6029 3b20 7468 6520 6279 7465  04X``); the byte
+000160f0: 2061 6e64 2077 6f72 6420 666f 726d 6174   and word format
+00016100: 7320 6172 650a 2020 7374 616e 6461 7264  s are.  standard
+00016110: 2050 7974 686f 6e20 666f 726d 6174 2073   Python format s
+00016120: 7065 6369 6669 6572 7320 666f 7220 6e75  pecifiers for nu
+00016130: 6d65 7269 6320 7661 6c75 6573 2c20 616e  meric values, an
+00016140: 6420 6465 6661 756c 7420 746f 2065 6d70  d default to emp
+00016150: 7479 0a20 2073 7472 696e 6773 2069 6620  ty.  strings if 
+00016160: 6e6f 7420 7375 7070 6c69 6564 0a0a 6060  not supplied..``
+00016170: 5472 6163 654c 696e 6560 6020 6973 2061  TraceLine`` is a
+00016180: 2073 7461 6e64 6172 6420 5079 7468 6f6e   standard Python
+00016190: 2066 6f72 6d61 7420 7374 7269 6e67 2074   format string t
+000161a0: 6861 7420 7265 636f 676e 6973 6573 2074  hat recognises t
+000161b0: 6865 2066 6f6c 6c6f 7769 6e67 0a72 6570  he following.rep
+000161c0: 6c61 6365 6d65 6e74 2066 6965 6c64 733a  lacement fields:
+000161d0: 0a0a 2a20 6060 6960 6020 2d20 7468 6520  ..* ``i`` - the 
+000161e0: 6375 7272 656e 7420 696e 7374 7275 6374  current instruct
+000161f0: 696f 6e0a 2a20 6060 7063 6060 202d 2074  ion.* ``pc`` - t
+00016200: 6865 2061 6464 7265 7373 206f 6620 7468  he address of th
+00016210: 6520 6375 7272 656e 7420 696e 7374 7275  e current instru
+00016220: 6374 696f 6e20 2870 726f 6772 616d 2063  ction (program c
+00016230: 6f75 6e74 6572 290a 2a20 6060 725b 585d  ounter).* ``r[X]
+00016240: 6060 202d 2074 6865 2027 5827 2072 6567  `` - the 'X' reg
+00016250: 6973 7465 7220 2873 6565 2062 656c 6f77  ister (see below
+00016260: 290a 2a20 6060 7460 6020 2d20 7468 6520  ).* ``t`` - the 
+00016270: 6375 7272 656e 7420 7469 6d65 7374 616d  current timestam
+00016280: 700a 0a54 6865 2072 6567 6973 7465 7220  p..The register 
+00016290: 6e61 6d65 2060 6058 6060 2069 6e20 6060  name ``X`` in ``
+000162a0: 725b 585d 6060 206d 7573 7420 6265 206f  r[X]`` must be o
+000162b0: 6e65 206f 6620 7468 6520 666f 6c6c 6f77  ne of the follow
+000162c0: 696e 673a 3a0a 0a20 2061 2062 2063 2064  ing::..  a b c d
+000162d0: 2065 2066 2068 206c 2062 6320 6465 2068   e f h l bc de h
+000162e0: 6c0a 2020 5e61 205e 6220 5e63 205e 6420  l.  ^a ^b ^c ^d 
+000162f0: 5e65 205e 6620 5e68 205e 6c20 5e62 6320  ^e ^f ^h ^l ^bc 
+00016300: 5e64 6520 5e68 6c0a 2020 6978 2069 7868  ^de ^hl.  ix ixh
+00016310: 2069 786c 2069 7920 6979 6820 6979 6c0a   ixl iy iyh iyl.
+00016320: 2020 6920 7220 7370 0a0a 5468 6520 6e61    i r sp..The na
+00016330: 6d65 7320 7468 6174 2062 6567 696e 2077  mes that begin w
+00016340: 6974 6820 6060 5e60 6020 6465 6e6f 7465  ith ``^`` denote
+00016350: 2074 6865 2073 6861 646f 7720 7265 6769   the shadow regi
+00016360: 7374 6572 732e 0a0a 5468 6520 6375 7272  sters...The curr
+00016370: 656e 7420 7469 6d65 7374 616d 7020 2860  ent timestamp (`
+00016380: 6074 6060 2920 6973 2074 6865 206e 756d  `t``) is the num
+00016390: 6265 7220 6f66 2054 2d73 7461 7465 7320  ber of T-states 
+000163a0: 7468 6174 2068 6176 6520 656c 6170 7365  that have elapse
+000163b0: 6420 7369 6e63 650a 7468 6520 7374 6172  d since.the star
+000163c0: 7420 6f66 2074 6865 2073 696d 756c 6174  t of the simulat
+000163d0: 696f 6e2c 2061 6363 6f72 6469 6e67 2074  ion, according t
+000163e0: 6f20 7468 6520 7369 6d75 6c61 746f 7227  o the simulator'
+000163f0: 7320 696e 7465 726e 616c 2063 6c6f 636b  s internal clock
+00016400: 2e20 496e 0a6f 7264 6572 2074 6f20 6d61  . In.order to ma
+00016410: 696e 7461 696e 2073 796e 6368 726f 6e69  intain synchroni
+00016420: 7361 7469 6f6e 2077 6974 6820 7468 6520  sation with the 
+00016430: 7461 7065 2062 6569 6e67 206c 6f61 6465  tape being loade
+00016440: 642c 2074 6865 2073 696d 756c 6174 6f72  d, the simulator
+00016450: 2773 0a63 6c6f 636b 2069 7320 6164 6a75  's.clock is adju
+00016460: 7374 6564 2074 6f20 6d61 7463 6820 7468  sted to match th
+00016470: 6520 7469 6d65 7374 616d 7020 6f66 2074  e timestamp of t
+00016480: 6865 2066 6972 7374 2070 756c 7365 2069  he first pulse i
+00016490: 6e20 6561 6368 2062 6c6f 636b 2028 6173  n each block (as
+000164a0: 0a73 686f 776e 2062 7920 7468 6520 6060  .shown by the ``
+000164b0: 2d2d 7461 7065 2d61 6e61 6c79 7369 7360  --tape-analysis`
+000164c0: 6020 6f70 7469 6f6e 2920 7768 656e 2074  ` option) when t
+000164d0: 6861 7420 626c 6f63 6b20 6973 2072 6561  hat block is rea
+000164e0: 6368 6564 2e20 2854 6865 0a73 696d 756c  ched. (The.simul
+000164f0: 6174 6f72 2773 2063 6c6f 636b 206d 6179  ator's clock may
+00016500: 2061 7420 7469 6d65 7320 6265 636f 6d65   at times become
+00016510: 2064 6573 796e 6368 726f 6e69 7365 6420   desynchronised 
+00016520: 7769 7468 2074 6865 2074 6170 6520 6265  with the tape be
+00016530: 6361 7573 652c 2062 790a 6465 6661 756c  cause, by.defaul
+00016540: 742c 2074 6865 2074 6170 6520 6973 2070  t, the tape is p
+00016550: 6175 7365 6420 6265 7477 6565 6e20 626c  aused between bl
+00016560: 6f63 6b73 2c20 616e 6420 7265 7375 6d65  ocks, and resume
+00016570: 6420 7768 656e 2070 6f72 7420 3235 3420  d when port 254 
+00016580: 6973 2072 6561 642e 290a 0a43 6f6e 6669  is read.)..Confi
+00016590: 6775 7261 7469 6f6e 2070 6172 616d 6574  guration paramet
+000165a0: 6572 7320 6d75 7374 2061 7070 6561 7220  ers must appear 
+000165b0: 696e 2061 2060 605b 7461 7032 736e 615d  in a ``[tap2sna]
+000165c0: 6060 2073 6563 7469 6f6e 2e20 466f 7220  `` section. For 
+000165d0: 6578 616d 706c 652c 0a74 6f20 6d61 6b65  example,.to make
+000165e0: 2060 7461 7032 736e 612e 7079 6020 7772   `tap2sna.py` wr
+000165f0: 6974 6520 696e 7374 7275 6374 696f 6e20  ite instruction 
+00016600: 6164 6472 6573 7365 7320 616e 6420 6f70  addresses and op
+00016610: 6572 616e 6473 2069 6e20 6120 7472 6163  erands in a trac
+00016620: 6520 6c6f 670a 6669 6c65 2069 6e20 6465  e log.file in de
+00016630: 6369 6d61 6c20 666f 726d 6174 2062 7920  cimal format by 
+00016640: 6465 6661 756c 742c 2061 6464 2074 6865  default, add the
+00016650: 2066 6f6c 6c6f 7769 6e67 2073 6563 7469   following secti
+00016660: 6f6e 2074 6f0a 6073 6b6f 6f6c 6b69 742e  on to.`skoolkit.
+00016670: 696e 6960 3a3a 0a0a 2020 5b74 6170 3273  ini`::..  [tap2s
+00016680: 6e61 5d0a 2020 5472 6163 654c 696e 653d  na].  TraceLine=
+00016690: 7b70 633a 3035 7d20 7b69 7d0a 2020 5472  {pc:05} {i}.  Tr
+000166a0: 6163 654f 7065 7261 6e64 3d0a 0a43 6f6e  aceOperand=..Con
+000166b0: 6669 6775 7261 7469 6f6e 2070 6172 616d  figuration param
+000166c0: 6574 6572 7320 6d61 7920 616c 736f 2062  eters may also b
+000166d0: 6520 7365 7420 6f6e 2074 6865 2063 6f6d  e set on the com
+000166e0: 6d61 6e64 206c 696e 6520 6279 2075 7369  mand line by usi
+000166f0: 6e67 2074 6865 0a60 602d 2d69 6e69 6060  ng the.``--ini``
+00016700: 206f 7074 696f 6e2e 2050 6172 616d 6574   option. Paramet
+00016710: 6572 2076 616c 7565 7320 7365 7420 7468  er values set th
+00016720: 6973 2077 6179 2077 696c 6c20 6f76 6572  is way will over
+00016730: 7269 6465 2061 6e79 2066 6f75 6e64 2069  ride any found i
+00016740: 6e0a 6073 6b6f 6f6c 6b69 742e 696e 6960  n.`skoolkit.ini`
+00016750: 2e0a 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d  ...+---------+--
+00016760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000167a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000167b0: 342e 3520 2020 2020 7c20 4164 6465 6420  4.5     | Added 
-000167c0: 7375 7070 6f72 7420 666f 7220 545a 5820  support for TZX 
-000167d0: 626c 6f63 6b20 7479 7065 2030 7831 3420  block type 0x14 
-000167e0: 2870 7572 6520 6461 7461 292c 2066 6f72  (pure data), for
-000167f0: 206c 6f61 6469 6e67 2020 2020 7c0a 7c20   loading    |.| 
-00016800: 2020 2020 2020 2020 7c20 7468 6520 6669          | the fi
-00016810: 7273 7420 616e 6420 6c61 7374 2062 7974  rst and last byt
-00016820: 6573 206f 6620 6120 7461 7065 2062 6c6f  es of a tape blo
-00016830: 636b 2c20 616e 6420 666f 7220 6d6f 6469  ck, and for modi
-00016840: 6679 696e 6720 2020 2020 2020 7c0a 7c20  fying       |.| 
-00016850: 2020 2020 2020 2020 7c20 6d65 6d6f 7279          | memory
-00016860: 2077 6974 6820 584f 5220 616e 6420 4144   with XOR and AD
-00016870: 4420 6f70 6572 6174 696f 6e73 2020 2020  D operations    
-00016880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016890: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-000168a0: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-000168b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000168c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000168d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000168e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 7c20  ------------+.| 
-000168f0: 332e 3520 2020 2020 7c20 4e65 7720 2020  3.5     | New   
-00016900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016930: 2020 2020 2020 2020 2020 2020 7c0a 2b2d              |.+-
-00016940: 2d2d 2d2d 2d2d 2d2d 2b2d 2d2d 2d2d 2d2d  --------+-------
-00016950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2b0a 0a2e  ------------+...
-00016990: 2e20 5f74 6170 696e 666f 2e70 793a 0a0a  . _tapinfo.py:..
-000169a0: 7461 7069 6e66 6f2e 7079 0a2d 2d2d 2d2d  tapinfo.py.-----
-000169b0: 2d2d 2d2d 2d0a 6074 6170 696e 666f 2e70  -----.`tapinfo.p
-000169c0: 7960 2073 686f 7773 2069 6e66 6f72 6d61  y` shows informa
-000169d0: 7469 6f6e 206f 6e20 7468 6520 626c 6f63  tion on the bloc
-000169e0: 6b73 2069 6e20 6120 5441 5020 6f72 2054  ks in a TAP or T
-000169f0: 5a58 2066 696c 652e 2046 6f72 0a65 7861  ZX file. For.exa
-00016a00: 6d70 6c65 3a3a 0a0a 2020 2420 7461 7069  mple::..  $ tapi
-00016a10: 6e66 6f2e 7079 2067 616d 652e 747a 780a  nfo.py game.tzx.
-00016a20: 0a54 6f20 6c69 7374 2074 6865 206f 7074  .To list the opt
-00016a30: 696f 6e73 2073 7570 706f 7274 6564 2062  ions supported b
-00016a40: 7920 6074 6170 696e 666f 2e70 7960 2c20  y `tapinfo.py`, 
-00016a50: 7275 6e20 6974 2077 6974 6820 6e6f 2061  run it with no a
-00016a60: 7267 756d 656e 7473 3a3a 0a0a 2020 7573  rguments::..  us
-00016a70: 6167 653a 2074 6170 696e 666f 2e70 7920  age: tapinfo.py 
-00016a80: 4649 4c45 0a0a 2020 5368 6f77 2074 6865  FILE..  Show the
-00016a90: 2062 6c6f 636b 7320 696e 2061 2054 4150   blocks in a TAP
-00016aa0: 206f 7220 545a 5820 6669 6c65 2e0a 0a20   or TZX file... 
-00016ab0: 204f 7074 696f 6e73 3a0a 2020 2020 2d62   Options:.    -b
-00016ac0: 204e 5b2c 415d 2c20 2d2d 6261 7369 6320   N[,A], --basic 
-00016ad0: 4e5b 2c41 5d0a 2020 2020 2020 2020 2020  N[,A].          
-00016ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016af0: 4c69 7374 2074 6865 2042 4153 4943 2070  List the BASIC p
-00016b00: 726f 6772 616d 2069 6e20 626c 6f63 6b20  rogram in block 
-00016b10: 4e20 6c6f 6164 6564 2061 7420 6164 6472  N loaded at addr
-00016b20: 6573 7320 410a 2020 2020 2020 2020 2020  ess A.          
-00016b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b40: 2864 6566 6175 6c74 2032 3337 3535 292e  (default 23755).
-00016b50: 0a20 2020 202d 642c 202d 2d64 6174 6120  .    -d, --data 
-00016b60: 2020 2020 2020 2020 2020 2053 686f 7720             Show 
-00016b70: 7468 6520 656e 7469 7265 2063 6f6e 7465  the entire conte
-00016b80: 6e74 7320 6f66 2068 6561 6465 7220 616e  nts of header an
-00016b90: 6420 6461 7461 2062 6c6f 636b 732e 0a20  d data blocks.. 
-00016ba0: 2020 202d 562c 202d 2d76 6572 7369 6f6e     -V, --version
-00016bb0: 2020 2020 2020 2020 2053 686f 7720 536b           Show Sk
-00016bc0: 6f6f 6c4b 6974 2076 6572 7369 6f6e 206e  oolKit version n
-00016bd0: 756d 6265 7220 616e 6420 6578 6974 2e0a  umber and exit..
-00016be0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00016bf0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016c00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00016c30: 0a7c 2056 6572 7369 6f6e 207c 2043 6861  .| Version | Cha
-00016c40: 6e67 6573 2020 2020 2020 2020 2020 2020  nges            
-00016c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c70: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00016c80: 0a2b 3d3d 3d3d 3d3d 3d3d 3d2b 3d3d 3d3d  .+=========+====
-00016c90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016cb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016cc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d2b  ===============+
-00016cd0: 0a7c 2039 2e30 2020 2020 207c 2053 686f  .| 9.0     | Sho
-00016ce0: 7773 2074 6865 204c 494e 4520 6e75 6d62  ws the LINE numb
-00016cf0: 6572 2028 6966 2070 7265 7365 6e74 2920  er (if present) 
-00016d00: 666f 7220 2750 726f 6772 616d 3a27 2068  for 'Program:' h
-00016d10: 6561 6465 7220 626c 6f63 6b73 3b20 207c  eader blocks;  |
-00016d20: 0a7c 2020 2020 2020 2020 207c 2072 656e  .|         | ren
-00016d30: 6465 7273 2042 4153 4943 2074 6f6b 656e  ders BASIC token
-00016d40: 7320 696e 2068 6561 6465 7220 626c 6f63  s in header bloc
-00016d50: 6b20 6e61 6d65 7320 2020 2020 2020 2020  k names         
-00016d60: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00016d70: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00016d80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016d90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00016dc0: 0a7c 2038 2e39 2020 2020 207c 2053 686f  .| 8.9     | Sho
-00016dd0: 7773 2066 756c 6c20 696e 666f 2066 6f72  ws full info for
-00016de0: 2054 5a58 2062 6c6f 636b 2074 7970 6573   TZX block types
-00016df0: 2030 7831 3020 616e 6420 3078 3131 2020   0x10 and 0x11  
-00016e00: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00016e10: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+000167a0: 2d2b 0a7c 2056 6572 7369 6f6e 207c 2043  -+.| Version | C
+000167b0: 6861 6e67 6573 2020 2020 2020 2020 2020  hanges          
+000167c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000167f0: 207c 0a2b 3d3d 3d3d 3d3d 3d3d 3d2b 3d3d   |.+=========+==
+00016800: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016810: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016820: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016830: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016840: 3d2b 0a7c 2039 2e32 2020 2020 207c 2041  =+.| 9.2     | A
+00016850: 6464 6564 2073 7570 706f 7274 2066 6f72  dded support for
+00016860: 2054 5a58 2062 6c6f 636b 2074 7970 6520   TZX block type 
+00016870: 3078 3135 2028 6469 7265 6374 2072 6563  0x15 (direct rec
+00016880: 6f72 6469 6e67 293b 2061 6464 6564 2020  ording); added  
+00016890: 207c 0a7c 2020 2020 2020 2020 207c 2074   |.|         | t
+000168a0: 6865 2060 6070 7974 686f 6e60 6020 7369  he ``python`` si
+000168b0: 6d75 6c61 7465 6420 4c4f 4144 2063 6f6e  mulated LOAD con
+000168c0: 6669 6775 7261 7469 6f6e 2070 6172 616d  figuration param
+000168d0: 6574 6572 2020 2020 2020 2020 2020 2020  eter            
+000168e0: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+000168f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016930: 2d2b 0a7c 2039 2e31 2020 2020 207c 2054  -+.| 9.1     | T
+00016940: 6865 2060 602d 2d72 616d 206d 6f76 6560  he ``--ram move`
+00016950: 6020 616e 6420 6060 2d2d 7261 6d20 706f  ` and ``--ram po
+00016960: 6b65 6060 206f 7074 696f 6e73 2063 616e  ke`` options can
+00016970: 206d 6f64 6966 7920 7370 6563 6966 6963   modify specific
+00016980: 207c 0a7c 2020 2020 2020 2020 207c 2052   |.|         | R
+00016990: 414d 2062 616e 6b73 3b20 6164 6465 6420  AM banks; added 
+000169a0: 7468 6520 6060 636d 696f 6060 2073 696d  the ``cmio`` sim
+000169b0: 756c 6174 6564 204c 4f41 4420 636f 6e66  ulated LOAD conf
+000169c0: 6967 7572 6174 696f 6e20 2020 2020 2020  iguration       
+000169d0: 207c 0a7c 2020 2020 2020 2020 207c 2070   |.|         | p
+000169e0: 6172 616d 6574 6572 2020 2020 2020 2020  arameter        
+000169f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a20: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00016a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016a70: 2d2b 0a7c 2039 2e30 2020 2020 207c 2041  -+.| 9.0     | A
+00016a80: 2073 696d 756c 6174 6564 204c 4f41 4420   simulated LOAD 
+00016a90: 6973 2070 6572 666f 726d 6564 2062 7920  is performed by 
+00016aa0: 6465 6661 756c 743b 2061 6e20 6578 6973  default; an exis
+00016ab0: 7469 6e67 2073 6e61 7073 686f 7420 2020  ting snapshot   
+00016ac0: 207c 0a7c 2020 2020 2020 2020 207c 2077   |.|         | w
+00016ad0: 696c 6c20 6265 206f 7665 7277 7269 7474  ill be overwritt
+00016ae0: 656e 2062 7920 6465 6661 756c 743b 2061  en by default; a
+00016af0: 6464 6564 2074 6865 2060 606c 6f61 6460  dded the ``load`
+00016b00: 602c 2060 606d 6163 6869 6e65 6060 2c20  `, ``machine``, 
+00016b10: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00016b20: 6070 6f6c 6172 6974 7960 6020 616e 6420  `polarity`` and 
+00016b30: 6060 696e 2d66 6c61 6773 6060 2073 696d  ``in-flags`` sim
+00016b40: 756c 6174 6564 204c 4f41 4420 636f 6e66  ulated LOAD conf
+00016b50: 6967 7572 6174 696f 6e20 2020 2020 2020  iguration       
+00016b60: 207c 0a7c 2020 2020 2020 2020 207c 2070   |.|         | p
+00016b70: 6172 616d 6574 6572 733b 2074 6865 206f  arameters; the o
+00016b80: 7574 7075 7420 736e 6170 7368 6f74 2061  utput snapshot a
+00016b90: 7267 756d 656e 7420 6973 206f 7074 696f  rgument is optio
+00016ba0: 6e61 6c3b 2061 6464 6564 2020 2020 2020  nal; added      
+00016bb0: 207c 0a7c 2020 2020 2020 2020 207c 2073   |.|         | s
+00016bc0: 7570 706f 7274 2066 6f72 2077 7269 7469  upport for writi
+00016bd0: 6e67 2053 5a58 2073 6e61 7073 686f 7473  ng SZX snapshots
+00016be0: 3b20 6164 6465 6420 7468 6520 2020 2020  ; added the     
+00016bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016c00: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00016c10: 6044 6566 6175 6c74 536e 6170 7368 6f74  `DefaultSnapshot
+00016c20: 466f 726d 6174 6060 2063 6f6e 6669 6775  Format`` configu
+00016c30: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
+00016c40: 3b20 6164 6465 6420 7468 6520 2020 2020  ; added the     
+00016c50: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00016c60: 6066 6560 6020 6861 7264 7761 7265 2073  `fe`` hardware s
+00016c70: 7461 7465 2061 7474 7269 6275 7465 3b20  tate attribute; 
+00016c80: 6164 6465 6420 7375 7070 6f72 7420 666f  added support fo
+00016c90: 7220 7265 6769 7374 6572 2070 6169 7273  r register pairs
+00016ca0: 207c 0a7c 2020 2020 2020 2020 207c 2028   |.|         | (
+00016cb0: 6060 725b 6263 5d60 602c 2060 6072 5b64  ``r[bc]``, ``r[d
+00016cc0: 655d 6060 2065 7463 2e29 2069 6e20 7468  e]`` etc.) in th
+00016cd0: 6520 6060 5472 6163 654c 696e 6560 6020  e ``TraceLine`` 
+00016ce0: 636f 6e66 6967 7572 6174 696f 6e20 2020  configuration   
+00016cf0: 207c 0a7c 2020 2020 2020 2020 207c 2070   |.|         | p
+00016d00: 6172 616d 6574 6572 3b20 6164 6465 6420  arameter; added 
+00016d10: 7468 6520 6060 616e 7469 726f 6d60 602c  the ``antirom``,
+00016d20: 2060 6065 726e 6965 7761 7265 6060 2061   ``ernieware`` a
+00016d30: 6e64 2060 6068 6f75 7365 6e6b 6160 6020  nd ``housenka`` 
+00016d40: 207c 0a7c 2020 2020 2020 2020 207c 2074   |.|         | t
+00016d50: 6170 652d 7361 6d70 6c69 6e67 206c 6f6f  ape-sampling loo
+00016d60: 7020 6163 6365 6c65 7261 746f 7273 3b20  p accelerators; 
+00016d70: 7368 6f77 7320 2744 4543 2041 2720 6465  shows 'DEC A' de
+00016d80: 6c61 7920 6c6f 6f70 2020 2020 2020 2020  lay loop        
+00016d90: 207c 0a7c 2020 2020 2020 2020 207c 2073   |.|         | s
+00016da0: 7461 7469 7374 6963 7320 7768 656e 2060  tatistics when `
+00016db0: 6061 6363 656c 6572 6174 6f72 3d6c 6973  `accelerator=lis
+00016dc0: 7460 6020 2020 2020 2020 2020 2020 2020  t``             
+00016dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016de0: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00016df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00016e10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00016e20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00016e60: 0a7c 2038 2e33 2020 2020 207c 2041 6464  .| 8.3     | Add
-00016e70: 6564 2074 6865 2060 602d 2d64 6174 6160  ed the ``--data`
-00016e80: 6020 6f70 7469 6f6e 2020 2020 2020 2020  ` option        
-00016e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ea0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00016eb0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00016ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00016f00: 0a7c 2038 2e31 2020 2020 207c 2053 686f  .| 8.1     | Sho
-00016f10: 7773 2063 6f6e 7465 6e74 7320 6f66 2054  ws contents of T
-00016f20: 5a58 2062 6c6f 636b 2074 7970 6573 2030  ZX block types 0
-00016f30: 7833 3320 2868 6172 6477 6172 6520 7479  x33 (hardware ty
-00016f40: 7065 2920 616e 6420 3078 3335 2020 207c  pe) and 0x35   |
-00016f50: 0a7c 2020 2020 2020 2020 207c 2028 6375  .|         | (cu
-00016f60: 7374 6f6d 2069 6e66 6f29 2020 2020 2020  stom info)      
-00016f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f90: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00016fa0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00016fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00016fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00016ff0: 0a7c 2037 2e31 2020 2020 207c 2053 686f  .| 7.1     | Sho
-00017000: 7773 2070 756c 7365 206c 656e 6774 6873  ws pulse lengths
-00017010: 2069 6e20 545a 5820 626c 6f63 6b20 7479   in TZX block ty
-00017020: 7065 2030 7831 3320 616e 6420 6675 6c6c  pe 0x13 and full
-00017030: 2069 6e66 6f20 666f 7220 545a 5820 207c   info for TZX  |
-00017040: 0a7c 2020 2020 2020 2020 207c 2062 6c6f  .|         | blo
-00017050: 636b 2074 7970 6520 3078 3134 2020 2020  ck type 0x14    
-00017060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017080: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00017090: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-000170a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000170b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000170c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000170d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-000170e0: 0a7c 2036 2e32 2020 2020 207c 2054 6865  .| 6.2     | The
-000170f0: 2060 602d 2d62 6173 6963 6060 206f 7074   ``--basic`` opt
-00017100: 696f 6e20 6163 6365 7074 7320 6120 6865  ion accepts a he
-00017110: 7861 6465 6369 6d61 6c20 6164 6472 6573  xadecimal addres
-00017120: 7320 7072 6566 6978 6564 2062 7920 207c  s prefixed by  |
-00017130: 0a7c 2020 2020 2020 2020 207c 2027 3078  .|         | '0x
-00017140: 2720 2020 2020 2020 2020 2020 2020 2020  '               
-00017150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017170: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00017180: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00017190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000171a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000171b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000171c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-000171d0: 0a7c 2036 2e30 2020 2020 207c 2041 6464  .| 6.0     | Add
-000171e0: 6564 2074 6865 2060 602d 2d62 6173 6963  ed the ``--basic
-000171f0: 6060 206f 7074 696f 6e20 2020 2020 2020  `` option       
-00017200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017210: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00017220: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-00017230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00017270: 0a7c 2035 2e30 2020 2020 207c 204e 6577  .| 5.0     | New
-00017280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000172a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000172b0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-000172c0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
-000172d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000172e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000172f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00017300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
-00017310: 0a0a 2e2e 205f 7472 6163 652e 7079 3a0a  .... _trace.py:.
-00017320: 0a74 7261 6365 2e70 790a 2d2d 2d2d 2d2d  .trace.py.------
-00017330: 2d2d 0a60 7472 6163 652e 7079 6020 7369  --.`trace.py` si
-00017340: 6d75 6c61 7465 7320 7468 6520 6578 6563  mulates the exec
-00017350: 7574 696f 6e20 6f66 206d 6163 6869 6e65  ution of machine
-00017360: 2063 6f64 6520 696e 2061 2034 384b 206f   code in a 48K o
-00017370: 7220 3132 384b 206d 656d 6f72 790a 736e  r 128K memory.sn
-00017380: 6170 7368 6f74 2e20 466f 7220 6578 616d  apshot. For exam
-00017390: 706c 653a 3a0a 0a20 2024 2074 7261 6365  ple::..  $ trace
-000173a0: 2e70 7920 2d2d 7374 6172 7420 3332 3736  .py --start 3276
-000173b0: 3820 2d2d 7374 6f70 2034 3931 3532 2067  8 --stop 49152 g
-000173c0: 616d 652e 7a38 300a 0a54 6f20 6c69 7374  ame.z80..To list
-000173d0: 2074 6865 206f 7074 696f 6e73 2073 7570   the options sup
-000173e0: 706f 7274 6564 2062 7920 6074 7261 6365  ported by `trace
-000173f0: 2e70 7960 2c20 7275 6e20 6974 2077 6974  .py`, run it wit
-00017400: 6820 6e6f 2061 7267 756d 656e 7473 3a3a  h no arguments::
-00017410: 0a0a 2020 7573 6167 653a 2074 7261 6365  ..  usage: trace
-00017420: 2e70 7920 5b6f 7074 696f 6e73 5d20 4649  .py [options] FI
-00017430: 4c45 205b 4f55 5446 494c 455d 0a0a 2020  LE [OUTFILE]..  
-00017440: 5472 6163 6520 5a38 3020 6d61 6368 696e  Trace Z80 machin
-00017450: 6520 636f 6465 2065 7865 6375 7469 6f6e  e code execution
-00017460: 2e20 4649 4c45 206d 6179 2062 6520 6120  . FILE may be a 
-00017470: 6269 6e61 7279 2028 7261 7720 6d65 6d6f  binary (raw memo
-00017480: 7279 2920 6669 6c65 2c20 610a 2020 534e  ry) file, a.  SN
-00017490: 412c 2053 5a58 206f 7220 5a38 3020 736e  A, SZX or Z80 sn
-000174a0: 6170 7368 6f74 2c20 6f72 2027 3438 2720  apshot, or '48' 
-000174b0: 6f72 2027 3132 3827 2066 6f72 206e 6f20  or '128' for no 
-000174c0: 736e 6170 7368 6f74 2e20 4966 2027 4f55  snapshot. If 'OU
-000174d0: 5446 494c 4527 2069 730a 2020 6769 7665  TFILE' is.  give
-000174e0: 6e2c 2061 6e20 535a 5820 6f72 205a 3830  n, an SZX or Z80
-000174f0: 2073 6e61 7073 686f 7420 6973 2077 7269   snapshot is wri
-00017500: 7474 656e 2061 6674 6572 2065 7865 6375  tten after execu
-00017510: 7469 6f6e 2068 6173 2063 6f6d 706c 6574  tion has complet
-00017520: 6564 2e0a 0a20 204f 7074 696f 6e73 3a0a  ed...  Options:.
-00017530: 2020 2020 2d2d 6175 6469 6f20 2020 2020      --audio     
-00017540: 2020 2020 2020 2020 2020 5368 6f77 2061            Show a
-00017550: 7564 696f 2064 656c 6179 732e 0a20 2020  udio delays..   
-00017560: 202d 632c 202d 2d63 6d69 6f20 2020 2020   -c, --cmio     
-00017570: 2020 2020 2020 2053 696d 756c 6174 6520         Simulate 
-00017580: 6d65 6d6f 7279 2061 6e64 2049 2f4f 2063  memory and I/O c
-00017590: 6f6e 7465 6e74 696f 6e2e 0a20 2020 202d  ontention..    -
-000175a0: 2d64 6570 7468 2044 4550 5448 2020 2020  -depth DEPTH    
-000175b0: 2020 2020 2053 696d 706c 6966 7920 6175       Simplify au
-000175c0: 6469 6f20 6465 6c61 7973 2074 6f20 7468  dio delays to th
-000175d0: 6973 2064 6570 7468 2028 6465 6661 756c  is depth (defaul
-000175e0: 743a 2032 292e 0a20 2020 202d 442c 202d  t: 2)..    -D, -
-000175f0: 2d64 6563 696d 616c 2020 2020 2020 2020  -decimal        
-00017600: 2053 686f 7720 6465 6369 6d61 6c20 7661   Show decimal va
-00017610: 6c75 6573 2069 6e20 7665 7262 6f73 6520  lues in verbose 
-00017620: 6d6f 6465 2e0a 2020 2020 2d49 2070 3d76  mode..    -I p=v
-00017630: 2c20 2d2d 696e 6920 703d 7620 2020 2020  , --ini p=v     
-00017640: 5365 7420 7468 6520 7661 6c75 6520 6f66  Set the value of
-00017650: 2074 6865 2063 6f6e 6669 6775 7261 7469   the configurati
-00017660: 6f6e 2070 6172 616d 6574 6572 2027 7027  on parameter 'p'
-00017670: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
-00017680: 2020 2020 2020 2020 2020 2020 2020 2776                'v
-00017690: 272e 2054 6869 7320 6f70 7469 6f6e 206d  '. This option m
-000176a0: 6179 2062 6520 7573 6564 206d 756c 7469  ay be used multi
-000176b0: 706c 6520 7469 6d65 732e 0a20 2020 202d  ple times..    -
-000176c0: 6d20 4d41 582c 202d 2d6d 6178 2d6f 7065  m MAX, --max-ope
-000176d0: 7261 7469 6f6e 7320 4d41 580a 2020 2020  rations MAX.    
-000176e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000176f0: 2020 2020 2020 4d61 7869 6d75 6d20 6e75        Maximum nu
-00017700: 6d62 6572 206f 6620 696e 7374 7275 6374  mber of instruct
-00017710: 696f 6e73 2074 6f20 6578 6563 7574 652e  ions to execute.
-00017720: 0a20 2020 202d 4d20 4d41 582c 202d 2d6d  .    -M MAX, --m
-00017730: 6178 2d74 7374 6174 6573 204d 4158 0a20  ax-tstates MAX. 
-00017740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017750: 2020 2020 2020 2020 204d 6178 696d 756d           Maximum
-00017760: 206e 756d 6265 7220 6f66 2054 2d73 7461   number of T-sta
-00017770: 7465 7320 746f 2072 756e 2066 6f72 2e0a  tes to run for..
-00017780: 2020 2020 2d6e 2c20 2d2d 6e6f 2d69 6e74      -n, --no-int
-00017790: 6572 7275 7074 7320 2020 446f 6e27 7420  errupts   Don't 
-000177a0: 6578 6563 7574 6520 696e 7465 7272 7570  execute interrup
-000177b0: 7420 726f 7574 696e 6573 2e0a 2020 2020  t routines..    
-000177c0: 2d6f 2041 4444 522c 202d 2d6f 7267 2041  -o ADDR, --org A
-000177d0: 4444 5220 2020 5370 6563 6966 7920 7468  DDR   Specify th
-000177e0: 6520 6f72 6967 696e 2061 6464 7265 7373  e origin address
-000177f0: 206f 6620 6120 6269 6e61 7279 2028 7261   of a binary (ra
-00017800: 7720 6d65 6d6f 7279 290a 2020 2020 2020  w memory).      
-00017810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017820: 2020 2020 6669 6c65 2028 6465 6661 756c      file (defaul
-00017830: 743a 2036 3535 3336 202d 206c 656e 6774  t: 65536 - lengt
-00017840: 6829 2e0a 2020 2020 2d70 205b 703a 5d61  h)..    -p [p:]a
-00017850: 5b2d 625b 2d63 5d5d 2c5b 5e2b 5d76 2c20  [-b[-c]],[^+]v, 
-00017860: 2d2d 706f 6b65 205b 703a 5d61 5b2d 625b  --poke [p:]a[-b[
-00017870: 2d63 5d5d 2c5b 5e2b 5d76 0a20 2020 2020  -c]],[^+]v.     
-00017880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017890: 2020 2020 2050 4f4b 4520 4e2c 7620 696e       POKE N,v in
-000178a0: 2052 414d 2062 616e 6b20 7020 666f 7220   RAM bank p for 
-000178b0: 4e20 696e 207b 612c 2061 2b63 2c20 612b  N in {a, a+c, a+
-000178c0: 3263 2e2e 2e2c 2062 7d2e 0a20 2020 2020  2c..., b}..     
-000178d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000178e0: 2020 2020 2050 7265 6669 7820 2776 2720       Prefix 'v' 
-000178f0: 7769 7468 2027 5e27 2074 6f20 7065 7266  with '^' to perf
-00017900: 6f72 6d20 616e 2058 4f52 206f 7065 7261  orm an XOR opera
-00017910: 7469 6f6e 2c20 6f72 0a20 2020 2020 2020  tion, or.       
-00017920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017930: 2020 2027 2b27 2074 6f20 7065 7266 6f72     '+' to perfor
-00017940: 6d20 616e 2041 4444 206f 7065 7261 7469  m an ADD operati
-00017950: 6f6e 2e20 5468 6973 206f 7074 696f 6e20  on. This option 
-00017960: 6d61 7920 6265 0a20 2020 2020 2020 2020  may be.         
-00017970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017980: 2075 7365 6420 6d75 6c74 6970 6c65 2074   used multiple t
-00017990: 696d 6573 2e0a 2020 2020 2d72 206e 616d  imes..    -r nam
-000179a0: 653d 7661 6c75 652c 202d 2d72 6567 206e  e=value, --reg n
-000179b0: 616d 653d 7661 6c75 650a 2020 2020 2020  ame=value.      
-000179c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000179d0: 2020 2020 5365 7420 7468 6520 7661 6c75      Set the valu
-000179e0: 6520 6f66 2061 2072 6567 6973 7465 722e  e of a register.
-000179f0: 2044 6f20 272d 2d72 6567 2068 656c 7027   Do '--reg help'
-00017a00: 2066 6f72 206d 6f72 650a 2020 2020 2020   for more.      
-00017a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a20: 2020 2020 696e 666f 726d 6174 696f 6e2e      information.
-00017a30: 2054 6869 7320 6f70 7469 6f6e 206d 6179   This option may
-00017a40: 2062 6520 7573 6564 206d 756c 7469 706c   be used multipl
-00017a50: 6520 7469 6d65 732e 0a20 2020 202d 2d72  e times..    --r
-00017a60: 6f6d 2046 494c 4520 2020 2020 2020 2020  om FILE         
-00017a70: 2020 2050 6174 6368 2069 6e20 6120 524f     Patch in a RO
-00017a80: 4d20 6174 2061 6464 7265 7373 2030 2066  M at address 0 f
-00017a90: 726f 6d20 7468 6973 2066 696c 652e 0a20  rom this file.. 
-00017aa0: 2020 202d 2d73 686f 772d 636f 6e66 6967     --show-config
-00017ab0: 2020 2020 2020 2020 2053 686f 7720 636f           Show co
-00017ac0: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
-00017ad0: 6d65 7465 7220 7661 6c75 6573 2e0a 2020  meter values..  
-00017ae0: 2020 2d73 2041 4444 522c 202d 2d73 7461    -s ADDR, --sta
-00017af0: 7274 2041 4444 520a 2020 2020 2020 2020  rt ADDR.        
-00017b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b10: 2020 5374 6172 7420 6578 6563 7574 696f    Start executio
-00017b20: 6e20 6174 2074 6869 7320 6164 6472 6573  n at this addres
-00017b30: 732e 0a20 2020 202d 5320 4144 4452 2c20  s..    -S ADDR, 
-00017b40: 2d2d 7374 6f70 2041 4444 5220 2053 746f  --stop ADDR  Sto
-00017b50: 7020 6578 6563 7574 696f 6e20 6174 2074  p execution at t
-00017b60: 6869 7320 6164 6472 6573 732e 0a20 2020  his address..   
-00017b70: 202d 2d73 7461 7473 2020 2020 2020 2020   --stats        
-00017b80: 2020 2020 2020 2053 686f 7720 7374 6174         Show stat
-00017b90: 7320 6166 7465 7220 6578 6563 7574 696f  s after executio
-00017ba0: 6e2e 0a20 2020 202d 762c 202d 2d76 6572  n..    -v, --ver
-00017bb0: 626f 7365 2020 2020 2020 2020 2053 686f  bose         Sho
-00017bc0: 7720 6578 6563 7574 6564 2069 6e73 7472  w executed instr
-00017bd0: 7563 7469 6f6e 732e 2052 6570 6561 7420  uctions. Repeat 
-00017be0: 7468 6973 206f 7074 696f 6e20 746f 2073  this option to s
-00017bf0: 686f 770a 2020 2020 2020 2020 2020 2020  how.            
-00017c00: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00017c10: 6769 7374 6572 2076 616c 7565 7320 746f  gister values to
-00017c20: 6f2e 0a20 2020 202d 562c 202d 2d76 6572  o..    -V, --ver
-00017c30: 7369 6f6e 2020 2020 2020 2020 2053 686f  sion         Sho
-00017c40: 7720 536b 6f6f 6c4b 6974 2076 6572 7369  w SkoolKit versi
-00017c50: 6f6e 206e 756d 6265 7220 616e 6420 6578  on number and ex
-00017c60: 6974 2e0a 0a42 7920 6465 6661 756c 742c  it...By default,
-00017c70: 2060 7472 6163 652e 7079 6020 7369 6c65   `trace.py` sile
-00017c80: 6e74 6c79 2073 696d 756c 6174 6573 2063  ntly simulates c
-00017c90: 6f64 6520 6578 6563 7574 696f 6e20 6265  ode execution be
-00017ca0: 6769 6e6e 696e 6720 7769 7468 2074 6865  ginning with the
-00017cb0: 0a69 6e73 7472 7563 7469 6f6e 2061 7420  .instruction at 
-00017cc0: 7468 6520 6164 6472 6573 7320 7370 6563  the address spec
-00017cd0: 6966 6965 6420 6279 2074 6865 2060 602d  ified by the ``-
-00017ce0: 2d73 7461 7274 6060 206f 7074 696f 6e20  -start`` option 
-00017cf0: 286f 7220 7468 6520 7072 6f67 7261 6d0a  (or the program.
-00017d00: 636f 756e 7465 7220 696e 2074 6865 2073  counter in the s
-00017d10: 6e61 7073 686f 7429 2061 6e64 2065 6e64  napshot) and end
-00017d20: 696e 6720 7768 656e 2074 6865 2069 6e73  ing when the ins
-00017d30: 7472 7563 7469 6f6e 2061 7420 7468 6520  truction at the 
-00017d40: 6164 6472 6573 730a 7370 6563 6966 6965  address.specifie
-00017d50: 6420 6279 2060 602d 2d73 746f 7060 6020  d by ``--stop`` 
-00017d60: 2869 6620 616e 7929 2069 7320 7265 6163  (if any) is reac
-00017d70: 6865 642e 2055 7365 2074 6865 2060 602d  hed. Use the ``-
-00017d80: 2d76 6572 626f 7365 6060 206f 7074 696f  -verbose`` optio
-00017d90: 6e20 746f 0a73 686f 7720 6561 6368 2069  n to.show each i
-00017da0: 6e73 7472 7563 7469 6f6e 2065 7865 6375  nstruction execu
-00017db0: 7465 642e 2052 6570 6561 7420 7468 6520  ted. Repeat the 
-00017dc0: 6060 2d2d 7665 7262 6f73 6560 6020 6f70  ``--verbose`` op
-00017dd0: 7469 6f6e 2028 6060 2d76 7660 6029 2074  tion (``-vv``) t
-00017de0: 6f0a 7368 6f77 2072 6567 6973 7465 7220  o.show register 
-00017df0: 7661 6c75 6573 2074 6f6f 2e0a 0a57 6865  values too...Whe
-00017e00: 6e20 7468 6520 6060 2d2d 6175 6469 6f60  n the ``--audio`
-00017e10: 6020 6f70 7469 6f6e 2069 7320 6769 7665  ` option is give
-00017e20: 6e2c 2060 7472 6163 652e 7079 6020 7472  n, `trace.py` tr
-00017e30: 6163 6b73 2063 6861 6e67 6573 2069 6e20  acks changes in 
-00017e40: 7468 6520 7374 6174 650a 6f66 2074 6865  the state.of the
-00017e50: 205a 5820 5370 6563 7472 756d 2073 7065   ZX Spectrum spe
-00017e60: 616b 6572 2c20 616e 6420 7468 656e 2070  aker, and then p
-00017e70: 7269 6e74 7320 6120 6c69 7374 206f 6620  rints a list of 
-00017e80: 7468 6520 6465 6c61 7973 2028 696e 2054  the delays (in T
-00017e90: 2d73 7461 7465 7329 0a62 6574 7765 656e  -states).between
-00017ea0: 2074 686f 7365 2063 6861 6e67 6573 2e20   those changes. 
-00017eb0: 5468 6973 206c 6973 7420 6361 6e20 6265  This list can be
-00017ec0: 2073 7570 706c 6965 6420 746f 2074 6865   supplied to the
-00017ed0: 203a 7265 663a 6041 5544 494f 6020 6d61   :ref:`AUDIO` ma
-00017ee0: 6372 6f20 746f 0a70 726f 6475 6365 2061  cro to.produce a
-00017ef0: 2057 4156 2066 696c 6520 666f 7220 7468   WAV file for th
-00017f00: 6520 736f 756e 6420 6566 6665 6374 2074  e sound effect t
-00017f10: 6861 7420 776f 756c 6420 6265 2070 726f  hat would be pro
-00017f20: 6475 6365 6420 6279 2074 6865 2073 616d  duced by the sam
-00017f30: 6520 636f 6465 0a72 756e 6e69 6e67 206f  e code.running o
-00017f40: 6e20 6120 7265 616c 205a 5820 5370 6563  n a real ZX Spec
-00017f50: 7472 756d 2e0a 0a2e 2e20 5f74 7261 6365  trum..... _trace
-00017f60: 2d63 6f6e 663a 0a0a 436f 6e66 6967 7572  -conf:..Configur
-00017f70: 6174 696f 6e0a 5e5e 5e5e 5e5e 5e5e 5e5e  ation.^^^^^^^^^^
-00017f80: 5e5e 5e0a 6074 7261 6365 2e70 7960 2077  ^^^.`trace.py` w
-00017f90: 696c 6c20 7265 6164 2063 6f6e 6669 6775  ill read configu
-00017fa0: 7261 7469 6f6e 2066 726f 6d20 6120 6669  ration from a fi
-00017fb0: 6c65 206e 616d 6564 2060 736b 6f6f 6c6b  le named `skoolk
-00017fc0: 6974 2e69 6e69 6020 696e 2074 6865 0a63  it.ini` in the.c
-00017fd0: 7572 7265 6e74 2077 6f72 6b69 6e67 2064  urrent working d
-00017fe0: 6972 6563 746f 7279 206f 7220 696e 2060  irectory or in `
-00017ff0: 7e2f 2e73 6b6f 6f6c 6b69 7460 2c20 6966  ~/.skoolkit`, if
-00018000: 2070 7265 7365 6e74 2e20 5468 6520 7265   present. The re
-00018010: 636f 676e 6973 6564 0a63 6f6e 6669 6775  cognised.configu
-00018020: 7261 7469 6f6e 2070 6172 616d 6574 6572  ration parameter
-00018030: 7320 6172 653a 0a0a 2a20 6060 5472 6163  s are:..* ``Trac
-00018040: 654c 696e 6560 6020 2d20 7468 6520 666f  eLine`` - the fo
-00018050: 726d 6174 206f 6620 6561 6368 2069 6e73  rmat of each ins
-00018060: 7472 7563 7469 6f6e 206c 696e 6520 7768  truction line wh
-00018070: 656e 2060 602d 7660 6020 6973 2075 7365  en ``-v`` is use
-00018080: 640a 2020 2864 6566 6175 6c74 3a20 6060  d.  (default: ``
-00018090: 247b 7063 3a30 3458 7d20 7b69 7d60 6029  ${pc:04X} {i}``)
-000180a0: 0a2a 2060 6054 7261 6365 4c69 6e65 3260  .* ``TraceLine2`
-000180b0: 6020 2d20 7468 6520 666f 726d 6174 206f  ` - the format o
-000180c0: 6620 6561 6368 2069 6e73 7472 7563 7469  f each instructi
-000180d0: 6f6e 206c 696e 6520 7768 656e 2060 602d  on line when ``-
-000180e0: 7676 6060 2069 7320 7573 6564 0a20 2028  vv`` is used.  (
-000180f0: 7573 6520 6060 2d2d 7368 6f77 2d63 6f6e  use ``--show-con
-00018100: 6669 6760 6020 746f 2073 6565 2074 6865  fig`` to see the
-00018110: 2064 6566 6175 6c74 2076 616c 7565 290a   default value).
-00018120: 2a20 6060 5472 6163 654c 696e 6544 6563  * ``TraceLineDec
-00018130: 696d 616c 6060 202d 2074 6865 2066 6f72  imal`` - the for
-00018140: 6d61 7420 6f66 2065 6163 6820 696e 7374  mat of each inst
-00018150: 7275 6374 696f 6e20 6c69 6e65 2077 6865  ruction line whe
-00018160: 6e20 6060 2d44 7660 6020 6973 0a20 2075  n ``-Dv`` is.  u
-00018170: 7365 6420 2864 6566 6175 6c74 3a20 6060  sed (default: ``
-00018180: 7b70 633a 3035 7d20 7b69 7d60 6029 0a2a  {pc:05} {i}``).*
-00018190: 2060 6054 7261 6365 4c69 6e65 4465 6369   ``TraceLineDeci
-000181a0: 6d61 6c32 6060 202d 2074 6865 2066 6f72  mal2`` - the for
-000181b0: 6d61 7420 6f66 2065 6163 6820 696e 7374  mat of each inst
-000181c0: 7275 6374 696f 6e20 6c69 6e65 2077 6865  ruction line whe
-000181d0: 6e20 6060 2d44 7676 6060 2069 730a 2020  n ``-Dvv`` is.  
-000181e0: 7573 6564 2028 7573 6520 6060 2d2d 7368  used (use ``--sh
-000181f0: 6f77 2d63 6f6e 6669 6760 6020 746f 2073  ow-config`` to s
-00018200: 6565 2074 6865 2064 6566 6175 6c74 2076  ee the default v
-00018210: 616c 7565 290a 2a20 6060 5472 6163 654f  alue).* ``TraceO
-00018220: 7065 7261 6e64 6060 202d 2074 6865 2070  perand`` - the p
-00018230: 7265 6669 782c 2062 7974 6520 666f 726d  refix, byte form
-00018240: 6174 2c20 616e 6420 776f 7264 2066 6f72  at, and word for
-00018250: 6d61 7420 666f 7220 7468 6520 6e75 6d65  mat for the nume
-00018260: 7269 630a 2020 6f70 6572 616e 6473 206f  ric.  operands o
-00018270: 6620 696e 7374 7275 6374 696f 6e73 2c20  f instructions, 
-00018280: 7365 7061 7261 7465 6420 6279 2063 6f6d  separated by com
-00018290: 6d61 7320 2864 6566 6175 6c74 3a20 6060  mas (default: ``
-000182a0: 242c 3032 582c 3034 5860 6029 3b20 7468  $,02X,04X``); th
-000182b0: 650a 2020 6279 7465 2061 6e64 2077 6f72  e.  byte and wor
-000182c0: 6420 666f 726d 6174 7320 6172 6520 7374  d formats are st
-000182d0: 616e 6461 7264 2050 7974 686f 6e20 666f  andard Python fo
-000182e0: 726d 6174 2073 7065 6369 6669 6572 7320  rmat specifiers 
-000182f0: 666f 7220 6e75 6d65 7269 630a 2020 7661  for numeric.  va
-00018300: 6c75 6573 2c20 616e 6420 6465 6661 756c  lues, and defaul
-00018310: 7420 746f 2065 6d70 7479 2073 7472 696e  t to empty strin
-00018320: 6773 2069 6620 6e6f 7420 7375 7070 6c69  gs if not suppli
-00018330: 6564 0a2a 2060 6054 7261 6365 4f70 6572  ed.* ``TraceOper
-00018340: 616e 6444 6563 696d 616c 6060 202d 2061  andDecimal`` - a
-00018350: 7320 6060 5472 6163 654f 7065 7261 6e64  s ``TraceOperand
-00018360: 6060 2077 6865 6e20 6060 2d44 6060 2069  `` when ``-D`` i
-00018370: 7320 7573 6564 2028 6465 6661 756c 743a  s used (default:
-00018380: 0a20 2060 602c 2c60 6029 0a0a 5468 6520  .  ``,,``)..The 
-00018390: 6060 5472 6163 654c 696e 652a 6060 2070  ``TraceLine*`` p
-000183a0: 6172 616d 6574 6572 7320 6172 6520 7374  arameters are st
-000183b0: 616e 6461 7264 2050 7974 686f 6e20 666f  andard Python fo
-000183c0: 726d 6174 2073 7472 696e 6773 2074 6861  rmat strings tha
-000183d0: 7420 7265 636f 676e 6973 650a 7468 6520  t recognise.the 
-000183e0: 666f 6c6c 6f77 696e 6720 7265 706c 6163  following replac
-000183f0: 656d 656e 7420 6669 656c 6473 3a0a 0a2a  ement fields:..*
-00018400: 2060 6069 6060 202d 2074 6865 2063 7572   ``i`` - the cur
-00018410: 7265 6e74 2069 6e73 7472 7563 7469 6f6e  rent instruction
-00018420: 0a2a 2060 6070 6360 6020 2d20 7468 6520  .* ``pc`` - the 
-00018430: 6164 6472 6573 7320 6f66 2074 6865 2063  address of the c
-00018440: 7572 7265 6e74 2069 6e73 7472 7563 7469  urrent instructi
-00018450: 6f6e 2028 7072 6f67 7261 6d20 636f 756e  on (program coun
-00018460: 7465 7229 0a2a 2060 6072 5b58 5d60 6020  ter).* ``r[X]`` 
-00018470: 2d20 7468 6520 2758 2720 7265 6769 7374  - the 'X' regist
-00018480: 6572 2028 7365 6520 6265 6c6f 7729 0a2a  er (see below).*
-00018490: 2060 6074 6060 202d 2074 6865 2063 7572   ``t`` - the cur
-000184a0: 7265 6e74 2074 696d 6573 7461 6d70 2028  rent timestamp (
-000184b0: 696e 2054 2d73 7461 7465 7329 0a0a 5468  in T-states)..Th
-000184c0: 6520 7265 6769 7374 6572 206e 616d 6520  e register name 
-000184d0: 6060 5860 6020 696e 2060 6072 5b58 5d60  ``X`` in ``r[X]`
-000184e0: 6020 6d75 7374 2062 6520 6f6e 6520 6f66  ` must be one of
-000184f0: 2074 6865 2066 6f6c 6c6f 7769 6e67 3a3a   the following::
-00018500: 0a0a 2020 6120 6220 6320 6420 6520 6620  ..  a b c d e f 
-00018510: 6820 6c20 6263 2064 6520 686c 0a20 205e  h l bc de hl.  ^
-00018520: 6120 5e62 205e 6320 5e64 205e 6520 5e66  a ^b ^c ^d ^e ^f
-00018530: 205e 6820 5e6c 205e 6263 205e 6465 205e   ^h ^l ^bc ^de ^
-00018540: 686c 0a20 2069 7820 6978 6820 6978 6c20  hl.  ix ixh ixl 
-00018550: 6979 2069 7968 2069 796c 0a20 2069 2072  iy iyh iyl.  i r
-00018560: 2073 700a 0a54 6865 206e 616d 6573 2074   sp..The names t
-00018570: 6861 7420 6265 6769 6e20 7769 7468 2060  hat begin with `
-00018580: 605e 6060 2064 656e 6f74 6520 7468 6520  `^`` denote the 
-00018590: 7368 6164 6f77 2072 6567 6973 7465 7273  shadow registers
-000185a0: 2e0a 0a57 6865 7265 7665 7220 6060 5c6e  ...Wherever ``\n
-000185b0: 6060 2061 7070 6561 7273 2069 6e20 6120  `` appears in a 
-000185c0: 6060 5472 6163 654c 696e 652a 6060 2070  ``TraceLine*`` p
-000185d0: 6172 616d 6574 6572 2076 616c 7565 2c20  arameter value, 
-000185e0: 6974 2069 7320 7265 706c 6163 6564 2062  it is replaced b
-000185f0: 790a 6120 6e65 776c 696e 6520 6368 6172  y.a newline char
-00018600: 6163 7465 722e 0a0a 436f 6e66 6967 7572  acter...Configur
-00018610: 6174 696f 6e20 7061 7261 6d65 7465 7273  ation parameters
-00018620: 206d 7573 7420 6170 7065 6172 2069 6e20   must appear in 
-00018630: 6120 6060 5b74 7261 6365 5d60 6020 7365  a ``[trace]`` se
-00018640: 6374 696f 6e2e 2046 6f72 2065 7861 6d70  ction. For examp
-00018650: 6c65 2c0a 746f 206d 616b 6520 6074 7261  le,.to make `tra
-00018660: 6365 2e70 7960 2077 7269 7465 2061 2074  ce.py` write a t
-00018670: 696d 6573 7461 6d70 2066 6f72 2065 6163  imestamp for eac
-00018680: 6820 696e 7374 7275 6374 696f 6e20 7768  h instruction wh
-00018690: 656e 2060 602d 7660 6020 6973 2075 7365  en ``-v`` is use
-000186a0: 642c 0a61 6464 2074 6865 2066 6f6c 6c6f  d,.add the follo
-000186b0: 7769 6e67 2073 6563 7469 6f6e 2074 6f20  wing section to 
-000186c0: 6073 6b6f 6f6c 6b69 742e 696e 6960 3a3a  `skoolkit.ini`::
-000186d0: 0a0a 2020 5b74 7261 6365 5d0a 2020 5472  ..  [trace].  Tr
-000186e0: 6163 654c 696e 653d 7b74 3a3e 3130 7d20  aceLine={t:>10} 
-000186f0: 247b 7063 3a30 3458 7d20 7b69 7d0a 0a43  ${pc:04X} {i}..C
-00018700: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
-00018710: 616d 6574 6572 7320 6d61 7920 616c 736f  ameters may also
-00018720: 2062 6520 7365 7420 6f6e 2074 6865 2063   be set on the c
-00018730: 6f6d 6d61 6e64 206c 696e 6520 6279 2075  ommand line by u
-00018740: 7369 6e67 2074 6865 0a60 602d 2d69 6e69  sing the.``--ini
-00018750: 6060 206f 7074 696f 6e2e 2050 6172 616d  `` option. Param
-00018760: 6574 6572 2076 616c 7565 7320 7365 7420  eter values set 
-00018770: 7468 6973 2077 6179 2077 696c 6c20 6f76  this way will ov
-00018780: 6572 7269 6465 2061 6e79 2066 6f75 6e64  erride any found
-00018790: 2069 6e0a 6073 6b6f 6f6c 6b69 742e 696e   in.`skoolkit.in
-000187a0: 6960 2e0a 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b  i`...+---------+
-000187b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000187c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000187d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000187e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000187f0: 2d2d 2d2b 0a7c 2056 6572 7369 6f6e 207c  ---+.| Version |
-00018800: 2043 6861 6e67 6573 2020 2020 2020 2020   Changes        
-00018810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018840: 2020 207c 0a2b 3d3d 3d3d 3d3d 3d3d 3d2b     |.+=========+
-00018850: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018860: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018870: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018880: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018890: 3d3d 3d2b 0a7c 2039 2e31 2020 2020 207c  ===+.| 9.1     |
-000188a0: 2054 6865 2060 602d 2d70 6f6b 6560 6020   The ``--poke`` 
-000188b0: 6f70 7469 6f6e 2063 616e 206d 6f64 6966  option can modif
-000188c0: 7920 7370 6563 6966 6963 2052 414d 2062  y specific RAM b
-000188d0: 616e 6b73 3b20 6164 6465 6420 7468 6520  anks; added the 
-000188e0: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-000188f0: 2060 602d 2d63 6d69 6f60 6020 6f70 7469   ``--cmio`` opti
-00018900: 6f6e 2020 2020 2020 2020 2020 2020 2020  on              
-00018910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018930: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
-00018940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018980: 2d2d 2d2b 0a7c 2039 2e30 2020 2020 207c  ---+.| 9.0     |
-00018990: 2043 6f6e 6669 6775 7261 7469 6f6e 2069   Configuration i
-000189a0: 7320 7265 6164 2066 726f 6d20 6073 6b6f  s read from `sko
-000189b0: 6f6c 6b69 742e 696e 6960 2069 6620 7072  olkit.ini` if pr
-000189c0: 6573 656e 743b 2061 6464 6564 2074 6865  esent; added the
-000189d0: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-000189e0: 2060 602d 2d69 6e69 6060 2c20 6060 2d2d   ``--ini``, ``--
-000189f0: 6e6f 2d69 6e74 6572 7275 7074 7360 6020  no-interrupts`` 
-00018a00: 616e 6420 6060 2d2d 7368 6f77 2d63 6f6e  and ``--show-con
-00018a10: 6669 6760 6020 6f70 7469 6f6e 733b 2020  fig`` options;  
-00018a20: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-00018a30: 2069 6e74 6572 7275 7074 2072 6f75 7469   interrupt routi
-00018a40: 6e65 7320 6172 6520 6578 6563 7574 6564  nes are executed
-00018a50: 2062 7920 6465 6661 756c 743b 2061 6464   by default; add
-00018a60: 6564 2073 7570 706f 7274 2066 6f72 2020  ed support for  
-00018a70: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-00018a80: 2031 3238 4b20 736e 6170 7368 6f74 733b   128K snapshots;
-00018a90: 2061 6464 6564 2073 7570 706f 7274 2066   added support f
-00018aa0: 6f72 2077 7269 7469 6e67 2053 5a58 2073  or writing SZX s
-00018ab0: 6e61 7073 686f 7473 3b20 6164 6465 6420  napshots; added 
-00018ac0: 2020 207c 0a7c 2020 2020 2020 2020 207c     |.|         |
-00018ad0: 2074 6865 2060 602d 6d60 6020 616e 6420   the ``-m`` and 
-00018ae0: 6060 2d4d 6060 2073 686f 7274 206f 7074  ``-M`` short opt
-00018af0: 696f 6e73 2020 2020 2020 2020 2020 2020  ions            
-00018b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b10: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
-00018b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018b60: 2d2d 2d2b 0a7c 2038 2e39 2020 2020 207c  ---+.| 8.9     |
-00018b70: 2052 6561 6473 2061 6e64 2077 7269 7465   Reads and write
-00018b80: 7320 7468 6520 542d 7374 6174 6573 2063  s the T-states c
-00018b90: 6f75 6e74 6572 2069 6e20 5a38 3020 736e  ounter in Z80 sn
-00018ba0: 6170 7368 6f74 7320 616e 6420 7265 6164  apshots and read
-00018bb0: 7320 207c 0a7c 2020 2020 2020 2020 207c  s  |.|         |
-00018bc0: 2074 6865 2054 2d73 7461 7465 7320 636f   the T-states co
-00018bd0: 756e 7465 7220 696e 2053 5a58 2073 6e61  unter in SZX sna
-00018be0: 7073 686f 7473 2020 2020 2020 2020 2020  pshots          
-00018bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c00: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
-00018c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018c50: 2d2d 2d2b 0a7c 2038 2e38 2020 2020 207c  ---+.| 8.8     |
-00018c60: 204e 6577 2020 2020 2020 2020 2020 2020   New            
-00018c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ca0: 2020 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b     |.+---------+
-00018cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018ce0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00018cf0: 2d2d 2d2b 0a                             ---+.
+00016e30: 2d2b 0a7c 2038 2e31 3020 2020 207c 2043  -+.| 8.10    | C
+00016e40: 6f6e 6669 6775 7261 7469 6f6e 2069 7320  onfiguration is 
+00016e50: 7265 6164 2066 726f 6d20 6073 6b6f 6f6c  read from `skool
+00016e60: 6b69 742e 696e 6960 2069 6620 7072 6573  kit.ini` if pres
+00016e70: 656e 743b 2061 6464 6564 2074 6865 2020  ent; added the  
+00016e80: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00016e90: 602d 2d69 6e69 6060 2c20 6060 2d2d 7368  `--ini``, ``--sh
+00016ea0: 6f77 2d63 6f6e 6669 6760 6020 616e 6420  ow-config`` and 
+00016eb0: 6060 2d2d 7461 7065 2d61 6e61 6c79 7369  ``--tape-analysi
+00016ec0: 7360 6020 6f70 7469 6f6e 733b 2020 2020  s`` options;    
+00016ed0: 207c 0a7c 2020 2020 2020 2020 207c 2061   |.|         | a
+00016ee0: 6464 6564 2074 6865 2060 6054 7261 6365  dded the ``Trace
+00016ef0: 4c69 6e65 6060 2061 6e64 2060 6054 7261  Line`` and ``Tra
+00016f00: 6365 4f70 6572 616e 6460 6020 636f 6e66  ceOperand`` conf
+00016f10: 6967 7572 6174 696f 6e20 2020 2020 2020  iguration       
+00016f20: 207c 0a7c 2020 2020 2020 2020 207c 2070   |.|         | p
+00016f30: 6172 616d 6574 6572 733b 2061 6464 6564  arameters; added
+00016f40: 2074 6865 2060 6061 6363 656c 6572 6174   the ``accelerat
+00016f50: 652d 6465 632d 6160 6020 616e 6420 6060  e-dec-a`` and ``
+00016f60: 6669 6e69 7368 2d74 6170 6560 6020 2020  finish-tape``   
+00016f70: 207c 0a7c 2020 2020 2020 2020 207c 2073   |.|         | s
+00016f80: 696d 756c 6174 6564 204c 4f41 4420 636f  imulated LOAD co
+00016f90: 6e66 6967 7572 6174 696f 6e20 7061 7261  nfiguration para
+00016fa0: 6d65 7465 7273 3b20 6164 6465 6420 7468  meters; added th
+00016fb0: 6520 6060 6973 7375 6532 6060 2020 2020  e ``issue2``    
+00016fc0: 207c 0a7c 2020 2020 2020 2020 207c 2068   |.|         | h
+00016fd0: 6172 6477 6172 6520 7374 6174 6520 6174  ardware state at
+00016fe0: 7472 6962 7574 653b 2061 6464 6564 2074  tribute; added t
+00016ff0: 6865 2073 7065 6369 616c 2060 6061 7574  he special ``aut
+00017000: 6f60 6020 616e 6420 6060 6c69 7374 6060  o`` and ``list``
+00017010: 207c 0a7c 2020 2020 2020 2020 207c 2074   |.|         | t
+00017020: 6170 652d 7361 6d70 6c69 6e67 206c 6f6f  ape-sampling loo
+00017030: 7020 6163 6365 6c65 7261 746f 7220 6e61  p accelerator na
+00017040: 6d65 732c 2061 6e64 2074 6865 2061 6269  mes, and the abi
+00017050: 6c69 7479 2074 6f20 7370 6563 6966 7920  lity to specify 
+00017060: 207c 0a7c 2020 2020 2020 2020 207c 206d   |.|         | m
+00017070: 756c 7469 706c 6520 6163 6365 6c65 7261  ultiple accelera
+00017080: 746f 7273 3b20 6164 6465 6420 7468 6520  tors; added the 
+00017090: 6060 616c 6b61 7472 617a 2d30 3560 602c  ``alkatraz-05``,
+000170a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000170b0: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+000170c0: 6061 6c6b 6174 7261 7a2d 3039 6060 2c20  `alkatraz-09``, 
+000170d0: 6060 616c 6b61 7472 617a 2d30 6160 602c  ``alkatraz-0a``,
+000170e0: 2060 6061 6c6b 6174 7261 7a2d 3062 6060   ``alkatraz-0b``
+000170f0: 2c20 2020 2020 2020 2020 2020 2020 2020  ,               
+00017100: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00017110: 6061 6c74 6572 6e61 7469 7665 6060 2c20  `alternative``, 
+00017120: 6060 616c 7465 726e 6174 6976 6532 6060  ``alternative2``
+00017130: 2c20 6060 626f 6775 736c 6177 2d6a 757a  , ``boguslaw-juz
+00017140: 6160 602c 2020 2020 2020 2020 2020 2020  a``,            
+00017150: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00017160: 6062 756c 6c64 6f67 6060 2c20 6060 6372  `bulldog``, ``cr
+00017170: 6c60 602c 2060 6063 726c 3260 602c 2060  l``, ``crl2``, `
+00017180: 6063 726c 3360 602c 2060 6063 726c 3460  `crl3``, ``crl4`
+00017190: 602c 2060 6063 7962 6578 6c61 6260 602c  `, ``cybexlab``,
+000171a0: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+000171b0: 6064 2d61 6e64 2d68 6060 2c20 6060 6465  `d-and-h``, ``de
+000171c0: 6c70 6869 6e65 6060 2c20 6060 6465 7369  lphine``, ``desi
+000171d0: 676e 2d64 6573 6967 6e60 602c 2060 6067  gn-design``, ``g
+000171e0: 6172 676f 796c 6532 6060 2c20 2020 2020  argoyle2``,     
+000171f0: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00017200: 6067 7265 6d6c 696e 3260 602c 2060 606d  `gremlin2``, ``m
+00017210: 6963 726f 7072 6f73 6560 602c 2060 606d  icroprose``, ``m
+00017220: 6963 726f 2d73 7479 6c65 6060 2c20 6060  icro-style``, ``
+00017230: 6d69 7272 6f72 736f 6674 6060 2c20 2020  mirrorsoft``,   
+00017240: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00017250: 6070 616c 6173 6060 2c20 6060 7261 786f  `palas``, ``raxo
+00017260: 6674 6060 2c20 6060 7265 616c 7469 6d65  ft``, ``realtime
+00017270: 6060 2c20 6060 7369 6c76 6572 6269 7264  ``, ``silverbird
+00017280: 6060 2c20 2020 2020 2020 2020 2020 2020  ``,             
+00017290: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+000172a0: 6073 6f66 7477 6172 652d 7072 6f6a 6563  `software-projec
+000172b0: 7473 6060 2c20 6060 7370 6172 6b6c 6572  ts``, ``sparkler
+000172c0: 7360 602c 2060 6073 757a 792d 736f 6674  s``, ``suzy-soft
+000172d0: 6060 2c20 2020 2020 2020 2020 2020 2020  ``,             
+000172e0: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+000172f0: 6073 757a 792d 736f 6674 3260 602c 2060  `suzy-soft2``, `
+00017300: 6074 696e 7960 602c 2060 6075 732d 676f  `tiny``, ``us-go
+00017310: 6c64 6060 2061 6e64 2060 6077 6569 7264  ld`` and ``weird
+00017320: 2d73 6369 656e 6365 6060 2020 2020 2020  -science``      
+00017330: 207c 0a7c 2020 2020 2020 2020 207c 2074   |.|         | t
+00017340: 6170 652d 7361 6d70 6c69 6e67 206c 6f6f  ape-sampling loo
+00017350: 7020 6163 6365 6c65 7261 746f 7273 2020  p accelerators  
+00017360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017380: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000173a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000173b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000173c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000173d0: 2d2b 0a7c 2038 2e39 2020 2020 207c 2041  -+.| 8.9     | A
+000173e0: 6464 6564 2074 6865 2060 602d 2d73 696d  dded the ``--sim
+000173f0: 2d6c 6f61 642d 636f 6e66 6967 6060 2c20  -load-config``, 
+00017400: 6060 2d2d 7461 7065 2d6e 616d 6560 602c  ``--tape-name``,
+00017410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017420: 207c 0a7c 2020 2020 2020 2020 207c 2060   |.|         | `
+00017430: 602d 2d74 6170 652d 7374 6172 7460 602c  `--tape-start``,
+00017440: 2060 602d 2d74 6170 652d 7374 6f70 6060   ``--tape-stop``
+00017450: 2061 6e64 2060 602d 2d74 6170 652d 7375   and ``--tape-su
+00017460: 6d60 6020 6f70 7469 6f6e 733b 2020 2020  m`` options;    
+00017470: 207c 0a7c 2020 2020 2020 2020 207c 2061   |.|         | a
+00017480: 6464 6564 2073 7570 706f 7274 2066 6f72  dded support for
+00017490: 2054 5a58 206c 6f6f 7073 2c20 7061 7573   TZX loops, paus
+000174a0: 6573 2c20 616e 6420 756e 7573 6564 2062  es, and unused b
+000174b0: 6974 7320 696e 2064 6174 6120 2020 2020  its in data     
+000174c0: 207c 0a7c 2020 2020 2020 2020 207c 2062   |.|         | b
+000174d0: 6c6f 636b 733b 2061 6464 6564 2073 7570  locks; added sup
+000174e0: 706f 7274 2066 6f72 2071 756f 7465 6420  port for quoted 
+000174f0: 6172 6775 6d65 6e74 7320 696e 2061 6e20  arguments in an 
+00017500: 6172 6775 6d65 6e74 7320 6669 6c65 3b20  arguments file; 
+00017510: 207c 0a7c 2020 2020 2020 2020 207c 2061   |.|         | a
+00017520: 6464 6564 2074 6865 2060 6074 7374 6174  dded the ``tstat
+00017530: 6573 6060 2068 6172 6477 6172 6520 7374  es`` hardware st
+00017540: 6174 6520 6174 7472 6962 7574 6520 2020  ate attribute   
+00017550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017560: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017590: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000175a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000175b0: 2d2b 0a7c 2038 2e38 2020 2020 207c 2041  -+.| 8.8     | A
+000175c0: 2073 696d 756c 6174 6564 204c 4f41 4420   simulated LOAD 
+000175d0: 7065 7266 6f72 6d73 2061 6e79 2060 6063  performs any ``c
+000175e0: 616c 6c2f 6d6f 7665 2f70 6f6b 652f 7379  all/move/poke/sy
+000175f0: 7376 6172 7360 6020 2020 2020 2020 2020  svars``         
+00017600: 207c 0a7c 2020 2020 2020 2020 207c 206f   |.|         | o
+00017610: 7065 7261 7469 6f6e 7320 7370 6563 6966  perations specif
+00017620: 6965 6420 6279 2060 602d 2d72 616d 6060  ied by ``--ram``
+00017630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017650: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017670: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017680: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017690: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000176a0: 2d2b 0a7c 2038 2e37 2020 2020 207c 2041  -+.| 8.7     | A
+000176b0: 6464 6564 2073 7570 706f 7274 2066 6f72  dded support for
+000176c0: 2073 696d 756c 6174 696e 6720 6120 3438   simulating a 48
+000176d0: 4b20 5370 6563 7472 756d 204c 4f41 4469  K Spectrum LOADi
+000176e0: 6e67 2061 2074 6170 653b 2077 6865 6e20  ng a tape; when 
+000176f0: 207c 0a7c 2020 2020 2020 2020 207c 2061   |.|         | a
+00017700: 2068 6561 6465 726c 6573 7320 626c 6f63   headerless bloc
+00017710: 6b20 6973 2069 676e 6f72 6564 2062 6563  k is ignored bec
+00017720: 6175 7365 206e 6f20 6060 2d2d 7261 6d20  ause no ``--ram 
+00017730: 6c6f 6164 6060 206f 7074 696f 6e73 2020  load`` options  
+00017740: 207c 0a7c 2020 2020 2020 2020 207c 2068   |.|         | h
+00017750: 6176 6520 6265 656e 2073 7065 6369 6669  ave been specifi
+00017760: 6564 2c20 6120 7761 726e 696e 6720 6973  ed, a warning is
+00017770: 2070 7269 6e74 6564 2020 2020 2020 2020   printed        
+00017780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017790: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+000177a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000177b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000177c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000177d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000177e0: 2d2b 0a7c 2038 2e36 2020 2020 207c 2041  -+.| 8.6     | A
+000177f0: 6464 6564 2073 7570 706f 7274 2074 6f20  dded support to 
+00017800: 7468 6520 6060 2d2d 7261 6d60 6020 6f70  the ``--ram`` op
+00017810: 7469 6f6e 2066 6f72 2074 6865 2060 6063  tion for the ``c
+00017820: 616c 6c60 6020 6f70 6572 6174 696f 6e20  all`` operation 
+00017830: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017880: 2d2b 0a7c 2038 2e34 2020 2020 207c 2041  -+.| 8.4     | A
+00017890: 6464 6564 2073 7570 706f 7274 2074 6f20  dded support to 
+000178a0: 7468 6520 6060 2d2d 7261 6d60 6020 6f70  the ``--ram`` op
+000178b0: 7469 6f6e 2066 6f72 2074 6865 2060 6073  tion for the ``s
+000178c0: 7973 7661 7273 6060 2020 2020 2020 2020  ysvars``        
+000178d0: 207c 0a7c 2020 2020 2020 2020 207c 206f   |.|         | o
+000178e0: 7065 7261 7469 6f6e 2020 2020 2020 2020  peration        
+000178f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017920: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017970: 2d2b 0a7c 2036 2e33 2020 2020 207c 2041  -+.| 6.3     | A
+00017980: 6464 6564 2074 6865 2060 602d 2d75 7365  dded the ``--use
+00017990: 722d 6167 656e 7460 6020 6f70 7469 6f6e  r-agent`` option
+000179a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000179b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000179c0: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+000179d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000179e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000179f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017a10: 2d2b 0a7c 2036 2e32 2020 2020 207c 2054  -+.| 6.2     | T
+00017a20: 6865 2060 602d 2d72 616d 6060 2c20 6060  he ``--ram``, ``
+00017a30: 2d2d 7265 6760 602c 2060 602d 2d73 7461  --reg``, ``--sta
+00017a40: 636b 6060 2061 6e64 2060 602d 2d73 7461  ck`` and ``--sta
+00017a50: 7274 6060 206f 7074 696f 6e73 2020 2020  rt`` options    
+00017a60: 207c 0a7c 2020 2020 2020 2020 207c 2061   |.|         | a
+00017a70: 6363 6570 7420 6865 7861 6465 6369 6d61  ccept hexadecima
+00017a80: 6c20 696e 7465 6765 7273 2070 7265 6669  l integers prefi
+00017a90: 7865 6420 6279 2027 3078 2720 2020 2020  xed by '0x'     
+00017aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ab0: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017ae0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017b00: 2d2b 0a7c 2035 2e33 2020 2020 207c 2041  -+.| 5.3     | A
+00017b10: 6464 6564 2074 6865 2060 602d 2d73 7461  dded the ``--sta
+00017b20: 636b 6060 2061 6e64 2060 602d 2d73 7461  ck`` and ``--sta
+00017b30: 7274 6060 206f 7074 696f 6e73 2020 2020  rt`` options    
+00017b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017b50: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017ba0: 2d2b 0a7c 2034 2e35 2020 2020 207c 2041  -+.| 4.5     | A
+00017bb0: 6464 6564 2073 7570 706f 7274 2066 6f72  dded support for
+00017bc0: 2054 5a58 2062 6c6f 636b 2074 7970 6520   TZX block type 
+00017bd0: 3078 3134 2028 7075 7265 2064 6174 6129  0x14 (pure data)
+00017be0: 2c20 666f 7220 6c6f 6164 696e 6720 2020  , for loading   
+00017bf0: 207c 0a7c 2020 2020 2020 2020 207c 2074   |.|         | t
+00017c00: 6865 2066 6972 7374 2061 6e64 206c 6173  he first and las
+00017c10: 7420 6279 7465 7320 6f66 2061 2074 6170  t bytes of a tap
+00017c20: 6520 626c 6f63 6b2c 2061 6e64 2066 6f72  e block, and for
+00017c30: 206d 6f64 6966 7969 6e67 2020 2020 2020   modifying      
+00017c40: 207c 0a7c 2020 2020 2020 2020 207c 206d   |.|         | m
+00017c50: 656d 6f72 7920 7769 7468 2058 4f52 2061  emory with XOR a
+00017c60: 6e64 2041 4444 206f 7065 7261 7469 6f6e  nd ADD operation
+00017c70: 7320 2020 2020 2020 2020 2020 2020 2020  s               
+00017c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c90: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017ce0: 2d2b 0a7c 2033 2e35 2020 2020 207c 204e  -+.| 3.5     | N
+00017cf0: 6577 2020 2020 2020 2020 2020 2020 2020  ew              
+00017d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d30: 207c 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d   |.+---------+--
+00017d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00017d80: 2d2b 0a0a 2e2e 205f 7461 7069 6e66 6f2e  -+.... _tapinfo.
+00017d90: 7079 3a0a 0a74 6170 696e 666f 2e70 790a  py:..tapinfo.py.
+00017da0: 2d2d 2d2d 2d2d 2d2d 2d2d 0a60 7461 7069  ----------.`tapi
+00017db0: 6e66 6f2e 7079 6020 7368 6f77 7320 696e  nfo.py` shows in
+00017dc0: 666f 726d 6174 696f 6e20 6f6e 2074 6865  formation on the
+00017dd0: 2062 6c6f 636b 7320 696e 2061 2054 4150   blocks in a TAP
+00017de0: 206f 7220 545a 5820 6669 6c65 2e20 466f   or TZX file. Fo
+00017df0: 720a 6578 616d 706c 653a 3a0a 0a20 2024  r.example::..  $
+00017e00: 2074 6170 696e 666f 2e70 7920 6761 6d65   tapinfo.py game
+00017e10: 2e74 7a78 0a0a 546f 206c 6973 7420 7468  .tzx..To list th
+00017e20: 6520 6f70 7469 6f6e 7320 7375 7070 6f72  e options suppor
+00017e30: 7465 6420 6279 2060 7461 7069 6e66 6f2e  ted by `tapinfo.
+00017e40: 7079 602c 2072 756e 2069 7420 7769 7468  py`, run it with
+00017e50: 206e 6f20 6172 6775 6d65 6e74 733a 3a0a   no arguments::.
+00017e60: 0a20 2075 7361 6765 3a20 7461 7069 6e66  .  usage: tapinf
+00017e70: 6f2e 7079 2046 494c 450a 0a20 2053 686f  o.py FILE..  Sho
+00017e80: 7720 7468 6520 626c 6f63 6b73 2069 6e20  w the blocks in 
+00017e90: 6120 5441 5020 6f72 2054 5a58 2066 696c  a TAP or TZX fil
+00017ea0: 652e 0a0a 2020 4f70 7469 6f6e 733a 0a20  e...  Options:. 
+00017eb0: 2020 202d 6220 4e5b 2c41 5d2c 202d 2d62     -b N[,A], --b
+00017ec0: 6173 6963 204e 5b2c 415d 0a20 2020 2020  asic N[,A].     
+00017ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ee0: 2020 2020 204c 6973 7420 7468 6520 4241       List the BA
+00017ef0: 5349 4320 7072 6f67 7261 6d20 696e 2062  SIC program in b
+00017f00: 6c6f 636b 204e 206c 6f61 6465 6420 6174  lock N loaded at
+00017f10: 2061 6464 7265 7373 2041 0a20 2020 2020   address A.     
+00017f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f30: 2020 2020 2028 6465 6661 756c 7420 3233       (default 23
+00017f40: 3735 3529 2e0a 2020 2020 2d64 2c20 2d2d  755)..    -d, --
+00017f50: 6461 7461 2020 2020 2020 2020 2020 2020  data            
+00017f60: 5368 6f77 2074 6865 2065 6e74 6972 6520  Show the entire 
+00017f70: 636f 6e74 656e 7473 206f 6620 6865 6164  contents of head
+00017f80: 6572 2061 6e64 2064 6174 6120 626c 6f63  er and data bloc
+00017f90: 6b73 2e0a 2020 2020 2d56 2c20 2d2d 7665  ks..    -V, --ve
+00017fa0: 7273 696f 6e20 2020 2020 2020 2020 5368  rsion         Sh
+00017fb0: 6f77 2053 6b6f 6f6c 4b69 7420 7665 7273  ow SkoolKit vers
+00017fc0: 696f 6e20 6e75 6d62 6572 2061 6e64 2065  ion number and e
+00017fd0: 7869 742e 0a0a 2b2d 2d2d 2d2d 2d2d 2d2d  xit...+---------
+00017fe0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00017ff0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018000: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018020: 2d2d 2d2d 2b0a 7c20 5665 7273 696f 6e20  ----+.| Version 
+00018030: 7c20 4368 616e 6765 7320 2020 2020 2020  | Changes       
+00018040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018070: 2020 2020 7c0a 2b3d 3d3d 3d3d 3d3d 3d3d      |.+=========
+00018080: 2b3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  +===============
+00018090: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000180a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000180b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000180c0: 3d3d 3d3d 2b0a 7c20 392e 3220 2020 2020  ====+.| 9.2     
+000180d0: 7c20 5368 6f77 7320 696e 666f 2066 6f72  | Shows info for
+000180e0: 2054 5a58 2062 6c6f 636b 2074 7970 6520   TZX block type 
+000180f0: 3078 3135 2028 6469 7265 6374 2072 6563  0x15 (direct rec
+00018100: 6f72 6469 6e67 2920 2020 2020 2020 2020  ording)         
+00018110: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018120: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018160: 2d2d 2d2d 2b0a 7c20 392e 3020 2020 2020  ----+.| 9.0     
+00018170: 7c20 5368 6f77 7320 7468 6520 4c49 4e45  | Shows the LINE
+00018180: 206e 756d 6265 7220 2869 6620 7072 6573   number (if pres
+00018190: 656e 7429 2066 6f72 2027 5072 6f67 7261  ent) for 'Progra
+000181a0: 6d3a 2720 6865 6164 6572 2062 6c6f 636b  m:' header block
+000181b0: 733b 2020 7c0a 7c20 2020 2020 2020 2020  s;  |.|         
+000181c0: 7c20 7265 6e64 6572 7320 4241 5349 4320  | renders BASIC 
+000181d0: 746f 6b65 6e73 2069 6e20 6865 6164 6572  tokens in header
+000181e0: 2062 6c6f 636b 206e 616d 6573 2020 2020   block names    
+000181f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018200: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018210: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018250: 2d2d 2d2d 2b0a 7c20 382e 3920 2020 2020  ----+.| 8.9     
+00018260: 7c20 5368 6f77 7320 6675 6c6c 2069 6e66  | Shows full inf
+00018270: 6f20 666f 7220 545a 5820 626c 6f63 6b20  o for TZX block 
+00018280: 7479 7065 7320 3078 3130 2061 6e64 2030  types 0x10 and 0
+00018290: 7831 3120 2020 2020 2020 2020 2020 2020  x11             
+000182a0: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+000182b0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+000182c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000182d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000182e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000182f0: 2d2d 2d2d 2b0a 7c20 382e 3320 2020 2020  ----+.| 8.3     
+00018300: 7c20 4164 6465 6420 7468 6520 6060 2d2d  | Added the ``--
+00018310: 6461 7461 6060 206f 7074 696f 6e20 2020  data`` option   
+00018320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018340: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018350: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018390: 2d2d 2d2d 2b0a 7c20 382e 3120 2020 2020  ----+.| 8.1     
+000183a0: 7c20 5368 6f77 7320 636f 6e74 656e 7473  | Shows contents
+000183b0: 206f 6620 545a 5820 626c 6f63 6b20 7479   of TZX block ty
+000183c0: 7065 7320 3078 3333 2028 6861 7264 7761  pes 0x33 (hardwa
+000183d0: 7265 2074 7970 6529 2061 6e64 2030 7833  re type) and 0x3
+000183e0: 3520 2020 7c0a 7c20 2020 2020 2020 2020  5   |.|         
+000183f0: 7c20 2863 7573 746f 6d20 696e 666f 2920  | (custom info) 
+00018400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018430: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018440: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018480: 2d2d 2d2d 2b0a 7c20 372e 3120 2020 2020  ----+.| 7.1     
+00018490: 7c20 5368 6f77 7320 7075 6c73 6520 6c65  | Shows pulse le
+000184a0: 6e67 7468 7320 696e 2054 5a58 2062 6c6f  ngths in TZX blo
+000184b0: 636b 2074 7970 6520 3078 3133 2061 6e64  ck type 0x13 and
+000184c0: 2066 756c 6c20 696e 666f 2066 6f72 2054   full info for T
+000184d0: 5a58 2020 7c0a 7c20 2020 2020 2020 2020  ZX  |.|         
+000184e0: 7c20 626c 6f63 6b20 7479 7065 2030 7831  | block type 0x1
+000184f0: 3420 2020 2020 2020 2020 2020 2020 2020  4               
+00018500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018520: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018530: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018570: 2d2d 2d2d 2b0a 7c20 362e 3220 2020 2020  ----+.| 6.2     
+00018580: 7c20 5468 6520 6060 2d2d 6261 7369 6360  | The ``--basic`
+00018590: 6020 6f70 7469 6f6e 2061 6363 6570 7473  ` option accepts
+000185a0: 2061 2068 6578 6164 6563 696d 616c 2061   a hexadecimal a
+000185b0: 6464 7265 7373 2070 7265 6669 7865 6420  ddress prefixed 
+000185c0: 6279 2020 7c0a 7c20 2020 2020 2020 2020  by  |.|         
+000185d0: 7c20 2730 7827 2020 2020 2020 2020 2020  | '0x'          
+000185e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018610: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018620: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018630: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018640: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018650: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018660: 2d2d 2d2d 2b0a 7c20 362e 3020 2020 2020  ----+.| 6.0     
+00018670: 7c20 4164 6465 6420 7468 6520 6060 2d2d  | Added the ``--
+00018680: 6261 7369 6360 6020 6f70 7469 6f6e 2020  basic`` option  
+00018690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000186a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000186b0: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+000186c0: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+000186d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000186e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000186f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018700: 2d2d 2d2d 2b0a 7c20 352e 3020 2020 2020  ----+.| 5.0     
+00018710: 7c20 4e65 7720 2020 2020 2020 2020 2020  | New           
+00018720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018750: 2020 2020 7c0a 2b2d 2d2d 2d2d 2d2d 2d2d      |.+---------
+00018760: 2b2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  +---------------
+00018770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00018790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000187a0: 2d2d 2d2d 2b0a 0a2e 2e20 5f74 7261 6365  ----+.... _trace
+000187b0: 2e70 793a 0a0a 7472 6163 652e 7079 0a2d  .py:..trace.py.-
+000187c0: 2d2d 2d2d 2d2d 2d0a 6074 7261 6365 2e70  -------.`trace.p
+000187d0: 7960 2073 696d 756c 6174 6573 2074 6865  y` simulates the
+000187e0: 2065 7865 6375 7469 6f6e 206f 6620 6d61   execution of ma
+000187f0: 6368 696e 6520 636f 6465 2069 6e20 6120  chine code in a 
+00018800: 3438 4b2c 2031 3238 4b20 6f72 202b 3220  48K, 128K or +2 
+00018810: 6d65 6d6f 7279 0a73 6e61 7073 686f 742e  memory.snapshot.
+00018820: 2046 6f72 2065 7861 6d70 6c65 3a3a 0a0a   For example::..
+00018830: 2020 2420 7472 6163 652e 7079 202d 2d73    $ trace.py --s
+00018840: 7461 7274 2033 3237 3638 202d 2d73 746f  tart 32768 --sto
+00018850: 7020 3439 3135 3220 6761 6d65 2e7a 3830  p 49152 game.z80
+00018860: 0a0a 546f 206c 6973 7420 7468 6520 6f70  ..To list the op
+00018870: 7469 6f6e 7320 7375 7070 6f72 7465 6420  tions supported 
+00018880: 6279 2060 7472 6163 652e 7079 602c 2072  by `trace.py`, r
+00018890: 756e 2069 7420 7769 7468 206e 6f20 6172  un it with no ar
+000188a0: 6775 6d65 6e74 733a 3a0a 0a20 2075 7361  guments::..  usa
+000188b0: 6765 3a20 7472 6163 652e 7079 205b 6f70  ge: trace.py [op
+000188c0: 7469 6f6e 735d 2046 494c 4520 5b4f 5554  tions] FILE [OUT
+000188d0: 4649 4c45 5d0a 0a20 2054 7261 6365 205a  FILE]..  Trace Z
+000188e0: 3830 206d 6163 6869 6e65 2063 6f64 6520  80 machine code 
+000188f0: 6578 6563 7574 696f 6e2e 2046 494c 4520  execution. FILE 
+00018900: 6d61 7920 6265 2061 2062 696e 6172 7920  may be a binary 
+00018910: 2872 6177 206d 656d 6f72 7929 2066 696c  (raw memory) fil
+00018920: 652c 2061 0a20 2053 4e41 2c20 535a 5820  e, a.  SNA, SZX 
+00018930: 6f72 205a 3830 2073 6e61 7073 686f 742c  or Z80 snapshot,
+00018940: 206f 7220 2734 3827 2c20 2731 3238 2720   or '48', '128' 
+00018950: 6f72 2027 2b32 2720 666f 7220 6e6f 2073  or '+2' for no s
+00018960: 6e61 7073 686f 742e 2049 6620 274f 5554  napshot. If 'OUT
+00018970: 4649 4c45 270a 2020 6973 2067 6976 656e  FILE'.  is given
+00018980: 2c20 616e 2053 5a58 206f 7220 5a38 3020  , an SZX or Z80 
+00018990: 736e 6170 7368 6f74 2069 7320 7772 6974  snapshot is writ
+000189a0: 7465 6e20 6166 7465 7220 6578 6563 7574  ten after execut
+000189b0: 696f 6e20 6861 7320 636f 6d70 6c65 7465  ion has complete
+000189c0: 642e 0a0a 2020 4f70 7469 6f6e 733a 0a20  d...  Options:. 
+000189d0: 2020 202d 2d61 7564 696f 2020 2020 2020     --audio      
+000189e0: 2020 2020 2020 2020 2053 686f 7720 6175           Show au
+000189f0: 6469 6f20 6465 6c61 7973 2e0a 2020 2020  dio delays..    
+00018a00: 2d63 2c20 2d2d 636d 696f 2020 2020 2020  -c, --cmio      
+00018a10: 2020 2020 2020 5369 6d75 6c61 7465 206d        Simulate m
+00018a20: 656d 6f72 7920 616e 6420 492f 4f20 636f  emory and I/O co
+00018a30: 6e74 656e 7469 6f6e 2e0a 2020 2020 2d2d  ntention..    --
+00018a40: 6465 7074 6820 4445 5054 4820 2020 2020  depth DEPTH     
+00018a50: 2020 2020 5369 6d70 6c69 6679 2061 7564      Simplify aud
+00018a60: 696f 2064 656c 6179 7320 746f 2074 6869  io delays to thi
+00018a70: 7320 6465 7074 6820 2864 6566 6175 6c74  s depth (default
+00018a80: 3a20 3229 2e0a 2020 2020 2d44 2c20 2d2d  : 2)..    -D, --
+00018a90: 6465 6369 6d61 6c20 2020 2020 2020 2020  decimal         
+00018aa0: 5368 6f77 2064 6563 696d 616c 2076 616c  Show decimal val
+00018ab0: 7565 7320 696e 2076 6572 626f 7365 206d  ues in verbose m
+00018ac0: 6f64 652e 0a20 2020 202d 4920 703d 762c  ode..    -I p=v,
+00018ad0: 202d 2d69 6e69 2070 3d76 2020 2020 2053   --ini p=v     S
+00018ae0: 6574 2074 6865 2076 616c 7565 206f 6620  et the value of 
+00018af0: 7468 6520 636f 6e66 6967 7572 6174 696f  the configuratio
+00018b00: 6e20 7061 7261 6d65 7465 7220 2770 2720  n parameter 'p' 
+00018b10: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
+00018b20: 2020 2020 2020 2020 2020 2020 2027 7627               'v'
+00018b30: 2e20 5468 6973 206f 7074 696f 6e20 6d61  . This option ma
+00018b40: 7920 6265 2075 7365 6420 6d75 6c74 6970  y be used multip
+00018b50: 6c65 2074 696d 6573 2e0a 2020 2020 2d6d  le times..    -m
+00018b60: 204d 4158 2c20 2d2d 6d61 782d 6f70 6572   MAX, --max-oper
+00018b70: 6174 696f 6e73 204d 4158 0a20 2020 2020  ations MAX.     
+00018b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b90: 2020 2020 204d 6178 696d 756d 206e 756d       Maximum num
+00018ba0: 6265 7220 6f66 2069 6e73 7472 7563 7469  ber of instructi
+00018bb0: 6f6e 7320 746f 2065 7865 6375 7465 2e0a  ons to execute..
+00018bc0: 2020 2020 2d4d 204d 4158 2c20 2d2d 6d61      -M MAX, --ma
+00018bd0: 782d 7473 7461 7465 7320 4d41 580a 2020  x-tstates MAX.  
+00018be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018bf0: 2020 2020 2020 2020 4d61 7869 6d75 6d20          Maximum 
+00018c00: 6e75 6d62 6572 206f 6620 542d 7374 6174  number of T-stat
+00018c10: 6573 2074 6f20 7275 6e20 666f 722e 0a20  es to run for.. 
+00018c20: 2020 202d 6e2c 202d 2d6e 6f2d 696e 7465     -n, --no-inte
+00018c30: 7272 7570 7473 2020 2044 6f6e 2774 2065  rrupts   Don't e
+00018c40: 7865 6375 7465 2069 6e74 6572 7275 7074  xecute interrupt
+00018c50: 2072 6f75 7469 6e65 732e 0a20 2020 202d   routines..    -
+00018c60: 6f20 4144 4452 2c20 2d2d 6f72 6720 4144  o ADDR, --org AD
+00018c70: 4452 2020 2053 7065 6369 6679 2074 6865  DR   Specify the
+00018c80: 206f 7269 6769 6e20 6164 6472 6573 7320   origin address 
+00018c90: 6f66 2061 2062 696e 6172 7920 2872 6177  of a binary (raw
+00018ca0: 206d 656d 6f72 7929 0a20 2020 2020 2020   memory).       
+00018cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018cc0: 2020 2066 696c 6520 2864 6566 6175 6c74     file (default
+00018cd0: 3a20 3635 3533 3620 2d20 6c65 6e67 7468  : 65536 - length
+00018ce0: 292e 0a20 2020 202d 7020 5b70 3a5d 615b  )..    -p [p:]a[
+00018cf0: 2d62 5b2d 635d 5d2c 5b5e 2b5d 762c 202d  -b[-c]],[^+]v, -
+00018d00: 2d70 6f6b 6520 5b70 3a5d 615b 2d62 5b2d  -poke [p:]a[-b[-
+00018d10: 635d 5d2c 5b5e 2b5d 760a 2020 2020 2020  c]],[^+]v.      
+00018d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d30: 2020 2020 504f 4b45 204e 2c76 2069 6e20      POKE N,v in 
+00018d40: 5241 4d20 6261 6e6b 2070 2066 6f72 204e  RAM bank p for N
+00018d50: 2069 6e20 7b61 2c20 612b 632c 2061 2b32   in {a, a+c, a+2
+00018d60: 632e 2e2e 2c20 627d 2e0a 2020 2020 2020  c..., b}..      
+00018d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d80: 2020 2020 5072 6566 6978 2027 7627 2077      Prefix 'v' w
+00018d90: 6974 6820 275e 2720 746f 2070 6572 666f  ith '^' to perfo
+00018da0: 726d 2061 6e20 584f 5220 6f70 6572 6174  rm an XOR operat
+00018db0: 696f 6e2c 206f 720a 2020 2020 2020 2020  ion, or.        
+00018dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018dd0: 2020 272b 2720 746f 2070 6572 666f 726d    '+' to perform
+00018de0: 2061 6e20 4144 4420 6f70 6572 6174 696f   an ADD operatio
+00018df0: 6e2e 2054 6869 7320 6f70 7469 6f6e 206d  n. This option m
+00018e00: 6179 2062 650a 2020 2020 2020 2020 2020  ay be.          
+00018e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e20: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
+00018e30: 6d65 732e 0a20 2020 202d 2d70 7974 686f  mes..    --pytho
+00018e40: 6e20 2020 2020 2020 2020 2020 2020 2055  n              U
+00018e50: 7365 2074 6865 2070 7572 6520 5079 7468  se the pure Pyth
+00018e60: 6f6e 205a 3830 2073 696d 756c 6174 6f72  on Z80 simulator
+00018e70: 2e0a 2020 2020 2d72 206e 616d 653d 7661  ..    -r name=va
+00018e80: 6c75 652c 202d 2d72 6567 206e 616d 653d  lue, --reg name=
+00018e90: 7661 6c75 650a 2020 2020 2020 2020 2020  value.          
+00018ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018eb0: 5365 7420 7468 6520 7661 6c75 6520 6f66  Set the value of
+00018ec0: 2061 2072 6567 6973 7465 722e 2044 6f20   a register. Do 
+00018ed0: 272d 2d72 6567 2068 656c 7027 2066 6f72  '--reg help' for
+00018ee0: 206d 6f72 650a 2020 2020 2020 2020 2020   more.          
+00018ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f00: 696e 666f 726d 6174 696f 6e2e 2054 6869  information. Thi
+00018f10: 7320 6f70 7469 6f6e 206d 6179 2062 6520  s option may be 
+00018f20: 7573 6564 206d 756c 7469 706c 6520 7469  used multiple ti
+00018f30: 6d65 732e 0a20 2020 202d 2d72 6f6d 2046  mes..    --rom F
+00018f40: 494c 4520 2020 2020 2020 2020 2020 2050  ILE            P
+00018f50: 6174 6368 2069 6e20 6120 524f 4d20 6174  atch in a ROM at
+00018f60: 2061 6464 7265 7373 2030 2066 726f 6d20   address 0 from 
+00018f70: 7468 6973 2066 696c 652e 0a20 2020 202d  this file..    -
+00018f80: 2d73 686f 772d 636f 6e66 6967 2020 2020  -show-config    
+00018f90: 2020 2020 2053 686f 7720 636f 6e66 6967       Show config
+00018fa0: 7572 6174 696f 6e20 7061 7261 6d65 7465  uration paramete
+00018fb0: 7220 7661 6c75 6573 2e0a 2020 2020 2d73  r values..    -s
+00018fc0: 2041 4444 522c 202d 2d73 7461 7274 2041   ADDR, --start A
+00018fd0: 4444 520a 2020 2020 2020 2020 2020 2020  DDR.            
+00018fe0: 2020 2020 2020 2020 2020 2020 2020 5374                St
+00018ff0: 6172 7420 6578 6563 7574 696f 6e20 6174  art execution at
+00019000: 2074 6869 7320 6164 6472 6573 732e 0a20   this address.. 
+00019010: 2020 202d 5320 4144 4452 2c20 2d2d 7374     -S ADDR, --st
+00019020: 6f70 2041 4444 5220 2053 746f 7020 6578  op ADDR  Stop ex
+00019030: 6563 7574 696f 6e20 6174 2074 6869 7320  ecution at this 
+00019040: 6164 6472 6573 732e 0a20 2020 202d 2d73  address..    --s
+00019050: 7461 7473 2020 2020 2020 2020 2020 2020  tats            
+00019060: 2020 2053 686f 7720 7374 6174 7320 6166     Show stats af
+00019070: 7465 7220 6578 6563 7574 696f 6e2e 0a20  ter execution.. 
+00019080: 2020 202d 762c 202d 2d76 6572 626f 7365     -v, --verbose
+00019090: 2020 2020 2020 2020 2053 686f 7720 6578           Show ex
+000190a0: 6563 7574 6564 2069 6e73 7472 7563 7469  ecuted instructi
+000190b0: 6f6e 732e 2052 6570 6561 7420 7468 6973  ons. Repeat this
+000190c0: 206f 7074 696f 6e20 746f 2073 686f 770a   option to show.
+000190d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000190e0: 2020 2020 2020 2020 2020 7265 6769 7374            regist
+000190f0: 6572 2076 616c 7565 7320 746f 6f2e 0a20  er values too.. 
+00019100: 2020 202d 562c 202d 2d76 6572 7369 6f6e     -V, --version
+00019110: 2020 2020 2020 2020 2053 686f 7720 536b           Show Sk
+00019120: 6f6f 6c4b 6974 2076 6572 7369 6f6e 206e  oolKit version n
+00019130: 756d 6265 7220 616e 6420 6578 6974 2e0a  umber and exit..
+00019140: 0a42 7920 6465 6661 756c 742c 2060 7472  .By default, `tr
+00019150: 6163 652e 7079 6020 7369 6c65 6e74 6c79  ace.py` silently
+00019160: 2073 696d 756c 6174 6573 2063 6f64 6520   simulates code 
+00019170: 6578 6563 7574 696f 6e20 6265 6769 6e6e  execution beginn
+00019180: 696e 6720 7769 7468 2074 6865 0a69 6e73  ing with the.ins
+00019190: 7472 7563 7469 6f6e 2061 7420 7468 6520  truction at the 
+000191a0: 6164 6472 6573 7320 7370 6563 6966 6965  address specifie
+000191b0: 6420 6279 2074 6865 2060 602d 2d73 7461  d by the ``--sta
+000191c0: 7274 6060 206f 7074 696f 6e20 286f 7220  rt`` option (or 
+000191d0: 7468 6520 7072 6f67 7261 6d0a 636f 756e  the program.coun
+000191e0: 7465 7220 696e 2074 6865 2073 6e61 7073  ter in the snaps
+000191f0: 686f 7429 2061 6e64 2065 6e64 696e 6720  hot) and ending 
+00019200: 7768 656e 2074 6865 2069 6e73 7472 7563  when the instruc
+00019210: 7469 6f6e 2061 7420 7468 6520 6164 6472  tion at the addr
+00019220: 6573 730a 7370 6563 6966 6965 6420 6279  ess.specified by
+00019230: 2060 602d 2d73 746f 7060 6020 2869 6620   ``--stop`` (if 
+00019240: 616e 7929 2069 7320 7265 6163 6865 642e  any) is reached.
+00019250: 2055 7365 2074 6865 2060 602d 2d76 6572   Use the ``--ver
+00019260: 626f 7365 6060 206f 7074 696f 6e20 746f  bose`` option to
+00019270: 0a73 686f 7720 6561 6368 2069 6e73 7472  .show each instr
+00019280: 7563 7469 6f6e 2065 7865 6375 7465 642e  uction executed.
+00019290: 2052 6570 6561 7420 7468 6520 6060 2d2d   Repeat the ``--
+000192a0: 7665 7262 6f73 6560 6020 6f70 7469 6f6e  verbose`` option
+000192b0: 2028 6060 2d76 7660 6029 2074 6f0a 7368   (``-vv``) to.sh
+000192c0: 6f77 2072 6567 6973 7465 7220 7661 6c75  ow register valu
+000192d0: 6573 2074 6f6f 2e0a 0a57 6865 6e20 7468  es too...When th
+000192e0: 6520 6060 2d2d 6175 6469 6f60 6020 6f70  e ``--audio`` op
+000192f0: 7469 6f6e 2069 7320 6769 7665 6e2c 2060  tion is given, `
+00019300: 7472 6163 652e 7079 6020 7472 6163 6b73  trace.py` tracks
+00019310: 2063 6861 6e67 6573 2069 6e20 7468 6520   changes in the 
+00019320: 7374 6174 650a 6f66 2074 6865 205a 5820  state.of the ZX 
+00019330: 5370 6563 7472 756d 2073 7065 616b 6572  Spectrum speaker
+00019340: 2c20 616e 6420 7468 656e 2070 7269 6e74  , and then print
+00019350: 7320 6120 6c69 7374 206f 6620 7468 6520  s a list of the 
+00019360: 6465 6c61 7973 2028 696e 2054 2d73 7461  delays (in T-sta
+00019370: 7465 7329 0a62 6574 7765 656e 2074 686f  tes).between tho
+00019380: 7365 2063 6861 6e67 6573 2e20 5468 6973  se changes. This
+00019390: 206c 6973 7420 6361 6e20 6265 2073 7570   list can be sup
+000193a0: 706c 6965 6420 746f 2074 6865 203a 7265  plied to the :re
+000193b0: 663a 6041 5544 494f 6020 6d61 6372 6f20  f:`AUDIO` macro 
+000193c0: 746f 0a70 726f 6475 6365 2061 2057 4156  to.produce a WAV
+000193d0: 2066 696c 6520 666f 7220 7468 6520 736f   file for the so
+000193e0: 756e 6420 6566 6665 6374 2074 6861 7420  und effect that 
+000193f0: 776f 756c 6420 6265 2070 726f 6475 6365  would be produce
+00019400: 6420 6279 2074 6865 2073 616d 6520 636f  d by the same co
+00019410: 6465 0a72 756e 6e69 6e67 206f 6e20 6120  de.running on a 
+00019420: 7265 616c 205a 5820 5370 6563 7472 756d  real ZX Spectrum
+00019430: 2e0a 0a2e 2e20 5f74 7261 6365 2d63 6f6e  ..... _trace-con
+00019440: 663a 0a0a 436f 6e66 6967 7572 6174 696f  f:..Configuratio
+00019450: 6e0a 5e5e 5e5e 5e5e 5e5e 5e5e 5e5e 5e0a  n.^^^^^^^^^^^^^.
+00019460: 6074 7261 6365 2e70 7960 2077 696c 6c20  `trace.py` will 
+00019470: 7265 6164 2063 6f6e 6669 6775 7261 7469  read configurati
+00019480: 6f6e 2066 726f 6d20 6120 6669 6c65 206e  on from a file n
+00019490: 616d 6564 2060 736b 6f6f 6c6b 6974 2e69  amed `skoolkit.i
+000194a0: 6e69 6020 696e 2074 6865 0a63 7572 7265  ni` in the.curre
+000194b0: 6e74 2077 6f72 6b69 6e67 2064 6972 6563  nt working direc
+000194c0: 746f 7279 206f 7220 696e 2060 7e2f 2e73  tory or in `~/.s
+000194d0: 6b6f 6f6c 6b69 7460 2c20 6966 2070 7265  koolkit`, if pre
+000194e0: 7365 6e74 2e20 5468 6520 7265 636f 676e  sent. The recogn
+000194f0: 6973 6564 0a63 6f6e 6669 6775 7261 7469  ised.configurati
+00019500: 6f6e 2070 6172 616d 6574 6572 7320 6172  on parameters ar
+00019510: 653a 0a0a 2a20 6060 5472 6163 654c 696e  e:..* ``TraceLin
+00019520: 6560 6020 2d20 7468 6520 666f 726d 6174  e`` - the format
+00019530: 206f 6620 6561 6368 2069 6e73 7472 7563   of each instruc
+00019540: 7469 6f6e 206c 696e 6520 7768 656e 2060  tion line when `
+00019550: 602d 7660 6020 6973 2075 7365 640a 2020  `-v`` is used.  
+00019560: 2864 6566 6175 6c74 3a20 6060 247b 7063  (default: ``${pc
+00019570: 3a30 3458 7d20 7b69 7d60 6029 0a2a 2060  :04X} {i}``).* `
+00019580: 6054 7261 6365 4c69 6e65 3260 6020 2d20  `TraceLine2`` - 
+00019590: 7468 6520 666f 726d 6174 206f 6620 6561  the format of ea
+000195a0: 6368 2069 6e73 7472 7563 7469 6f6e 206c  ch instruction l
+000195b0: 696e 6520 7768 656e 2060 602d 7676 6060  ine when ``-vv``
+000195c0: 2069 7320 7573 6564 0a20 2028 7573 6520   is used.  (use 
+000195d0: 6060 2d2d 7368 6f77 2d63 6f6e 6669 6760  ``--show-config`
+000195e0: 6020 746f 2073 6565 2074 6865 2064 6566  ` to see the def
+000195f0: 6175 6c74 2076 616c 7565 290a 2a20 6060  ault value).* ``
+00019600: 5472 6163 654c 696e 6544 6563 696d 616c  TraceLineDecimal
+00019610: 6060 202d 2074 6865 2066 6f72 6d61 7420  `` - the format 
+00019620: 6f66 2065 6163 6820 696e 7374 7275 6374  of each instruct
+00019630: 696f 6e20 6c69 6e65 2077 6865 6e20 6060  ion line when ``
+00019640: 2d44 7660 6020 6973 0a20 2075 7365 6420  -Dv`` is.  used 
+00019650: 2864 6566 6175 6c74 3a20 6060 7b70 633a  (default: ``{pc:
+00019660: 3035 7d20 7b69 7d60 6029 0a2a 2060 6054  05} {i}``).* ``T
+00019670: 7261 6365 4c69 6e65 4465 6369 6d61 6c32  raceLineDecimal2
+00019680: 6060 202d 2074 6865 2066 6f72 6d61 7420  `` - the format 
+00019690: 6f66 2065 6163 6820 696e 7374 7275 6374  of each instruct
+000196a0: 696f 6e20 6c69 6e65 2077 6865 6e20 6060  ion line when ``
+000196b0: 2d44 7676 6060 2069 730a 2020 7573 6564  -Dvv`` is.  used
+000196c0: 2028 7573 6520 6060 2d2d 7368 6f77 2d63   (use ``--show-c
+000196d0: 6f6e 6669 6760 6020 746f 2073 6565 2074  onfig`` to see t
+000196e0: 6865 2064 6566 6175 6c74 2076 616c 7565  he default value
+000196f0: 290a 2a20 6060 5472 6163 654f 7065 7261  ).* ``TraceOpera
+00019700: 6e64 6060 202d 2074 6865 2070 7265 6669  nd`` - the prefi
+00019710: 782c 2062 7974 6520 666f 726d 6174 2c20  x, byte format, 
+00019720: 616e 6420 776f 7264 2066 6f72 6d61 7420  and word format 
+00019730: 666f 7220 7468 6520 6e75 6d65 7269 630a  for the numeric.
+00019740: 2020 6f70 6572 616e 6473 206f 6620 696e    operands of in
+00019750: 7374 7275 6374 696f 6e73 2c20 7365 7061  structions, sepa
+00019760: 7261 7465 6420 6279 2063 6f6d 6d61 7320  rated by commas 
+00019770: 2864 6566 6175 6c74 3a20 6060 242c 3032  (default: ``$,02
+00019780: 582c 3034 5860 6029 3b20 7468 650a 2020  X,04X``); the.  
+00019790: 6279 7465 2061 6e64 2077 6f72 6420 666f  byte and word fo
+000197a0: 726d 6174 7320 6172 6520 7374 616e 6461  rmats are standa
+000197b0: 7264 2050 7974 686f 6e20 666f 726d 6174  rd Python format
+000197c0: 2073 7065 6369 6669 6572 7320 666f 7220   specifiers for 
+000197d0: 6e75 6d65 7269 630a 2020 7661 6c75 6573  numeric.  values
+000197e0: 2c20 616e 6420 6465 6661 756c 7420 746f  , and default to
+000197f0: 2065 6d70 7479 2073 7472 696e 6773 2069   empty strings i
+00019800: 6620 6e6f 7420 7375 7070 6c69 6564 0a2a  f not supplied.*
+00019810: 2060 6054 7261 6365 4f70 6572 616e 6444   ``TraceOperandD
+00019820: 6563 696d 616c 6060 202d 2061 7320 6060  ecimal`` - as ``
+00019830: 5472 6163 654f 7065 7261 6e64 6060 2077  TraceOperand`` w
+00019840: 6865 6e20 6060 2d44 6060 2069 7320 7573  hen ``-D`` is us
+00019850: 6564 2028 6465 6661 756c 743a 0a20 2060  ed (default:.  `
+00019860: 602c 2c60 6029 0a0a 5468 6520 6060 5472  `,,``)..The ``Tr
+00019870: 6163 654c 696e 652a 6060 2070 6172 616d  aceLine*`` param
+00019880: 6574 6572 7320 6172 6520 7374 616e 6461  eters are standa
+00019890: 7264 2050 7974 686f 6e20 666f 726d 6174  rd Python format
+000198a0: 2073 7472 696e 6773 2074 6861 7420 7265   strings that re
+000198b0: 636f 676e 6973 650a 7468 6520 666f 6c6c  cognise.the foll
+000198c0: 6f77 696e 6720 7265 706c 6163 656d 656e  owing replacemen
+000198d0: 7420 6669 656c 6473 3a0a 0a2a 2060 6069  t fields:..* ``i
+000198e0: 6060 202d 2074 6865 2063 7572 7265 6e74  `` - the current
+000198f0: 2069 6e73 7472 7563 7469 6f6e 0a2a 2060   instruction.* `
+00019900: 6070 6360 6020 2d20 7468 6520 6164 6472  `pc`` - the addr
+00019910: 6573 7320 6f66 2074 6865 2063 7572 7265  ess of the curre
+00019920: 6e74 2069 6e73 7472 7563 7469 6f6e 2028  nt instruction (
+00019930: 7072 6f67 7261 6d20 636f 756e 7465 7229  program counter)
+00019940: 0a2a 2060 6072 5b58 5d60 6020 2d20 7468  .* ``r[X]`` - th
+00019950: 6520 2758 2720 7265 6769 7374 6572 2028  e 'X' register (
+00019960: 7365 6520 6265 6c6f 7729 0a2a 2060 6074  see below).* ``t
+00019970: 6060 202d 2074 6865 2063 7572 7265 6e74  `` - the current
+00019980: 2074 696d 6573 7461 6d70 2028 696e 2054   timestamp (in T
+00019990: 2d73 7461 7465 7329 0a0a 5468 6520 7265  -states)..The re
+000199a0: 6769 7374 6572 206e 616d 6520 6060 5860  gister name ``X`
+000199b0: 6020 696e 2060 6072 5b58 5d60 6020 6d75  ` in ``r[X]`` mu
+000199c0: 7374 2062 6520 6f6e 6520 6f66 2074 6865  st be one of the
+000199d0: 2066 6f6c 6c6f 7769 6e67 3a3a 0a0a 2020   following::..  
+000199e0: 6120 6220 6320 6420 6520 6620 6820 6c20  a b c d e f h l 
+000199f0: 6263 2064 6520 686c 0a20 205e 6120 5e62  bc de hl.  ^a ^b
+00019a00: 205e 6320 5e64 205e 6520 5e66 205e 6820   ^c ^d ^e ^f ^h 
+00019a10: 5e6c 205e 6263 205e 6465 205e 686c 0a20  ^l ^bc ^de ^hl. 
+00019a20: 2069 7820 6978 6820 6978 6c20 6979 2069   ix ixh ixl iy i
+00019a30: 7968 2069 796c 0a20 2069 2072 2073 700a  yh iyl.  i r sp.
+00019a40: 0a54 6865 206e 616d 6573 2074 6861 7420  .The names that 
+00019a50: 6265 6769 6e20 7769 7468 2060 605e 6060  begin with ``^``
+00019a60: 2064 656e 6f74 6520 7468 6520 7368 6164   denote the shad
+00019a70: 6f77 2072 6567 6973 7465 7273 2e0a 0a57  ow registers...W
+00019a80: 6865 7265 7665 7220 6060 5c6e 6060 2061  herever ``\n`` a
+00019a90: 7070 6561 7273 2069 6e20 6120 6060 5472  ppears in a ``Tr
+00019aa0: 6163 654c 696e 652a 6060 2070 6172 616d  aceLine*`` param
+00019ab0: 6574 6572 2076 616c 7565 2c20 6974 2069  eter value, it i
+00019ac0: 7320 7265 706c 6163 6564 2062 790a 6120  s replaced by.a 
+00019ad0: 6e65 776c 696e 6520 6368 6172 6163 7465  newline characte
+00019ae0: 722e 0a0a 436f 6e66 6967 7572 6174 696f  r...Configuratio
+00019af0: 6e20 7061 7261 6d65 7465 7273 206d 7573  n parameters mus
+00019b00: 7420 6170 7065 6172 2069 6e20 6120 6060  t appear in a ``
+00019b10: 5b74 7261 6365 5d60 6020 7365 6374 696f  [trace]`` sectio
+00019b20: 6e2e 2046 6f72 2065 7861 6d70 6c65 2c0a  n. For example,.
+00019b30: 746f 206d 616b 6520 6074 7261 6365 2e70  to make `trace.p
+00019b40: 7960 2077 7269 7465 2061 2074 696d 6573  y` write a times
+00019b50: 7461 6d70 2066 6f72 2065 6163 6820 696e  tamp for each in
+00019b60: 7374 7275 6374 696f 6e20 7768 656e 2060  struction when `
+00019b70: 602d 7660 6020 6973 2075 7365 642c 0a61  `-v`` is used,.a
+00019b80: 6464 2074 6865 2066 6f6c 6c6f 7769 6e67  dd the following
+00019b90: 2073 6563 7469 6f6e 2074 6f20 6073 6b6f   section to `sko
+00019ba0: 6f6c 6b69 742e 696e 6960 3a3a 0a0a 2020  olkit.ini`::..  
+00019bb0: 5b74 7261 6365 5d0a 2020 5472 6163 654c  [trace].  TraceL
+00019bc0: 696e 653d 7b74 3a3e 3130 7d20 247b 7063  ine={t:>10} ${pc
+00019bd0: 3a30 3458 7d20 7b69 7d0a 0a43 6f6e 6669  :04X} {i}..Confi
+00019be0: 6775 7261 7469 6f6e 2070 6172 616d 6574  guration paramet
+00019bf0: 6572 7320 6d61 7920 616c 736f 2062 6520  ers may also be 
+00019c00: 7365 7420 6f6e 2074 6865 2063 6f6d 6d61  set on the comma
+00019c10: 6e64 206c 696e 6520 6279 2075 7369 6e67  nd line by using
+00019c20: 2074 6865 0a60 602d 2d69 6e69 6060 206f   the.``--ini`` o
+00019c30: 7074 696f 6e2e 2050 6172 616d 6574 6572  ption. Parameter
+00019c40: 2076 616c 7565 7320 7365 7420 7468 6973   values set this
+00019c50: 2077 6179 2077 696c 6c20 6f76 6572 7269   way will overri
+00019c60: 6465 2061 6e79 2066 6f75 6e64 2069 6e0a  de any found in.
+00019c70: 6073 6b6f 6f6c 6b69 742e 696e 6960 2e0a  `skoolkit.ini`..
+00019c80: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+00019c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+00019cd0: 0a7c 2056 6572 7369 6f6e 207c 2043 6861  .| Version | Cha
+00019ce0: 6e67 6573 2020 2020 2020 2020 2020 2020  nges            
+00019cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d10: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+00019d20: 0a2b 3d3d 3d3d 3d3d 3d3d 3d2b 3d3d 3d3d  .+=========+====
+00019d30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019d40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019d50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019d60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d2b  ===============+
+00019d70: 0a7c 2039 2e32 2020 2020 207c 2041 6464  .| 9.2     | Add
+00019d80: 6564 2074 6865 2060 602d 2d70 7974 686f  ed the ``--pytho
+00019d90: 6e60 6020 6f70 7469 6f6e 3b20 6164 6465  n`` option; adde
+00019da0: 6420 7375 7070 6f72 7420 666f 7220 2b32  d support for +2
+00019db0: 2073 6e61 7073 686f 7473 2020 2020 207c   snapshots     |
+00019dc0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+00019dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+00019e10: 0a7c 2039 2e31 2020 2020 207c 2054 6865  .| 9.1     | The
+00019e20: 2060 602d 2d70 6f6b 6560 6020 6f70 7469   ``--poke`` opti
+00019e30: 6f6e 2063 616e 206d 6f64 6966 7920 7370  on can modify sp
+00019e40: 6563 6966 6963 2052 414d 2062 616e 6b73  ecific RAM banks
+00019e50: 3b20 6164 6465 6420 7468 6520 2020 207c  ; added the    |
+00019e60: 0a7c 2020 2020 2020 2020 207c 2060 602d  .|         | ``-
+00019e70: 2d63 6d69 6f60 6020 6f70 7469 6f6e 2020  -cmio`` option  
+00019e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ea0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+00019eb0: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+00019ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00019ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+00019f00: 0a7c 2039 2e30 2020 2020 207c 2043 6f6e  .| 9.0     | Con
+00019f10: 6669 6775 7261 7469 6f6e 2069 7320 7265  figuration is re
+00019f20: 6164 2066 726f 6d20 6073 6b6f 6f6c 6b69  ad from `skoolki
+00019f30: 742e 696e 6960 2069 6620 7072 6573 656e  t.ini` if presen
+00019f40: 743b 2061 6464 6564 2074 6865 2020 207c  t; added the   |
+00019f50: 0a7c 2020 2020 2020 2020 207c 2060 602d  .|         | ``-
+00019f60: 2d69 6e69 6060 2c20 6060 2d2d 6e6f 2d69  -ini``, ``--no-i
+00019f70: 6e74 6572 7275 7074 7360 6020 616e 6420  nterrupts`` and 
+00019f80: 6060 2d2d 7368 6f77 2d63 6f6e 6669 6760  ``--show-config`
+00019f90: 6020 6f70 7469 6f6e 733b 2020 2020 207c  ` options;     |
+00019fa0: 0a7c 2020 2020 2020 2020 207c 2069 6e74  .|         | int
+00019fb0: 6572 7275 7074 2072 6f75 7469 6e65 7320  errupt routines 
+00019fc0: 6172 6520 6578 6563 7574 6564 2062 7920  are executed by 
+00019fd0: 6465 6661 756c 743b 2061 6464 6564 2073  default; added s
+00019fe0: 7570 706f 7274 2066 6f72 2020 2020 207c  upport for     |
+00019ff0: 0a7c 2020 2020 2020 2020 207c 2031 3238  .|         | 128
+0001a000: 4b20 736e 6170 7368 6f74 733b 2061 6464  K snapshots; add
+0001a010: 6564 2073 7570 706f 7274 2066 6f72 2077  ed support for w
+0001a020: 7269 7469 6e67 2053 5a58 2073 6e61 7073  riting SZX snaps
+0001a030: 686f 7473 3b20 6164 6465 6420 2020 207c  hots; added    |
+0001a040: 0a7c 2020 2020 2020 2020 207c 2074 6865  .|         | the
+0001a050: 2060 602d 6d60 6020 616e 6420 6060 2d4d   ``-m`` and ``-M
+0001a060: 6060 2073 686f 7274 206f 7074 696f 6e73  `` short options
+0001a070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a080: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+0001a090: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+0001a0a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a0b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a0c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a0d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+0001a0e0: 0a7c 2038 2e39 2020 2020 207c 2052 6561  .| 8.9     | Rea
+0001a0f0: 6473 2061 6e64 2077 7269 7465 7320 7468  ds and writes th
+0001a100: 6520 542d 7374 6174 6573 2063 6f75 6e74  e T-states count
+0001a110: 6572 2069 6e20 5a38 3020 736e 6170 7368  er in Z80 snapsh
+0001a120: 6f74 7320 616e 6420 7265 6164 7320 207c  ots and reads  |
+0001a130: 0a7c 2020 2020 2020 2020 207c 2074 6865  .|         | the
+0001a140: 2054 2d73 7461 7465 7320 636f 756e 7465   T-states counte
+0001a150: 7220 696e 2053 5a58 2073 6e61 7073 686f  r in SZX snapsho
+0001a160: 7473 2020 2020 2020 2020 2020 2020 2020  ts              
+0001a170: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+0001a180: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+0001a190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a1a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a1b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a1c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+0001a1d0: 0a7c 2038 2e38 2020 2020 207c 204e 6577  .| 8.8     | New
+0001a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a210: 2020 2020 2020 2020 2020 2020 2020 207c                 |
+0001a220: 0a2b 2d2d 2d2d 2d2d 2d2d 2d2b 2d2d 2d2d  .+---------+----
+0001a230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+0001a260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2b  ---------------+
+0001a270: 0a                                       .
```

### Comparing `skoolkit-9.1/docs/_sources/components.rst.txt` & `skoolkit-9.2/docs/_sources/components.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/control-files.rst.txt` & `skoolkit-9.2/docs/_sources/control-files.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/diy.rst.txt` & `skoolkit-9.2/docs/_sources/diy.rst.txt`

 * *Files 2% similar despite different names*

```diff
@@ -118,38 +118,40 @@
   $ sna2skool.py -c game.ctl game.z80 > game.skool
 
 This will do a reasonable job of splitting the snapshot into blocks, but won't
 be 100% accurate (except by accident). You will need to examine the resultant
 skool file (`game.skool`) to see which blocks have been incorrectly marked as
 text, data or code, and then edit the control file (`game.ctl`) accordingly.
 
-To generate a better control file, you could use a code execution map produced
-by an emulator to tell `sna2ctl.py` where at least some of the code is in the
-snapshot. `sna2ctl.py` will read a map (otherwise known as a profile or trace)
-produced by Fuse, SpecEmu, Spud, Zero or Z80 when specified by the ``-m``
-option::
+To generate a better control file, you could use a code execution map to tell
+`sna2ctl.py` where at least some of the code is in the snapshot. `sna2ctl.py`
+will read a map (otherwise known as a profile or trace) produced by
+:ref:`rzxplay.py`, Fuse, SpecEmu, Spud, Zero or Z80 when specified by the
+``-m`` option::
 
   $ sna2ctl.py -m game.map game.z80 > game.ctl
 
 Needless to say, in general, the better the map, the more accurate the
 resulting control file will be. To create a good map file, you should ideally
 play the game from start to finish in the emulator, in an attempt to exercise
-as much code as possible. If that sounds like too much work, and your emulator
-supports playing back RZX files, you could grab a recording of your chosen game
-from the `RZX Archive <https://rzxarchive.co.uk>`_, and set the emulator's
-profiler or tracer going while the recording plays back.
+as much code as possible. If that sounds like too much work, you could grab a
+recording of your chosen game from the `RZX Archive`_, and either run the RZX
+file through `rzxplay.py` with the ``--map`` option, or set an emulator's
+profiler or tracer going while it plays the recording back.
 
 By default, `sna2ctl.py` and `sna2skool.py` generate control files and skool
 files with addresses and instruction operands in decimal notation. If you
 prefer to work in hexadecimal, use the ``--hex`` option of each command to
 produce a hexadecimal control file and a hexadecimal skool file::
 
   $ sna2ctl.py --hex game.z80 > game.ctl
   $ sna2skool.py --hex -c game.ctl game.z80 > game.skool
 
+.. _RZX Archive: https://rzxarchive.co.uk
+
 Developing the disassembly
 --------------------------
 When you're happy that your control file does a decent job of distinguishing
 the code blocks from the data blocks in your memory snapshot, it's time to
 start work on adding annotations that describe what the code does and what the
 data is for.
```

### Comparing `skoolkit-9.1/docs/_sources/extending.rst.txt` & `skoolkit-9.2/docs/_sources/extending.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/html-templates.rst.txt` & `skoolkit-9.2/docs/_sources/html-templates.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/bin2sna.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/bin2sna.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/bin2tap.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/bin2tap.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/skool2asm.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/skool2asm.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/skool2bin.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/skool2bin.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/skool2ctl.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/skool2ctl.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/skool2html.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/skool2html.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/sna2ctl.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/sna2ctl.py.rst.txt`

 * *Files 7% similar despite different names*

```diff
@@ -28,16 +28,17 @@
   overriding any value found in ``skoolkit.ini``. This option may be used
   multiple times.
 
 -l, --hex-lower
   Write lower case hexadecimal addresses.
 
 -m, --map `FILE`
-  Specify a code execution map to use. Code execution maps produced by the
-  Fuse, SpecEmu, Spud, Zero and Z80 Spectrum emulators are supported.
+  Specify a code execution map to use. Code execution maps produced by
+  ``rzxplay.py`` and by the Fuse, SpecEmu, Spud, Zero and Z80 Spectrum
+  emulators are supported.
 
 -o, --org `ADDR`
   Specify the origin address of a binary file. The default origin address is
   65536 minus the length of the file. `ADDR` must be a decimal number, or a
   hexadecimal number prefixed by '0x'.
 
 -p, --page `PAGE`
```

### Comparing `skoolkit-9.1/docs/_sources/man/sna2img.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/sna2img.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/sna2skool.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/sna2skool.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/snapinfo.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/snapinfo.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/snapmod.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/snapmod.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/tap2sna.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/tap2sna.py.rst.txt`

 * *Files 1% similar despite different names*

```diff
@@ -81,16 +81,16 @@
   Set the User-Agent header used in an HTTP(S) request.
 
 -V, --version
   Show the SkoolKit version number and exit.
 
 TZX SUPPORT
 ===========
-``tap2sna.py`` cannot read data from TZX block types 0x15 (direct recording),
-0x18 (CSW recording) or 0x19 (generalized data block).
+``tap2sna.py`` cannot read data from TZX block types 0x18 (CSW recording) or
+0x19 (generalized data block).
 
 SIMULATED LOAD
 ==============
 By default, ``tap2sna.py`` simulates a freshly booted 48K ZX Spectrum running
 LOAD "" (or LOAD ""CODE, if the first block on the tape is a 'Bytes' header).
 Whenever the Spectrum ROM's load routine at $0556 is called, a shortcut is
 taken by "fast loading" the next block on the tape. All other code (including
@@ -115,15 +115,16 @@
 * ``accelerate-dec-a`` - enable acceleration of 'DEC A: JR NZ,$-1' delay loops
   (``1``, the default), or 'DEC A: JP NZ,$-1' delay loops (``2``), or neither
   (``0``)
 * ``accelerator`` - a comma-separated list of tape-sampling loop accelerators
   to use (see the ``ACCELERATORS`` section below)
 * ``cmio`` - enable simulation of memory contention and I/O contention delays
   (``1``), or disable it (``0``); this is disabled by default to improve
-  performance, but some loaders may require it
+  performance, but some loaders may require it; when this is enabled, all
+  acceleration is disabled
 * ``fast-load`` - enable fast loading (``1``, the default), or disable it
   (``0``); fast loading significantly reduces the load time for many tapes, but
   can also cause some loaders to fail
 * ``finish-tape`` - run the tape to the end before stopping the simulation at
   the address specified by the ``--start`` option (``1``), or stop the
   simulation as soon as that address is reached, regardless of whether the tape
   has finished (``0``, the default)
@@ -138,14 +139,16 @@
 * ``pause`` - pause the tape between blocks and resume playback when port 254
   is read (``1``, the default), or run the tape continuously (``0``); pausing
   can help with tapes that require (but do not actually contain) long pauses
   between blocks, but can cause some loaders to fail
 * ``polarity`` - the EAR bit reading produced by the first pulse on the tape:
   ``0`` (the default) or ``1``; subsequent pulses give readings that alternate
   between 0 and 1
+* ``python`` - whether to use the pure Python Z80 simulator (``1``), or the
+  much faster C version if available (``0``, the default)
 * ``timeout`` - the number of seconds of Z80 CPU time after which to abort the
   simulated LOAD if it's still in progress (default: 900)
 * ``trace`` - the file to which to log all instructions executed during the
   simulated LOAD (default: none)
 
 The ``in-flags`` parameter is the sum of the following values, chosen according
 to the desired behaviour:
```

### Comparing `skoolkit-9.1/docs/_sources/man/tapinfo.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/tapinfo.py.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/man/trace.py.rst.txt` & `skoolkit-9.2/docs/_sources/man/trace.py.rst.txt`

 * *Files 2% similar despite different names*

```diff
@@ -6,18 +6,19 @@
 
 SYNOPSIS
 ========
 ``trace.py`` [options] FILE [OUTFILE]
 
 DESCRIPTION
 ===========
-``trace.py`` simulates the execution of machine code in a 48K or 128K binary
-(raw memory) file or a SNA, SZX or Z80 snapshot. If FILE is '48' or '128', no
-snapshot is loaded, and the RAM is left blank (all zeroes). If 'OUTFILE' is
-given, an SZX or Z80 snapshot is written after execution has completed.
+``trace.py`` simulates the execution of machine code in a 48K, 128K or +2 SNA,
+SZX or Z80 snapshot, or a binary (raw memory) file. If FILE is '48', '128' or
+'+2', no snapshot is loaded, and the RAM is left blank (all zeroes). If
+'OUTFILE' is given, an SZX or Z80 snapshot is written after execution has
+completed.
 
 OPTIONS
 =======
 --audio
   Show a list of the delays (in T-states) between changes in the state of the
   ZX Spectrum speaker made by the code that was executed.
 
@@ -56,14 +57,17 @@
 
 -p, --poke `[p:]a[-b[-c]],[^+]v`
   POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}. Prefix 'v' with '^' to
   perform an XOR operation, or '+' to perform an ADD operation. This option may
   be used multiple times. 'a', 'b', 'c' and 'v' must each be a decimal number,
   or a hexadecimal number prefixed by '0x'.
 
+--python
+  Use the pure Python Z80 simulator even if the C version is available.
+
 -r, --reg `name=value`
   Set the value of a register before execution begins. Do ``--reg help`` for
   more information, or see the section on ``REGISTERS`` below. This option may
   be used multiple times.
 
 --rom `FILE`
   Patch in a ROM at address 0 from this file.
```

### Comparing `skoolkit-9.1/docs/_sources/migration.rst.txt` & `skoolkit-9.2/docs/_sources/migration.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/parsing.rst.txt` & `skoolkit-9.2/docs/_sources/parsing.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/ref-files.rst.txt` & `skoolkit-9.2/docs/_sources/ref-files.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/skool-files.rst.txt` & `skoolkit-9.2/docs/_sources/skool-files.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/skool-macros.rst.txt` & `skoolkit-9.2/docs/_sources/skool-macros.rst.txt`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_sources/usage.rst.txt` & `skoolkit-9.2/docs/_sources/usage.rst.txt`

 * *Files 16% similar despite different names*

```diff
@@ -20,14 +20,34 @@
 location.
 
 .. _skoolkit.ca: https://skoolkit.ca/skoolkit/
 .. _GitHub: https://github.com/skoolkid/skoolkit/releases
 .. _PyPI: https://pypi.org/project/skoolkit/
 .. _pip: https://pip.pypa.io/
 
+C extension modules
+-------------------
+If you obtained SkoolKit from a zip archive or tarball, and you want to make
+use of the C extension modules (for faster Z80 simulation), then you will need
+to build them first. This requires a compiler, the `setuptools`_ package, and
+the development headers for the version of Python you're using. Once these are
+ready, run the following command in the directory where SkoolKit was unpacked::
+
+  $ python setup.py build_ext -i
+
+You may need to replace the ``python`` in this command with ``python3``,
+``py``, or the path to the Python executable, depending on the OS you're using.
+
+To see a list of the compilers that may be used to build the C extension
+modules, run the following command::
+
+  $ python setup.py build_ext --help-compiler
+
+.. _setuptools: https://pypi.org/project/setuptools/
+
 Linux/\*BSD v. Windows command line
 -----------------------------------
 Throughout this documentation, commands that must be entered in a terminal
 window ('Command Prompt' in Windows) are shown on a line beginning with a
 dollar sign (``$``), like this::
 
   $ some-script.py some arguments
```

### Comparing `skoolkit-9.1/docs/_sources/whatis.rst.txt` & `skoolkit-9.2/docs/_sources/whatis.rst.txt`

 * *Files 2% similar despite different names*

```diff
@@ -22,15 +22,15 @@
 With SkoolKit you can:
 
 * use :ref:`sna2ctl.py` to generate a :ref:`control file <controlFiles>` (an
   attempt to identify routines and data blocks by static analysis) from a
   snapshot (SNA, SZX or Z80) or raw memory file
 * enable :ref:`sna2ctl.py` to generate a much better control file that more
   reliably distinguishes code from data by using a code execution map produced
-  by an emulator
+  by an emulator or :ref:`rzxplay.py`
 * use :ref:`sna2skool.py` along with this control file to produce a disassembly
   of a snapshot or raw memory file
 * add annotations to this disassembly (or the control file) as you discover the
   purpose of each routine and data block
 * use :ref:`skool2html.py` to convert a disassembly into a bunch of HTML files
   (with annotations in place, and the operands of CALL and JP instructions
   converted into hyperlinks)
@@ -42,16 +42,20 @@
 * use :ref:`tap2sna.py` to convert a TAP or TZX file into a 'pristine' Z80 or
   SZX snapshot
 * use :ref:`snapinfo.py` to analyse a snapshot or raw memory file and list the
   BASIC program it contains, show register values, produce a call graph, find
   tile graphic data, find text, or find sequences of arbitrary byte values
 * use :ref:`trace.py` to trace the execution of machine code in a snapshot or
   raw memory file
+* use :ref:`rzxplay.py` to trace the execution of machine code in an RZX file,
+  and produce a code execution map for :ref:`sna2ctl.py`
 * use :ref:`tapinfo.py` to analyse the blocks in a TAP or TZX file, and list
   the BASIC program it contains
+* use :ref:`rzxinfo.py` to analyse the blocks in an RZX file, and extract
+  snapshots from it
 * use :ref:`bin2tap.py` to convert a snapshot or raw memory file into a TAP
   file
 * use :ref:`bin2sna.py` to convert a raw memory file into a Z80 or SZX snapshot
 * use :ref:`snapmod.py` to modify the register values or memory contents in a
   Z80 or SZX snapshot
 * use :ref:`sna2img.py` to convert graphic data in a disassembly, SCR file,
   snapshot or raw memory file into a PNG image
@@ -94,12 +98,12 @@
 version.
 
 See the file 'COPYING' (distributed with SkoolKit) for the full text of the
 licence.
 
 ZX Spectrum ROMs
 ----------------
-Copies of the 48K and 128K ZX Spectrum ROMs are included with SkoolKit (in the
+Copies of the 48K, 128K and +2 ROMs are included with SkoolKit (in the
 `skoolkit/resources` directory). The copyright in these ROMs is held by
 Amstrad, who have kindly `given permission`_ for them to be redistributed.
 
 .. _given permission: https://groups.google.com/g/comp.sys.amstrad.8bit/c/HtpBU2Bzv_U/m/HhNDSU3MksAJ
```

### Comparing `skoolkit-9.1/docs/_static/_sphinx_javascript_frameworks_compat.js` & `skoolkit-9.2/docs/_static/_sphinx_javascript_frameworks_compat.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/basic.css` & `skoolkit-9.2/docs/_static/basic.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/classic.css` & `skoolkit-9.2/docs/_static/classic.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/doctools.js` & `skoolkit-9.2/docs/_static/doctools.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/jquery.js` & `skoolkit-9.2/docs/_static/jquery.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/language_data.js` & `skoolkit-9.2/docs/_static/language_data.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/pygments.css` & `skoolkit-9.2/docs/_static/pygments.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/searchtools.js` & `skoolkit-9.2/docs/_static/searchtools.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/sidebar.js` & `skoolkit-9.2/docs/_static/sidebar.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/sphinx_highlight.js` & `skoolkit-9.2/docs/_static/sphinx_highlight.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/_static/underscore.js` & `skoolkit-9.2/docs/_static/underscore.js`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/docs/asm-templates.html` & `skoolkit-9.2/docs/asm-templates.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>ASM templates &#8212; SkoolKit 9.1 documentation</title>
+    <title>ASM templates &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="html-templates.html" title="HTML templates"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="asm.html" title="ASM modes and directives"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">ASM templates</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -231,15 +231,15 @@
              >index</a></li>
         <li class="right" >
           <a href="html-templates.html" title="HTML templates"
              >next</a> |</li>
         <li class="right" >
           <a href="asm.html" title="ASM modes and directives"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">ASM templates</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * ASM templates
 ************ AASSMM tteemmppllaatteess_? ************
 Each line of output produced by _s_k_o_o_l_2_a_s_m_._p_y is built from a template. A
 template contains replacement fields - identifiers enclosed by braces ({ and
 }) - that are replaced by appropriate content (such as a label or register
 name) when the template is formatted.
 The default templates can be overridden by custom templates read from a file by
@@ -97,10 +97,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * ASM templates
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/asm.html` & `skoolkit-9.2/docs/asm.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>ASM modes and directives &#8212; SkoolKit 9.1 documentation</title>
+    <title>ASM modes and directives &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="asm-templates.html" title="ASM templates"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="ref-files.html" title="Ref files"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">ASM modes and directives</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -1684,15 +1684,15 @@
              >index</a></li>
         <li class="right" >
           <a href="asm-templates.html" title="ASM templates"
              >next</a> |</li>
         <li class="right" >
           <a href="ref-files.html" title="Ref files"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">ASM modes and directives</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * ASM modes and directives
 ************ AASSMM mmooddeess aanndd ddiirreeccttiivveess_? ************
 A skool file may contain directives that are processed during the parsing
 phase. Exactly how a directive is processed (and whether it is executed)
 depends on the substitution mode and bugfix mode in which the skool file is
 being parsed.
 ********** SSuubbssttiittuuttiioonn mmooddeess_? **********
@@ -928,10 +928,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * ASM modes and directives
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/assemblers.html` & `skoolkit-9.2/docs/assemblers.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Supported assemblers &#8212; SkoolKit 9.1 documentation</title>
+    <title>Supported assemblers &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="migration.html" title="Migrating from SkoolKit 8"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="commands.html" title="Commands"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Supported assemblers</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -197,15 +197,15 @@
              >index</a></li>
         <li class="right" >
           <a href="migration.html" title="Migrating from SkoolKit 8"
              >next</a> |</li>
         <li class="right" >
           <a href="commands.html" title="Commands"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Supported assemblers</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Supported assemblers
 ************ SSuuppppoorrtteedd aasssseemmbblleerrss_? ************
 If you use SkoolKit to generate an ASM version of your disassembly, and you
 want to assemble it, you will need to use a supported assembler. At the time of
 writing, the assemblers listed below are known to work with the ASM format
 generated by _s_k_o_o_l_2_a_s_m_._p_y:
     * _p_a_s_m_o (v0.5.3)
@@ -73,10 +73,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Supported assemblers
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog.html` & `skoolkit-9.2/docs/changelog8.html`

 * *Files 8% similar despite different names*

```diff
@@ -2,167 +2,58 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 8.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
     <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
     <script src="_static/doctools.js"></script>
     <script src="_static/sphinx_highlight.js"></script>
     
     <link rel="index" title="Index" href="genindex.html" />
     <link rel="search" title="Search" href="search.html" />
     <link rel="next" title="SkoolKit 7.x changelog" href="changelog7.html" />
-    <link rel="prev" title="Migrating from SkoolKit 8" href="migration.html" /> 
+    <link rel="prev" title="Changelog" href="changelog.html" /> 
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog7.html" title="SkoolKit 7.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
-          <a href="migration.html" title="Migrating from SkoolKit 8"
+          <a href="changelog.html" title="Changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
-        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
+          <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
+        <li class="nav-item nav-item-this"><a href="">SkoolKit 8.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
           <div class="body" role="main">
             
-  <section id="changelog">
-<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this heading"></a></h1>
+  <section id="skoolkit-8-x-changelog">
+<h1>SkoolKit 8.x changelog<a class="headerlink" href="#skoolkit-8-x-changelog" title="Permalink to this heading"></a></h1>
 <section id="id1">
-<h2>9.1 (2024-02-03)<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
-<ul class="simple">
-<li><p>Added support to <a class="reference internal" href="commands.html#snapmod-py"><span class="std std-ref">snapmod.py</span></a> for modifying SZX snapshots and 128K
-snapshots</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#bin2sna-py"><span class="std std-ref">bin2sna.py</span></a> for writing 128K snapshots (by using the
-<code class="docutils literal notranslate"><span class="pre">--page</span></code> and <code class="docutils literal notranslate"><span class="pre">--bank</span></code> options, or by providing a 128K input file)</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#bin2tap-py"><span class="std std-ref">bin2tap.py</span></a> for writing 128K TAP files (by using the
-<code class="docutils literal notranslate"><span class="pre">--7ffd</span></code>, <code class="docutils literal notranslate"><span class="pre">--banks</span></code> and <code class="docutils literal notranslate"><span class="pre">--loader</span></code> options)</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#bin2sna-py"><span class="std std-ref">bin2sna.py</span></a>, <a class="reference internal" href="commands.html#snapmod-py"><span class="std std-ref">snapmod.py</span></a>, <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> and
-<a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> for modifying 128K RAM banks (via the <code class="docutils literal notranslate"><span class="pre">--move</span></code>, <code class="docutils literal notranslate"><span class="pre">--poke</span></code>,
-<code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">move</span></code> and <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">poke</span></code> options)</p></li>
-<li><p>Added the <a class="reference internal" href="skool-macros.html#bank"><span class="std std-ref">#BANK</span></a> macro (for switching the RAM bank that is mapped to
-49152-65535)</p></li>
-<li><p>Added the <a class="reference internal" href="asm.html#asm-bank"><span class="std std-ref">&#64;bank</span></a> directive (for specifying the RAM bank that is
-mapped to 49152-65535, and for populating a RAM bank from the contents of
-another skool file)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">--banks</span></code> option to <a class="reference internal" href="commands.html#skool2bin-py"><span class="std std-ref">skool2bin.py</span></a> (for processing
-<a class="reference internal" href="asm.html#asm-bank"><span class="std std-ref">&#64;bank</span></a> directives and writing RAM banks 0-7 to a 128K file)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">cmio</span></code> simulated LOAD configuration parameter to
-<a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify whether to simulate memory
-and I/O contention)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">--cmio</span></code> option to <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> (to enable simulation of
-memory and I/O contention)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">cmio</span></code> parameter to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a>, <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> and
-<a class="reference internal" href="skool-macros.html#tstates"><span class="std std-ref">#TSTATES</span></a> macros (to specify whether to simulate memory and I/O
-contention)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">execint</span></code> parameter to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a>, <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> and
-<a class="reference internal" href="skool-macros.html#tstates"><span class="std std-ref">#TSTATES</span></a> macros (to specify whether to simulate the execution of
-interrupt routines)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">tstates</span></code> parameter to the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro (to set the value of
-the simulators clock)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">iff</span></code> parameter to the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro (to set whether
-interrupts are enabled)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">im</span></code> parameter to the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro (to set the interrupt
-mode)</p></li>
-<li><p>Made the <code class="docutils literal notranslate"><span class="pre">stop</span></code> parameter of the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro optional</p></li>
-<li><p>Added support to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a>, <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> and <a class="reference internal" href="skool-macros.html#tstates"><span class="std std-ref">#TSTATES</span></a> macros for
-executing code in a 128K memory snapshot</p></li>
-<li><p>Fixed how <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> handles the value of the SP register in a 128K SNA
-file</p></li>
-<li><p>Fixed how <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> and <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> log timestamps when an
-interrupt occurs</p></li>
-<li><p>Fixed how interrupts are accepted when <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> and <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a>
-execute code in a simulator</p></li>
-<li><p>Fixed how the Z80 instruction set simulator updates bit 2 of the flags
-register when executing an LD A,I or LD A,R instruction just before an
-interrupt is accepted</p></li>
-<li><p>Fixed the bug that makes the <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option of <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> fail
-when the value of PROG is 65535</p></li>
-<li><p>Fixed the bug that prevents an <a class="reference internal" href="control-files.html#mdirective"><span class="std std-ref">M directive</span></a> from being repeated in a
-<a class="reference internal" href="control-files.html#ctlloops"><span class="std std-ref">control file loop</span></a></p></li>
-</ul>
-</section>
-<section id="id2">
-<h2>9.0 (2023-11-04)<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
-<ul class="simple">
-<li><p>Dropped support for Python 3.7</p></li>
-<li><p><a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> now performs a <a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">simulated LOAD</span></a> by
-default, and will also overwrite an existing snapshot by default</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">machine</span></code> simulated LOAD configuration parameter to
-<a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify whether to simulate a 48K or
-a 128K Spectrum)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">load</span></code> simulated LOAD configuration parameter to
-<a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify an alternative command line
-to use to load the tape)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">polarity</span></code> simulated LOAD configuration parameter to
-<a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify the EAR bit reading produced
-by the first pulse on the tape)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> simulated LOAD configuration parameter to
-<a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify how to handle IN
-instructions)</p></li>
-<li><p>The output snapshot argument of <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> is now optional</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> configuration parameter for
-<a class="reference internal" href="commands.html#tap2sna-conf"><span class="std std-ref">tap2sna.py</span></a> (to specify the default output snapshot
-format)</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#tap2sna-conf"><span class="std std-ref">tap2sna.py</span></a> for register pairs
-(<code class="docutils literal notranslate"><span class="pre">r[bc]</span></code>, <code class="docutils literal notranslate"><span class="pre">r[de]</span></code> etc.) in the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> configuration parameter</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">antirom</span></code>, <code class="docutils literal notranslate"><span class="pre">ernieware</span></code> and <code class="docutils literal notranslate"><span class="pre">housenka</span></code> tape-sampling loop
-<a class="reference internal" href="commands.html#tap2sna-accelerators"><span class="std std-ref">accelerators</span></a></p></li>
-<li><p>Statistics for DEC A tape-sampling delay loops are now shown by
-<a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> when <code class="docutils literal notranslate"><span class="pre">accelerator=list</span></code></p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> for executing machine code in 128K snapshots</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#trace-conf"><span class="std std-ref">trace.py</span></a> for reading configuration
-from <cite>skoolkit.ini</cite></p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">--ini</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options to <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> (for
-setting the value of a configuration parameter and for showing all
-configuration parameter values)</p></li>
-<li><p>Added the <code class="docutils literal notranslate"><span class="pre">--no-interrupts</span></code> option to <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> (to prevent the
-execution of interrupt routines, which are now executed by default)</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#bin2sna-py"><span class="std std-ref">bin2sna.py</span></a>, <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> and <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> for
-writing SZX snapshots</p></li>
-<li><p>Added support to <a class="reference internal" href="commands.html#bin2sna-py"><span class="std std-ref">bin2sna.py</span></a> and <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> for setting the
-<code class="docutils literal notranslate"><span class="pre">fe</span></code> hardware state attribute (i.e. the last value written to port 0xFE in
-SZX snapshots)</p></li>
-<li><p>Added support to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a> macro for passing delays through a moving
-average filter (which can produce higher quality audio, especially for
-multi-channel tunes)</p></li>
-<li><p>Added support to <a class="reference internal" href="control-files.html#ctlloops"><span class="std std-ref">control directive loops</span></a> for avoiding
-repetition of an <code class="docutils literal notranslate"><span class="pre">N</span></code> directive at the start of a loop</p></li>
-<li><p><a class="reference internal" href="commands.html#tapinfo-py"><span class="std std-ref">tapinfo.py</span></a> now shows the LINE number (if present) for Program:
-header blocks, and renders BASIC tokens in header block names</p></li>
-<li><p><a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> now shows the current AY register in 128K SZX and Z80
-snapshots</p></li>
-<li><p>Changed the default value of <code class="docutils literal notranslate"><span class="pre">H</span></code> and <code class="docutils literal notranslate"><span class="pre">A</span></code> for the <a class="reference internal" href="asm.html#assemble"><span class="std std-ref">&#64;assemble</span></a>
-directive to 2</p></li>
-<li><p>Fixed the bug that prevents <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> from loading a tape that has a
-hash character (<code class="docutils literal notranslate"><span class="pre">#</span></code>) in its filename</p></li>
-</ul>
-</section>
-<section id="id3">
-<h2>8.10 (2023-06-17)<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
+<h2>8.10 (2023-06-17)<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">finish-tape</span></code> simulated LOAD configuration parameter to
 <a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify whether to finish the tape
 before stopping the simulation at the given start address)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">contended-in</span></code> simulated LOAD configuration parameter to
 <a class="reference internal" href="commands.html#tap2sna-sim-load"><span class="std std-ref">tap2sna.py</span></a> (to specify whether to interpret
 IN A,($FE) instructions in the address range $4000-$7FFF as reading the
@@ -204,16 +95,16 @@
 a single decimal point (<code class="docutils literal notranslate"><span class="pre">.</span></code>)</p></li>
 <li><p>Fixed how the value of the R register is set in a Z80 snapshot when bit 7 is
 reset</p></li>
 <li><p>Fixed how tape-sampling loop accelerators affect the carry flag after at
 least one pass through the loop</p></li>
 </ul>
 </section>
-<section id="id4">
-<h2>8.9 (2023-02-19)<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h2>
+<section id="id2">
+<h2>8.9 (2023-02-19)<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added support to <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> for TZX loops (block types 0x24 and 0x25),
 pauses (block types 0x10, 0x11, 0x14 and 0x20), and unused bits in data
 blocks (block types 0x11 and 0x14)</p></li>
 <li><p><a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> now accelerates the simulation of tape-sampling loops in
 loading routines, and also simulates the execution of interrupt routines when
 interrupts are enabled</p></li>
@@ -247,32 +138,32 @@
 between them</p></li>
 <li><p>Fixed the bug that prevents the <code class="docutils literal notranslate"><span class="pre">--find</span></code> option of <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> from
 finding byte sequences below address 16384</p></li>
 <li><p>Fixed the bug that prevents the <code class="docutils literal notranslate"><span class="pre">--find-text</span></code> option of <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a>
 from finding text strings below address 16384</p></li>
 </ul>
 </section>
-<section id="id5">
-<h2>8.8 (2022-11-19)<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
+<section id="id3">
+<h2>8.8 (2022-11-19)<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> command (for tracing the execution of machine code
 in a 48K memory snapshot)</p></li>
 <li><p>The <code class="docutils literal notranslate"><span class="pre">--sim-load</span></code> option of <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> now performs any <code class="docutils literal notranslate"><span class="pre">call</span></code>,
 <code class="docutils literal notranslate"><span class="pre">move</span></code>, <code class="docutils literal notranslate"><span class="pre">poke</span></code> and <code class="docutils literal notranslate"><span class="pre">sysvars</span></code> operations specified by the <code class="docutils literal notranslate"><span class="pre">--ram</span></code>
 option</p></li>
 <li><p>Improved the performance of the <code class="docutils literal notranslate"><span class="pre">--sim-load</span></code> option of <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a></p></li>
 <li><p>Improved the performance of the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro</p></li>
 <li><p>Improved the performance of the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a> and <a class="reference internal" href="skool-macros.html#tstates"><span class="std std-ref">#TSTATES</span></a> macros when
 they execute instructions in a simulator</p></li>
 <li><p>Removed the <code class="docutils literal notranslate"><span class="pre">MaxAmplitude</span></code> parameter from the <a class="reference internal" href="ref-files.html#ref-audiowriter"><span class="std std-ref">[AudioWriter]</span></a>
 section</p></li>
 </ul>
 </section>
-<section id="id6">
-<h2>8.7 (2022-10-08)<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h2>
+<section id="id4">
+<h2>8.7 (2022-10-08)<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Dropped support for Python 3.6</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#sim"><span class="std std-ref">#SIM</span></a> macro (for simulating the execution of machine code in
 the internal memory snapshot constructed from the contents of the skool file)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a> macro (for creating HTML5 <code class="docutils literal notranslate"><span class="pre">&lt;audio&gt;</span></code> elements, and
 optionally creating audio files in WAV format)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#tstates"><span class="std std-ref">#TSTATES</span></a> macro (which expands to the time taken, in T-states,
@@ -310,16 +201,16 @@
 register names</p></li>
 <li><p>Fixed the bug where the <code class="docutils literal notranslate"><span class="pre">stop</span></code> value of the <a class="reference internal" href="skool-macros.html#for"><span class="std std-ref">#FOR</span></a> macro is used even
 when it does not differ from <code class="docutils literal notranslate"><span class="pre">start</span></code> by a multiple of <code class="docutils literal notranslate"><span class="pre">step</span></code></p></li>
 <li><p>Fixed the bug where an <a class="reference internal" href="control-files.html#mdirective"><span class="std std-ref">M directive</span></a> with an explicit length overrides
 the sublengths of an earlier sub-block directive at the same address</p></li>
 </ul>
 </section>
-<section id="id7">
-<h2>8.6 (2021-11-06)<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
+<section id="id5">
+<h2>8.6 (2021-11-06)<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <a class="reference internal" href="skool-macros.html#str"><span class="std std-ref">#STR</span></a> macro (for retrieving the text string at a given address
 in the memory snapshot)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#while"><span class="std std-ref">#WHILE</span></a> macro (for repeatedly expanding macros until a
 conditional expression becomes false)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#udgs"><span class="std std-ref">#UDGS</span></a> macro (as an alternative to the <a class="reference internal" href="skool-macros.html#udgarray"><span class="std std-ref">#UDGARRAY</span></a> macro
 for creating an image of a rectangular array of UDGs)</p></li>
@@ -339,16 +230,16 @@
 multiple ref file sections</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">tindex</span></code> and <code class="docutils literal notranslate"><span class="pre">alpha</span></code> parameters to the <a class="reference internal" href="skool-macros.html#copy"><span class="std std-ref">#COPY</span></a> macro (for
 specifying the transparent colour and its alpha value in the new frame)</p></li>
 <li><p>Fixed the bug where macros inside a <a class="reference internal" href="skool-macros.html#list"><span class="std std-ref">#LIST</span></a> or <a class="reference internal" href="skool-macros.html#table"><span class="std std-ref">#TABLE</span></a> macro are
 expanded twice in HTML mode (which makes <a class="reference internal" href="skool-macros.html#raw"><span class="std std-ref">#RAW</span></a> ineffective)</p></li>
 </ul>
 </section>
-<section id="id8">
-<h2>8.5 (2021-07-03)<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
+<section id="id6">
+<h2>8.5 (2021-07-03)<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Dropped support for Python 3.5</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#over"><span class="std std-ref">#OVER</span></a> macro (for superimposing one frame on another)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#copy"><span class="std std-ref">#COPY</span></a> macro (for copying all or part of an existing frame
 into a new frame)</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#def"><span class="std std-ref">#DEF</span></a> macro (as a more powerful alternative to the
 <code class="docutils literal notranslate"><span class="pre">#DEFINE</span></code> macro, which is now deprecated)</p></li>
@@ -383,16 +274,16 @@
 imported)</p></li>
 <li><p>Fixed the bug where a frame whose pixels are modified by the <a class="reference internal" href="skool-macros.html#plot"><span class="std std-ref">#PLOT</span></a>
 macro may have incorrect colours when converted to an image</p></li>
 <li><p>Fixed the bug where an <code class="docutils literal notranslate"><span class="pre">M</span></code> directive in a control file is ignored when it
 is followed by a sub-block that has sublengths</p></li>
 </ul>
 </section>
-<section id="id9">
-<h2>8.4 (2021-03-06)<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h2>
+<section id="id7">
+<h2>8.4 (2021-03-06)<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Made the <a class="reference internal" href="components.html#imagewriter"><span class="std std-ref">image writer component</span></a> pluggable</p></li>
 <li><p>Added support for defining groups of entries (via the <a class="reference internal" href="ref-files.html#entrygroups"><span class="std std-ref">[EntryGroups]</span></a>
 section of the ref file) whose disassembly pages can be given custom titles
 and headers</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">Address</span></code> parameter to the <a class="reference internal" href="ref-files.html#ref-game"><span class="std std-ref">[Game]</span></a> section (for
 specifying the format of address fields on disassembly pages and memory map
@@ -414,16 +305,16 @@
 configuration parameter</p></li>
 <li><p>Fixed the bug that prevents instruction comments from being repeated in a
 <a class="reference internal" href="control-files.html#ctlloops"><span class="std std-ref">control file loop</span></a></p></li>
 <li><p>Fixed the bug that makes <a class="reference internal" href="commands.html#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> ignore a given start address
 below 16384 when converting a snapshot</p></li>
 </ul>
 </section>
-<section id="id10">
-<h2>8.3 (2020-11-08)<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h2>
+<section id="id8">
+<h2>8.3 (2020-11-08)<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <a class="reference internal" href="skool-macros.html#plot"><span class="std std-ref">#PLOT</span></a> macro (for setting, resetting or flipping a pixel in a
 frame already created by an image macro)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--begin</span></code> option to <a class="reference internal" href="commands.html#bin2tap-py"><span class="std std-ref">bin2tap.py</span></a> (for specifying the address
 at which to begin conversion)</p></li>
 <li><p>The <code class="docutils literal notranslate"><span class="pre">--end</span></code> option of <a class="reference internal" href="commands.html#bin2tap-py"><span class="std std-ref">bin2tap.py</span></a> now applies to raw memory files as
 well as SNA, SZX and Z80 snapshots</p></li>
@@ -439,16 +330,16 @@
 <a class="reference internal" href="skool-macros.html#include"><span class="std std-ref">#INCLUDE</span></a>, <a class="reference internal" href="skool-macros.html#n"><span class="std std-ref">#N</span></a>, <a class="reference internal" href="skool-macros.html#pokes"><span class="std std-ref">#POKES</span></a>, <a class="reference internal" href="skool-macros.html#r"><span class="std std-ref">#R</span></a> and <a class="reference internal" href="skool-macros.html#space"><span class="std std-ref">#SPACE</span></a> macros, and
 in the integer parameters and cropping specification of the <a class="reference internal" href="skool-macros.html#font"><span class="std std-ref">#FONT</span></a>,
 <a class="reference internal" href="skool-macros.html#scr"><span class="std std-ref">#SCR</span></a>, <a class="reference internal" href="skool-macros.html#udg"><span class="std std-ref">#UDG</span></a> and <a class="reference internal" href="skool-macros.html#udgarray"><span class="std std-ref">#UDGARRAY</span></a> macros</p></li>
 <li><p>Fixed the bug that causes e+1 to be interpreted as a floating point number
 when it appears in a BASIC program</p></li>
 </ul>
 </section>
-<section id="id11">
-<h2>8.2 (2020-07-19)<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h2>
+<section id="id9">
+<h2>8.2 (2020-07-19)<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--call-graph</span></code> option to <a class="reference internal" href="commands.html#snapinfo-call-graph"><span class="std std-ref">snapinfo.py</span></a>
 (for generating a call graph in DOT format)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--ctl</span></code> option to <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> (for specifying a control
 file to use when generating a call graph)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--org</span></code> option to <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> along with the ability to
 read binary (raw memory) files</p></li>
@@ -474,16 +365,16 @@
 jump to or call an entry point)</p></li>
 <li><p>Added support for replacement fields in the integer parameters of the
 <a class="reference internal" href="skool-macros.html#for"><span class="std std-ref">#FOR</span></a> and <a class="reference internal" href="skool-macros.html#peek"><span class="std std-ref">#PEEK</span></a> macros</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--page</span></code> option to <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> (for specifying the page of
 a 128K snapshot to map to 49152-65535)</p></li>
 </ul>
 </section>
-<section id="id12">
-<h2>8.1 (2020-03-29)<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h2>
+<section id="id10">
+<h2>8.1 (2020-03-29)<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--rsub</span></code> and <code class="docutils literal notranslate"><span class="pre">--rfix</span></code> options to <a class="reference internal" href="commands.html#skool2bin-py"><span class="std std-ref">skool2bin.py</span></a> (for
 parsing the skool file in <a class="reference internal" href="asm.html#rsubmode"><span class="std std-ref">&#64;rsub mode</span></a> and <a class="reference internal" href="asm.html#rfixmode"><span class="std std-ref">&#64;rfix mode</span></a>)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code> option to <a class="reference internal" href="commands.html#skool2bin-py"><span class="std std-ref">skool2bin.py</span></a> (for processing
 <a class="reference internal" href="asm.html#defb"><span class="std std-ref">&#64;defb</span></a>, <a class="reference internal" href="asm.html#defs"><span class="std std-ref">&#64;defs</span></a> and <a class="reference internal" href="asm.html#defw"><span class="std std-ref">&#64;defw</span></a> directives)</p></li>
 <li><p>Added the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option to <a class="reference internal" href="commands.html#skool2bin-py"><span class="std std-ref">skool2bin.py</span></a> (for showing
 information on each converted instruction)</p></li>
@@ -511,16 +402,16 @@
 addresses for which to suppress warnings</p></li>
 <li><p>Added support to <a class="reference internal" href="commands.html#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> for ignoring default control files (by
 specifying <code class="docutils literal notranslate"><span class="pre">--ctl</span> <span class="pre">0</span></code>)</p></li>
 <li><p>Fixed how <a class="reference internal" href="commands.html#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> works with dot directives in a control file
 when an end address is specified</p></li>
 </ul>
 </section>
-<section id="id13">
-<h2>8.0 (2019-11-09)<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h2>
+<section id="id11">
+<h2>8.0 (2019-11-09)<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h2>
 <ul class="simple">
 <li><p>Dropped support for Python 3.4</p></li>
 <li><p>Made several <a class="reference internal" href="components.html#components"><span class="std std-ref">SkoolKit components</span></a> pluggable</p></li>
 <li><p>Added support for the <a class="reference internal" href="html-templates.html#td-foreach"><span class="std std-ref">foreach</span></a>, <a class="reference internal" href="html-templates.html#td-if"><span class="std std-ref">if</span></a> and <a class="reference internal" href="html-templates.html#td-include"><span class="std std-ref">include</span></a>
 directives in HTML templates</p></li>
 <li><p>Added the <a class="reference internal" href="skool-macros.html#pc"><span class="std std-ref">#PC</span></a> macro (which expands to the address of the closest
 instruction in the current entry)</p></li>
@@ -546,74 +437,57 @@
 box page whose <code class="docutils literal notranslate"><span class="pre">SectionType</span></code> is <code class="docutils literal notranslate"><span class="pre">ListItems</span></code> or <code class="docutils literal notranslate"><span class="pre">BulletPoints</span></code></p></li>
 <li><p>Fixed how a table row separator that crosses a cell with rowspan &gt; 1 is
 rendered in ASM mode</p></li>
 <li><p>Fixed the bug that prevents <a class="reference internal" href="commands.html#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> from wrapping referrer
 comments</p></li>
 </ul>
 </section>
-<section id="older-versions">
-<h2>Older versions<a class="headerlink" href="#older-versions" title="Permalink to this heading"></a></h2>
-<div class="toctree-wrapper compound">
-<ul>
-<li class="toctree-l1"><a class="reference internal" href="changelog7.html">SkoolKit 7.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog6.html">SkoolKit 6.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog5.html">SkoolKit 5.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog4.html">SkoolKit 4.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog3.html">SkoolKit 3.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog2.html">SkoolKit 2.x changelog</a></li>
-<li class="toctree-l1"><a class="reference internal" href="changelog1.html">SkoolKit 1.x changelog</a></li>
-</ul>
-</div>
-</section>
 </section>
 
 
             <div class="clearer"></div>
           </div>
         </div>
       </div>
       <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
         <div class="sphinxsidebarwrapper">
   <div>
     <h3><a href="index.html">Table of Contents</a></h3>
     <ul>
-<li><a class="reference internal" href="#">Changelog</a><ul>
-<li><a class="reference internal" href="#id1">9.1 (2024-02-03)</a></li>
-<li><a class="reference internal" href="#id2">9.0 (2023-11-04)</a></li>
-<li><a class="reference internal" href="#id3">8.10 (2023-06-17)</a></li>
-<li><a class="reference internal" href="#id4">8.9 (2023-02-19)</a></li>
-<li><a class="reference internal" href="#id5">8.8 (2022-11-19)</a></li>
-<li><a class="reference internal" href="#id6">8.7 (2022-10-08)</a></li>
-<li><a class="reference internal" href="#id7">8.6 (2021-11-06)</a></li>
-<li><a class="reference internal" href="#id8">8.5 (2021-07-03)</a></li>
-<li><a class="reference internal" href="#id9">8.4 (2021-03-06)</a></li>
-<li><a class="reference internal" href="#id10">8.3 (2020-11-08)</a></li>
-<li><a class="reference internal" href="#id11">8.2 (2020-07-19)</a></li>
-<li><a class="reference internal" href="#id12">8.1 (2020-03-29)</a></li>
-<li><a class="reference internal" href="#id13">8.0 (2019-11-09)</a></li>
-<li><a class="reference internal" href="#older-versions">Older versions</a></li>
+<li><a class="reference internal" href="#">SkoolKit 8.x changelog</a><ul>
+<li><a class="reference internal" href="#id1">8.10 (2023-06-17)</a></li>
+<li><a class="reference internal" href="#id2">8.9 (2023-02-19)</a></li>
+<li><a class="reference internal" href="#id3">8.8 (2022-11-19)</a></li>
+<li><a class="reference internal" href="#id4">8.7 (2022-10-08)</a></li>
+<li><a class="reference internal" href="#id5">8.6 (2021-11-06)</a></li>
+<li><a class="reference internal" href="#id6">8.5 (2021-07-03)</a></li>
+<li><a class="reference internal" href="#id7">8.4 (2021-03-06)</a></li>
+<li><a class="reference internal" href="#id8">8.3 (2020-11-08)</a></li>
+<li><a class="reference internal" href="#id9">8.2 (2020-07-19)</a></li>
+<li><a class="reference internal" href="#id10">8.1 (2020-03-29)</a></li>
+<li><a class="reference internal" href="#id11">8.0 (2019-11-09)</a></li>
 </ul>
 </li>
 </ul>
 
   </div>
   <div>
     <h4>Previous topic</h4>
-    <p class="topless"><a href="migration.html"
-                          title="previous chapter">Migrating from SkoolKit 8</a></p>
+    <p class="topless"><a href="changelog.html"
+                          title="previous chapter">Changelog</a></p>
   </div>
   <div>
     <h4>Next topic</h4>
     <p class="topless"><a href="changelog7.html"
                           title="next chapter">SkoolKit 7.x changelog</a></p>
   </div>
   <div role="note" aria-label="source link">
     <h3>This Page</h3>
     <ul class="this-page-menu">
-      <li><a href="_sources/changelog.rst.txt"
+      <li><a href="_sources/changelog8.rst.txt"
             rel="nofollow">Show Source</a></li>
     </ul>
    </div>
 <div id="searchbox" style="display: none" role="search">
   <h3 id="searchlabel">Quick search</h3>
     <div class="searchformwrapper">
     <form class="search" action="search.html" method="get">
@@ -633,18 +507,19 @@
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              >index</a></li>
         <li class="right" >
           <a href="changelog7.html" title="SkoolKit 7.x changelog"
              >next</a> |</li>
         <li class="right" >
-          <a href="migration.html" title="Migrating from SkoolKit 8"
+          <a href="changelog.html" title="Changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
-        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
+          <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
+        <li class="nav-item nav-item-this"><a href="">SkoolKit 8.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
   </body>
```

#### html2text {}

```diff
@@ -1,103 +1,15 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
-    * Changelog
-************ CChhaannggeelloogg_? ************
-********** 99..11 ((22002244--0022--0033))_? **********
-    * Added support to _s_n_a_p_m_o_d_._p_y for modifying SZX snapshots and 128K
-      snapshots
-    * Added support to _b_i_n_2_s_n_a_._p_y for writing 128K snapshots (by using the --
-      page and --bank options, or by providing a 128K input file)
-    * Added support to _b_i_n_2_t_a_p_._p_y for writing 128K TAP files (by using the --
-      7ffd, --banks and --loader options)
-    * Added support to _b_i_n_2_s_n_a_._p_y, _s_n_a_p_m_o_d_._p_y, _t_a_p_2_s_n_a_._p_y and _t_r_a_c_e_._p_y for
-      modifying 128K RAM banks (via the --move, --poke, --ram move and --ram
-      poke options)
-    * Added the _#_B_A_N_K macro (for switching the RAM bank that is mapped to
-      49152-65535)
-    * Added the _@_b_a_n_k directive (for specifying the RAM bank that is mapped to
-      49152-65535, and for populating a RAM bank from the contents of another
-      skool file)
-    * Added the --banks option to _s_k_o_o_l_2_b_i_n_._p_y (for processing _@_b_a_n_k directives
-      and writing RAM banks 0-7 to a 128K file)
-    * Added the cmio simulated LOAD configuration parameter to _t_a_p_2_s_n_a_._p_y (to
-      specify whether to simulate memory and I/O contention)
-    * Added the --cmio option to _t_r_a_c_e_._p_y (to enable simulation of memory and
-      I/O contention)
-    * Added the cmio parameter to the _#_A_U_D_I_O, _#_S_I_M and _#_T_S_T_A_T_E_S macros (to
-      specify whether to simulate memory and I/O contention)
-    * Added the execint parameter to the _#_A_U_D_I_O, _#_S_I_M and _#_T_S_T_A_T_E_S macros (to
-      specify whether to simulate the execution of interrupt routines)
-    * Added the tstates parameter to the _#_S_I_M macro (to set the value of the
-      simulators clock)
-    * Added the iff parameter to the _#_S_I_M macro (to set whether interrupts are
-      enabled)
-    * Added the im parameter to the _#_S_I_M macro (to set the interrupt mode)
-    * Made the stop parameter of the _#_S_I_M macro optional
-    * Added support to the _#_A_U_D_I_O, _#_S_I_M and _#_T_S_T_A_T_E_S macros for executing code
-      in a 128K memory snapshot
-    * Fixed how _t_r_a_c_e_._p_y handles the value of the SP register in a 128K SNA
-      file
-    * Fixed how _t_a_p_2_s_n_a_._p_y and _t_r_a_c_e_._p_y log timestamps when an interrupt occurs
-    * Fixed how interrupts are accepted when _t_a_p_2_s_n_a_._p_y and _t_r_a_c_e_._p_y execute
-      code in a simulator
-    * Fixed how the Z80 instruction set simulator updates bit 2 of the flags
-      register when executing an LD A,I or LD A,R instruction just before
-      an interrupt is accepted
-    * Fixed the bug that makes the --basic option of _s_n_a_p_i_n_f_o_._p_y fail when the
-      value of PROG is 65535
-    * Fixed the bug that prevents an _M_ _d_i_r_e_c_t_i_v_e from being repeated in a
-      _c_o_n_t_r_o_l_ _f_i_l_e_ _l_o_o_p
-********** 99..00 ((22002233--1111--0044))_? **********
-    * Dropped support for Python 3.7
-    * _t_a_p_2_s_n_a_._p_y now performs a _s_i_m_u_l_a_t_e_d_ _L_O_A_D by default, and will also
-      overwrite an existing snapshot by default
-    * Added the machine simulated LOAD configuration parameter to _t_a_p_2_s_n_a_._p_y
-      (to specify whether to simulate a 48K or a 128K Spectrum)
-    * Added the load simulated LOAD configuration parameter to _t_a_p_2_s_n_a_._p_y (to
-      specify an alternative command line to use to load the tape)
-    * Added the polarity simulated LOAD configuration parameter to _t_a_p_2_s_n_a_._p_y
-      (to specify the EAR bit reading produced by the first pulse on the tape)
-    * Added the in-flags simulated LOAD configuration parameter to _t_a_p_2_s_n_a_._p_y
-      (to specify how to handle IN instructions)
-    * The output snapshot argument of _t_a_p_2_s_n_a_._p_y is now optional
-    * Added the DefaultSnapshotFormat configuration parameter for _t_a_p_2_s_n_a_._p_y
-      (to specify the default output snapshot format)
-    * Added support to _t_a_p_2_s_n_a_._p_y for register pairs (r[bc], r[de] etc.) in the
-      TraceLine configuration parameter
-    * Added the antirom, ernieware and housenka tape-sampling loop _a_c_c_e_l_e_r_a_t_o_r_s
-    * Statistics for DEC A tape-sampling delay loops are now shown by
-      _t_a_p_2_s_n_a_._p_y when accelerator=list
-    * Added support to _t_r_a_c_e_._p_y for executing machine code in 128K snapshots
-    * Added support to _t_r_a_c_e_._p_y for reading configuration fromskoolkit.ini
-    * Added the --ini and --show-config options to _t_r_a_c_e_._p_y (for setting the
-      value of a configuration parameter and for showing all configuration
-      parameter values)
-    * Added the --no-interrupts option to _t_r_a_c_e_._p_y (to prevent the execution of
-      interrupt routines, which are now executed by default)
-    * Added support to _b_i_n_2_s_n_a_._p_y, _t_a_p_2_s_n_a_._p_y and _t_r_a_c_e_._p_y for writing SZX
-      snapshots
-    * Added support to _b_i_n_2_s_n_a_._p_y and _t_a_p_2_s_n_a_._p_y for setting the fe hardware
-      state attribute (i.e. the last value written to port 0xFE in SZX
-      snapshots)
-    * Added support to the _#_A_U_D_I_O macro for passing delays through a moving
-      average filter (which can produce higher quality audio, especially for
-      multi-channel tunes)
-    * Added support to _c_o_n_t_r_o_l_ _d_i_r_e_c_t_i_v_e_ _l_o_o_p_s for avoiding repetition of an N
-      directive at the start of a loop
-    * _t_a_p_i_n_f_o_._p_y now shows the LINE number (if present) for Program: header
-      blocks, and renders BASIC tokens in header block names
-    * _s_n_a_p_i_n_f_o_._p_y now shows the current AY register in 128K SZX and Z80
-      snapshots
-    * Changed the default value of H and A for the _@_a_s_s_e_m_b_l_e directive to 2
-    * Fixed the bug that prevents _t_a_p_2_s_n_a_._p_y from loading a tape that has a
-      hash character (#) in its filename
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _C_h_a_n_g_e_l_o_g 
+    * SkoolKit 8.x changelog
+************ SSkkoooollKKiitt 88..xx cchhaannggeelloogg_? ************
 ********** 88..1100 ((22002233--0066--1177))_? **********
     * Added the finish-tape simulated LOAD configuration parameter to
       _t_a_p_2_s_n_a_._p_y (to specify whether to finish the tape before stopping the
       simulation at the given start address)
     * Added the contended-in simulated LOAD configuration parameter to
       _t_a_p_2_s_n_a_._p_y (to specify whether to interpret IN A,($FE) instructions in
       the address range $4000-$7FFF as reading the tape)
@@ -414,46 +326,36 @@
     * Replaced the AsmSinglePageTemplate parameter with the AsmSinglePage
       parameter in the _[_G_a_m_e_] section
     * Fixed the bug that prevents the JavaScript parameter from working for a
       box page whose SectionType is ListItems or BulletPoints
     * Fixed how a table row separator that crosses a cell with rowspan > 1 is
       rendered in ASM mode
     * Fixed the bug that prevents _s_n_a_2_s_k_o_o_l_._p_y from wrapping referrer comments
-********** OOllddeerr vveerrssiioonnss_? **********
-    * _S_k_o_o_l_K_i_t_ _7_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _6_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _5_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _4_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _3_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _2_._x_ _c_h_a_n_g_e_l_o_g
-    * _S_k_o_o_l_K_i_t_ _1_._x_ _c_h_a_n_g_e_l_o_g
 ******** _TT_aa_bb_ll_ee_ _oo_ff_ _CC_oo_nn_tt_ee_nn_tt_ss ********
-    * _C_h_a_n_g_e_l_o_g
-          o _9_._1_ _(_2_0_2_4_-_0_2_-_0_3_)
-          o _9_._0_ _(_2_0_2_3_-_1_1_-_0_4_)
+    * _S_k_o_o_l_K_i_t_ _8_._x_ _c_h_a_n_g_e_l_o_g
           o _8_._1_0_ _(_2_0_2_3_-_0_6_-_1_7_)
           o _8_._9_ _(_2_0_2_3_-_0_2_-_1_9_)
           o _8_._8_ _(_2_0_2_2_-_1_1_-_1_9_)
           o _8_._7_ _(_2_0_2_2_-_1_0_-_0_8_)
           o _8_._6_ _(_2_0_2_1_-_1_1_-_0_6_)
           o _8_._5_ _(_2_0_2_1_-_0_7_-_0_3_)
           o _8_._4_ _(_2_0_2_1_-_0_3_-_0_6_)
           o _8_._3_ _(_2_0_2_0_-_1_1_-_0_8_)
           o _8_._2_ _(_2_0_2_0_-_0_7_-_1_9_)
           o _8_._1_ _(_2_0_2_0_-_0_3_-_2_9_)
           o _8_._0_ _(_2_0_1_9_-_1_1_-_0_9_)
-          o _O_l_d_e_r_ _v_e_r_s_i_o_n_s
 ****** PPrreevviioouuss ttooppiicc ******
-_M_i_g_r_a_t_i_n_g_ _f_r_o_m_ _S_k_o_o_l_K_i_t_ _8
+_C_h_a_n_g_e_l_o_g
 ****** NNeexxtt ttooppiicc ******
 _S_k_o_o_l_K_i_t_ _7_._x_ _c_h_a_n_g_e_l_o_g
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
-    * Changelog
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _C_h_a_n_g_e_l_o_g 
+    * SkoolKit 8.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog1.html` & `skoolkit-9.2/docs/changelog1.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 1.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 1.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="parsing.html" title="Parsing, rendering, and modes"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog2.html" title="SkoolKit 2.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 1.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -233,15 +233,15 @@
              >index</a></li>
         <li class="right" >
           <a href="parsing.html" title="Parsing, rendering, and modes"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog2.html" title="SkoolKit 2.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 1.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 1.x changelog
 ************ SSkkoooollKKiitt 11..xx cchhaannggeelloogg_? ************
 ********** 11..44 ((22001100--1111--1111))_? **********
     * Updated the Skool Daze disassembly
     * Updated the Back to Skool disassembly
     * Updated the incomplete Contact Sam Cruise disassembly
@@ -96,11 +96,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 1.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog2.html` & `skoolkit-9.2/docs/changelog2.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 2.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 2.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog1.html" title="SkoolKit 1.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog3.html" title="SkoolKit 3.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 2.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -405,15 +405,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog1.html" title="SkoolKit 1.x changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog3.html" title="SkoolKit 3.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 2.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 2.x changelog
 ************ SSkkoooollKKiitt 22..xx cchhaannggeelloogg_? ************
 ********** 22..55 ((22001122--0022--2222))_? **********
     * Added support for _[_M_e_m_o_r_y_M_a_p_:_*_] sections in ref files (for defining the
       properties of memory map pages); removed support for the [MapDetails]
       section accordingly
@@ -224,11 +224,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 2.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog3.html` & `skoolkit-9.2/docs/changelog3.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 3.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 3.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog2.html" title="SkoolKit 2.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog4.html" title="SkoolKit 4.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 3.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -389,15 +389,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog2.html" title="SkoolKit 2.x changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog4.html" title="SkoolKit 4.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 3.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 3.x changelog
 ************ SSkkoooollKKiitt 33..xx cchhaannggeelloogg_? ************
 ********** 33..77 ((22001144--0033--0088))_? **********
     * Added support for numbers in binary notation (e.g. %10101010)
     * Added the s and S control directives for encoding DEFS statements (with
       optional non-zero byte values); the z and Z directives are now deprecated
@@ -227,11 +227,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 3.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog4.html` & `skoolkit-9.2/docs/changelog4.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 4.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 4.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog3.html" title="SkoolKit 3.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog5.html" title="SkoolKit 5.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 4.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -260,15 +260,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog3.html" title="SkoolKit 3.x changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog5.html" title="SkoolKit 5.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 4.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 4.x changelog
 ************ SSkkoooollKKiitt 44..xx cchhaannggeelloogg_? ************
 ********** 44..55 ((22001155--0077--0044))_? **********
     * Added support to _t_a_p_2_s_n_a_._p_y for TZX block type 0x14 (pure data), for
       loading the first and last bytes of a tape block (which are usually, but
       not always, the flag and parity bytes), and for modifying memory with XOR
@@ -143,11 +143,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 4.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog5.html` & `skoolkit-9.2/docs/changelog5.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 5.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 5.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog4.html" title="SkoolKit 4.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog6.html" title="SkoolKit 6.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 5.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -236,15 +236,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog4.html" title="SkoolKit 4.x changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog6.html" title="SkoolKit 6.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 5.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 5.x changelog
 ************ SSkkoooollKKiitt 55..xx cchhaannggeelloogg_? ************
 ********** 55..44 ((22001177--0011--0088))_? **********
     * Added the _s_n_a_2_i_m_g_._p_y command (for converting the screenshot in a SCR file
       or SNA/SZX/Z80 snapshot into a PNG or GIF file)
     * Added the _@_e_q_u ASM directive (which produces an EQU directive in the ASM
@@ -123,11 +123,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 5.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog6.html` & `skoolkit-9.2/docs/changelog6.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 6.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 6.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog5.html" title="SkoolKit 5.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog7.html" title="SkoolKit 7.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 6.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -281,15 +281,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog5.html" title="SkoolKit 5.x changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog7.html" title="SkoolKit 7.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 6.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 6.x changelog
 ************ SSkkoooollKKiitt 66..xx cchhaannggeelloogg_? ************
 ********** 66..44 ((22001188--0033--3311))_? **********
     * Added the _@_i_f directive (for conditionally processing other ASM
       directives)
     * Added the _#_R_A_W macro (which prevents any macros or macro-like tokens in
@@ -171,11 +171,11 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 6.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/changelog7.html` & `skoolkit-9.2/docs/changelog7.html`

 * *Files 2% similar despite different names*

```diff
@@ -2,44 +2,44 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit 7.x changelog &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit 7.x changelog &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
     <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
     <script src="_static/doctools.js"></script>
     <script src="_static/sphinx_highlight.js"></script>
     
     <link rel="index" title="Index" href="genindex.html" />
     <link rel="search" title="Search" href="search.html" />
     <link rel="next" title="SkoolKit 6.x changelog" href="changelog6.html" />
-    <link rel="prev" title="Changelog" href="changelog.html" /> 
+    <link rel="prev" title="SkoolKit 8.x changelog" href="changelog8.html" /> 
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog6.html" title="SkoolKit 6.x changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
-          <a href="changelog.html" title="Changelog"
+          <a href="changelog8.html" title="SkoolKit 8.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" accesskey="U">Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 7.x changelog</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
@@ -183,16 +183,16 @@
 </ul>
 </li>
 </ul>
 
   </div>
   <div>
     <h4>Previous topic</h4>
-    <p class="topless"><a href="changelog.html"
-                          title="previous chapter">Changelog</a></p>
+    <p class="topless"><a href="changelog8.html"
+                          title="previous chapter">SkoolKit 8.x changelog</a></p>
   </div>
   <div>
     <h4>Next topic</h4>
     <p class="topless"><a href="changelog6.html"
                           title="next chapter">SkoolKit 6.x changelog</a></p>
   </div>
   <div role="note" aria-label="source link">
@@ -222,17 +222,17 @@
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              >index</a></li>
         <li class="right" >
           <a href="changelog6.html" title="SkoolKit 6.x changelog"
              >next</a> |</li>
         <li class="right" >
-          <a href="changelog.html" title="Changelog"
+          <a href="changelog8.html" title="SkoolKit 8.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
           <li class="nav-item nav-item-1"><a href="changelog.html" >Changelog</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit 7.x changelog</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 7.x changelog
 ************ SSkkoooollKKiitt 77..xx cchhaannggeelloogg_? ************
 ********** 77..22 ((22001199--0066--0022))_? **********
     * Added support to control files for specifying comments over multiple
       lines (by using the _d_o_t_ _a_n_d_ _c_o_l_o_n_ _d_i_r_e_c_t_i_v_e_s)
     * Added support to _s_k_o_o_l_2_c_t_l_._p_y for reading configuration fromskoolkit.ini
@@ -105,22 +105,22 @@
       handled when generating a control file
 ******** _TT_aa_bb_ll_ee_ _oo_ff_ _CC_oo_nn_tt_ee_nn_tt_ss ********
     * _S_k_o_o_l_K_i_t_ _7_._x_ _c_h_a_n_g_e_l_o_g
           o _7_._2_ _(_2_0_1_9_-_0_6_-_0_2_)
           o _7_._1_ _(_2_0_1_9_-_0_2_-_0_2_)
           o _7_._0_ _(_2_0_1_8_-_1_0_-_1_3_)
 ****** PPrreevviioouuss ttooppiicc ******
-_C_h_a_n_g_e_l_o_g
+_S_k_o_o_l_K_i_t_ _8_._x_ _c_h_a_n_g_e_l_o_g
 ****** NNeexxtt ttooppiicc ******
 _S_k_o_o_l_K_i_t_ _6_._x_ _c_h_a_n_g_e_l_o_g
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * _C_h_a_n_g_e_l_o_g 
     * SkoolKit 7.x changelog
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/commands.html` & `skoolkit-9.2/docs/commands.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Commands &#8212; SkoolKit 9.1 documentation</title>
+    <title>Commands &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="assemblers.html" title="Supported assemblers"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="diy.html" title="Disassembly DIY"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -254,16 +254,126 @@
 </tr>
 <tr class="row-even"><td><p>1.3.1</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
+<section id="rzxinfo-py">
+<span id="id4"></span><h2>rzxinfo.py<a class="headerlink" href="#rzxinfo-py" title="Permalink to this heading"></a></h2>
+<p><cite>rzxinfo.py</cite> shows the blocks in or extracts the snapshots from an RZX file.
+For example:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rzxinfo.py game.rzx
+</pre></div>
+</div>
+<p>To list the options supported by <cite>rzxinfo.py</cite>, run it with no arguments:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: rzxinfo.py [options] FILE
+
+Show the blocks in or extract the snapshots from an RZX file.
+
+Options:
+  --extract      Extract snapshots.
+  --frames       Show the contents of every frame.
+  -V, --version  Show SkoolKit version number and exit.
+</pre></div>
+</div>
+<table class="docutils align-default">
+<thead>
+<tr class="row-odd"><th class="head"><p>Version</p></th>
+<th class="head"><p>Changes</p></th>
+</tr>
+</thead>
+<tbody>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>New</p></td>
+</tr>
+</tbody>
+</table>
+</section>
+<section id="rzxplay-py">
+<span id="id5"></span><h2>rzxplay.py<a class="headerlink" href="#rzxplay-py" title="Permalink to this heading"></a></h2>
+<p><cite>rzxplay.py</cite> plays an RZX file. For example:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rzxplay.py game.rzx
+</pre></div>
+</div>
+<p>To list the options supported by <cite>rzxplay.py</cite>, run it with no arguments:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: rzxplay.py [options] FILE [OUTFILE]
+
+Play an RZX file. If &#39;OUTFILE&#39; is given, an SZX or Z80 snapshot or an RZX file
+is written after playback has completed.
+
+Options:
+  --flags FLAGS    Set playback flags. Do &#39;--flags help&#39; for more information.
+  --force          Force playback when unsupported hardware is detected.
+  --fps FPS        Run at this many frames per second (default: 50). 0 means
+                   maximum speed.
+  --map FILE       Log addresses of executed instructions to a file.
+  --no-screen      Run without a screen.
+  --python         Use the pure Python Z80 simulator.
+  --quiet          Don&#39;t print progress percentage.
+  --scale SCALE    Scale display up by this factor (1-4; default: 2).
+  --snapshot FILE  Specify an external snapshot file to start with.
+  --stop FRAMES    Stop after playing this many frames.
+  --trace FILE     Log executed instructions to a file.
+  -V, --version    Show SkoolKit version number and exit.
+</pre></div>
+</div>
+<p><cite>rzxplay.py</cite> can play RZX files that were recorded in 48K, 128K or +2 mode with
+no peripherals (e.g. Interface 1) attached. The <code class="docutils literal notranslate"><span class="pre">--force</span></code> option can be used
+to make <cite>rzxplay.py</cite> attempt playback of files that were recorded on
+unsupported machines or with unsupported hardware attached, but they are
+unlikely to play to the end.</p>
+<p>If <a class="reference external" href="https://pygame.org/">pygame</a> is installed, <cite>rzxplay.py</cite> will use it to render the Spectrums
+screen contents at 50 frames per second by default. Use the <code class="docutils literal notranslate"><span class="pre">--fps</span></code> option
+to change the frame rate. Specifying <code class="docutils literal notranslate"><span class="pre">--fps</span> <span class="pre">0</span></code> makes <cite>rzxplay.py</cite> run at
+maximum speed. To disable the screen and make <cite>rzxplay.py</cite> run even faster, use
+the <code class="docutils literal notranslate"><span class="pre">--no-screen</span></code> option.</p>
+<p>The <code class="docutils literal notranslate"><span class="pre">--map</span></code> option can be used to log the addresses of instructions executed
+during playback to a file. This file can then be used by <a class="reference internal" href="#sna2ctl-py"><span class="std std-ref">sna2ctl.py</span></a> to
+produce a control file. If the file specified by the <code class="docutils literal notranslate"><span class="pre">--map</span></code> option already
+exists, any addresses it contains will be merged with those of the instructions
+executed.</p>
+<p>The <code class="docutils literal notranslate"><span class="pre">--flags</span></code> option sets flags that control the playback of RZX frames when
+interrupts are enabled. If an RZX file fails to play to completion, setting one
+or more of these flags may help. <code class="docutils literal notranslate"><span class="pre">FLAGS</span></code> is the sum of the following values,
+chosen according to the desired outcome:</p>
+<ul class="simple">
+<li><p>1 - When the last instruction in a frame is either LD A,I or LD A,R,
+reset bit 2 of the flags register. This is the expected behaviour of a real
+Z80, but some RZX files fail when this flag is set.</p></li>
+<li><p>2 - When the last instruction in a frame is EI, and the next frame is a
+short one (i.e. has a fetch count of 1 or 2), block the interrupt in the next
+frame. By default, and according to RZX convention, <cite>rzxplay.py</cite> accepts an
+interrupt at the start of every frame except the first, regardless of whether
+the instruction just executed would normally block it. However, some RZX
+files contain a short frame immediately after an EI to indicate that the
+interrupt should in fact be blocked, and therefore require this flag to be
+set to play back correctly.</p></li>
+</ul>
+<p>If <code class="docutils literal notranslate"><span class="pre">OUTFILE</span></code> is given, and ends with either .z80 or .szx, then a snapshot
+in the corresponding format is written when playback ends. Similarly, if
+<code class="docutils literal notranslate"><span class="pre">OUTFILE</span></code> ends with .rzx, then an RZX file is written when playback ends.
+However, this makes sense only if <code class="docutils literal notranslate"><span class="pre">--stop</span></code> is used to end playback somewhere
+in the middle of the input RZX file, otherwise the output RZX file will be
+empty (i.e. contain no frames).</p>
+<table class="docutils align-default">
+<thead>
+<tr class="row-odd"><th class="head"><p>Version</p></th>
+<th class="head"><p>Changes</p></th>
+</tr>
+</thead>
+<tbody>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>New</p></td>
+</tr>
+</tbody>
+</table>
+</section>
 <section id="skool2asm-py">
-<span id="id4"></span><h2>skool2asm.py<a class="headerlink" href="#skool2asm-py" title="Permalink to this heading"></a></h2>
+<span id="id6"></span><h2>skool2asm.py<a class="headerlink" href="#skool2asm-py" title="Permalink to this heading"></a></h2>
 <p><cite>skool2asm.py</cite> converts a skool file into an ASM file that can be fed to an
 assembler (see <a class="reference internal" href="assemblers.html#supportedassemblers"><span class="std std-ref">Supported assemblers</span></a>). For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2asm.py game.skool &gt; game.asm
 </pre></div>
 </div>
 <p><cite>skool2asm.py</cite> supports many options; run it with no arguments to see a list:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2asm.py [options] FILE
@@ -415,15 +525,15 @@
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="skool2bin-py">
-<span id="id5"></span><h2>skool2bin.py<a class="headerlink" href="#skool2bin-py" title="Permalink to this heading"></a></h2>
+<span id="id7"></span><h2>skool2bin.py<a class="headerlink" href="#skool2bin-py" title="Permalink to this heading"></a></h2>
 <p><cite>skool2bin.py</cite> converts a skool file into a binary (raw memory) file. For
 example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2bin.py game.skool
 </pre></div>
 </div>
 <p>To list the options supported by <cite>skool2bin.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: skool2bin.py [options] file.skool [file.bin]
@@ -509,15 +619,15 @@
 <tr class="row-odd"><td><p>5.0</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 <section id="skool2ctl-py">
-<span id="id6"></span><h2>skool2ctl.py<a class="headerlink" href="#skool2ctl-py" title="Permalink to this heading"></a></h2>
+<span id="id8"></span><h2>skool2ctl.py<a class="headerlink" href="#skool2ctl-py" title="Permalink to this heading"></a></h2>
 <p><cite>skool2ctl.py</cite> converts a skool file into a <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control file</span></a>.
 For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2ctl.py game.skool &gt; game.ctl
 </pre></div>
 </div>
 <p>In addition to block types and addresses, <cite>game.ctl</cite> will contain block titles,
 block descriptions, registers, mid-block comments, block start and end
@@ -551,15 +661,15 @@
                           m = mid-block comments and block start/end comments
                           s = sub-block types and addresses
                           c = instruction-level comments
                           n = non-entry blocks
 </pre></div>
 </div>
 <section id="skool2ctl-conf">
-<span id="id7"></span><h3>Configuration<a class="headerlink" href="#skool2ctl-conf" title="Permalink to this heading"></a></h3>
+<span id="id9"></span><h3>Configuration<a class="headerlink" href="#skool2ctl-conf" title="Permalink to this heading"></a></h3>
 <p><cite>skool2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">Hex</span></code> - write addresses in decimal (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default), lower case
 hexadecimal (<code class="docutils literal notranslate"><span class="pre">1</span></code>),  or upper case hexadecimal (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">KeepLines</span></code> - preserve line breaks in comments (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or dont (<code class="docutils literal notranslate"><span class="pre">0</span></code>,
@@ -629,15 +739,15 @@
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="skool2html-py">
-<span id="id8"></span><h2>skool2html.py<a class="headerlink" href="#skool2html-py" title="Permalink to this heading"></a></h2>
+<span id="id10"></span><h2>skool2html.py<a class="headerlink" href="#skool2html-py" title="Permalink to this heading"></a></h2>
 <p><cite>skool2html.py</cite> converts a skool file (and its associated ref files, if any
 exist) into a browsable disassembly in HTML format.</p>
 <p>For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ skool2html.py game.skool
 </pre></div>
 </div>
 <p>will convert the file <cite>game.skool</cite> into a bunch of HTML files. If any files
@@ -732,15 +842,15 @@
 <li><p><cite>game.css</cite></p></li>
 <li><p><cite>game-dark.css</cite></p></li>
 <li><p><cite>game-wide.css</cite></p></li>
 <li><p><cite>dark.css</cite></p></li>
 <li><p><cite>wide.css</cite></p></li>
 </ul>
 <section id="skool2html-conf">
-<span id="id9"></span><h3>Configuration<a class="headerlink" href="#skool2html-conf" title="Permalink to this heading"></a></h3>
+<span id="id11"></span><h3>Configuration<a class="headerlink" href="#skool2html-conf" title="Permalink to this heading"></a></h3>
 <p><cite>skool2html.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">AsmLabels</span></code> - use ASM labels (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or dont (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">AsmOnePage</span></code> - write all routines and data blocks to a single page (<code class="docutils literal notranslate"><span class="pre">1</span></code>),
 or to multiple pages (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
@@ -879,15 +989,15 @@
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">-V</span></code> option</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="sna2ctl-py">
-<span id="id10"></span><h2>sna2ctl.py<a class="headerlink" href="#sna2ctl-py" title="Permalink to this heading"></a></h2>
+<span id="id12"></span><h2>sna2ctl.py<a class="headerlink" href="#sna2ctl-py" title="Permalink to this heading"></a></h2>
 <p><cite>sna2ctl.py</cite> generates a control file for a binary (raw memory) file or a SNA,
 SZX or Z80 snapshot. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2ctl.py game.z80 &gt; game.ctl
 </pre></div>
 </div>
 <p>Now <cite>game.ctl</cite> can be used by <a class="reference internal" href="#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> to convert <cite>game.z80</cite> into a
 skool file split into blocks of code and data.</p>
@@ -915,23 +1025,24 @@
 </pre></div>
 </div>
 <p>If the input filename does not end with .sna, .szx or .z80, it is assumed
 to be a binary file.</p>
 <p>The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option may be used to specify a code execution map to use when
 generating a control file. The supported file formats are:</p>
 <ul class="simple">
+<li><p>Files created by the <code class="docutils literal notranslate"><span class="pre">--map</span></code> option of <a class="reference internal" href="#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a></p></li>
 <li><p>Profiles created by the Fuse emulator</p></li>
 <li><p>Code execution logs created by the SpecEmu, Spud and Zero emulators</p></li>
 <li><p>Map files created by the SpecEmu and Z80 emulators</p></li>
 </ul>
 <p>If the file specified by the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option is 8192 bytes long, it is assumed to
 be a Z80 map file; if it is 65536 bytes long, it is assumed to be a SpecEmu map
 file; otherwise it is assumed to be in one of the other supported formats.</p>
 <section id="sna2ctl-conf">
-<span id="id11"></span><h3>Configuration<a class="headerlink" href="#sna2ctl-conf" title="Permalink to this heading"></a></h3>
+<span id="id13"></span><h3>Configuration<a class="headerlink" href="#sna2ctl-conf" title="Permalink to this heading"></a></h3>
 <p><cite>sna2ctl.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> - the name of a file containing a list of allowed words, one
 per line; if specified, a string of characters will be marked as text only if
 it contains at least one of the words in this file</p></li>
@@ -959,30 +1070,34 @@
 <table class="docutils align-default">
 <thead>
 <tr class="row-odd"><th class="head"><p>Version</p></th>
 <th class="head"><p>Changes</p></th>
 </tr>
 </thead>
 <tbody>
-<tr class="row-even"><td><p>7.2</p></td>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>Added support for reading code execution maps produced by
+<a class="reference internal" href="#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a></p></td>
+</tr>
+<tr class="row-odd"><td><p>7.2</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> configuration parameter</p></td>
 </tr>
-<tr class="row-odd"><td><p>7.1</p></td>
+<tr class="row-even"><td><p>7.1</p></td>
 <td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
 <code class="docutils literal notranslate"><span class="pre">--ini</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options</p></td>
 </tr>
-<tr class="row-even"><td><p>7.0</p></td>
+<tr class="row-odd"><td><p>7.0</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="sna2img-py">
-<span id="id12"></span><h2>sna2img.py<a class="headerlink" href="#sna2img-py" title="Permalink to this heading"></a></h2>
+<span id="id14"></span><h2>sna2img.py<a class="headerlink" href="#sna2img-py" title="Permalink to this heading"></a></h2>
 <p><cite>sna2img.py</cite> converts the screenshot or other graphic data in a binary (raw
 memory) file, SCR file, skool file, or SNA/SZX/Z80 snapshot into a PNG file.
 For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2img.py game.scr
 </pre></div>
 </div>
 <p>will create a file named <cite>game.png</cite>.</p>
@@ -1043,15 +1158,15 @@
 <tr class="row-odd"><td><p>5.4</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 <section id="sna2skool-py">
-<span id="id13"></span><h2>sna2skool.py<a class="headerlink" href="#sna2skool-py" title="Permalink to this heading"></a></h2>
+<span id="id15"></span><h2>sna2skool.py<a class="headerlink" href="#sna2skool-py" title="Permalink to this heading"></a></h2>
 <p><cite>sna2skool.py</cite> converts a binary (raw memory) file or a SNA, SZX or Z80
 snapshot into a skool file. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2skool.py game.z80 &gt; game.skool
 </pre></div>
 </div>
 <p>Now <cite>game.skool</cite> can be converted into a browsable HTML disassembly using
 <a class="reference internal" href="#skool2html-py"><span class="std std-ref">skool2html.py</span></a>, or into an assembler-ready ASM file using
@@ -1089,15 +1204,15 @@
 </div>
 <p>If the input filename does not end with .sna, .szx or .z80, it is assumed
 to be a binary file.</p>
 <p>By default, any files whose names start with the input filename (minus the
 .bin, .sna, .szx or .z80 suffix, if any) and end with .ctl will be
 used as <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control files</span></a>.</p>
 <section id="sna2skool-conf">
-<span id="id14"></span><h3>Configuration<a class="headerlink" href="#sna2skool-conf" title="Permalink to this heading"></a></h3>
+<span id="id16"></span><h3>Configuration<a class="headerlink" href="#sna2skool-conf" title="Permalink to this heading"></a></h3>
 <p><cite>sna2skool.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">Base</span></code> - write addresses and instruction operands in hexadecimal (<code class="docutils literal notranslate"><span class="pre">16</span></code>)
 or decimal (<code class="docutils literal notranslate"><span class="pre">10</span></code>, the default)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">Case</span></code> - write the disassembly in lower case (<code class="docutils literal notranslate"><span class="pre">1</span></code>) or upper case (<code class="docutils literal notranslate"><span class="pre">2</span></code>,
@@ -1254,15 +1369,15 @@
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="snapinfo-py">
-<span id="id15"></span><h2>snapinfo.py<a class="headerlink" href="#snapinfo-py" title="Permalink to this heading"></a></h2>
+<span id="id17"></span><h2>snapinfo.py<a class="headerlink" href="#snapinfo-py" title="Permalink to this heading"></a></h2>
 <p><cite>snapinfo.py</cite> shows information on the registers or RAM in a binary (raw
 memory) file or a SNA, SZX or Z80 snapshot. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapinfo.py game.z80
 </pre></div>
 </div>
 <p>To list the options supported by <cite>snapinfo.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapinfo.py [options] file
@@ -1338,15 +1453,15 @@
 <li><p>non-orphan nodes whose first instruction is not used</p></li>
 </ul>
 <p>The appearance of nodes and edges in a call graph image can be configured via
 the <code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code>, <code class="docutils literal notranslate"><span class="pre">NodeAttributes</span></code> and
 <code class="docutils literal notranslate"><span class="pre">NodeLabel</span></code> configuration parameters (see below).</p>
 </section>
 <section id="snapinfo-conf">
-<span id="id16"></span><h3>Configuration<a class="headerlink" href="#snapinfo-conf" title="Permalink to this heading"></a></h3>
+<span id="id18"></span><h3>Configuration<a class="headerlink" href="#snapinfo-conf" title="Permalink to this heading"></a></h3>
 <p><cite>snapinfo.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">EdgeAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html">attributes</a> for edges in a call graph
 (default: none)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">GraphAttributes</span></code> - the default <a class="reference external" href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html">attributes</a> for a call graph (default:
@@ -1421,15 +1536,15 @@
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="snapmod-py">
-<span id="id17"></span><h2>snapmod.py<a class="headerlink" href="#snapmod-py" title="Permalink to this heading"></a></h2>
+<span id="id19"></span><h2>snapmod.py<a class="headerlink" href="#snapmod-py" title="Permalink to this heading"></a></h2>
 <p><cite>snapmod.py</cite> modifies the registers and RAM in an SZX or Z80 snapshot. For
 example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ snapmod.py --poke 32768,0 game.z80 poked.z80
 </pre></div>
 </div>
 <p>To list the options supported by <cite>snapmod.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: snapmod.py [options] infile [outfile]
@@ -1480,15 +1595,15 @@
 <tr class="row-even"><td><p>5.3</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 <section id="tap2sna-py">
-<span id="id18"></span><h2>tap2sna.py<a class="headerlink" href="#tap2sna-py" title="Permalink to this heading"></a></h2>
+<span id="id20"></span><h2>tap2sna.py<a class="headerlink" href="#tap2sna-py" title="Permalink to this heading"></a></h2>
 <p><cite>tap2sna.py</cite> converts a TAP or TZX file (which may be inside a zip archive)
 into an SZX or Z80 snapshot. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py game.tap game.z80
 </pre></div>
 </div>
 <p>To list the options supported by <cite>tap2sna.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage:
@@ -1529,16 +1644,16 @@
   --tape-stop BLOCK     Stop the tape at this block number.
   --tape-sum MD5SUM     Specify the MD5 checksum of the TAP/TZX file.
   -u AGENT, --user-agent AGENT
                         Set the User-Agent header.
   -V, --version         Show SkoolKit version number and exit.
 </pre></div>
 </div>
-<p>Note that <cite>tap2sna.py</cite> cannot read data from TZX block types 0x15 (direct
-recording), 0x18 (CSW recording) or 0x19 (generalized data block).</p>
+<p>Note that <cite>tap2sna.py</cite> cannot read data from TZX block types 0x18 (CSW
+recording) or 0x19 (generalized data block).</p>
 <p>By default, <cite>tap2sna.py</cite> attempts to load a tape exactly as a 48K Spectrum
 would (see <a class="reference internal" href="#tap2sna-sim-load"><span class="std std-ref">Simulated LOAD</span></a>). If that doesnt work, the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option
 can be used to load bytes from specific tape blocks at the appropriate
 addresses. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tap2sna.py --ram load=3,30000 game.tzx game.z80
 </pre></div>
 </div>
@@ -1601,15 +1716,16 @@
 <li><p><code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> - enable acceleration of DEC A: JR NZ,$-1 delay loops
 (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or DEC A: JP NZ,$-1 delay loops (<code class="docutils literal notranslate"><span class="pre">2</span></code>), or neither
 (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">accelerator</span></code> - a comma-separated list of tape-sampling loop accelerators
 to use (see <a class="reference internal" href="#tap2sna-accelerators"><span class="std std-ref">Accelerators</span></a>)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">cmio</span></code> - enable simulation of memory contention and I/O contention delays
 (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or disable it (<code class="docutils literal notranslate"><span class="pre">0</span></code>); this is disabled by default to improve
-performance, but some loaders may require it</p></li>
+performance, but some loaders may require it; when this is enabled, all
+acceleration is disabled</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">fast-load</span></code> - enable fast loading (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or disable it
 (<code class="docutils literal notranslate"><span class="pre">0</span></code>); fast loading significantly reduces the load time for many tapes, but
 can also cause some loaders to fail</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">finish-tape</span></code> - run the tape to the end before stopping the simulation at
 the address specified by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or stop the
 simulation as soon as that address is reached, regardless of whether the tape
 has finished (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
@@ -1624,14 +1740,16 @@
 <li><p><code class="docutils literal notranslate"><span class="pre">pause</span></code> - pause the tape between blocks and resume playback when port 254
 is read (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or run the tape continuously (<code class="docutils literal notranslate"><span class="pre">0</span></code>); pausing
 can help with tapes that require (but do not actually contain) long pauses
 between blocks, but can cause some loaders to fail</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">polarity</span></code> - the EAR bit reading produced by the first pulse on the tape:
 <code class="docutils literal notranslate"><span class="pre">0</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">1</span></code>; subsequent pulses give readings that alternate
 between 0 and 1</p></li>
+<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code> - whether to use the pure Python Z80 simulator (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or the
+much faster C version if available (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> - the number of seconds of Z80 CPU time after which to abort the
 simulated LOAD if its still in progress (default: 900)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">trace</span></code> - the file to which to log all instructions executed during the
 simulated LOAD (default: none)</p></li>
 </ul>
 <p>The <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> parameter is the sum of the following values, chosen according
 to the desired behaviour:</p>
@@ -1761,15 +1879,15 @@
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CLEAR 34999: LOAD &quot;&quot; CODE : RANDOMIZE USR 35000
 </pre></div>
 </div>
 <p>Note that the spaces around <code class="docutils literal notranslate"><span class="pre">CLEAR</span></code>, <code class="docutils literal notranslate"><span class="pre">LOAD</span></code>, <code class="docutils literal notranslate"><span class="pre">CODE</span></code>, <code class="docutils literal notranslate"><span class="pre">RANDOMIZE</span></code> and
 <code class="docutils literal notranslate"><span class="pre">USR</span></code> are required in order for them to be recognised as BASIC tokens.</p>
 </section>
 <section id="tap2sna-conf">
-<span id="id19"></span><h3>Configuration<a class="headerlink" href="#tap2sna-conf" title="Permalink to this heading"></a></h3>
+<span id="id21"></span><h3>Configuration<a class="headerlink" href="#tap2sna-conf" title="Permalink to this heading"></a></h3>
 <p><cite>tap2sna.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> - the format of the snapshot written when no output
 snapshot argument is specified; valid values are <code class="docutils literal notranslate"><span class="pre">z80</span></code> (the default) and
 <code class="docutils literal notranslate"><span class="pre">szx</span></code></p></li>
@@ -1819,33 +1937,37 @@
 <table class="docutils align-default">
 <thead>
 <tr class="row-odd"><th class="head"><p>Version</p></th>
 <th class="head"><p>Changes</p></th>
 </tr>
 </thead>
 <tbody>
-<tr class="row-even"><td><p>9.1</p></td>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>Added support for TZX block type 0x15 (direct recording); added
+the <code class="docutils literal notranslate"><span class="pre">python</span></code> simulated LOAD configuration parameter</p></td>
+</tr>
+<tr class="row-odd"><td><p>9.1</p></td>
 <td><p>The <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">move</span></code> and <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">poke</span></code> options can modify specific
 RAM banks; added the <code class="docutils literal notranslate"><span class="pre">cmio</span></code> simulated LOAD configuration
 parameter</p></td>
 </tr>
-<tr class="row-odd"><td><p>9.0</p></td>
+<tr class="row-even"><td><p>9.0</p></td>
 <td><p>A simulated LOAD is performed by default; an existing snapshot
 will be overwritten by default; added the <code class="docutils literal notranslate"><span class="pre">load</span></code>, <code class="docutils literal notranslate"><span class="pre">machine</span></code>,
 <code class="docutils literal notranslate"><span class="pre">polarity</span></code> and <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> simulated LOAD configuration
 parameters; the output snapshot argument is optional; added
 support for writing SZX snapshots; added the
 <code class="docutils literal notranslate"><span class="pre">DefaultSnapshotFormat</span></code> configuration parameter; added the
 <code class="docutils literal notranslate"><span class="pre">fe</span></code> hardware state attribute; added support for register pairs
 (<code class="docutils literal notranslate"><span class="pre">r[bc]</span></code>, <code class="docutils literal notranslate"><span class="pre">r[de]</span></code> etc.) in the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> configuration
 parameter; added the <code class="docutils literal notranslate"><span class="pre">antirom</span></code>, <code class="docutils literal notranslate"><span class="pre">ernieware</span></code> and <code class="docutils literal notranslate"><span class="pre">housenka</span></code>
 tape-sampling loop accelerators; shows DEC A delay loop
 statistics when <code class="docutils literal notranslate"><span class="pre">accelerator=list</span></code></p></td>
 </tr>
-<tr class="row-even"><td><p>8.10</p></td>
+<tr class="row-odd"><td><p>8.10</p></td>
 <td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
 <code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> and <code class="docutils literal notranslate"><span class="pre">--tape-analysis</span></code> options;
 added the <code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> and <code class="docutils literal notranslate"><span class="pre">TraceOperand</span></code> configuration
 parameters; added the <code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> and <code class="docutils literal notranslate"><span class="pre">finish-tape</span></code>
 simulated LOAD configuration parameters; added the <code class="docutils literal notranslate"><span class="pre">issue2</span></code>
 hardware state attribute; added the special <code class="docutils literal notranslate"><span class="pre">auto</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span></code>
 tape-sampling loop accelerator names, and the ability to specify
@@ -1856,61 +1978,61 @@
 <code class="docutils literal notranslate"><span class="pre">d-and-h</span></code>, <code class="docutils literal notranslate"><span class="pre">delphine</span></code>, <code class="docutils literal notranslate"><span class="pre">design-design</span></code>, <code class="docutils literal notranslate"><span class="pre">gargoyle2</span></code>,
 <code class="docutils literal notranslate"><span class="pre">gremlin2</span></code>, <code class="docutils literal notranslate"><span class="pre">microprose</span></code>, <code class="docutils literal notranslate"><span class="pre">micro-style</span></code>, <code class="docutils literal notranslate"><span class="pre">mirrorsoft</span></code>,
 <code class="docutils literal notranslate"><span class="pre">palas</span></code>, <code class="docutils literal notranslate"><span class="pre">raxoft</span></code>, <code class="docutils literal notranslate"><span class="pre">realtime</span></code>, <code class="docutils literal notranslate"><span class="pre">silverbird</span></code>,
 <code class="docutils literal notranslate"><span class="pre">software-projects</span></code>, <code class="docutils literal notranslate"><span class="pre">sparklers</span></code>, <code class="docutils literal notranslate"><span class="pre">suzy-soft</span></code>,
 <code class="docutils literal notranslate"><span class="pre">suzy-soft2</span></code>, <code class="docutils literal notranslate"><span class="pre">tiny</span></code>, <code class="docutils literal notranslate"><span class="pre">us-gold</span></code> and <code class="docutils literal notranslate"><span class="pre">weird-science</span></code>
 tape-sampling loop accelerators</p></td>
 </tr>
-<tr class="row-odd"><td><p>8.9</p></td>
+<tr class="row-even"><td><p>8.9</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">--sim-load-config</span></code>, <code class="docutils literal notranslate"><span class="pre">--tape-name</span></code>,
 <code class="docutils literal notranslate"><span class="pre">--tape-start</span></code>, <code class="docutils literal notranslate"><span class="pre">--tape-stop</span></code> and <code class="docutils literal notranslate"><span class="pre">--tape-sum</span></code> options;
 added support for TZX loops, pauses, and unused bits in data
 blocks; added support for quoted arguments in an arguments file;
 added the <code class="docutils literal notranslate"><span class="pre">tstates</span></code> hardware state attribute</p></td>
 </tr>
-<tr class="row-even"><td><p>8.8</p></td>
+<tr class="row-odd"><td><p>8.8</p></td>
 <td><p>A simulated LOAD performs any <code class="docutils literal notranslate"><span class="pre">call/move/poke/sysvars</span></code>
 operations specified by <code class="docutils literal notranslate"><span class="pre">--ram</span></code></p></td>
 </tr>
-<tr class="row-odd"><td><p>8.7</p></td>
+<tr class="row-even"><td><p>8.7</p></td>
 <td><p>Added support for simulating a 48K Spectrum LOADing a tape; when
 a headerless block is ignored because no <code class="docutils literal notranslate"><span class="pre">--ram</span> <span class="pre">load</span></code> options
 have been specified, a warning is printed</p></td>
 </tr>
-<tr class="row-even"><td><p>8.6</p></td>
+<tr class="row-odd"><td><p>8.6</p></td>
 <td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">call</span></code> operation</p></td>
 </tr>
-<tr class="row-odd"><td><p>8.4</p></td>
+<tr class="row-even"><td><p>8.4</p></td>
 <td><p>Added support to the <code class="docutils literal notranslate"><span class="pre">--ram</span></code> option for the <code class="docutils literal notranslate"><span class="pre">sysvars</span></code>
 operation</p></td>
 </tr>
-<tr class="row-even"><td><p>6.3</p></td>
+<tr class="row-odd"><td><p>6.3</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">--user-agent</span></code> option</p></td>
 </tr>
-<tr class="row-odd"><td><p>6.2</p></td>
+<tr class="row-even"><td><p>6.2</p></td>
 <td><p>The <code class="docutils literal notranslate"><span class="pre">--ram</span></code>, <code class="docutils literal notranslate"><span class="pre">--reg</span></code>, <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options
 accept hexadecimal integers prefixed by 0x</p></td>
 </tr>
-<tr class="row-even"><td><p>5.3</p></td>
+<tr class="row-odd"><td><p>5.3</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">--stack</span></code> and <code class="docutils literal notranslate"><span class="pre">--start</span></code> options</p></td>
 </tr>
-<tr class="row-odd"><td><p>4.5</p></td>
+<tr class="row-even"><td><p>4.5</p></td>
 <td><p>Added support for TZX block type 0x14 (pure data), for loading
 the first and last bytes of a tape block, and for modifying
 memory with XOR and ADD operations</p></td>
 </tr>
-<tr class="row-even"><td><p>3.5</p></td>
+<tr class="row-odd"><td><p>3.5</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 <section id="tapinfo-py">
-<span id="id20"></span><h2>tapinfo.py<a class="headerlink" href="#tapinfo-py" title="Permalink to this heading"></a></h2>
+<span id="id22"></span><h2>tapinfo.py<a class="headerlink" href="#tapinfo-py" title="Permalink to this heading"></a></h2>
 <p><cite>tapinfo.py</cite> shows information on the blocks in a TAP or TZX file. For
 example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tapinfo.py game.tzx
 </pre></div>
 </div>
 <p>To list the options supported by <cite>tapinfo.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: tapinfo.py FILE
@@ -1928,58 +2050,61 @@
 <table class="docutils align-default">
 <thead>
 <tr class="row-odd"><th class="head"><p>Version</p></th>
 <th class="head"><p>Changes</p></th>
 </tr>
 </thead>
 <tbody>
-<tr class="row-even"><td><p>9.0</p></td>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>Shows info for TZX block type 0x15 (direct recording)</p></td>
+</tr>
+<tr class="row-odd"><td><p>9.0</p></td>
 <td><p>Shows the LINE number (if present) for Program: header blocks;
 renders BASIC tokens in header block names</p></td>
 </tr>
-<tr class="row-odd"><td><p>8.9</p></td>
+<tr class="row-even"><td><p>8.9</p></td>
 <td><p>Shows full info for TZX block types 0x10 and 0x11</p></td>
 </tr>
-<tr class="row-even"><td><p>8.3</p></td>
+<tr class="row-odd"><td><p>8.3</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">--data</span></code> option</p></td>
 </tr>
-<tr class="row-odd"><td><p>8.1</p></td>
+<tr class="row-even"><td><p>8.1</p></td>
 <td><p>Shows contents of TZX block types 0x33 (hardware type) and 0x35
 (custom info)</p></td>
 </tr>
-<tr class="row-even"><td><p>7.1</p></td>
+<tr class="row-odd"><td><p>7.1</p></td>
 <td><p>Shows pulse lengths in TZX block type 0x13 and full info for TZX
 block type 0x14</p></td>
 </tr>
-<tr class="row-odd"><td><p>6.2</p></td>
+<tr class="row-even"><td><p>6.2</p></td>
 <td><p>The <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option accepts a hexadecimal address prefixed by
 0x</p></td>
 </tr>
-<tr class="row-even"><td><p>6.0</p></td>
+<tr class="row-odd"><td><p>6.0</p></td>
 <td><p>Added the <code class="docutils literal notranslate"><span class="pre">--basic</span></code> option</p></td>
 </tr>
-<tr class="row-odd"><td><p>5.0</p></td>
+<tr class="row-even"><td><p>5.0</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 <section id="trace-py">
-<span id="id21"></span><h2>trace.py<a class="headerlink" href="#trace-py" title="Permalink to this heading"></a></h2>
-<p><cite>trace.py</cite> simulates the execution of machine code in a 48K or 128K memory
+<span id="id23"></span><h2>trace.py<a class="headerlink" href="#trace-py" title="Permalink to this heading"></a></h2>
+<p><cite>trace.py</cite> simulates the execution of machine code in a 48K, 128K or +2 memory
 snapshot. For example:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ trace.py --start 32768 --stop 49152 game.z80
 </pre></div>
 </div>
 <p>To list the options supported by <cite>trace.py</cite>, run it with no arguments:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: trace.py [options] FILE [OUTFILE]
 
 Trace Z80 machine code execution. FILE may be a binary (raw memory) file, a
-SNA, SZX or Z80 snapshot, or &#39;48&#39; or &#39;128&#39; for no snapshot. If &#39;OUTFILE&#39; is
-given, an SZX or Z80 snapshot is written after execution has completed.
+SNA, SZX or Z80 snapshot, or &#39;48&#39;, &#39;128&#39; or &#39;+2&#39; for no snapshot. If &#39;OUTFILE&#39;
+is given, an SZX or Z80 snapshot is written after execution has completed.
 
 Options:
   --audio               Show audio delays.
   -c, --cmio            Simulate memory and I/O contention.
   --depth DEPTH         Simplify audio delays to this depth (default: 2).
   -D, --decimal         Show decimal values in verbose mode.
   -I p=v, --ini p=v     Set the value of the configuration parameter &#39;p&#39; to
@@ -1992,14 +2117,15 @@
   -o ADDR, --org ADDR   Specify the origin address of a binary (raw memory)
                         file (default: 65536 - length).
   -p [p:]a[-b[-c]],[^+]v, --poke [p:]a[-b[-c]],[^+]v
                         POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}.
                         Prefix &#39;v&#39; with &#39;^&#39; to perform an XOR operation, or
                         &#39;+&#39; to perform an ADD operation. This option may be
                         used multiple times.
+  --python              Use the pure Python Z80 simulator.
   -r name=value, --reg name=value
                         Set the value of a register. Do &#39;--reg help&#39; for more
                         information. This option may be used multiple times.
   --rom FILE            Patch in a ROM at address 0 from this file.
   --show-config         Show configuration parameter values.
   -s ADDR, --start ADDR
                         Start execution at this address.
@@ -2018,15 +2144,15 @@
 show register values too.</p>
 <p>When the <code class="docutils literal notranslate"><span class="pre">--audio</span></code> option is given, <cite>trace.py</cite> tracks changes in the state
 of the ZX Spectrum speaker, and then prints a list of the delays (in T-states)
 between those changes. This list can be supplied to the <a class="reference internal" href="skool-macros.html#audio"><span class="std std-ref">#AUDIO</span></a> macro to
 produce a WAV file for the sound effect that would be produced by the same code
 running on a real ZX Spectrum.</p>
 <section id="trace-conf">
-<span id="id22"></span><h3>Configuration<a class="headerlink" href="#trace-conf" title="Permalink to this heading"></a></h3>
+<span id="id24"></span><h3>Configuration<a class="headerlink" href="#trace-conf" title="Permalink to this heading"></a></h3>
 <p><cite>trace.py</cite> will read configuration from a file named <cite>skoolkit.ini</cite> in the
 current working directory or in <cite>~/.skoolkit</cite>, if present. The recognised
 configuration parameters are:</p>
 <ul class="simple">
 <li><p><code class="docutils literal notranslate"><span class="pre">TraceLine</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-v</span></code> is used
 (default: <code class="docutils literal notranslate"><span class="pre">${pc:04X}</span> <span class="pre">{i}</span></code>)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">TraceLine2</span></code> - the format of each instruction line when <code class="docutils literal notranslate"><span class="pre">-vv</span></code> is used
@@ -2073,30 +2199,33 @@
 <table class="docutils align-default">
 <thead>
 <tr class="row-odd"><th class="head"><p>Version</p></th>
 <th class="head"><p>Changes</p></th>
 </tr>
 </thead>
 <tbody>
-<tr class="row-even"><td><p>9.1</p></td>
+<tr class="row-even"><td><p>9.2</p></td>
+<td><p>Added the <code class="docutils literal notranslate"><span class="pre">--python</span></code> option; added support for +2 snapshots</p></td>
+</tr>
+<tr class="row-odd"><td><p>9.1</p></td>
 <td><p>The <code class="docutils literal notranslate"><span class="pre">--poke</span></code> option can modify specific RAM banks; added the
 <code class="docutils literal notranslate"><span class="pre">--cmio</span></code> option</p></td>
 </tr>
-<tr class="row-odd"><td><p>9.0</p></td>
+<tr class="row-even"><td><p>9.0</p></td>
 <td><p>Configuration is read from <cite>skoolkit.ini</cite> if present; added the
 <code class="docutils literal notranslate"><span class="pre">--ini</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-interrupts</span></code> and <code class="docutils literal notranslate"><span class="pre">--show-config</span></code> options;
 interrupt routines are executed by default; added support for
 128K snapshots; added support for writing SZX snapshots; added
 the <code class="docutils literal notranslate"><span class="pre">-m</span></code> and <code class="docutils literal notranslate"><span class="pre">-M</span></code> short options</p></td>
 </tr>
-<tr class="row-even"><td><p>8.9</p></td>
+<tr class="row-odd"><td><p>8.9</p></td>
 <td><p>Reads and writes the T-states counter in Z80 snapshots and reads
 the T-states counter in SZX snapshots</p></td>
 </tr>
-<tr class="row-odd"><td><p>8.8</p></td>
+<tr class="row-even"><td><p>8.8</p></td>
 <td><p>New</p></td>
 </tr>
 </tbody>
 </table>
 </section>
 </section>
 </section>
@@ -2110,14 +2239,16 @@
         <div class="sphinxsidebarwrapper">
   <div>
     <h3><a href="index.html">Table of Contents</a></h3>
     <ul>
 <li><a class="reference internal" href="#">Commands</a><ul>
 <li><a class="reference internal" href="#bin2sna-py">bin2sna.py</a></li>
 <li><a class="reference internal" href="#bin2tap-py">bin2tap.py</a></li>
+<li><a class="reference internal" href="#rzxinfo-py">rzxinfo.py</a></li>
+<li><a class="reference internal" href="#rzxplay-py">rzxplay.py</a></li>
 <li><a class="reference internal" href="#skool2asm-py">skool2asm.py</a><ul>
 <li><a class="reference internal" href="#configuration">Configuration</a></li>
 </ul>
 </li>
 <li><a class="reference internal" href="#skool2bin-py">skool2bin.py</a></li>
 <li><a class="reference internal" href="#skool2ctl-py">skool2ctl.py</a><ul>
 <li><a class="reference internal" href="#skool2ctl-conf">Configuration</a></li>
@@ -2198,15 +2329,15 @@
              >index</a></li>
         <li class="right" >
           <a href="assemblers.html" title="Supported assemblers"
              >next</a> |</li>
         <li class="right" >
           <a href="diy.html" title="Disassembly DIY"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Commands</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Commands
 ************ CCoommmmaannddss_? ************
 ********** bbiinn22ssnnaa..ppyy_? **********
 bin2sna.pyconverts a binary (raw memory) file into an SZX or Z80 snapshot. For
 example:
 $ bin2sna.py game.bin
 will create a file namedgame.z80.
@@ -147,14 +147,88 @@
 5.2     Added the ability to read a binary file from standard input; added a
         second positional argument specifying the TAP filename
 4.5     Added the --clear and --end options, and the ability to convert SNA,
         SZX and Z80 snapshots
 3.4     Added the -V option and the long options
 2.2.5   Added the -p option
 1.3.1   New
+********** rrzzxxiinnffoo..ppyy_? **********
+rzxinfo.pyshows the blocks in or extracts the snapshots from an RZX file. For
+example:
+$ rzxinfo.py game.rzx
+To list the options supported byrzxinfo.py, run it with no arguments:
+usage: rzxinfo.py [options] FILE
+
+Show the blocks in or extract the snapshots from an RZX file.
+
+Options:
+  --extract      Extract snapshots.
+  --frames       Show the contents of every frame.
+  -V, --version  Show SkoolKit version number and exit.
+VVeerrssiioonn CChhaannggeess
+9.2     New
+********** rrzzxxppllaayy..ppyy_? **********
+rzxplay.pyplays an RZX file. For example:
+$ rzxplay.py game.rzx
+To list the options supported byrzxplay.py, run it with no arguments:
+usage: rzxplay.py [options] FILE [OUTFILE]
+
+Play an RZX file. If 'OUTFILE' is given, an SZX or Z80 snapshot or an RZX file
+is written after playback has completed.
+
+Options:
+  --flags FLAGS    Set playback flags. Do '--flags help' for more information.
+  --force          Force playback when unsupported hardware is detected.
+  --fps FPS        Run at this many frames per second (default: 50). 0 means
+                   maximum speed.
+  --map FILE       Log addresses of executed instructions to a file.
+  --no-screen      Run without a screen.
+  --python         Use the pure Python Z80 simulator.
+  --quiet          Don't print progress percentage.
+  --scale SCALE    Scale display up by this factor (1-4; default: 2).
+  --snapshot FILE  Specify an external snapshot file to start with.
+  --stop FRAMES    Stop after playing this many frames.
+  --trace FILE     Log executed instructions to a file.
+  -V, --version    Show SkoolKit version number and exit.
+rzxplay.pycan play RZX files that were recorded in 48K, 128K or +2 mode with no
+peripherals (e.g. Interface 1) attached. The --force option can be used to
+makerzxplay.pyattempt playback of files that were recorded on unsupported
+machines or with unsupported hardware attached, but they are unlikely to play
+to the end.
+If _p_y_g_a_m_e is installed,rzxplay.pywill use it to render the Spectrums screen
+contents at 50 frames per second by default. Use the --fps option to change the
+frame rate. Specifying --fps 0 makesrzxplay.pyrun at maximum speed. To disable
+the screen and makerzxplay.pyrun even faster, use the --no-screen option.
+The --map option can be used to log the addresses of instructions executed
+during playback to a file. This file can then be used by _s_n_a_2_c_t_l_._p_y to produce
+a control file. If the file specified by the --map option already exists, any
+addresses it contains will be merged with those of the instructions executed.
+The --flags option sets flags that control the playback of RZX frames when
+interrupts are enabled. If an RZX file fails to play to completion, setting one
+or more of these flags may help. FLAGS is the sum of the following values,
+chosen according to the desired outcome:
+    * 1 - When the last instruction in a frame is either LD A,I or LD A,R,
+      reset bit 2 of the flags register. This is the expected behaviour of a
+      real Z80, but some RZX files fail when this flag is set.
+    * 2 - When the last instruction in a frame is EI, and the next frame is a
+      short one (i.e. has a fetch count of 1 or 2), block the interrupt in the
+      next frame. By default, and according to RZX convention,rzxplay.pyaccepts
+      an interrupt at the start of every frame except the first, regardless of
+      whether the instruction just executed would normally block it. However,
+      some RZX files contain a short frame immediately after an EI to
+      indicate that the interrupt should in fact be blocked, and therefore
+      require this flag to be set to play back correctly.
+If OUTFILE is given, and ends with either .z80 or .szx, then a snapshot in
+the corresponding format is written when playback ends. Similarly, if OUTFILE
+ends with .rzx, then an RZX file is written when playback ends. However, this
+makes sense only if --stop is used to end playback somewhere in the middle of
+the input RZX file, otherwise the output RZX file will be empty (i.e. contain
+no frames).
+VVeerrssiioonn CChhaannggeess
+9.2     New
 ********** sskkooooll22aassmm..ppyy_? **********
 skool2asm.pyconverts a skool file into an ASM file that can be fed to an
 assembler (see _S_u_p_p_o_r_t_e_d_ _a_s_s_e_m_b_l_e_r_s). For example:
 $ skool2asm.py game.skool > game.asm
 skool2asm.pysupports many options; run it with no arguments to see a list:
 usage: skool2asm.py [options] FILE
 
@@ -585,14 +659,15 @@
   -s ADDR, --start ADDR
                         Start at this address.
   -V, --version         Show SkoolKit version number and exit.
 If the input filename does not end with .sna, .szx or .z80, it is assumed
 to be a binary file.
 The -m option may be used to specify a code execution map to use when
 generating a control file. The supported file formats are:
+    * Files created by the --map option of _r_z_x_p_l_a_y_._p_y
     * Profiles created by the Fuse emulator
     * Code execution logs created by the SpecEmu, Spud and Zero emulators
     * Map files created by the SpecEmu and Z80 emulators
 If the file specified by the -m option is 8192 bytes long, it is assumed to be
 a Z80 map file; if it is 65536 bytes long, it is assumed to be a SpecEmu map
 file; otherwise it is assumed to be in one of the other supported formats.
 ******** CCoonnffiigguurraattiioonn_? ********
@@ -616,14 +691,15 @@
 to use the -h option on the command line), add the following section
 toskoolkit.ini:
 [sna2ctl]
 Hex=2
 Configuration parameters may also be set on the command line by using the --ini
 option. Parameter values set this way will override any found inskoolkit.ini.
 VVeerrssiioonn CChhaannggeess
+9.2     Added support for reading code execution maps produced by _r_z_x_p_l_a_y_._p_y
 7.2     Added the Dictionary configuration parameter
 7.1     Configuration is read fromskoolkit.iniif present; added the --ini and -
         -show-config options
 7.0     New
 ********** ssnnaa22iimmgg..ppyy_? **********
 sna2img.pyconverts the screenshot or other graphic data in a binary (raw
 memory) file, SCR file, skool file, or SNA/SZX/Z80 snapshot into a PNG file.
@@ -1003,16 +1079,16 @@
   --tape-name NAME      Specify the name of a TAP/TZX file in a zip archive.
   --tape-start BLOCK    Start the tape at this block number.
   --tape-stop BLOCK     Stop the tape at this block number.
   --tape-sum MD5SUM     Specify the MD5 checksum of the TAP/TZX file.
   -u AGENT, --user-agent AGENT
                         Set the User-Agent header.
   -V, --version         Show SkoolKit version number and exit.
-Note thattap2sna.pycannot read data from TZX block types 0x15 (direct
-recording), 0x18 (CSW recording) or 0x19 (generalized data block).
+Note thattap2sna.pycannot read data from TZX block types 0x18 (CSW recording)
+or 0x19 (generalized data block).
 By default,tap2sna.pyattempts to load a tape exactly as a 48K Spectrum would
 (see _S_i_m_u_l_a_t_e_d_ _L_O_A_D). If that doesnt work, the --ram option can be used to
 load bytes from specific tape blocks at the appropriate addresses. For example:
 $ tap2sna.py --ram load=3,30000 game.tzx game.z80
 loads the third block on the tape at address 30000, and ignores all other
 blocks. (To see information on the blocks in a TAP or TZX file, use the
 _t_a_p_i_n_f_o_._p_y command.)
@@ -1060,15 +1136,16 @@
 load-config (or -c) option. The recognised configuration parameters are:
     * accelerate-dec-a - enable acceleration of DEC A: JR NZ,$-1 delay loops
       (1, the default), or DEC A: JP NZ,$-1 delay loops (2), or neither (0)
     * accelerator - a comma-separated list of tape-sampling loop accelerators
       to use (see _A_c_c_e_l_e_r_a_t_o_r_s)
     * cmio - enable simulation of memory contention and I/O contention delays
       (1), or disable it (0); this is disabled by default to improve
-      performance, but some loaders may require it
+      performance, but some loaders may require it; when this is enabled, all
+      acceleration is disabled
     * fast-load - enable fast loading (1, the default), or disable it (0); fast
       loading significantly reduces the load time for many tapes, but can also
       cause some loaders to fail
     * finish-tape - run the tape to the end before stopping the simulation at
       the address specified by the --start option (1), or stop the simulation
       as soon as that address is reached, regardless of whether the tape has
       finished (0, the default)
@@ -1083,14 +1160,16 @@
     * pause - pause the tape between blocks and resume playback when port 254
       is read (1, the default), or run the tape continuously (0); pausing can
       help with tapes that require (but do not actually contain) long pauses
       between blocks, but can cause some loaders to fail
     * polarity - the EAR bit reading produced by the first pulse on the tape: 0
       (the default) or 1; subsequent pulses give readings that alternate
       between 0 and 1
+    * python - whether to use the pure Python Z80 simulator (1), or the much
+      faster C version if available (0, the default)
     * timeout - the number of seconds of Z80 CPU time after which to abort the
       simulated LOAD if its still in progress (default: 900)
     * trace - the file to which to log all instructions executed during the
       simulated LOAD (default: none)
 The in-flags parameter is the sum of the following values, chosen according to
 the desired behaviour:
     * 1 - interpret IN A,($FE) instructions in the address range $4000-$7FFF
@@ -1241,14 +1320,16 @@
 decimal format by default, add the following section toskoolkit.ini:
 [tap2sna]
 TraceLine={pc:05} {i}
 TraceOperand=
 Configuration parameters may also be set on the command line by using the --ini
 option. Parameter values set this way will override any found inskoolkit.ini.
 VVeerrssiioonn CChhaannggeess
+9.2     Added support for TZX block type 0x15 (direct recording); added the
+        python simulated LOAD configuration parameter
 9.1     The --ram move and --ram poke options can modify specific RAM banks;
         added the cmio simulated LOAD configuration parameter
         A simulated LOAD is performed by default; an existing snapshot will be
         overwritten by default; added the load, machine, polarity and in-flags
         simulated LOAD configuration parameters; the output snapshot argument
         is optional; added support for writing SZX snapshots; added the
 9.0     DefaultSnapshotFormat configuration parameter; added the fe hardware
@@ -1299,35 +1380,36 @@
 Options:
   -b N[,A], --basic N[,A]
                         List the BASIC program in block N loaded at address A
                         (default 23755).
   -d, --data            Show the entire contents of header and data blocks.
   -V, --version         Show SkoolKit version number and exit.
 VVeerrssiioonn CChhaannggeess
+9.2     Shows info for TZX block type 0x15 (direct recording)
 9.0     Shows the LINE number (if present) for Program: header blocks;
         renders BASIC tokens in header block names
 8.9     Shows full info for TZX block types 0x10 and 0x11
 8.3     Added the --data option
 8.1     Shows contents of TZX block types 0x33 (hardware type) and 0x35 (custom
         info)
 7.1     Shows pulse lengths in TZX block type 0x13 and full info for TZX block
         type 0x14
 6.2     The --basic option accepts a hexadecimal address prefixed by 0x
 6.0     Added the --basic option
 5.0     New
 ********** ttrraaccee..ppyy_? **********
-trace.pysimulates the execution of machine code in a 48K or 128K memory
+trace.pysimulates the execution of machine code in a 48K, 128K or +2 memory
 snapshot. For example:
 $ trace.py --start 32768 --stop 49152 game.z80
 To list the options supported bytrace.py, run it with no arguments:
 usage: trace.py [options] FILE [OUTFILE]
 
 Trace Z80 machine code execution. FILE may be a binary (raw memory) file, a
-SNA, SZX or Z80 snapshot, or '48' or '128' for no snapshot. If 'OUTFILE' is
-given, an SZX or Z80 snapshot is written after execution has completed.
+SNA, SZX or Z80 snapshot, or '48', '128' or '+2' for no snapshot. If 'OUTFILE'
+is given, an SZX or Z80 snapshot is written after execution has completed.
 
 Options:
   --audio               Show audio delays.
   -c, --cmio            Simulate memory and I/O contention.
   --depth DEPTH         Simplify audio delays to this depth (default: 2).
   -D, --decimal         Show decimal values in verbose mode.
   -I p=v, --ini p=v     Set the value of the configuration parameter 'p' to
@@ -1340,14 +1422,15 @@
   -o ADDR, --org ADDR   Specify the origin address of a binary (raw memory)
                         file (default: 65536 - length).
   -p [p:]a[-b[-c]],[^+]v, --poke [p:]a[-b[-c]],[^+]v
                         POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}.
                         Prefix 'v' with '^' to perform an XOR operation, or
                         '+' to perform an ADD operation. This option may be
                         used multiple times.
+  --python              Use the pure Python Z80 simulator.
   -r name=value, --reg name=value
                         Set the value of a register. Do '--reg help' for more
                         information. This option may be used multiple times.
   --rom FILE            Patch in a ROM at address 0 from this file.
   --show-config         Show configuration parameter values.
   -s ADDR, --start ADDR
                         Start execution at this address.
@@ -1402,27 +1485,30 @@
 maketrace.pywrite a timestamp for each instruction when -v is used, add the
 following section toskoolkit.ini:
 [trace]
 TraceLine={t:>10} ${pc:04X} {i}
 Configuration parameters may also be set on the command line by using the --ini
 option. Parameter values set this way will override any found inskoolkit.ini.
 VVeerrssiioonn CChhaannggeess
+9.2     Added the --python option; added support for +2 snapshots
 9.1     The --poke option can modify specific RAM banks; added the --cmio
         option
         Configuration is read fromskoolkit.iniif present; added the --ini, --
 9.0     no-interrupts and --show-config options; interrupt routines are
         executed by default; added support for 128K snapshots; added support
         for writing SZX snapshots; added the -m and -M short options
 8.9     Reads and writes the T-states counter in Z80 snapshots and reads the T-
         states counter in SZX snapshots
 8.8     New
 ******** _TT_aa_bb_ll_ee_ _oo_ff_ _CC_oo_nn_tt_ee_nn_tt_ss ********
     * _C_o_m_m_a_n_d_s
           o _b_i_n_2_s_n_a_._p_y
           o _b_i_n_2_t_a_p_._p_y
+          o _r_z_x_i_n_f_o_._p_y
+          o _r_z_x_p_l_a_y_._p_y
           o _s_k_o_o_l_2_a_s_m_._p_y
                 # _C_o_n_f_i_g_u_r_a_t_i_o_n
           o _s_k_o_o_l_2_b_i_n_._p_y
           o _s_k_o_o_l_2_c_t_l_._p_y
                 # _C_o_n_f_i_g_u_r_a_t_i_o_n
           o _s_k_o_o_l_2_h_t_m_l_._p_y
                 # _C_o_n_f_i_g_u_r_a_t_i_o_n
@@ -1451,10 +1537,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Commands
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/components.html` & `skoolkit-9.2/docs/components.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit components &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit components &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -27,15 +27,15 @@
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="extending.html" title="Extending SkoolKit"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit components</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -992,15 +992,15 @@
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              >index</a></li>
         <li class="right" >
           <a href="extending.html" title="Extending SkoolKit"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit components</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,11 +1,11 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * SkoolKit components
 ************ SSkkoooollKKiitt ccoommppoonneennttss_? ************
 SkoolKit relies on several components in order to function:
     * _A_s_s_e_m_b_l_e_r
     * _C_o_n_t_r_o_l_ _d_i_r_e_c_t_i_v_e_ _c_o_m_p_o_s_e_r
     * _C_o_n_t_r_o_l_ _f_i_l_e_ _g_e_n_e_r_a_t_o_r
     * _D_i_s_a_s_s_e_m_b_l_e_r
@@ -471,10 +471,10 @@
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * SkoolKit components
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/control-files.html` & `skoolkit-9.2/docs/control-files.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Control files &#8212; SkoolKit 9.1 documentation</title>
+    <title>Control files &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="skool-files.html" title="Skool files"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="parsing.html" title="Parsing, rendering, and modes"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Control files</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -1146,15 +1146,15 @@
              >index</a></li>
         <li class="right" >
           <a href="skool-files.html" title="Skool files"
              >next</a> |</li>
         <li class="right" >
           <a href="parsing.html" title="Parsing, rendering, and modes"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Control files</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Control files
 ************ CCoonnttrrooll ffiilleess_? ************
 A control file contains a list of start addresses of code and data blocks. This
 information can be used by _s_n_a_2_s_k_o_o_l_._p_y to organise a skool file into
 corresponding code and data blocks.
 Each block address in a control file is marked with a control directive,
 which is a single letter that indicates what the block contains:
@@ -707,10 +707,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Control files
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/diy.html` & `skoolkit-9.2/docs/diy.html`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Disassembly DIY &#8212; SkoolKit 9.1 documentation</title>
+    <title>Disassembly DIY &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="commands.html" title="Commands"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="usage.html" title="Installing and using SkoolKit"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Disassembly DIY</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -152,29 +152,29 @@
 $ sna2skool.py -c game.ctl game.z80 &gt; game.skool
 </pre></div>
 </div>
 <p>This will do a reasonable job of splitting the snapshot into blocks, but wont
 be 100% accurate (except by accident). You will need to examine the resultant
 skool file (<cite>game.skool</cite>) to see which blocks have been incorrectly marked as
 text, data or code, and then edit the control file (<cite>game.ctl</cite>) accordingly.</p>
-<p>To generate a better control file, you could use a code execution map produced
-by an emulator to tell <cite>sna2ctl.py</cite> where at least some of the code is in the
-snapshot. <cite>sna2ctl.py</cite> will read a map (otherwise known as a profile or trace)
-produced by Fuse, SpecEmu, Spud, Zero or Z80 when specified by the <code class="docutils literal notranslate"><span class="pre">-m</span></code>
-option:</p>
+<p>To generate a better control file, you could use a code execution map to tell
+<cite>sna2ctl.py</cite> where at least some of the code is in the snapshot. <cite>sna2ctl.py</cite>
+will read a map (otherwise known as a profile or trace) produced by
+<a class="reference internal" href="commands.html#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a>, Fuse, SpecEmu, Spud, Zero or Z80 when specified by the
+<code class="docutils literal notranslate"><span class="pre">-m</span></code> option:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2ctl.py -m game.map game.z80 &gt; game.ctl
 </pre></div>
 </div>
 <p>Needless to say, in general, the better the map, the more accurate the
 resulting control file will be. To create a good map file, you should ideally
 play the game from start to finish in the emulator, in an attempt to exercise
-as much code as possible. If that sounds like too much work, and your emulator
-supports playing back RZX files, you could grab a recording of your chosen game
-from the <a class="reference external" href="https://rzxarchive.co.uk">RZX Archive</a>, and set the emulators
-profiler or tracer going while the recording plays back.</p>
+as much code as possible. If that sounds like too much work, you could grab a
+recording of your chosen game from the <a class="reference external" href="https://rzxarchive.co.uk">RZX Archive</a>, and either run the RZX
+file through <cite>rzxplay.py</cite> with the <code class="docutils literal notranslate"><span class="pre">--map</span></code> option, or set an emulators
+profiler or tracer going while it plays the recording back.</p>
 <p>By default, <cite>sna2ctl.py</cite> and <cite>sna2skool.py</cite> generate control files and skool
 files with addresses and instruction operands in decimal notation. If you
 prefer to work in hexadecimal, use the <code class="docutils literal notranslate"><span class="pre">--hex</span></code> option of each command to
 produce a hexadecimal control file and a hexadecimal skool file:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sna2ctl.py --hex game.z80 &gt; game.ctl
 $ sna2skool.py --hex -c game.ctl game.z80 &gt; game.skool
 </pre></div>
@@ -385,15 +385,15 @@
              >index</a></li>
         <li class="right" >
           <a href="commands.html" title="Commands"
              >next</a> |</li>
         <li class="right" >
           <a href="usage.html" title="Installing and using SkoolKit"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Disassembly DIY</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Disassembly DIY
 ************ DDiissaasssseemmbbllyy DDIIYY_? ************
 The following sections describe how to use SkoolKit to get started on your own
 Spectrum game disassembly.
 ********** GGeettttiinngg ssttaarrtteedd_? **********
 The first thing to do is select a Spectrum game to disassemble. For the purpose
 of this discussion, well use _H_u_n_g_r_y_ _H_o_r_a_c_e. To build a pristine snapshot of
@@ -87,26 +87,26 @@
 file and generate a corresponding control file:
 $ sna2ctl.py game.z80 > game.ctl
 $ sna2skool.py -c game.ctl game.z80 > game.skool
 This will do a reasonable job of splitting the snapshot into blocks, but wont
 be 100% accurate (except by accident). You will need to examine the resultant
 skool file (game.skool) to see which blocks have been incorrectly marked as
 text, data or code, and then edit the control file (game.ctl) accordingly.
-To generate a better control file, you could use a code execution map produced
-by an emulator to tellsna2ctl.pywhere at least some of the code is in the
-snapshot.sna2ctl.pywill read a map (otherwise known as a profile or trace)
-produced by Fuse, SpecEmu, Spud, Zero or Z80 when specified by the -m option:
+To generate a better control file, you could use a code execution map to
+tellsna2ctl.pywhere at least some of the code is in the snapshot.sna2ctl.pywill
+read a map (otherwise known as a profile or trace) produced by _r_z_x_p_l_a_y_._p_y,
+Fuse, SpecEmu, Spud, Zero or Z80 when specified by the -m option:
 $ sna2ctl.py -m game.map game.z80 > game.ctl
 Needless to say, in general, the better the map, the more accurate the
 resulting control file will be. To create a good map file, you should ideally
 play the game from start to finish in the emulator, in an attempt to exercise
-as much code as possible. If that sounds like too much work, and your emulator
-supports playing back RZX files, you could grab a recording of your chosen game
-from the _R_Z_X_ _A_r_c_h_i_v_e, and set the emulators profiler or tracer going while the
-recording plays back.
+as much code as possible. If that sounds like too much work, you could grab a
+recording of your chosen game from the _R_Z_X_ _A_r_c_h_i_v_e, and either run the RZX file
+throughrzxplay.pywith the --map option, or set an emulators profiler or tracer
+going while it plays the recording back.
 By default,sna2ctl.pyandsna2skool.pygenerate control files and skool files with
 addresses and instruction operands in decimal notation. If you prefer to work
 in hexadecimal, use the --hex option of each command to produce a hexadecimal
 control file and a hexadecimal skool file:
 $ sna2ctl.py --hex game.z80 > game.ctl
 $ sna2skool.py --hex -c game.ctl game.z80 > game.skool
 ********** DDeevveellooppiinngg tthhee ddiissaasssseemmbbllyy_? **********
@@ -236,10 +236,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Disassembly DIY
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/extending.html` & `skoolkit-9.2/docs/extending.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Extending SkoolKit &#8212; SkoolKit 9.1 documentation</title>
+    <title>Extending SkoolKit &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="components.html" title="SkoolKit components"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="html-templates.html" title="HTML templates"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Extending SkoolKit</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -994,15 +994,15 @@
              >index</a></li>
         <li class="right" >
           <a href="components.html" title="SkoolKit components"
              >next</a> |</li>
         <li class="right" >
           <a href="html-templates.html" title="HTML templates"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Extending SkoolKit</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

### Comparing `skoolkit-9.1/docs/genindex.html` & `skoolkit-9.2/docs/genindex.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
-    <title>Index &#8212; SkoolKit 9.1 documentation</title>
+    <title>Index &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -22,15 +22,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="#" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Index</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -66,15 +66,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="#" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Index</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Index
 ************ IInnddeexx ************
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Index
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/html-templates.html` & `skoolkit-9.2/docs/html-templates.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>HTML templates &#8212; SkoolKit 9.1 documentation</title>
+    <title>HTML templates &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="extending.html" title="Extending SkoolKit"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="asm-templates.html" title="ASM templates"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">HTML templates</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -867,15 +867,15 @@
              >index</a></li>
         <li class="right" >
           <a href="extending.html" title="Extending SkoolKit"
              >next</a> |</li>
         <li class="right" >
           <a href="asm-templates.html" title="ASM templates"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">HTML templates</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * HTML templates
 ************ HHTTMMLL tteemmppllaatteess_? ************
 Every page in an HTML disassembly is built from the _L_a_y_o_u_t template and zero or
 more subtemplates defined by _[_T_e_m_p_l_a_t_e_:_*_] sections in the ref file.
 A template may contain replacement fields - identifiers enclosed by braces (
 { and }) - that are replaced by appropriate content (typically derived from the
 skool file or a ref file section) when the template is formatted. The following
@@ -457,10 +457,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * HTML templates
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/index.html` & `skoolkit-9.2/docs/index.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>SkoolKit manual &#8212; SkoolKit 9.1 documentation</title>
+    <title>SkoolKit manual &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -27,15 +27,15 @@
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="whatis.html" title="What is SkoolKit?"
              accesskey="N">next</a> |</li>
-        <li class="nav-item nav-item-0"><a href="#">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="#">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit manual</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -127,15 +127,15 @@
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              >index</a></li>
         <li class="right" >
           <a href="whatis.html" title="What is SkoolKit?"
              >next</a> |</li>
-        <li class="nav-item nav-item-0"><a href="#">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="#">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">SkoolKit manual</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,11 +1,11 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * SkoolKit manual
 ************ SSkkoooollKKiitt mmaannuuaall_? ************
     * _W_h_a_t_ _i_s_ _S_k_o_o_l_K_i_t_?
     * _I_n_s_t_a_l_l_i_n_g_ _a_n_d_ _u_s_i_n_g_ _S_k_o_o_l_K_i_t
     * _D_i_s_a_s_s_e_m_b_l_y_ _D_I_Y
     * _C_o_m_m_a_n_d_s
     * _S_u_p_p_o_r_t_e_d_ _a_s_s_e_m_b_l_e_r_s
@@ -32,10 +32,10 @@
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * SkoolKit manual
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/bin2sna.py.html` & `skoolkit-9.2/docs/man/bin2sna.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>bin2sna.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>bin2sna.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">bin2sna.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -237,15 +237,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">bin2sna.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * bin2sna.py
 ************ bbiinn22ssnnaa..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 bin2sna.py [options] file.bin [OUTFILE]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 bin2sna.py converts a binary (raw memory) file into an SZX or Z80 snapshot.
 file.bin may be a regular file, or - for standard input. If OUTFILE is
@@ -106,10 +106,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * bin2sna.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/bin2tap.py.html` & `skoolkit-9.2/docs/man/bin2tap.py.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>bin2tap.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>bin2tap.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">bin2tap.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -202,15 +202,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">bin2tap.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * bin2tap.py
 ************ bbiinn22ttaapp..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 bin2tap.py [options] FILE [file.tap]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 bin2tap.py converts a binary (raw memory) file or a SNA, SZX or Z80 snapshot
 into a TAP file. FILE may be a regular file, or - to read a binary file from
@@ -98,10 +98,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * bin2tap.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/skool2asm.py.html` & `skoolkit-9.2/docs/man/skool2asm.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>skool2asm.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>skool2asm.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2asm.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -386,15 +386,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2asm.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2asm.py
 ************ sskkooooll22aassmm..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 skool2asm.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 skool2asm.py converts a skool file into an ASM file that can be used by a Z80
 assembler. The ASM file is written to standard output. When FILE is -,
@@ -196,10 +196,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2asm.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/skool2bin.py.html` & `skoolkit-9.2/docs/man/skool2bin.py.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>skool2bin.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>skool2bin.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2bin.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -169,15 +169,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2bin.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2bin.py
 ************ sskkooooll22bbiinn..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 skool2bin.py [options] file.skool [file.bin]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 skool2bin.py converts a skool file into a binary (raw memory) file.
 file.skool may be a regular file, or - for standard input. If file.bin is
@@ -55,10 +55,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2bin.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/skool2ctl.py.html` & `skoolkit-9.2/docs/man/skool2ctl.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>skool2ctl.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>skool2ctl.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2ctl.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -216,15 +216,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2ctl.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2ctl.py
 ************ sskkooooll22ccttll..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 skool2ctl.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 skool2ctl.py converts a skool file into a control file. The control file is
 written to stdout. When FILE is -, skool2ctl.py reads from standard input.
@@ -84,10 +84,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2ctl.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/skool2html.py.html` & `skoolkit-9.2/docs/man/skool2html.py.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>skool2html.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>skool2html.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2html.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -415,15 +415,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">skool2html.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2html.py
 ************ sskkooooll22hhttmmll..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 skool2html.py [options] SKOOLFILE [REFFILE]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 skool2html.py converts a skool file and ref files to HTML. When SKOOLFILE is -
 , skool2html.py reads from standard input.
@@ -205,10 +205,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * skool2html.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/sna2ctl.py.html` & `skoolkit-9.2/docs/man/sna2ctl.py.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>sna2ctl.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>sna2ctl.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2ctl.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -69,16 +69,17 @@
 </dl>
 <dl class="option-list">
 <dt><kbd><span class="option">-l</span>, <span class="option">--hex-lower</span></kbd></dt>
 <dd><p>Write lower case hexadecimal addresses.</p>
 </dd>
 </dl>
 <dl class="simple">
-<dt>-m, map <cite>FILE</cite></dt><dd><p>Specify a code execution map to use. Code execution maps produced by the
-Fuse, SpecEmu, Spud, Zero and Z80 Spectrum emulators are supported.</p>
+<dt>-m, map <cite>FILE</cite></dt><dd><p>Specify a code execution map to use. Code execution maps produced by
+<code class="docutils literal notranslate"><span class="pre">rzxplay.py</span></code> and by the Fuse, SpecEmu, Spud, Zero and Z80 Spectrum
+emulators are supported.</p>
 </dd>
 <dt>-o, org <cite>ADDR</cite></dt><dd><p>Specify the origin address of a binary file. The default origin address is
 65536 minus the length of the file. <cite>ADDR</cite> must be a decimal number, or a
 hexadecimal number prefixed by 0x.</p>
 </dd>
 <dt>-p, page <cite>PAGE</cite></dt><dd><p>Specify the page (0-7) of a 128K snapshot to map to 49152-65535.</p>
 </dd>
@@ -211,15 +212,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2ctl.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2ctl.py
 ************ ssnnaa22ccttll..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 sna2ctl.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 sna2ctl.py generates a control file for a binary (raw memory) file or a SNA,
 SZX or Z80 snapshot. The control file is written to standard output. When FILE
@@ -18,16 +18,17 @@
   -I, iniparam=value
       Set the value of a configuration parameter (see CONFIGURATION),
       overriding any value found in skoolkit.ini. This option may be used
       multiple times.
   -l, --hex-lower
       Write lower case hexadecimal addresses.
   -m, mapFILE
-      Specify a code execution map to use. Code execution maps produced by the
-      Fuse, SpecEmu, Spud, Zero and Z80 Spectrum emulators are supported.
+      Specify a code execution map to use. Code execution maps produced by
+      rzxplay.py and by the Fuse, SpecEmu, Spud, Zero and Z80 Spectrum
+      emulators are supported.
   -o, orgADDR
       Specify the origin address of a binary file. The default origin address
       is 65536 minus the length of the file.ADDRmust be a decimal number, or a
       hexadecimal number prefixed by 0x.
   -p, pagePAGE
       Specify the page (0-7) of a 128K snapshot to map to 49152-65535.
   --show-config
@@ -85,10 +86,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2ctl.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/sna2img.py.html` & `skoolkit-9.2/docs/man/sna2img.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>sna2img.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>sna2img.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2img.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -182,15 +182,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2img.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2img.py
 ************ ssnnaa22iimmgg..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 sna2img.py [options] INPUT [OUTPUT]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 sna2img.py converts a Spectrum screenshot or other graphic data into a PNG
 file. INPUT may be a binary (raw memory) file, a SCR file, a skool file, or a
@@ -65,10 +65,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2img.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/sna2skool.py.html` & `skoolkit-9.2/docs/man/sna2skool.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>sna2skool.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>sna2skool.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2skool.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -315,15 +315,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">sna2skool.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2skool.py
 ************ ssnnaa22sskkooooll..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 sna2kool.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 sna2skool.py converts a binary (raw memory) file or a SNA, SZX or Z80 snapshot
 into a skool file. The skool file is written to standard output. When FILE is
@@ -161,10 +161,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * sna2skool.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/snapinfo.py.html` & `skoolkit-9.2/docs/man/snapinfo.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>snapinfo.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>snapinfo.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">snapinfo.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -234,15 +234,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">snapinfo.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * snapinfo.py
 ************ ssnnaappiinnffoo..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 snapinfo.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 snapinfo.py shows information on the registers or RAM in a binary (raw memory)
 file or a SNA, SZX or Z80 snapshot.
@@ -107,10 +107,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * snapinfo.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/snapmod.py.html` & `skoolkit-9.2/docs/man/snapmod.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>snapmod.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>snapmod.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">snapmod.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -202,15 +202,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">snapmod.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * snapmod.py
 ************ ssnnaappmmoodd..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 snapmod.py [options] infile [outfile]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 snapmod.py modifies the registers and RAM in an SZX or Z80 snapshot.
 ********** OOPPTTIIOONNSS_? **********
@@ -76,10 +76,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * snapmod.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/tap2sna.py.html` & `skoolkit-9.2/docs/man/tap2sna.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>tap2sna.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>tap2sna.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">tap2sna.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -127,16 +127,16 @@
 <dt><kbd><span class="option">-V</span>, <span class="option">--version</span></kbd></dt>
 <dd><p>Show the SkoolKit version number and exit.</p>
 </dd>
 </dl>
 </section>
 <section id="tzx-support">
 <h2>TZX SUPPORT<a class="headerlink" href="#tzx-support" title="Permalink to this heading"></a></h2>
-<p><code class="docutils literal notranslate"><span class="pre">tap2sna.py</span></code> cannot read data from TZX block types 0x15 (direct recording),
-0x18 (CSW recording) or 0x19 (generalized data block).</p>
+<p><code class="docutils literal notranslate"><span class="pre">tap2sna.py</span></code> cannot read data from TZX block types 0x18 (CSW recording) or
+0x19 (generalized data block).</p>
 </section>
 <section id="simulated-load">
 <h2>SIMULATED LOAD<a class="headerlink" href="#simulated-load" title="Permalink to this heading"></a></h2>
 <p>By default, <code class="docutils literal notranslate"><span class="pre">tap2sna.py</span></code> simulates a freshly booted 48K ZX Spectrum running
 LOAD  (or LOAD CODE, if the first block on the tape is a Bytes header).
 Whenever the Spectrum ROMs load routine at $0556 is called, a shortcut is
 taken by fast loading the next block on the tape. All other code (including
@@ -160,15 +160,16 @@
 <li><p><code class="docutils literal notranslate"><span class="pre">accelerate-dec-a</span></code> - enable acceleration of DEC A: JR NZ,$-1 delay loops
 (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or DEC A: JP NZ,$-1 delay loops (<code class="docutils literal notranslate"><span class="pre">2</span></code>), or neither
 (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">accelerator</span></code> - a comma-separated list of tape-sampling loop accelerators
 to use (see the <code class="docutils literal notranslate"><span class="pre">ACCELERATORS</span></code> section below)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">cmio</span></code> - enable simulation of memory contention and I/O contention delays
 (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or disable it (<code class="docutils literal notranslate"><span class="pre">0</span></code>); this is disabled by default to improve
-performance, but some loaders may require it</p></li>
+performance, but some loaders may require it; when this is enabled, all
+acceleration is disabled</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">fast-load</span></code> - enable fast loading (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or disable it
 (<code class="docutils literal notranslate"><span class="pre">0</span></code>); fast loading significantly reduces the load time for many tapes, but
 can also cause some loaders to fail</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">finish-tape</span></code> - run the tape to the end before stopping the simulation at
 the address specified by the <code class="docutils literal notranslate"><span class="pre">--start</span></code> option (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or stop the
 simulation as soon as that address is reached, regardless of whether the tape
 has finished (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
@@ -183,14 +184,16 @@
 <li><p><code class="docutils literal notranslate"><span class="pre">pause</span></code> - pause the tape between blocks and resume playback when port 254
 is read (<code class="docutils literal notranslate"><span class="pre">1</span></code>, the default), or run the tape continuously (<code class="docutils literal notranslate"><span class="pre">0</span></code>); pausing
 can help with tapes that require (but do not actually contain) long pauses
 between blocks, but can cause some loaders to fail</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">polarity</span></code> - the EAR bit reading produced by the first pulse on the tape:
 <code class="docutils literal notranslate"><span class="pre">0</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">1</span></code>; subsequent pulses give readings that alternate
 between 0 and 1</p></li>
+<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code> - whether to use the pure Python Z80 simulator (<code class="docutils literal notranslate"><span class="pre">1</span></code>), or the
+much faster C version if available (<code class="docutils literal notranslate"><span class="pre">0</span></code>, the default)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> - the number of seconds of Z80 CPU time after which to abort the
 simulated LOAD if its still in progress (default: 900)</p></li>
 <li><p><code class="docutils literal notranslate"><span class="pre">trace</span></code> - the file to which to log all instructions executed during the
 simulated LOAD (default: none)</p></li>
 </ul>
 <p>The <code class="docutils literal notranslate"><span class="pre">in-flags</span></code> parameter is the sum of the following values, chosen according
 to the desired behaviour:</p>
@@ -719,15 +722,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">tap2sna.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * tap2sna.py
 ************ ttaapp22ssnnaa..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 tap2sna.py [options] INPUT [OUTFILE]
 tap2sna.py @FILE [args]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 tap2sna.py converts a TAP or TZX file (which may be inside a zip archive) into
@@ -59,16 +59,16 @@
       Specify the MD5 checksum of the TAP/TZX file. tap2sna.py will abort if
       there is a checksum mismatch.
   -u, user-agentAGENT
       Set the User-Agent header used in an HTTP(S) request.
   -V, --version
       Show the SkoolKit version number and exit.
 ********** TTZZXX SSUUPPPPOORRTT_? **********
-tap2sna.py cannot read data from TZX block types 0x15 (direct recording), 0x18
-(CSW recording) or 0x19 (generalized data block).
+tap2sna.py cannot read data from TZX block types 0x18 (CSW recording) or 0x19
+(generalized data block).
 ********** SSIIMMUULLAATTEEDD LLOOAADD_? **********
 By default, tap2sna.py simulates a freshly booted 48K ZX Spectrum running LOAD
  (or LOAD CODE, if the first block on the tape is a Bytes header).
 Whenever the Spectrum ROMs load routine at $0556 is called, a shortcut is
 taken by fast loading the next block on the tape. All other code (including
 any custom loader) is fully simulated. Simulation continues until the program
 counter hits the start address given by the --start option, or 15 minutes of
@@ -85,15 +85,16 @@
 sim-load-config (or -c) option. The recognised configuration parameters are:
     * accelerate-dec-a - enable acceleration of DEC A: JR NZ,$-1 delay loops
       (1, the default), or DEC A: JP NZ,$-1 delay loops (2), or neither (0)
     * accelerator - a comma-separated list of tape-sampling loop accelerators
       to use (see the ACCELERATORS section below)
     * cmio - enable simulation of memory contention and I/O contention delays
       (1), or disable it (0); this is disabled by default to improve
-      performance, but some loaders may require it
+      performance, but some loaders may require it; when this is enabled, all
+      acceleration is disabled
     * fast-load - enable fast loading (1, the default), or disable it (0); fast
       loading significantly reduces the load time for many tapes, but can also
       cause some loaders to fail
     * finish-tape - run the tape to the end before stopping the simulation at
       the address specified by the --start option (1), or stop the simulation
       as soon as that address is reached, regardless of whether the tape has
       finished (0, the default)
@@ -108,14 +109,16 @@
     * pause - pause the tape between blocks and resume playback when port 254
       is read (1, the default), or run the tape continuously (0); pausing can
       help with tapes that require (but do not actually contain) long pauses
       between blocks, but can cause some loaders to fail
     * polarity - the EAR bit reading produced by the first pulse on the tape: 0
       (the default) or 1; subsequent pulses give readings that alternate
       between 0 and 1
+    * python - whether to use the pure Python Z80 simulator (1), or the much
+      faster C version if available (0, the default)
     * timeout - the number of seconds of Z80 CPU time after which to abort the
       simulated LOAD if its still in progress (default: 900)
     * trace - the file to which to log all instructions executed during the
       simulated LOAD (default: none)
 The in-flags parameter is the sum of the following values, chosen according to
 the desired behaviour:
     * 1 - interpret IN A,($FE) instructions in the address range $4000-$7FFF
@@ -447,10 +450,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * tap2sna.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/tapinfo.py.html` & `skoolkit-9.2/docs/man/tapinfo.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>tapinfo.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>tapinfo.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">tapinfo.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -130,15 +130,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">tapinfo.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,10 +1,10 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * tapinfo.py
 ************ ttaappiinnffoo..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 tapinfo.py [options] FILE
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
 tapinfo.py shows information on the blocks in a TAP or TZX file.
 ********** OOPPTTIIOONNSS_? **********
@@ -31,10 +31,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * tapinfo.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/man/trace.py.html` & `skoolkit-9.2/docs/man/trace.py.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>trace.py &#8212; SkoolKit 9.1 documentation</title>
+    <title>trace.py &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
     
     <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
     <script src="../_static/jquery.js"></script>
     <script src="../_static/underscore.js"></script>
@@ -23,15 +23,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">trace.py</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -41,18 +41,19 @@
 <h1>trace.py<a class="headerlink" href="#trace-py" title="Permalink to this heading"></a></h1>
 <section id="synopsis">
 <h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this heading"></a></h2>
 <p><code class="docutils literal notranslate"><span class="pre">trace.py</span></code> [options] FILE [OUTFILE]</p>
 </section>
 <section id="description">
 <h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
-<p><code class="docutils literal notranslate"><span class="pre">trace.py</span></code> simulates the execution of machine code in a 48K or 128K binary
-(raw memory) file or a SNA, SZX or Z80 snapshot. If FILE is 48 or 128, no
-snapshot is loaded, and the RAM is left blank (all zeroes). If OUTFILE is
-given, an SZX or Z80 snapshot is written after execution has completed.</p>
+<p><code class="docutils literal notranslate"><span class="pre">trace.py</span></code> simulates the execution of machine code in a 48K, 128K or +2 SNA,
+SZX or Z80 snapshot, or a binary (raw memory) file. If FILE is 48, 128 or
++2, no snapshot is loaded, and the RAM is left blank (all zeroes). If
+OUTFILE is given, an SZX or Z80 snapshot is written after execution has
+completed.</p>
 </section>
 <section id="options">
 <h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this heading"></a></h2>
 <dl class="option-list">
 <dt><kbd><span class="option">--audio</span></kbd></dt>
 <dd><p>Show a list of the delays (in T-states) between changes in the state of the
 ZX Spectrum speaker made by the code that was executed.</p>
@@ -96,14 +97,21 @@
 number, or a hexadecimal number prefixed by 0x.</p>
 </dd>
 <dt>-p, poke <cite>[p:]a[-b[-c]],[^+]v</cite></dt><dd><p>POKE N,v in RAM bank p for N in {a, a+c, a+2c, b}. Prefix v with ^ to
 perform an XOR operation, or + to perform an ADD operation. This option may
 be used multiple times. a, b, c and v must each be a decimal number,
 or a hexadecimal number prefixed by 0x.</p>
 </dd>
+</dl>
+<dl class="option-list">
+<dt><kbd><span class="option">--python</span></kbd></dt>
+<dd><p>Use the pure Python Z80 simulator even if the C version is available.</p>
+</dd>
+</dl>
+<dl class="simple">
 <dt>-r, reg <cite>name=value</cite></dt><dd><p>Set the value of a register before execution begins. Do <code class="docutils literal notranslate"><span class="pre">--reg</span> <span class="pre">help</span></code> for
 more information, or see the section on <code class="docutils literal notranslate"><span class="pre">REGISTERS</span></code> below. This option may
 be used multiple times.</p>
 </dd>
 <dt>rom <cite>FILE</cite></dt><dd><p>Patch in a ROM at address 0 from this file.</p>
 </dd>
 </dl>
@@ -305,15 +313,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="../genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="../index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">trace.py</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,18 +1,18 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * trace.py
 ************ ttrraaccee..ppyy_? ************
 ********** SSYYNNOOPPSSIISS_? **********
 trace.py [options] FILE [OUTFILE]
 ********** DDEESSCCRRIIPPTTIIOONN_? **********
-trace.py simulates the execution of machine code in a 48K or 128K binary (raw
-memory) file or a SNA, SZX or Z80 snapshot. If FILE is 48 or 128, no
-snapshot is loaded, and the RAM is left blank (all zeroes). If OUTFILE is
+trace.py simulates the execution of machine code in a 48K, 128K or +2 SNA, SZX
+or Z80 snapshot, or a binary (raw memory) file. If FILE is 48, 128 or +2,
+no snapshot is loaded, and the RAM is left blank (all zeroes). If OUTFILE is
 given, an SZX or Z80 snapshot is written after execution has completed.
 ********** OOPPTTIIOONNSS_? **********
   --audio
       Show a list of the delays (in T-states) between changes in the state of
       the ZX Spectrum speaker made by the code that was executed.
   -c, --cmio
       Simulate memory contention and I/O contention delays.
@@ -40,14 +40,16 @@
       origin address is 65536 minus the length of the file.ORGmust be a decimal
       number, or a hexadecimal number prefixed by 0x.
   -p, poke[p:]a[-b[-c]],[^+]v
       POKE N,v in RAM bank p for N in {a, a+c, a+2c, b}. Prefix v with ^
       to perform an XOR operation, or + to perform an ADD operation. This
       option may be used multiple times. a, b, c and v must each be a
       decimal number, or a hexadecimal number prefixed by 0x.
+  --python
+      Use the pure Python Z80 simulator even if the C version is available.
   -r, regname=value
       Set the value of a register before execution begins. Do --reg help for
       more information, or see the section on REGISTERS below. This option may
       be used multiple times.
   romFILE
       Patch in a ROM at address 0 from this file.
   --show-config
@@ -148,10 +150,10 @@
           o _E_X_A_M_P_L_E_S
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * trace.py
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/migration.html` & `skoolkit-9.2/docs/migration.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Migrating from SkoolKit 8 &#8212; SkoolKit 9.1 documentation</title>
+    <title>Migrating from SkoolKit 8 &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="changelog.html" title="Changelog"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="assemblers.html" title="Supported assemblers"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Migrating from SkoolKit 8</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -193,15 +193,15 @@
              >index</a></li>
         <li class="right" >
           <a href="changelog.html" title="Changelog"
              >next</a> |</li>
         <li class="right" >
           <a href="assemblers.html" title="Supported assemblers"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Migrating from SkoolKit 8</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Migrating from SkoolKit 8
 ************ MMiiggrraattiinngg ffrroomm SSkkoooollKKiitt 88_? ************
 SkoolKit 9 includes some changes that make it incompatible with SkoolKit 8. If
 you have developed a disassembly using SkoolKit 8 and find that the SkoolKit
 commands no longer work with your source files, or produce broken output, look
 through the following sections for tips on how to migrate your disassembly to
 SkoolKit 9.
@@ -82,10 +82,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Migrating from SkoolKit 8
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/parsing.html` & `skoolkit-9.2/docs/parsing.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Parsing, rendering, and modes &#8212; SkoolKit 9.1 documentation</title>
+    <title>Parsing, rendering, and modes &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="control-files.html" title="Control files"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="changelog1.html" title="SkoolKit 1.x changelog"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Parsing, rendering, and modes</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -201,15 +201,15 @@
              >index</a></li>
         <li class="right" >
           <a href="control-files.html" title="Control files"
              >next</a> |</li>
         <li class="right" >
           <a href="changelog1.html" title="SkoolKit 1.x changelog"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Parsing, rendering, and modes</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Parsing, rendering, and modes
 ************ PPaarrssiinngg,, rreennddeerriinngg,, aanndd mmooddeess_? ************
 The following subsections explain at a high level the two phases involved in
 transforming a skool file (and its related ref files, if any exist) into HTML
 or ASM format by using _s_k_o_o_l_2_h_t_m_l_._p_y or _s_k_o_o_l_2_a_s_m_._p_y: parsing and rendering.
 ********** PPaarrssiinngg_? **********
 In the first phase, the skool file is parsed. Parsing a skool file entails
@@ -89,10 +89,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Parsing, rendering, and modes
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/ref-files.html` & `skoolkit-9.2/docs/ref-files.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Ref files &#8212; SkoolKit 9.1 documentation</title>
+    <title>Ref files &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="asm.html" title="ASM modes and directives"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="skool-macros.html" title="Skool macros"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Ref files</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -1395,15 +1395,15 @@
              >index</a></li>
         <li class="right" >
           <a href="asm.html" title="ASM modes and directives"
              >next</a> |</li>
         <li class="right" >
           <a href="skool-macros.html" title="Skool macros"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Ref files</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Ref files
 ************ RReeff ffiilleess_? ************
 If you want to configure or augment an HTML disassembly, you will need one or
 more ref files. A ref file can be used to (for example):
     * add a Bugs page on which bugs are documented
     * add a Trivia page on which interesting facts are documented
     * add a Pokes page on which useful POKEs are listed
@@ -816,10 +816,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Ref files
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/search.html` & `skoolkit-9.2/docs/search.html`

 * *Files 4% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
-    <title>Search &#8212; SkoolKit 9.1 documentation</title>
+    <title>Search &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
@@ -28,15 +28,15 @@
   </head><body>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              accesskey="I">index</a></li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Search</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -85,15 +85,15 @@
     </div>
     <div class="related" role="navigation" aria-label="related navigation">
       <h3>Navigation</h3>
       <ul>
         <li class="right" style="margin-right: 10px">
           <a href="genindex.html" title="General Index"
              >index</a></li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Search</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,13 +1,13 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Search
 ************ SSeeaarrcchh ************
 Please activate JavaScript to enable the search functionality.
 Searching for multiple words only shows matches that contain all words.
 [q                   ][search]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Search
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/searchindex.js` & `skoolkit-9.2/docs/searchindex.js`

 * *Files 11% similar despite different names*

#### js-beautify {}

```diff
@@ -1,2941 +1,2968 @@
 Search.setIndex({
-    "docnames": ["asm", "asm-templates", "assemblers", "changelog", "changelog1", "changelog2", "changelog3", "changelog4", "changelog5", "changelog6", "changelog7", "commands", "components", "control-files", "diy", "extending", "html-templates", "index", "man/bin2sna.py", "man/bin2tap.py", "man/skool2asm.py", "man/skool2bin.py", "man/skool2ctl.py", "man/skool2html.py", "man/sna2ctl.py", "man/sna2img.py", "man/sna2skool.py", "man/snapinfo.py", "man/snapmod.py", "man/tap2sna.py", "man/tapinfo.py", "man/trace.py", "migration", "parsing", "ref-files", "skool-files", "skool-macros", "usage", "whatis"],
-    "filenames": ["asm.rst", "asm-templates.rst", "assemblers.rst", "changelog.rst", "changelog1.rst", "changelog2.rst", "changelog3.rst", "changelog4.rst", "changelog5.rst", "changelog6.rst", "changelog7.rst", "commands.rst", "components.rst", "control-files.rst", "diy.rst", "extending.rst", "html-templates.rst", "index.rst", "man/bin2sna.py.rst", "man/bin2tap.py.rst", "man/skool2asm.py.rst", "man/skool2bin.py.rst", "man/skool2ctl.py.rst", "man/skool2html.py.rst", "man/sna2ctl.py.rst", "man/sna2img.py.rst", "man/sna2skool.py.rst", "man/snapinfo.py.rst", "man/snapmod.py.rst", "man/tap2sna.py.rst", "man/tapinfo.py.rst", "man/trace.py.rst", "migration.rst", "parsing.rst", "ref-files.rst", "skool-files.rst", "skool-macros.rst", "usage.rst", "whatis.rst"],
-    "titles": ["ASM modes and directives", "ASM templates", "Supported assemblers", "Changelog", "SkoolKit 1.x changelog", "SkoolKit 2.x changelog", "SkoolKit 3.x changelog", "SkoolKit 4.x changelog", "SkoolKit 5.x changelog", "SkoolKit 6.x changelog", "SkoolKit 7.x changelog", "Commands", "SkoolKit components", "Control files", "Disassembly DIY", "Extending SkoolKit", "HTML templates", "SkoolKit manual", "bin2sna.py", "bin2tap.py", "skool2asm.py", "skool2bin.py", "skool2ctl.py", "skool2html.py", "sna2ctl.py", "sna2img.py", "sna2skool.py", "snapinfo.py", "snapmod.py", "tap2sna.py", "tapinfo.py", "trace.py", "Migrating from SkoolKit 8", "Parsing, rendering, and modes", "Ref files", "Skool files", "Skool macros", "Installing and using SkoolKit", "What is SkoolKit?"],
+    "docnames": ["asm", "asm-templates", "assemblers", "changelog", "changelog1", "changelog2", "changelog3", "changelog4", "changelog5", "changelog6", "changelog7", "changelog8", "commands", "components", "control-files", "diy", "extending", "html-templates", "index", "man/bin2sna.py", "man/bin2tap.py", "man/rzxinfo.py", "man/rzxplay.py", "man/skool2asm.py", "man/skool2bin.py", "man/skool2ctl.py", "man/skool2html.py", "man/sna2ctl.py", "man/sna2img.py", "man/sna2skool.py", "man/snapinfo.py", "man/snapmod.py", "man/tap2sna.py", "man/tapinfo.py", "man/trace.py", "migration", "parsing", "ref-files", "skool-files", "skool-macros", "usage", "whatis"],
+    "filenames": ["asm.rst", "asm-templates.rst", "assemblers.rst", "changelog.rst", "changelog1.rst", "changelog2.rst", "changelog3.rst", "changelog4.rst", "changelog5.rst", "changelog6.rst", "changelog7.rst", "changelog8.rst", "commands.rst", "components.rst", "control-files.rst", "diy.rst", "extending.rst", "html-templates.rst", "index.rst", "man/bin2sna.py.rst", "man/bin2tap.py.rst", "man/rzxinfo.py.rst", "man/rzxplay.py.rst", "man/skool2asm.py.rst", "man/skool2bin.py.rst", "man/skool2ctl.py.rst", "man/skool2html.py.rst", "man/sna2ctl.py.rst", "man/sna2img.py.rst", "man/sna2skool.py.rst", "man/snapinfo.py.rst", "man/snapmod.py.rst", "man/tap2sna.py.rst", "man/tapinfo.py.rst", "man/trace.py.rst", "migration.rst", "parsing.rst", "ref-files.rst", "skool-files.rst", "skool-macros.rst", "usage.rst", "whatis.rst"],
+    "titles": ["ASM modes and directives", "ASM templates", "Supported assemblers", "Changelog", "SkoolKit 1.x changelog", "SkoolKit 2.x changelog", "SkoolKit 3.x changelog", "SkoolKit 4.x changelog", "SkoolKit 5.x changelog", "SkoolKit 6.x changelog", "SkoolKit 7.x changelog", "SkoolKit 8.x changelog", "Commands", "SkoolKit components", "Control files", "Disassembly DIY", "Extending SkoolKit", "HTML templates", "SkoolKit manual", "bin2sna.py", "bin2tap.py", "rzxinfo.py", "rzxplay.py", "skool2asm.py", "skool2bin.py", "skool2ctl.py", "skool2html.py", "sna2ctl.py", "sna2img.py", "sna2skool.py", "snapinfo.py", "snapmod.py", "tap2sna.py", "tapinfo.py", "trace.py", "Migrating from SkoolKit 8", "Parsing, rendering, and modes", "Ref files", "Skool files", "Skool macros", "Installing and using SkoolKit", "What is SkoolKit?"],
     "terms": {
-        "A": [0, 1, 2, 3, 8, 9, 11, 12, 13, 15, 16, 27, 30, 34, 35, 36],
-        "skool": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 20, 21, 22, 23, 25, 26, 29, 33, 34, 38],
-        "file": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 16, 17, 18, 19, 20, 21, 22, 24, 25, 26, 27, 30, 31, 32, 33, 36, 38],
-        "mai": [0, 3, 5, 6, 9, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37],
-        "contain": [0, 1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 22, 23, 24, 29, 34, 35, 36, 38],
-        "ar": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37, 38],
-        "process": [0, 3, 6, 9, 10, 11, 16, 20, 21, 33, 35, 36],
-        "dure": [0, 3, 11, 29, 33, 36],
-        "pars": [0, 3, 5, 6, 7, 8, 9, 11, 12, 17, 20, 25, 34, 35],
-        "phase": [0, 33],
-        "exactli": [0, 11, 20, 26, 29, 34, 36, 37],
-        "how": [0, 2, 3, 5, 6, 7, 8, 9, 10, 11, 13, 14, 16, 20, 29, 32, 34, 36],
-        "i": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37],
-        "whether": [0, 3, 7, 11, 12, 15, 29, 33, 36],
-        "execut": [0, 3, 6, 8, 11, 14, 15, 18, 19, 24, 29, 31, 32, 36, 38],
-        "depend": [0, 1, 11, 13, 14, 15, 16, 19, 29, 33, 34, 35, 36],
-        "which": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 23, 26, 27, 29, 33, 34, 35, 36],
-        "being": [0, 3, 6, 7, 8, 9, 11, 12, 15, 16, 20, 24, 29, 33, 34, 35, 36, 37],
-        "There": [0, 13, 14, 36, 37],
-        "three": [0, 11, 12, 13, 14, 15, 34, 36],
-        "These": [0, 11, 15, 36],
-        "describ": [0, 13, 14, 15, 34, 36],
-        "follow": [0, 1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16, 20, 22, 23, 24, 26, 27, 29, 31, 32, 33, 34, 35, 36],
-        "subsect": [0, 33],
-        "In": [0, 1, 5, 9, 10, 11, 12, 13, 14, 15, 16, 29, 32, 33, 34, 35, 36, 38],
-        "The": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 38],
-        "main": [0, 11, 13, 15, 18, 19, 20, 23, 34, 36],
-        "purpos": [0, 6, 9, 12, 14, 33, 36, 38],
-        "make": [0, 3, 5, 6, 8, 9, 10, 11, 13, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 32, 35, 36],
-        "minimum": [0, 10, 11, 12, 20, 24, 26, 36],
-        "number": [0, 3, 5, 6, 10, 11, 12, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36],
-        "instruct": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 16, 20, 21, 22, 23, 26, 27, 29, 31, 34, 35, 36, 38],
-        "necessari": [0, 5, 8, 36],
-        "produc": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 20, 24, 27, 29, 31, 32, 34, 36, 38],
-        "an": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 23, 25, 26, 28, 29, 31, 32, 33, 34, 35, 36, 38],
-        "For": [0, 1, 11, 12, 13, 14, 15, 16, 18, 20, 22, 23, 24, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 38],
-        "exampl": [0, 1, 2, 4, 6, 7, 11, 12, 13, 14, 15, 16, 32, 33, 34, 35, 36],
-        "ld": [0, 2, 3, 4, 6, 7, 9, 11, 12, 13, 16, 29, 34, 35, 36],
-        "32512": [0, 29],
+        "A": [0, 1, 2, 3, 8, 9, 11, 12, 13, 14, 16, 17, 22, 30, 33, 37, 38, 39],
+        "skool": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 23, 24, 25, 26, 28, 29, 32, 36, 37, 41],
+        "file": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 17, 18, 19, 20, 21, 23, 24, 25, 27, 28, 29, 30, 33, 34, 35, 36, 39, 41],
+        "mai": [0, 5, 6, 9, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40],
+        "contain": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 22, 25, 26, 27, 32, 37, 38, 39, 41],
+        "ar": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40, 41],
+        "process": [0, 3, 6, 9, 10, 11, 12, 17, 23, 24, 36, 38, 39],
+        "dure": [0, 11, 12, 22, 32, 36, 39],
+        "pars": [0, 5, 6, 7, 8, 9, 11, 12, 13, 18, 23, 28, 37, 38],
+        "phase": [0, 36],
+        "exactli": [0, 12, 23, 29, 32, 37, 39, 40],
+        "how": [0, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 17, 23, 32, 35, 37, 39],
+        "i": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40],
+        "whether": [0, 3, 7, 11, 12, 13, 16, 22, 32, 36, 39],
+        "execut": [0, 3, 6, 8, 11, 12, 15, 16, 19, 20, 27, 32, 34, 35, 39, 40, 41],
+        "depend": [0, 1, 12, 14, 15, 16, 17, 20, 32, 36, 37, 38, 39, 40],
+        "which": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23, 26, 29, 30, 32, 36, 37, 38, 39],
+        "being": [0, 3, 6, 7, 8, 9, 11, 12, 13, 16, 17, 23, 27, 32, 36, 37, 38, 39, 40],
+        "There": [0, 14, 15, 39, 40],
+        "three": [0, 12, 13, 14, 15, 16, 37, 39],
+        "These": [0, 12, 16, 39],
+        "describ": [0, 14, 15, 16, 37, 39],
+        "follow": [0, 1, 2, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16, 17, 22, 23, 25, 26, 27, 29, 30, 32, 34, 35, 36, 37, 38, 39, 40],
+        "subsect": [0, 36],
+        "In": [0, 1, 5, 9, 10, 12, 13, 14, 15, 16, 17, 32, 35, 36, 37, 38, 39, 41],
+        "The": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 41],
+        "main": [0, 12, 14, 16, 19, 20, 23, 26, 37, 39],
+        "purpos": [0, 6, 9, 13, 15, 36, 39, 41],
+        "make": [0, 3, 5, 6, 8, 9, 10, 11, 12, 14, 15, 16, 22, 23, 25, 26, 27, 29, 30, 32, 34, 35, 38, 39, 40],
+        "minimum": [0, 10, 12, 13, 23, 27, 29, 39],
+        "number": [0, 3, 5, 6, 10, 11, 12, 13, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39],
+        "instruct": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 17, 22, 23, 24, 25, 26, 29, 30, 32, 34, 37, 38, 39, 41],
+        "necessari": [0, 5, 8, 39],
+        "produc": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 17, 22, 23, 27, 30, 32, 34, 35, 37, 39, 41],
+        "an": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 21, 22, 23, 26, 28, 29, 31, 32, 34, 35, 36, 37, 38, 39, 41],
+        "For": [0, 1, 12, 13, 14, 15, 16, 17, 19, 23, 25, 26, 27, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 41],
+        "exampl": [0, 1, 2, 4, 6, 7, 12, 13, 14, 15, 16, 17, 35, 36, 37, 38, 39],
+        "ld": [0, 2, 3, 4, 6, 7, 9, 11, 12, 13, 14, 17, 22, 32, 37, 38, 39],
+        "32512": [0, 32],
         "25396": 0,
-        "m": [0, 3, 5, 10, 11, 12, 14, 15, 22, 23, 24, 25, 27, 28, 31, 36, 38],
-        "thi": [0, 1, 2, 3, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37, 38],
-        "ensur": [0, 14, 16, 34, 35],
-        "valid": [0, 11, 12, 13, 16, 29, 36],
-        "when": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 22, 23, 24, 25, 26, 27, 29, 31, 33, 34, 35, 36],
-        "render": [0, 3, 5, 6, 7, 8, 9, 10, 11, 13, 15, 16, 17, 34, 35, 36, 38],
+        "m": [0, 3, 5, 10, 11, 12, 13, 15, 16, 25, 26, 27, 28, 30, 31, 34, 39, 41],
+        "thi": [0, 1, 2, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40, 41],
+        "ensur": [0, 15, 17, 37, 38],
+        "valid": [0, 12, 13, 14, 17, 32, 39],
+        "when": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 32, 34, 36, 37, 38, 39],
+        "render": [0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 18, 22, 37, 38, 39, 41],
         "invok": 0,
-        "default": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 30, 31, 32, 34, 35, 36],
-        "run": [0, 2, 3, 4, 5, 11, 14, 15, 16, 23, 29, 31, 33, 34, 35, 36, 37],
-        "skool2asm": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 14, 15, 33, 35, 36, 38],
-        "py": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 33, 34, 35, 36, 37, 38],
-        "lsb": [0, 16],
-        "msb": [0, 16],
-        "full": [0, 3, 10, 11, 14, 16, 29, 36, 38],
-        "address": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36],
-        "operand": [0, 3, 5, 6, 7, 9, 10, 11, 13, 14, 16, 20, 22, 23, 26, 29, 31, 34, 35, 38],
-        "code": [0, 3, 4, 5, 6, 8, 10, 11, 12, 13, 14, 16, 19, 23, 24, 26, 29, 31, 33, 34, 35, 36, 38],
+        "default": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 33, 34, 35, 37, 38, 39],
+        "run": [0, 2, 4, 5, 11, 12, 15, 16, 17, 22, 26, 32, 34, 36, 37, 38, 39, 40],
+        "skool2asm": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 15, 16, 36, 38, 39, 41],
+        "py": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 36, 37, 38, 39, 40, 41],
+        "lsb": [0, 17],
+        "msb": [0, 17],
+        "full": [0, 10, 11, 12, 15, 17, 32, 39, 41],
+        "address": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39],
+        "operand": [0, 5, 6, 7, 9, 10, 11, 12, 14, 15, 17, 23, 25, 26, 29, 32, 34, 37, 38, 41],
+        "code": [0, 3, 4, 5, 6, 8, 10, 11, 12, 13, 14, 15, 17, 20, 26, 27, 29, 32, 34, 36, 37, 38, 39, 41],
         "amen": 0,
-        "some": [0, 5, 6, 11, 13, 14, 15, 29, 32, 33, 34, 35, 36, 37],
-        "degre": [0, 11, 15, 25, 36],
-        "reloc": [0, 11],
-        "without": [0, 5, 10, 11, 13, 14, 19, 20, 22, 23, 24, 26, 34, 35, 36],
-        "actual": [0, 11, 12, 16, 29, 36],
-        "remov": [0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 32, 34, 35, 36],
-        "insert": [0, 3, 4, 9, 10, 11, 12, 15, 16, 36],
-        "ani": [0, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 24, 25, 26, 27, 29, 31, 33, 34, 35, 36, 37, 38],
+        "some": [0, 5, 6, 12, 14, 15, 16, 22, 32, 35, 36, 37, 38, 39, 40],
+        "degre": [0, 12, 16, 28, 39],
+        "reloc": [0, 12],
+        "without": [0, 5, 10, 12, 14, 15, 20, 22, 23, 25, 26, 27, 29, 37, 38, 39],
+        "actual": [0, 12, 13, 17, 32, 39],
+        "remov": [0, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 35, 37, 38, 39],
+        "insert": [0, 4, 9, 10, 11, 12, 13, 16, 17, 39],
+        "ani": [0, 2, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 22, 23, 25, 26, 27, 28, 29, 30, 32, 34, 36, 37, 38, 39, 40, 41],
         "27015": 0,
-        "1": [0, 11, 12, 13, 15, 16, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 34, 35, 36],
+        "1": [0, 12, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 37, 38, 39],
         "27012": 0,
         "27016": 0,
-        "chang": [0, 1, 3, 4, 5, 11, 12, 13, 15, 16, 31, 32, 34, 35, 36],
-        "below": [0, 2, 3, 6, 11, 13, 15, 16, 18, 19, 23, 28, 29, 31, 34, 36],
-        "from": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 31, 34, 35, 36, 37, 38],
-        "0": [0, 1, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 31, 32, 34, 35, 36],
-        "b": [0, 2, 5, 7, 10, 11, 12, 14, 15, 16, 18, 19, 21, 22, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36],
-        "re": [0, 14, 36, 37, 38],
-        "vice": [0, 14],
-        "versa": [0, 14],
-        "befor": [0, 3, 4, 5, 6, 7, 8, 11, 12, 13, 15, 16, 19, 29, 31, 34, 35, 36],
-        "cannot": [0, 11, 12, 13, 29, 33, 34, 36],
-        "sinc": [0, 11, 18, 28, 29],
-        "pass": [0, 3, 11, 12, 13, 15, 16, 36],
-        "": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 28, 29, 31, 34, 35, 36, 38],
-        "option": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 32, 34, 35, 36, 38],
+        "chang": [0, 1, 3, 4, 5, 11, 12, 13, 14, 16, 17, 22, 34, 35, 37, 38, 39],
+        "below": [0, 2, 6, 11, 12, 14, 16, 17, 19, 20, 22, 26, 31, 32, 34, 37, 39],
+        "from": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 23, 25, 26, 27, 28, 29, 30, 31, 34, 37, 38, 39, 40, 41],
+        "0": [0, 1, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 29, 30, 31, 32, 34, 35, 37, 38, 39],
+        "b": [0, 2, 5, 7, 10, 12, 13, 15, 16, 17, 19, 20, 24, 25, 28, 29, 30, 31, 32, 33, 34, 35, 37, 38, 39],
+        "re": [0, 15, 39, 40, 41],
+        "vice": [0, 15],
+        "versa": [0, 15],
+        "befor": [0, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 16, 17, 20, 32, 34, 37, 38, 39],
+        "cannot": [0, 12, 13, 14, 32, 36, 37, 39],
+        "sinc": [0, 12, 19, 31, 32],
+        "pass": [0, 3, 11, 12, 13, 14, 16, 17, 39],
+        "": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 34, 37, 38, 39, 41],
+        "option": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 35, 37, 38, 39, 41],
         "uncondition": 0,
-        "relocat": [0, 11, 20],
-        "even": [0, 3, 9, 11, 13, 29, 36],
-        "requir": [0, 6, 8, 11, 12, 13, 14, 15, 16, 18, 19, 29, 33, 34, 35, 36],
-        "exist": [0, 3, 5, 10, 11, 14, 15, 16, 23, 32, 33, 34, 36],
-        "new": [0, 3, 7, 10, 11, 14, 15, 16, 34, 36],
+        "relocat": [0, 12, 23],
+        "even": [0, 3, 9, 11, 12, 14, 22, 32, 34, 39],
+        "requir": [0, 6, 8, 12, 13, 14, 15, 16, 17, 19, 20, 22, 32, 36, 37, 38, 39],
+        "exist": [0, 3, 5, 10, 11, 12, 15, 16, 17, 22, 26, 35, 36, 37, 39],
+        "new": [0, 7, 10, 11, 12, 15, 16, 17, 37, 39],
         "23997": 0,
-        "hl": [0, 1, 4, 7, 11, 13, 16, 18, 28, 29, 31, 35, 36],
+        "hl": [0, 1, 4, 7, 12, 14, 17, 19, 31, 32, 34, 38, 39],
         "32766": 0,
         "24002": 0,
-        "256": [0, 9, 29, 36],
+        "256": [0, 9, 32, 39],
         "24000": 0,
         "194": 0,
-        "begin": [0, 3, 9, 11, 13, 19, 26, 29, 31, 33, 34, 35, 36, 37],
-        "inc": [0, 11, 29, 36],
-        "l": [0, 5, 6, 7, 8, 11, 18, 20, 22, 23, 24, 26, 28, 29, 31, 36],
-        "xor": [0, 1, 7, 11, 12, 18, 25, 28, 29, 31, 35, 36],
-        "two": [0, 4, 5, 6, 9, 10, 11, 12, 13, 15, 16, 20, 23, 26, 29, 32, 33, 34, 35, 36],
-        "store": [0, 11, 13, 19, 29],
-        "have": [0, 2, 3, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 24, 26, 29, 32, 34, 35, 36, 37, 38],
-        "correct": [0, 4, 11, 19, 35, 36],
-        "well": [0, 3, 5, 9, 11, 29, 34],
-        "regardless": [0, 11, 15, 29],
-        "where": [0, 1, 3, 5, 9, 11, 12, 13, 14, 15, 19, 22, 23, 29, 34, 35, 36],
-        "origin": [0, 2, 9, 11, 13, 18, 19, 24, 25, 26, 27, 31, 36],
-        "now": [0, 2, 3, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 36],
-        "live": [0, 14, 34, 36],
-        "r": [0, 3, 4, 5, 6, 8, 9, 10, 11, 12, 16, 18, 20, 21, 22, 23, 25, 26, 28, 29, 31, 32, 34, 38],
-        "also": [0, 1, 3, 11, 12, 13, 14, 15, 16, 20, 22, 23, 24, 26, 27, 29, 31, 34, 35, 36, 38],
-        "impli": [0, 11, 13, 20, 21, 25],
-        "fix": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 20, 36],
+        "begin": [0, 9, 11, 12, 14, 20, 29, 32, 34, 36, 37, 38, 39, 40],
+        "inc": [0, 12, 32, 39],
+        "l": [0, 5, 6, 7, 8, 12, 19, 23, 25, 26, 27, 29, 31, 32, 34, 39],
+        "xor": [0, 1, 7, 12, 13, 19, 28, 31, 32, 34, 38, 39],
+        "two": [0, 4, 5, 6, 9, 10, 12, 13, 14, 16, 17, 23, 26, 29, 32, 35, 36, 37, 38, 39],
+        "store": [0, 12, 14, 20, 32],
+        "have": [0, 2, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 23, 25, 26, 27, 29, 32, 35, 37, 38, 39, 40, 41],
+        "correct": [0, 4, 12, 20, 38, 39],
+        "well": [0, 5, 9, 11, 12, 32, 37],
+        "regardless": [0, 12, 16, 22, 32],
+        "where": [0, 1, 5, 9, 11, 12, 13, 14, 15, 16, 20, 25, 26, 32, 37, 38, 39, 40],
+        "origin": [0, 2, 9, 12, 14, 19, 20, 27, 28, 29, 30, 34, 39],
+        "now": [0, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 39],
+        "live": [0, 15, 37, 39],
+        "r": [0, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 17, 19, 22, 23, 24, 25, 26, 28, 29, 31, 32, 34, 35, 37, 41],
+        "also": [0, 1, 3, 11, 12, 13, 14, 15, 16, 17, 23, 25, 26, 27, 29, 30, 32, 34, 37, 38, 39, 41],
+        "impli": [0, 12, 14, 23, 24, 28],
+        "fix": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 23, 39],
         "faulti": 0,
         "27872": 0,
-        "call": [0, 3, 4, 6, 12, 14, 16, 27, 34, 35, 38],
+        "call": [0, 4, 6, 11, 13, 15, 17, 30, 37, 38, 41],
         "27633": 0,
-        "should": [0, 3, 11, 12, 13, 14, 15, 16, 19, 32, 33, 36],
+        "should": [0, 11, 12, 13, 14, 15, 16, 17, 20, 22, 35, 36, 39],
         "27634": 0,
-        "els": [0, 13, 14, 15, 16, 33],
-        "f": [0, 4, 8, 11, 18, 20, 25, 27, 28, 29, 31, 36],
-        "bug": [0, 3, 4, 5, 6, 7, 9, 10, 11, 13, 23, 33, 34, 38],
-        "routin": [0, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 16, 19, 20, 23, 26, 27, 29, 31, 32, 34, 35, 36, 38],
-        "entri": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 26, 34, 36],
-        "point": [0, 3, 4, 5, 6, 10, 11, 12, 16, 26, 35, 36],
-        "data": [0, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 21, 23, 24, 25, 26, 27, 29, 30, 33, 34, 35, 36, 38],
+        "els": [0, 14, 15, 16, 17, 36],
+        "f": [0, 4, 8, 12, 19, 23, 28, 30, 31, 32, 34, 39],
+        "bug": [0, 3, 4, 5, 6, 7, 9, 10, 11, 12, 14, 26, 36, 37, 41],
+        "routin": [0, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 17, 20, 23, 26, 29, 30, 32, 34, 35, 37, 38, 39, 41],
+        "entri": [0, 1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 17, 29, 37, 39],
+        "point": [0, 4, 5, 6, 10, 11, 12, 13, 17, 29, 38, 39],
+        "data": [0, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 23, 24, 26, 27, 28, 29, 30, 32, 33, 36, 37, 38, 39, 41],
         "32205": 0,
-        "jr": [0, 3, 5, 11, 12, 29, 34, 35, 36],
-        "z": [0, 5, 6, 15, 34, 36],
+        "jr": [0, 5, 11, 12, 13, 32, 37, 38, 39],
+        "z": [0, 5, 6, 16, 37, 39],
         "32232": 0,
-        "nz": [0, 3, 11, 29, 35, 36],
-        "2": [0, 11, 12, 13, 14, 15, 16, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36],
-        "move": [0, 3, 6, 9, 10, 11, 12, 14, 15, 25, 28, 36],
-        "around": [0, 3, 11, 12, 26, 29, 36],
-        "space": [0, 3, 5, 9, 11, 13, 16, 20, 24, 29, 35],
+        "nz": [0, 11, 12, 32, 38, 39],
+        "2": [0, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39, 41],
+        "move": [0, 3, 6, 9, 10, 11, 12, 13, 15, 16, 28, 31, 39],
+        "around": [0, 11, 12, 13, 29, 32, 39],
+        "space": [0, 5, 9, 11, 12, 14, 17, 23, 27, 32, 38],
         "28432": 0,
-        "dec": [0, 3, 11, 14, 29, 36],
-        "h": [0, 3, 5, 6, 9, 11, 12, 13, 14, 15, 18, 20, 22, 23, 24, 26, 28, 29, 31, 36],
-        "OR": [0, 15, 36],
+        "dec": [0, 3, 11, 12, 15, 32, 39],
+        "h": [0, 3, 5, 6, 9, 11, 12, 13, 14, 15, 16, 19, 23, 25, 26, 27, 29, 31, 32, 34, 39],
+        "OR": [0, 16, 39],
         "28433": 0,
-        "jp": [0, 3, 5, 11, 12, 13, 19, 29, 34, 35, 38],
+        "jp": [0, 5, 11, 12, 13, 14, 20, 32, 37, 38, 41],
         "29712": 0,
-        "check": [0, 13],
-        "hold": [0, 11, 16, 18],
-        "3": [0, 2, 11, 12, 13, 14, 15, 18, 19, 20, 24, 25, 27, 29, 31, 34, 35, 36, 37, 38],
-        "recognis": [0, 2, 4, 11, 12, 18, 20, 22, 23, 24, 26, 27, 28, 29, 31, 34, 36],
-        "skoolkit": [0, 2, 3, 11, 14, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36],
-        "control": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 17, 22, 24, 26, 27, 34, 36, 38],
-        "assembli": [0, 12, 13, 14, 16, 36, 38],
-        "languag": [0, 12, 13, 14, 16, 36, 38],
-        "defm": [0, 5, 6, 7, 9, 10, 11, 12, 13, 14, 16, 22, 26, 36],
-        "statement": [0, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 16, 22, 26, 36],
-        "convert": [0, 3, 5, 6, 7, 8, 9, 11, 12, 14, 15, 18, 19, 20, 21, 22, 23, 25, 26, 29, 34, 36, 38],
-        "byte": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 19, 25, 26, 27, 28, 29, 31, 34, 35, 36, 38],
-        "valu": [0, 1, 3, 6, 7, 8, 9, 10, 11, 12, 15, 16, 18, 19, 20, 22, 23, 24, 26, 27, 28, 29, 31, 32, 34, 35, 36, 38],
-        "popul": [0, 3, 9, 11, 29, 36],
-        "memori": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 18, 19, 21, 23, 24, 25, 26, 27, 29, 31, 34, 36, 38],
-        "snapshot": [0, 3, 5, 6, 7, 8, 9, 11, 14, 18, 19, 24, 25, 26, 27, 28, 29, 31, 32, 38],
-        "integ": [0, 3, 8, 9, 11, 12, 15, 20, 23, 32, 36],
-        "determin": [0, 10, 12, 15, 16, 34, 36],
-        "what": [0, 6, 9, 13, 14, 17, 36],
-        "html": [0, 3, 5, 6, 7, 8, 9, 11, 14, 17, 23, 34, 35, 38],
-        "do": [0, 11, 13, 14, 15, 18, 25, 28, 29, 31, 35],
-        "anyth": [0, 13, 14],
-        "onli": [0, 6, 11, 12, 13, 14, 15, 16, 18, 19, 20, 22, 23, 24, 28, 29, 32, 33, 34, 36],
-        "both": [0, 6, 11, 12, 13, 14, 15, 20, 25, 36, 38],
-        "If": [0, 2, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 23, 24, 26, 27, 29, 31, 32, 34, 35, 36, 37],
-        "blank": [0, 5, 6, 8, 9, 11, 12, 13, 15, 16, 20, 31, 32, 34, 35, 36],
-        "omit": [0, 5, 11, 13, 25, 29, 31, 33, 34, 36],
-        "its": [0, 1, 3, 5, 6, 8, 9, 11, 12, 13, 14, 16, 32, 33, 34, 35, 36],
-        "left": [0, 5, 6, 8, 9, 11, 13, 14, 15, 25, 31, 34, 36],
-        "unchang": [0, 4, 36],
-        "note": [0, 11, 12, 13, 14, 15, 16, 29, 34, 35, 36, 37],
-        "someth": [0, 11, 13, 14, 15, 19, 29, 33, 35],
-        "other": [0, 3, 5, 6, 9, 10, 11, 12, 13, 14, 15, 16, 20, 23, 25, 26, 29, 34, 35, 36, 38],
-        "than": [0, 3, 5, 6, 7, 11, 13, 14, 15, 18, 19, 20, 23, 29, 35, 36],
-        "affect": [0, 3, 12, 36],
-        "output": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16, 20, 21, 23, 24, 25, 26, 27, 29, 32, 33, 34, 35, 36],
-        "macro": [0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 20, 23, 25, 32, 33, 34, 35, 38],
-        "inspect": [0, 15],
-        "oper": [0, 1, 2, 3, 6, 7, 9, 11, 12, 15, 16, 18, 19, 25, 28, 31, 36],
-        "content": [0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 15, 16, 18, 19, 27, 28, 29, 30, 31, 36, 38],
-        "audio": [0, 3, 11, 23, 31, 34, 38],
-        "font": [0, 3, 5, 6, 7, 9, 11, 23, 25, 34],
-        "peek": [0, 3, 8, 9, 11, 12, 27],
-        "scr": [0, 3, 5, 6, 7, 8, 9, 11, 19, 25, 34, 38],
-        "sim": [0, 3, 11, 29, 32],
-        "str": [0, 3],
-        "tstate": [0, 3, 11, 13, 18, 28, 29, 31],
-        "udg": [0, 3, 5, 6, 7, 8, 9, 11, 15, 25, 34],
-        "udgarrai": [0, 3, 5, 6, 7, 8, 9, 10, 11, 15, 25, 34],
-        "version": [0, 1, 2, 5, 7, 9, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 38],
-        "9": [0, 9, 11, 13, 15, 29, 32, 34, 36],
-        "previous": [0, 15, 36],
-        "7": [0, 1, 9, 11, 12, 13, 15, 16, 18, 19, 21, 24, 26, 27, 29, 34, 35, 36],
-        "accept": [0, 3, 6, 8, 9, 11, 12, 15, 36],
-        "6": [0, 11, 13, 15, 16, 18, 19, 29, 34, 36],
-        "ad": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 19, 29, 34, 35, 36],
-        "support": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 17, 24, 32, 34, 35, 36],
-        "specifi": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 23, 24, 26, 27, 29, 31, 32, 34, 35, 36],
-        "separ": [0, 1, 3, 5, 7, 8, 9, 11, 12, 13, 15, 16, 20, 23, 29, 31, 34, 35, 36, 38],
-        "switch": [0, 3, 36],
-        "off": [0, 36],
-        "convers": [0, 2, 3, 7, 8, 10, 11, 12, 15, 19, 20],
-        "entir": [0, 3, 7, 10, 11, 13, 15, 16, 20, 23, 30, 36],
-        "abil": [0, 3, 5, 7, 8, 9, 10, 11, 12, 34, 35, 36],
-        "whose": [0, 3, 9, 11, 12, 13, 14, 15, 16, 23, 26, 27, 29, 34, 36],
-        "arithmet": [0, 8, 9, 11, 15, 36],
-        "express": [0, 3, 6, 8, 9, 11, 12, 13, 15, 16, 36],
-        "5": [0, 2, 11, 12, 13, 15, 16, 19, 27, 29, 34, 36],
-        "either": [0, 1, 9, 11, 12, 13, 14, 15, 29, 31, 33, 34, 35, 36, 38],
-        "ram": [0, 3, 7, 8, 9, 11, 12, 18, 19, 21, 27, 28, 29, 31, 32, 34, 36],
-        "map": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 18, 20, 23, 24, 26, 27, 34, 38],
-        "49152": [0, 3, 11, 12, 13, 18, 19, 24, 26, 27, 29, 31, 36],
-        "65535": [0, 3, 5, 6, 9, 11, 12, 13, 14, 15, 18, 24, 26, 27, 29, 36],
-        "0xc000": [0, 11, 18, 19, 29, 36],
-        "0xffff": [0, 36],
-        "page": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 18, 23, 24, 26, 27, 36, 38],
-        "specif": [0, 3, 7, 8, 9, 11, 13, 15, 29, 34, 36],
-        "anoth": [0, 3, 9, 11, 12, 13, 14, 15, 16, 29, 34, 35, 36],
-        "fname": [0, 9, 12, 15, 34, 36],
-        "name": [0, 1, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 34, 35, 36],
-        "first": [0, 2, 3, 5, 7, 8, 10, 11, 12, 13, 14, 15, 16, 20, 23, 27, 29, 32, 33, 34, 35, 36],
-        "48k": [0, 3, 6, 8, 11, 12, 15, 18, 19, 29, 31, 32, 34, 36, 38],
-        "128k": [0, 3, 6, 11, 12, 15, 18, 21, 24, 26, 27, 28, 29, 31, 32, 34, 36, 38],
-        "load": [0, 2, 3, 5, 7, 8, 14, 18, 19, 30, 31, 32, 36],
-        "comment": [0, 3, 4, 5, 6, 7, 9, 10, 11, 14, 16, 20, 22, 26, 36],
-        "addr1": [0, 13, 34],
-        "addr2": [0, 13, 34],
-        "marker": [0, 10, 35, 36],
-        "present": [0, 3, 9, 10, 11, 14, 20, 22, 23, 24, 26, 27, 29, 31, 34, 36],
-        "current": [0, 3, 9, 10, 11, 12, 15, 16, 20, 22, 23, 24, 26, 27, 29, 31, 36, 37],
-        "instead": [0, 3, 4, 5, 6, 8, 11, 13, 14, 15, 26, 29, 32, 34, 36],
-        "overwrit": [0, 3, 5, 10, 11, 19, 23, 32],
-        "overlap": [0, 11, 19],
+        "check": [0, 14],
+        "hold": [0, 12, 17, 19],
+        "3": [0, 2, 3, 12, 13, 14, 15, 16, 19, 20, 23, 27, 28, 30, 32, 34, 37, 38, 39, 40, 41],
+        "recognis": [0, 2, 4, 12, 13, 19, 23, 25, 26, 27, 29, 30, 31, 32, 34, 37, 39],
+        "skoolkit": [0, 2, 3, 12, 15, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39],
+        "control": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 18, 22, 25, 27, 29, 30, 37, 39, 41],
+        "assembli": [0, 13, 14, 15, 17, 39, 41],
+        "languag": [0, 13, 14, 15, 17, 39, 41],
+        "defm": [0, 5, 6, 7, 9, 10, 12, 13, 14, 15, 17, 25, 29, 39],
+        "statement": [0, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 17, 25, 29, 39],
+        "convert": [0, 5, 6, 7, 8, 9, 11, 12, 13, 15, 16, 19, 20, 23, 24, 25, 26, 28, 29, 32, 37, 39, 41],
+        "byte": [0, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 20, 28, 29, 30, 31, 32, 34, 37, 38, 39, 41],
+        "valu": [0, 1, 3, 6, 7, 8, 9, 10, 11, 12, 13, 16, 17, 19, 20, 22, 23, 25, 26, 27, 29, 30, 31, 32, 34, 35, 37, 38, 39, 41],
+        "popul": [0, 3, 9, 12, 32, 39],
+        "memori": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 19, 20, 24, 26, 27, 28, 29, 30, 32, 34, 37, 39, 41],
+        "snapshot": [0, 3, 5, 6, 7, 8, 9, 11, 12, 15, 19, 20, 21, 22, 27, 28, 29, 30, 31, 32, 34, 35, 41],
+        "integ": [0, 8, 9, 11, 12, 13, 16, 23, 26, 35, 39],
+        "determin": [0, 10, 13, 16, 17, 37, 39],
+        "what": [0, 6, 9, 14, 15, 18, 39],
+        "html": [0, 5, 6, 7, 8, 9, 11, 12, 15, 18, 26, 37, 38, 41],
+        "do": [0, 12, 14, 15, 16, 19, 22, 28, 31, 32, 34, 38],
+        "anyth": [0, 14, 15],
+        "onli": [0, 6, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 25, 26, 27, 31, 32, 35, 36, 37, 39],
+        "both": [0, 6, 12, 13, 14, 15, 16, 23, 28, 39, 41],
+        "If": [0, 2, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 24, 26, 27, 29, 30, 32, 34, 35, 37, 38, 39, 40],
+        "blank": [0, 5, 6, 8, 9, 12, 13, 14, 16, 17, 23, 34, 35, 37, 38, 39],
+        "omit": [0, 5, 12, 14, 28, 32, 34, 36, 37, 39],
+        "its": [0, 1, 3, 5, 6, 8, 9, 11, 12, 13, 14, 15, 17, 35, 36, 37, 38, 39],
+        "left": [0, 5, 6, 8, 9, 12, 14, 15, 16, 28, 34, 37, 39],
+        "unchang": [0, 4, 39],
+        "note": [0, 12, 13, 14, 15, 16, 17, 32, 37, 38, 39, 40],
+        "someth": [0, 12, 14, 15, 16, 20, 32, 36, 38],
+        "other": [0, 5, 6, 9, 10, 11, 12, 13, 14, 15, 16, 17, 23, 26, 28, 29, 32, 37, 38, 39, 41],
+        "than": [0, 5, 6, 7, 11, 12, 14, 15, 16, 19, 20, 23, 26, 32, 38, 39],
+        "affect": [0, 11, 13, 39],
+        "output": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 17, 23, 24, 26, 27, 28, 29, 30, 32, 35, 36, 37, 38, 39],
+        "macro": [0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 23, 26, 28, 35, 36, 37, 38, 41],
+        "inspect": [0, 16],
+        "oper": [0, 1, 2, 6, 7, 9, 11, 12, 13, 16, 17, 19, 20, 28, 31, 34, 39],
+        "content": [0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 20, 21, 22, 30, 31, 32, 33, 34, 39, 41],
+        "audio": [0, 3, 11, 12, 26, 34, 37, 41],
+        "font": [0, 3, 5, 6, 7, 9, 11, 12, 26, 28, 37],
+        "peek": [0, 8, 9, 11, 12, 13, 30],
+        "scr": [0, 3, 5, 6, 7, 8, 9, 11, 12, 20, 28, 37, 41],
+        "sim": [0, 3, 11, 12, 32, 35],
+        "str": [0, 11],
+        "tstate": [0, 3, 11, 12, 14, 19, 31, 32, 34],
+        "udg": [0, 3, 5, 6, 7, 8, 9, 11, 12, 16, 28, 37],
+        "udgarrai": [0, 5, 6, 7, 8, 9, 10, 11, 12, 16, 28, 37],
+        "version": [0, 1, 2, 5, 7, 9, 12, 13, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 36, 37, 38, 40, 41],
+        "9": [0, 9, 12, 14, 16, 32, 35, 37, 39],
+        "previous": [0, 16, 39],
+        "7": [0, 1, 3, 9, 12, 13, 14, 16, 17, 19, 20, 24, 27, 29, 30, 32, 37, 38, 39],
+        "accept": [0, 3, 6, 8, 9, 11, 12, 13, 16, 22, 39],
+        "6": [0, 3, 12, 14, 16, 17, 19, 20, 32, 37, 39],
+        "ad": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 20, 32, 37, 38, 39],
+        "support": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 18, 27, 35, 37, 38, 39],
+        "specifi": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 23, 26, 27, 29, 30, 32, 34, 35, 37, 38, 39],
+        "separ": [0, 1, 5, 7, 8, 9, 11, 12, 13, 14, 16, 17, 23, 26, 32, 34, 37, 38, 39, 41],
+        "switch": [0, 3, 39],
+        "off": [0, 39],
+        "convers": [0, 2, 7, 8, 10, 11, 12, 13, 16, 20, 23],
+        "entir": [0, 7, 10, 11, 12, 14, 16, 17, 23, 26, 33, 39],
+        "abil": [0, 5, 7, 8, 9, 10, 11, 12, 13, 37, 38, 39],
+        "whose": [0, 9, 11, 12, 13, 14, 15, 16, 17, 26, 29, 30, 32, 37, 39],
+        "arithmet": [0, 8, 9, 12, 16, 39],
+        "express": [0, 6, 8, 9, 11, 12, 13, 14, 16, 17, 39],
+        "5": [0, 2, 3, 12, 13, 14, 16, 17, 20, 30, 32, 37, 39],
+        "either": [0, 1, 9, 12, 13, 14, 15, 16, 22, 32, 34, 36, 37, 38, 39, 41],
+        "ram": [0, 3, 7, 8, 9, 11, 12, 13, 19, 20, 24, 30, 31, 32, 34, 35, 37, 39],
+        "map": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 17, 19, 23, 26, 27, 29, 30, 37, 41],
+        "49152": [0, 3, 11, 12, 13, 14, 19, 20, 27, 29, 30, 32, 34, 39],
+        "65535": [0, 3, 5, 6, 9, 11, 12, 13, 14, 15, 16, 19, 27, 29, 30, 32, 39],
+        "0xc000": [0, 12, 19, 20, 32, 39],
+        "0xffff": [0, 39],
+        "page": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 19, 26, 27, 29, 30, 39, 41],
+        "specif": [0, 7, 8, 9, 11, 12, 14, 16, 32, 37, 39],
+        "anoth": [0, 3, 9, 11, 12, 13, 14, 15, 16, 17, 32, 37, 38, 39],
+        "fname": [0, 9, 13, 16, 37, 39],
+        "name": [0, 1, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 37, 38, 39],
+        "first": [0, 2, 3, 5, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 22, 23, 26, 30, 32, 35, 36, 37, 38, 39, 40],
+        "48k": [0, 3, 6, 8, 11, 12, 13, 16, 19, 20, 22, 32, 34, 35, 37, 39, 41],
+        "128k": [0, 3, 6, 11, 12, 13, 16, 19, 22, 24, 27, 29, 30, 31, 32, 34, 35, 37, 39, 41],
+        "load": [0, 2, 3, 5, 7, 8, 11, 15, 19, 20, 33, 34, 35, 39],
+        "comment": [0, 4, 5, 6, 7, 9, 10, 11, 12, 15, 17, 23, 25, 29, 39],
+        "addr1": [0, 14, 37],
+        "addr2": [0, 14, 37],
+        "marker": [0, 10, 38, 39],
+        "present": [0, 3, 9, 10, 12, 15, 23, 25, 26, 27, 29, 30, 32, 34, 37, 39],
+        "current": [0, 3, 9, 10, 11, 12, 13, 16, 17, 23, 25, 26, 27, 29, 30, 32, 34, 39, 40],
+        "instead": [0, 4, 5, 6, 8, 11, 12, 14, 15, 16, 29, 32, 35, 37, 39],
+        "overwrit": [0, 3, 5, 10, 11, 12, 20, 26, 35],
+        "overlap": [0, 12, 20],
         "push": [0, 6],
-        "them": [0, 3, 5, 10, 11, 12, 14, 15, 20, 23, 29, 34, 35, 36, 38],
+        "them": [0, 5, 10, 11, 12, 13, 15, 16, 23, 26, 32, 37, 38, 39, 40, 41],
         "asid": 0,
-        "after": [0, 2, 3, 5, 7, 10, 11, 12, 13, 15, 19, 20, 29, 31, 32, 33, 34, 35, 36],
-        "remain": [0, 13, 29, 34, 36],
-        "line": [0, 1, 3, 5, 6, 7, 9, 10, 11, 13, 14, 15, 16, 20, 22, 23, 24, 26, 27, 29, 31, 33, 34, 36],
-        "given": [0, 3, 10, 11, 13, 16, 18, 19, 21, 25, 28, 29, 31, 32, 34, 35, 36, 38],
-        "last": [0, 3, 4, 5, 7, 11, 13, 15, 18, 19, 28, 29, 35, 36],
+        "after": [0, 2, 5, 7, 10, 11, 12, 13, 14, 16, 20, 22, 23, 32, 34, 35, 36, 37, 38, 39],
+        "remain": [0, 14, 32, 37, 39],
+        "line": [0, 1, 3, 5, 6, 7, 9, 10, 11, 12, 14, 15, 16, 17, 23, 25, 26, 27, 29, 30, 32, 34, 36, 37, 39],
+        "given": [0, 10, 11, 12, 14, 17, 19, 20, 22, 24, 28, 31, 32, 34, 35, 37, 38, 39, 41],
+        "last": [0, 3, 4, 5, 7, 12, 14, 16, 19, 20, 22, 31, 32, 38, 39],
         "cmask": 0,
         "bmask": 0,
-        "AND": [0, 15, 36],
-        "appli": [0, 3, 6, 7, 9, 11, 12, 13, 15, 16, 20, 21, 35, 36],
-        "mask": [0, 5, 7, 9, 15],
+        "AND": [0, 16, 39],
+        "appli": [0, 6, 7, 9, 11, 12, 13, 14, 16, 17, 23, 24, 38, 39],
+        "mask": [0, 5, 7, 9, 16],
         "29713": 0,
-        "c": [0, 5, 6, 11, 12, 14, 16, 18, 19, 20, 22, 23, 25, 26, 27, 28, 29, 31, 34, 35, 36],
-        "continu": [0, 1, 11, 13, 14, 29],
-        "can": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 20, 23, 29, 32, 34, 35, 36, 37, 38],
-        "us": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 38],
-        "addit": [0, 4, 5, 9, 11, 13, 14, 15, 16, 32, 34, 35, 36],
-        "ha": [0, 3, 6, 7, 10, 11, 12, 13, 14, 15, 16, 20, 29, 31, 32, 33, 34, 35, 36, 37],
-        "second": [0, 3, 9, 11, 13, 14, 15, 20, 23, 29, 30, 33, 34, 35, 36],
-        "To": [0, 1, 11, 12, 13, 14, 15, 16, 18, 19, 23, 28, 29, 31, 34, 35, 36],
-        "add": [0, 4, 6, 7, 10, 11, 13, 14, 15, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 34, 36, 38],
-        "one": [0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 24, 26, 29, 31, 33, 34, 35, 36, 37],
-        "effect": [0, 7, 11, 14, 16, 31, 33, 34, 36, 38],
-        "termin": [0, 6, 7, 8, 11, 13, 15, 20, 35, 36, 37],
-        "singl": [0, 3, 6, 7, 8, 10, 11, 13, 14, 15, 16, 19, 23, 29, 33, 34, 35, 36],
-        "more": [0, 3, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 22, 23, 26, 28, 29, 31, 32, 34, 35, 36, 38],
-        "clear": [0, 7, 11, 19, 29, 36],
+        "c": [0, 3, 5, 6, 12, 13, 15, 17, 19, 20, 22, 23, 25, 26, 28, 29, 30, 31, 32, 34, 37, 38, 39],
+        "continu": [0, 1, 12, 14, 15, 32],
+        "can": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 22, 23, 26, 32, 35, 37, 38, 39, 40, 41],
+        "us": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 41],
+        "addit": [0, 4, 5, 9, 12, 14, 15, 16, 17, 35, 37, 38, 39],
+        "ha": [0, 3, 6, 7, 10, 11, 12, 13, 14, 15, 16, 17, 22, 23, 32, 34, 35, 36, 37, 38, 39, 40],
+        "second": [0, 9, 11, 12, 14, 15, 16, 22, 23, 26, 32, 33, 36, 37, 38, 39],
+        "To": [0, 1, 12, 13, 14, 15, 16, 17, 19, 20, 22, 26, 31, 32, 34, 37, 38, 39, 40],
+        "add": [0, 4, 6, 7, 10, 12, 14, 15, 16, 19, 20, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 39, 41],
+        "one": [0, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 22, 23, 25, 26, 27, 29, 32, 34, 36, 37, 38, 39, 40],
+        "effect": [0, 7, 12, 15, 17, 34, 36, 37, 39, 41],
+        "termin": [0, 6, 7, 8, 12, 14, 16, 23, 38, 39, 40],
+        "singl": [0, 6, 7, 8, 10, 11, 12, 14, 15, 16, 17, 20, 26, 32, 36, 37, 38, 39],
+        "more": [0, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 22, 25, 26, 29, 31, 32, 34, 35, 37, 38, 39, 41],
+        "clear": [0, 7, 12, 20, 32, 39],
         "36671": 0,
         "49912": 0,
         "49913": 0,
-        "sequenc": [0, 3, 5, 6, 9, 10, 11, 12, 13, 15, 27, 29, 31, 34, 35, 36, 38],
+        "sequenc": [0, 5, 6, 9, 10, 11, 12, 13, 14, 16, 30, 32, 34, 37, 38, 39, 41],
         "chain": 0,
         "swap": 0,
         "51121": 0,
         "51122": 0,
-        "equival": [0, 13, 18, 29, 36],
-        "like": [0, 9, 11, 13, 14, 15, 29, 34, 36, 37],
-        "subsequ": [0, 3, 11, 29, 35, 36],
+        "equival": [0, 14, 19, 32, 39],
+        "like": [0, 9, 12, 14, 15, 16, 32, 37, 39, 40],
+        "subsequ": [0, 11, 12, 32, 38, 39],
         "entireti": 0,
-        "d": [0, 3, 5, 6, 11, 12, 14, 15, 18, 20, 21, 22, 23, 26, 28, 29, 30, 31, 35],
-        "flip": [0, 3, 5, 11, 15, 18, 25, 28, 29, 36],
-        "bit": [0, 3, 7, 10, 11, 13, 25, 29, 36],
-        "accumul": [0, 13, 36],
-        "regist": [0, 2, 3, 4, 6, 7, 8, 9, 10, 11, 15, 16, 22, 27, 34, 35, 36, 38],
+        "d": [0, 5, 6, 11, 12, 13, 15, 16, 19, 23, 24, 25, 26, 29, 31, 32, 33, 34, 38],
+        "flip": [0, 5, 11, 12, 16, 19, 28, 31, 32, 39],
+        "bit": [0, 3, 7, 10, 11, 12, 14, 22, 28, 32, 39],
+        "accumul": [0, 14, 39],
+        "regist": [0, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 16, 17, 22, 25, 30, 37, 38, 39, 41],
         "47191": 0,
         "ex": 0,
-        "de": [0, 3, 11, 13, 18, 28, 29, 31, 36],
-        "mid": [0, 1, 5, 11, 16, 22, 35, 36],
+        "de": [0, 3, 12, 14, 19, 31, 32, 34, 39],
+        "mid": [0, 1, 5, 12, 17, 25, 38, 39],
         "47192": 0,
-        "between": [0, 1, 3, 9, 11, 13, 15, 16, 27, 29, 31, 33, 34, 35, 36, 38],
-        "wa": [0, 4, 5, 11, 12, 13, 14, 15, 29, 31, 32, 36],
-        "abov": [0, 4, 11, 13, 19, 29, 34, 35, 36],
-        "case": [0, 1, 2, 3, 5, 6, 7, 9, 10, 11, 12, 13, 16, 20, 22, 23, 24, 26, 29, 33, 34, 36],
-        "save": [0, 5, 11, 14, 15, 29, 36],
-        "here": [0, 7, 8, 13, 14, 16, 34, 36, 37],
+        "between": [0, 1, 9, 11, 12, 14, 16, 17, 30, 32, 34, 36, 37, 38, 39, 41],
+        "wa": [0, 4, 5, 12, 13, 14, 15, 16, 32, 34, 35, 39, 40],
+        "abov": [0, 4, 12, 14, 20, 32, 37, 38, 39],
+        "case": [0, 1, 2, 5, 6, 7, 9, 10, 11, 12, 13, 14, 17, 23, 25, 26, 27, 29, 32, 36, 37, 39],
+        "save": [0, 5, 12, 15, 16, 32, 39],
+        "here": [0, 7, 8, 14, 15, 17, 37, 39, 40],
         "61125": 0,
         "61126": 0,
-        "ret": [0, 5, 11, 13, 36],
-        "notat": [0, 2, 5, 6, 13, 14, 16, 23, 35, 36],
+        "ret": [0, 5, 12, 14, 39],
+        "notat": [0, 2, 5, 6, 14, 15, 17, 26, 38, 39],
         "51184": 0,
         "51185": 0,
         "redund": [0, 5, 6],
         "51186": 0,
-        "rang": [0, 3, 6, 9, 11, 12, 13, 14, 19, 27, 29, 34, 36],
-        "cover": [0, 9, 10, 13],
-        "everi": [0, 6, 7, 9, 10, 11, 12, 13, 16, 34, 36],
-        "unus": [0, 3, 11, 13, 26, 34, 35],
-        "40000": [0, 9, 11, 13, 29, 36],
-        "40001": [0, 11],
-        "c40000": [0, 36],
+        "rang": [0, 6, 9, 11, 12, 13, 14, 15, 20, 30, 32, 37, 39],
+        "cover": [0, 9, 10, 14],
+        "everi": [0, 6, 7, 9, 10, 12, 13, 14, 17, 21, 22, 37, 39],
+        "unus": [0, 11, 12, 14, 29, 37, 38],
+        "40000": [0, 9, 12, 14, 32, 39],
+        "40001": [0, 12],
+        "c40000": [0, 39],
         "nop": 0,
-        "over": [0, 3, 6, 7, 10, 13, 15, 16, 34, 35],
-        "multipl": [0, 3, 5, 6, 7, 9, 10, 11, 13, 18, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 34, 35, 36],
-        "4": [0, 11, 13, 15, 16, 19, 29, 34, 35, 36],
-        "defin": [0, 1, 3, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16, 20, 23, 26, 33, 34],
-        "syntax": [0, 4, 5, 14, 29, 35],
-        "out": [0, 8, 14, 18, 28, 29, 32, 36],
-        "otherwis": [0, 1, 11, 12, 13, 14, 15, 16, 18, 29, 34, 36],
-        "typic": [0, 13, 15, 16, 34, 35],
-        "though": [0, 13, 14],
-        "desir": [0, 11, 12, 13, 29, 36],
-        "right": [0, 16, 34, 36],
-        "next": [0, 3, 9, 10, 11, 13, 14, 15, 16, 29, 36],
-        "place": [0, 6, 7, 9, 11, 13, 14, 15, 19, 29, 34, 35, 36, 38],
-        "That": [0, 13, 14],
-        "done": [0, 6, 7, 13, 14, 15, 33, 36],
-        "thu": [0, 2, 5, 11, 13, 14, 15, 23, 34, 35, 36],
-        "skool2html": [0, 3, 4, 5, 6, 7, 8, 9, 10, 14, 15, 16, 33, 34, 35, 36, 38],
-        "value1": [0, 15],
-        "value2": [0, 15],
-        "etc": [0, 3, 11, 15, 16, 20, 23, 27, 29, 34, 36],
-        "might": [0, 14, 15, 32, 34, 36],
-        "appear": [0, 3, 6, 7, 9, 11, 12, 13, 14, 15, 16, 20, 22, 23, 24, 26, 27, 29, 31, 34, 35, 36],
-        "immedi": [0, 15, 36],
-        "previou": [0, 16, 35, 36],
-        "preced": [0, 6, 12, 34, 35, 36],
-        "same": [0, 3, 4, 6, 7, 8, 11, 12, 13, 14, 16, 29, 34, 35, 36],
-        "comma": [0, 3, 9, 11, 12, 13, 15, 19, 23, 29, 31, 34, 36],
-        "semicolon": [0, 5, 7, 9, 10, 11, 13, 26, 34, 36],
-        "arbitrari": [0, 3, 6, 8, 11, 15, 16, 29, 34, 35, 36, 38],
-        "text": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 20, 24, 26, 27, 33, 34, 35, 36, 38],
-        "ignor": [0, 3, 7, 10, 11, 13, 14, 20, 25, 26, 29, 33, 34, 35, 36],
-        "30000": [0, 7, 9, 11, 13, 29, 34, 36],
-        "hello": [0, 36],
+        "over": [0, 6, 7, 10, 11, 14, 16, 17, 37, 38],
+        "multipl": [0, 5, 6, 7, 9, 10, 11, 12, 14, 19, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 38, 39],
+        "4": [0, 3, 12, 14, 16, 17, 20, 22, 32, 37, 38, 39],
+        "defin": [0, 1, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16, 17, 23, 26, 29, 36, 37],
+        "syntax": [0, 4, 5, 15, 32, 38],
+        "out": [0, 8, 15, 19, 31, 32, 35, 39],
+        "otherwis": [0, 1, 12, 13, 14, 15, 16, 17, 19, 22, 32, 37, 39],
+        "typic": [0, 14, 16, 17, 37, 38],
+        "though": [0, 14, 15],
+        "desir": [0, 12, 13, 14, 22, 32, 39],
+        "right": [0, 17, 37, 39],
+        "next": [0, 9, 10, 11, 12, 14, 15, 16, 17, 22, 32, 39],
+        "place": [0, 6, 7, 9, 12, 14, 15, 16, 20, 32, 37, 38, 39, 41],
+        "That": [0, 14, 15],
+        "done": [0, 6, 7, 14, 15, 16, 36, 39],
+        "thu": [0, 2, 5, 12, 14, 15, 16, 26, 37, 38, 39],
+        "skool2html": [0, 4, 5, 6, 7, 8, 9, 10, 11, 15, 16, 17, 36, 37, 38, 39, 41],
+        "value1": [0, 16],
+        "value2": [0, 16],
+        "etc": [0, 3, 12, 16, 17, 23, 26, 30, 32, 37, 39],
+        "might": [0, 15, 16, 35, 37, 39],
+        "appear": [0, 6, 7, 9, 11, 12, 13, 14, 15, 16, 17, 23, 25, 26, 27, 29, 30, 32, 34, 37, 38, 39],
+        "immedi": [0, 12, 16, 22, 39],
+        "previou": [0, 17, 38, 39],
+        "preced": [0, 6, 13, 37, 38, 39],
+        "same": [0, 4, 6, 7, 8, 11, 12, 13, 14, 15, 17, 32, 37, 38, 39],
+        "comma": [0, 9, 11, 12, 13, 14, 16, 20, 26, 32, 34, 37, 39],
+        "semicolon": [0, 5, 7, 9, 10, 12, 14, 29, 37, 39],
+        "arbitrari": [0, 6, 8, 11, 12, 16, 17, 32, 37, 38, 39, 41],
+        "text": [0, 1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 23, 27, 29, 30, 36, 37, 38, 39, 41],
+        "ignor": [0, 7, 10, 11, 12, 14, 15, 23, 28, 29, 32, 36, 37, 38, 39],
+        "30000": [0, 7, 9, 12, 14, 32, 37, 39],
+        "hello": [0, 39],
         "welcom": 0,
-        "messag": [0, 11, 12, 13, 20, 26, 34, 36],
-        "ascii": [0, 4, 11, 26],
-        "charact": [0, 2, 3, 6, 7, 9, 10, 11, 12, 13, 15, 16, 20, 22, 24, 26, 29, 31, 34, 36],
-        "sna2skool": [0, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 36, 38],
-        "overrid": [0, 3, 11, 15, 19, 20, 22, 23, 24, 26, 27, 29, 31],
-        "read": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 18, 19, 20, 22, 23, 24, 25, 26, 27, 31, 33, 34, 36],
-        "skool2bin": [0, 3, 8, 10, 38],
-        "8": [0, 1, 2, 7, 8, 11, 12, 13, 15, 16, 17, 26, 29, 34, 35, 36, 37],
-        "paramet": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 20, 22, 23, 24, 25, 26, 27, 29, 31, 32, 34, 35],
-        "length": [0, 1, 2, 3, 5, 6, 7, 9, 10, 11, 12, 15, 16, 18, 19, 24, 25, 26, 27, 29, 31, 34, 36],
-        "ff": [0, 11, 29],
-        "five": [0, 7, 13],
-        "255": [0, 15, 34, 36],
-        "30004": [0, 13],
-        "word": [0, 3, 9, 10, 11, 12, 13, 24, 26, 27, 29, 31, 35, 36],
-        "32768": [0, 5, 6, 9, 11, 13, 18, 19, 28, 29, 31, 32, 34, 35, 36],
-        "32775": [0, 36],
-        "30002": [0, 13, 29],
-        "indic": [0, 9, 12, 13, 14, 34, 35, 36],
-        "stop": [0, 3, 7, 11, 20, 21, 22, 24, 26, 29, 31, 32, 36],
-        "gener": [0, 2, 3, 4, 5, 6, 7, 9, 10, 11, 15, 24, 26, 27, 29, 34, 35, 38],
-        "everyth": [0, 13, 14, 16, 34],
-        "see": [0, 11, 13, 14, 15, 16, 18, 20, 22, 23, 24, 26, 27, 28, 29, 31, 34, 35, 36, 38],
-        "assign": [0, 36],
-        "attr": [0, 15, 34, 36],
-        "22528": [0, 15, 36],
-        "c32768": [0, 35, 36],
-        "piec": [0, 3, 14, 36, 38],
-        "intend": [0, 23, 34, 36],
-        "consist": [0, 12, 13, 32, 34, 36],
-        "smpl": [0, 11, 34],
-        "initialis": [0, 3, 11, 12, 29, 36],
-        "annot": [0, 6, 8, 14, 16, 34, 38],
-        "section": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 18, 20, 22, 23, 24, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 38],
-        "max": [0, 11, 31, 36],
-        "IF": [0, 8, 9, 13, 20, 23, 32, 34],
-        "expans": [0, 7, 9, 34],
-        "user": [0, 9, 11, 29],
-        "avail": [0, 1, 3, 5, 9, 11, 12, 16, 29, 32, 34, 36, 37],
-        "anywher": [0, 36],
-        "secondari": [0, 6, 34],
-        "append": [0, 8, 10, 11, 13, 15, 20, 29, 35, 36],
-        "enabl": [0, 3, 6, 8, 11, 18, 19, 28, 29, 32, 34, 36, 38],
-        "long": [0, 6, 11, 13, 15, 19, 29, 34, 35, 36],
-        "definit": [0, 34, 36],
-        "split": [0, 5, 7, 9, 11, 12, 13, 14, 34, 35, 36],
+        "messag": [0, 12, 13, 14, 23, 29, 37, 39],
+        "ascii": [0, 4, 12, 29],
+        "charact": [0, 2, 3, 6, 7, 9, 10, 11, 12, 13, 14, 16, 17, 23, 25, 27, 29, 32, 34, 37, 39],
+        "sna2skool": [0, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 39, 41],
+        "overrid": [0, 11, 12, 16, 20, 23, 25, 26, 27, 29, 30, 32, 34],
+        "read": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 19, 20, 23, 25, 26, 27, 28, 29, 30, 34, 36, 37, 39],
+        "skool2bin": [0, 3, 8, 10, 11, 41],
+        "8": [0, 1, 2, 3, 7, 8, 12, 13, 14, 16, 17, 18, 29, 32, 37, 38, 39, 40],
+        "paramet": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 23, 25, 26, 27, 28, 29, 30, 32, 34, 35, 37, 38],
+        "length": [0, 1, 2, 5, 6, 7, 9, 10, 11, 12, 13, 16, 17, 19, 20, 27, 28, 29, 30, 32, 34, 37, 39],
+        "ff": [0, 12, 32],
+        "five": [0, 7, 14],
+        "255": [0, 16, 37, 39],
+        "30004": [0, 14],
+        "word": [0, 9, 10, 11, 12, 13, 14, 27, 29, 30, 32, 34, 38, 39],
+        "32768": [0, 5, 6, 9, 12, 14, 19, 20, 31, 32, 34, 35, 37, 38, 39],
+        "32775": [0, 39],
+        "30002": [0, 14, 32],
+        "indic": [0, 9, 12, 13, 14, 15, 22, 37, 38, 39],
+        "stop": [0, 3, 7, 11, 12, 22, 23, 24, 25, 27, 29, 32, 34, 35, 39],
+        "gener": [0, 2, 4, 5, 6, 7, 9, 10, 11, 12, 16, 27, 29, 30, 32, 37, 38, 41],
+        "everyth": [0, 14, 15, 17, 37],
+        "see": [0, 12, 14, 15, 16, 17, 19, 22, 23, 25, 26, 27, 29, 30, 31, 32, 34, 37, 38, 39, 40, 41],
+        "assign": [0, 39],
+        "attr": [0, 16, 37, 39],
+        "22528": [0, 16, 39],
+        "c32768": [0, 38, 39],
+        "piec": [0, 11, 15, 39, 41],
+        "intend": [0, 26, 37, 39],
+        "consist": [0, 13, 14, 35, 37, 39],
+        "smpl": [0, 12, 37],
+        "initialis": [0, 11, 12, 13, 32, 39],
+        "annot": [0, 6, 8, 15, 17, 37, 41],
+        "section": [0, 1, 2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 22, 23, 25, 26, 27, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 41],
+        "max": [0, 3, 12, 34, 39],
+        "IF": [0, 8, 9, 14, 23, 26, 35, 37],
+        "expans": [0, 7, 9, 37],
+        "user": [0, 9, 12, 32],
+        "avail": [0, 1, 3, 5, 9, 11, 12, 13, 17, 22, 32, 34, 35, 37, 39, 40],
+        "anywher": [0, 39],
+        "secondari": [0, 6, 37],
+        "append": [0, 8, 10, 12, 14, 16, 23, 32, 38, 39],
+        "enabl": [0, 3, 6, 8, 11, 12, 19, 20, 22, 31, 32, 35, 37, 39, 41],
+        "long": [0, 6, 12, 14, 16, 20, 32, 37, 38, 39],
+        "definit": [0, 37, 39],
+        "split": [0, 5, 7, 9, 12, 13, 14, 15, 37, 38, 39],
         "olist": 0,
-        "item": [0, 6, 9, 10, 12, 16, 20, 34, 36],
-        "let": [0, 3, 14, 15],
-        "n": [0, 3, 6, 7, 8, 9, 10, 11, 12, 18, 19, 20, 25, 27, 28, 29, 30, 31],
-        "list": [0, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 20, 23, 24, 26, 27, 29, 30, 31, 34, 35, 38],
-        "foreach": [0, 3, 8, 12],
-        "eval": [0, 3, 8, 9, 20, 23],
-        "creat": [0, 3, 5, 6, 7, 8, 9, 11, 14, 15, 16, 18, 19, 20, 23, 29, 33, 34, 36, 38],
-        "config": [0, 3, 6, 8, 9, 10, 11, 12, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 36],
-        "need": [0, 2, 11, 12, 13, 14, 15, 23, 34, 37],
-        "condition": [0, 9, 16],
-        "base": [0, 3, 6, 7, 9, 10, 11, 12, 20, 22, 23, 26, 29, 34, 36],
-        "expr": [0, 9, 16, 36],
-        "true": [0, 11, 12, 15, 16, 36],
-        "fals": [0, 3, 12, 15, 16, 36],
-        "field": [0, 1, 3, 4, 5, 9, 10, 11, 12, 14, 16, 20, 23, 26, 27, 29, 31, 32, 34, 35],
-        "numer": [0, 3, 6, 7, 8, 9, 10, 11, 12, 13, 15, 29, 31],
-        "detail": [0, 13, 15, 35, 36],
-        "would": [0, 11, 12, 13, 14, 15, 16, 29, 32, 36],
-        "lower": [0, 2, 3, 5, 6, 7, 9, 10, 11, 12, 15, 20, 22, 23, 24, 26, 34, 36],
-        "suppli": [0, 4, 10, 11, 12, 14, 29, 31, 34, 35, 36],
-        "wai": [0, 6, 8, 11, 13, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 33, 34, 35, 36, 37],
-        "thei": [0, 3, 5, 6, 7, 10, 11, 12, 13, 14, 15, 16, 19, 20, 23, 29, 33, 34, 36, 37],
-        "string": [0, 1, 3, 6, 8, 9, 10, 11, 12, 13, 15, 16, 20, 23, 24, 27, 29, 31, 34, 35],
-        "suppress": [0, 3, 5, 7, 11, 20, 21],
-        "warn": [0, 3, 5, 6, 7, 11, 12, 20, 21],
-        "print": [0, 3, 5, 11, 20, 36],
+        "item": [0, 6, 9, 10, 13, 17, 23, 37, 39],
+        "let": [0, 11, 15, 16],
+        "n": [0, 3, 6, 7, 8, 9, 10, 11, 12, 13, 19, 20, 23, 28, 30, 31, 32, 33, 34],
+        "list": [0, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 23, 26, 27, 29, 30, 32, 33, 34, 37, 38, 40, 41],
+        "foreach": [0, 8, 11, 13],
+        "eval": [0, 8, 9, 11, 23, 26],
+        "creat": [0, 3, 5, 6, 7, 8, 9, 11, 12, 15, 16, 17, 19, 20, 23, 26, 32, 36, 37, 39, 41],
+        "config": [0, 3, 6, 8, 9, 10, 11, 12, 13, 15, 16, 23, 25, 26, 27, 29, 30, 32, 34, 39],
+        "need": [0, 2, 12, 13, 14, 15, 16, 26, 37, 40],
+        "condition": [0, 9, 17],
+        "base": [0, 6, 7, 9, 10, 11, 12, 13, 23, 25, 26, 29, 32, 37, 39],
+        "expr": [0, 9, 17, 39],
+        "true": [0, 12, 13, 16, 17, 39],
+        "fals": [0, 11, 13, 16, 17, 39],
+        "field": [0, 1, 4, 5, 9, 10, 11, 12, 13, 15, 17, 23, 26, 29, 30, 32, 34, 35, 37, 38],
+        "numer": [0, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 32, 34],
+        "detail": [0, 14, 16, 38, 39],
+        "would": [0, 12, 13, 14, 15, 16, 17, 22, 32, 35, 39],
+        "lower": [0, 2, 5, 6, 7, 9, 10, 11, 12, 13, 16, 23, 25, 26, 27, 29, 37, 39],
+        "suppli": [0, 4, 10, 12, 13, 15, 32, 34, 37, 38, 39],
+        "wai": [0, 6, 8, 12, 14, 15, 16, 23, 25, 26, 27, 29, 30, 32, 34, 36, 37, 38, 39, 40],
+        "thei": [0, 5, 6, 7, 10, 11, 12, 13, 14, 15, 16, 17, 20, 22, 23, 26, 32, 36, 37, 39, 40],
+        "string": [0, 1, 6, 8, 9, 10, 11, 12, 13, 14, 16, 17, 23, 26, 27, 30, 32, 34, 37, 38],
+        "suppress": [0, 5, 7, 11, 12, 23, 24],
+        "warn": [0, 5, 6, 7, 11, 12, 13, 23, 24],
+        "print": [0, 5, 11, 12, 22, 23, 39],
         "concern": 0,
-        "titl": [0, 1, 3, 4, 5, 8, 9, 10, 11, 13, 14, 16, 22, 26, 35, 36],
-        "descript": [0, 1, 4, 5, 6, 7, 9, 10, 11, 14, 16, 34, 35, 36],
-        "level": [0, 5, 6, 7, 9, 11, 14, 16, 22, 33, 34, 35, 36],
-        "none": [0, 9, 11, 12, 13, 15, 16, 19, 20, 27, 29, 34],
-        "all": [0, 1, 3, 5, 8, 10, 11, 12, 13, 14, 15, 19, 22, 23, 29, 30, 31, 33, 34, 35, 36],
+        "titl": [0, 1, 4, 5, 8, 9, 10, 11, 12, 14, 15, 17, 25, 29, 38, 39],
+        "descript": [0, 1, 4, 5, 6, 7, 9, 10, 12, 15, 17, 37, 38, 39],
+        "level": [0, 5, 6, 7, 9, 12, 15, 17, 25, 36, 37, 38, 39],
+        "none": [0, 9, 12, 13, 14, 16, 17, 20, 23, 30, 32, 37],
+        "all": [0, 1, 3, 5, 8, 10, 11, 12, 13, 14, 15, 16, 20, 21, 25, 26, 32, 33, 34, 36, 37, 38, 39],
         "although": 0,
-        "so": [0, 3, 4, 5, 6, 7, 8, 9, 11, 13, 14, 15, 19, 33, 35, 36, 38],
-        "advantag": [0, 13, 36],
+        "so": [0, 4, 5, 6, 7, 8, 9, 11, 12, 14, 15, 16, 20, 36, 38, 39, 41],
+        "advantag": [0, 14, 39],
         "unconvert": [0, 7],
-        "later": [0, 9, 15, 33, 38],
-        "you": [0, 2, 11, 13, 14, 15, 16, 19, 23, 32, 34, 35, 36, 37, 38],
-        "decid": [0, 12],
+        "later": [0, 9, 16, 36, 41],
+        "you": [0, 2, 12, 14, 15, 16, 17, 20, 26, 35, 37, 38, 39, 40, 41],
+        "decid": [0, 13],
         "mistak": 0,
-        "prepar": [0, 36],
-        "were": [0, 4, 5, 11, 13, 15, 29, 36],
-        "about": [0, 7, 20, 36],
-        "been": [0, 3, 6, 9, 11, 12, 14, 15, 16, 29, 32, 33, 36, 37],
-        "128": [0, 11, 13, 29, 31, 32, 36],
+        "prepar": [0, 39],
+        "were": [0, 4, 5, 12, 14, 16, 22, 32, 39],
+        "about": [0, 7, 23, 39],
+        "been": [0, 6, 9, 11, 12, 13, 15, 16, 17, 32, 35, 36, 39, 40],
+        "128": [0, 12, 14, 32, 34, 35, 39],
         "c49152": 0,
-        "pick": [0, 36],
-        "up": [0, 11, 13, 14, 19, 31, 35, 36],
+        "pick": [0, 39],
+        "up": [0, 12, 14, 15, 20, 22, 34, 38, 39],
         "28913": 0,
         "reghl": 0,
         "32522": 0,
         "32600": 0,
         "28914": 0,
         "44159": 0,
         "63152": 0,
         "60159": 0,
-        "regbc": [0, 36],
+        "regbc": [0, 39],
         "62818": 0,
-        "prevent": [0, 3, 5, 6, 7, 8, 9, 32, 34, 36],
+        "prevent": [0, 3, 5, 6, 7, 8, 9, 11, 35, 37, 39],
         "val1": 0,
         "val2": 0,
-        "kept": [0, 36],
-        "hyperlink": [0, 5, 6, 7, 10, 12, 14, 15, 16, 34, 36, 38],
+        "kept": [0, 39],
+        "hyperlink": [0, 5, 6, 7, 10, 13, 15, 16, 17, 37, 39, 41],
         "28328": 0,
-        "bc": [0, 3, 4, 9, 11, 18, 28, 29, 31, 36],
-        "24576": [0, 13, 14, 26, 29, 35],
+        "bc": [0, 3, 4, 9, 12, 19, 31, 32, 34, 39],
+        "24576": [0, 14, 15, 29, 32, 38],
         "regb": 0,
-        "96": [0, 3, 36],
+        "96": [0, 11, 39],
         "regc": 0,
-        "howev": [0, 13, 14, 34, 36],
+        "howev": [0, 12, 14, 15, 22, 37, 39],
         "meant": 0,
-        "pure": [0, 7, 10, 11, 36],
-        "variabl": [0, 3, 8, 9, 11, 12, 15, 16, 20, 23, 27, 29, 34, 36],
+        "pure": [0, 3, 7, 10, 12, 22, 32, 34, 39],
+        "variabl": [0, 8, 9, 11, 12, 13, 16, 17, 23, 26, 30, 32, 37, 39],
         "endgam": 0,
-        "c24576": [0, 13, 35],
-        "automat": [0, 5, 9, 10, 11, 15, 29, 34],
-        "e": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 18, 19, 20, 21, 22, 24, 25, 26, 28, 29, 31, 34, 35, 36, 37],
-        "g": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 20, 26, 27, 29, 34, 35, 36, 37],
-        "loop": [0, 3, 7, 11, 16, 29, 32, 36],
-        "mark": [0, 11, 12, 13, 14, 24, 35, 36],
-        "just": [0, 3, 13, 14, 29, 34, 36],
-        "includ": [0, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 15, 19, 29, 32, 33, 34, 38],
-        "while": [0, 3, 12, 14, 15, 20],
-        "forc": [0, 10, 11, 13, 20, 32],
+        "c24576": [0, 14, 38],
+        "automat": [0, 5, 9, 10, 12, 16, 32, 37],
+        "e": [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 17, 19, 20, 22, 23, 24, 25, 27, 28, 29, 31, 32, 34, 37, 38, 39, 40],
+        "g": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 17, 22, 23, 29, 30, 32, 37, 38, 39, 40],
+        "loop": [0, 3, 7, 11, 12, 17, 32, 35, 39],
+        "mark": [0, 12, 13, 14, 15, 27, 38, 39],
+        "just": [0, 3, 12, 14, 15, 22, 32, 37, 39],
+        "includ": [0, 2, 4, 5, 6, 7, 8, 9, 11, 12, 13, 15, 16, 20, 32, 35, 36, 37, 41],
+        "while": [0, 11, 13, 15, 16, 22, 23],
+        "forc": [0, 3, 10, 12, 14, 22, 23, 35],
         "wouldn": 0,
-        "t": [0, 3, 4, 5, 6, 7, 9, 11, 12, 14, 15, 16, 18, 20, 22, 23, 26, 27, 28, 29, 31, 32, 34, 35, 36],
-        "report": [0, 15, 36],
-        "sub": [0, 3, 4, 5, 10, 11, 12, 22, 29, 35],
-        "becaus": [0, 3, 11, 13, 16, 29, 33],
+        "t": [0, 4, 5, 6, 7, 9, 11, 12, 13, 15, 16, 17, 19, 22, 23, 25, 26, 29, 30, 31, 32, 34, 35, 37, 38, 39],
+        "report": [0, 16, 39],
+        "sub": [0, 4, 5, 10, 11, 12, 13, 25, 32, 38],
+        "becaus": [0, 11, 12, 14, 17, 32, 36],
         "25404": 0,
         "25560": 0,
         "r25404": 0,
         "inappropri": 0,
         "r27634": 0,
-        "usual": [0, 7, 14, 29, 34],
-        "want": [0, 2, 13, 14, 15, 34, 36],
-        "work": [0, 2, 3, 5, 6, 7, 10, 11, 12, 13, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 32, 36, 37],
-        "manag": [0, 3, 11, 29],
-        "referr": [0, 3, 4, 6, 11, 12, 26],
-        "jump": [0, 3, 4, 11, 12, 15, 36],
+        "usual": [0, 7, 15, 32, 37],
+        "want": [0, 2, 14, 15, 16, 37, 39, 40],
+        "work": [0, 2, 5, 6, 7, 10, 11, 12, 13, 14, 15, 16, 23, 25, 26, 27, 29, 30, 32, 34, 35, 39, 40],
+        "manag": [0, 11, 12, 32],
+        "referr": [0, 4, 6, 11, 12, 13, 29],
+        "jump": [0, 4, 11, 12, 13, 16, 39],
         "raddr1": 0,
         "raddr2": 0,
-        "declar": [0, 5, 7, 11, 12, 13, 14, 34, 35, 36],
-        "identifi": [0, 1, 3, 9, 10, 11, 12, 14, 15, 16, 24, 26, 34, 36, 38],
-        "util": [0, 4, 11, 15, 38],
-        "refer": [0, 3, 5, 6, 7, 14, 34, 36, 38],
-        "calcul": [0, 3, 6],
+        "declar": [0, 5, 7, 12, 13, 14, 15, 37, 38, 39],
+        "identifi": [0, 1, 9, 10, 11, 12, 13, 15, 16, 17, 27, 29, 37, 39, 41],
+        "util": [0, 4, 12, 16, 41],
+        "refer": [0, 5, 6, 7, 11, 15, 37, 39, 41],
+        "calcul": [0, 6, 11],
         "indirectli": 0,
-        "via": [0, 3, 6, 8, 11, 12, 15, 29, 34, 36],
-        "As": [0, 12, 14, 31, 35, 36],
-        "result": [0, 2, 13, 14, 15, 28, 29, 35, 36],
-        "attach": [0, 7, 13, 29, 34],
-        "listref": [0, 11, 26],
-        "configur": [0, 1, 3, 6, 9, 10, 12, 14, 32, 34, 36],
-        "snapinfo": [0, 3, 8, 9, 12, 32, 38],
-        "graph": [0, 3, 12, 27, 38],
-        "edg": [0, 3, 11, 27, 29, 32, 36],
-        "node": [0, 11, 27],
-        "repres": [0, 3, 11, 12, 15, 16, 27, 36],
-        "becom": [0, 3, 11, 13, 14, 29, 34, 35],
-        "special": [0, 3, 8, 11, 12, 13, 29, 34, 36],
-        "eref": [0, 5, 6, 12],
-        "directli": [0, 36],
-        "doe": [0, 2, 3, 5, 8, 11, 13, 14, 15, 20, 29, 34, 35, 36, 37],
+        "via": [0, 3, 6, 8, 11, 12, 13, 16, 32, 37, 39],
+        "As": [0, 13, 15, 34, 38, 39],
+        "result": [0, 2, 14, 15, 16, 31, 32, 38, 39],
+        "attach": [0, 7, 12, 14, 22, 32, 37],
+        "listref": [0, 12, 29],
+        "configur": [0, 1, 3, 6, 9, 10, 11, 13, 15, 35, 37, 39],
+        "snapinfo": [0, 3, 8, 9, 11, 13, 35, 41],
+        "graph": [0, 11, 13, 30, 41],
+        "edg": [0, 11, 12, 30, 32, 35, 39],
+        "node": [0, 12, 30],
+        "repres": [0, 11, 12, 13, 16, 17, 30, 39],
+        "becom": [0, 11, 12, 14, 15, 32, 37, 38],
+        "special": [0, 8, 11, 12, 13, 14, 32, 37, 39],
+        "eref": [0, 5, 6, 13],
+        "directli": [0, 39],
+        "doe": [0, 2, 5, 8, 11, 12, 14, 15, 16, 23, 32, 37, 38, 39, 40],
         "illumin": 0,
         "nearbi": 0,
         "parser": 0,
-        "suitabl": [0, 29, 33, 34, 36],
-        "must": [0, 2, 11, 12, 13, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36, 37],
+        "suitabl": [0, 32, 36, 37, 39],
+        "must": [0, 2, 12, 13, 14, 16, 17, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39, 40],
         "64000": 0,
         "address2": 0,
-        "id": [0, 9, 11, 12, 15, 16, 23, 27, 34, 36],
-        "disassembli": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 17, 20, 23, 26, 32, 33, 34, 35, 36, 38],
+        "id": [0, 9, 12, 13, 16, 17, 26, 30, 37, 39],
+        "disassembli": [0, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 18, 23, 26, 29, 35, 36, 37, 38, 39, 41],
         "29012": 0,
         "29015": 0,
-        "It": [0, 12, 13, 14, 15, 29, 34, 36],
-        "form": [0, 2, 12, 13, 14, 15, 16, 31, 34, 36],
+        "It": [0, 13, 14, 15, 16, 32, 37, 39],
+        "form": [0, 2, 13, 14, 15, 16, 17, 34, 37, 39],
         "r29015": 0,
-        "match": [0, 3, 8, 11, 12, 13, 15, 16, 29, 34, 35, 36],
-        "regular": [0, 3, 5, 8, 11, 12, 13, 14, 16, 18, 19, 21, 35, 36],
-        "pattern": [0, 3, 12, 13, 34, 36],
+        "match": [0, 8, 11, 12, 13, 14, 16, 17, 32, 37, 38, 39],
+        "regular": [0, 5, 8, 11, 12, 13, 14, 15, 17, 19, 20, 24, 38, 39],
+        "pattern": [0, 3, 11, 13, 14, 37, 39],
         "repl": 0,
-        "copi": [0, 3, 6, 9, 11, 14, 15, 16, 28, 29, 34, 38],
-        "chr": [0, 3, 6],
-        "169": [0, 36],
-        "instanc": [0, 5, 11, 15, 29, 33, 36],
-        "altern": [0, 3, 10, 11, 12, 13, 14, 15, 16, 18, 19, 28, 29, 31, 34, 36],
+        "copi": [0, 6, 9, 11, 12, 15, 16, 17, 31, 32, 37, 41],
+        "chr": [0, 6, 11],
+        "169": [0, 39],
+        "instanc": [0, 5, 12, 16, 32, 36, 39],
+        "altern": [0, 3, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 31, 32, 34, 37, 39],
         "applic": 0,
-        "conveni": [0, 11, 12, 15, 29],
-        "deal": [0, 12],
-        "decim": [0, 3, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 36],
-        "hexadecim": [0, 2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36],
-        "wherev": [0, 9, 11, 12, 15, 16, 31, 36, 37],
-        "group": [0, 3, 5, 6, 13, 16, 34, 36],
+        "conveni": [0, 12, 13, 16, 32],
+        "deal": [0, 13],
+        "decim": [0, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 39],
+        "hexadecim": [0, 2, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 17, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39],
+        "wherev": [0, 9, 12, 13, 16, 17, 34, 39, 40],
+        "group": [0, 5, 6, 11, 14, 17, 37, 39],
         "a001": 0,
         "40960": 0,
         "peek40960": 0,
-        "made": [0, 3, 4, 5, 11, 16, 29, 31, 34, 36],
-        "order": [0, 11, 12, 14, 16, 18, 23, 29, 34, 36],
-        "we": [0, 13, 14, 15, 35, 36],
+        "made": [0, 3, 4, 5, 11, 12, 17, 32, 34, 37, 39],
+        "order": [0, 12, 13, 15, 17, 19, 26, 32, 37, 39],
+        "we": [0, 14, 15, 16, 38, 39],
         "foo": 0,
         "bar": 0,
-        "16": [0, 11, 12, 15, 20, 23, 26, 29, 34, 36],
+        "16": [0, 12, 13, 16, 23, 26, 29, 32, 37, 39],
         "foo31": 0,
         "eval31": 0,
-        "revers": [0, 11, 29],
+        "revers": [0, 12, 32],
         "bar31": 0,
-        "flexibl": [0, 15],
-        "zx": [0, 3, 11, 29, 31, 36],
-        "spectrum": [0, 3, 6, 8, 11, 14, 15, 19, 24, 25, 29, 31, 36],
-        "construct": [0, 3, 12, 36],
-        "reason": [0, 14, 15, 33],
-        "why": [0, 14],
-        "simul": [0, 3, 6, 31, 32, 36],
-        "game": [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 35, 36, 38],
-        "wav": [0, 3, 11, 34, 36, 38],
+        "flexibl": [0, 16],
+        "zx": [0, 11, 12, 32, 34, 39],
+        "spectrum": [0, 3, 6, 8, 11, 12, 15, 16, 20, 22, 27, 28, 32, 34, 39],
+        "construct": [0, 11, 13, 39],
+        "reason": [0, 15, 16, 36],
+        "why": [0, 15],
+        "simul": [0, 3, 6, 11, 22, 34, 35, 39, 40],
+        "game": [0, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 38, 39, 41],
+        "wav": [0, 11, 12, 37, 39, 41],
         "beeper": 0,
         "subroutin": 0,
-        "action": [0, 11, 15, 29],
+        "action": [0, 12, 16, 32],
         "gain": 0,
-        "access": [0, 12, 16, 36],
+        "access": [0, 13, 17, 39],
         "0x3d00": 0,
-        "imag": [0, 3, 5, 6, 7, 8, 9, 11, 14, 15, 16, 23, 25, 34, 38],
-        "noth": [0, 15],
-        "alreadi": [0, 3, 11, 14, 29, 34, 36, 37],
-        "properti": [0, 1, 3, 5, 6, 8, 11, 12, 34, 36],
-        "somewher": [0, 15],
-        "bullet": [0, 6, 9, 11, 20, 36],
-        "width": [0, 1, 3, 5, 6, 7, 10, 11, 13, 15, 16, 20, 25, 26, 36],
-        "min": [0, 6, 20, 32, 36],
-        "10": [0, 7, 9, 11, 12, 13, 15, 20, 23, 26, 31, 36],
-        "crlf": [0, 20],
-        "cr": [0, 20],
-        "lf": [0, 20],
-        "system": [0, 3, 11, 15, 20, 29],
-        "handl": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 20, 29],
-        "unsupport": [0, 6, 20],
-        "empti": [0, 1, 3, 6, 9, 11, 12, 13, 15, 16, 20, 29, 31, 34, 35, 36],
-        "exit": [0, 11, 13, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "error": [0, 12, 20, 36],
-        "indent": [0, 1, 6, 9, 16, 20, 34, 36],
-        "23": [0, 13, 15, 20, 28],
-        "colon": [0, 1, 6, 10, 12, 15, 20, 35],
-        "leav": [0, 7, 11, 12, 13, 19, 20, 23, 34, 36],
-        "unadorn": [0, 20],
-        "maximum": [0, 1, 3, 7, 11, 12, 15, 20, 26, 31],
-        "each": [0, 1, 2, 3, 4, 5, 7, 10, 11, 12, 13, 14, 15, 16, 18, 20, 21, 25, 27, 28, 29, 31, 33, 34, 35, 36, 38],
-        "79": [0, 3, 11, 13, 20, 26, 36],
-        "tab": [0, 20],
-        "tabl": [0, 3, 5, 6, 7, 9, 10, 13, 15, 20, 34, 35],
-        "border": [0, 3, 5, 11, 18, 20, 28, 29, 36],
-        "horizont": [0, 3, 5, 6, 11, 15, 20, 25, 36],
-        "extern": [0, 20],
-        "intern": [0, 3, 11, 20, 29, 36],
-        "join": [0, 3, 6, 11, 14, 20, 23],
-        "vertic": [0, 3, 5, 6, 11, 15, 20, 25, 36],
-        "row": [0, 3, 5, 8, 10, 16, 20, 36],
-        "non": [0, 3, 4, 6, 10, 11, 12, 16, 20, 24, 34, 36],
-        "header": [0, 1, 3, 7, 9, 11, 13, 14, 16, 20, 29, 30, 34, 36],
-        "cell": [0, 3, 5, 6, 9, 10, 11, 13, 16, 20, 25, 34, 36],
-        "adjac": [0, 5, 20, 35, 36],
-        "write": [0, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 18, 19, 20, 21, 22, 23, 24, 25, 26, 28, 29, 31, 34, 35, 36],
-        "wrap": [0, 3, 6, 11, 12, 20, 26, 36],
-        "column": [0, 3, 5, 6, 7, 10, 13, 16, 20, 34, 36],
-        "wrappabl": [0, 20],
-        "python": [0, 3, 5, 6, 8, 9, 11, 14, 16, 20, 23, 27, 29, 31, 34, 36, 37],
-        "class": [0, 3, 6, 7, 11, 12, 15, 16, 20, 23, 34, 36],
-        "packag": [0, 5, 6, 11, 15, 20, 23, 34, 37],
-        "modul": [0, 3, 6, 29, 34],
-        "classnam": [0, 34],
-        "path": [0, 3, 5, 6, 7, 9, 10, 11, 15, 16, 20, 23, 26, 27, 29, 36],
-        "moduledir": [0, 29, 34],
-        "outsid": [0, 6, 9, 11, 13, 29, 34],
-        "search": [0, 6, 7, 9, 11, 15, 23, 27, 29, 34],
-        "standalon": [0, 6, 15, 34],
-        "part": [0, 3, 6, 9, 13, 15, 34, 36],
-        "instal": [0, 5, 6, 11, 17, 23, 34],
-        "skoolasm": [0, 15],
-        "asmwrit": [0, 15, 20, 36],
-        "inform": [0, 3, 4, 8, 11, 13, 14, 18, 20, 27, 28, 29, 30, 31, 34, 35, 36],
-        "your": [0, 2, 13, 14, 15, 32, 34, 38],
-        "own": [0, 1, 3, 5, 6, 14, 16, 34, 35, 36],
-        "document": [0, 4, 5, 6, 13, 14, 34, 36, 37],
-        "extend": [0, 4, 5, 6, 17, 34, 36],
-        "built": [1, 7, 8, 9, 11, 15, 16, 29, 34, 36],
-        "replac": [1, 2, 3, 4, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 23, 26, 27, 29, 31, 32, 33, 34],
-        "enclos": [1, 12, 15, 16, 36],
-        "brace": [1, 6, 7, 9, 15, 16, 36],
-        "appropri": [1, 11, 12, 14, 15, 16, 19, 29, 33, 36],
-        "format": [1, 2, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 20, 22, 23, 26, 27, 29, 31, 33, 34, 38],
-        "overridden": [1, 34],
-        "custom": [1, 3, 5, 8, 10, 11, 14, 15, 16, 20, 29, 34],
-        "set": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 18, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 34, 36, 38],
-        "squar": [1, 15, 36],
-        "bracket": [1, 15, 36],
-        "block": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 19, 20, 22, 23, 24, 25, 26, 28, 29, 30, 32, 33, 34, 36, 38],
-        "start": [1, 3, 4, 5, 6, 7, 8, 10, 11, 12, 15, 16, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 31, 34, 35, 36, 38],
-        "end": [1, 3, 5, 7, 8, 9, 10, 11, 12, 15, 16, 19, 20, 21, 22, 24, 26, 27, 29, 33, 34, 35, 36],
-        "paragraph": [1, 5, 13, 15, 16, 34, 35, 36],
-        "direct": [1, 3, 5, 6, 7, 8, 9, 10, 11, 14, 15, 17, 20, 21, 22, 23, 29, 33, 34, 36],
-        "sep": [1, 16, 36],
-        "suffix": [1, 3, 10, 11, 13, 14, 15, 16, 26, 27, 29, 34, 36],
-        "prefix": [1, 3, 4, 6, 8, 9, 10, 11, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 35, 36, 37],
+        "imag": [0, 5, 6, 7, 8, 9, 11, 12, 15, 16, 17, 26, 28, 37, 41],
+        "noth": [0, 16],
+        "alreadi": [0, 11, 12, 15, 22, 32, 37, 39, 40],
+        "properti": [0, 1, 5, 6, 8, 11, 12, 13, 37, 39],
+        "somewher": [0, 12, 16, 22],
+        "bullet": [0, 6, 9, 12, 23, 39],
+        "width": [0, 1, 5, 6, 7, 10, 11, 12, 14, 16, 17, 23, 28, 29, 39],
+        "min": [0, 6, 23, 35, 39],
+        "10": [0, 7, 9, 12, 13, 14, 16, 23, 26, 29, 34, 39],
+        "crlf": [0, 23],
+        "cr": [0, 23],
+        "lf": [0, 23],
+        "system": [0, 11, 12, 16, 23, 32],
+        "handl": [0, 1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 23, 32],
+        "unsupport": [0, 6, 12, 22, 23],
+        "empti": [0, 1, 6, 9, 11, 12, 13, 14, 16, 17, 22, 23, 32, 34, 37, 38, 39],
+        "exit": [0, 12, 14, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "error": [0, 13, 23, 39],
+        "indent": [0, 1, 6, 9, 17, 23, 37, 39],
+        "23": [0, 14, 16, 23, 31],
+        "colon": [0, 1, 6, 10, 13, 16, 23, 38],
+        "leav": [0, 7, 12, 13, 14, 20, 23, 26, 37, 39],
+        "unadorn": [0, 23],
+        "maximum": [0, 1, 7, 11, 12, 13, 16, 22, 23, 29, 34],
+        "each": [0, 1, 2, 4, 5, 7, 10, 11, 12, 13, 14, 15, 16, 17, 19, 23, 24, 28, 30, 31, 32, 34, 36, 37, 38, 39, 41],
+        "79": [0, 11, 12, 14, 23, 29, 39],
+        "tab": [0, 23],
+        "tabl": [0, 5, 6, 7, 9, 10, 11, 14, 16, 23, 37, 38],
+        "border": [0, 5, 11, 12, 19, 23, 31, 32, 39],
+        "horizont": [0, 5, 6, 11, 12, 16, 23, 28, 39],
+        "extern": [0, 12, 22, 23],
+        "intern": [0, 11, 12, 23, 32, 39],
+        "join": [0, 6, 11, 12, 15, 23, 26],
+        "vertic": [0, 5, 6, 11, 12, 16, 23, 28, 39],
+        "row": [0, 5, 8, 10, 11, 17, 23, 39],
+        "non": [0, 4, 6, 10, 11, 12, 13, 17, 23, 27, 37, 39],
+        "header": [0, 1, 3, 7, 9, 11, 12, 14, 15, 17, 23, 32, 33, 37, 39, 40],
+        "cell": [0, 5, 6, 9, 10, 11, 12, 14, 17, 23, 28, 37, 39],
+        "adjac": [0, 5, 23, 38, 39],
+        "write": [0, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 34, 37, 38, 39],
+        "wrap": [0, 6, 11, 12, 13, 23, 29, 39],
+        "column": [0, 5, 6, 7, 10, 11, 14, 17, 23, 37, 39],
+        "wrappabl": [0, 23],
+        "python": [0, 3, 5, 6, 8, 9, 11, 12, 15, 17, 22, 23, 26, 30, 32, 34, 37, 39, 40],
+        "class": [0, 6, 7, 11, 12, 13, 16, 17, 23, 26, 37, 39],
+        "packag": [0, 5, 6, 12, 16, 23, 26, 37, 40],
+        "modul": [0, 6, 11, 32, 37],
+        "classnam": [0, 37],
+        "path": [0, 5, 6, 7, 9, 10, 11, 12, 16, 17, 23, 26, 29, 30, 32, 39, 40],
+        "moduledir": [0, 32, 37],
+        "outsid": [0, 6, 9, 12, 14, 32, 37],
+        "search": [0, 6, 7, 9, 12, 16, 26, 30, 32, 37],
+        "standalon": [0, 6, 16, 37],
+        "part": [0, 6, 9, 11, 14, 16, 37, 39],
+        "instal": [0, 5, 6, 12, 18, 22, 26, 37],
+        "skoolasm": [0, 16],
+        "asmwrit": [0, 16, 23, 39],
+        "inform": [0, 4, 8, 11, 12, 14, 15, 19, 21, 22, 23, 30, 31, 32, 33, 34, 37, 38, 39],
+        "your": [0, 2, 14, 15, 16, 35, 37, 41],
+        "own": [0, 1, 5, 6, 11, 15, 17, 37, 38, 39],
+        "document": [0, 4, 5, 6, 14, 15, 37, 39, 40],
+        "extend": [0, 4, 5, 6, 18, 37, 39],
+        "built": [1, 7, 8, 9, 12, 16, 17, 32, 37, 39],
+        "replac": [1, 2, 4, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23, 24, 26, 29, 30, 32, 34, 35, 36, 37, 40],
+        "enclos": [1, 13, 16, 17, 39],
+        "brace": [1, 6, 7, 9, 16, 17, 39],
+        "appropri": [1, 12, 13, 15, 16, 17, 20, 32, 36, 39],
+        "format": [1, 2, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 22, 23, 25, 26, 29, 30, 32, 34, 36, 37, 41],
+        "overridden": [1, 37],
+        "custom": [1, 5, 8, 10, 11, 12, 15, 16, 17, 23, 32, 37],
+        "set": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 39, 41],
+        "squar": [1, 16, 39],
+        "bracket": [1, 16, 39],
+        "block": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 17, 20, 21, 22, 23, 25, 26, 27, 28, 29, 31, 32, 33, 35, 36, 37, 39, 41],
+        "start": [1, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 16, 17, 19, 20, 22, 23, 24, 25, 26, 27, 29, 30, 31, 32, 34, 37, 38, 39, 41],
+        "end": [1, 5, 7, 8, 9, 10, 11, 12, 13, 16, 17, 20, 22, 23, 24, 25, 27, 29, 30, 32, 36, 37, 38, 39],
+        "paragraph": [1, 5, 14, 16, 17, 37, 38, 39],
+        "direct": [1, 3, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 18, 23, 24, 25, 26, 36, 37, 39],
+        "sep": [1, 17, 39],
+        "suffix": [1, 10, 11, 12, 14, 15, 16, 17, 29, 30, 32, 37, 39],
+        "prefix": [1, 4, 6, 8, 9, 10, 11, 12, 14, 15, 16, 17, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 38, 39, 40],
         "prefix_len": 1,
-        "reg": [1, 8, 9, 11, 18, 28, 29, 31],
+        "reg": [1, 8, 9, 12, 19, 31, 32, 34],
         "reg_len": 1,
-        "max_reg_len": [1, 3],
-        "o": [1, 3, 5, 11, 13, 18, 19, 21, 23, 24, 25, 26, 27, 29, 31, 35, 36],
-        "align": [1, 9, 16, 36],
-        "asm": [2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 15, 17, 22, 23, 34],
-        "At": [2, 13, 36],
-        "time": [2, 3, 4, 10, 11, 13, 14, 15, 18, 20, 22, 23, 24, 25, 26, 27, 28, 29, 31, 34, 36],
-        "known": [2, 14, 38],
+        "max_reg_len": [1, 11],
+        "o": [1, 3, 5, 12, 14, 19, 20, 24, 26, 27, 28, 29, 30, 32, 34, 38, 39, 40],
+        "align": [1, 9, 17, 39],
+        "asm": [2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16, 18, 25, 26, 37],
+        "At": [2, 14, 39],
+        "time": [2, 4, 10, 11, 12, 14, 15, 16, 19, 23, 25, 26, 27, 28, 29, 30, 31, 32, 34, 37, 39],
+        "known": [2, 15, 41],
         "v0": 2,
-        "v1": [2, 36],
+        "v1": [2, 39],
         "07": 2,
         "rc7": 2,
-        "distribut": [2, 5, 6, 7, 8, 38],
-        "high": [2, 33],
+        "distribut": [2, 5, 6, 7, 8, 41],
+        "high": [2, 36],
         "low": [2, 5],
         "half": 2,
-        "ix": [2, 4, 6, 9, 11, 12, 13, 18, 28, 29, 31, 36],
-        "ii": [2, 4, 6, 9, 11, 18, 28, 29, 31, 36],
-        "ixl": [2, 4, 11, 29, 31, 36],
+        "ix": [2, 4, 6, 9, 12, 13, 14, 19, 31, 32, 34, 39],
+        "ii": [2, 4, 6, 9, 12, 19, 31, 32, 34, 39],
+        "ixl": [2, 4, 12, 32, 34, 39],
         "workaround": 2,
-        "binari": [2, 3, 5, 6, 8, 9, 11, 12, 13, 18, 19, 21, 22, 24, 25, 26, 27, 31, 35, 36],
+        "binari": [2, 5, 6, 8, 9, 11, 12, 13, 14, 19, 20, 24, 25, 27, 28, 29, 30, 34, 38, 39],
         "constant": 2,
-        "10101010": [2, 6, 13],
-        "give": [2, 11, 13, 14, 29, 36],
-        "raw": [2, 3, 5, 9, 10, 11, 18, 19, 21, 24, 25, 26, 27, 31, 38],
-        "tape": [2, 3, 7, 9, 11, 29, 32],
-        "emul": [2, 3, 6, 11, 14, 18, 24, 28, 29, 38],
-        "Then": [2, 14, 36, 38],
-        "bin": [2, 11, 18, 19, 21, 26, 27],
+        "10101010": [2, 6, 14],
+        "give": [2, 12, 14, 15, 32, 39],
+        "raw": [2, 5, 9, 10, 11, 12, 19, 20, 24, 27, 28, 29, 30, 34, 41],
+        "tape": [2, 3, 7, 9, 11, 12, 32, 35],
+        "emul": [2, 6, 11, 12, 15, 19, 27, 31, 32, 41],
+        "Then": [2, 15, 39, 41],
+        "bin": [2, 12, 19, 20, 24, 29, 30],
         "sjasm": 2,
-        "sourc": [2, 4, 5, 6, 14, 32, 34, 38],
+        "sourc": [2, 4, 5, 6, 15, 35, 37, 41],
         "devic": 2,
         "zxspectrum48": 2,
         "savebin": 2,
-        "org": [2, 3, 5, 6, 8, 9, 11, 18, 19, 24, 25, 26, 27, 31],
-        "program": [2, 3, 8, 9, 11, 18, 19, 27, 29, 30, 31, 35, 36, 38],
+        "org": [2, 5, 6, 8, 9, 11, 12, 19, 20, 27, 28, 29, 30, 34],
+        "program": [2, 3, 8, 9, 11, 12, 19, 20, 30, 32, 33, 34, 38, 39, 41],
         "rorg": 2,
-        "chosen": [2, 11, 14, 29, 36],
-        "bin2tap": [2, 3, 4, 5, 7, 8, 38],
-        "bin2sna": [2, 3, 8, 9, 38],
-        "snapmod": [3, 8, 38],
-        "modifi": [3, 4, 7, 8, 11, 13, 14, 28, 29, 34, 36, 38],
-        "szx": [3, 6, 7, 8, 11, 18, 19, 24, 25, 26, 27, 28, 29, 31, 38],
-        "bank": [3, 11, 12, 18, 19, 21, 28, 29, 31, 33],
-        "provid": [3, 10, 11, 12, 13, 15, 34, 36],
-        "input": [3, 5, 6, 8, 11, 13, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 32, 34, 35, 36],
-        "tap": [3, 5, 6, 8, 11, 19, 29, 30, 38],
-        "7ffd": [3, 11, 18, 19, 28, 29, 36],
-        "loader": [3, 7, 11, 19, 29, 32],
-        "tap2sna": [3, 6, 7, 8, 9, 14, 38],
-        "trace": [3, 14, 29, 38],
-        "poke": [3, 4, 5, 6, 9, 11, 18, 23, 25, 28, 31, 34, 38],
-        "cmio": [3, 11, 29, 31, 36],
-        "execint": [3, 36],
-        "interrupt": [3, 11, 18, 28, 29, 31, 32, 34, 36],
-        "clock": [3, 11, 29, 34, 36],
-        "iff": [3, 18, 28, 29, 36],
-        "im": [3, 18, 28, 29, 36],
-        "mode": [3, 5, 6, 8, 9, 10, 11, 12, 13, 15, 17, 18, 25, 28, 29, 31, 34, 35, 36],
-        "sp": [3, 4, 11, 18, 28, 29, 31, 36],
-        "sna": [3, 6, 7, 8, 11, 19, 24, 25, 26, 27, 31, 38],
-        "log": [3, 11, 29],
-        "timestamp": [3, 11, 15, 29, 31],
-        "occur": [3, 12, 13, 36],
-        "z80": [3, 5, 6, 7, 8, 11, 12, 14, 18, 19, 20, 24, 25, 26, 27, 28, 29, 31, 32, 34, 35, 38],
-        "updat": [3, 4, 5, 7, 14, 36],
-        "flag": [3, 7, 10, 11, 13, 29, 32, 36],
-        "basic": [3, 7, 8, 9, 11, 14, 19, 27, 29, 30, 32, 38],
-        "fail": [3, 6, 11, 14, 29],
+        "chosen": [2, 12, 15, 22, 32, 39],
+        "bin2tap": [2, 3, 4, 5, 7, 8, 11, 41],
+        "bin2sna": [2, 3, 8, 9, 11, 41],
+        "z80": [3, 5, 6, 7, 8, 11, 12, 13, 15, 19, 20, 22, 23, 27, 28, 29, 30, 31, 32, 34, 35, 37, 38, 40, 41],
+        "implement": [3, 16],
+        "faster": [3, 12, 22, 32, 40],
+        "rzxplai": [3, 15, 27, 41],
+        "command": [3, 5, 6, 7, 8, 9, 10, 11, 15, 16, 17, 18, 20, 23, 25, 26, 27, 29, 30, 34, 35, 37, 38],
+        "plai": [3, 12, 15, 22],
+        "rzx": [3, 12, 15, 21, 22, 41],
+        "rzxinfo": [3, 41],
+        "show": [3, 4, 6, 7, 8, 9, 10, 11, 12, 14, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 37, 39, 41],
+        "extract": [3, 12, 16, 21, 32, 41],
+        "sna2ctl": [3, 10, 13, 15, 22, 41],
+        "tap2sna": [3, 6, 7, 8, 9, 11, 15, 41],
+        "tzx": [3, 6, 7, 8, 10, 11, 12, 33, 35, 41],
+        "type": [3, 4, 5, 7, 10, 11, 12, 13, 14, 16, 17, 25, 29, 32, 37, 38, 39],
+        "0x15": [3, 12],
+        "record": [3, 12, 15, 22, 30, 32],
+        "tapinfo": [3, 8, 9, 10, 11, 41],
+        "info": [3, 10, 11, 12, 24, 37],
+        "trace": [3, 11, 15, 22, 32, 41],
+        "machin": [3, 11, 12, 32, 34, 39, 41],
+        "usag": [3, 12],
+        "lazi": 3,
+        "evalu": [3, 16, 17, 39],
+        "frame": [3, 6, 7, 11, 12, 13, 16, 19, 21, 22, 31, 32, 37, 39],
+        "incorrect": [3, 11],
+        "graphic": [3, 5, 6, 9, 12, 28, 30, 32, 37, 39, 41],
+        "too": [3, 12, 14, 15, 16, 32, 34, 38],
+        "soon": [3, 12, 32, 39],
+        "outi": 3,
+        "outd": 3,
+        "otir": 3,
+        "otdr": 3,
+        "snapmod": [3, 8, 11, 41],
+        "modifi": [3, 4, 7, 8, 11, 12, 14, 15, 31, 32, 37, 39, 41],
+        "szx": [3, 6, 7, 8, 11, 12, 19, 20, 22, 27, 28, 29, 30, 31, 32, 34, 41],
+        "bank": [3, 12, 13, 19, 20, 24, 31, 32, 34, 36],
+        "provid": [3, 10, 11, 12, 13, 14, 16, 37, 39],
+        "input": [3, 5, 6, 8, 12, 14, 17, 19, 20, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 35, 37, 38, 39],
+        "tap": [3, 5, 6, 8, 11, 12, 20, 32, 33, 41],
+        "7ffd": [3, 12, 19, 20, 31, 32, 39],
+        "loader": [3, 7, 12, 20, 32, 35],
+        "poke": [3, 4, 5, 6, 9, 11, 12, 19, 26, 28, 31, 34, 37, 41],
+        "cmio": [3, 12, 32, 34, 39],
+        "execint": [3, 39],
+        "interrupt": [3, 11, 12, 19, 22, 31, 32, 34, 35, 37, 39],
+        "clock": [3, 12, 32, 37, 39],
+        "iff": [3, 19, 31, 32, 39],
+        "im": [3, 19, 31, 32, 39],
+        "mode": [3, 5, 6, 8, 9, 10, 11, 12, 13, 14, 16, 18, 19, 22, 28, 31, 32, 34, 37, 38, 39],
+        "sp": [3, 4, 12, 19, 31, 32, 34, 39],
+        "sna": [3, 6, 7, 8, 11, 12, 20, 27, 28, 29, 30, 34, 41],
+        "log": [3, 11, 12, 22, 32],
+        "timestamp": [3, 12, 16, 32, 34],
+        "occur": [3, 13, 14, 39],
+        "updat": [3, 4, 5, 7, 11, 15, 39],
+        "flag": [3, 7, 10, 11, 12, 14, 32, 35, 39],
+        "basic": [3, 7, 8, 9, 11, 12, 15, 20, 30, 32, 33, 35, 41],
+        "fail": [3, 6, 12, 15, 22, 32],
         "prog": 3,
-        "repeat": [3, 11, 13, 16, 31, 36],
-        "drop": [3, 6, 8, 9],
-        "perform": [3, 9, 10, 11, 12, 14, 15, 18, 25, 28, 29, 31, 32, 36],
-        "machin": [3, 11, 29, 31, 36, 38],
-        "command": [3, 5, 6, 7, 8, 9, 10, 14, 15, 16, 17, 19, 20, 22, 23, 24, 26, 27, 31, 32, 34, 35],
-        "polar": [3, 11, 29],
-        "ear": [3, 11, 29],
-        "puls": [3, 10, 11, 29],
-        "IN": [3, 11, 29],
-        "argument": [3, 5, 7, 9, 10, 11, 12, 15, 19, 32, 36, 37],
-        "defaultsnapshotformat": [3, 11, 29],
-        "pair": [3, 11, 13, 15, 28, 36],
-        "tracelin": [3, 11, 29, 31, 32],
-        "antirom": [3, 11, 29],
-        "erniewar": [3, 11, 29],
-        "housenka": [3, 11, 29],
-        "sampl": [3, 11, 29, 32, 34, 36],
-        "acceler": [3, 32],
-        "statist": [3, 11, 31],
-        "delai": [3, 11, 15, 29, 31, 34, 36],
-        "shown": [3, 11, 13, 23, 29, 31, 34, 35, 36, 37],
-        "ini": [3, 9, 10, 11, 12, 20, 22, 23, 24, 26, 27, 29, 31],
-        "show": [3, 4, 6, 7, 8, 9, 10, 11, 13, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 34, 36, 38],
-        "fe": [3, 11, 18, 28, 29],
-        "hardwar": [3, 9, 11, 36],
-        "state": [3, 9, 11, 12, 13, 31, 34, 36],
-        "attribut": [3, 6, 8, 9, 10, 11, 12, 15, 16, 18, 27, 28, 29, 34, 36],
-        "written": [3, 10, 11, 13, 15, 18, 20, 22, 24, 26, 29, 31, 34, 36, 38],
-        "port": [3, 11, 18, 19, 28, 29, 36],
-        "0xfe": [3, 18, 28, 29],
-        "through": [3, 14, 32, 36],
-        "averag": [3, 36],
-        "filter": [3, 36],
-        "higher": [3, 36],
-        "qualiti": [3, 36],
-        "especi": [3, 13, 36],
-        "multi": [3, 5, 9, 11, 13, 29, 34, 36],
-        "channel": [3, 36],
-        "tune": [3, 36, 38],
-        "avoid": [3, 13, 36],
-        "repetit": [3, 13, 36],
-        "tapinfo": [3, 8, 9, 10, 38],
-        "token": [3, 9, 11, 29, 36],
-        "ai": [3, 11, 18, 28, 29, 36],
-        "assembl": [3, 4, 8, 9, 10, 11, 16, 17, 20, 33, 34, 35, 38],
-        "hash": [3, 13],
-        "filenam": [3, 7, 8, 11, 12, 15, 16, 25, 29, 32, 34],
-        "finish": [3, 11, 14, 29, 38],
-        "contend": [3, 32, 36],
-        "interpret": [3, 10, 11, 14, 29, 36],
-        "4000": [3, 11, 29],
-        "7fff": [3, 11, 29],
-        "alkatraz": [3, 11, 29],
-        "05": [3, 11, 29, 31],
-        "0a": [3, 11, 13, 29],
-        "0b": [3, 11, 13, 29],
-        "alternative2": [3, 11, 29],
-        "boguslaw": [3, 11, 29],
-        "juza": [3, 11, 29],
-        "bulldog": [3, 11, 29],
-        "crl": [3, 11, 29],
-        "crl2": [3, 11, 29],
-        "crl3": [3, 11, 29],
-        "crl4": [3, 11, 29],
-        "cybexlab": [3, 11, 29],
-        "delphin": [3, 11, 29],
-        "design": [3, 11, 12, 29],
-        "gargoyle2": [3, 11, 29],
-        "gremlin2": [3, 11, 29],
-        "micropros": [3, 11, 29],
-        "micro": [3, 11, 29],
-        "style": [3, 5, 7, 9, 11, 29, 36],
-        "mirrorsoft": [3, 11, 29],
-        "pala": [3, 11, 29],
-        "raxoft": [3, 11, 29],
-        "realtim": [3, 11, 29],
-        "silverbird": [3, 11, 29],
-        "softwar": [3, 11, 29, 34, 38],
-        "project": [3, 11, 29],
-        "sparkler": [3, 11, 29],
-        "suzi": [3, 11, 29],
-        "soft": [3, 11, 29],
-        "soft2": [3, 11, 29],
-        "tini": [3, 11, 29],
-        "u": [3, 5, 6, 7, 11, 12, 13, 16, 20, 23, 26, 29, 34, 35, 36],
-        "gold": [3, 11, 29],
-        "weird": [3, 11, 29],
-        "scienc": [3, 11, 29],
-        "auto": [3, 11, 29],
-        "issue2": [3, 11, 18, 28, 29],
-        "disabl": [3, 11, 18, 28, 29, 32, 36],
-        "issu": [3, 11, 18, 28, 29],
-        "traceoperand": [3, 11, 29, 31],
-        "analysi": [3, 4, 11, 14, 24, 29, 38],
-        "tone": [3, 11, 29],
-        "counter": [3, 11, 29, 31, 36],
-        "displai": [3, 6, 7, 10, 11, 12, 13, 15, 16, 27, 34, 36],
-        "float": 3,
-        "accompani": [3, 14, 35],
-        "reset": [3, 25, 36],
-        "carri": 3,
-        "least": [3, 11, 12, 13, 14, 16, 19, 24, 35, 36],
-        "tzx": [3, 6, 7, 8, 10, 11, 30, 32, 38],
-        "type": [3, 4, 5, 7, 10, 11, 12, 13, 15, 16, 22, 26, 29, 34, 35, 36],
-        "0x24": 3,
-        "0x25": 3,
-        "paus": [3, 11, 29],
-        "0x10": [3, 11, 29],
-        "0x11": [3, 11],
-        "0x14": [3, 7, 10, 11],
-        "0x20": 3,
-        "fast": [3, 11, 29],
-        "timeout": [3, 11, 29],
-        "zip": [3, 11, 29, 37],
-        "archiv": [3, 11, 14, 29, 37],
-        "sum": [3, 11, 29, 36],
-        "md5": [3, 11, 29],
-        "checksum": [3, 11, 29],
-        "quot": [3, 6, 11, 12, 35],
-        "info": [3, 10, 11, 21, 34],
-        "standard": [3, 5, 8, 11, 18, 19, 20, 21, 22, 23, 24, 26, 27, 29, 31, 34],
-        "speed": [3, 6, 34],
-        "turbo": 3,
-        "0xed": 3,
-        "decompress": 3,
-        "transit": 3,
-        "find": [3, 9, 11, 14, 15, 27, 32, 34, 38],
-        "16384": [3, 11, 12, 14, 15, 19, 24, 26, 36],
-        "sysvar": [3, 11],
-        "improv": [3, 8, 9, 10, 11, 13, 29, 35],
-        "maxamplitud": 3,
-        "audiowrit": [3, 36],
-        "html5": [3, 8, 36],
-        "element": [3, 7, 8, 11, 12, 13, 15, 16, 22, 34, 36],
-        "expand": [3, 8, 9, 10, 11, 20, 25, 32, 33, 34, 35, 36],
-        "taken": [3, 11, 13, 14, 16, 29, 35, 36],
-        "rom": [3, 6, 8, 11, 12, 19, 29, 31, 32, 33],
-        "audiopath": [3, 34, 36],
-        "look": [3, 11, 14, 15, 29, 32, 34, 36, 38],
-        "templat": [3, 5, 6, 7, 8, 9, 10, 11, 17, 20, 26, 36],
-        "rebuild": [3, 11, 23],
-        "rebuildaudio": [3, 11, 23],
-        "audioformat": [3, 34, 36],
-        "defb": [3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 16, 21, 22, 26, 33, 34, 35, 36],
-        "disassembl": [3, 4, 6, 7, 11, 13, 14, 26, 35, 36, 38],
-        "FOR": [3, 8],
-        "affix": [3, 36],
-        "headerless": [3, 11],
-        "amend": 3,
-        "differ": [3, 5, 13, 15, 33, 36],
-        "step": [3, 6, 9, 11, 14, 15, 27, 29, 36],
-        "explicit": [3, 12],
-        "sublength": [3, 7, 12, 13],
-        "earlier": 3,
-        "retriev": [3, 15, 36],
-        "repeatedli": [3, 36],
-        "until": [3, 11, 29],
-        "condit": [3, 11, 29, 36],
-        "rectangular": [3, 5, 36],
-        "arrai": [3, 7, 8, 15, 36],
-        "def": [3, 5, 6, 7, 9, 10, 11, 12, 13, 15, 16, 21, 22, 29, 32, 33],
-        "strip": [3, 33, 36],
-        "lead": [3, 4, 11, 15, 29, 36],
-        "trail": [3, 36],
-        "whitespac": [3, 7, 15, 34, 35, 36],
-        "dictionari": [3, 9, 10, 11, 12, 15, 16, 24, 34, 36],
-        "function": [3, 11, 12, 15, 29],
-        "manipul": [3, 15, 36],
-        "utf": [3, 36],
-        "encod": [3, 6, 13, 36],
-        "94": [3, 36],
-        "127": [3, 36],
-        "writer": [3, 6, 7, 8, 11, 23, 34, 36],
-        "combin": [3, 13, 14, 15, 36],
-        "ref": [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 17, 23, 26, 33, 36, 38],
-        "tindex": [3, 15, 36],
-        "alpha": [3, 15, 34, 36],
-        "transpar": [3, 6, 15, 34, 36],
-        "colour": [3, 5, 6, 8, 11, 12, 14, 15, 18, 27, 28, 29, 36],
-        "frame": [3, 6, 7, 12, 15, 18, 28, 29, 34, 36],
-        "insid": [3, 10, 11, 13, 29, 34, 36],
-        "twice": [3, 36],
-        "ineffect": 3,
-        "superimpos": [3, 15, 36],
-        "power": [3, 32, 36],
-        "deprec": [3, 5, 6, 7],
-        "64k": [3, 4, 8, 11, 12, 26],
-        "boundari": [3, 4, 11, 12, 26, 36],
-        "refformat": [3, 11, 26],
-        "entrylabel": [3, 11, 20, 23],
-        "entrypointlabel": [3, 11, 20, 23],
-        "label": [3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16, 20, 23, 27, 33, 34, 35, 36],
-        "link": [3, 5, 6, 7, 8, 9, 10, 11, 12, 14, 20],
-        "snapshotreferenceoper": [3, 12],
-        "entrygroup": 3,
-        "memorymap": [3, 5, 7, 9, 16, 36],
-        "upper": [3, 5, 6, 10, 11, 12, 13, 15, 16, 20, 22, 23, 24, 26, 34, 36],
-        "defaultdisassemblystartaddress": [3, 12],
-        "initmodul": [3, 14, 34],
-        "import": [3, 13, 15, 34, 35],
-        "pixel": [3, 15, 36],
-        "plot": 3,
-        "incorrect": 3,
-        "compon": [3, 9, 17],
-        "pluggabl": [3, 12],
-        "object": [3, 12, 15, 16, 34, 36],
-        "size": [3, 11, 12, 13, 16, 25, 26, 28, 34, 36],
-        "defmsiz": [3, 11, 26],
-        "66": [3, 11],
-        "65": [3, 11, 26],
-        "compliant": 3,
-        "linewidth": [3, 11, 26],
-        "ctl": [3, 4, 6, 7, 10, 11, 12, 14, 22, 24, 26, 27],
-        "directori": [3, 5, 6, 7, 9, 11, 12, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 34, 36, 37, 38],
-        "x": [3, 11, 13, 15, 22, 23, 25, 27, 29, 31, 34, 36],
-        "y": [3, 4, 6, 9, 11, 13, 15, 25, 27, 36],
-        "coordin": [3, 13, 15, 25, 36],
-        "anim": [3, 6, 7, 8, 11, 15, 25, 34, 38],
-        "arg": [3, 11, 12, 29, 36],
-        "crop": [3, 6, 9, 11, 25],
-        "caus": [3, 4, 11, 14, 29, 34],
-        "dot": [3, 5, 6, 10, 11, 27, 35, 37],
-        "along": [3, 5, 10, 11, 12, 19, 29, 33, 34, 38],
-        "rsub": [3, 5, 9, 10, 11, 12, 13, 20, 21, 33, 36],
-        "rfix": [3, 8, 9, 10, 11, 13, 20, 21, 33, 36],
-        "defw": [3, 5, 6, 7, 9, 10, 11, 12, 13, 16, 21, 22, 26, 33, 34, 36],
-        "verbos": [3, 11, 20, 21, 23, 31],
-        "keyword": [3, 7, 15, 36],
-        "0x33": [3, 11],
-        "0x35": [3, 11],
-        "labelcolumn": [3, 34],
-        "whenev": [3, 11, 15, 29, 34, 36],
-        "fmt": [3, 16],
-        "ignoreua": [3, 5, 7, 9, 13],
-        "nowarn": [3, 12],
-        "sever": [3, 11, 12, 36],
-        "pc": [3, 11, 13, 18, 28, 29, 31],
-        "closest": [3, 36],
-        "defwsiz": [3, 11, 26],
-        "zero": [3, 5, 6, 10, 11, 13, 14, 16, 24, 31, 34, 35, 36],
-        "subdirectori": [3, 34],
-        "resourc": [3, 6, 7, 9, 11, 23, 36, 38],
-        "pagehead": [3, 7, 9, 16],
-        "gameindex": [3, 16, 34],
-        "asmsinglepagetempl": [3, 8],
-        "asmsinglepag": [3, 16, 23, 34],
-        "javascript": [3, 5, 6, 11, 16, 23, 34],
-        "box": [3, 8, 9, 11, 14, 16, 29, 36],
-        "sectiontyp": [3, 8, 9, 16, 34],
-        "listitem": [3, 16, 34],
-        "bulletpoint": [3, 9, 16, 34],
-        "cross": [3, 4],
-        "rowspan": [3, 5, 6, 16, 36],
-        "daze": [4, 5, 11, 29, 38],
-        "back": [4, 5, 11, 14, 29, 38],
+        "repeat": [3, 11, 12, 14, 17, 34, 39],
+        "drop": [3, 6, 8, 9, 11],
+        "perform": [3, 9, 10, 11, 12, 13, 15, 16, 19, 28, 31, 32, 34, 35, 39],
+        "polar": [3, 12, 32],
+        "ear": [3, 12, 32],
+        "puls": [3, 10, 11, 12, 32],
+        "IN": [3, 11, 12, 32],
+        "argument": [3, 5, 7, 9, 10, 11, 12, 13, 16, 20, 35, 39, 40],
+        "defaultsnapshotformat": [3, 12, 32],
+        "pair": [3, 12, 14, 16, 31, 39],
+        "tracelin": [3, 11, 12, 32, 34, 35],
+        "antirom": [3, 12, 32],
+        "erniewar": [3, 12, 32],
+        "housenka": [3, 12, 32],
+        "sampl": [3, 11, 12, 32, 35, 37, 39],
+        "acceler": [3, 11, 35],
+        "statist": [3, 12, 34],
+        "delai": [3, 11, 12, 16, 32, 34, 37, 39],
+        "shown": [3, 11, 12, 14, 26, 32, 34, 37, 38, 39, 40],
+        "ini": [3, 9, 10, 11, 12, 13, 23, 25, 26, 27, 29, 30, 32, 34],
+        "fe": [3, 11, 12, 19, 31, 32],
+        "hardwar": [3, 9, 11, 12, 22, 39],
+        "state": [3, 9, 11, 12, 13, 14, 34, 37, 39],
+        "attribut": [3, 6, 8, 9, 10, 11, 12, 13, 16, 17, 19, 30, 31, 32, 37, 39],
+        "written": [3, 10, 12, 14, 16, 19, 22, 23, 25, 27, 29, 32, 34, 37, 39, 41],
+        "port": [3, 12, 19, 20, 31, 32, 39],
+        "0xfe": [3, 19, 31, 32],
+        "through": [3, 11, 15, 35, 39],
+        "averag": [3, 39],
+        "filter": [3, 39],
+        "higher": [3, 39],
+        "qualiti": [3, 39],
+        "especi": [3, 14, 39],
+        "multi": [3, 5, 9, 12, 14, 32, 37, 39],
+        "channel": [3, 39],
+        "tune": [3, 39, 41],
+        "avoid": [3, 14, 39],
+        "repetit": [3, 14, 39],
+        "token": [3, 9, 12, 32, 39],
+        "ai": [3, 12, 19, 31, 32, 39],
+        "assembl": [3, 4, 8, 9, 10, 12, 17, 18, 23, 36, 37, 38, 41],
+        "hash": [3, 14],
+        "filenam": [3, 7, 8, 12, 13, 16, 17, 28, 32, 35, 37],
+        "x": [3, 12, 14, 16, 25, 26, 28, 30, 32, 34, 37, 39],
+        "daze": [4, 5, 12, 32, 41],
+        "back": [4, 5, 12, 15, 22, 32, 41],
         "incomplet": [4, 5],
-        "contact": [4, 5, 11, 29, 38],
-        "sam": [4, 5, 11, 29, 38],
-        "cruis": [4, 5, 11, 29, 38],
+        "contact": [4, 5, 12, 32, 41],
+        "sam": [4, 5, 12, 32, 41],
+        "cruis": [4, 5, 12, 32, 41],
         "doc": 4,
-        "src": [4, 11, 16, 25, 28, 29],
+        "src": [4, 12, 17, 28, 31, 32],
         "linux": 4,
         "bsd": 4,
-        "elaps": [4, 11, 18, 28, 29, 36],
-        "cpu": [4, 11, 29, 36],
+        "elaps": [4, 12, 19, 31, 32, 39],
+        "cpu": [4, 12, 32, 39],
         "contact_sam_cruis": 4,
+        "ctl": [4, 6, 7, 10, 11, 12, 13, 15, 25, 27, 29, 30],
         "csc": [4, 5],
-        "extra": [4, 8, 10, 11, 15, 34],
-        "skool2ctl": [4, 5, 6, 7, 8, 9, 10, 13, 14, 35, 38],
+        "ref": [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 17, 18, 26, 29, 36, 39, 41],
+        "extra": [4, 8, 10, 12, 16, 37],
+        "skool2ctl": [4, 5, 6, 7, 8, 9, 10, 14, 15, 38, 41],
         "manic_min": [4, 6],
-        "ixh": [4, 11, 29, 31, 36],
-        "accord": [4, 11, 13, 15, 16, 26, 29, 36],
+        "ixh": [4, 12, 32, 34, 39],
+        "accord": [4, 12, 14, 16, 17, 22, 29, 32, 39],
         "appar": 4,
-        "rudimentari": [4, 14, 24],
-        "static": [4, 14, 24, 38],
+        "caus": [4, 11, 12, 15, 32, 37],
+        "64k": [4, 8, 11, 12, 13, 29],
+        "boundari": [4, 11, 12, 13, 29, 39],
+        "disassembl": [4, 6, 7, 11, 12, 14, 15, 29, 38, 39, 41],
+        "defb": [4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 24, 25, 29, 36, 37, 38, 39],
+        "rudimentari": [4, 15, 27],
+        "static": [4, 15, 27, 41],
+        "analysi": [4, 11, 12, 15, 27, 32, 41],
         "cope": 4,
-        "statu": [4, 11, 13, 16, 26, 34, 35],
-        "buffer": [4, 6, 11, 13, 16, 26, 34, 35],
-        "glossari": [4, 6, 14, 34, 36],
-        "trivia": [4, 5, 6, 34, 38],
+        "cross": [4, 11],
+        "statu": [4, 12, 14, 17, 29, 37, 38],
+        "buffer": [4, 6, 12, 14, 17, 29, 37, 38],
+        "glossari": [4, 6, 15, 37, 39],
+        "trivia": [4, 5, 6, 37, 41],
         "dd": [4, 9],
         "fd": [4, 9],
         "ddcb": 4,
         "fdcb": 4,
         "ed": [4, 7, 8],
-        "nn": [4, 5, 12],
-        "rel": [4, 15, 16, 34, 36],
+        "nn": [4, 5, 13],
+        "rel": [4, 16, 17, 37, 39],
         "across": 4,
+        "y": [4, 6, 9, 11, 12, 14, 16, 28, 30, 39],
+        "lead": [4, 11, 12, 16, 32, 39],
         "nonsens": 4,
         "mnemon": 4,
         "yor": 4,
-        "iyh": [4, 11, 29, 31, 36],
+        "iyh": [4, 12, 32, 34, 39],
         "ed72": 4,
         "sbc": 4,
         "ed7a": 4,
         "adc": 4,
         "ed63": 4,
         "ed6b": 4,
-        "won": [4, 14],
-        "initi": [4, 36],
-        "public": [4, 38],
-        "releas": [4, 34, 37, 38],
+        "won": [4, 15],
+        "initi": [4, 39],
+        "public": [4, 41],
+        "releas": [4, 37, 40, 41],
+        "memorymap": [5, 7, 9, 11, 17, 39],
         "mapdetail": 5,
-        "accordingli": [5, 6, 14],
+        "accordingli": [5, 6, 15],
+        "style": [5, 7, 9, 11, 12, 32, 39],
         "sheet": 5,
-        "per": [5, 11, 13, 24, 34],
-        "stylesheet": [5, 6, 11, 16, 23, 34],
+        "per": [5, 12, 14, 22, 27, 37],
+        "stylesheet": [5, 6, 12, 17, 26, 37],
+        "javascript": [5, 6, 11, 12, 17, 26, 37],
+        "ignoreua": [5, 7, 9, 11, 14],
         "ignoredua": 5,
         "ignoremrcua": 5,
         "correspondingli": 5,
-        "num": [5, 15, 36],
-        "distinguish": [5, 6, 13, 14, 34, 35, 36, 38],
+        "deprec": [5, 6, 7, 11],
+        "num": [5, 16, 39],
+        "distinguish": [5, 6, 14, 15, 37, 38, 39, 41],
         "skool2sft": [5, 6, 7, 8, 10],
-        "preserv": [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 22, 35],
+        "templat": [5, 6, 7, 8, 9, 10, 11, 12, 18, 23, 29, 39],
+        "preserv": [5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 25, 38],
         "enhanc": [5, 6],
-        "rotat": [5, 11, 15, 25, 36],
-        "p": [5, 6, 11, 15, 18, 19, 20, 23, 24, 25, 26, 27, 28, 29, 31],
-        "fact": [5, 13, 14, 34, 38],
-        "correspond": [5, 10, 11, 12, 13, 14, 15, 16, 18, 29, 33, 36],
-        "substitut": [5, 6, 7, 8, 9, 11, 12, 13, 15, 20, 29, 32, 36],
-        "nest": [5, 9, 36],
-        "parenthes": [5, 9, 15, 34, 36],
-        "correctli": [5, 6, 9, 13, 35],
-        "bottom": [5, 8, 36],
-        "bfix": [5, 8, 9, 10, 11, 13, 20, 21, 25, 33, 36],
-        "ofix": [5, 8, 9, 10, 11, 13, 20, 21, 33, 36],
-        "isub": [5, 9, 10, 11, 12, 13, 21, 33, 35, 36],
-        "ssub": [5, 7, 8, 9, 10, 11, 12, 13, 20, 21, 33, 36],
+        "rotat": [5, 12, 16, 28, 39],
+        "dot": [5, 6, 10, 11, 12, 30, 38, 40],
+        "p": [5, 6, 12, 16, 19, 20, 23, 26, 27, 28, 29, 30, 31, 32, 34],
+        "fact": [5, 12, 14, 15, 22, 37, 41],
+        "link": [5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 23],
+        "correspond": [5, 10, 12, 13, 14, 15, 16, 17, 19, 22, 32, 36, 39],
+        "substitut": [5, 6, 7, 8, 9, 12, 13, 14, 16, 23, 32, 35, 39],
+        "nest": [5, 9, 39],
+        "parenthes": [5, 9, 16, 37, 39],
+        "correctli": [5, 6, 9, 12, 14, 22, 38],
+        "rowspan": [5, 6, 11, 17, 39],
+        "bottom": [5, 8, 39],
+        "bfix": [5, 8, 9, 10, 12, 14, 23, 24, 28, 36, 39],
+        "ofix": [5, 8, 9, 10, 12, 14, 23, 24, 36, 39],
+        "isub": [5, 9, 10, 12, 13, 14, 24, 36, 38, 39],
+        "ssub": [5, 7, 8, 9, 10, 12, 13, 14, 23, 24, 36, 39],
+        "rsub": [5, 9, 10, 11, 12, 13, 14, 23, 24, 36, 39],
         "download": 5,
-        "stack": [5, 6, 7, 8, 11, 18, 29, 36],
-        "pointer": [5, 7, 11, 18, 29, 36],
+        "stack": [5, 6, 7, 8, 12, 19, 32, 39],
+        "pointer": [5, 7, 12, 19, 32, 39],
         "indexpageid": 5,
-        "othercod": [5, 36],
+        "othercod": [5, 39],
         "reintroduc": 5,
         "decreas": 5,
-        "wide": [5, 6, 11, 14, 23, 36],
-        "16398": [5, 11, 19],
-        "complet": [5, 6, 11, 15, 29, 31, 34, 38],
-        "bt": [5, 22],
-        "sd": [5, 36],
+        "wide": [5, 6, 12, 15, 26, 39],
+        "16398": [5, 12, 20],
+        "complet": [5, 6, 12, 16, 22, 32, 34, 37, 41],
+        "bt": [5, 25],
+        "sd": [5, 39],
+        "standard": [5, 8, 11, 12, 19, 20, 23, 24, 25, 26, 27, 29, 30, 32, 34, 37],
+        "zero": [5, 6, 10, 11, 12, 14, 15, 17, 27, 34, 37, 38, 39],
         "unit": 5,
         "test": 5,
         "test_skool2html": 5,
         "skool2htmltest": 5,
         "test_html": 5,
         "internet": 5,
-        "connect": [5, 11],
-        "setup": [5, 6],
+        "connect": [5, 12],
+        "setup": [5, 6, 40],
+        "directori": [5, 6, 7, 9, 11, 12, 13, 15, 16, 23, 25, 26, 27, 29, 30, 32, 34, 37, 39, 40, 41],
         "man": [5, 6],
-        "script": [5, 37],
-        "develop": [5, 7, 8, 32, 38],
+        "script": [5, 40],
+        "develop": [5, 7, 8, 35, 40, 41],
         "invalid": 5,
         "xhtml": [5, 8],
-        "longer": [5, 6, 9, 11, 15, 32, 36],
+        "longer": [5, 6, 9, 12, 16, 35, 39],
         "sentenc": 5,
-        "w": [5, 7, 11, 12, 15, 16, 20, 21, 22, 23, 26, 27, 34, 35, 36],
-        "realli": [5, 13],
-        "newlin": [5, 11, 31, 36],
+        "w": [5, 7, 12, 13, 16, 17, 23, 24, 25, 26, 29, 30, 37, 38, 39],
+        "realli": [5, 14],
+        "newlin": [5, 12, 34, 39],
+        "label": [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 17, 23, 26, 30, 36, 37, 38, 39],
         "unaffect": 5,
+        "u": [5, 6, 7, 11, 12, 13, 14, 17, 23, 26, 29, 32, 37, 38, 39],
+        "upper": [5, 6, 10, 11, 12, 13, 14, 16, 17, 23, 25, 26, 27, 29, 37, 39],
         "239": 5,
-        "14": [5, 11, 19, 36],
-        "librari": [5, 6, 34],
+        "14": [5, 12, 20, 39],
+        "librari": [5, 6, 37],
+        "defw": [5, 6, 7, 9, 10, 11, 12, 13, 14, 17, 24, 25, 29, 36, 37, 39],
+        "def": [5, 6, 7, 9, 10, 11, 12, 13, 14, 16, 17, 24, 25, 32, 35, 36],
         "f3": 5,
-        "span": [5, 6, 13, 16, 35, 36],
-        "pagecont": [5, 34],
-        "posit": [5, 10, 11, 29, 36],
+        "span": [5, 6, 14, 17, 38, 39],
+        "differ": [5, 11, 14, 16, 36, 39],
+        "pagecont": [5, 37],
+        "posit": [5, 10, 12, 32, 39],
         "choke": 5,
-        "8x8": [5, 15, 36],
-        "take": [5, 6, 7, 13, 14, 16, 34, 36, 38],
-        "screenshot": [5, 6, 8, 11, 15, 25, 34, 36],
-        "portion": [5, 36],
-        "screen": [5, 8, 9, 11, 14, 19, 27, 36],
-        "graphic": [5, 6, 9, 11, 25, 27, 29, 34, 36, 38],
-        "layout": [5, 14, 15, 34],
-        "index": [5, 6, 11, 14, 15, 16, 20, 23, 29, 36],
-        "palett": [5, 12, 15],
-        "final": [5, 9, 13, 34, 35, 36],
+        "8x8": [5, 16, 39],
+        "take": [5, 6, 7, 14, 15, 17, 37, 39, 41],
+        "screenshot": [5, 6, 8, 12, 16, 28, 37, 39],
+        "rectangular": [5, 11, 39],
+        "portion": [5, 39],
+        "screen": [5, 8, 9, 12, 15, 20, 30, 39],
+        "layout": [5, 15, 16, 37],
+        "index": [5, 6, 12, 15, 16, 17, 23, 26, 32, 39],
+        "colour": [5, 6, 8, 11, 12, 13, 15, 16, 19, 30, 31, 32, 39],
+        "palett": [5, 13, 16],
+        "final": [5, 9, 14, 37, 38, 39],
+        "along": [5, 10, 11, 12, 13, 20, 32, 36, 37, 41],
         "commentless": 5,
         "obsolet": 5,
-        "simplifi": [5, 11, 31],
-        "miss": [5, 11, 12, 29],
-        "restor": [6, 7, 8, 10, 13, 15],
+        "simplifi": [5, 12, 34],
+        "miss": [5, 12, 13, 32],
+        "encod": [6, 11, 14, 39],
+        "restor": [6, 7, 8, 10, 14, 16],
         "jet_set_willi": 6,
-        "48": [6, 11, 29, 31, 32, 36],
-        "css": [6, 11, 14, 16, 23, 34, 36],
-        "concaten": [6, 11, 23, 36],
-        "dir": [6, 11, 20, 23, 29],
-        "locat": [6, 7, 9, 11, 13, 15, 16, 20, 23, 29, 34, 36, 37],
+        "48": [6, 12, 32, 34, 35, 39],
+        "rom": [6, 8, 11, 12, 13, 20, 32, 34, 35, 36],
+        "anim": [6, 7, 8, 11, 12, 16, 28, 37, 41],
+        "resourc": [6, 7, 9, 11, 12, 26, 39, 41],
+        "css": [6, 12, 15, 17, 26, 37, 39],
+        "concaten": [6, 12, 26, 39],
+        "dir": [6, 12, 23, 26, 32],
+        "locat": [6, 7, 9, 12, 14, 16, 17, 23, 26, 32, 37, 39, 40],
         "10000": 6,
-        "fontpath": [6, 34],
-        "javascriptpath": [6, 34],
-        "stylesheetpath": [6, 34],
-        "build": [6, 8, 11, 12, 14, 15, 16, 23, 29, 34, 38],
-        "theme": [6, 11],
-        "green": [6, 14, 34, 36],
-        "plum": [6, 14],
-        "logo": [6, 14, 16, 34],
+        "fontpath": [6, 37],
+        "javascriptpath": [6, 37],
+        "stylesheetpath": [6, 37],
+        "build": [6, 8, 12, 13, 15, 16, 17, 26, 32, 37, 40, 41],
+        "theme": [6, 12],
+        "green": [6, 15, 37, 39],
+        "plum": [6, 15],
+        "logo": [6, 15, 17, 37],
         "renam": 6,
-        "logoimag": [6, 34],
-        "remot": [6, 9, 11, 12, 29, 33, 36],
-        "resolv": [6, 36],
+        "logoimag": [6, 37],
+        "remot": [6, 9, 12, 13, 32, 36, 39],
+        "resolv": [6, 39],
         "remnant": 6,
         "39936": 6,
-        "unlabel": [6, 11, 20, 23],
-        "alwai": [6, 7, 11, 13, 26, 29, 33, 36, 38],
-        "linkoperand": [6, 34],
-        "hex": [6, 7, 8, 9, 11, 14, 15, 20, 22, 23, 24, 26, 34, 36],
-        "triplet": [6, 12, 34],
-        "crash": [6, 11, 19],
-        "alongsid": [6, 11, 13, 14, 16, 23, 34],
+        "unlabel": [6, 12, 23, 26],
+        "alwai": [6, 7, 12, 14, 29, 32, 36, 39, 41],
+        "linkoperand": [6, 37],
+        "hex": [6, 7, 8, 9, 12, 15, 16, 23, 25, 26, 27, 29, 37, 39],
+        "triplet": [6, 13, 37],
+        "crash": [6, 12, 20],
+        "alongsid": [6, 12, 14, 15, 17, 26, 37],
         "did": 6,
-        "obtain": [6, 36, 38],
-        "github": [6, 37, 38],
-        "local": [6, 11, 29],
-        "dark": [6, 11, 14, 23],
-        "open": [6, 9, 11, 14, 15, 27, 29, 34, 35, 36],
-        "close": [6, 9, 11, 15, 29, 35, 36],
+        "obtain": [6, 39, 40, 41],
+        "github": [6, 40, 41],
+        "local": [6, 12, 32],
+        "dark": [6, 12, 15, 26],
+        "open": [6, 9, 12, 15, 16, 30, 32, 37, 38, 39],
+        "close": [6, 9, 12, 16, 32, 38, 39],
+        "transpar": [6, 11, 16, 37, 39],
         "40177": 6,
         "40191": 6,
-        "pristin": [6, 14, 38],
+        "pristin": [6, 15, 41],
         "corrupt": 6,
-        "those": [6, 9, 11, 12, 13, 15, 16, 19, 34, 36],
-        "htmlwriterclass": [6, 11, 15, 23, 34, 36],
-        "fuse": [6, 11, 14, 24],
-        "specemu": [6, 8, 11, 14, 24],
-        "spud": [6, 11, 14, 24],
-        "accur": [6, 14, 36],
-        "increas": [6, 13, 36],
-        "16k": [6, 12],
+        "those": [6, 9, 12, 13, 14, 16, 17, 20, 22, 37, 39],
+        "htmlwriterclass": [6, 12, 16, 26, 37, 39],
+        "writer": [6, 7, 8, 11, 12, 26, 37, 39],
+        "fuse": [6, 12, 15, 27],
+        "specemu": [6, 8, 12, 15, 27],
+        "spud": [6, 12, 15, 27],
+        "accur": [6, 15, 39],
+        "increas": [6, 14, 39],
+        "speed": [6, 11, 12, 22, 37],
+        "16k": [6, 13],
         "37708": 6,
-        "backslash": [6, 35],
-        "involv": [6, 33],
-        "glitch": [6, 34, 36],
-        "escap": [6, 7, 34, 36],
-        "doubl": [6, 34, 35],
-        "inputregistertablehead": [6, 34],
-        "outputregistertablehead": [6, 34],
+        "backslash": [6, 38],
+        "involv": [6, 36],
+        "glitch": [6, 37, 39],
+        "escap": [6, 7, 37, 39],
+        "doubl": [6, 37, 38],
+        "quot": [6, 11, 12, 13, 38],
+        "inputregistertablehead": [6, 37],
+        "outputregistertablehead": [6, 37],
+        "step": [6, 9, 11, 12, 15, 16, 30, 32, 39],
         "face": 6,
-        "rule": [6, 15, 16, 35],
-        "unicod": [6, 36],
+        "rule": [6, 16, 17, 38],
+        "unicod": [6, 39],
         "pop": 6,
         "room": 6,
         "materi": 6,
         "andrew": 6,
         "broad": 6,
-        "j": [6, 11, 13, 23, 35],
+        "j": [6, 12, 14, 26, 38],
         "harston": 6,
         "datat": 6,
         "gif": [6, 8],
-        "png": [6, 8, 11, 15, 25, 34, 36, 38],
-        "apng": [6, 34],
-        "pngalpha": [6, 15, 34, 36],
-        "imagewrit": [6, 8, 12, 15, 36],
+        "png": [6, 8, 12, 16, 28, 37, 39, 41],
+        "apng": [6, 37],
+        "pngalpha": [6, 16, 37, 39],
+        "imagewrit": [6, 8, 13, 16, 39],
+        "crop": [6, 9, 11, 12, 28],
         "nativ": 6,
-        "creation": [6, 8, 34, 36],
+        "creation": [6, 8, 37, 39],
         "gd": 6,
         "pil": 6,
-        "capabl": [6, 36, 38],
-        "pariti": [7, 29],
-        "alon": [7, 11, 19, 23, 34, 36],
-        "compress": [7, 8, 34, 36],
-        "ident": [7, 13, 34, 36],
+        "displai": [6, 7, 10, 11, 12, 13, 14, 16, 17, 22, 30, 37, 39],
+        "capabl": [6, 39, 41],
+        "0x14": [7, 10, 11, 12],
+        "pariti": [7, 32],
+        "alon": [7, 12, 20, 26, 37, 39],
+        "compress": [7, 8, 37, 39],
+        "ident": [7, 14, 37, 39],
         "ed0101010101": 7,
         "erron": 7,
         "compound": 7,
-        "32": [7, 13, 15, 36],
+        "sublength": [7, 11, 13, 14],
+        "32": [7, 14, 16, 39],
         "extran": 7,
-        "rst": [7, 12],
+        "whitespac": [7, 11, 16, 37, 38, 39],
+        "rst": [7, 13],
         "uncompress": 7,
-        "codefil": [7, 34],
-        "addressanchor": [7, 8, 10, 16, 34, 36],
-        "anchor": [7, 8, 9, 10, 16, 34, 36],
-        "old": [7, 36],
-        "flip_udg": [7, 15],
-        "rotate_udg": [7, 15],
-        "method": [7, 12, 13, 36],
-        "htmlwriter": [7, 15, 34, 36],
-        "alt": [7, 15, 16, 36],
-        "img": [7, 12, 15, 36],
+        "codefil": [7, 37],
+        "addressanchor": [7, 8, 10, 17, 37, 39],
+        "anchor": [7, 8, 9, 10, 17, 37, 39],
+        "old": [7, 39],
+        "flip_udg": [7, 16],
+        "rotate_udg": [7, 16],
+        "method": [7, 13, 14, 39],
+        "htmlwriter": [7, 16, 37, 39],
+        "arrai": [7, 8, 11, 16, 39],
+        "alt": [7, 16, 17, 39],
+        "img": [7, 13, 16, 39],
+        "element": [7, 8, 11, 12, 13, 14, 16, 17, 25, 37, 39],
         "table_cel": 7,
         "table_header_cel": 7,
         "table_row": 7,
         "list_item": 7,
-        "intro": [7, 16, 34, 36],
-        "home": [7, 9, 34],
-        "ca": [7, 12, 37, 38],
-        "hungri": [7, 14, 38],
-        "horac": [7, 14, 38],
-        "manic": [7, 38],
-        "miner": [7, 38],
-        "linkinternaloperand": [7, 34],
-        "broken": [7, 8, 11, 14, 29, 32, 35],
-        "jet": [7, 38],
-        "willi": [7, 38],
-        "individu": [7, 11, 12, 13, 18, 29],
-        "entrydescript": [7, 34],
-        "lengthcolumn": [7, 34],
-        "sna2img": [8, 9, 38],
+        "intro": [7, 17, 37, 39],
+        "home": [7, 9, 37],
+        "ca": [7, 13, 40, 41],
+        "hungri": [7, 15, 41],
+        "horac": [7, 15, 41],
+        "manic": [7, 41],
+        "miner": [7, 41],
+        "linkinternaloperand": [7, 37],
+        "broken": [7, 8, 12, 15, 32, 35, 38],
+        "jet": [7, 41],
+        "willi": [7, 41],
+        "keyword": [7, 11, 16, 39],
+        "pagehead": [7, 9, 11, 17],
+        "individu": [7, 12, 13, 14, 19, 32],
+        "entrydescript": [7, 37],
+        "lengthcolumn": [7, 37],
+        "sna2img": [8, 9, 41],
         "equ": [8, 9],
-        "hlh": [8, 36],
-        "area": [8, 27],
-        "symbol": [8, 11, 29, 36],
-        "subtempl": [8, 16],
-        "pad": [8, 9, 36],
+        "hlh": [8, 39],
+        "box": [8, 9, 11, 12, 15, 17, 32, 39],
+        "sectiontyp": [8, 9, 11, 17, 37],
+        "area": [8, 30],
+        "symbol": [8, 12, 32, 39],
+        "improv": [8, 9, 10, 11, 12, 14, 32, 38],
+        "subtempl": [8, 17],
+        "pad": [8, 9, 39],
+        "expand": [8, 9, 10, 11, 12, 23, 28, 35, 36, 37, 38, 39],
+        "asmsinglepagetempl": [8, 11],
         "asmallinon": 8,
         "asm_entri": 8,
-        "sectionprefix": [8, 34],
+        "sectionprefix": [8, 37],
         "scan": 8,
-        "udgfilenam": [8, 34, 36],
-        "pipe": [8, 36],
+        "rfix": [8, 9, 10, 11, 12, 14, 23, 24, 36, 39],
+        "udgfilenam": [8, 37, 39],
+        "pipe": [8, 39],
         "pokes30000": 8,
-        "programmat": [8, 36],
+        "FOR": [8, 11],
+        "programmat": [8, 39],
         "defaultanimationformat": 8,
-        "easier": [8, 9, 13, 14, 36],
-        "65536": [8, 11, 12, 15, 18, 19, 24, 25, 26, 27, 29, 31],
-        "verbatim": [8, 11, 13, 35, 36],
-        "flash": [8, 9, 11, 25, 29, 32, 34],
-        "tile": [8, 9, 11, 15, 25, 27, 38],
-        "detect": [8, 10, 11, 29],
+        "easier": [8, 9, 14, 15, 39],
+        "65536": [8, 12, 13, 16, 19, 20, 27, 28, 29, 30, 32, 34],
+        "verbatim": [8, 12, 14, 38, 39],
+        "flash": [8, 9, 12, 28, 32, 35, 37],
+        "tile": [8, 9, 12, 16, 28, 30, 41],
+        "detect": [8, 10, 12, 22, 32],
         "uncrop": 8,
-        "equal": [8, 12, 15, 34, 35, 36],
-        "ink": [8, 36],
-        "paper": [8, 36],
-        "footer": [8, 9, 13, 14, 34],
-        "reffil": [8, 11, 23, 34],
-        "sole": [9, 29, 36],
-        "var": [9, 11, 16, 20, 23, 36],
-        "exact": [9, 36],
+        "equal": [8, 13, 16, 37, 38, 39],
+        "ink": [8, 39],
+        "paper": [8, 39],
+        "html5": [8, 11, 39],
+        "footer": [8, 9, 14, 15, 37],
+        "reffil": [8, 12, 26, 37],
+        "sole": [9, 32, 39],
+        "var": [9, 12, 17, 23, 26, 39],
+        "exact": [9, 39],
+        "dictionari": [9, 10, 11, 12, 13, 16, 17, 27, 37, 39],
         "unind": 9,
-        "retain": [9, 35, 36, 38],
-        "for0": [9, 36],
-        "agent": [9, 11, 29],
-        "http": [9, 11, 29, 36],
-        "request": [9, 29],
-        "wildcard": [9, 34],
-        "imagepath": [9, 10, 15, 34],
-        "term": [9, 34, 38],
+        "retain": [9, 38, 39, 41],
+        "for0": [9, 39],
+        "agent": [9, 12, 32],
+        "http": [9, 12, 32, 39],
+        "request": [9, 32],
+        "wildcard": [9, 37],
+        "imagepath": [9, 10, 16, 37],
+        "term": [9, 37, 41],
         "scr2": 9,
-        "udgimagepath": [9, 15, 34, 36],
-        "By": [9, 11, 13, 14, 15, 16, 19, 20, 22, 26, 27, 29, 34, 35, 36],
+        "udgimagepath": [9, 16, 37, 39],
+        "By": [9, 12, 14, 15, 16, 17, 20, 22, 23, 25, 29, 30, 32, 37, 38, 39],
         "asm_instruct": [9, 10],
-        "24": [9, 15, 36],
+        "24": [9, 16, 39],
         "237": 9,
-        "entrytyp": [9, 34],
-        "0x": [9, 11, 18, 19, 20, 21, 22, 24, 25, 26, 27, 28, 29, 30, 31, 36],
-        "offset": [9, 29, 36],
-        "limit": [9, 34, 36],
-        "expect": 9,
-        "unless": [9, 14, 32, 36],
-        "keep": [9, 10, 11, 12, 14, 15, 22, 33],
+        "entrytyp": [9, 37],
+        "0x": [9, 12, 19, 20, 23, 24, 25, 27, 28, 29, 30, 31, 32, 33, 34, 39],
+        "offset": [9, 32, 39],
+        "limit": [9, 37, 39],
+        "expect": [9, 12, 22],
+        "unless": [9, 15, 35, 39],
+        "keep": [9, 10, 12, 13, 15, 16, 25, 36],
         "nolabel": 9,
         "8000": 9,
-        "100": [9, 13, 14, 36],
-        "80": [9, 13, 36],
+        "100": [9, 14, 15, 22, 39],
+        "80": [9, 14, 39],
         "widest": 9,
-        "unavail": [9, 36],
+        "unavail": [9, 39],
         "compat": 9,
         "sjasmplu": 9,
-        "distanc": [9, 11, 27],
-        "kei": [9, 11, 12, 29, 36],
+        "find": [9, 11, 12, 15, 16, 30, 35, 37, 41],
+        "distanc": [9, 12, 30],
+        "kei": [9, 12, 13, 32, 39],
+        "bulletpoint": [9, 11, 17, 37],
+        "compon": [9, 11, 18],
         "act": 9,
         "rectangl": 9,
-        "veri": [9, 14, 35],
+        "veri": [9, 15, 38],
         "narrow": 9,
         "dangl": 9,
-        "break": [10, 11, 13, 14, 22],
-        "sna2ctl": [10, 12, 14, 38],
-        "allow": [10, 11, 12, 24, 36],
-        "show_byt": [10, 16],
-        "disassemblytablenumcol": [10, 34],
-        "letter": [10, 11, 12, 13, 14, 15, 24, 35, 36],
-        "could": [10, 13, 14, 15, 16, 36],
-        "happen": [10, 14],
-        "04x": [10, 11, 27, 29, 31, 34, 36],
+        "break": [10, 12, 14, 15, 25],
+        "allow": [10, 12, 13, 27, 39],
+        "show_byt": [10, 17],
+        "disassemblytablenumcol": [10, 37],
+        "letter": [10, 12, 13, 14, 15, 16, 27, 38, 39],
+        "could": [10, 14, 15, 16, 17, 39],
+        "happen": [10, 15],
+        "04x": [10, 12, 30, 32, 34, 37, 39],
+        "insid": [10, 11, 12, 14, 32, 37, 39],
         "accuraci": 10,
-        "algorithm": [10, 36],
-        "neg": [10, 12, 13, 36],
-        "0x13": [10, 11],
+        "algorithm": [10, 39],
+        "neg": [10, 13, 14, 39],
+        "0x13": [10, 12],
         "unprint": 10,
-        "commentwidthmin": [10, 11, 26],
-        "instructionwidth": [10, 11, 26],
-        "reproduc": [10, 11, 35],
-        "invert": [10, 11, 13, 25],
-        "udgtabl": [10, 15],
-        "nowrap": [10, 36],
-        "wrapalign": [10, 36],
-        "incorrectli": [10, 13, 14],
-        "comput": [10, 12, 15, 36],
-        "assum": [11, 13, 15, 18, 34, 36],
-        "less": [11, 18, 19, 36],
-        "usag": 11,
-        "outfil": [11, 18, 28, 29, 31],
-        "minu": [11, 13, 18, 19, 24, 25, 26, 27, 31],
-        "v": [11, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "2c": [11, 18, 25, 28, 29, 31],
-        "help": [11, 18, 28, 29, 31],
-        "0x7ffd": [11, 18, 19, 28, 29, 36],
-        "ve": [11, 14, 19],
-        "addr": [11, 19, 20, 21, 22, 24, 26, 27, 31, 34, 36],
-        "6912": [11, 19],
-        "1366": [11, 19],
-        "0x0556": [11, 19],
-        "togeth": [11, 19],
-        "0x400e": [11, 19],
-        "mean": [11, 16, 19, 29, 34, 35, 36],
-        "deriv": [11, 12, 15, 16],
-        "four": [11, 13, 19, 35, 36],
-        "upon": [11, 13, 19],
-        "return": [11, 12, 14, 15, 19, 36],
-        "inclus": [11, 19, 34],
-        "essenti": [11, 19],
-        "lowest": [11, 19, 34],
-        "usabl": [11, 19],
-        "bare": [11, 12, 19],
-        "23972": 11,
-        "5da4": 11,
-        "23952": [11, 19],
-        "0x5d90": [11, 19],
-        "39": [11, 19],
-        "45": [11, 19],
-        "23977": [11, 19],
-        "0x5da9": [11, 19],
-        "23957": 11,
-        "0x5d95": 11,
-        "smaller": [11, 19, 32, 36],
-        "fed": 11,
-        "mani": [11, 14, 29, 36],
-        "q": [11, 20, 23, 36],
-        "quiet": [11, 20, 23],
-        "Be": [11, 20, 23],
-        "safe": [11, 20, 36],
-        "bugfix": [11, 35],
-        "target": [11, 15, 20, 33, 34],
-        "createlabel": [11, 20, 23],
-        "don": [11, 14, 15, 20, 22, 23, 26, 31],
-        "_": [11, 15, 20, 23, 34],
-        "120": [11, 20, 26],
-        "found": [11, 14, 15, 20, 22, 23, 24, 26, 27, 29, 31, 33, 34, 36, 38],
-        "9c40": 11,
-        "9c41": 11,
-        "40006": [11, 13],
-        "40003": [11, 13],
-        "40004": [11, 13, 29],
-        "9c44": 11,
-        "9c46": 11,
-        "9c43": 11,
-        "overwrot": 11,
-        "had": [11, 14, 29, 32],
-        "k": [11, 22],
-        "keeplin": [11, 22],
-        "preservebas": [11, 22],
-        "associ": [11, 12, 13, 35, 36],
-        "browsabl": [11, 38],
-        "bunch": [11, 33, 38],
-        "further": 11,
-        "skoolfil": [11, 23],
-        "shorthand": [11, 23],
-        "package_dir": [11, 23],
-        "remind": [11, 13, 23, 36],
-        "asmlabel": [11, 23],
-        "asmonepag": [11, 23],
-        "joincss": [11, 23],
-        "outputdir": [11, 23],
-        "rebuildimag": [11, 23],
-        "No": [11, 12, 13, 36],
-        "profil": [11, 14, 24],
-        "8192": 11,
-        "textchar": [11, 24],
-        "elig": [11, 12, 24],
-        "digit": [11, 16, 24, 29, 34, 35, 36],
-        "alphanumer": [11, 24, 36],
-        "textminlengthcod": [11, 24],
-        "12": [11, 13, 24, 36],
-        "textminlengthdata": [11, 24],
-        "video": [11, 25],
-        "dest": [11, 25, 28, 29],
-        "top": [11, 13, 15, 16, 25, 34, 36],
-        "90": [11, 15, 25, 36],
-        "clockwis": [11, 15, 25, 36],
-        "scale": [11, 15, 25, 34, 36],
-        "wxh": [11, 25],
-        "height": [11, 15, 25, 36],
-        "readi": [11, 33],
-        "defbsiz": [11, 26],
-        "entrypointref": [11, 26],
-        "13": [11, 26, 36],
-        "never": [11, 14, 26],
-        "untitl": [11, 26],
-        "short": [11, 32, 34],
-        "analys": [11, 38],
-        "TO": [11, 27, 29],
-        "With": [11, 15, 38],
-        "variou": [11, 12, 29, 34, 36, 37],
-        "graphviz": 11,
-        "tpng": 11,
-        "orphan": 11,
-        "head": [11, 16],
-        "arrow": 11,
-        "far": [11, 13, 14],
-        "tell": [11, 14],
-        "caller": 11,
-        "unconnect": 11,
-        "edgeattribut": [11, 27],
-        "graphattribut": [11, 27],
-        "nodeattribut": [11, 27],
-        "nodelabel": [11, 27],
-        "shape": [11, 27],
-        "record": [11, 14, 27, 29],
-        "nodeid": [11, 27],
-        "02x": [11, 16, 27, 29, 31],
-        "08b": [11, 27],
-        "char": [11, 27, 36],
-        "arrowhead": [11, 27],
-        "cyan": [11, 27, 34, 36],
-        "background": [11, 15, 27, 34, 36],
-        "bgcolor": [11, 27],
-        "infil": [11, 28],
-        "url": [11, 29],
-        "md5sum": [11, 29],
-        "0x15": [11, 29],
-        "0x18": [11, 29],
-        "csw": [11, 29],
-        "0x19": [11, 29],
-        "attempt": [11, 12, 14, 29, 36, 38],
-        "doesn": [11, 13, 14, 15, 16, 29, 34, 36],
-        "third": [11, 13, 29, 36],
-        "complex": [11, 29],
-        "t2": [11, 14, 29],
-        "com": [11, 29, 36],
-        "pub": [11, 29],
-        "keyboard": [11, 29],
-        "34816": [11, 29],
-        "freshli": [11, 29],
-        "boot": [11, 29],
-        "0556": [11, 29],
-        "shortcut": [11, 29],
-        "fulli": [11, 14, 29, 34],
-        "hit": [11, 29],
-        "15": [11, 18, 28, 29, 36],
-        "minut": [11, 29],
-        "reach": [11, 29, 36],
-        "satisfi": [11, 29],
-        "abort": [11, 29],
-        "press": [11, 29],
-        "ctrl": [11, 29],
-        "neither": [11, 12, 15, 29, 36],
-        "significantli": [11, 29],
-        "reduc": [11, 13, 29, 31, 36],
-        "soon": [11, 29, 36],
-        "resum": [11, 29],
-        "playback": [11, 29],
-        "254": [11, 29, 34, 36],
-        "still": [11, 13, 15, 29, 38],
-        "progress": [11, 29],
-        "900": [11, 29, 36],
-        "behaviour": [11, 12, 29],
-        "ffff": [11, 12, 15, 29],
-        "yield": [11, 29, 36],
-        "fifth": [11, 29],
-        "select": [11, 14, 29],
-        "count": [11, 13, 29, 36],
-        "detector": [11, 29],
-        "unrecognis": [11, 29],
-        "microspher": [11, 29],
-        "6695": [11, 29],
-        "794013": [11, 29],
-        "19": [11, 29],
-        "800708": [11, 29],
-        "224": [11, 29],
-        "enter": [11, 29, 37],
-        "respect": [11, 29, 36],
-        "figur": [11, 14, 29],
-        "itali": [11, 29],
-        "1990": [11, 29],
-        "winner": [11, 29],
-        "edit": [11, 14, 29],
-        "09": [11, 29],
-        "publish": [11, 29, 38],
-        "furiou": [11, 29],
-        "alkatraz2": [11, 29],
-        "fireman": [11, 29],
-        "huxlei": [11, 29],
-        "pig": [11, 29],
-        "kentucki": [11, 29],
-        "race": [11, 29],
-        "bleepload": [11, 29, 32],
-        "firebird": [11, 29],
-        "euro": [11, 29],
-        "bizn": [11, 29],
-        "rigel": [11, 29],
-        "reveng": [11, 29],
-        "ball": [11, 29],
-        "breaker": [11, 29],
-        "ballbreak": [11, 29],
-        "terrahawk": [11, 29],
-        "oink": [11, 29],
-        "feder": [11, 29],
-        "17": [11, 13, 29, 36],
-        "11": [11, 13, 16, 29, 36],
-        "1989": [11, 29],
-        "belegost": [11, 29],
-        "starfox": [11, 29],
-        "player": [11, 29],
-        "soccer": [11, 29],
-        "zakliati": [11, 29],
-        "z\u00e1mok": [11, 29],
-        "program\u00e1torov": [11, 29],
-        "integr": [11, 29],
-        "dinaload": [11, 29, 32],
-        "evolut": [11, 29],
-        "golem": [11, 29],
-        "gargoyl": [11, 29, 32],
-        "gremlin": [11, 29],
-        "super": [11, 29],
-        "car": [11, 29],
-        "strike": [11, 29],
-        "eagl": [11, 29],
-        "sky": [11, 29],
-        "ranger": [11, 29],
-        "xenophob": [11, 29],
-        "reflex": [11, 29],
-        "bad": [11, 29],
-        "night": [11, 29],
-        "paul": [11, 29],
-        "owen": [11, 29],
-        "protect": [11, 29],
-        "piskwork": [11, 29],
-        "podraz": [11, 29],
-        "starstrik": [11, 29],
-        "olli": [11, 29],
-        "lissa": [11, 29],
-        "halloween": [11, 29],
-        "quest": [11, 29],
-        "tire": [11, 29],
-        "lode": [11, 29],
-        "runner": [11, 29],
-        "bargain": [11, 29],
-        "basement": [11, 29],
-        "flunki": [11, 29],
-        "speedlock": [11, 29, 32],
-        "big": [11, 29],
-        "troubl": [11, 29],
-        "joe": [11, 29],
-        "banker": [11, 29],
-        "drinker": [11, 29],
-        "western": [11, 29],
-        "girl": [11, 29],
-        "il": [11, 29],
-        "cobra": [11, 29],
-        "di": [11, 29],
-        "cristallo": [11, 29],
-        "negi": [11, 29],
-        "nyero": [11, 29],
-        "phantomasa": [11, 29],
-        "gauntlet": [11, 29],
-        "beer": [11, 29],
-        "trilogi": [11, 29],
-        "ghost": [11, 29],
-        "castl": [11, 29],
-        "tv": [11, 29],
-        "nor": [11, 15, 29, 36],
-        "Its": [11, 29, 36],
-        "down": [11, 29, 36],
-        "keypress": [11, 29],
-        "simultan": [11, 29],
-        "cap": [11, 29],
-        "shift": [11, 29, 36],
-        "ss": [11, 29],
-        "cursor": [11, 29],
-        "goto": [11, 29],
-        "go": [11, 13, 14, 15, 29, 36],
-        "gosub": [11, 29],
-        "deffn": [11, 29],
-        "fn": [11, 29],
-        "0x0605": [11, 29],
-        "0x13be": [11, 29],
-        "34999": [11, 29],
-        "random": [11, 29],
-        "usr": [11, 15, 29],
-        "35000": [11, 29],
-        "iyl": [11, 29, 31, 36],
-        "denot": [11, 13, 29, 31, 35],
-        "shadow": [11, 18, 28, 29, 31, 36],
-        "maintain": [11, 29, 36, 38],
-        "synchronis": [11, 29],
-        "adjust": [11, 13, 29, 36],
-        "desynchronis": [11, 29],
-        "overwritten": 11,
-        "23755": [11, 30],
-        "depth": [11, 31, 36],
-        "patch": [11, 31],
-        "stat": [11, 31],
-        "too": [11, 13, 14, 15, 29, 31, 35],
-        "silent": 11,
-        "vv": [11, 31],
-        "track": [11, 15, 36],
-        "speaker": [11, 31, 36],
-        "sound": [11, 14, 31, 36, 38],
-        "real": 11,
-        "traceline2": [11, 31],
-        "tracelinedecim": [11, 31],
-        "dv": [11, 31],
-        "tracelinedecimal2": [11, 31],
-        "dvv": [11, 31],
-        "traceoperanddecim": [11, 31],
-        "reli": 12,
-        "global": 12,
-        "controldirectivecompos": 12,
-        "skoolctl": 12,
-        "controlfilegener": 12,
-        "snactl": 12,
-        "htmltemplateformatt": 12,
-        "skoolhtml": [12, 15, 34],
-        "templateformatt": 12,
-        "instructionutil": 12,
-        "skoolpars": 12,
-        "operandevalu": 12,
-        "operandformatt": 12,
-        "snapshotread": 12,
-        "snapshotreferencecalcul": 12,
-        "snaskool": 12,
-        "dj": 12,
-        "most": [12, 14, 15, 36],
-        "respons": 12,
-        "common": [12, 38],
-        "get_siz": 12,
-        "preserve_bas": 12,
-        "tupl": [12, 15, 36],
-        "00000001": 12,
-        "c1": 12,
-        "encount": [12, 36],
-        "recov": 12,
-        "rais": 12,
-        "skoolparsingerror": 12,
-        "repons": 12,
-        "generate_ctl": 12,
-        "code_map": 12,
-        "text_char": 12,
-        "text_min_length_cod": 12,
-        "text_min_length_data": 12,
-        "collect": [12, 16, 38],
-        "asm_hex": 12,
-        "asm_low": 12,
-        "defb_siz": 12,
-        "defm_siz": 12,
-        "defw_siz": 12,
-        "defb_rang": 12,
-        "defm_rang": 12,
-        "defs_rang": 12,
-        "defw_rang": 12,
-        "dh": 12,
-        "62": [12, 36],
-        "format_templ": [12, 15],
-        "page_id": [12, 16],
-        "rgb": [12, 34, 36],
-        "image_fnam": 12,
-        "extens": 12,
-        "write_imag": 12,
-        "img_fil": 12,
-        "calculate_refer": 12,
-        "remote_entri": 12,
-        "set_byte_valu": 12,
-        "substitute_label": 12,
-        "indirect": [12, 36],
-        "rref": 12,
-        "ref_instruct": 12,
-        "address_": 12,
-        "use_label": 12,
-        "signatur": [12, 36],
-        "eval_int": 12,
-        "valueerror": 12,
-        "eval_str": 12,
-        "split_operand": 12,
-        "format_byt": 12,
-        "format_word": 12,
-        "is_char": 12,
-        "can_read": 12,
-        "get_snapshot": 12,
-        "131072": [12, 15],
-        "c000": 12,
-        "relev": [12, 13, 16, 33, 35],
-        "snapshoterror": 12,
-        "asterisk": [12, 36],
-        "djnz": [12, 34, 36],
-        "alphabet": 12,
-        "addition": 12,
-        "facilit": 12,
-        "get_compon": 12,
-        "constructor": 12,
-        "get_valu": 12,
-        "organis": [13, 38],
-        "coincid": 13,
-        "stuff": 13,
-        "24832": 13,
-        "25088": 13,
-        "interest": [13, 34],
-        "25344": 13,
-        "24831": 13,
-        "25087": 13,
-        "25343": 13,
-        "onward": 13,
-        "6000": [13, 35],
-        "6100": 13,
-        "6200": 13,
-        "6300": 13,
-        "besid": [13, 14],
-        "thing": [13, 14, 15],
-        "except": [13, 14, 29, 34, 36],
-        "And": [13, 16, 35, 36],
-        "24592": 13,
-        "sometim": 13,
-        "whatev": [13, 14],
-        "odd": [13, 36],
-        "mostli": [13, 14],
-        "32800": 13,
-        "But": [13, 15, 36],
-        "32809": 13,
-        "32821": 13,
-        "32831": 13,
-        "21": 13,
-        "40013": 13,
-        "whichev": 13,
-        "closer": 13,
-        "care": [13, 14, 16, 35, 36],
-        "great": 13,
-        "24580": 13,
-        "24588": 13,
-        "implicitli": 13,
-        "normal": 13,
-        "achiev": 13,
-        "24583": 13,
-        "24586": 13,
-        "24589": 13,
-        "24581": 13,
-        "abbrevi": 13,
-        "25": 13,
-        "chunk": 13,
-        "32793": 13,
-        "32818": 13,
-        "32843": 13,
-        "glanc": 13,
-        "much": [13, 14, 38],
-        "recast": 13,
-        "simpler": [13, 14, 15],
-        "consid": [13, 36],
-        "snippet": 13,
-        "49155": 13,
-        "sprite": [13, 15, 34, 36],
-        "49156": 13,
-        "problem": [13, 15, 36],
-        "solut": 13,
-        "robust": 13,
-        "31995": 13,
-        "belong": [13, 34],
-        "b31995": 13,
-        "31996": 13,
-        "rare": 13,
-        "ten": 13,
-        "30036": 13,
-        "30038": 13,
-        "succinctli": 13,
-        "sens": 13,
-        "bodi": [13, 34, 36],
-        "20": [13, 36],
-        "40010": 13,
-        "40020": 13,
-        "50000": [13, 36],
-        "50001": [13, 35],
-        "50003": 13,
-        "50004": 13,
-        "50006": 13,
-        "50007": 13,
-        "10001111": 13,
-        "b1": 13,
-        "d2": 13,
-        "h1": 13,
-        "m1": 13,
-        "h2": 13,
-        "40008": 13,
-        "43": 13,
-        "5f": 13,
-        "40005": 13,
-        "11110000": 13,
-        "2b": 13,
-        "h4": 13,
-        "d1": 13,
-        "01010101": 13,
-        "57": 13,
-        "00001111": 13,
-        "0f": [13, 36],
-        "93": 13,
-        "40007": 13,
-        "a0": 13,
-        "hb4": 13,
-        "10000001": 13,
-        "nb4": 13,
-        "hn4": 13,
-        "130": 13,
-        "hi": 13,
-        "Such": 13,
-        "n1": 13,
-        "c2": [13, 36],
-        "n2": 13,
-        "hell": 13,
-        "One": [13, 15, 36],
-        "30001": 13,
-        "solv": [13, 15],
-        "scheme": 13,
-        "copyright": [13, 16, 34, 35, 36, 38],
-        "2018": [13, 35],
-        "smith": [13, 35],
-        "c65535": 13,
-        "contigu": 13,
-        "whole": [13, 36],
-        "li": 13,
-        "cent": 13,
-        "sign": [13, 36, 37],
-        "yet": [13, 14, 15],
-        "plain": [13, 15, 33, 34, 36],
-        "discuss": 14,
-        "ll": 14,
-        "unpack": [14, 37],
-        "hungry_horac": 14,
-        "prefer": [14, 15, 16, 34, 35],
-        "grab": 14,
-        "mere": 14,
-        "convent": 14,
-        "fond": 14,
-        "tradit": 14,
-        "perhap": 14,
-        "sk": 14,
-        "kit": 14,
-        "particular": [14, 33, 37],
-        "tutori": 14,
-        "best": 14,
-        "stick": 14,
-        "treat": 14,
-        "needless": 14,
-        "sai": [14, 15],
-        "particularli": [14, 34],
-        "idea": [14, 16],
-        "onc": [14, 16, 36],
-        "handi": 14,
-        "come": 14,
-        "23296": 14,
-        "25167": 14,
-        "meaning": 14,
-        "nicer": 14,
-        "web": 14,
-        "browser": 14,
-        "explanatori": 14,
-        "customis": [14, 15],
-        "again": [14, 36],
-        "sport": 14,
-        "plan": 14,
-        "job": 14,
-        "accid": 14,
-        "examin": 14,
-        "better": [14, 15, 36, 38],
-        "good": [14, 16],
-        "ideal": [14, 15],
-        "plai": 14,
-        "exercis": 14,
-        "possibl": [14, 15, 34, 35, 36],
-        "rzx": 14,
-        "tracer": 14,
-        "happi": 14,
-        "decent": 14,
-        "consum": 14,
-        "probabl": [14, 37],
-        "nervou": 14,
-        "breakdown": 14,
-        "approach": 14,
-        "skim": 14,
-        "familiar": 14,
-        "obviou": 14,
-        "draw": 14,
-        "relat": [14, 15, 33],
-        "goe": 14,
-        "death": 14,
-        "choic": 14,
-        "recommend": [14, 36],
-        "benefit": 14,
-        "danger": 14,
-        "potenti": 14,
-        "ever": 14,
-        "simpl": [14, 15, 34, 36],
-        "rather": 14,
-        "highli": 14,
-        "tempt": 14,
-        "manual": [14, 15, 36],
-        "extrem": 14,
-        "easili": [14, 15, 34],
-        "difficult": 14,
-        "26429": 14,
-        "decrement": 14,
-        "kind": [14, 34, 36],
-        "reorganis": 14,
-        "regener": 14,
-        "lose": 14,
-        "intact": 14,
-        "fit": [14, 35],
-        "understand": 14,
-        "carefulli": 14,
-        "infinitel": 14,
-        "infinit": 14,
-        "purpl": 14,
-        "changelog": [14, 16, 17, 34],
-        "gamedir": [14, 34],
-        "suit": 15,
-        "inadequ": 15,
-        "certain": [15, 34, 35, 36],
-        "task": 15,
-        "larg": 15,
-        "compos": [15, 34],
-        "tediou": 15,
-        "impract": 15,
-        "Or": [15, 34, 36],
-        "core": 15,
-        "subclass": [15, 36],
-        "share": 15,
-        "peopl": 15,
-        "minim": 15,
-        "gamehtmlwrit": 15,
-        "gameasmwrit": 15,
-        "get": [15, 35, 36, 37],
-        "lib": 15,
-        "python3": 15,
-        "dist": 15,
-        "implement": 15,
-        "awar": 15,
-        "itself": [15, 16],
-        "cwd": 15,
-        "sprite_id": 15,
-        "self": [15, 36],
-        "build_sprit": 15,
-        "handle_imag": 15,
-        "strftime": 15,
-        "evalu": [15, 16, 36],
-        "summari": 15,
-        "expand_macronam": 15,
-        "expand_sprit": 15,
-        "expand_timestamp": 15,
-        "therefor": [15, 36],
-        "skoolmacro": 15,
-        "parse_image_macro": 15,
-        "spriteid": 15,
-        "crop_rect": 15,
-        "sprite3": 15,
-        "parse_int": 15,
-        "restrict": 15,
-        "parse_str": 15,
-        "unmatch": [15, 35],
-        "delimit": [15, 16, 35, 36],
-        "parse_bracket": 15,
-        "param": [15, 16, 20, 22, 23, 24, 26, 27, 29, 31],
-        "extract": [15, 29],
-        "get_sect": 15,
-        "section_nam": 15,
-        "trim": 15,
-        "section_typ": 15,
-        "infix": 15,
-        "get_dictionari": 15,
-        "dict": 15,
-        "pageid": [15, 16, 34, 36],
-        "slice": 15,
-        "0000": 15,
-        "len": 15,
-        "temporarili": 15,
-        "push_snapshot": 15,
-        "pop_snapshot": 15,
-        "recent": [15, 36],
-        "get_snapshot_nam": [15, 36],
-        "invers": 15,
-        "inverseaddress": 15,
-        "expand_invers": 15,
-        "udg_data": 15,
-        "deep": 15,
-        "x_offset": 15,
-        "y_offset": 15,
-        "dimension": 15,
-        "100th": [15, 36],
-        "path_id": 15,
-        "df_addr": 15,
-        "af_addr": 15,
-        "31": [15, 36],
-        "2d": 15,
-        "overlay_udg": 15,
-        "bg": [15, 36],
-        "fg": [15, 36],
-        "rattr": 15,
-        "rbyte": 15,
-        "overlai": 15,
-        "foreground": [15, 36],
-        "init_pag": 15,
-        "init": 15,
-        "post": [15, 36],
-        "__init__": 15,
-        "univers": 16,
-        "index_href": 16,
-        "page_head": 16,
-        "root": [16, 34, 36],
-        "href": [16, 36],
-        "next_entri": 16,
-        "prev_entri": 16,
-        "compris": 16,
-        "map_href": 16,
-        "ones": [16, 36],
-        "end_com": 16,
-        "input_regist": 16,
-        "output_regist": 16,
-        "block_com": 16,
-        "comment_rowspan": 16,
-        "bfmt": 16,
-        "3e01": 16,
-        "hard": [16, 36],
-        "endif": 16,
-        "link_text": [16, 36],
-        "other_text": 16,
-        "supplementari": 16,
-        "subitem": [16, 34],
-        "subsubitem": [16, 34],
-        "preformat": 16,
-        "recurs": 16,
-        "m_list_item": 16,
-        "colspan": [16, 36],
-        "m_table_row": 16,
-        "endfor": 16,
-        "iter": 16,
-        "unwant": 16,
-        "alic": 16,
-        "bob": 16,
-        "carol": 16,
-        "exclud": 16,
-        "syntact": [16, 36],
-        "truth": [16, 36],
-        "represent": 16,
-        "val": 16,
-        "my": 16,
-        "stock": [16, 34],
-        "routinesmap": [16, 34, 36],
-        "codeid": [16, 34],
-        "dii": 17,
-        "migrat": 17,
-        "white": [18, 34, 36],
-        "0x1f": [18, 28, 29, 31],
-        "10072": [18, 28, 29, 31],
-        "fffd": [18, 28, 29, 36],
-        "0xfffd": [18, 28, 29, 36],
-        "flop": [18, 28, 29],
-        "34943": [18, 29],
-        "bank6": [18, 36],
-        "io": 21,
-        "stdout": 22,
-        "font32768": 25,
-        "26": [25, 33],
-        "sna2kool": 26,
-        "mismatch": 29,
-        "modif": [29, 34],
-        "destin": [29, 34],
-        "subtract": 29,
-        "analog": 29,
-        "commonli": 29,
-        "overflow": 29,
-        "past": 29,
-        "stage": 29,
-        "2048": 29,
-        "2k": 29,
-        "remaind": 29,
-        "32767": 29,
-        "33023": 29,
-        "0x6000": 29,
-        "85": 29,
-        "40002": 29,
-        "23552": [29, 36],
-        "23754": 29,
-        "5c00": 29,
-        "5cca": 29,
-        "63": [29, 36],
-        "23610": [29, 36],
-        "ftp": 29,
-        "25000": 29,
-        "32798": 31,
-        "49193": 31,
-        "incompat": 32,
-        "tip": 32,
-        "define2": 32,
-        "redefin": [32, 36],
-        "refus": 32,
-        "2168": 32,
-        "cyberlod": 32,
-        "elit": 32,
-        "uni": 32,
-        "exceler": 32,
-        "ftl": 32,
-        "hewson": 32,
-        "slowload": 32,
-        "injectaload": 32,
-        "poliload": 32,
-        "softlock": 32,
-        "zydroload": 32,
-        "dump": 32,
-        "explain": 33,
-        "transform": 33,
-        "entail": 33,
-        "discard": 33,
-        "seen": [33, 35],
-        "irrelev": 33,
-        "32459": 33,
-        "cp": 33,
-        "27": 33,
-        "markup": [33, 34, 35, 36],
-        "augment": 34,
-        "sectionnam": 34,
-        "clockspe": 34,
-        "cycl": 34,
-        "3500000": [34, 36],
-        "3546900": 34,
-        "contentionbegin": [34, 36],
-        "14334": 34,
-        "14361": 34,
-        "contentionend": [34, 36],
-        "57248": 34,
-        "58041": 34,
-        "contentionfactor": [34, 36],
-        "percentag": 34,
-        "slowdown": 34,
-        "51": 34,
-        "framedur": 34,
-        "69888": 34,
-        "70908": 34,
-        "interruptdelai": [34, 36],
-        "942": 34,
-        "1584": 34,
-        "sampler": 34,
-        "rate": 34,
-        "hz": 34,
-        "44100": 34,
-        "model": 34,
-        "00fe00": [34, 36],
-        "black": [34, 36],
-        "000000": 34,
-        "blue": [34, 36],
-        "197": 34,
-        "0000c5": 34,
-        "red": [34, 36],
-        "c50000": [34, 36],
-        "magenta": [34, 36],
-        "c500c5": 34,
-        "198": 34,
-        "00c600": 34,
-        "00c6c5": 34,
-        "yellow": [34, 36],
-        "c5c600": 34,
-        "205": 34,
-        "cdc6cd": 34,
-        "bright_blu": 34,
-        "0000ff": 34,
-        "bright_r": 34,
-        "ff0000": 34,
-        "bright_magenta": 34,
-        "ff00ff": 34,
-        "bright_green": 34,
-        "00ff00": 34,
-        "bright_cyan": 34,
-        "00ffff": 34,
-        "bright_yellow": 34,
-        "ffff00": 34,
-        "bright_whit": 34,
-        "ffffff": 34,
-        "elsewher": [34, 36],
-        "similar": 34,
-        "virtu": 34,
-        "small": 34,
-        "30010": 34,
-        "spritevari": 34,
-        "32770": [34, 35],
-        "32772": [34, 36],
-        "aspect": 34,
-        "flac": [34, 36],
-        "mp3": [34, 36],
-        "ogg": [34, 36],
-        "asm_single_pag": 34,
-        "unlink": 34,
-        "serv": 34,
-        "65280": 34,
-        "ff00": 34,
-        "opaqu": 34,
-        "pngcompressionlevel": 34,
-        "highest": 34,
-        "pngenableanim": 34,
-        "unanim": 34,
-        "themselv": 34,
-        "groupid": 34,
-        "page1id": 34,
-        "page2id": 34,
-        "datamap": 34,
-        "gamestatusbuff": [34, 36],
-        "graphicglitch": 34,
-        "messagesmap": 34,
-        "unusedmap": 34,
-        "uniqu": 34,
-        "pagebytecolumn": 34,
-        "under": [34, 38],
-        "bcgstuw": 34,
-        "codepath": 34,
-        "mutual": 34,
-        "exclus": 34,
-        "gbuffer": 34,
-        "fontimagepath": [34, 36],
-        "screenshotimagepath": [34, 36],
-        "destdir": 34,
-        "seq": 34,
-        "abcd": 34,
-        "pre": [34, 36],
-        "pathnam": 34,
-        "Their": 34,
-        "underscor": 34,
-        "hyphen": 34,
-        "bcgistuw": 35,
-        "grid": 35,
-        "within": [35, 36],
-        "likewis": 35,
-        "simpli": [35, 36],
-        "regard": 35,
-        "quit": 35,
-        "readabl": 35,
-        "answer": 35,
-        "r32768": 35,
-        "bcdgirstuw": 35,
-        "c24296": 35,
-        "57935": 35,
-        "24372": 35,
-        "24373": 35,
-        "24378": 35,
-        "28975": 35,
-        "28902": 35,
-        "28977": 35,
-        "bold": 35,
-        "34": 35,
-        "92": 35,
-        "total": 35,
-        "greater": [35, 36],
-        "craft": 35,
-        "b50000": 35,
-        "b50002": 35,
-        "b50003": 35,
-        "qualifi": 35,
-        "subtitut": 35,
-        "c24573": 35,
-        "invis": 35,
-        "macrori1": 36,
-        "ri2": 36,
-        "oi1": 36,
-        "oi2": 36,
-        "rs1": 36,
-        "rs2": 36,
-        "os1": 36,
-        "os2": 36,
-        "ri1": 36,
-        "udg39144": 36,
-        "56": 36,
-        "udg30115": 36,
-        "udg51673": 36,
-        "c9d9": 36,
-        "unambigu": 36,
-        "51672": 36,
-        "peek51672": 36,
-        "permit": 36,
-        "modulo": 36,
-        "bitwis": 36,
-        "boolean": 36,
-        "comparison": 36,
-        "ye": 36,
-        "unbalanc": 36,
-        "string1": 36,
-        "string2": 36,
-        "outer": 36,
-        "inner": 36,
-        "undefin": 36,
-        "constitut": 36,
-        "for37159": 36,
-        "37168": 36,
-        "peekn": 36,
-        "37159": 36,
-        "peek37159": 36,
-        "peek37168": 36,
-        "ultim": 36,
-        "ia": 36,
-        "i0": 36,
-        "ib": 36,
-        "i1": 36,
-        "sa": 36,
-        "s0": 36,
-        "sb": 36,
-        "s1": 36,
-        "placehold": 36,
-        "outcom": 36,
-        "prod": 36,
-        "product": 36,
-        "num15": 36,
-        "def1": 36,
-        "amount": 36,
-        "isol": 36,
-        "surround": 36,
-        "ifzero": 36,
-        "def2": 36,
-        "parenthesi": 36,
-        "evalexpr": 36,
-        "peek29435": 36,
-        "29435": 36,
-        "00111110": 36,
-        "forstart": 36,
-        "fsep": 36,
-        "gap": 36,
-        "for31734": 36,
-        "31736": 36,
-        "31734": 36,
-        "156": 36,
-        "s2": 36,
-        "svar": 36,
-        "31735": 36,
-        "erefaddr": 36,
-        "refaddr": 36,
-        "entryt": 36,
-        "explicitli": 36,
-        "format0": 36,
-        "ifexpr": 36,
-        "peek47134": 36,
-        "47134": 36,
-        "170": 36,
-        "xoxoxoxo": 36,
-        "dollar": [36, 37],
-        "k1": 36,
-        "k2": 36,
-        "v2": 36,
-        "mapkei": 36,
-        "for56112": 36,
-        "56114": 36,
-        "peekq": 36,
-        "56112": 36,
-        "peekaddr": 36,
-        "peek33879": 36,
-        "33879": 36,
-        "straddr": 36,
-        "str47154": 36,
-        "str47158": 36,
-        "str47161": 36,
-        "47154": 36,
-        "47158": 36,
-        "tw": 36,
-        "47161": 36,
-        "321": 36,
-        "approxim": 36,
-        "period": 36,
-        "factor": 36,
-        "slower": 36,
-        "sure": 36,
-        "similarli": 36,
-        "liter": 36,
-        "1000": 36,
-        "1500": 36,
-        "800": 36,
-        "1200": 36,
-        "200": 36,
-        "flatten": 36,
-        "1131000": 36,
-        "durat": 36,
-        "323": 36,
-        "audio4": 36,
-        "beep": 36,
-        "32782": 36,
-        "32771": 36,
-        "32773": 36,
-        "32777": 36,
-        "32779": 36,
-        "32780": 36,
-        "invoc": 36,
-        "basenam": 36,
-        "bankpag": 36,
-        "udg50000": 36,
-        "hasn": 36,
-        "methodnam": 36,
-        "chrnum": 36,
-        "8593": 36,
-        "163": 36,
-        "26751": 36,
-        "chr169": 36,
-        "26572": 36,
-        "chr127": 36,
-        "daddr": 36,
-        "centr": 36,
-        "r27126": 36,
-        "d27126": 36,
-        "27126": 36,
-        "udg32768": 36,
-        "routinesmapintro": 36,
-        "chuntei": 36,
-        "ul": 36,
-        "nvalu": 36,
-        "hwidth": 36,
-        "dwidth": 36,
-        "n15": 36,
-        "00015": 36,
-        "0x000f": 36,
-        "raddr": 36,
-        "thereof": 36,
-        "r25820": 36,
-        "25820": 36,
-        "r40000": 36,
-        "unexpand": 36,
-        "beef": 36,
-        "regreg": 36,
-        "af": 36,
-        "24623": 36,
-        "xa": 36,
-        "xf": 36,
-        "xbc": 36,
-        "xde": 36,
-        "xhl": 36,
-        "halt": 36,
-        "13256": 36,
-        "672": 36,
-        "443": 36,
-        "13699": 36,
-        "14371": 36,
-        "techniqu": 36,
-        "160": 36,
-        "space8": 36,
-        "t56832": 36,
-        "score": 36,
-        "t49152": 36,
-        "class1": 36,
-        "class2": 36,
-        "td": 36,
-        "side": 36,
-        "On": [36, 37],
-        "th": 36,
-        "r2": 36,
-        "stand": 36,
-        "dash": 36,
-        "plu": 36,
-        "meet": 36,
-        "candid": 36,
-        "rightmost": 36,
-        "tstatesstart": 36,
-        "larger": 36,
-        "c30000": 36,
-        "tstates30000": 36,
-        "tstates40000": 36,
-        "50002": 36,
-        "tstates50002": 36,
-        "99": 36,
-        "turn": 36,
-        "1295": 36,
-        "32776": 36,
-        "32774": 36,
-        "1703941": 36,
-        "precis": 36,
-        "unlik": 36,
-        "behav": 36,
-        "rise": 36,
-        "allevi": 36,
-        "rewritten": 36,
-        "udgarray4": 36,
-        "30120": 36,
-        "copy1": 36,
-        "central": 36,
-        "2x2": 36,
-        "4x4": 36,
-        "0123456789": 36,
-        "overx": 36,
-        "xoffset": 36,
-        "yoffset": 36,
-        "rmode": 36,
-        "udgarray2": 36,
-        "30024": 36,
-        "udg30032": 36,
-        "30040": 36,
-        "over0": 36,
-        "plotx": 36,
-        "corner": 36,
-        "udg30000": 36,
-        "plot1": 36,
-        "arrang": 36,
-        "df": 36,
-        "udgaddr": 36,
-        "interv": 36,
-        "success": 36,
-        "180": 36,
-        "anticlockwis": 36,
-        "safe_kei": 36,
-        "39144": 36,
-        "udgarraywidth": 36,
-        "spec1": 36,
-        "spec2": 36,
-        "attrs1": 36,
-        "attrs2": 36,
-        "33008": 36,
-        "33015": 36,
-        "33792": 36,
-        "63476": 36,
-        "63525": 36,
-        "xn": 36,
-        "39648x3": 36,
-        "39648": 36,
-        "32769x2": 36,
-        "32769": 36,
-        "32888": 36,
-        "base_sprit": 36,
-        "32784": 36,
-        "udgswidth": 36,
-        "ufram": 36,
-        "slot": 36,
-        "udgs2": 36,
-        "eight": 36,
-        "30009": 36,
-        "30018": 36,
-        "30027": 36,
-        "screenshot1": 36,
-        "name1": 36,
-        "name2": 36,
-        "frame1": 36,
-        "frame2": 36,
-        "3d00": 36,
-        "peep": 36,
-        "50": 36,
-        "hello_there_peep": 36,
-        "region": 36,
-        "fall": 36,
-        "leftmost": 36,
-        "topmost": 36,
-        "udg40000": 36,
-        "onto": 36,
-        "bright": 36,
-        "drawn": 36,
-        "pokesaddr": 36,
-        "increment": 36,
-        "udg_orig": 36,
-        "suppos": 36,
-        "pokes32772": 36,
-        "136": 36,
-        "udg_fix": 36,
-        "capit": 36,
-        "fill": 36,
-        "peeku": 36,
-        "asmudg30000": 36,
-        "72": 36,
-        "144": 36,
-        "104": 36,
-        "nine": 36,
-        "peek32768": 36,
-        "cumbersom": 36,
-        "tile32768": 36,
-        "tilen": 36,
-        "seri": 36,
-        "tiles32768": 36,
-        "latest": [37, 38],
-        "stabl": [37, 38],
-        "tarbal": 37,
-        "pypi": 37,
-        "pip": 37,
-        "choos": 37,
-        "throughout": 37,
-        "prompt": 37,
-        "slash": 37,
-        "inde": 38,
-        "reader": 38,
-        "friendli": 38,
-        "reliabl": 38,
-        "discov": 38,
-        "neatli": 38,
-        "demonstr": 38,
-        "richard": 38,
-        "dymond": 38,
-        "contribut": 38,
-        "philip": 38,
-        "anderson": 38,
-        "free": 38,
-        "redistribut": 38,
-        "gnu": 38,
-        "licens": 38,
-        "foundat": 38,
-        "held": 38,
-        "amstrad": 38,
-        "who": 38,
-        "kindli": 38,
-        "permiss": 38
+        "commentwidthmin": [10, 12, 29],
+        "instructionwidth": [10, 12, 29],
+        "interpret": [10, 11, 12, 15, 32, 39],
+        "reproduc": [10, 12, 38],
+        "invert": [10, 12, 14, 28],
+        "udgtabl": [10, 16],
+        "nowrap": [10, 39],
+        "wrapalign": [10, 39],
+        "incorrectli": [10, 14, 15],
+        "comput": [10, 13, 16, 39],
+        "finish": [11, 12, 15, 32, 41],
+        "contend": [11, 35, 39],
+        "4000": [11, 12, 32],
+        "7fff": [11, 12, 32],
+        "alkatraz": [11, 12, 32],
+        "05": [11, 12, 32, 34],
+        "0a": [11, 12, 14, 32],
+        "0b": [11, 12, 14, 32],
+        "alternative2": [11, 12, 32],
+        "boguslaw": [11, 12, 32],
+        "juza": [11, 12, 32],
+        "bulldog": [11, 12, 32],
+        "crl": [11, 12, 32],
+        "crl2": [11, 12, 32],
+        "crl3": [11, 12, 32],
+        "crl4": [11, 12, 32],
+        "cybexlab": [11, 12, 32],
+        "delphin": [11, 12, 32],
+        "design": [11, 12, 13, 32],
+        "gargoyle2": [11, 12, 32],
+        "gremlin2": [11, 12, 32],
+        "micropros": [11, 12, 32],
+        "micro": [11, 12, 32],
+        "mirrorsoft": [11, 12, 32],
+        "pala": [11, 12, 32],
+        "raxoft": [11, 12, 32],
+        "realtim": [11, 12, 32],
+        "silverbird": [11, 12, 32],
+        "softwar": [11, 12, 32, 37, 41],
+        "project": [11, 12, 32],
+        "sparkler": [11, 12, 32],
+        "suzi": [11, 12, 32],
+        "soft": [11, 12, 32],
+        "soft2": [11, 12, 32],
+        "tini": [11, 12, 32],
+        "gold": [11, 12, 32],
+        "weird": [11, 12, 32],
+        "scienc": [11, 12, 32],
+        "auto": [11, 12, 32],
+        "issue2": [11, 12, 19, 31, 32],
+        "disabl": [11, 12, 19, 22, 31, 32, 35, 39],
+        "issu": [11, 12, 19, 31, 32],
+        "traceoperand": [11, 12, 32, 34],
+        "tone": [11, 12, 32],
+        "counter": [11, 12, 32, 34, 39],
+        "float": 11,
+        "accompani": [11, 15, 38],
+        "reset": [11, 12, 22, 28, 39],
+        "carri": 11,
+        "least": [11, 12, 13, 14, 15, 17, 20, 27, 38, 39],
+        "0x24": 11,
+        "0x25": 11,
+        "paus": [11, 12, 32],
+        "0x10": [11, 12, 32],
+        "0x11": [11, 12],
+        "0x20": 11,
+        "fast": [11, 12, 32],
+        "timeout": [11, 12, 32],
+        "zip": [11, 12, 32, 40],
+        "archiv": [11, 12, 15, 32, 40],
+        "sum": [11, 12, 22, 32, 39],
+        "md5": [11, 12, 32],
+        "checksum": [11, 12, 32],
+        "turbo": 11,
+        "0xed": 11,
+        "decompress": 11,
+        "transit": 11,
+        "16384": [11, 12, 13, 15, 16, 20, 27, 29, 39],
+        "sysvar": [11, 12],
+        "maxamplitud": 11,
+        "audiowrit": [11, 39],
+        "taken": [11, 12, 14, 15, 17, 32, 38, 39],
+        "audiopath": [11, 37, 39],
+        "look": [11, 12, 15, 16, 32, 35, 37, 39, 41],
+        "rebuild": [11, 12, 26],
+        "rebuildaudio": [11, 12, 26],
+        "audioformat": [11, 37, 39],
+        "affix": [11, 39],
+        "headerless": [11, 12],
+        "amend": 11,
+        "explicit": [11, 13],
+        "earlier": 11,
+        "retriev": [11, 16, 39],
+        "repeatedli": [11, 39],
+        "until": [11, 12, 32],
+        "condit": [11, 12, 32, 39],
+        "strip": [11, 36, 39],
+        "trail": [11, 39],
+        "function": [11, 12, 13, 16, 32],
+        "manipul": [11, 16, 39],
+        "utf": [11, 39],
+        "94": [11, 39],
+        "127": [11, 39],
+        "combin": [11, 14, 15, 16, 39],
+        "tindex": [11, 16, 39],
+        "alpha": [11, 16, 37, 39],
+        "twice": [11, 39],
+        "ineffect": 11,
+        "superimpos": [11, 16, 39],
+        "power": [11, 35, 39],
+        "refformat": [11, 12, 29],
+        "entrylabel": [11, 12, 23, 26],
+        "entrypointlabel": [11, 12, 23, 26],
+        "snapshotreferenceoper": [11, 13],
+        "entrygroup": 11,
+        "defaultdisassemblystartaddress": [11, 13],
+        "initmodul": [11, 15, 37],
+        "import": [11, 14, 16, 37, 38],
+        "pixel": [11, 16, 39],
+        "plot": 11,
+        "pluggabl": [11, 13],
+        "object": [11, 13, 16, 17, 37, 39],
+        "size": [11, 12, 13, 14, 17, 28, 29, 31, 37, 39],
+        "defmsiz": [11, 12, 29],
+        "66": [11, 12],
+        "65": [11, 12, 29],
+        "compliant": 11,
+        "linewidth": [11, 12, 29],
+        "coordin": [11, 14, 16, 28, 39],
+        "arg": [11, 12, 13, 32, 39],
+        "verbos": [11, 12, 23, 24, 26, 34],
+        "0x33": [11, 12],
+        "0x35": [11, 12],
+        "labelcolumn": [11, 37],
+        "whenev": [11, 12, 16, 32, 37, 39],
+        "fmt": [11, 17],
+        "nowarn": [11, 13],
+        "sever": [11, 12, 13, 39],
+        "pc": [11, 12, 14, 19, 31, 32, 34],
+        "closest": [11, 39],
+        "defwsiz": [11, 12, 29],
+        "subdirectori": [11, 37],
+        "gameindex": [11, 17, 37],
+        "asmsinglepag": [11, 17, 26, 37],
+        "listitem": [11, 17, 37],
+        "assum": [12, 14, 16, 19, 37, 39],
+        "less": [12, 19, 20, 39],
+        "outfil": [12, 19, 22, 31, 32, 34],
+        "minu": [12, 14, 19, 20, 27, 28, 29, 30, 34],
+        "v": [12, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "2c": [12, 19, 28, 31, 32, 34],
+        "help": [12, 19, 22, 31, 32, 34, 40],
+        "0x7ffd": [12, 19, 20, 31, 32, 39],
+        "ve": [12, 15, 20],
+        "addr": [12, 20, 23, 24, 25, 27, 29, 30, 34, 37, 39],
+        "6912": [12, 20],
+        "1366": [12, 20],
+        "0x0556": [12, 20],
+        "togeth": [12, 20],
+        "0x400e": [12, 20],
+        "mean": [12, 17, 20, 22, 32, 37, 38, 39],
+        "deriv": [12, 13, 16, 17],
+        "four": [12, 14, 20, 38, 39],
+        "upon": [12, 14, 20],
+        "return": [12, 13, 15, 16, 20, 39],
+        "inclus": [12, 20, 37],
+        "essenti": [12, 20],
+        "lowest": [12, 20, 37],
+        "usabl": [12, 20],
+        "bare": [12, 13, 20],
+        "23972": 12,
+        "5da4": 12,
+        "23952": [12, 20],
+        "0x5d90": [12, 20],
+        "39": [12, 20],
+        "45": [12, 20],
+        "23977": [12, 20],
+        "0x5da9": [12, 20],
+        "23957": 12,
+        "0x5d95": 12,
+        "smaller": [12, 20, 35, 39],
+        "playback": [12, 22, 32],
+        "fp": [12, 22],
+        "mani": [12, 15, 22, 32, 39],
+        "50": [12, 22, 39],
+        "quiet": [12, 22, 23, 26],
+        "don": [12, 15, 16, 22, 23, 25, 26, 29, 34],
+        "progress": [12, 22, 32],
+        "percentag": [12, 22, 37],
+        "scale": [12, 16, 22, 28, 37, 39],
+        "factor": [12, 22, 39],
+        "peripher": [12, 22],
+        "interfac": [12, 22],
+        "attempt": [12, 13, 15, 22, 32, 39, 41],
+        "unlik": [12, 22, 39],
+        "pygam": [12, 22],
+        "rate": [12, 22, 37],
+        "merg": [12, 22],
+        "outcom": [12, 22, 39],
+        "behaviour": [12, 13, 22, 32],
+        "real": [12, 22],
+        "ei": [12, 22],
+        "short": [12, 22, 35, 37],
+        "fetch": [12, 22],
+        "count": [12, 14, 22, 32, 39],
+        "convent": [12, 15, 22],
+        "except": [12, 14, 15, 22, 32, 37, 39],
+        "normal": [12, 14, 22],
+        "therefor": [12, 16, 22, 39],
+        "similarli": [12, 22, 39],
+        "sens": [12, 14, 22],
+        "middl": [12, 22],
+        "fed": 12,
+        "q": [12, 23, 26, 39],
+        "Be": [12, 23, 26],
+        "safe": [12, 23, 39],
+        "bugfix": [12, 38],
+        "target": [12, 16, 23, 36, 37],
+        "createlabel": [12, 23, 26],
+        "_": [12, 16, 23, 26, 37],
+        "120": [12, 23, 29],
+        "found": [12, 15, 16, 23, 25, 26, 27, 29, 30, 32, 34, 36, 37, 39, 41],
+        "9c40": 12,
+        "9c41": 12,
+        "40006": [12, 14],
+        "40003": [12, 14],
+        "40004": [12, 14, 32],
+        "9c44": 12,
+        "9c46": 12,
+        "9c43": 12,
+        "overwrot": 12,
+        "had": [12, 15, 32, 35],
+        "k": [12, 25],
+        "keeplin": [12, 25],
+        "preservebas": [12, 25],
+        "associ": [12, 13, 14, 38, 39],
+        "browsabl": [12, 41],
+        "bunch": [12, 36, 41],
+        "further": 12,
+        "skoolfil": [12, 26],
+        "shorthand": [12, 26],
+        "package_dir": [12, 26],
+        "remind": [12, 14, 26, 39],
+        "asmlabel": [12, 26],
+        "asmonepag": [12, 26],
+        "joincss": [12, 26],
+        "outputdir": [12, 26],
+        "rebuildimag": [12, 26],
+        "No": [12, 13, 14, 39],
+        "profil": [12, 15, 27],
+        "8192": 12,
+        "textchar": [12, 27],
+        "elig": [12, 13, 27],
+        "digit": [12, 17, 27, 32, 37, 38, 39],
+        "alphanumer": [12, 27, 39],
+        "textminlengthcod": [12, 27],
+        "12": [12, 14, 27, 39],
+        "textminlengthdata": [12, 27],
+        "video": [12, 28],
+        "dest": [12, 28, 31, 32],
+        "top": [12, 14, 16, 17, 28, 37, 39],
+        "90": [12, 16, 28, 39],
+        "clockwis": [12, 16, 28, 39],
+        "wxh": [12, 28],
+        "height": [12, 16, 28, 39],
+        "readi": [12, 36, 40],
+        "defbsiz": [12, 29],
+        "entrypointref": [12, 29],
+        "13": [12, 29, 39],
+        "never": [12, 15, 29],
+        "untitl": [12, 29],
+        "analys": [12, 41],
+        "TO": [12, 30, 32],
+        "With": [12, 16, 41],
+        "variou": [12, 13, 32, 37, 39, 40],
+        "graphviz": 12,
+        "tpng": 12,
+        "orphan": 12,
+        "head": [12, 17],
+        "arrow": 12,
+        "far": [12, 14, 15],
+        "tell": [12, 15],
+        "caller": 12,
+        "unconnect": 12,
+        "edgeattribut": [12, 30],
+        "graphattribut": [12, 30],
+        "nodeattribut": [12, 30],
+        "nodelabel": [12, 30],
+        "shape": [12, 30],
+        "nodeid": [12, 30],
+        "02x": [12, 17, 30, 32, 34],
+        "08b": [12, 30],
+        "char": [12, 30, 39],
+        "arrowhead": [12, 30],
+        "cyan": [12, 30, 37, 39],
+        "background": [12, 16, 30, 37, 39],
+        "bgcolor": [12, 30],
+        "infil": [12, 31],
+        "url": [12, 32],
+        "md5sum": [12, 32],
+        "0x18": [12, 32],
+        "csw": [12, 32],
+        "0x19": [12, 32],
+        "doesn": [12, 14, 15, 16, 17, 32, 37, 39],
+        "third": [12, 14, 32, 39],
+        "complex": [12, 32],
+        "t2": [12, 15, 32],
+        "com": [12, 32, 39],
+        "pub": [12, 32],
+        "keyboard": [12, 32],
+        "34816": [12, 32],
+        "freshli": [12, 32],
+        "boot": [12, 32],
+        "0556": [12, 32],
+        "shortcut": [12, 32],
+        "fulli": [12, 15, 32, 37],
+        "hit": [12, 32],
+        "15": [12, 19, 31, 32, 39],
+        "minut": [12, 32],
+        "reach": [12, 32, 39],
+        "satisfi": [12, 32],
+        "abort": [12, 32],
+        "press": [12, 32],
+        "ctrl": [12, 32],
+        "neither": [12, 13, 16, 32, 39],
+        "significantli": [12, 32],
+        "reduc": [12, 14, 32, 34, 39],
+        "resum": [12, 32],
+        "254": [12, 32, 37, 39],
+        "much": [12, 14, 15, 32, 41],
+        "still": [12, 14, 16, 32, 41],
+        "900": [12, 32, 39],
+        "ffff": [12, 13, 16, 32],
+        "yield": [12, 32, 39],
+        "fifth": [12, 32],
+        "select": [12, 15, 32],
+        "detector": [12, 32],
+        "unrecognis": [12, 32],
+        "microspher": [12, 32],
+        "6695": [12, 32],
+        "794013": [12, 32],
+        "19": [12, 32],
+        "800708": [12, 32],
+        "224": [12, 32],
+        "enter": [12, 32, 40],
+        "respect": [12, 32, 39],
+        "figur": [12, 15, 32],
+        "itali": [12, 32],
+        "1990": [12, 32],
+        "winner": [12, 32],
+        "edit": [12, 15, 32],
+        "09": [12, 32],
+        "publish": [12, 32, 41],
+        "furiou": [12, 32],
+        "alkatraz2": [12, 32],
+        "fireman": [12, 32],
+        "huxlei": [12, 32],
+        "pig": [12, 32],
+        "kentucki": [12, 32],
+        "race": [12, 32],
+        "bleepload": [12, 32, 35],
+        "firebird": [12, 32],
+        "euro": [12, 32],
+        "bizn": [12, 32],
+        "rigel": [12, 32],
+        "reveng": [12, 32],
+        "ball": [12, 32],
+        "breaker": [12, 32],
+        "ballbreak": [12, 32],
+        "terrahawk": [12, 32],
+        "oink": [12, 32],
+        "feder": [12, 32],
+        "17": [12, 14, 32, 39],
+        "11": [12, 14, 17, 32, 39],
+        "1989": [12, 32],
+        "belegost": [12, 32],
+        "starfox": [12, 32],
+        "player": [12, 32],
+        "soccer": [12, 32],
+        "zakliati": [12, 32],
+        "z\u00e1mok": [12, 32],
+        "program\u00e1torov": [12, 32],
+        "integr": [12, 32],
+        "dinaload": [12, 32, 35],
+        "evolut": [12, 32],
+        "golem": [12, 32],
+        "gargoyl": [12, 32, 35],
+        "gremlin": [12, 32],
+        "super": [12, 32],
+        "car": [12, 32],
+        "strike": [12, 32],
+        "eagl": [12, 32],
+        "sky": [12, 32],
+        "ranger": [12, 32],
+        "xenophob": [12, 32],
+        "reflex": [12, 32],
+        "bad": [12, 32],
+        "night": [12, 32],
+        "paul": [12, 32],
+        "owen": [12, 32],
+        "protect": [12, 32],
+        "piskwork": [12, 32],
+        "podraz": [12, 32],
+        "starstrik": [12, 32],
+        "olli": [12, 32],
+        "lissa": [12, 32],
+        "halloween": [12, 32],
+        "quest": [12, 32],
+        "tire": [12, 32],
+        "lode": [12, 32],
+        "runner": [12, 32],
+        "bargain": [12, 32],
+        "basement": [12, 32],
+        "flunki": [12, 32],
+        "speedlock": [12, 32, 35],
+        "big": [12, 32],
+        "troubl": [12, 32],
+        "joe": [12, 32],
+        "banker": [12, 32],
+        "drinker": [12, 32],
+        "western": [12, 32],
+        "girl": [12, 32],
+        "il": [12, 32],
+        "cobra": [12, 32],
+        "di": [12, 32],
+        "cristallo": [12, 32],
+        "negi": [12, 32],
+        "nyero": [12, 32],
+        "phantomasa": [12, 32],
+        "gauntlet": [12, 32],
+        "beer": [12, 32],
+        "trilogi": [12, 32],
+        "ghost": [12, 32],
+        "castl": [12, 32],
+        "tv": [12, 32],
+        "nor": [12, 16, 32, 39],
+        "Its": [12, 32, 39],
+        "down": [12, 32, 39],
+        "keypress": [12, 32],
+        "simultan": [12, 32],
+        "cap": [12, 32],
+        "shift": [12, 32, 39],
+        "ss": [12, 32],
+        "cursor": [12, 32],
+        "goto": [12, 32],
+        "go": [12, 14, 15, 16, 32, 39],
+        "gosub": [12, 32],
+        "deffn": [12, 32],
+        "fn": [12, 32],
+        "0x0605": [12, 32],
+        "0x13be": [12, 32],
+        "34999": [12, 32],
+        "random": [12, 32],
+        "usr": [12, 16, 32],
+        "35000": [12, 32],
+        "iyl": [12, 32, 34, 39],
+        "denot": [12, 14, 32, 34, 38],
+        "shadow": [12, 19, 31, 32, 34, 39],
+        "maintain": [12, 32, 39, 41],
+        "synchronis": [12, 32],
+        "adjust": [12, 14, 32, 39],
+        "desynchronis": [12, 32],
+        "overwritten": 12,
+        "23755": [12, 33],
+        "depth": [12, 34, 39],
+        "patch": [12, 34],
+        "stat": [12, 34],
+        "silent": 12,
+        "vv": [12, 34],
+        "track": [12, 16, 39],
+        "speaker": [12, 34, 39],
+        "sound": [12, 15, 34, 39, 41],
+        "traceline2": [12, 34],
+        "tracelinedecim": [12, 34],
+        "dv": [12, 34],
+        "tracelinedecimal2": [12, 34],
+        "dvv": [12, 34],
+        "traceoperanddecim": [12, 34],
+        "reli": 13,
+        "global": 13,
+        "controldirectivecompos": 13,
+        "skoolctl": 13,
+        "controlfilegener": 13,
+        "snactl": 13,
+        "htmltemplateformatt": 13,
+        "skoolhtml": [13, 16, 37],
+        "templateformatt": 13,
+        "instructionutil": 13,
+        "skoolpars": 13,
+        "operandevalu": 13,
+        "operandformatt": 13,
+        "snapshotread": 13,
+        "snapshotreferencecalcul": 13,
+        "snaskool": 13,
+        "dj": 13,
+        "most": [13, 15, 16, 39],
+        "respons": 13,
+        "common": [13, 41],
+        "get_siz": 13,
+        "preserve_bas": 13,
+        "tupl": [13, 16, 39],
+        "00000001": 13,
+        "c1": 13,
+        "encount": [13, 39],
+        "recov": 13,
+        "rais": 13,
+        "skoolparsingerror": 13,
+        "repons": 13,
+        "generate_ctl": 13,
+        "code_map": 13,
+        "text_char": 13,
+        "text_min_length_cod": 13,
+        "text_min_length_data": 13,
+        "collect": [13, 17, 41],
+        "asm_hex": 13,
+        "asm_low": 13,
+        "defb_siz": 13,
+        "defm_siz": 13,
+        "defw_siz": 13,
+        "defb_rang": 13,
+        "defm_rang": 13,
+        "defs_rang": 13,
+        "defw_rang": 13,
+        "dh": 13,
+        "62": [13, 39],
+        "format_templ": [13, 16],
+        "page_id": [13, 17],
+        "rgb": [13, 37, 39],
+        "image_fnam": 13,
+        "extens": 13,
+        "write_imag": 13,
+        "img_fil": 13,
+        "calculate_refer": 13,
+        "remote_entri": 13,
+        "set_byte_valu": 13,
+        "substitute_label": 13,
+        "indirect": [13, 39],
+        "rref": 13,
+        "ref_instruct": 13,
+        "address_": 13,
+        "use_label": 13,
+        "signatur": [13, 39],
+        "eval_int": 13,
+        "valueerror": 13,
+        "eval_str": 13,
+        "split_operand": 13,
+        "format_byt": 13,
+        "format_word": 13,
+        "is_char": 13,
+        "can_read": 13,
+        "get_snapshot": 13,
+        "131072": [13, 16],
+        "c000": 13,
+        "relev": [13, 14, 17, 36, 38],
+        "snapshoterror": 13,
+        "asterisk": [13, 39],
+        "djnz": [13, 37, 39],
+        "alphabet": 13,
+        "addition": 13,
+        "facilit": 13,
+        "get_compon": 13,
+        "constructor": 13,
+        "get_valu": 13,
+        "organis": [14, 41],
+        "coincid": 14,
+        "stuff": 14,
+        "24832": 14,
+        "25088": 14,
+        "interest": [14, 37],
+        "25344": 14,
+        "24831": 14,
+        "25087": 14,
+        "25343": 14,
+        "onward": 14,
+        "6000": [14, 38],
+        "6100": 14,
+        "6200": 14,
+        "6300": 14,
+        "besid": [14, 15],
+        "thing": [14, 15, 16],
+        "And": [14, 17, 38, 39],
+        "24592": 14,
+        "sometim": 14,
+        "whatev": [14, 15],
+        "odd": [14, 39],
+        "mostli": [14, 15],
+        "32800": 14,
+        "But": [14, 16, 39],
+        "32809": 14,
+        "32821": 14,
+        "32831": 14,
+        "21": 14,
+        "40013": 14,
+        "whichev": 14,
+        "closer": 14,
+        "care": [14, 15, 17, 38, 39],
+        "great": 14,
+        "24580": 14,
+        "24588": 14,
+        "implicitli": 14,
+        "achiev": 14,
+        "24583": 14,
+        "24586": 14,
+        "24589": 14,
+        "24581": 14,
+        "abbrevi": 14,
+        "25": 14,
+        "chunk": 14,
+        "32793": 14,
+        "32818": 14,
+        "32843": 14,
+        "glanc": 14,
+        "recast": 14,
+        "simpler": [14, 15, 16],
+        "consid": [14, 39],
+        "snippet": 14,
+        "49155": 14,
+        "sprite": [14, 16, 37, 39],
+        "49156": 14,
+        "problem": [14, 16, 39],
+        "solut": 14,
+        "robust": 14,
+        "31995": 14,
+        "belong": [14, 37],
+        "b31995": 14,
+        "31996": 14,
+        "rare": 14,
+        "ten": 14,
+        "30036": 14,
+        "30038": 14,
+        "succinctli": 14,
+        "bodi": [14, 37, 39],
+        "20": [14, 39],
+        "40010": 14,
+        "40020": 14,
+        "50000": [14, 39],
+        "50001": [14, 38],
+        "50003": 14,
+        "50004": 14,
+        "50006": 14,
+        "50007": 14,
+        "10001111": 14,
+        "b1": 14,
+        "d2": 14,
+        "h1": 14,
+        "m1": 14,
+        "h2": 14,
+        "40008": 14,
+        "43": 14,
+        "5f": 14,
+        "40005": 14,
+        "11110000": 14,
+        "2b": 14,
+        "h4": 14,
+        "d1": 14,
+        "01010101": 14,
+        "57": 14,
+        "00001111": 14,
+        "0f": [14, 39],
+        "93": 14,
+        "40007": 14,
+        "a0": 14,
+        "hb4": 14,
+        "10000001": 14,
+        "nb4": 14,
+        "hn4": 14,
+        "130": 14,
+        "hi": 14,
+        "Such": 14,
+        "n1": 14,
+        "c2": [14, 39],
+        "n2": 14,
+        "hell": 14,
+        "One": [14, 16, 39],
+        "30001": 14,
+        "solv": [14, 16],
+        "scheme": 14,
+        "copyright": [14, 17, 37, 38, 39, 41],
+        "2018": [14, 38],
+        "smith": [14, 38],
+        "c65535": 14,
+        "contigu": 14,
+        "whole": [14, 39],
+        "li": 14,
+        "cent": 14,
+        "sign": [14, 39, 40],
+        "yet": [14, 15, 16],
+        "plain": [14, 16, 36, 37, 39],
+        "discuss": 15,
+        "ll": 15,
+        "unpack": [15, 40],
+        "hungry_horac": 15,
+        "prefer": [15, 16, 17, 37, 38],
+        "grab": 15,
+        "mere": 15,
+        "fond": 15,
+        "tradit": 15,
+        "perhap": 15,
+        "sk": 15,
+        "kit": 15,
+        "particular": [15, 36, 40],
+        "tutori": 15,
+        "best": 15,
+        "stick": 15,
+        "treat": 15,
+        "needless": 15,
+        "sai": [15, 16],
+        "particularli": [15, 37],
+        "idea": [15, 17],
+        "onc": [15, 17, 39, 40],
+        "handi": 15,
+        "come": 15,
+        "23296": 15,
+        "25167": 15,
+        "meaning": 15,
+        "nicer": 15,
+        "web": 15,
+        "browser": 15,
+        "explanatori": 15,
+        "customis": [15, 16],
+        "again": [15, 39],
+        "sport": 15,
+        "plan": 15,
+        "job": 15,
+        "accid": 15,
+        "examin": 15,
+        "better": [15, 16, 39, 41],
+        "good": [15, 17],
+        "ideal": [15, 16],
+        "exercis": 15,
+        "possibl": [15, 16, 37, 38, 39],
+        "tracer": 15,
+        "happi": 15,
+        "decent": 15,
+        "consum": 15,
+        "probabl": [15, 40],
+        "nervou": 15,
+        "breakdown": 15,
+        "approach": 15,
+        "skim": 15,
+        "familiar": 15,
+        "obviou": 15,
+        "draw": 15,
+        "relat": [15, 16, 36],
+        "goe": 15,
+        "death": 15,
+        "choic": 15,
+        "recommend": [15, 39],
+        "benefit": 15,
+        "danger": 15,
+        "potenti": 15,
+        "ever": 15,
+        "simpl": [15, 16, 37, 39],
+        "rather": 15,
+        "highli": 15,
+        "tempt": 15,
+        "manual": [15, 16, 39],
+        "extrem": 15,
+        "easili": [15, 16, 37],
+        "difficult": 15,
+        "26429": 15,
+        "decrement": 15,
+        "kind": [15, 37, 39],
+        "reorganis": 15,
+        "regener": 15,
+        "lose": 15,
+        "intact": 15,
+        "fit": [15, 38],
+        "understand": 15,
+        "carefulli": 15,
+        "infinitel": 15,
+        "infinit": 15,
+        "purpl": 15,
+        "changelog": [15, 17, 18, 37],
+        "gamedir": [15, 37],
+        "suit": 16,
+        "inadequ": 16,
+        "certain": [16, 37, 38, 39],
+        "task": 16,
+        "larg": 16,
+        "compos": [16, 37],
+        "tediou": 16,
+        "impract": 16,
+        "Or": [16, 37, 39],
+        "core": 16,
+        "subclass": [16, 39],
+        "share": 16,
+        "peopl": 16,
+        "minim": 16,
+        "gamehtmlwrit": 16,
+        "gameasmwrit": 16,
+        "get": [16, 38, 39, 40],
+        "lib": 16,
+        "python3": [16, 40],
+        "dist": 16,
+        "awar": 16,
+        "itself": [16, 17],
+        "cwd": 16,
+        "sprite_id": 16,
+        "self": [16, 39],
+        "build_sprit": 16,
+        "handle_imag": 16,
+        "strftime": 16,
+        "summari": 16,
+        "expand_macronam": 16,
+        "expand_sprit": 16,
+        "expand_timestamp": 16,
+        "skoolmacro": 16,
+        "parse_image_macro": 16,
+        "spriteid": 16,
+        "crop_rect": 16,
+        "sprite3": 16,
+        "parse_int": 16,
+        "restrict": 16,
+        "parse_str": 16,
+        "unmatch": [16, 38],
+        "delimit": [16, 17, 38, 39],
+        "parse_bracket": 16,
+        "param": [16, 17, 23, 25, 26, 27, 29, 30, 32, 34],
+        "get_sect": 16,
+        "section_nam": 16,
+        "trim": 16,
+        "section_typ": 16,
+        "infix": 16,
+        "get_dictionari": 16,
+        "dict": 16,
+        "pageid": [16, 17, 37, 39],
+        "slice": 16,
+        "0000": 16,
+        "len": 16,
+        "temporarili": 16,
+        "push_snapshot": 16,
+        "pop_snapshot": 16,
+        "recent": [16, 39],
+        "get_snapshot_nam": [16, 39],
+        "invers": 16,
+        "inverseaddress": 16,
+        "expand_invers": 16,
+        "udg_data": 16,
+        "deep": 16,
+        "x_offset": 16,
+        "y_offset": 16,
+        "dimension": 16,
+        "100th": [16, 39],
+        "path_id": 16,
+        "df_addr": 16,
+        "af_addr": 16,
+        "31": [16, 39],
+        "2d": 16,
+        "overlay_udg": 16,
+        "bg": [16, 39],
+        "fg": [16, 39],
+        "rattr": 16,
+        "rbyte": 16,
+        "overlai": 16,
+        "foreground": [16, 39],
+        "init_pag": 16,
+        "init": 16,
+        "post": [16, 39],
+        "__init__": 16,
+        "univers": 17,
+        "index_href": 17,
+        "page_head": 17,
+        "root": [17, 37, 39],
+        "href": [17, 39],
+        "next_entri": 17,
+        "prev_entri": 17,
+        "compris": 17,
+        "map_href": 17,
+        "ones": [17, 39],
+        "end_com": 17,
+        "input_regist": 17,
+        "output_regist": 17,
+        "block_com": 17,
+        "comment_rowspan": 17,
+        "bfmt": 17,
+        "3e01": 17,
+        "hard": [17, 39],
+        "endif": 17,
+        "link_text": [17, 39],
+        "other_text": 17,
+        "supplementari": 17,
+        "subitem": [17, 37],
+        "subsubitem": [17, 37],
+        "preformat": 17,
+        "recurs": 17,
+        "m_list_item": 17,
+        "colspan": [17, 39],
+        "m_table_row": 17,
+        "endfor": 17,
+        "iter": 17,
+        "unwant": 17,
+        "alic": 17,
+        "bob": 17,
+        "carol": 17,
+        "exclud": 17,
+        "syntact": [17, 39],
+        "truth": [17, 39],
+        "represent": 17,
+        "val": 17,
+        "my": 17,
+        "stock": [17, 37],
+        "routinesmap": [17, 37, 39],
+        "codeid": [17, 37],
+        "dii": 18,
+        "migrat": 18,
+        "white": [19, 37, 39],
+        "0x1f": [19, 31, 32, 34],
+        "10072": [19, 31, 32, 34],
+        "fffd": [19, 31, 32, 39],
+        "0xfffd": [19, 31, 32, 39],
+        "flop": [19, 31, 32],
+        "34943": [19, 32],
+        "bank6": [19, 39],
+        "io": 24,
+        "stdout": 25,
+        "font32768": 28,
+        "26": [28, 36],
+        "sna2kool": 29,
+        "mismatch": 32,
+        "modif": [32, 37],
+        "destin": [32, 37],
+        "subtract": 32,
+        "analog": 32,
+        "commonli": 32,
+        "overflow": 32,
+        "past": 32,
+        "stage": 32,
+        "2048": 32,
+        "2k": 32,
+        "remaind": 32,
+        "32767": 32,
+        "33023": 32,
+        "0x6000": 32,
+        "85": 32,
+        "40002": 32,
+        "23552": [32, 39],
+        "23754": 32,
+        "5c00": 32,
+        "5cca": 32,
+        "63": [32, 39],
+        "23610": [32, 39],
+        "ftp": 32,
+        "25000": 32,
+        "32798": 34,
+        "49193": 34,
+        "incompat": 35,
+        "tip": 35,
+        "define2": 35,
+        "redefin": [35, 39],
+        "refus": 35,
+        "2168": 35,
+        "cyberlod": 35,
+        "elit": 35,
+        "uni": 35,
+        "exceler": 35,
+        "ftl": 35,
+        "hewson": 35,
+        "slowload": 35,
+        "injectaload": 35,
+        "poliload": 35,
+        "softlock": 35,
+        "zydroload": 35,
+        "dump": 35,
+        "explain": 36,
+        "transform": 36,
+        "entail": 36,
+        "discard": 36,
+        "seen": [36, 38],
+        "irrelev": 36,
+        "32459": 36,
+        "cp": 36,
+        "27": 36,
+        "markup": [36, 37, 38, 39],
+        "augment": 37,
+        "sectionnam": 37,
+        "clockspe": 37,
+        "cycl": 37,
+        "3500000": [37, 39],
+        "3546900": 37,
+        "contentionbegin": [37, 39],
+        "14334": 37,
+        "14361": 37,
+        "contentionend": [37, 39],
+        "57248": 37,
+        "58041": 37,
+        "contentionfactor": [37, 39],
+        "slowdown": 37,
+        "51": 37,
+        "framedur": 37,
+        "69888": 37,
+        "70908": 37,
+        "interruptdelai": [37, 39],
+        "942": 37,
+        "1584": 37,
+        "sampler": 37,
+        "hz": 37,
+        "44100": 37,
+        "model": 37,
+        "00fe00": [37, 39],
+        "black": [37, 39],
+        "000000": 37,
+        "blue": [37, 39],
+        "197": 37,
+        "0000c5": 37,
+        "red": [37, 39],
+        "c50000": [37, 39],
+        "magenta": [37, 39],
+        "c500c5": 37,
+        "198": 37,
+        "00c600": 37,
+        "00c6c5": 37,
+        "yellow": [37, 39],
+        "c5c600": 37,
+        "205": 37,
+        "cdc6cd": 37,
+        "bright_blu": 37,
+        "0000ff": 37,
+        "bright_r": 37,
+        "ff0000": 37,
+        "bright_magenta": 37,
+        "ff00ff": 37,
+        "bright_green": 37,
+        "00ff00": 37,
+        "bright_cyan": 37,
+        "00ffff": 37,
+        "bright_yellow": 37,
+        "ffff00": 37,
+        "bright_whit": 37,
+        "ffffff": 37,
+        "elsewher": [37, 39],
+        "similar": 37,
+        "virtu": 37,
+        "small": 37,
+        "30010": 37,
+        "spritevari": 37,
+        "32770": [37, 38],
+        "32772": [37, 39],
+        "aspect": 37,
+        "flac": [37, 39],
+        "mp3": [37, 39],
+        "ogg": [37, 39],
+        "asm_single_pag": 37,
+        "unlink": 37,
+        "serv": 37,
+        "65280": 37,
+        "ff00": 37,
+        "opaqu": 37,
+        "pngcompressionlevel": 37,
+        "highest": 37,
+        "pngenableanim": 37,
+        "unanim": 37,
+        "themselv": 37,
+        "groupid": 37,
+        "page1id": 37,
+        "page2id": 37,
+        "datamap": 37,
+        "gamestatusbuff": [37, 39],
+        "graphicglitch": 37,
+        "messagesmap": 37,
+        "unusedmap": 37,
+        "uniqu": 37,
+        "pagebytecolumn": 37,
+        "under": [37, 41],
+        "bcgstuw": 37,
+        "codepath": 37,
+        "mutual": 37,
+        "exclus": 37,
+        "gbuffer": 37,
+        "fontimagepath": [37, 39],
+        "screenshotimagepath": [37, 39],
+        "destdir": 37,
+        "seq": 37,
+        "abcd": 37,
+        "pre": [37, 39],
+        "pathnam": 37,
+        "Their": 37,
+        "underscor": 37,
+        "hyphen": 37,
+        "bcgistuw": 38,
+        "grid": 38,
+        "within": [38, 39],
+        "likewis": 38,
+        "simpli": [38, 39],
+        "regard": 38,
+        "quit": 38,
+        "readabl": 38,
+        "answer": 38,
+        "r32768": 38,
+        "bcdgirstuw": 38,
+        "c24296": 38,
+        "57935": 38,
+        "24372": 38,
+        "24373": 38,
+        "24378": 38,
+        "28975": 38,
+        "28902": 38,
+        "28977": 38,
+        "bold": 38,
+        "34": 38,
+        "92": 38,
+        "total": 38,
+        "greater": [38, 39],
+        "craft": 38,
+        "b50000": 38,
+        "b50002": 38,
+        "b50003": 38,
+        "qualifi": 38,
+        "subtitut": 38,
+        "c24573": 38,
+        "invis": 38,
+        "macrori1": 39,
+        "ri2": 39,
+        "oi1": 39,
+        "oi2": 39,
+        "rs1": 39,
+        "rs2": 39,
+        "os1": 39,
+        "os2": 39,
+        "ri1": 39,
+        "udg39144": 39,
+        "56": 39,
+        "udg30115": 39,
+        "udg51673": 39,
+        "c9d9": 39,
+        "unambigu": 39,
+        "51672": 39,
+        "peek51672": 39,
+        "permit": 39,
+        "modulo": 39,
+        "bitwis": 39,
+        "boolean": 39,
+        "comparison": 39,
+        "ye": 39,
+        "unbalanc": 39,
+        "string1": 39,
+        "string2": 39,
+        "outer": 39,
+        "inner": 39,
+        "undefin": 39,
+        "constitut": 39,
+        "for37159": 39,
+        "37168": 39,
+        "peekn": 39,
+        "37159": 39,
+        "peek37159": 39,
+        "peek37168": 39,
+        "ultim": 39,
+        "ia": 39,
+        "i0": 39,
+        "ib": 39,
+        "i1": 39,
+        "sa": 39,
+        "s0": 39,
+        "sb": 39,
+        "s1": 39,
+        "placehold": 39,
+        "prod": 39,
+        "product": 39,
+        "num15": 39,
+        "def1": 39,
+        "amount": 39,
+        "isol": 39,
+        "surround": 39,
+        "ifzero": 39,
+        "def2": 39,
+        "parenthesi": 39,
+        "evalexpr": 39,
+        "peek29435": 39,
+        "29435": 39,
+        "00111110": 39,
+        "forstart": 39,
+        "fsep": 39,
+        "gap": 39,
+        "for31734": 39,
+        "31736": 39,
+        "31734": 39,
+        "156": 39,
+        "s2": 39,
+        "svar": 39,
+        "31735": 39,
+        "erefaddr": 39,
+        "refaddr": 39,
+        "entryt": 39,
+        "explicitli": 39,
+        "format0": 39,
+        "ifexpr": 39,
+        "peek47134": 39,
+        "47134": 39,
+        "170": 39,
+        "xoxoxoxo": 39,
+        "dollar": [39, 40],
+        "k1": 39,
+        "k2": 39,
+        "v2": 39,
+        "mapkei": 39,
+        "for56112": 39,
+        "56114": 39,
+        "peekq": 39,
+        "56112": 39,
+        "peekaddr": 39,
+        "peek33879": 39,
+        "33879": 39,
+        "straddr": 39,
+        "str47154": 39,
+        "str47158": 39,
+        "str47161": 39,
+        "47154": 39,
+        "47158": 39,
+        "tw": 39,
+        "47161": 39,
+        "321": 39,
+        "approxim": 39,
+        "period": 39,
+        "slower": 39,
+        "sure": 39,
+        "liter": 39,
+        "1000": 39,
+        "1500": 39,
+        "800": 39,
+        "1200": 39,
+        "200": 39,
+        "flatten": 39,
+        "1131000": 39,
+        "durat": 39,
+        "323": 39,
+        "audio4": 39,
+        "beep": 39,
+        "32782": 39,
+        "32771": 39,
+        "32773": 39,
+        "32777": 39,
+        "32779": 39,
+        "32780": 39,
+        "invoc": 39,
+        "basenam": 39,
+        "bankpag": 39,
+        "udg50000": 39,
+        "hasn": 39,
+        "methodnam": 39,
+        "chrnum": 39,
+        "8593": 39,
+        "163": 39,
+        "26751": 39,
+        "chr169": 39,
+        "26572": 39,
+        "chr127": 39,
+        "daddr": 39,
+        "centr": 39,
+        "r27126": 39,
+        "d27126": 39,
+        "27126": 39,
+        "udg32768": 39,
+        "routinesmapintro": 39,
+        "chuntei": 39,
+        "ul": 39,
+        "nvalu": 39,
+        "hwidth": 39,
+        "dwidth": 39,
+        "n15": 39,
+        "00015": 39,
+        "0x000f": 39,
+        "raddr": 39,
+        "thereof": 39,
+        "r25820": 39,
+        "25820": 39,
+        "r40000": 39,
+        "unexpand": 39,
+        "beef": 39,
+        "regreg": 39,
+        "af": 39,
+        "24623": 39,
+        "xa": 39,
+        "xf": 39,
+        "xbc": 39,
+        "xde": 39,
+        "xhl": 39,
+        "halt": 39,
+        "13256": 39,
+        "672": 39,
+        "443": 39,
+        "13699": 39,
+        "14371": 39,
+        "techniqu": 39,
+        "160": 39,
+        "space8": 39,
+        "t56832": 39,
+        "score": 39,
+        "t49152": 39,
+        "class1": 39,
+        "class2": 39,
+        "td": 39,
+        "side": 39,
+        "On": [39, 40],
+        "th": 39,
+        "r2": 39,
+        "stand": 39,
+        "dash": 39,
+        "plu": 39,
+        "meet": 39,
+        "candid": 39,
+        "rightmost": 39,
+        "tstatesstart": 39,
+        "larger": 39,
+        "c30000": 39,
+        "tstates30000": 39,
+        "tstates40000": 39,
+        "50002": 39,
+        "tstates50002": 39,
+        "99": 39,
+        "turn": 39,
+        "1295": 39,
+        "32776": 39,
+        "32774": 39,
+        "1703941": 39,
+        "precis": 39,
+        "behav": 39,
+        "rise": 39,
+        "allevi": 39,
+        "rewritten": 39,
+        "udgarray4": 39,
+        "30120": 39,
+        "copy1": 39,
+        "central": 39,
+        "2x2": 39,
+        "4x4": 39,
+        "0123456789": 39,
+        "overx": 39,
+        "xoffset": 39,
+        "yoffset": 39,
+        "rmode": 39,
+        "udgarray2": 39,
+        "30024": 39,
+        "udg30032": 39,
+        "30040": 39,
+        "over0": 39,
+        "plotx": 39,
+        "corner": 39,
+        "udg30000": 39,
+        "plot1": 39,
+        "arrang": 39,
+        "df": 39,
+        "udgaddr": 39,
+        "interv": 39,
+        "success": 39,
+        "180": 39,
+        "anticlockwis": 39,
+        "safe_kei": 39,
+        "39144": 39,
+        "udgarraywidth": 39,
+        "spec1": 39,
+        "spec2": 39,
+        "attrs1": 39,
+        "attrs2": 39,
+        "33008": 39,
+        "33015": 39,
+        "33792": 39,
+        "63476": 39,
+        "63525": 39,
+        "xn": 39,
+        "39648x3": 39,
+        "39648": 39,
+        "32769x2": 39,
+        "32769": 39,
+        "32888": 39,
+        "base_sprit": 39,
+        "32784": 39,
+        "udgswidth": 39,
+        "ufram": 39,
+        "slot": 39,
+        "udgs2": 39,
+        "eight": 39,
+        "30009": 39,
+        "30018": 39,
+        "30027": 39,
+        "screenshot1": 39,
+        "name1": 39,
+        "name2": 39,
+        "frame1": 39,
+        "frame2": 39,
+        "3d00": 39,
+        "peep": 39,
+        "hello_there_peep": 39,
+        "region": 39,
+        "fall": 39,
+        "leftmost": 39,
+        "topmost": 39,
+        "udg40000": 39,
+        "onto": 39,
+        "bright": 39,
+        "drawn": 39,
+        "pokesaddr": 39,
+        "increment": 39,
+        "udg_orig": 39,
+        "suppos": 39,
+        "pokes32772": 39,
+        "136": 39,
+        "udg_fix": 39,
+        "capit": 39,
+        "fill": 39,
+        "peeku": 39,
+        "asmudg30000": 39,
+        "72": 39,
+        "144": 39,
+        "104": 39,
+        "nine": 39,
+        "peek32768": 39,
+        "cumbersom": 39,
+        "tile32768": 39,
+        "tilen": 39,
+        "seri": 39,
+        "tiles32768": 39,
+        "latest": [40, 41],
+        "stabl": [40, 41],
+        "tarbal": 40,
+        "pypi": 40,
+        "pip": 40,
+        "choos": 40,
+        "compil": 40,
+        "setuptool": 40,
+        "build_ext": 40,
+        "throughout": 40,
+        "prompt": 40,
+        "slash": 40,
+        "inde": 41,
+        "reader": 41,
+        "friendli": 41,
+        "reliabl": 41,
+        "discov": 41,
+        "neatli": 41,
+        "demonstr": 41,
+        "richard": 41,
+        "dymond": 41,
+        "contribut": 41,
+        "philip": 41,
+        "anderson": 41,
+        "free": 41,
+        "redistribut": 41,
+        "gnu": 41,
+        "licens": 41,
+        "foundat": 41,
+        "held": 41,
+        "amstrad": 41,
+        "who": 41,
+        "kindli": 41,
+        "permiss": 41
     },
     "objects": {},
     "objtypes": {},
     "objnames": {},
     "titleterms": {
-        "asm": [0, 1, 13, 16, 20, 33, 35, 36],
-        "mode": [0, 33],
-        "direct": [0, 12, 13, 16, 35],
+        "asm": [0, 1, 14, 17, 23, 36, 38, 39],
+        "mode": [0, 36],
+        "direct": [0, 13, 14, 17, 38],
         "substitut": 0,
         "isub": 0,
         "ssub": 0,
         "rsub": 0,
         "bugfix": 0,
         "ofix": 0,
         "bfix": 0,
         "rfix": 0,
-        "assembl": [0, 2, 12],
-        "bank": [0, 36],
-        "block": [0, 13, 35],
+        "assembl": [0, 2, 13],
+        "bank": [0, 39],
+        "block": [0, 14, 38],
         "defb": 0,
-        "def": [0, 36],
+        "def": [0, 39],
         "defw": 0,
-        "end": [0, 13],
+        "end": [0, 14],
         "equ": [0, 1],
-        "expand": [0, 15],
+        "expand": [0, 16],
         "ignoreua": 0,
         "keep": 0,
         "label": [0, 1],
         "nowarn": 0,
         "org": [0, 1],
-        "ref": [0, 15, 34],
+        "ref": [0, 16, 37],
         "rem": 0,
         "remot": 0,
-        "replac": [0, 36],
-        "rom": [0, 38],
+        "replac": [0, 39],
+        "rom": [0, 41],
         "set": 0,
-        "start": [0, 13, 14],
-        "writer": [0, 12, 15, 20],
-        "templat": [1, 12, 15, 16, 34],
-        "comment": [1, 13, 34, 35],
-        "instruct": [1, 12, 13],
-        "regist": [1, 13, 18, 28, 29, 31],
-        "support": [2, 29],
-        "us": [2, 37],
+        "start": [0, 14, 15],
+        "writer": [0, 13, 16, 23],
+        "templat": [1, 13, 16, 17, 37],
+        "comment": [1, 14, 37, 38],
+        "instruct": [1, 13, 14],
+        "regist": [1, 14, 19, 31, 32, 34],
+        "support": [2, 22, 32],
+        "us": [2, 40],
         "pasmo": 2,
         "sjasmplu": 2,
         "z80asm": 2,
         "z88dk": 2,
         "creat": 2,
         "tap": 2,
-        "file": [2, 12, 13, 14, 15, 23, 29, 34, 35],
+        "file": [2, 13, 14, 15, 16, 22, 26, 32, 37, 38],
         "z80": 2,
-        "snapshot": [2, 12, 15, 36],
-        "changelog": [3, 4, 5, 6, 7, 8, 9, 10],
-        "9": 3,
-        "1": [3, 4, 5, 6, 7, 8, 9, 10],
+        "snapshot": [2, 13, 16, 39],
+        "changelog": [3, 4, 5, 6, 7, 8, 9, 10, 11],
+        "9": [3, 11],
+        "2": [3, 4, 5, 6, 7, 8, 9, 10, 11],
         "2024": 3,
-        "02": [3, 4, 5, 6, 7, 8, 9, 10],
-        "03": [3, 4, 5, 6, 9],
-        "0": [3, 4, 5, 6, 7, 8, 9, 10],
-        "2023": 3,
-        "11": [3, 4, 5, 6],
+        "05": [3, 4, 5, 6, 7, 8, 9],
+        "11": [3, 4, 5, 6, 11],
+        "1": [3, 4, 5, 6, 7, 8, 9, 10, 11],
+        "02": [3, 4, 5, 6, 7, 8, 9, 10, 11],
+        "03": [3, 4, 5, 6, 9, 11],
+        "0": [3, 4, 5, 6, 7, 8, 9, 10, 11],
+        "2023": [3, 11],
         "04": [3, 4, 5, 6, 7, 8],
-        "8": [3, 32],
-        "10": [3, 4, 5, 6, 8, 10],
-        "06": [3, 5, 6, 9, 10],
-        "17": [3, 5, 6],
-        "19": [3, 6, 9],
-        "2022": 3,
-        "7": [3, 4, 6, 10],
-        "08": [3, 5, 6, 7, 8],
-        "6": [3, 4, 5, 6, 9],
-        "2021": 3,
-        "5": [3, 4, 5, 6, 7, 8],
-        "07": [3, 4, 5, 6, 7],
-        "4": [3, 4, 5, 6, 7, 8, 9],
-        "3": [3, 4, 5, 6, 7, 8, 9],
-        "2020": 3,
-        "2": [3, 4, 5, 6, 7, 8, 9, 10],
-        "29": 3,
-        "2019": [3, 10],
-        "09": [3, 5, 6, 7, 8, 9],
         "older": 3,
-        "version": [3, 36],
-        "skoolkit": [4, 5, 6, 7, 8, 9, 10, 12, 15, 17, 32, 37, 38],
-        "x": [4, 5, 6, 7, 8, 9, 10],
+        "version": [3, 39],
+        "skoolkit": [4, 5, 6, 7, 8, 9, 10, 11, 13, 16, 18, 35, 40, 41],
+        "x": [4, 5, 6, 7, 8, 9, 10, 11],
+        "4": [4, 5, 6, 7, 8, 9, 11],
         "2010": [4, 5],
+        "3": [4, 5, 6, 7, 8, 9, 11],
+        "10": [4, 5, 6, 8, 10, 11],
         "18": 4,
+        "07": [4, 5, 6, 7, 11],
         "23": [4, 5, 7],
-        "05": [4, 5, 6, 7, 8, 9],
         "25": [4, 7],
+        "7": [4, 6, 10, 11],
         "12": [4, 5, 7],
+        "6": [4, 5, 6, 9, 11],
+        "5": [4, 5, 6, 7, 8, 11],
         "01": [4, 5, 6, 8, 9],
         "31": [4, 5, 9],
         "30": [4, 5, 7],
         "28": [4, 5],
         "2012": [5, 6],
         "22": 5,
         "2011": 5,
         "15": 5,
+        "17": [5, 6, 11],
+        "08": [5, 6, 7, 8, 11],
+        "06": [5, 6, 9, 10, 11],
         "24": 5,
         "16": 5,
+        "09": [5, 6, 7, 8, 9, 11],
         "2014": [6, 7],
         "2013": 6,
         "13": [6, 10],
+        "19": [6, 9, 11],
         "20": [6, 7],
         "2015": [7, 8],
         "14": 7,
         "2017": [8, 9],
         "2016": 8,
         "2018": [9, 10],
-        "command": [11, 29, 37],
-        "bin2sna": [11, 18],
-        "py": [11, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32],
-        "bin2tap": [11, 19],
-        "skool2asm": [11, 20],
-        "configur": [11, 20, 22, 23, 24, 26, 27, 29, 31],
-        "skool2bin": [11, 21],
-        "skool2ctl": [11, 22],
-        "skool2html": [11, 23],
-        "sna2ctl": [11, 24],
-        "sna2img": [11, 25],
-        "sna2skool": [11, 26],
-        "snapinfo": [11, 27],
-        "call": [11, 15, 29, 36],
-        "graph": 11,
-        "snapmod": [11, 28, 32],
-        "tap2sna": [11, 29, 32],
-        "simul": [11, 29],
-        "load": [11, 29],
-        "acceler": [11, 29],
-        "tapinfo": [11, 30, 32],
-        "trace": [11, 31, 32],
-        "compon": 12,
-        "control": [12, 13, 14],
-        "compos": 12,
-        "gener": [12, 14, 36],
-        "disassembl": 12,
-        "html": [12, 15, 16, 33, 36],
-        "formatt": 12,
-        "imag": [12, 36],
-        "util": 12,
-        "operand": 12,
-        "evalu": 12,
-        "reader": 12,
-        "refer": [12, 13, 17],
-        "calcul": 12,
-        "api": 12,
-        "descript": [13, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "valu": 13,
-        "mid": 13,
-        "sub": 13,
-        "syntax": [13, 36],
-        "length": 13,
-        "The": [13, 14],
-        "dot": 13,
-        "colon": 13,
-        "loop": 13,
-        "number": 13,
-        "base": [13, 14, 15],
-        "level": 13,
-        "non": [13, 35],
-        "entri": [13, 35],
-        "quick": 13,
-        "b": 13,
-        "c": 13,
-        "d": [13, 36],
-        "e": 13,
-        "l": 13,
-        "m": 13,
-        "n": [13, 36],
-        "r": [13, 36],
-        "": 13,
-        "t": 13,
-        "w": 13,
-        "limit": 13,
-        "revis": [13, 35],
-        "histori": [13, 35],
-        "disassembli": 14,
-        "dii": 14,
-        "get": 14,
-        "A": [14, 29],
-        "skeleton": 14,
-        "develop": [14, 17],
-        "ad": 14,
-        "poke": [14, 29, 36],
-        "bug": 14,
-        "trivia": 14,
-        "theme": [14, 23],
-        "switch": 14,
-        "extend": 15,
-        "extens": 15,
-        "modul": 15,
-        "method": 15,
-        "skool": [15, 35, 36],
-        "macro": [15, 36],
-        "pars": [15, 33],
-        "format": [15, 35, 36],
-        "case": 15,
-        "field": [15, 36],
-        "memori": 15,
-        "graphic": 15,
-        "page": [15, 16, 34],
-        "initialis": 15,
-        "layout": 16,
-        "asm_single_pag": 16,
-        "audio": [16, 36],
-        "box_entri": 16,
-        "box_list_entri": 16,
-        "footer": 16,
-        "home": 16,
-        "img": 16,
-        "item_list": 16,
-        "link": [16, 34, 36],
-        "list": [16, 36],
-        "memory_map": 16,
-        "reg": [16, 36],
-        "section": 16,
-        "tabl": [16, 36],
-        "foreach": [16, 36],
-        "includ": [16, 36],
-        "specif": 16,
-        "manual": 17,
-        "technic": 17,
-        "synopsi": [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "option": [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "hardwar": [18, 28, 29],
-        "state": [18, 28, 29],
-        "exampl": [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
-        "stack": 19,
-        "pointer": 19,
-        "128k": 19,
-        "tape": 19,
-        "properti": 20,
-        "tzx": 29,
-        "oper": 29,
-        "move": 29,
-        "sysvar": 29,
-        "read": 29,
-        "argument": 29,
-        "from": [29, 32],
-        "migrat": 32,
-        "defin": [32, 36],
-        "render": 33,
-        "audiowrit": 34,
-        "colour": 34,
-        "config": 34,
-        "entrygroup": 34,
-        "game": 34,
-        "imagewrit": 34,
-        "index": 34,
-        "memorymap": 34,
-        "othercod": 34,
-        "pagehead": 34,
-        "path": 34,
-        "resourc": 34,
-        "titl": 34,
-        "box": 34,
-        "append": 34,
-        "content": 34,
-        "squar": 34,
-        "bracket": 34,
-        "header": 35,
-        "line": [35, 37],
-        "escap": 35,
-        "charact": 35,
-        "brace": 35,
-        "numer": 36,
-        "paramet": 36,
-        "string": 36,
-        "smpl": 36,
-        "eval": 36,
-        "FOR": 36,
-        "IF": 36,
-        "let": 36,
-        "map": 36,
-        "pc": 36,
-        "peek": 36,
-        "str": 36,
-        "while": 36,
-        "chr": 36,
-        "raw": 36,
-        "sim": 36,
-        "space": 36,
-        "tstate": 36,
-        "udgtabl": 36,
-        "copi": 36,
-        "font": 36,
-        "over": 36,
-        "plot": 36,
-        "scr": 36,
-        "udg": 36,
-        "udgarrai": 36,
-        "filenam": 36,
-        "anim": 36,
-        "crop": 36,
-        "mask": 36,
-        "palett": 36,
-        "pop": 36,
-        "push": 36,
-        "asmudg": 36,
-        "tile": 36,
-        "instal": 37,
-        "requir": 37,
-        "linux": 37,
-        "bsd": 37,
-        "v": 37,
-        "window": 37,
-        "what": 38,
-        "i": 38,
-        "featur": 38,
-        "author": 38,
-        "licenc": 38,
-        "zx": 38,
-        "spectrum": 38
+        "2019": [10, 11],
+        "8": [11, 35],
+        "2022": 11,
+        "2021": 11,
+        "2020": 11,
+        "29": 11,
+        "command": [12, 32, 40],
+        "bin2sna": [12, 19],
+        "py": [12, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35],
+        "bin2tap": [12, 20],
+        "rzxinfo": [12, 21],
+        "rzxplai": [12, 22],
+        "skool2asm": [12, 23],
+        "configur": [12, 23, 25, 26, 27, 29, 30, 32, 34],
+        "skool2bin": [12, 24],
+        "skool2ctl": [12, 25],
+        "skool2html": [12, 26],
+        "sna2ctl": [12, 27],
+        "sna2img": [12, 28],
+        "sna2skool": [12, 29],
+        "snapinfo": [12, 30],
+        "call": [12, 16, 32, 39],
+        "graph": 12,
+        "snapmod": [12, 31, 35],
+        "tap2sna": [12, 32, 35],
+        "simul": [12, 32],
+        "load": [12, 32],
+        "acceler": [12, 32],
+        "tapinfo": [12, 33, 35],
+        "trace": [12, 34, 35],
+        "compon": 13,
+        "control": [13, 14, 15],
+        "compos": 13,
+        "gener": [13, 15, 39],
+        "disassembl": 13,
+        "html": [13, 16, 17, 36, 39],
+        "formatt": 13,
+        "imag": [13, 39],
+        "util": 13,
+        "operand": 13,
+        "evalu": 13,
+        "reader": 13,
+        "refer": [13, 14, 18],
+        "calcul": 13,
+        "api": 13,
+        "descript": [14, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "valu": 14,
+        "mid": 14,
+        "sub": 14,
+        "syntax": [14, 39],
+        "length": 14,
+        "The": [14, 15],
+        "dot": 14,
+        "colon": 14,
+        "loop": 14,
+        "number": 14,
+        "base": [14, 15, 16],
+        "level": 14,
+        "non": [14, 38],
+        "entri": [14, 38],
+        "quick": 14,
+        "b": 14,
+        "c": [14, 40],
+        "d": [14, 39],
+        "e": 14,
+        "l": 14,
+        "m": 14,
+        "n": [14, 39],
+        "r": [14, 39],
+        "": 14,
+        "t": 14,
+        "w": 14,
+        "limit": 14,
+        "revis": [14, 38],
+        "histori": [14, 38],
+        "disassembli": 15,
+        "dii": 15,
+        "get": 15,
+        "A": [15, 32],
+        "skeleton": 15,
+        "develop": [15, 18],
+        "ad": 15,
+        "poke": [15, 32, 39],
+        "bug": 15,
+        "trivia": 15,
+        "theme": [15, 26],
+        "switch": 15,
+        "extend": 16,
+        "extens": [16, 40],
+        "modul": [16, 40],
+        "method": 16,
+        "skool": [16, 38, 39],
+        "macro": [16, 39],
+        "pars": [16, 36],
+        "format": [16, 38, 39],
+        "case": 16,
+        "field": [16, 39],
+        "memori": 16,
+        "graphic": 16,
+        "page": [16, 17, 37],
+        "initialis": 16,
+        "layout": 17,
+        "asm_single_pag": 17,
+        "audio": [17, 39],
+        "box_entri": 17,
+        "box_list_entri": 17,
+        "footer": 17,
+        "home": 17,
+        "img": 17,
+        "item_list": 17,
+        "link": [17, 37, 39],
+        "list": [17, 39],
+        "memory_map": 17,
+        "reg": [17, 39],
+        "section": 17,
+        "tabl": [17, 39],
+        "foreach": [17, 39],
+        "includ": [17, 39],
+        "specif": 17,
+        "manual": 18,
+        "technic": 18,
+        "synopsi": [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "option": [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "hardwar": [19, 31, 32],
+        "state": [19, 31, 32],
+        "exampl": [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
+        "stack": 20,
+        "pointer": 20,
+        "128k": 20,
+        "tape": 20,
+        "machin": 22,
+        "screen": 22,
+        "code": 22,
+        "execut": 22,
+        "map": [22, 39],
+        "flag": 22,
+        "output": 22,
+        "properti": 23,
+        "tzx": 32,
+        "oper": 32,
+        "move": 32,
+        "sysvar": 32,
+        "read": 32,
+        "argument": 32,
+        "from": [32, 35],
+        "migrat": 35,
+        "defin": [35, 39],
+        "render": 36,
+        "audiowrit": 37,
+        "colour": 37,
+        "config": 37,
+        "entrygroup": 37,
+        "game": 37,
+        "imagewrit": 37,
+        "index": 37,
+        "memorymap": 37,
+        "othercod": 37,
+        "pagehead": 37,
+        "path": 37,
+        "resourc": 37,
+        "titl": 37,
+        "box": 37,
+        "append": 37,
+        "content": 37,
+        "squar": 37,
+        "bracket": 37,
+        "header": 38,
+        "line": [38, 40],
+        "escap": 38,
+        "charact": 38,
+        "brace": 38,
+        "numer": 39,
+        "paramet": 39,
+        "string": 39,
+        "smpl": 39,
+        "eval": 39,
+        "FOR": 39,
+        "IF": 39,
+        "let": 39,
+        "pc": 39,
+        "peek": 39,
+        "str": 39,
+        "while": 39,
+        "chr": 39,
+        "raw": 39,
+        "sim": 39,
+        "space": 39,
+        "tstate": 39,
+        "udgtabl": 39,
+        "copi": 39,
+        "font": 39,
+        "over": 39,
+        "plot": 39,
+        "scr": 39,
+        "udg": 39,
+        "udgarrai": 39,
+        "filenam": 39,
+        "anim": 39,
+        "crop": 39,
+        "mask": 39,
+        "palett": 39,
+        "pop": 39,
+        "push": 39,
+        "asmudg": 39,
+        "tile": 39,
+        "instal": 40,
+        "requir": 40,
+        "linux": 40,
+        "bsd": 40,
+        "v": 40,
+        "window": 40,
+        "what": 41,
+        "i": 41,
+        "featur": 41,
+        "author": 41,
+        "licenc": 41,
+        "zx": 41,
+        "spectrum": 41
     },
     "envversion": {
         "sphinx.domains.c": 2,
         "sphinx.domains.changeset": 1,
         "sphinx.domains.citation": 1,
         "sphinx.domains.cpp": 8,
         "sphinx.domains.index": 1,
@@ -2972,16 +2999,16 @@
             [0, "bfix-mode"]
         ],
         "@rfix mode": [
             [0, "rfix-mode"]
         ],
         "ASM directives": [
             [0, "asm-directives"],
-            [13, "asm-directives"],
-            [35, "asm-directives"]
+            [14, "asm-directives"],
+            [38, "asm-directives"]
         ],
         "@assemble": [
             [0, "assemble"]
         ],
         "@bank": [
             [0, "bank"]
         ],
@@ -3119,53 +3146,23 @@
         ],
         "Creating a Z80 snapshot": [
             [2, "creating-a-z80-snapshot"]
         ],
         "Changelog": [
             [3, "changelog"]
         ],
-        "9.1 (2024-02-03)": [
+        "9.2 (2024-05-11)": [
             [3, "id1"]
         ],
-        "9.0 (2023-11-04)": [
+        "9.1 (2024-02-03)": [
             [3, "id2"]
         ],
-        "8.10 (2023-06-17)": [
+        "9.0 (2023-11-04)": [
             [3, "id3"]
         ],
-        "8.9 (2023-02-19)": [
-            [3, "id4"]
-        ],
-        "8.8 (2022-11-19)": [
-            [3, "id5"]
-        ],
-        "8.7 (2022-10-08)": [
-            [3, "id6"]
-        ],
-        "8.6 (2021-11-06)": [
-            [3, "id7"]
-        ],
-        "8.5 (2021-07-03)": [
-            [3, "id8"]
-        ],
-        "8.4 (2021-03-06)": [
-            [3, "id9"]
-        ],
-        "8.3 (2020-11-08)": [
-            [3, "id10"]
-        ],
-        "8.2 (2020-07-19)": [
-            [3, "id11"]
-        ],
-        "8.1 (2020-03-29)": [
-            [3, "id12"]
-        ],
-        "8.0 (2019-11-09)": [
-            [3, "id13"]
-        ],
         "Older versions": [
             [3, "older-versions"]
         ],
         "SkoolKit 1.x changelog": [
             [4, "skoolkit-1-x-changelog"]
         ],
         "1.4 (2010-11-11)": [
@@ -3392,827 +3389,897 @@
         ],
         "7.1 (2019-02-02)": [
             [10, "id2"]
         ],
         "7.0 (2018-10-13)": [
             [10, "id3"]
         ],
+        "SkoolKit 8.x changelog": [
+            [11, "skoolkit-8-x-changelog"]
+        ],
+        "8.10 (2023-06-17)": [
+            [11, "id1"]
+        ],
+        "8.9 (2023-02-19)": [
+            [11, "id2"]
+        ],
+        "8.8 (2022-11-19)": [
+            [11, "id3"]
+        ],
+        "8.7 (2022-10-08)": [
+            [11, "id4"]
+        ],
+        "8.6 (2021-11-06)": [
+            [11, "id5"]
+        ],
+        "8.5 (2021-07-03)": [
+            [11, "id6"]
+        ],
+        "8.4 (2021-03-06)": [
+            [11, "id7"]
+        ],
+        "8.3 (2020-11-08)": [
+            [11, "id8"]
+        ],
+        "8.2 (2020-07-19)": [
+            [11, "id9"]
+        ],
+        "8.1 (2020-03-29)": [
+            [11, "id10"]
+        ],
+        "8.0 (2019-11-09)": [
+            [11, "id11"]
+        ],
         "Commands": [
-            [11, "commands"]
+            [12, "commands"]
         ],
         "bin2sna.py": [
-            [11, "bin2sna-py"],
-            [18, "bin2sna-py"]
+            [12, "bin2sna-py"],
+            [19, "bin2sna-py"]
         ],
         "bin2tap.py": [
-            [11, "bin2tap-py"],
-            [19, "bin2tap-py"]
+            [12, "bin2tap-py"],
+            [20, "bin2tap-py"]
+        ],
+        "rzxinfo.py": [
+            [12, "rzxinfo-py"],
+            [21, "rzxinfo-py"]
+        ],
+        "rzxplay.py": [
+            [12, "rzxplay-py"],
+            [22, "rzxplay-py"]
         ],
         "skool2asm.py": [
-            [11, "skool2asm-py"],
-            [20, "skool2asm-py"]
+            [12, "skool2asm-py"],
+            [23, "skool2asm-py"]
         ],
         "Configuration": [
-            [11, "configuration"],
-            [11, "skool2ctl-conf"],
-            [11, "skool2html-conf"],
-            [11, "sna2ctl-conf"],
-            [11, "sna2skool-conf"],
-            [11, "snapinfo-conf"],
-            [11, "tap2sna-conf"],
-            [11, "trace-conf"]
+            [12, "configuration"],
+            [12, "skool2ctl-conf"],
+            [12, "skool2html-conf"],
+            [12, "sna2ctl-conf"],
+            [12, "sna2skool-conf"],
+            [12, "snapinfo-conf"],
+            [12, "tap2sna-conf"],
+            [12, "trace-conf"]
         ],
         "skool2bin.py": [
-            [11, "skool2bin-py"],
-            [21, "skool2bin-py"]
+            [12, "skool2bin-py"],
+            [24, "skool2bin-py"]
         ],
         "skool2ctl.py": [
-            [11, "skool2ctl-py"],
-            [22, "skool2ctl-py"]
+            [12, "skool2ctl-py"],
+            [25, "skool2ctl-py"]
         ],
         "skool2html.py": [
-            [11, "skool2html-py"],
-            [23, "skool2html-py"]
+            [12, "skool2html-py"],
+            [26, "skool2html-py"]
         ],
         "sna2ctl.py": [
-            [11, "sna2ctl-py"],
-            [24, "sna2ctl-py"]
+            [12, "sna2ctl-py"],
+            [27, "sna2ctl-py"]
         ],
         "sna2img.py": [
-            [11, "sna2img-py"],
-            [25, "sna2img-py"]
+            [12, "sna2img-py"],
+            [28, "sna2img-py"]
         ],
         "sna2skool.py": [
-            [11, "sna2skool-py"],
-            [26, "sna2skool-py"]
+            [12, "sna2skool-py"],
+            [29, "sna2skool-py"]
         ],
         "snapinfo.py": [
-            [11, "snapinfo-py"],
-            [27, "snapinfo-py"]
+            [12, "snapinfo-py"],
+            [30, "snapinfo-py"]
         ],
         "Call graphs": [
-            [11, "call-graphs"]
+            [12, "call-graphs"]
         ],
         "snapmod.py": [
-            [11, "snapmod-py"],
-            [28, "snapmod-py"],
-            [32, "snapmod-py"]
+            [12, "snapmod-py"],
+            [31, "snapmod-py"],
+            [35, "snapmod-py"]
         ],
         "tap2sna.py": [
-            [11, "tap2sna-py"],
-            [29, "tap2sna-py"],
-            [32, "tap2sna-py"]
+            [12, "tap2sna-py"],
+            [32, "tap2sna-py"],
+            [35, "tap2sna-py"]
         ],
         "Simulated LOAD": [
-            [11, "simulated-load"]
+            [12, "simulated-load"]
         ],
         "Accelerators": [
-            [11, "accelerators"]
+            [12, "accelerators"]
         ],
         "LOAD command": [
-            [11, "load-command"]
+            [12, "load-command"]
         ],
         "tapinfo.py": [
-            [11, "tapinfo-py"],
-            [30, "tapinfo-py"],
-            [32, "tapinfo-py"]
+            [12, "tapinfo-py"],
+            [33, "tapinfo-py"],
+            [35, "tapinfo-py"]
         ],
         "trace.py": [
-            [11, "trace-py"],
-            [31, "trace-py"],
-            [32, "trace-py"]
+            [12, "trace-py"],
+            [34, "trace-py"],
+            [35, "trace-py"]
         ],
         "SkoolKit components": [
-            [12, "skoolkit-components"]
+            [13, "skoolkit-components"]
         ],
         "[skoolkit]": [
-            [12, "skoolkit"]
+            [13, "skoolkit"]
         ],
         "Assembler": [
-            [12, "assembler"]
+            [13, "assembler"]
         ],
         "Control directive composer": [
-            [12, "control-directive-composer"]
+            [13, "control-directive-composer"]
         ],
         "Control file generator": [
-            [12, "control-file-generator"]
+            [13, "control-file-generator"]
         ],
         "Disassembler": [
-            [12, "disassembler"]
+            [13, "disassembler"]
         ],
         "HTML template formatter": [
-            [12, "html-template-formatter"]
+            [13, "html-template-formatter"]
         ],
         "Image writer": [
-            [12, "image-writer"]
+            [13, "image-writer"]
         ],
         "Instruction utility": [
-            [12, "instruction-utility"]
+            [13, "instruction-utility"]
         ],
         "Operand evaluator": [
-            [12, "operand-evaluator"]
+            [13, "operand-evaluator"]
         ],
         "Operand formatter": [
-            [12, "operand-formatter"]
+            [13, "operand-formatter"]
         ],
         "Snapshot reader": [
-            [12, "snapshot-reader"]
+            [13, "snapshot-reader"]
         ],
         "Snapshot reference calculator": [
-            [12, "snapshot-reference-calculator"]
+            [13, "snapshot-reference-calculator"]
         ],
         "Component API": [
-            [12, "component-api"]
+            [13, "component-api"]
         ],
         "Control files": [
-            [13, "control-files"]
+            [14, "control-files"]
         ],
         "Block descriptions": [
-            [13, "block-descriptions"]
+            [14, "block-descriptions"]
         ],
         "Register values": [
-            [13, "register-values"]
+            [14, "register-values"]
         ],
         "Block start comments": [
-            [13, "block-start-comments"]
+            [14, "block-start-comments"]
         ],
         "Mid-block comments": [
-            [13, "mid-block-comments"]
+            [14, "mid-block-comments"]
         ],
         "Block end comments": [
-            [13, "block-end-comments"]
+            [14, "block-end-comments"]
         ],
         "Sub-block syntax": [
-            [13, "sub-block-syntax"]
+            [14, "sub-block-syntax"]
         ],
         "Sub-block lengths": [
-            [13, "sub-block-lengths"]
+            [14, "sub-block-lengths"]
         ],
         "The dot and colon directives": [
-            [13, "the-dot-and-colon-directives"]
+            [14, "the-dot-and-colon-directives"]
         ],
         "Loops": [
-            [13, "loops"]
+            [14, "loops"]
         ],
         "Number bases": [
-            [13, "number-bases"]
+            [14, "number-bases"]
         ],
         "Instruction-level comments": [
-            [13, "instruction-level-comments"]
+            [14, "instruction-level-comments"]
         ],
         "Non-entry blocks": [
-            [13, "non-entry-blocks"],
-            [35, "non-entry-blocks"]
+            [14, "non-entry-blocks"],
+            [38, "non-entry-blocks"]
         ],
         "Quick reference": [
-            [13, "quick-reference"]
+            [14, "quick-reference"]
         ],
         "Block directives": [
-            [13, "block-directives"]
+            [14, "block-directives"]
         ],
         "B directive": [
-            [13, "b-directive"]
+            [14, "b-directive"]
         ],
         "C directive": [
-            [13, "c-directive"]
+            [14, "c-directive"]
         ],
         "D directive": [
-            [13, "d-directive"]
+            [14, "d-directive"]
         ],
         "E directive": [
-            [13, "e-directive"]
+            [14, "e-directive"]
         ],
         "L directive": [
-            [13, "l-directive"]
+            [14, "l-directive"]
         ],
         "M directive": [
-            [13, "m-directive"]
+            [14, "m-directive"]
         ],
         "N directive": [
-            [13, "n-directive"]
+            [14, "n-directive"]
         ],
         "R directive": [
-            [13, "r-directive"]
+            [14, "r-directive"]
         ],
         "S directive": [
-            [13, "s-directive"]
+            [14, "s-directive"]
         ],
         "T directive": [
-            [13, "t-directive"]
+            [14, "t-directive"]
         ],
         "W directive": [
-            [13, "w-directive"]
+            [14, "w-directive"]
         ],
         "\u2018 \u2018 directive": [
-            [13, "directive"]
+            [14, "directive"]
         ],
         "@ directive": [
-            [13, "id1"]
+            [14, "id1"]
         ],
         ". and : directives": [
-            [13, "and-directives"]
+            [14, "and-directives"]
         ],
         "> directive": [
-            [13, "id2"]
+            [14, "id2"]
         ],
         "Control file comments": [
-            [13, "control-file-comments"]
+            [14, "control-file-comments"]
         ],
         "Limitations": [
-            [13, "limitations"]
+            [14, "limitations"]
         ],
         "Revision history": [
-            [13, "revision-history"],
-            [35, "revision-history"]
+            [14, "revision-history"],
+            [38, "revision-history"]
         ],
         "Disassembly DIY": [
-            [14, "disassembly-diy"]
+            [15, "disassembly-diy"]
         ],
         "Getting started": [
-            [14, "getting-started"]
+            [15, "getting-started"]
         ],
         "The control file": [
-            [14, "the-control-file"]
+            [15, "the-control-file"]
         ],
         "A skeleton disassembly": [
-            [14, "a-skeleton-disassembly"]
+            [15, "a-skeleton-disassembly"]
         ],
         "Generating a control file": [
-            [14, "generating-a-control-file"]
+            [15, "generating-a-control-file"]
         ],
         "Developing the disassembly": [
-            [14, "developing-the-disassembly"]
+            [15, "developing-the-disassembly"]
         ],
         "Adding pokes, bugs and trivia": [
-            [14, "adding-pokes-bugs-and-trivia"]
+            [15, "adding-pokes-bugs-and-trivia"]
         ],
         "Themes": [
-            [14, "themes"]
+            [15, "themes"]
         ],
         "Base switching": [
-            [14, "base-switching"]
+            [15, "base-switching"]
         ],
         "Extending SkoolKit": [
-            [15, "extending-skoolkit"]
+            [16, "extending-skoolkit"]
         ],
         "Extension modules": [
-            [15, "extension-modules"]
+            [16, "extension-modules"]
         ],
         "#CALL methods": [
-            [15, "call-methods"]
+            [16, "call-methods"]
         ],
         "Skool macros": [
-            [15, "skool-macros"],
-            [36, "skool-macros"]
+            [16, "skool-macros"],
+            [39, "skool-macros"]
         ],
         "Parsing skool macros": [
-            [15, "parsing-skool-macros"]
+            [16, "parsing-skool-macros"]
         ],
         "Expanding skool macros": [
-            [15, "expanding-skool-macros"]
+            [16, "expanding-skool-macros"]
         ],
         "Parsing ref files": [
-            [15, "parsing-ref-files"]
+            [16, "parsing-ref-files"]
         ],
         "Formatting templates": [
-            [15, "formatting-templates"]
+            [16, "formatting-templates"]
         ],
         "Base, case and fields": [
-            [15, "base-case-and-fields"]
+            [16, "base-case-and-fields"]
         ],
         "Memory snapshots": [
-            [15, "memory-snapshots"]
+            [16, "memory-snapshots"]
         ],
         "Graphics": [
-            [15, "graphics"]
+            [16, "graphics"]
         ],
         "HTML page initialisation": [
-            [15, "html-page-initialisation"]
+            [16, "html-page-initialisation"]
         ],
         "Writer initialisation": [
-            [15, "writer-initialisation"]
+            [16, "writer-initialisation"]
         ],
         "HTML templates": [
-            [16, "html-templates"]
+            [17, "html-templates"]
         ],
         "Layout": [
-            [16, "layout"]
+            [17, "layout"]
         ],
         "asm": [
-            [16, "asm"]
+            [17, "asm"]
         ],
         "asm_single_page": [
-            [16, "asm-single-page"]
+            [17, "asm-single-page"]
         ],
         "audio": [
-            [16, "audio"]
+            [17, "audio"]
         ],
         "box_entries": [
-            [16, "box-entries"]
+            [17, "box-entries"]
         ],
         "box_list_entries": [
-            [16, "box-list-entries"]
+            [17, "box-list-entries"]
         ],
         "footer": [
-            [16, "footer"]
+            [17, "footer"]
         ],
         "home": [
-            [16, "home"]
+            [17, "home"]
         ],
         "img": [
-            [16, "img"]
+            [17, "img"]
         ],
         "item_list": [
-            [16, "item-list"]
+            [17, "item-list"]
         ],
         "link": [
-            [16, "link"]
+            [17, "link"]
         ],
         "list": [
-            [16, "list"]
+            [17, "list"]
         ],
         "memory_map": [
-            [16, "memory-map"]
+            [17, "memory-map"]
         ],
         "page": [
-            [16, "page"]
+            [17, "page"]
         ],
         "reg": [
-            [16, "reg"]
+            [17, "reg"]
         ],
         "section": [
-            [16, "section"]
+            [17, "section"]
         ],
         "table": [
-            [16, "table"]
+            [17, "table"]
         ],
         "Template directives": [
-            [16, "template-directives"]
+            [17, "template-directives"]
         ],
         "foreach": [
-            [16, "foreach"]
+            [17, "foreach"]
         ],
         "if": [
-            [16, "if"]
+            [17, "if"]
         ],
         "include": [
-            [16, "include"]
+            [17, "include"]
         ],
         "Page-specific templates": [
-            [16, "page-specific-templates"]
+            [17, "page-specific-templates"]
         ],
         "SkoolKit manual": [
-            [17, "skoolkit-manual"]
+            [18, "skoolkit-manual"]
         ],
         "Technical reference": [
-            [17, "technical-reference"]
+            [18, "technical-reference"]
         ],
         "Developer reference": [
-            [17, "developer-reference"]
+            [18, "developer-reference"]
         ],
         "SYNOPSIS": [
-            [18, "synopsis"],
             [19, "synopsis"],
             [20, "synopsis"],
             [21, "synopsis"],
             [22, "synopsis"],
             [23, "synopsis"],
             [24, "synopsis"],
             [25, "synopsis"],
             [26, "synopsis"],
             [27, "synopsis"],
             [28, "synopsis"],
             [29, "synopsis"],
             [30, "synopsis"],
-            [31, "synopsis"]
+            [31, "synopsis"],
+            [32, "synopsis"],
+            [33, "synopsis"],
+            [34, "synopsis"]
         ],
         "DESCRIPTION": [
-            [18, "description"],
             [19, "description"],
             [20, "description"],
             [21, "description"],
             [22, "description"],
             [23, "description"],
             [24, "description"],
             [25, "description"],
             [26, "description"],
             [27, "description"],
             [28, "description"],
             [29, "description"],
             [30, "description"],
-            [31, "description"]
+            [31, "description"],
+            [32, "description"],
+            [33, "description"],
+            [34, "description"]
         ],
         "OPTIONS": [
-            [18, "options"],
             [19, "options"],
             [20, "options"],
             [21, "options"],
             [22, "options"],
             [23, "options"],
             [24, "options"],
             [25, "options"],
             [26, "options"],
             [27, "options"],
             [28, "options"],
             [29, "options"],
             [30, "options"],
-            [31, "options"]
+            [31, "options"],
+            [32, "options"],
+            [33, "options"],
+            [34, "options"]
         ],
         "REGISTERS": [
-            [18, "registers"],
-            [28, "registers"],
-            [29, "registers"],
-            [31, "registers"]
+            [19, "registers"],
+            [31, "registers"],
+            [32, "registers"],
+            [34, "registers"]
         ],
         "HARDWARE STATE": [
-            [18, "hardware-state"],
-            [28, "hardware-state"],
-            [29, "hardware-state"]
+            [19, "hardware-state"],
+            [31, "hardware-state"],
+            [32, "hardware-state"]
         ],
         "EXAMPLES": [
-            [18, "examples"],
             [19, "examples"],
             [20, "examples"],
             [21, "examples"],
             [22, "examples"],
             [23, "examples"],
             [24, "examples"],
             [25, "examples"],
             [26, "examples"],
             [27, "examples"],
             [28, "examples"],
             [29, "examples"],
             [30, "examples"],
-            [31, "examples"]
+            [31, "examples"],
+            [32, "examples"],
+            [33, "examples"],
+            [34, "examples"]
         ],
         "STACK POINTER": [
-            [19, "stack-pointer"]
+            [20, "stack-pointer"]
         ],
         "128K TAPES": [
-            [19, "k-tapes"]
+            [20, "k-tapes"]
+        ],
+        "SUPPORTED MACHINES": [
+            [22, "supported-machines"]
+        ],
+        "SCREEN": [
+            [22, "screen"]
+        ],
+        "CODE EXECUTION MAP": [
+            [22, "code-execution-map"]
+        ],
+        "FLAGS": [
+            [22, "flags"]
+        ],
+        "OUTPUT FILE": [
+            [22, "output-file"]
         ],
         "CONFIGURATION": [
-            [20, "configuration"],
-            [22, "configuration"],
             [23, "configuration"],
-            [24, "configuration"],
+            [25, "configuration"],
             [26, "configuration"],
             [27, "configuration"],
             [29, "configuration"],
-            [31, "configuration"]
+            [30, "configuration"],
+            [32, "configuration"],
+            [34, "configuration"]
         ],
         "ASM WRITER PROPERTIES": [
-            [20, "asm-writer-properties"]
+            [23, "asm-writer-properties"]
         ],
         "FILES": [
-            [23, "files"]
+            [26, "files"]
         ],
         "THEMES": [
-            [23, "themes"]
+            [26, "themes"]
         ],
         "TZX SUPPORT": [
-            [29, "tzx-support"]
+            [32, "tzx-support"]
         ],
         "SIMULATED LOAD": [
-            [29, "simulated-load"]
+            [32, "simulated-load"]
         ],
         "ACCELERATORS": [
-            [29, "accelerators"]
+            [32, "accelerators"]
         ],
         "LOAD COMMAND": [
-            [29, "load-command"]
+            [32, "load-command"]
         ],
         "CALL OPERATIONS": [
-            [29, "call-operations"]
+            [32, "call-operations"]
         ],
         "LOAD OPERATIONS": [
-            [29, "load-operations"]
+            [32, "load-operations"]
         ],
         "MOVE OPERATIONS": [
-            [29, "move-operations"]
+            [32, "move-operations"]
         ],
         "POKE OPERATIONS": [
-            [29, "poke-operations"]
+            [32, "poke-operations"]
         ],
         "SYSVARS OPERATION": [
-            [29, "sysvars-operation"]
+            [32, "sysvars-operation"]
         ],
         "READING ARGUMENTS FROM A FILE": [
-            [29, "reading-arguments-from-a-file"]
+            [32, "reading-arguments-from-a-file"]
         ],
         "Migrating from SkoolKit 8": [
-            [32, "migrating-from-skoolkit-8"]
+            [35, "migrating-from-skoolkit-8"]
         ],
         "#DEFINE": [
-            [32, "define"]
+            [35, "define"]
         ],
         "Parsing, rendering, and modes": [
-            [33, "parsing-rendering-and-modes"]
+            [36, "parsing-rendering-and-modes"]
         ],
         "Parsing": [
-            [33, "parsing"]
+            [36, "parsing"]
         ],
         "HTML mode": [
-            [33, "html-mode"],
-            [33, "id1"]
+            [36, "html-mode"],
+            [36, "id1"]
         ],
         "ASM mode": [
-            [33, "asm-mode"],
-            [33, "id2"]
+            [36, "asm-mode"],
+            [36, "id2"]
         ],
         "Rendering": [
-            [33, "rendering"]
+            [36, "rendering"]
         ],
         "Ref files": [
-            [34, "ref-files"]
+            [37, "ref-files"]
         ],
         "[AudioWriter]": [
-            [34, "audiowriter"]
+            [37, "audiowriter"]
         ],
         "[Colours]": [
-            [34, "colours"]
+            [37, "colours"]
         ],
         "[Config]": [
-            [34, "config"]
+            [37, "config"]
         ],
         "[EntryGroups]": [
-            [34, "entrygroups"]
+            [37, "entrygroups"]
         ],
         "[Game]": [
-            [34, "game"]
+            [37, "game"]
         ],
         "[ImageWriter]": [
-            [34, "imagewriter"]
+            [37, "imagewriter"]
         ],
         "[Index]": [
-            [34, "index"]
+            [37, "index"]
         ],
         "[Index:*:*]": [
-            [34, "indexgroup"]
+            [37, "indexgroup"]
         ],
         "[Links]": [
-            [34, "links"]
+            [37, "links"]
         ],
         "[MemoryMap:*]": [
-            [34, "memorymap"]
+            [37, "memorymap"]
         ],
         "[OtherCode:*]": [
-            [34, "othercode"]
+            [37, "othercode"]
         ],
         "[Page:*]": [
-            [34, "page"]
+            [37, "page"]
         ],
         "[PageHeaders]": [
-            [34, "pageheaders"]
+            [37, "pageheaders"]
         ],
         "[Paths]": [
-            [34, "paths"]
+            [37, "paths"]
         ],
         "[Resources]": [
-            [34, "resources"]
+            [37, "resources"]
         ],
         "[Template:*]": [
-            [34, "template"]
+            [37, "template"]
         ],
         "[Titles]": [
-            [34, "titles"]
+            [37, "titles"]
         ],
         "Box pages": [
-            [34, "box-pages"]
+            [37, "box-pages"]
         ],
         "Appending content": [
-            [34, "appending-content"]
+            [37, "appending-content"]
         ],
         "Ref file comments": [
-            [34, "ref-file-comments"]
+            [37, "ref-file-comments"]
         ],
         "Square brackets": [
-            [34, "square-brackets"]
+            [37, "square-brackets"]
         ],
         "Skool files": [
-            [35, "skool-files"]
+            [38, "skool-files"]
         ],
         "Skool file format": [
-            [35, "skool-file-format"]
+            [38, "skool-file-format"]
         ],
         "Entry header format": [
-            [35, "entry-header-format"]
+            [38, "entry-header-format"]
         ],
         "Entry line format": [
-            [35, "entry-line-format"]
+            [38, "entry-line-format"]
         ],
         "Escaping characters": [
-            [35, "escaping-characters"]
+            [38, "escaping-characters"]
         ],
         "Braces in comments": [
-            [35, "braces-in-comments"]
+            [38, "braces-in-comments"]
         ],
         "Syntax": [
-            [36, "syntax"]
+            [39, "syntax"]
         ],
         "Numeric parameters": [
-            [36, "numeric-parameters"]
+            [39, "numeric-parameters"]
         ],
         "String parameters": [
-            [36, "string-parameters"]
+            [39, "string-parameters"]
         ],
         "Replacement fields": [
-            [36, "replacement-fields"]
+            [39, "replacement-fields"]
         ],
         "SMPL macros": [
-            [36, "smpl-macros"]
+            [39, "smpl-macros"]
         ],
         "#()": [
-            [36, "hash"]
+            [39, "hash"]
         ],
         "#DEF": [
-            [36, "def"]
+            [39, "def"]
         ],
         "#EVAL": [
-            [36, "eval"]
+            [39, "eval"]
         ],
         "#FOR": [
-            [36, "for"]
+            [39, "for"]
         ],
         "#FOREACH": [
-            [36, "foreach"]
+            [39, "foreach"]
         ],
         "#FORMAT": [
-            [36, "format"]
+            [39, "format"]
         ],
         "#IF": [
-            [36, "if"]
+            [39, "if"]
         ],
         "#LET": [
-            [36, "let"]
+            [39, "let"]
         ],
         "#MAP": [
-            [36, "map"]
+            [39, "map"]
         ],
         "#PC": [
-            [36, "pc"]
+            [39, "pc"]
         ],
         "#PEEK": [
-            [36, "peek"]
+            [39, "peek"]
         ],
         "#STR": [
-            [36, "str"]
+            [39, "str"]
         ],
         "#WHILE": [
-            [36, "while"]
+            [39, "while"]
         ],
         "General macros": [
-            [36, "general-macros"]
+            [39, "general-macros"]
         ],
         "#AUDIO": [
-            [36, "audio"]
+            [39, "audio"]
         ],
         "#BANK": [
-            [36, "bank"]
+            [39, "bank"]
         ],
         "#CALL": [
-            [36, "call"]
+            [39, "call"]
         ],
         "#CHR": [
-            [36, "chr"]
+            [39, "chr"]
         ],
         "#D": [
-            [36, "d"]
+            [39, "d"]
         ],
         "#HTML": [
-            [36, "html"]
+            [39, "html"]
         ],
         "#INCLUDE": [
-            [36, "include"]
+            [39, "include"]
         ],
         "#LINK": [
-            [36, "link"]
+            [39, "link"]
         ],
         "#LIST": [
-            [36, "list"]
+            [39, "list"]
         ],
         "#N": [
-            [36, "n"]
+            [39, "n"]
         ],
         "#R": [
-            [36, "r"]
+            [39, "r"]
         ],
         "#RAW": [
-            [36, "raw"]
+            [39, "raw"]
         ],
         "#REG": [
-            [36, "reg"]
+            [39, "reg"]
         ],
         "#SIM": [
-            [36, "sim"]
+            [39, "sim"]
         ],
         "#SPACE": [
-            [36, "space"]
+            [39, "space"]
         ],
         "#TABLE": [
-            [36, "table"]
+            [39, "table"]
         ],
         "#TSTATES": [
-            [36, "tstates"]
+            [39, "tstates"]
         ],
         "#UDGTABLE": [
-            [36, "udgtable"]
+            [39, "udgtable"]
         ],
         "#VERSION": [
-            [36, "version"]
+            [39, "version"]
         ],
         "Image macros": [
-            [36, "image-macros"]
+            [39, "image-macros"]
         ],
         "#COPY": [
-            [36, "copy"]
+            [39, "copy"]
         ],
         "#FONT": [
-            [36, "font"]
+            [39, "font"]
         ],
         "#OVER": [
-            [36, "over"]
+            [39, "over"]
         ],
         "#PLOT": [
-            [36, "plot"]
+            [39, "plot"]
         ],
         "#SCR": [
-            [36, "scr"]
+            [39, "scr"]
         ],
         "#UDG": [
-            [36, "udg"]
+            [39, "udg"]
         ],
         "#UDGARRAY": [
-            [36, "udgarray"]
+            [39, "udgarray"]
         ],
         "#UDGS": [
-            [36, "udgs"]
+            [39, "udgs"]
         ],
         "Filenames": [
-            [36, "filenames"]
+            [39, "filenames"]
         ],
         "Animation": [
-            [36, "animation"]
+            [39, "animation"]
         ],
         "Cropping": [
-            [36, "cropping"]
+            [39, "cropping"]
         ],
         "Masks": [
-            [36, "masks"]
+            [39, "masks"]
         ],
         "Palette": [
-            [36, "palette"]
+            [39, "palette"]
         ],
         "Snapshot macros": [
-            [36, "snapshot-macros"]
+            [39, "snapshot-macros"]
         ],
         "#POKES": [
-            [36, "pokes"]
+            [39, "pokes"]
         ],
         "#POPS": [
-            [36, "pops"]
+            [39, "pops"]
         ],
         "#PUSHS": [
-            [36, "pushs"]
+            [39, "pushs"]
         ],
         "Defining macros with #DEF": [
-            [36, "defining-macros-with-def"]
+            [39, "defining-macros-with-def"]
         ],
         "#ASM": [
-            [36, "asm"]
+            [39, "asm"]
         ],
         "#ASMUDG": [
-            [36, "asmudg"]
+            [39, "asmudg"]
         ],
         "#TILE, #TILES": [
-            [36, "tile-tiles"]
+            [39, "tile-tiles"]
         ],
         "Installing and using SkoolKit": [
-            [37, "installing-and-using-skoolkit"]
+            [40, "installing-and-using-skoolkit"]
         ],
         "Requirements": [
-            [37, "requirements"]
+            [40, "requirements"]
         ],
         "Installation": [
-            [37, "installation"]
+            [40, "installation"]
+        ],
+        "C extension modules": [
+            [40, "c-extension-modules"]
         ],
         "Linux/*BSD v. Windows command line": [
-            [37, "linux-bsd-v-windows-command-line"]
+            [40, "linux-bsd-v-windows-command-line"]
         ],
         "What is SkoolKit?": [
-            [38, "what-is-skoolkit"]
+            [41, "what-is-skoolkit"]
         ],
         "Features": [
-            [38, "features"]
+            [41, "features"]
         ],
         "Authors": [
-            [38, "authors"]
+            [41, "authors"]
         ],
         "Licence": [
-            [38, "licence"]
+            [41, "licence"]
         ],
         "ZX Spectrum ROMs": [
-            [38, "zx-spectrum-roms"]
+            [41, "zx-spectrum-roms"]
         ]
     },
     "indexentries": {}
 })
```

### Comparing `skoolkit-9.1/docs/skool-files.html` & `skoolkit-9.2/docs/skool-files.html`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Skool files &#8212; SkoolKit 9.1 documentation</title>
+    <title>Skool files &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="skool-macros.html" title="Skool macros"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="control-files.html" title="Control files"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Skool files</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -412,15 +412,15 @@
              >index</a></li>
         <li class="right" >
           <a href="skool-macros.html" title="Skool macros"
              >next</a> |</li>
         <li class="right" >
           <a href="control-files.html" title="Control files"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Skool files</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Skool files
 ************ SSkkooooll ffiilleess_? ************
 A skool file contains the list of Z80 instructions that make up the routines
 and data blocks of the program being disassembled, with accompanying comments
 (if any).
 ********** SSkkooooll ffiillee ffoorrmmaatt_? **********
 A skool file must be in a certain format to ensure that it is processed
@@ -224,10 +224,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Skool files
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/skool-macros.html` & `skoolkit-9.2/docs/skool-macros.html`

 * *Files 0% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Skool macros &#8212; SkoolKit 9.1 documentation</title>
+    <title>Skool macros &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="ref-files.html" title="Ref files"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="skool-files.html" title="Skool files"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Skool macros</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -3248,15 +3248,15 @@
              >index</a></li>
         <li class="right" >
           <a href="ref-files.html" title="Ref files"
              >next</a> |</li>
         <li class="right" >
           <a href="skool-files.html" title="Skool files"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Skool macros</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Skool macros
 ************ SSkkooooll mmaaccrrooss_? ************
 Skool files and ref files may contain skool macros that are expanded to an
 appropriate piece of HTML markup (when rendering in HTML mode), or to an
 appropriate piece of plain text (when rendering in ASM mode).
 ********** SSyynnttaaxx_? **********
 Skool macros have the following general form:
@@ -1890,10 +1890,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Skool macros
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/usage.html` & `skoolkit-9.2/docs/usage.html`

 * *Files 16% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>Installing and using SkoolKit &#8212; SkoolKit 9.1 documentation</title>
+    <title>Installing and using SkoolKit &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="diy.html" title="Disassembly DIY"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="whatis.html" title="What is SkoolKit?"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Installing and using SkoolKit</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -61,14 +61,32 @@
 <li><p>from the zip archive or tarball available at <a class="reference external" href="https://github.com/skoolkid/skoolkit/releases">GitHub</a></p></li>
 <li><p>from <a class="reference external" href="https://pypi.org/project/skoolkit/">PyPI</a> by using <a class="reference external" href="https://pip.pypa.io/">pip</a></p></li>
 </ul>
 <p>If you choose the zip archive or tarball, note that SkoolKit can be used
 wherever it is unpacked: it does not need to be installed in any particular
 location.</p>
 </section>
+<section id="c-extension-modules">
+<h2>C extension modules<a class="headerlink" href="#c-extension-modules" title="Permalink to this heading"></a></h2>
+<p>If you obtained SkoolKit from a zip archive or tarball, and you want to make
+use of the C extension modules (for faster Z80 simulation), then you will need
+to build them first. This requires a compiler, the <a class="reference external" href="https://pypi.org/project/setuptools/">setuptools</a> package, and
+the development headers for the version of Python youre using. Once these are
+ready, run the following command in the directory where SkoolKit was unpacked:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python setup.py build_ext -i
+</pre></div>
+</div>
+<p>You may need to replace the <code class="docutils literal notranslate"><span class="pre">python</span></code> in this command with <code class="docutils literal notranslate"><span class="pre">python3</span></code>,
+<code class="docutils literal notranslate"><span class="pre">py</span></code>, or the path to the Python executable, depending on the OS youre using.</p>
+<p>To see a list of the compilers that may be used to build the C extension
+modules, run the following command:</p>
+<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python setup.py build_ext --help-compiler
+</pre></div>
+</div>
+</section>
 <section id="linux-bsd-v-windows-command-line">
 <h2>Linux/*BSD v. Windows command line<a class="headerlink" href="#linux-bsd-v-windows-command-line" title="Permalink to this heading"></a></h2>
 <p>Throughout this documentation, commands that must be entered in a terminal
 window (Command Prompt in Windows) are shown on a line beginning with a
 dollar sign (<code class="docutils literal notranslate"><span class="pre">$</span></code>), like this:</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ some-script.py some arguments
 </pre></div>
@@ -89,14 +107,15 @@
         <div class="sphinxsidebarwrapper">
   <div>
     <h3><a href="index.html">Table of Contents</a></h3>
     <ul>
 <li><a class="reference internal" href="#">Installing and using SkoolKit</a><ul>
 <li><a class="reference internal" href="#requirements">Requirements</a></li>
 <li><a class="reference internal" href="#installation">Installation</a></li>
+<li><a class="reference internal" href="#c-extension-modules">C extension modules</a></li>
 <li><a class="reference internal" href="#linux-bsd-v-windows-command-line">Linux/*BSD v. Windows command line</a></li>
 </ul>
 </li>
 </ul>
 
   </div>
   <div>
@@ -138,15 +157,15 @@
              >index</a></li>
         <li class="right" >
           <a href="diy.html" title="Disassembly DIY"
              >next</a> |</li>
         <li class="right" >
           <a href="whatis.html" title="What is SkoolKit?"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">Installing and using SkoolKit</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,48 +1,61 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Installing and using SkoolKit
 ************ IInnssttaalllliinngg aanndd uussiinngg SSkkoooollKKiitt_? ************
 ********** RReeqquuiirreemmeennttss_? **********
 SkoolKit requires _P_y_t_h_o_n 3.8+. If youre running Linux or one of the BSDs, you
 probably already have Python installed. If youre running Windows, you can get
 Python _h_e_r_e.
 ********** IInnssttaallllaattiioonn_? **********
 There are various ways to install the latest stable release of SkoolKit:
     * from the zip archive or tarball available at _s_k_o_o_l_k_i_t_._c_a
     * from the zip archive or tarball available at _G_i_t_H_u_b
     * from _P_y_P_I by using _p_i_p
 If you choose the zip archive or tarball, note that SkoolKit can be used
 wherever it is unpacked: it does not need to be installed in any particular
 location.
+********** CC eexxtteennssiioonn mmoodduulleess_? **********
+If you obtained SkoolKit from a zip archive or tarball, and you want to make
+use of the C extension modules (for faster Z80 simulation), then you will need
+to build them first. This requires a compiler, the _s_e_t_u_p_t_o_o_l_s package, and the
+development headers for the version of Python youre using. Once these are
+ready, run the following command in the directory where SkoolKit was unpacked:
+$ python setup.py build_ext -i
+You may need to replace the python in this command with python3, py, or the
+path to the Python executable, depending on the OS youre using.
+To see a list of the compilers that may be used to build the C extension
+modules, run the following command:
+$ python setup.py build_ext --help-compiler
 ********** LLiinnuuxx//**BBSSDD vv.. WWiinnddoowwss ccoommmmaanndd lliinnee_? **********
 Throughout this documentation, commands that must be entered in a terminal
 window (Command Prompt in Windows) are shown on a line beginning with a
 dollar sign ($), like this:
 $ some-script.py some arguments
 On Windows, and on Linux/*BSD if SkoolKit has been installed as a Python
 package (using pip), the commands may be entered exactly as they are shown.
 On Linux/*BSD, use a dot-slash prefix (e.g. ./some-script.py) if the script is
 being run from the current working directory.
 ******** _TT_aa_bb_ll_ee_ _oo_ff_ _CC_oo_nn_tt_ee_nn_tt_ss ********
     * _I_n_s_t_a_l_l_i_n_g_ _a_n_d_ _u_s_i_n_g_ _S_k_o_o_l_K_i_t
           o _R_e_q_u_i_r_e_m_e_n_t_s
           o _I_n_s_t_a_l_l_a_t_i_o_n
+          o _C_ _e_x_t_e_n_s_i_o_n_ _m_o_d_u_l_e_s
           o _L_i_n_u_x_/_*_B_S_D_ _v_._ _W_i_n_d_o_w_s_ _c_o_m_m_a_n_d_ _l_i_n_e
 ****** PPrreevviioouuss ttooppiicc ******
 _W_h_a_t_ _i_s_ _S_k_o_o_l_K_i_t_?
 ****** NNeexxtt ttooppiicc ******
 _D_i_s_a_s_s_e_m_b_l_y_ _D_I_Y
 ******** TThhiiss PPaaggee ********
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * Installing and using SkoolKit
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/docs/whatis.html` & `skoolkit-9.2/docs/whatis.html`

 * *Files 4% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 <!DOCTYPE html>
 
 <html lang="en">
   <head>
     <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
 
-    <title>What is SkoolKit? &#8212; SkoolKit 9.1 documentation</title>
+    <title>What is SkoolKit? &#8212; SkoolKit 9.2 documentation</title>
     <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
     <link rel="stylesheet" type="text/css" href="_static/classic.css" />
     <link rel="stylesheet" type="text/css" href="_static/custom.css" />
     
     <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
     <script src="_static/jquery.js"></script>
     <script src="_static/underscore.js"></script>
@@ -31,15 +31,15 @@
              accesskey="I">index</a></li>
         <li class="right" >
           <a href="usage.html" title="Installing and using SkoolKit"
              accesskey="N">next</a> |</li>
         <li class="right" >
           <a href="index.html" title="SkoolKit manual"
              accesskey="P">previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">What is SkoolKit?</a></li> 
       </ul>
     </div>  
 
     <div class="document">
       <div class="documentwrapper">
         <div class="bodywrapper">
@@ -62,15 +62,15 @@
 <p>With SkoolKit you can:</p>
 <ul class="simple">
 <li><p>use <a class="reference internal" href="commands.html#sna2ctl-py"><span class="std std-ref">sna2ctl.py</span></a> to generate a <a class="reference internal" href="control-files.html#controlfiles"><span class="std std-ref">control file</span></a> (an
 attempt to identify routines and data blocks by static analysis) from a
 snapshot (SNA, SZX or Z80) or raw memory file</p></li>
 <li><p>enable <a class="reference internal" href="commands.html#sna2ctl-py"><span class="std std-ref">sna2ctl.py</span></a> to generate a much better control file that more
 reliably distinguishes code from data by using a code execution map produced
-by an emulator</p></li>
+by an emulator or <a class="reference internal" href="commands.html#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a></p></li>
 <li><p>use <a class="reference internal" href="commands.html#sna2skool-py"><span class="std std-ref">sna2skool.py</span></a> along with this control file to produce a disassembly
 of a snapshot or raw memory file</p></li>
 <li><p>add annotations to this disassembly (or the control file) as you discover the
 purpose of each routine and data block</p></li>
 <li><p>use <a class="reference internal" href="commands.html#skool2html-py"><span class="std std-ref">skool2html.py</span></a> to convert a disassembly into a bunch of HTML files
 (with annotations in place, and the operands of CALL and JP instructions
 converted into hyperlinks)</p></li>
@@ -82,16 +82,20 @@
 <li><p>use <a class="reference internal" href="commands.html#tap2sna-py"><span class="std std-ref">tap2sna.py</span></a> to convert a TAP or TZX file into a pristine Z80 or
 SZX snapshot</p></li>
 <li><p>use <a class="reference internal" href="commands.html#snapinfo-py"><span class="std std-ref">snapinfo.py</span></a> to analyse a snapshot or raw memory file and list the
 BASIC program it contains, show register values, produce a call graph, find
 tile graphic data, find text, or find sequences of arbitrary byte values</p></li>
 <li><p>use <a class="reference internal" href="commands.html#trace-py"><span class="std std-ref">trace.py</span></a> to trace the execution of machine code in a snapshot or
 raw memory file</p></li>
+<li><p>use <a class="reference internal" href="commands.html#rzxplay-py"><span class="std std-ref">rzxplay.py</span></a> to trace the execution of machine code in an RZX file,
+and produce a code execution map for <a class="reference internal" href="commands.html#sna2ctl-py"><span class="std std-ref">sna2ctl.py</span></a></p></li>
 <li><p>use <a class="reference internal" href="commands.html#tapinfo-py"><span class="std std-ref">tapinfo.py</span></a> to analyse the blocks in a TAP or TZX file, and list
 the BASIC program it contains</p></li>
+<li><p>use <a class="reference internal" href="commands.html#rzxinfo-py"><span class="std std-ref">rzxinfo.py</span></a> to analyse the blocks in an RZX file, and extract
+snapshots from it</p></li>
 <li><p>use <a class="reference internal" href="commands.html#bin2tap-py"><span class="std std-ref">bin2tap.py</span></a> to convert a snapshot or raw memory file into a TAP
 file</p></li>
 <li><p>use <a class="reference internal" href="commands.html#bin2sna-py"><span class="std std-ref">bin2sna.py</span></a> to convert a raw memory file into a Z80 or SZX snapshot</p></li>
 <li><p>use <a class="reference internal" href="commands.html#snapmod-py"><span class="std std-ref">snapmod.py</span></a> to modify the register values or memory contents in a
 Z80 or SZX snapshot</p></li>
 <li><p>use <a class="reference internal" href="commands.html#sna2img-py"><span class="std std-ref">sna2img.py</span></a> to convert graphic data in a disassembly, SCR file,
 snapshot or raw memory file into a PNG image</p></li>
@@ -126,15 +130,15 @@
 Foundation, either version 3 of the License, or (at your option) any later
 version.</p>
 <p>See the file COPYING (distributed with SkoolKit) for the full text of the
 licence.</p>
 </section>
 <section id="zx-spectrum-roms">
 <h2>ZX Spectrum ROMs<a class="headerlink" href="#zx-spectrum-roms" title="Permalink to this heading"></a></h2>
-<p>Copies of the 48K and 128K ZX Spectrum ROMs are included with SkoolKit (in the
+<p>Copies of the 48K, 128K and +2 ROMs are included with SkoolKit (in the
 <cite>skoolkit/resources</cite> directory). The copyright in these ROMs is held by
 Amstrad, who have kindly <a class="reference external" href="https://groups.google.com/g/comp.sys.amstrad.8bit/c/HtpBU2Bzv_U/m/HhNDSU3MksAJ">given permission</a> for them to be redistributed.</p>
 </section>
 </section>
 
 
             <div class="clearer"></div>
@@ -195,15 +199,15 @@
              >index</a></li>
         <li class="right" >
           <a href="usage.html" title="Installing and using SkoolKit"
              >next</a> |</li>
         <li class="right" >
           <a href="index.html" title="SkoolKit manual"
              >previous</a> |</li>
-        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.1 documentation</a> &#187;</li>
+        <li class="nav-item nav-item-0"><a href="index.html">SkoolKit 9.2 documentation</a> &#187;</li>
         <li class="nav-item nav-item-this"><a href="">What is SkoolKit?</a></li> 
       </ul>
     </div>
     <div class="footer" role="contentinfo">
         &#169; Copyright 2024, Richard Dymond.
       Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
     </div>
```

#### html2text {}

```diff
@@ -1,12 +1,12 @@
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * What is SkoolKit?
 ************ WWhhaatt iiss SSkkoooollKKiitt??_? ************
 SkoolKit is a collection of utilities that can be used to disassemble a
 _S_p_e_c_t_r_u_m game (or indeed any piece of Spectrum software written in machine
 code) into a format known as a skool file. Then, from this skool file, you can
 use SkoolKit to create a browsable disassembly in HTML format, or a re-
 assemblable disassembly in assembly language. So the skool file is - from start
@@ -18,15 +18,15 @@
 ********** FFeeaattuurreess_? **********
 With SkoolKit you can:
     * use _s_n_a_2_c_t_l_._p_y to generate a _c_o_n_t_r_o_l_ _f_i_l_e (an attempt to identify
       routines and data blocks by static analysis) from a snapshot (SNA, SZX or
       Z80) or raw memory file
     * enable _s_n_a_2_c_t_l_._p_y to generate a much better control file that more
       reliably distinguishes code from data by using a code execution map
-      produced by an emulator
+      produced by an emulator or _r_z_x_p_l_a_y_._p_y
     * use _s_n_a_2_s_k_o_o_l_._p_y along with this control file to produce a disassembly of
       a snapshot or raw memory file
     * add annotations to this disassembly (or the control file) as you discover
       the purpose of each routine and data block
     * use _s_k_o_o_l_2_h_t_m_l_._p_y to convert a disassembly into a bunch of HTML files
       (with annotations in place, and the operands of CALL and JP instructions
       converted into hyperlinks)
@@ -39,16 +39,20 @@
       snapshot
     * use _s_n_a_p_i_n_f_o_._p_y to analyse a snapshot or raw memory file and list the
       BASIC program it contains, show register values, produce a call graph,
       find tile graphic data, find text, or find sequences of arbitrary byte
       values
     * use _t_r_a_c_e_._p_y to trace the execution of machine code in a snapshot or raw
       memory file
+    * use _r_z_x_p_l_a_y_._p_y to trace the execution of machine code in an RZX file, and
+      produce a code execution map for _s_n_a_2_c_t_l_._p_y
     * use _t_a_p_i_n_f_o_._p_y to analyse the blocks in a TAP or TZX file, and list the
       BASIC program it contains
+    * use _r_z_x_i_n_f_o_._p_y to analyse the blocks in an RZX file, and extract
+      snapshots from it
     * use _b_i_n_2_t_a_p_._p_y to convert a snapshot or raw memory file into a TAP file
     * use _b_i_n_2_s_n_a_._p_y to convert a raw memory file into a Z80 or SZX snapshot
     * use _s_n_a_p_m_o_d_._p_y to modify the register values or memory contents in a Z80
       or SZX snapshot
     * use _s_n_a_2_i_m_g_._p_y to convert graphic data in a disassembly, SCR file,
       snapshot or raw memory file into a PNG image
 In an HTML disassembly produced by _s_k_o_o_l_2_h_t_m_l_._p_y you can also:
@@ -71,17 +75,17 @@
 SkoolKit is free software: you can redistribute it and/or modify it under the
 terms of the GNU General Public License as published by the Free Software
 Foundation, either version 3 of the License, or (at your option) any later
 version.
 See the file COPYING (distributed with SkoolKit) for the full text of the
 licence.
 ********** ZZXX SSppeeccttrruumm RROOMMss_? **********
-Copies of the 48K and 128K ZX Spectrum ROMs are included with SkoolKit (in
-theskoolkit/resourcesdirectory). The copyright in these ROMs is held by
-Amstrad, who have kindly _g_i_v_e_n_ _p_e_r_m_i_s_s_i_o_n for them to be redistributed.
+Copies of the 48K, 128K and +2 ROMs are included with SkoolKit (in theskoolkit/
+resourcesdirectory). The copyright in these ROMs is held by Amstrad, who have
+kindly _g_i_v_e_n_ _p_e_r_m_i_s_s_i_o_n for them to be redistributed.
 ******** _TT_aa_bb_ll_ee_ _oo_ff_ _CC_oo_nn_tt_ee_nn_tt_ss ********
     * _W_h_a_t_ _i_s_ _S_k_o_o_l_K_i_t_?
           o _F_e_a_t_u_r_e_s
           o _A_u_t_h_o_r_s
           o _L_i_c_e_n_c_e
           o _Z_X_ _S_p_e_c_t_r_u_m_ _R_O_M_s
 ****** PPrreevviioouuss ttooppiicc ******
@@ -92,10 +96,10 @@
     * _S_h_o_w_ _S_o_u_r_c_e
 ******** QQuuiicckk sseeaarrcchh ********
 [q                   ][Go]
 ******** NNaavviiggaattiioonn ********
     * _i_n_d_e_x
     * _n_e_x_t |
     * _p_r_e_v_i_o_u_s |
-    * _S_k_o_o_l_K_i_t_ _9_._1_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
+    * _S_k_o_o_l_K_i_t_ _9_._2_ _d_o_c_u_m_e_n_t_a_t_i_o_n 
     * What is SkoolKit?
  Copyright 2024, Richard Dymond. Created using _S_p_h_i_n_x 5.3.0.
```

### Comparing `skoolkit-9.1/examples/hungry_horace.ctl` & `skoolkit-9.2/examples/hungry_horace.ctl`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/examples/hungry_horace.ref` & `skoolkit-9.2/examples/hungry_horace.ref`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/long_description.rst` & `skoolkit-9.2/long_description.rst`

 * *Files 5% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 With SkoolKit you can:
 
 * use sna2ctl.py_ to generate a `control file`_ (an attempt to identify
   routines and data blocks by static analysis) from a snapshot (SNA, SZX or
   Z80) or raw memory file
 * enable sna2ctl.py_ to generate a much better control file that more reliably
   distinguishes code from data by using a code execution map produced by an
-  emulator
+  emulator or rzxplay.py_
 * use sna2skool.py_ along with this control file to produce a disassembly of a
   snapshot or raw memory file
 * add annotations to this disassembly (or the control file) as you discover the
   purpose of each routine and data block
 * use skool2html.py_ to convert a disassembly into a bunch of HTML files (with
   annotations in place, and the operands of CALL and JP instructions converted
   into hyperlinks)
@@ -36,16 +36,20 @@
 * use tap2sna.py_ to convert a TAP or TZX file into a 'pristine' Z80 or SZX
   snapshot
 * use snapinfo.py_ to analyse a snapshot or raw memory file and list the BASIC
   program it contains, show register values, produce a call graph, find tile
   graphic data, find text, or find sequences of arbitrary byte values
 * use trace.py_ to trace the execution of machine code in a snapshot or raw
   memory file
+* use rzxplay.py_ to trace the execution of machine code in an RZX file, and
+  produce a code execution map for sna2ctl.py_
 * use tapinfo.py_ to analyse the blocks in a TAP or TZX file, and list the
   BASIC program it contains
+* use rzxinfo.py_ to analyse the blocks in an RZX file, and extract snapshots
+  from it
 * use bin2tap.py_ to convert a snapshot or raw memory file into a TAP file
 * use bin2sna.py_ to convert a raw memory file into a Z80 or SZX snapshot
 * use snapmod.py_ to modify the register values or memory contents in a Z80 or
   SZX snapshot
 * use sna2img.py_ to convert graphic data in a disassembly, SCR file, snapshot
   or raw memory file into a PNG image
 
@@ -61,14 +65,16 @@
 
 For a demonstration of SkoolKit's capabilities, take a look at the complete
 disassemblies of `Skool Daze`_, `Back to Skool`_, `Contact Sam Cruise`_,
 `Manic Miner`_, `Jet Set Willy`_ and `Hungry Horace`_.
 
 .. _bin2sna.py: https://skoolkid.github.io/skoolkit/commands.html#bin2sna-py
 .. _bin2tap.py: https://skoolkid.github.io/skoolkit/commands.html#bin2tap-py
+.. _rzxinfo.py: https://skoolkid.github.io/skoolkit/commands.html#rzxinfo-py
+.. _rzxplay.py: https://skoolkid.github.io/skoolkit/commands.html#rzxplay-py
 .. _skool2asm.py: https://skoolkid.github.io/skoolkit/commands.html#skool2asm-py
 .. _skool2bin.py: https://skoolkid.github.io/skoolkit/commands.html#skool2bin-py
 .. _skool2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#skool2ctl-py
 .. _skool2html.py: https://skoolkid.github.io/skoolkit/commands.html#skool2html-py
 .. _sna2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#sna2ctl-py
 .. _sna2img.py: https://skoolkid.github.io/skoolkit/commands.html#sna2img-py
 .. _sna2skool.py: https://skoolkid.github.io/skoolkit/commands.html#sna2skool-py
```

### Comparing `skoolkit-9.1/man/man1/bin2sna.py.1` & `skoolkit-9.2/man/man1/bin2sna.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "BIN2SNA.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "BIN2SNA.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 bin2sna.py \- convert a binary file into an SZX or Z80 snapshot
 .SH SYNOPSIS
 .sp
 \fBbin2sna.py\fP [options] file.bin [OUTFILE]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/bin2tap.py.1` & `skoolkit-9.2/man/man1/bin2tap.py.1`

 * *Files 2% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "BIN2TAP.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "BIN2TAP.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 bin2tap.py \- convert a binary file or snapshot into a TAP file
 .SH SYNOPSIS
 .sp
 \fBbin2tap.py\fP [options] FILE [file.tap]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/skool2asm.py.1` & `skoolkit-9.2/man/man1/skool2asm.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SKOOL2ASM.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SKOOL2ASM.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 skool2asm.py \- convert a skool file to ASM format
 .SH SYNOPSIS
 .sp
 \fBskool2asm.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/skool2bin.py.1` & `skoolkit-9.2/man/man1/skool2bin.py.1`

 * *Files 5% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SKOOL2BIN.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SKOOL2BIN.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 skool2bin.py \- convert a skool file into a binary (raw memory) file
 .SH SYNOPSIS
 .sp
 \fBskool2bin.py\fP [options] file.skool [file.bin]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/skool2ctl.py.1` & `skoolkit-9.2/man/man1/skool2ctl.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SKOOL2CTL.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SKOOL2CTL.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 skool2ctl.py \- convert a skool file into a control file
 .SH SYNOPSIS
 .sp
 \fBskool2ctl.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/skool2html.py.1` & `skoolkit-9.2/man/man1/skool2html.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SKOOL2HTML.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SKOOL2HTML.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 skool2html.py \- convert a skool file and ref files to HTML
 .SH SYNOPSIS
 .sp
 \fBskool2html.py\fP [options] SKOOLFILE [REFFILE...]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/sna2ctl.py.1` & `skoolkit-9.2/man/man1/sna2ctl.py.1`

 * *Files 5% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SNA2CTL.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SNA2CTL.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 sna2ctl.py \- generate a control file for a binary file or a snapshot
 .SH SYNOPSIS
 .sp
 \fBsna2ctl.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
@@ -61,16 +61,17 @@
 .TP
 .B  \-l\fP,\fB  \-\-hex\-lower
 Write lower case hexadecimal addresses.
 .UNINDENT
 .INDENT 0.0
 .TP
 .B \-m, \-\-map \fIFILE\fP
-Specify a code execution map to use. Code execution maps produced by the
-Fuse, SpecEmu, Spud, Zero and Z80 Spectrum emulators are supported.
+Specify a code execution map to use. Code execution maps produced by
+\fBrzxplay.py\fP and by the Fuse, SpecEmu, Spud, Zero and Z80 Spectrum
+emulators are supported.
 .TP
 .B \-o, \-\-org \fIADDR\fP
 Specify the origin address of a binary file. The default origin address is
 65536 minus the length of the file. \fIADDR\fP must be a decimal number, or a
 hexadecimal number prefixed by \(aq0x\(aq.
 .TP
 .B \-p, \-\-page \fIPAGE\fP
```

### Comparing `skoolkit-9.1/man/man1/sna2img.py.1` & `skoolkit-9.2/man/man1/sna2img.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SNA2IMG.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SNA2IMG.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 sna2img.py \- convert a binary file or a SCR/SKOOL/SNA/SZX/Z80 file into a PNG file
 .SH SYNOPSIS
 .sp
 \fBsna2img.py\fP [options] INPUT [OUTPUT]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/sna2skool.py.1` & `skoolkit-9.2/man/man1/sna2skool.py.1`

 * *Files 0% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SNA2SKOOL.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SNA2SKOOL.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 sna2skool.py \- convert a binary file or a snapshot into a skool file
 .SH SYNOPSIS
 .sp
 \fBsna2kool.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/snapinfo.py.1` & `skoolkit-9.2/man/man1/snapinfo.py.1`

 * *Files 2% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SNAPINFO.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SNAPINFO.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 snapinfo.py \- show information on the registers and RAM in a snapshot file
 .SH SYNOPSIS
 .sp
 \fBsnapinfo.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/snapmod.py.1` & `skoolkit-9.2/man/man1/snapmod.py.1`

 * *Files 2% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "SNAPMOD.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "SNAPMOD.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 snapmod.py \- modify an SZX or Z80 snapshot
 .SH SYNOPSIS
 .sp
 \fBsnapmod.py\fP [options] infile [outfile]
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/tap2sna.py.1` & `skoolkit-9.2/man/man1/tap2sna.py.1`

 * *Files 2% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "TAP2SNA.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "TAP2SNA.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 tap2sna.py \- convert a TAP or TZX file into a snapshot file
 .SH SYNOPSIS
 .nf
 \fBtap2sna.py\fP [options] INPUT [OUTFILE]
 \fBtap2sna.py\fP @FILE [args]
 .fi
@@ -122,16 +122,16 @@
 .INDENT 0.0
 .TP
 .B  \-V\fP,\fB  \-\-version
 Show the SkoolKit version number and exit.
 .UNINDENT
 .SH TZX SUPPORT
 .sp
-\fBtap2sna.py\fP cannot read data from TZX block types 0x15 (direct recording),
-0x18 (CSW recording) or 0x19 (generalized data block).
+\fBtap2sna.py\fP cannot read data from TZX block types 0x18 (CSW recording) or
+0x19 (generalized data block).
 .SH SIMULATED LOAD
 .sp
 By default, \fBtap2sna.py\fP simulates a freshly booted 48K ZX Spectrum running
 LOAD \(dq\(dq (or LOAD \(dq\(dqCODE, if the first block on the tape is a \(aqBytes\(aq header).
 Whenever the Spectrum ROM\(aqs load routine at $0556 is called, a shortcut is
 taken by \(dqfast loading\(dq the next block on the tape. All other code (including
 any custom loader) is fully simulated. Simulation continues until the program
@@ -162,15 +162,16 @@
 (\fB0\fP)
 .IP \(bu 2
 \fBaccelerator\fP \- a comma\-separated list of tape\-sampling loop accelerators
 to use (see the \fBACCELERATORS\fP section below)
 .IP \(bu 2
 \fBcmio\fP \- enable simulation of memory contention and I/O contention delays
 (\fB1\fP), or disable it (\fB0\fP); this is disabled by default to improve
-performance, but some loaders may require it
+performance, but some loaders may require it; when this is enabled, all
+acceleration is disabled
 .IP \(bu 2
 \fBfast\-load\fP \- enable fast loading (\fB1\fP, the default), or disable it
 (\fB0\fP); fast loading significantly reduces the load time for many tapes, but
 can also cause some loaders to fail
 .IP \(bu 2
 \fBfinish\-tape\fP \- run the tape to the end before stopping the simulation at
 the address specified by the \fB\-\-start\fP option (\fB1\fP), or stop the
@@ -194,14 +195,17 @@
 can help with tapes that require (but do not actually contain) long pauses
 between blocks, but can cause some loaders to fail
 .IP \(bu 2
 \fBpolarity\fP \- the EAR bit reading produced by the first pulse on the tape:
 \fB0\fP (the default) or \fB1\fP; subsequent pulses give readings that alternate
 between 0 and 1
 .IP \(bu 2
+\fBpython\fP \- whether to use the pure Python Z80 simulator (\fB1\fP), or the
+much faster C version if available (\fB0\fP, the default)
+.IP \(bu 2
 \fBtimeout\fP \- the number of seconds of Z80 CPU time after which to abort the
 simulated LOAD if it\(aqs still in progress (default: 900)
 .IP \(bu 2
 \fBtrace\fP \- the file to which to log all instructions executed during the
 simulated LOAD (default: none)
 .UNINDENT
 .sp
```

### Comparing `skoolkit-9.1/man/man1/tapinfo.py.1` & `skoolkit-9.2/man/man1/tapinfo.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,15 +23,15 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "TAPINFO.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "TAPINFO.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 tapinfo.py \- show the blocks in a TAP or TZX file
 .SH SYNOPSIS
 .sp
 \fBtapinfo.py\fP [options] FILE
 .SH DESCRIPTION
 .sp
```

### Comparing `skoolkit-9.1/man/man1/trace.py.1` & `skoolkit-9.2/man/man1/trace.py.1`

 * *Files 1% similar despite different names*

```diff
@@ -23,26 +23,27 @@
 . RE
 .\" indent \\n[an-margin]
 .\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .nr rst2man-indent-level -1
 .\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
 .in \\n[rst2man-indent\\n[rst2man-indent-level]]u
 ..
-.TH "TRACE.PY" "1" "Feb 03, 2024" "9.1" "SkoolKit"
+.TH "TRACE.PY" "1" "May 11, 2024" "9.2" "SkoolKit"
 .SH NAME
 trace.py \- simulate code execution in a 48K or 128K memory snapshot
 .SH SYNOPSIS
 .sp
 \fBtrace.py\fP [options] FILE [OUTFILE]
 .SH DESCRIPTION
 .sp
-\fBtrace.py\fP simulates the execution of machine code in a 48K or 128K binary
-(raw memory) file or a SNA, SZX or Z80 snapshot. If FILE is \(aq48\(aq or \(aq128\(aq, no
-snapshot is loaded, and the RAM is left blank (all zeroes). If \(aqOUTFILE\(aq is
-given, an SZX or Z80 snapshot is written after execution has completed.
+\fBtrace.py\fP simulates the execution of machine code in a 48K, 128K or +2 SNA,
+SZX or Z80 snapshot, or a binary (raw memory) file. If FILE is \(aq48\(aq, \(aq128\(aq or
+\(aq+2\(aq, no snapshot is loaded, and the RAM is left blank (all zeroes). If
+\(aqOUTFILE\(aq is given, an SZX or Z80 snapshot is written after execution has
+completed.
 .SH OPTIONS
 .INDENT 0.0
 .TP
 .B  \-\-audio
 Show a list of the delays (in T\-states) between changes in the state of the
 ZX Spectrum speaker made by the code that was executed.
 .TP
@@ -90,14 +91,21 @@
 number, or a hexadecimal number prefixed by \(aq0x\(aq.
 .TP
 .B \-p, \-\-poke \fI[p:]a[\-b[\-c]],[^+]v\fP
 POKE N,v in RAM bank p for N in {a, a+c, a+2c..., b}. Prefix \(aqv\(aq with \(aq^\(aq to
 perform an XOR operation, or \(aq+\(aq to perform an ADD operation. This option may
 be used multiple times. \(aqa\(aq, \(aqb\(aq, \(aqc\(aq and \(aqv\(aq must each be a decimal number,
 or a hexadecimal number prefixed by \(aq0x\(aq.
+.UNINDENT
+.INDENT 0.0
+.TP
+.B  \-\-python
+Use the pure Python Z80 simulator even if the C version is available.
+.UNINDENT
+.INDENT 0.0
 .TP
 .B \-r, \-\-reg \fIname=value\fP
 Set the value of a register before execution begins. Do \fB\-\-reg help\fP for
 more information, or see the section on \fBREGISTERS\fP below. This option may
 be used multiple times.
 .TP
 .B \-\-rom \fIFILE\fP
```

### Comparing `skoolkit-9.1/setup.cfg` & `skoolkit-9.2/setup.cfg`

 * *Files 16% similar despite different names*

```diff
@@ -23,14 +23,16 @@
 	Topic :: Utilities
 
 [options]
 packages = skoolkit
 scripts = 
 	bin2sna.py
 	bin2tap.py
+	rzxinfo.py
+	rzxplay.py
 	skool2asm.py
 	skool2bin.py
 	skool2ctl.py
 	skool2html.py
 	sna2ctl.py
 	sna2img.py
 	sna2skool.py
```

### Comparing `skoolkit-9.1/skool2asm.py` & `skoolkit-9.2/skool2asm.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skool2bin.py` & `skoolkit-9.2/skool2bin.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skool2ctl.py` & `skoolkit-9.2/skool2ctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skool2html.py` & `skoolkit-9.2/skool2html.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/__init__.py` & `skoolkit-9.2/skoolkit/__init__.py`

 * *Files 5% similar despite different names*

```diff
@@ -18,15 +18,25 @@
 import html
 import sys
 import os
 import posixpath
 import textwrap
 import importlib
 
-VERSION = '9.1'
+try:
+    from skoolkit.csimulator import CSimulator
+except ImportError: # pragma: no cover
+    CSimulator = None
+
+try:
+    from skoolkit.ccmiosimulator import CCMIOSimulator
+except ImportError: # pragma: no cover
+    CCMIOSimulator = None
+
+VERSION = '9.2'
 PACKAGE_DIR = os.path.dirname(__file__)
 
 BASE_10 = 10
 BASE_16 = 16
 
 CASE_LOWER = 1
 CASE_UPPER = 2
@@ -38,14 +48,19 @@
 ROM48 = os.path.join(PACKAGE_DIR, 'resources', '48.rom')
 
 ROM128 = (
     os.path.join(PACKAGE_DIR, 'resources', '128-0.rom'),
     os.path.join(PACKAGE_DIR, 'resources', '128-1.rom')
 )
 
+ROM_PLUS2 = (
+    os.path.join(PACKAGE_DIR, 'resources', 'plus2-0.rom'),
+    os.path.join(PACKAGE_DIR, 'resources', 'plus2-1.rom')
+)
+
 def error(msg):
     sys.stderr.write('ERROR: {0}\n'.format(msg))
     sys.exit(1)
 
 def warn(msg):
     sys.stderr.write('WARNING: {0}\n'.format(msg))
```

### Comparing `skoolkit-9.1/skoolkit/audio.py` & `skoolkit-9.2/skoolkit/audio.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/basic.py` & `skoolkit-9.2/skoolkit/basic.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/bin2sna.py` & `skoolkit-9.2/skoolkit/bin2sna.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/bin2tap.py` & `skoolkit-9.2/skoolkit/bin2tap.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/cmiosimulator.py` & `skoolkit-9.2/skoolkit/cmiosimulator.py`

 * *Files 0% similar despite different names*

```diff
@@ -63,31 +63,31 @@
             return ((0, 4),)
         # Low bit reset (ULA port)
         if 0x4000 <= port < 0x8000:
             return ((0x4000, 1), (0x4000, 3))
         return ((0, 1), (0x4000, 3))
 
     def contend_128k(self, t, timings):
-        c = self.memory.page % 2
+        c = self.memory.o7ffd % 2
         delay = 0
         for address, tstates in timings:
             if 0x4000 <= address < 0x8000 or (c and address >= 0xC000):
                 delay += DELAYS_128K[t % 70908]
                 t += DELAYS_128K[t % 70908]
             t += tstates
         return delay
 
     def io_contention_128k(self, port):
         if port % 2:
             # Low bit set
-            if 0x4000 <= port < 0x8000 or (self.memory.page % 2 and port >= 0xC000):
+            if 0x4000 <= port < 0x8000 or (self.memory.o7ffd % 2 and port >= 0xC000):
                 return ((0x4000, 1), (0x4000, 1), (0x4000, 1), (0x4000, 1))
             return ((0, 4),)
         # Low bit reset (ULA port)
-        if 0x4000 <= port < 0x8000 or (self.memory.page % 2 and port >= 0xC000):
+        if 0x4000 <= port < 0x8000 or (self.memory.o7ffd % 2 and port >= 0xC000):
             return ((0x4000, 1), (0x4000, 3))
         return ((0, 1), (0x4000, 3))
 
     def af_hl(self, registers, memory, af):
         # ADD A,(HL) / AND (HL) / CP (HL) / OR (HL) / SUB (HL) / XOR (HL)
         if self.t0 < registers[25] % self.frame_duration < self.t1:
             delay = self.contend(registers[25], ((registers[24], 4), (registers[7] + 256 * registers[6], 3)))
@@ -429,15 +429,15 @@
             delay = 0
         super().exx(registers)
         registers[25] += delay
 
     def halt(self, registers):
         # HALT
         if self.t0 < registers[25] % self.frame_duration < self.t1:
-            if self.halted:
+            if registers[28]:
                 delay = self.contend(registers[25], (((registers[24] + 1) % 65536, 4),))
             else:
                 delay = self.contend(registers[25], ((registers[24], 4),))
         else:
             delay = 0
         super().halt(registers)
         registers[25] += delay
@@ -813,15 +813,15 @@
 
     def outi(self, registers, memory, inc, repeat, parity):
         # OUTI / OUTD / OTIR / OTDR
         if self.t0 < registers[25] % self.frame_duration < self.t1:
             pc = registers[24]
             b = registers[2]
             bc = registers[3] + 256 * b
-            io_c = self.io_contention(bc)
+            io_c = self.io_contention((bc - 256) % 65536)
             if repeat and b != 1:
                 # 21 T-states
                 delay = self.contend(registers[25], ((pc, 4), ((pc + 1) % 65536, 4), (registers[15] + 256 * registers[14], 1), (registers[7] + 256 * registers[6], 3), *io_c, (bc, 1), (bc, 1), (bc, 1), (bc, 1), (bc, 1)))
             else:
                 # 16 T-states
                 delay = self.contend(registers[25], ((pc, 4), ((pc + 1) % 65536, 4), (registers[15] + 256 * registers[14], 1), (registers[7] + 256 * registers[6], 3), *io_c))
         else:
```

### Comparing `skoolkit-9.1/skoolkit/components.py` & `skoolkit-9.2/skoolkit/components.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/config.py` & `skoolkit-9.2/skoolkit/config.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/ctlparser.py` & `skoolkit-9.2/skoolkit/ctlparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/defaults.py` & `skoolkit-9.2/skoolkit/defaults.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/disassembler.py` & `skoolkit-9.2/skoolkit/disassembler.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/graphics.py` & `skoolkit-9.2/skoolkit/graphics.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/image.py` & `skoolkit-9.2/skoolkit/image.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/kbtracer.py` & `skoolkit-9.2/skoolkit/kbtracer.py`

 * *Files 4% similar despite different names*

```diff
@@ -311,46 +311,54 @@
         self.out7ffd = 0
         self.outfffd = 0
         self.ay = [0] * 16
         self.outfe = 0
 
     def run(self, stop, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt):
         simulator = self.simulator
-        opcodes = simulator.opcodes
         memory = simulator.memory
         registers = simulator.registers
-        frame_duration = simulator.frame_duration
-        int_active = simulator.int_active
         keys = self.keys
-        pc = registers[24]
-        tstates = registers[25]
         if tracefile:
             r = Registers(registers)
 
-        while True:
-            t0 = tstates
-            if tracefile:
-                i = disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
-                opcodes[memory[pc]]()
-                tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
+        if hasattr(simulator, 'press_keys'): # pragma: no cover
+            if trace_line:
+                df = lambda pc: disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
+                tf = lambda pc, i, t0: tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
             else:
-                opcodes[memory[pc]]()
+                df = tf = None
+            simulator.press_keys(keys, stop, timeout, df, tf)
+        else:
+            opcodes = simulator.opcodes
+            frame_duration = simulator.frame_duration
+            int_active = simulator.int_active
+            pc = registers[24]
             tstates = registers[25]
-
-            if simulator.iff and tstates % frame_duration < int_active:
-                if simulator.accept_interrupt(registers, memory, pc) and keys and not keys[0]:
-                    keys.pop(0)
+            while True:
+                t0 = tstates
+                if tracefile:
+                    i = disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
+                    opcodes[memory[pc]]()
+                    tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
+                else:
+                    opcodes[memory[pc]]()
                 tstates = registers[25]
 
-            pc = registers[24]
-            if pc == stop:
-                break
+                if registers[26] and tstates % frame_duration < int_active:
+                    if simulator.accept_interrupt(registers, memory, pc) and keys and not keys[0]:
+                        keys.pop(0)
+                    tstates = registers[25]
+
+                pc = registers[24]
+                if pc == stop:
+                    break
 
-            if tstates > timeout:
-                break
+                if tstates > timeout:
+                    break
 
     def read_port(self, registers, port):
         if self.keys:
             kb = self.keys[0]
             if port in kb:
                 return kb.pop(port)
         return 255
```

### Comparing `skoolkit-9.1/skoolkit/loadsample.py` & `skoolkit-9.2/skoolkit/loadsample.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/loadtracer.py` & `skoolkit-9.2/skoolkit/loadtracer.py`

 * *Files 20% similar despite different names*

```diff
@@ -10,21 +10,23 @@
 # SkoolKit is distributed in the hope that it will be useful, but WITHOUT ANY
 # WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
+import array
 from collections import defaultdict
 from functools import partial
 
 from skoolkit import SkoolKitError, write, write_line
 from skoolkit.basic import TextReader
 from skoolkit.pagingtracer import PagingTracer
-from skoolkit.simulator import A, D, E, F, H, L, IXh, IXl, PC, T, R1
+from skoolkit.simulator import R1
+from skoolkit.simutils import A, D, E, F, H, L, IXh, IXl, R, SP, PC, T, IFF
 from skoolkit.traceutils import Registers, disassemble
 
 DEC = tuple(tuple((
         v % 256,
         (v & 0xA8)                 # S.5.3...
         + (v == 0) * 0x40          # .Z......
         + (v % 16 == 0x0F) * 0x10  # ...H....
@@ -53,25 +55,25 @@
     indexes = []
     data_blocks = []
     tstates = first_edge
 
     if analyse:
         print('T-states    EAR  Description')
 
-    for i, (timings, data) in enumerate(blocks):
+    for i, (block_id, timings, data) in enumerate(blocks):
         # Pilot tone
         if analyse and timings.pilot_len:
             ear = (len(edges) - 1) % 2
             print(f'{tstates:>10}  {ear:>3}  Tone ({timings.pilot_len} x {timings.pilot} T-states)')
         for n in range(timings.pilot_len):
             tstates += timings.pilot
             edges.append(tstates)
 
-        # Sync pulses
-        for s in timings.sync:
+        # Sync pulses / Pulse Sequence / Direct Recording
+        for s in timings.sync or timings.pulses:
             if analyse:
                 ear = (len(edges) - 1) % 2
                 print(f'{tstates:>10}  {ear:>3}  Pulse ({s} T-states)')
             tstates += s
             edges.append(tstates)
 
         # Data
@@ -98,245 +100,282 @@
                         duration = timings.zero
                     for k in range(2):
                         tstates += duration
                         edges.append(tstates)
                     b *= 2
             indexes.append((start, len(edges) - 1))
             data_blocks.append(data)
-        elif i == len(blocks) - 1: # pragma: no cover
-            # If the last block on the tape contains pulses but no data, add a
-            # dummy (empty) data block to ensure that the pulses are read
+        elif i == len(blocks) - 1 or timings.pulses: # pragma: no cover
+            # If this block contains a Direct Recording, or is the last block
+            # on the tape and contains a Pulse Sequence, add a dummy (empty)
+            # data block to ensure that the pulses are read
             indexes.append((len(edges) - 1, len(edges) - 1))
             data_blocks.append(())
 
         # Pause
         if i + 1 < len(blocks) and timings.pause:
             if analyse:
                 ear = (len(edges) - 1) % 2
                 print(f'{tstates:>10}  {ear:>3}  Pause ({timings.pause} T-states)')
             tstates += timings.pause
 
     return edges, indexes, data_blocks
 
 class LoadTracer(PagingTracer):
-    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity, finish_tape,
+    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity,
                  in_min_addr, accel_dec_a, list_accelerators, border, out7ffd, outfffd, ay, outfe):
-        self.accelerators = defaultdict(int)
+        self.acc_usage = defaultdict(int)
         self.inc_b_misses = 0
         self.dec_b_misses = 0
         self.dec_a_jr_hits = 0
         self.dec_a_jp_hits = 0
         self.dec_a_misses = 0
         self.simulator = simulator
         self.edges, self.indexes, self.blocks = get_edges(blocks, first_edge, polarity)
         self.pause = pause
-        self.finish_tape = finish_tape
         self.in_min_addr = in_min_addr
         self.announce_data = True
-        opcodes = simulator.opcodes
-        memory = simulator.memory
-        registers = simulator.registers
-        if list_accelerators:
-            opcodes[0x3D] = partial(self.dec_a_list, registers, memory)
-        elif accel_dec_a == 1:
-            opcodes[0x3D] = partial(self.dec_a_jr, registers, memory)
-        elif accel_dec_a == 2:
-            opcodes[0x3D] = partial(self.dec_a_jp, registers, memory)
-        if accelerators:
-            inc_b_acc = []
-            dec_b_acc = []
-            for accelerator in accelerators:
-                if accelerator.opcode == 0x04:
-                    inc_b_acc.append(accelerator)
-                else:
-                    dec_b_acc.append(accelerator)
-            if list_accelerators:
-                opcodes[0x04] = partial(self.list_accelerators, registers, memory, inc_b_acc, self.inc_b_auto, 0x04)
-                opcodes[0x05] = partial(self.list_accelerators, registers, memory, dec_b_acc, self.dec_b_auto, 0x05)
-            else:
-                if len(inc_b_acc) == 1:
-                    accelerator = inc_b_acc[0]
-                    if None in accelerator.code:
-                        opcodes[0x04] = partial(self.inc_b_none, registers, memory, accelerator)
+        self.accelerators = accelerators
+        if hasattr(simulator, 'opcodes'):
+            opcodes = simulator.opcodes
+            memory = simulator.memory
+            registers = simulator.registers
+            if list_accelerators and accel_dec_a:
+                opcodes[0x3D] = partial(self.dec_a_list, registers, memory)
+            elif accel_dec_a == 1:
+                opcodes[0x3D] = partial(self.dec_a_jr, registers, memory)
+            elif accel_dec_a == 2:
+                opcodes[0x3D] = partial(self.dec_a_jp, registers, memory)
+            if accelerators:
+                inc_b_acc = []
+                dec_b_acc = []
+                for accelerator in accelerators:
+                    if accelerator.opcode == 0x04:
+                        inc_b_acc.append(accelerator)
                     else:
-                        opcodes[0x04] = partial(self.inc_b, registers, memory, accelerator)
-                elif inc_b_acc:
-                    opcodes[0x04] = partial(self.inc_b_auto, registers, memory, inc_b_acc)
-                if len(dec_b_acc) == 1:
-                    opcodes[0x05] = partial(self.dec_b, registers, memory, dec_b_acc[0])
-                elif dec_b_acc:
-                    opcodes[0x05] = partial(self.dec_b_auto, registers, memory, dec_b_acc)
-        self.next_edge = 0
+                        dec_b_acc.append(accelerator)
+                if list_accelerators:
+                    opcodes[0x04] = partial(self.list_accelerators, registers, memory, inc_b_acc, self.inc_b_auto, 0x04)
+                    opcodes[0x05] = partial(self.list_accelerators, registers, memory, dec_b_acc, self.dec_b_auto, 0x05)
+                else:
+                    if len(inc_b_acc) == 1:
+                        accelerator = inc_b_acc[0]
+                        if None in accelerator.code:
+                            opcodes[0x04] = partial(self.inc_b_none, registers, memory, accelerator)
+                        else:
+                            opcodes[0x04] = partial(self.inc_b, registers, memory, accelerator)
+                    elif inc_b_acc:
+                        opcodes[0x04] = partial(self.inc_b_auto, registers, memory, inc_b_acc)
+                    if len(dec_b_acc) == 1:
+                        opcodes[0x05] = partial(self.dec_b, registers, memory, dec_b_acc[0])
+                    elif dec_b_acc:
+                        opcodes[0x05] = partial(self.dec_b_auto, registers, memory, dec_b_acc)
         self.block_index = 0
-        self.block_data_index, self.block_max_index = self.indexes[0]
-        self.index = 0
+        self.block_data_index = self.indexes[0][0]
         self.max_index = len(self.edges) - 1
-        self.tape_running = False
-        self.end_of_tape = 0
-        self.tape_end_time = 0
-        self.custom_loader = False
         self.border = border
         if len(simulator.memory) == 65536:
             self.out7ffd = 0x10 # Signal: 48K ROM always
         else: # pragma: no cover
             self.out7ffd = out7ffd # 128K ROM 0/1
         self.outfffd = outfffd
         self.ay = ay
         self.outfe = outfe
         self.text = TextReader()
+        self.state = [
+            0,                  # state[0]: next edge (timestamp)
+            0,                  # state[1]: edge index
+            0,                  # state[2]: end of tape reached
+            self.indexes[0][1], # state[3]: index of final edge in current block
+            0,                  # state[4]: tape running
+            accel_dec_a,        # state[5]
+            list_accelerators,  # state[6]
+            0,                  # state[7]: custom loader detected
+            0,                  # state[8]: tape end time
+        ]
+        if hasattr(simulator, 'load'): # pragma: no cover
+            self.edges = array.array('Q', self.edges)
+            self.state = array.array('Q', self.state)
+        self.read_port = partial(self._read_port, self.state)
 
-    def run(self, stop, fast_load, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt):
+    def run(self, stop, fast_load, finish_tape, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt):
         simulator = self.simulator
-        opcodes = simulator.opcodes
         memory = simulator.memory
         registers = simulator.registers
-        frame_duration = simulator.frame_duration
-        int_active = simulator.int_active
-        pc = registers[24]
-        progress = 0
-        edges = self.edges
-        tape_length = edges[-1] // 1000
-        max_index = self.max_index
-        tstates = registers[25]
         if tracefile:
             r = Registers(registers)
 
-        while True:
-            t0 = tstates
+        if hasattr(simulator, 'load'): # pragma: no cover
             if tracefile:
-                i = disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
-                opcodes[memory[pc]]()
-                tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
+                df = lambda pc: disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
+                tf = lambda pc, i, t0: tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
             else:
-                opcodes[memory[pc]]()
+                df = tf = None
+            ppf = lambda p: write(f'[{p/10:5.1f}%]\x08\x08\x08\x08\x08\x08\x08\x08')
+            stop_cond = simulator.load(stop, fast_load, finish_tape, timeout, ppf, df, tf)
+            pc = registers[24]
+        else:
+            opcodes = simulator.opcodes
+            frame_duration = simulator.frame_duration
+            int_active = simulator.int_active
+            pc = registers[24]
+            progress = 0
+            edges = self.edges
+            tape_length = edges[-1] // 1000
+            max_index = self.max_index
             tstates = registers[25]
-
-            if simulator.iff and tstates % frame_duration < int_active:
-                simulator.accept_interrupt(registers, memory, pc)
+            state = self.state
+            while True:
+                t0 = tstates
+                if tracefile:
+                    i = disassemble(memory, pc, prefix, byte_fmt, word_fmt)[0]
+                    opcodes[memory[pc]]()
+                    tracefile.write(trace_line.format(pc=pc, i=i, r=r, t=t0))
+                else:
+                    opcodes[memory[pc]]()
                 tstates = registers[25]
 
-            if self.tape_running and tstates >= self.next_edge:
-                index = self.index
-                while index < max_index and edges[index + 1] < tstates:
-                    index += 1
-                self.index = index
-                if index == max_index:
-                    # Allow 1ms for the final edge on the tape to be read
-                    if tstates - edges[index] > 3500:
-                        self.stop_tape(tstates) # pragma: no cover
-                elif index > self.block_max_index:
-                    # Pause tape between blocks
-                    self.next_block(tstates) # pragma: no cover
-                else:
-                    self.next_edge = edges[index + 1]
-                    if index < self.block_max_index:
-                        p = edges[index] // tape_length
-                        if p > progress:
-                            msg = f'[{p/10:0.1f}%]'
-                            write(msg + chr(8) * len(msg))
-                            progress = p
+                if registers[26] and tstates % frame_duration < int_active:
+                    simulator.accept_interrupt(registers, memory, pc)
+                    tstates = registers[25]
+
+                if state[4] and tstates >= state[0]:
+                    index = state[1]
+                    while index < max_index and edges[index + 1] < tstates:
+                        index += 1
+                    state[1] = index
+                    if index == max_index:
+                        # Allow 1ms for the final edge on the tape to be read
+                        if tstates - edges[index] > 3500:
+                            self.stop_tape(tstates) # pragma: no cover
+                    elif index > state[3]:
+                        # Pause tape between blocks
+                        self.next_block(tstates) # pragma: no cover
+                    else:
+                        state[0] = edges[index + 1]
+                        if index < state[3]:
+                            p = edges[index] // tape_length
+                            if p > progress:
+                                write(f'[{p/10:5.1f}%]\x08\x08\x08\x08\x08\x08\x08\x08')
+                                progress = p
 
-            pc = registers[24]
+                pc = registers[24]
+
+                if pc == stop and (state[2] or not finish_tape):
+                    stop_cond = 0
+                    break
 
-            if pc == stop and (self.end_of_tape or not self.finish_tape):
-                write_line(f'Simulation stopped (PC at start address): PC={pc}')
-                break
-
-            if pc == 0x0556 and self.out7ffd & 0x10 and fast_load:
-                self.fast_load(simulator)
-                self.index = self.block_max_index
-                if self.index == max_index:
-                    # Final block, so stop the tape
-                    self.stop_tape(tstates)
+                if pc == 0x0556 and self.out7ffd & 0x10 and fast_load and self.fast_load(simulator):
+                    state[1] = state[3]
+                    if state[1] == max_index:
+                        # Final block, so stop the tape
+                        self.stop_tape(tstates)
+                    else:
+                        # Otherwise continue to play the tape until this block's
+                        # 'pause' period (if any) has elapsed
+                        state[4] = 1 # Signal: tape is running
+                        registers[25] = state[0] = edges[state[1]]
+                    pc = registers[24]
                 else:
-                    # Otherwise continue to play the tape until this block's
-                    # 'pause' period (if any) has elapsed
-                    self.tape_running = True
-                    registers[25] = self.next_edge = edges[self.index]
-                pc = registers[24]
-            else:
-                if self.end_of_tape and stop is None:
-                    if self.custom_loader:
-                        write_line(f'Simulation stopped (end of tape): PC={pc}')
+                    if state[2] and stop is None:
+                        # The tape has ended and no stop address is set
+                        if state[7]:
+                            # Custom loader was detected
+                            stop_cond = 1
+                            break
+                        if pc > 0x3FFF:
+                            # PC in RAM
+                            stop_cond = 2
+                            break
+                        if tstates - self.state[8] > 3500000: # pragma: no cover
+                            # Tape ended 1 second ago
+                            stop_cond = 3
+                            break
+                    if tstates > timeout: # pragma: no cover
+                        stop_cond = 4
                         break
-                    if pc > 0x3FFF:
-                        write_line(f'Simulation stopped (PC in RAM): PC={pc}')
-                        break
-                    if tstates - self.tape_end_time > 3500000: # pragma: no cover
-                        write_line(f'Simulation stopped (tape ended 1 second ago): PC={pc}')
-                        break
-                if tstates > timeout: # pragma: no cover
-                    write_line(f'Simulation stopped (timed out): PC={pc}')
-                    break
+
+        if stop_cond == 0:
+            write_line(f'Simulation stopped (PC at start address): PC={pc}')
+        elif stop_cond == 1:
+            write_line(f'Simulation stopped (end of tape): PC={pc}')
+        elif stop_cond == 2:
+            write_line(f'Simulation stopped (PC in RAM): PC={pc}')
+        elif stop_cond == 3: # pragma: no cover
+            write_line(f'Simulation stopped (tape ended 1 second ago): PC={pc}')
+        elif stop_cond == 4: # pragma: no cover
+            write_line(f'Simulation stopped (timed out): PC={pc}')
 
     def dec_a_jr(self, registers, memory):
         # Speed up any
         #   LD_DELAY: DEC A
         #             JR NZ,LD_DELAY
         # loop, which is common in tape loading routines
         a = registers[0]
-        pcn = registers[24] + 1
-        if a and memory[pcn:pcn + 2] == [0x20, 0xFD]:
+        pcn = (registers[24] + 1) % 65536
+        if registers[26] == 0 and a and memory[pcn] == 0x20 and memory[(pcn + 1) % 65536] == 0xFD:
             registers[0] = 0
             registers[1] = 0x42 + (registers[1] % 2)
             r = registers[15]
             registers[15] = (r & 0x80) + ((r + a * 2) % 128)
             registers[25] += 16 * a - 5
             registers[24] = (pcn + 2) % 65536
         else:
-            registers[:2] = DEC[registers[1] % 2][a]
+            registers[0], registers[1] = DEC[registers[1] % 2][a]
             registers[15] = R1[registers[15]]
             registers[25] += 4
             registers[24] = pcn % 65536
 
     def dec_a_jp(self, registers, memory):
         # Speed up any
         #   LD_DELAY: DEC A
         #             JP NZ,LD_DELAY
         # loop, which is used in a few tape loading routines
         a = registers[0]
         pc = registers[24]
-        if a and memory[pc + 1:pc + 4] == [0xC2, pc % 256, pc // 256]:
+        if registers[26] == 0 and a and memory[(pc + 1) % 65536] == 0xC2 and memory[(pc + 2) % 65536] == pc % 256 and memory[(pc + 3) % 65536] == pc // 256:
             registers[0] = 0
             registers[1] = 0x42 + (registers[1] % 2)
             r = registers[15]
             registers[15] = (r & 0x80) + ((r + a * 2) % 128)
             registers[25] += 14 * a
             registers[24] = (pc + 4) % 65536
         else:
-            registers[:2] = DEC[registers[1] % 2][a]
+            registers[0], registers[1] = DEC[registers[1] % 2][a]
             registers[15] = R1[registers[15]]
             registers[25] += 4
             registers[24] = (pc + 1) % 65536
 
     def dec_a_list(self, registers, memory):
         # Speed up any 'DEC A: JR/JP NZ,$-1' loop, and also count hits and
         # misses
         pc = registers[24]
-        if memory[pc + 1:pc + 3] == [0x20, 0xFD]:
-            self.dec_a_jr_hits += 1
-            self.dec_a_jr(registers, memory)
-        elif memory[pc + 1:pc + 4] == [0xC2, pc % 256, pc // 256]:
-            self.dec_a_jp_hits += 1
-            self.dec_a_jp(registers, memory)
-        else:
-            self.dec_a_misses += 1
-            registers[:2] = DEC[registers[1] % 2][registers[0]]
-            registers[15] = R1[registers[15]]
-            registers[25] += 4
-            registers[24] = (pc + 1) % 65536
+        if registers[26] == 0:
+            if memory[(pc + 1) % 65536] == 0x20 and memory[(pc + 2) % 65536] == 0xFD:
+                self.dec_a_jr_hits += 1
+                self.dec_a_jr(registers, memory)
+                return
+            if memory[(pc + 1) % 65536] == 0xC2 and memory[(pc + 2) % 65536] == pc % 256 and memory[(pc + 3) % 65536] == pc // 256:
+                self.dec_a_jp_hits += 1
+                self.dec_a_jp(registers, memory)
+                return
+        self.dec_a_misses += 1
+        registers[0], registers[1] = DEC[registers[1] % 2][registers[0]]
+        registers[15] = R1[registers[15]]
+        registers[25] += 4
+        registers[24] = (pc + 1) % 65536
 
     def dec_b(self, registers, memory, acc):
         # Speed up the tape-sampling loop with a loader-specific accelerator
         b = registers[2]
         loops = 0
         pcn = registers[24] + 1
-        if self.tape_running and memory[pcn - acc.c0:pcn + acc.c1] == acc.code:
-            if registers[3] & acc.ear_mask == ((self.index - acc.polarity) % 2) * acc.ear_mask:
-                delta = self.next_edge - registers[25] - acc.in_time
+        if self.state[4] and registers[26] == 0 and memory[pcn - acc.c0:pcn + acc.c1] == acc.code:
+            if registers[3] & acc.ear_mask == ((self.state[1] - acc.polarity) % 2) * acc.ear_mask:
+                delta = self.state[0] - registers[25] - acc.in_time
                 if delta > 0:
                     loops = min(delta // acc.loop_time + 1, (b - 1) % 256)
                     if loops:
                         # The carry flag is cleared on each loop iteration
                         registers[1] &= 0xFE
         registers[2], registers[1] = DEC[registers[1] % 2][(b - loops) % 256]
         r = registers[15]
@@ -345,20 +384,20 @@
         registers[24] = pcn % 65536
 
     def dec_b_auto(self, registers, memory, accelerators):
         # Speed up the tape-sampling loop with an automatically selected
         # loader-specific accelerator
         b = registers[2]
         pcn = registers[24] + 1
-        if self.tape_running:
+        if self.state[4] and registers[26] == 0:
             loops = 0
             for i, acc in enumerate(accelerators):
                 if memory[pcn - acc.c0:pcn + acc.c1] == acc.code:
-                    if registers[3] & acc.ear_mask == ((self.index - acc.polarity) % 2) * acc.ear_mask:
-                        delta = self.next_edge - registers[25] - acc.in_time
+                    if registers[3] & acc.ear_mask == ((self.state[1] - acc.polarity) % 2) * acc.ear_mask:
+                        delta = self.state[0] - registers[25] - acc.in_time
                         if delta > 0:
                             loops = min(delta // acc.loop_time + 1, (b - 1) % 256)
                             if loops:
                                 # The carry flag is cleared on each loop iteration
                                 registers[1] &= 0xFE
                     if i:
                         # Move the selected accelerator to the beginning of the
@@ -377,17 +416,17 @@
         registers[24] = pcn % 65536
 
     def inc_b(self, registers, memory, acc):
         # Speed up the tape-sampling loop with a loader-specific accelerator
         b = registers[2]
         loops = 0
         pcn = registers[24] + 1
-        if self.tape_running and memory[pcn - acc.c0:pcn + acc.c1] == acc.code:
-            if registers[3] & acc.ear_mask == ((self.index - acc.polarity) % 2) * acc.ear_mask:
-                delta = self.next_edge - registers[25] - acc.in_time
+        if self.state[4] and registers[26] == 0 and memory[pcn - acc.c0:pcn + acc.c1] == acc.code:
+            if registers[3] & acc.ear_mask == ((self.state[1] - acc.polarity) % 2) * acc.ear_mask:
+                delta = self.state[0] - registers[25] - acc.in_time
                 if delta > 0:
                     loops = min(delta // acc.loop_time + 1, 255 - b)
                     if loops:
                         # The carry flag is cleared on each loop iteration
                         registers[1] &= 0xFE
         registers[2], registers[1] = INC[registers[1] % 2][b + loops]
         r = registers[15]
@@ -396,17 +435,17 @@
         registers[24] = pcn % 65536
 
     def inc_b_none(self, registers, memory, acc):
         # Speed up the tape-sampling loop with a loader-specific accelerator
         b = registers[2]
         loops = 0
         pcn = registers[24] + 1
-        if self.tape_running and all(x == y or y is None for x, y in zip(memory[pcn - acc.c0:pcn + acc.c1], acc.code)):
-            if registers[3] & acc.ear_mask == ((self.index - acc.polarity) % 2) * acc.ear_mask:
-                delta = self.next_edge - registers[25] - acc.in_time
+        if self.state[4] and registers[26] == 0 and all(x == y or y is None for x, y in zip(memory[pcn - acc.c0:pcn + acc.c1], acc.code)):
+            if registers[3] & acc.ear_mask == ((self.state[1] - acc.polarity) % 2) * acc.ear_mask:
+                delta = self.state[0] - registers[25] - acc.in_time
                 if delta > 0:
                     loops = min(delta // acc.loop_time + 1, 255 - b)
                     if loops:
                         # The carry flag is cleared on each loop iteration
                         registers[1] &= 0xFE
         registers[2], registers[1] = INC[registers[1] % 2][b + loops]
         r = registers[15]
@@ -415,20 +454,20 @@
         registers[24] = pcn % 65536
 
     def inc_b_auto(self, registers, memory, accelerators):
         # Speed up the tape-sampling loop with an automatically selected
         # loader-specific accelerator
         b = registers[2]
         pcn = registers[24] + 1
-        if self.tape_running:
+        if self.state[4] and registers[26] == 0:
             loops = 0
             for i, acc in enumerate(accelerators):
                 if all(x == y or y is None for x, y in zip(memory[pcn - acc.c0:pcn + acc.c1], acc.code)):
-                    if registers[3] & acc.ear_mask == ((self.index - acc.polarity) % 2) * acc.ear_mask:
-                        delta = self.next_edge - registers[25] - acc.in_time
+                    if registers[3] & acc.ear_mask == ((self.state[1] - acc.polarity) % 2) * acc.ear_mask:
+                        delta = self.state[0] - registers[25] - acc.in_time
                         if delta > 0:
                             loops = min(delta // acc.loop_time + 1, 255 - b)
                             if loops:
                                 # The carry flag is cleared on each loop iteration
                                 registers[1] &= 0xFE
                     if i:
                         # Move the selected accelerator to the beginning of the
@@ -446,40 +485,40 @@
         registers[25] += 4
         registers[24] = pcn % 65536
 
     def list_accelerators(self, registers, memory, accelerators, auto_method, opcode):
         # Speed up the tape-sampling loop with an automatically selected
         # loader-specific accelerator, and also count hits and misses
         pcn = registers[24] + 1
-        if self.tape_running:
+        if self.state[4] and registers[26] == 0:
             for i, acc in enumerate(accelerators):
                 if all(x == y or y is None for x, y in zip(memory[pcn - acc.c0:pcn + acc.c1], acc.code)):
-                    self.accelerators[acc.name] += 1
+                    self.acc_usage[acc.name] += 1
                     if i:
                         # Move the selected accelerator to the beginning of the
                         # list so that it can be found quicker by auto_method()
                         accelerators.remove(acc)
                         accelerators.insert(0, acc)
                     auto_method(registers, memory, accelerators)
                     return
         if opcode == 0x04:
             self.inc_b_misses += 1
         else:
             self.dec_b_misses += 1
         auto_method(registers, memory, ())
 
-    def read_port(self, registers, port):
+    def _read_port(self, state, registers, port):
         if port % 256 == 0xFE:
             pc = registers[24]
             if pc >= self.in_min_addr or (0x0562 <= pc <= 0x05F1 and self.out7ffd & 0x10):
-                self.custom_loader = True
-                index = self.index
-                if self.announce_data and not self.end_of_tape:
+                state[7] = 1 # Signal: custom loader detected
+                index = state[1]
+                if self.announce_data and not state[2]:
                     self.announce_data = False
-                    self.tape_running = True
+                    state[4] = 1 # Signal: tape is running
                     registers[T] = self.edges[index]
                     length = len(self.blocks[self.block_index])
                     if length:
                         write_line(f'Data ({length} bytes)')
                 elif index == self.max_index:
                     # Final edge, so stop the tape
                     self.stop_tape(registers[T])
@@ -498,49 +537,62 @@
         return 255
 
     def next_block(self, tstates):
         self.block_index += 1
         if self.block_index >= len(self.blocks):
             self.stop_tape(tstates) # pragma: no cover
         else:
-            self.index = self.block_max_index + 1
-            self.next_edge = self.edges[self.index]
-            self.block_data_index, self.block_max_index = self.indexes[self.block_index]
-            self.tape_running = not self.pause
+            self.state[1] = self.state[3] + 1
+            self.state[0] = self.edges[self.state[1]]
+            self.block_data_index, self.state[3] = self.indexes[self.block_index]
+            self.state[4] = int(not self.pause) # Pause tape unless configured not to
             self.announce_data = True
 
     def stop_tape(self, tstates):
         self.block_index = len(self.blocks)
-        self.end_of_tape += 1
-        if self.end_of_tape == 1:
+        self.state[2] += 1 # Signal: end of tape reached
+        if self.state[2] == 1:
             write_line('Tape finished')
-            self.tape_end_time = tstates
-        self.tape_running = False
+            self.state[8] = tstates # Set tape end time
+        self.state[4] = 0 # Signal: tape is not running
 
     def fast_load(self, simulator):
         registers = simulator.registers
-        while self.block_data_index <= self.index < self.max_index:
+        while self.block_data_index <= self.state[1] < self.max_index:
             self.next_block(registers[T])
         if self.block_index < len(self.blocks):
             block = self.blocks[self.block_index]
         else:
             raise SkoolKitError("Failed to fast load block: unexpected end of tape")
+        if not block:
+            # This block has no separately defined data (e.g. Direct Recording
+            # block), so it can't be fast-loaded
+            return False # pragma: no cover
+
         memory = simulator.memory
         ix = registers[IXl] + 256 * registers[IXh] # Start address
         de = registers[E] + 256 * registers[D] # Block length
         a = registers[A]
         data_len = len(block) - 2
 
         # Exchange AF register pairs (as done at 0x0557), disable interrupts
         # (as done at 0x0559), and preload the machine stack with 0x053F (as
         # done at 0x055E)
         registers[0:2], registers[16:18] = registers[16:18], registers[0:2]
-        simulator.iff = 0
+        registers[IFF] = 0
         registers[H], registers[L] = 0x05, 0x3F # SA-LD-RET
-        simulator.push(registers, memory, R1, 11, 1, H, L)
+        sp = (registers[SP] - 2) % 65536
+        registers[SP] = sp
+        if sp > 0x3FFF:
+            memory[sp] = registers[L]
+        sp = (sp + 1) % 65536
+        if sp > 0x3FFF:
+            memory[sp] = registers[H]
+        registers[R] = R1[registers[R]]
+        registers[T] += 11
 
         if a == block[0]:
             skipped = ''
         else:
             skipped = ' [skipped]'
         if block[0] == 0 and data_len >= 17 and block[1] <= 3:
             name = self.text.get_text(block[2:12])
@@ -589,7 +641,8 @@
             registers[IXh] = (ix >> 8) & 0xFF
             registers[IXl] = ix & 0xFF
             registers[D] = (de >> 8) & 0xFF
             registers[E] = de & 0xFF
 
         registers[PC] = 0x05E2
         self.announce_data = False
+        return True
```

### Comparing `skoolkit-9.1/skoolkit/opcodes.py` & `skoolkit-9.2/skoolkit/opcodes.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/pagingtracer.py` & `skoolkit-9.2/skoolkit/pagingtracer.py`

 * *Files 7% similar despite different names*

```diff
@@ -10,22 +10,25 @@
 # SkoolKit is distributed in the hope that it will be useful, but WITHOUT ANY
 # WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
-from skoolkit import ROM128, read_bin_file
+from skoolkit import ROM128, ROM_PLUS2, read_bin_file
+
+ROMS = {'128K': ROM128, '+2': ROM_PLUS2}
 
 class Memory:
-    def __init__(self, banks=None, out7ffd=0):
+    def __init__(self, banks=None, out7ffd=0, machine='128K'):
         self.banks = banks or tuple([0] * 16384 for b in range(8))
-        self.roms = tuple(read_bin_file(r) for r in ROM128)
+        self.roms = tuple(list(read_bin_file(r)) for r in ROMS.get(machine, ROM128))
         self.memory = [None, self.banks[5], self.banks[2], None]
         self.out7ffd(out7ffd)
+        self.machine = machine
 
     def __getitem__(self, index):
         if isinstance(index, int):
             return self.memory[index // 0x4000][index % 0x4000]
         return [self.memory[a // 0x4000][a % 0x4000] for a in range(index.start, min(index.stop, 65536))]
 
     def __setitem__(self, index, value):
@@ -33,15 +36,23 @@
 
     def __len__(self):
         return 0x20000
 
     def out7ffd(self, value):
         self.memory[0] = self.roms[(value % 32) // 16]
         self.memory[3] = self.banks[value % 8]
-        self.page = value % 8
+        self.o7ffd = value
+
+    def convert(self): # pragma: no cover
+        # Prepare for use by a CSimulator
+        rom_id = (self.o7ffd % 32) // 16
+        page = self.o7ffd % 8
+        self.roms = tuple(bytearray(rom) for rom in self.roms)
+        self.banks = [bytearray(bank) for bank in self.banks]
+        self.memory = [self.roms[rom_id], self.banks[5], self.banks[2], self.banks[page]]
 
 class PagingTracer:
     def write_port(self, registers, port, value):
         if port % 2 == 0:
             self.border = value % 8
             self.outfe = value
         elif port & 0x8002 == 0 and self.out7ffd & 32 == 0:
```

### Comparing `skoolkit-9.1/skoolkit/pngwriter.py` & `skoolkit-9.2/skoolkit/pngwriter.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/refparser.py` & `skoolkit-9.2/skoolkit/refparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/128-0.rom` & `skoolkit-9.2/skoolkit/resources/128-0.rom`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/128-1.rom` & `skoolkit-9.2/skoolkit/resources/128-1.rom`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/48.rom` & `skoolkit-9.2/skoolkit/resources/48.rom`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/skoolkit-dark.css` & `skoolkit-9.2/skoolkit/resources/skoolkit-dark.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/skoolkit-green.css` & `skoolkit-9.2/skoolkit/resources/skoolkit-green.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/skoolkit-plum.css` & `skoolkit-9.2/skoolkit/resources/skoolkit-plum.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/resources/skoolkit.css` & `skoolkit-9.2/skoolkit/resources/skoolkit.css`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/simtables.py` & `skoolkit-9.2/skoolkit/simtables.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/simulator.py` & `skoolkit-9.2/skoolkit/simulator.py`

 * *Files 2% similar despite different names*

```diff
@@ -12,139 +12,52 @@
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
 from functools import partial
 
+from skoolkit import simutils
+from skoolkit.simutils import (FRAME_DURATIONS, INT_ACTIVE, A, F, B, C, D, E,
+                               H, L, IXh, IXl, IYh, IYl, SP, SP2, I, R)
+
 JR_OFFSETS = tuple(j + 2 if j < 128 else j - 254 for j in range(256))
 
 OFFSETS = tuple(d if d < 128 else d - 256 for d in range(256))
 
 R1 = tuple((r & 0x80) + ((r + 1) % 128) for r in range(256))
 
 R2 = tuple((r & 0x80) + ((r + 2) % 128) for r in range(256))
 
-INT_ACTIVE = (32, 36)
-
 CONFIG = {
     'fast_djnz': False,
     'fast_ldir': False,
-    'frame_duration': 69888,
+    'frame_duration': FRAME_DURATIONS[0],
     'int_active': INT_ACTIVE[0]
 }
 
-A = 0
-F = 1
-B = 2
-C = 3
-D = 4
-E = 5
-H = 6
-L = 7
-IXh = 8
-IXl = 9
-IYh = 10
-IYl = 11
-SP = 12
-SP2 = 13
-I = 14
-R = 15
-xA = 16
-xF = 17
-xB = 18
-xC = 19
-xD = 20
-xE = 21
-xH = 22
-xL = 23
-PC = 24
-T = 25
-
-REGISTERS = {
-    'A': A,
-    'F': F,
-    'B': B,
-    'C': C,
-    'D': D,
-    'E': E,
-    'H': H,
-    'L': L,
-    'IXh': IXh,
-    'IXl': IXl,
-    'IYh': IYh,
-    'IYl': IYl,
-    'SP': SP,
-    'I': I,
-    'R': R,
-    '^A': xA,
-    '^F': xF,
-    '^B': xB,
-    '^C': xC,
-    '^D': xD,
-    '^E': xE,
-    '^H': xH,
-    '^L': xL,
-    'PC': PC,
-    'T': T
-}
-
 class Simulator:
     def __init__(self, memory, registers=None, state=None, config=None):
         self.memory = memory
-        self.registers = [
-            0,     # A
-            0,     # F
-            0,     # B
-            0,     # C
-            0,     # D
-            0,     # E
-            0,     # H
-            0,     # L
-            0,     # IXh
-            0,     # IXl
-            92,    # IYh
-            58,    # IYl
-            23552, # SP
-            0,     # SP2 (must be 0)
-            63,    # I
-            0,     # R
-            0,     # xA
-            0,     # xF
-            0,     # xB
-            0,     # xC
-            0,     # xD
-            0,     # xE
-            0,     # xH
-            0,     # xL
-            0,     # PC
-            0      # T (T-states)
-        ]
-        if registers:
-            self.set_registers(registers)
-        if state is None:
-            state = {}
-        self.imode = state.get('im', 1)
-        self.iff = state.get('iff', 0)
-        self.halted = state.get('halted', False)
-        self.registers[25] = state.get('tstates', 0)
+        self.registers = simutils.get_registers(registers, state, False)
         cfg = CONFIG.copy()
         if config:
             cfg.update(config)
         self.create_opcodes()
         if cfg['fast_djnz']:
             self.opcodes[0x10] = partial(self.djnz_fast, self.registers, self.memory)
         if cfg['fast_ldir']:
             self.after_ED[0xB0] = partial(self.ldir_fast, self.registers, self.memory, 1)
             self.after_ED[0xB8] = partial(self.ldir_fast, self.registers, self.memory, -1)
         self.frame_duration = cfg['frame_duration']
         self.int_active = cfg['int_active']
         self.set_tracer(None)
 
     def set_tracer(self, tracer, in_r_c=True, ini=True):
+        self.tracer = tracer
         self.in_a_n_tracer = None
         self.in_r_c_tracer = None
         self.ini_tracer = None
         self.out_tracer = None
         if hasattr(tracer, 'read_port'):
             self.in_a_n_tracer = partial(tracer.read_port, self.registers)
             if in_r_c:
@@ -165,49 +78,32 @@
         if stop is None:
             opcodes[memory[pc]]()
         elif interrupts:
             frame_duration = self.frame_duration
             int_active = self.int_active
             while True:
                 opcodes[memory[pc]]()
-                if self.iff and registers[25] % frame_duration < int_active:
+                if registers[26] and registers[25] % frame_duration < int_active:
                     self.accept_interrupt(registers, memory, pc)
                 pc = registers[24]
                 if pc == stop:
                     break
         else:
             while True:
                 opcodes[memory[pc]]()
                 pc = registers[24]
                 if pc == stop:
                     break
 
-    def set_registers(self, registers):
-        for reg, value in registers.items():
-            if reg in REGISTERS:
-                self.registers[REGISTERS[reg]] = value
-            elif reg in ('IX', 'IY'):
-                rh = REGISTERS[reg + 'h']
-                self.registers[rh] = value // 256
-                self.registers[rh + 1] = value % 256
-            elif reg.startswith('^'):
-                rh = REGISTERS[reg[:2]]
-                self.registers[rh] = value // 256
-                self.registers[rh + 1] = value % 256
-            elif len(reg) == 2:
-                rh = REGISTERS[reg[0]]
-                self.registers[rh] = value // 256
-                self.registers[rh + 1] = value % 256
-
     def accept_interrupt(self, registers, memory, prev_pc):
         opcode = memory[prev_pc]
         pc = registers[24]
         if opcode == 0xFB or (opcode in (0xDD, 0xFD) and prev_pc == (pc - 1) % 65536):
             return False
-        if self.imode == 2:
+        if registers[27] == 2:
             vaddr = 255 + 256 * registers[14]
             iaddr = memory[vaddr] + 256 * memory[(vaddr + 1) % 65536]
             registers[25] += 19 # T-states
         else:
             iaddr = 56
             registers[25] += 13 # T-states
         sp = (registers[12] - 2) % 65536
@@ -215,16 +111,16 @@
         if sp > 0x3FFF:
             memory[sp] = pc % 256
         sp = (sp + 1) % 65536
         if sp > 0x3FFF:
             memory[sp] = pc // 256
         registers[15] = R1[registers[15]] # R
         registers[24] = iaddr # PC
-        self.iff = 0
-        self.halted = False
+        registers[26] = 0 # IFF
+        registers[28] = 0 # HALT state
         return True
 
     def prefix(self, opcodes, registers, memory):
         opcodes[memory[(registers[24] + 1) % 65536]]()
 
     def prefix2(self, opcodes, registers, memory):
         opcodes[memory[(registers[24] + 3) % 65536]]()
@@ -474,15 +370,15 @@
             registers[1] = f + (cp == 0) * 0x40 + (n & 0x02) * 16 + (n & 0x08) + (bc > 0) * 0x04 # .Z5.3P..
             registers[25] += 16 # T-states
             registers[24] = (registers[24] + 2) % 65536 # PC
         registers[15] = R2[registers[15]] # R
 
     def di_ei(self, registers, iff):
         # DI / EI
-        self.iff = iff
+        registers[26] = iff
         registers[15] = R1[registers[15]] # R
         registers[25] += 4 # T-states
         registers[24] = (registers[24] + 1) % 65536 # PC
 
     def djnz(self, registers, memory):
         # DJNZ nn
         b = (registers[2] - 1) % 256
@@ -493,15 +389,15 @@
             registers[24] = (pc + JR_OFFSETS[memory[(pc + 1) % 65536]]) % 65536 # PC
         else:
             registers[25] += 8 # T-states
             registers[24] = (registers[24] + 2) % 65536 # PC
         registers[15] = R1[registers[15]] # R
 
     def djnz_fast(self, registers, memory):
-        if memory[(registers[24] + 1) % 65536] == 0xFE:
+        if registers[26] == 0 and memory[(registers[24] + 1) % 65536] == 0xFE:
             b = (registers[2] - 1) % 256
             registers[2] = 0
             r = registers[15]
             registers[15] = (r & 0x80) + ((r + b + 1) % 128) # R
             registers[25] += b * 13 + 8 # T-states
             registers[24] = (registers[24] + 2) % 65536 # PC
         else:
@@ -545,24 +441,24 @@
         registers[15] = R1[registers[15]] # R
         registers[25] += 4 # T-states
         registers[24] = (registers[24] + 1) % 65536 # PC
 
     def halt(self, registers):
         # HALT
         registers[25] += 4 # T-states
-        if self.iff and registers[25] % self.frame_duration < self.int_active:
+        if registers[26] and registers[25] % self.frame_duration < self.int_active:
             registers[24] = (registers[24] + 1) % 65536 # PC
-            self.halted = False
+            registers[28] = 0 # HALT state
         else:
-            self.halted = True
+            registers[28] = 1 # HALT state
         registers[15] = R1[registers[15]] # R
 
     def im(self, registers, mode):
         # IM 0/1/2
-        self.imode = mode
+        registers[27] = mode
         registers[15] = R2[registers[15]] # R
         registers[25] += 8 # T-states
         registers[24] = (registers[24] + 2) % 65536 # PC
 
     def in_a(self, registers, memory):
         # IN A,(n)
         pcn = registers[24] + 1
@@ -667,18 +563,18 @@
 
     def ld_a_ir(self, registers, r):
         # LD A,I/R
         registers[15] = R2[registers[15]] # R
         a = registers[r]
         registers[0] = a
         registers[25] += 9 # T-states
-        if self.iff and registers[25] % self.frame_duration < self.int_active:
+        if registers[26] and registers[25] % self.frame_duration < self.int_active:
             registers[1] = (a & 0xA8) + (a == 0) * 0x40 + (registers[1] % 2)
         else:
-            registers[1] = (a & 0xA8) + (a == 0) * 0x40 + self.iff * 0x04 + (registers[1] % 2)
+            registers[1] = (a & 0xA8) + (a == 0) * 0x40 + registers[26] * 0x04 + (registers[1] % 2)
         registers[24] = (registers[24] + 2) % 65536 # PC
 
     def ld_hl_n(self, registers, memory):
         # LD (HL),n
         pcn = registers[24] + 1
         addr = registers[7] + 256 * registers[6]
         if addr > 0x3FFF:
@@ -837,40 +733,45 @@
             n = registers[0] + at_hl
             registers[1] = (registers[1] & 0xC1) + (n & 0x02) * 16 + (n & 0x08) + (bc > 0) * 0x04
             registers[25] += 16 # T-states
             registers[24] = (registers[24] + 2) % 65536 # PC
         registers[15] = R2[registers[15]] # R
 
     def ldir_fast(self, registers, memory, inc):
+        if registers[26]:
+            self.ldi(registers, memory, inc, 1)
+            return
+        pc = registers[24]
         de = registers[5] + 256 * registers[4]
         bc = registers[3] + 256 * registers[2]
         hl = registers[7] + 256 * registers[6]
         count = 0
         repeat = True
         while repeat:
             if de > 0x3FFF:
                 memory[de] = memory[hl]
             bc = (bc - 1) % 65536
-            if bc == 0 or registers[24] <= de <= registers[24] + 1:
+            if bc == 0 or pc <= de <= pc + 1:
                 repeat = False
             de = (de + inc) % 65536
             hl = (hl + inc) % 65536
             count += 1
         registers[3], registers[2] = bc % 256, bc // 256
         registers[5], registers[4] = de % 256, de // 256
         registers[7], registers[6] = hl % 256, hl // 256
         r = registers[15]
         registers[15] = (r & 0x80) + ((r + 2 * count) % 128) # R
         if bc:
-            registers[1] = (registers[1] & 0xC1) + ((registers[24] // 256) & 0x28) + 0x04
+            registers[1] = (registers[1] & 0xC1) + ((pc // 256) & 0x28) + 0x04
+            registers[25] += 21 * count # T-states
         else:
             n = registers[0] + memory[(hl - inc) % 65536]
             registers[1] = (registers[1] & 0xC1) + (n & 0x02) * 16 + (n & 0x08)
-            registers[24] = (registers[24] + 2) % 65536 # PC
-        registers[25] += 21 * count - 5 # T-states
+            registers[25] += 21 * count - 5 # T-states
+            registers[24] = (pc + 2) % 65536 # PC
 
     def ld_sp_rr(self, registers, r_inc, timing, size, rh, rl):
         # LD SP,HL/IX/IY
         registers[12] = registers[rl] + 256 * registers[rh]
         registers[15] = r_inc[registers[15]] # R
         registers[25] += timing # T-states
         registers[24] = (registers[24] + size) % 65536 # PC
```

### Comparing `skoolkit-9.1/skoolkit/skool2asm.py` & `skoolkit-9.2/skoolkit/skool2asm.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skool2bin.py` & `skoolkit-9.2/skoolkit/skool2bin.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skool2ctl.py` & `skoolkit-9.2/skoolkit/skool2ctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skool2html.py` & `skoolkit-9.2/skoolkit/skool2html.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skoolasm.py` & `skoolkit-9.2/skoolkit/skoolasm.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skoolctl.py` & `skoolkit-9.2/skoolkit/skoolctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skoolhtml.py` & `skoolkit-9.2/skoolkit/skoolhtml.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2008-2023 Richard Dymond (rjdymond@gmail.com)
+# Copyright 2008-2024 Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
 # version.
@@ -1054,15 +1054,15 @@
 
     def expand_copy(self, text, index, cwd):
         return skoolmacro.parse_copy(text, index, self.fields, self.frames)
 
     def expand_font(self, text, index, cwd):
         end, crop_rect, fname, frame, alt, params = skoolmacro.parse_font(text, index, self.fields)
         message, addr, chars, attr, scale, tindex, alpha = params
-        udgs = lambda: font_udgs(self.snapshot, addr, attr, unescape(message)[:chars])
+        udgs = font_udgs(self.snapshot, addr, attr, unescape(message)[:chars])
         frame = Frame(udgs, scale, 0, *crop_rect, name=frame, tindex=tindex, alpha=alpha)
         return end, self.handle_image(frame, fname, cwd, alt, 'FontImagePath')
 
     def expand_html(self, text, index, cwd):
         end, content = skoolmacro.parse_html(text, index)
         return end, unescape(content)
 
@@ -1131,27 +1131,27 @@
         asm_label = self.parser.get_asm_label(address)
         inst_addr_str = self.parser.get_instruction_addr_str(address, addr_str, code_id)
         return end, self.format_link(href, link_text or asm_label or self.asm_address(address, inst_addr_str))
 
     def expand_scr(self, text, index, cwd):
         end, crop_rect, fname, frame, alt, params = skoolmacro.parse_scr(text, index, self.fields)
         scale, x, y, w, h, df, af, tindex, alpha = params
-        udgs = lambda: self.screenshot(x, y, w, h, df, af)
+        udgs = self.screenshot(x, y, w, h, df, af)
         frame = Frame(udgs, scale, 0, *crop_rect, name=frame, tindex=tindex, alpha=alpha)
         return end, self.handle_image(frame, fname, cwd, alt, 'ScreenshotImagePath')
 
     def expand_table(self, text, index, cwd):
         # #TABLE[(class[,col1class[,col2class...]])]<rows>TABLE#
         end, table = self.table_parser.parse_text(self, text, index, cwd)
         return -end, self.build_table(table)
 
     def expand_udg(self, text, index, cwd):
         end, crop_rect, fname, frame, alt, params = skoolmacro.parse_udg(text, index, self.fields)
         addr, attr, scale, step, inc, flip, rotate, mask, tindex, alpha, mask_addr, mask_step = params
-        udgs = lambda: [[build_udg(self.snapshot, addr, attr, step, inc, flip, rotate, mask, mask_addr, mask_step)]]
+        udgs = [[build_udg(self.snapshot, addr, attr, step, inc, flip, rotate, mask, mask_addr, mask_step)]]
         if not fname and not frame:
             fname = format_template(self.udg_fname_template, 'UDGFilename', addr=addr, attr=attr, scale=scale)
             if frame == '':
                 frame = fname
         frame = Frame(udgs, scale, mask, *crop_rect, name=frame, tindex=tindex, alpha=alpha)
         return end, self.handle_image(frame, fname, cwd, alt, UDG_IMAGE_PATH)
```

### Comparing `skoolkit-9.1/skoolkit/skoolmacro.py` & `skoolkit-9.2/skoolkit/skoolmacro.py`

 * *Files 1% similar despite different names*

```diff
@@ -18,20 +18,22 @@
 from functools import partial
 import html
 import inspect
 import re
 from string import Template
 
 from skoolkit import (BASE_10, BASE_16, CASE_LOWER, CASE_UPPER, VERSION,
-                      SkoolKitError, SkoolParsingError, eval_variable, evaluate)
+                      SkoolKitError, SkoolParsingError, CSimulator,
+                      CCMIOSimulator, eval_variable, evaluate)
 from skoolkit.cmiosimulator import CMIOSimulator
 from skoolkit.graphics import Udg
-from skoolkit.simulator import (Simulator, A, F, B, C, D, E, H, L, IXh, IXl, IYh, IYl,
-                                SP, I, R, xA, xF, xB, xC, xD, xE, xH, xL, PC, T, INT_ACTIVE)
-from skoolkit.snapshot import FRAME_DURATIONS
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import (FRAME_DURATIONS, INT_ACTIVE, A, F, B, C, D, E,
+                               H, L, IXh, IXl, IYh, IYl, SP, I, R, xA, xF, xB,
+                               xC, xD, xE, xH, xL, PC, T, IFF, IM, HALT)
 
 _map_cache = {}
 
 _writer = None
 
 _cwd = ()
 
@@ -557,36 +559,34 @@
         text = text[:index] + rep + text[abs(end):]
         if end < 0:
             index += len(rep)
 
     return text
 
 def _read_sim_state(writer, execint, reg=None, clear=0):
-    registers = {'iff': 0, 'im': 1, 'halted': 0, 'tstates': 0, '7ffd': 0, 'fffd': 0, 'ay': [0] * 16}
+    registers = {'iff': 0, 'im': 1, 'halted': 0, 'tstates': 0, 'fffd': 0, 'ay': [0] * 16}
     if clear < 1:
         registers.update(writer.fields.get('sim', {}))
     if reg:
         for r, v in reg.items():
             if v >= 0:
                 registers[r] = v
-    state = {a: registers.pop(a) for a in ('iff', 'im', 'halted', 'tstates', '7ffd', 'fffd', 'ay')}
-    config = {'fast_djnz': execint < 1, 'fast_ldir': execint < 1}
+    state = {a: registers.pop(a) for a in ('iff', 'im', 'halted', 'tstates', 'fffd', 'ay')}
+    config = {'fast_djnz': True, 'fast_ldir': True}
     if len(writer.snapshot) == 0x20000:
         config['frame_duration'] = FRAME_DURATIONS[1]
         config['int_active'] = INT_ACTIVE[1]
     return registers, state, config
 
 def _write_sim_state(writer, simulator, tracer=None):
     registers = simulator.registers
     if isinstance(tracer, PagingTracer):
-        out7ffd = tracer.out7ffd
         outfffd = tracer.outfffd
         ay = tracer.ay
     else:
-        out7ffd = 0
         outfffd = 0
         ay = [0] * 16
     writer.fields['sim'] = {
         'A': registers[A],
         'F': registers[F],
         'BC': registers[C] + 256 * registers[B],
         'DE': registers[E] + 256 * registers[D],
@@ -599,18 +599,18 @@
         'IX': registers[IXl] + 256 * registers[IXh],
         'IY': registers[IYl] + 256 * registers[IYh],
         'I': registers[I],
         'R': registers[R],
         'SP': registers[SP],
         'PC': registers[PC],
         'tstates': registers[T],
-        'iff': simulator.iff,
-        'im': simulator.imode,
-        'halted': int(simulator.halted),
-        '7ffd': out7ffd,
+        'iff': registers[IFF],
+        'im': registers[IM],
+        'halted': registers[HALT],
+        '7ffd': writer.snapshot.o7ffd,
         'fffd': outfffd,
         'ay': ay
     }
 
 def _flatten(elements):
     f = []
     for e in elements:
@@ -642,28 +642,31 @@
         raise MacroParsingError('Missing filename: #AUDIO{}'.format(text[index:end]))
     delays, eval_delays = None, False
     if need_audio:
         fname, eval_delays = need_audio(fname)
     if flags & 4:
         end, start, stop, execint, cmio = parse_ints(text, end, 4, defaults=(0, 0), fields=writer.fields)
         if eval_delays:
+            if cmio:
+                simulator_cls = CCMIOSimulator or CMIOSimulator
+            else:
+                simulator_cls  = CSimulator or Simulator
             registers, state, config = _read_sim_state(writer, execint)
             if offset is not None:
                 state['tstates'] = offset
-            if cmio:
-                simulator_cls = CMIOSimulator
-            else:
-                simulator_cls = Simulator
             simulator = simulator_cls(writer.snapshot, registers, state, config)
-            if len(writer.snapshot) == 0x20000:
-                tracer = AudioTracer128(writer.snapshot, state['7ffd'], state['fffd'], state['ay'])
+            memory = writer.snapshot
+            if len(memory) == 0x20000:
+                tracer = AudioTracer128(memory, memory.o7ffd, state['fffd'], state['ay'])
             else:
                 tracer = AudioTracer()
             simulator.set_tracer(tracer)
             simulator.run(start, stop, execint)
+            if memory != simulator.memory: # pragma: no cover
+                memory[:] = simulator.memory[:]
             _write_sim_state(writer, simulator, tracer)
             delays = [t - tracer.out_times[i] for i, t in enumerate(tracer.out_times[1:])]
     else:
         if len(text) > end and text[end] == '(':
             end, spec = parse_brackets(text, end)
             if eval_delays:
                 expanded = writer.expand(spec)
@@ -1222,30 +1225,32 @@
              'tstates', 'iff', 'im', 'cmio')
     defaults = (-1,) * len(names)
     reg = {}
     (end, stop, start, clear, reg['A'], reg['F'], reg['BC'], reg['DE'], reg['HL'],
      reg['^A'], reg['^F'], reg['^BC'], reg['^DE'], reg['^HL'], reg['IX'], reg['IY'],
      reg['I'], reg['R'], reg['SP'], execint, reg['tstates'], reg['iff'],
      reg['im'], cmio) = parse_ints(text, index, len(names), defaults, names, writer.fields)
+    if cmio > 0:
+        simulator_cls = CCMIOSimulator or CMIOSimulator
+    else:
+        simulator_cls = CSimulator or Simulator
     registers, state, config = _read_sim_state(writer, execint, reg, clear)
     memory = writer.snapshot
     if len(memory) == 0x20000:
-        tracer = PagingTracer(memory, state['7ffd'], state['fffd'], state['ay'])
+        tracer = PagingTracer(memory, memory.o7ffd, state['fffd'], state['ay'])
     else:
         tracer = None
-    if cmio > 0:
-        simulator_cls = CMIOSimulator
-    else:
-        simulator_cls = Simulator
     simulator = simulator_cls(memory, registers, state, config)
     if stop >= 0:
         if start < 0:
             start = simulator.registers[PC]
         simulator.set_tracer(tracer)
         simulator.run(start, stop, execint > 0)
+        if memory != simulator.memory: # pragma: no cover
+            memory[:] = simulator.memory[:]
     _write_sim_state(writer, simulator, tracer)
     return end, ''
 
 def parse_space(writer, text, index, *cwd):
     # #SPACE[num] or #SPACE([num])
     end, num = parse_ints(text, index, 1, (1,), fields=writer.fields)
     return end, writer.space * num
@@ -1292,24 +1297,24 @@
     if flags & 2:
         end, msg = parse_strings(text, end, 1)
     else:
         msg = None
     if flags & 4:
         if stop < 0:
             raise MacroParsingError(f"Missing stop address: '{text[index:end]}'")
+        if cmio:
+            simulator_cls = CCMIOSimulator or CMIOSimulator
+        else:
+            simulator_cls = CSimulator or Simulator
         registers, state, config = _read_sim_state(writer, execint)
         memory = writer.snapshot.copy()
         if len(memory) == 0x20000:
-            tracer = PagingTracer(memory, state['7ffd'], state['fffd'], state['ay'])
+            tracer = PagingTracer(memory, memory.o7ffd, state['fffd'], state['ay'])
         else:
             tracer = None
-        if cmio:
-            simulator_cls = CMIOSimulator
-        else:
-            simulator_cls = Simulator
         simulator = simulator_cls(memory, registers, state, config)
         simulator.set_tracer(tracer)
         start_time = simulator.registers[T]
         simulator.run(start, stop, execint)
         if msg is None:
             return end, str(simulator.registers[T] - start_time)
         return end, Template(msg).safe_substitute(tstates=simulator.registers[T])
```

### Comparing `skoolkit-9.1/skoolkit/skoolparser.py` & `skoolkit-9.2/skoolkit/skoolparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/skoolutils.py` & `skoolkit-9.2/skoolkit/skoolutils.py`

 * *Files 2% similar despite different names*

```diff
@@ -30,28 +30,28 @@
 Z80_ASSEMBLER = z80.Assembler()
 
 INDEX_STOP = {None: 65536}
 
 Flags = namedtuple('Flags', 'prepend final overwrite append')
 
 class Memory:
-    def __init__(self, banks=None, bank=None, roms=None, rom=None, page=0):
+    def __init__(self, banks=None, bank=None, roms=None, rom=None, o7ffd=0):
         if banks is None:
             self.banks = [None] * 8
             self.banks[5] = [0] * 0x4000
             self.banks[2] = [0] * 0x4000
             self.banks[0] = [0] * 0x4000
         else:
             self.banks = banks
         if roms is None:
             self.roms = tuple(list(read_bin_file(r)) for r in ROM128)
         else:
             self.roms = roms
         self.memory = [rom or [0] * 0x4000, self.banks[5], self.banks[2], bank or self.banks[0]]
-        self.page = page
+        self.o7ffd = o7ffd
 
     def __getitem__(self, index):
         if isinstance(index, int):
             return self.memory[index // 0x4000][index % 0x4000]
         return [self.memory[a // 0x4000][a % 0x4000] for a in range(index.start or 0, INDEX_STOP.get(index.stop, index.stop), index.step or 1)]
 
     def __setitem__(self, index, value):
@@ -69,34 +69,43 @@
     def bank(self, page, data=None):
         if None in self.banks:
             for i in (1, 3, 4, 6, 7):
                 self.banks[i] = [0] * 0x4000
             self.memory[0] = self.roms[0]
         if data is None:
             self.memory[3] = self.banks[page]
-            self.page = page
+            self.o7ffd = (self.o7ffd & 0xF8) + page
         else:
             self.banks[page][:] = data
 
     def copy(self):
         banks = [bank[:] if bank else None for bank in self.banks]
         roms = (self.roms[0][:], self.roms[1][:])
         if all(banks):
             bank = banks[self.banks.index(self.memory[3])]
             rom = roms[self.roms.index(self.memory[0])]
         else:
             bank = banks[0]
             rom = self.memory[0][:]
-        return Memory(banks, bank, roms, rom, self.page)
+        return Memory(banks, bank, roms, rom, self.o7ffd)
 
     def out7ffd(self, value):
         if all(self.banks):
             self.memory[0] = self.roms[(value % 32) // 16]
             self.memory[3] = self.banks[value % 8]
-            self.page = value % 8
+            self.o7ffd = value
+
+    def convert(self): # pragma: no cover
+        # Prepare for use by a CSimulator
+        if all(self.banks):
+            rom_id = (self.o7ffd % 32) // 16
+            page = self.o7ffd % 8
+            self.roms = tuple(bytearray(rom) for rom in self.roms)
+            self.banks = [bytearray(bank) for bank in self.banks]
+            self.memory = [self.roms[rom_id], self.banks[5], self.banks[2], self.banks[page]]
 
 class Comment:
     def __init__(self, rowspan, text):
         self.rowspan = rowspan
         self.text = text
 
     def apply_replacements(self, repf):
```

### Comparing `skoolkit-9.1/skoolkit/sna2ctl.py` & `skoolkit-9.2/skoolkit/sna2ctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/sna2img.py` & `skoolkit-9.2/skoolkit/sna2img.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/sna2skool.py` & `skoolkit-9.2/skoolkit/sna2skool.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/snactl.py` & `skoolkit-9.2/skoolkit/snactl.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2009-2021 Richard Dymond (rjdymond@gmail.com)
+# Copyright 2009-2021, 2024 Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
 # version.
@@ -89,15 +89,18 @@
         if not line:
             break
         i += 1
         s_line = line.strip()
         if s_line:
             break
 
-    if s_line.startswith('0x'):
+    if s_line.startswith('$'):
+        # rzxplay.py map
+        address_f = lambda s_line: s_line[1:5]
+    elif s_line.startswith('0x'):
         # Fuse profile
         address_f = lambda s_line: s_line[2:6]
     elif s_line.startswith('PC = '):
         # Spud log
         address_f = lambda s_line: s_line[5:9]
     elif s_line.startswith('PC:'):
         # SpecEmu log
```

### Comparing `skoolkit-9.1/skoolkit/snapinfo.py` & `skoolkit-9.2/skoolkit/snapinfo.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2013-2017, 2019-2023 Richard Dymond (rjdymond@gmail.com)
+# Copyright 2013-2017, 2019-2024 Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
 # version.
@@ -12,50 +12,30 @@
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
 import argparse
 
-from skoolkit import SkoolKitError, get_dword, get_int_param, get_word, integer, read_bin_file, VERSION
+from skoolkit import SkoolKitError, get_dword, get_int_param, get_word, integer, VERSION
 from skoolkit.basic import BasicLister, VariableLister, get_char
 from skoolkit.config import get_config, show_config, update_options
 from skoolkit.opcodes import END, decode
-from skoolkit.snapshot import FRAME_DURATIONS, make_snapshot
+from skoolkit.snapshot import Snapshot, make_snapshot
 from skoolkit.sna2skool import get_ctl_parser
 from skoolkit.snaskool import Disassembly
 
 class Registers:
-    def __init__(self, a=0, f=0, bc=0, de=0, hl=0, a2=0, f2=0, bc2=0, de2=0, hl2=0,
-                 ix=0, iy=0, sp=0, i=0, r=0, pc=0, border=0, iff2=0, im=0,
-                 tstates=0, out7ffd=0, outfffd=0, ay=(0,) * 16, outfe=0):
-        self.a = a
-        self.f = f
-        self.bc = bc
-        self.de = de
-        self.hl = hl
-        self.a2 = a2
-        self.f2 = f2
-        self.bc2 = bc2
-        self.de2 = de2
-        self.hl2 = hl2
-        self.ix = ix
-        self.iy = iy
-        self.sp = sp
-        self.i = i
-        self.r = r
-        self.pc = pc
-        self.border = border
-        self.iff2 = iff2
-        self.im = im
-        self.tstates = tstates
-        self.out7ffd = out7ffd
-        self.outfffd = outfffd
-        self.ay = ay
-        self.outfe = outfe
+    def __init__(self, snapshot):
+        for r in (
+                'a', 'f', 'bc', 'de', 'hl', 'a2', 'f2', 'bc2', 'de2', 'hl2',
+                'ix', 'iy', 'sp', 'i', 'r', 'pc', 'border', 'iff1', 'iff2',
+                'im', 'tstates', 'out7ffd', 'outfffd', 'ay', 'outfe'
+        ):
+            setattr(self, r, getattr(snapshot, r))
         self.reg_map = {
             'b': 'bc', 'c': 'bc', 'b2': 'bc2', 'c2': 'bc2',
             'd': 'de', 'e': 'de', 'd2': 'de2', 'e2': 'de2',
             'h': 'hl', 'l': 'hl', 'h2': 'hl2', 'l2': 'hl2'
         }
 
     def get_lines(self):
@@ -88,24 +68,14 @@
         except AttributeError:
             reg_pair = self.reg_map[register]
             word = getattr(self, reg_pair)
             if register[0] == reg_pair[0]:
                 return word // 256
             return word % 256
 
-def parse_snapshot(infile):
-    snapshot_type = infile[-4:].lower()
-    if snapshot_type == '.sna':
-        return _parse_sna(infile)
-    if snapshot_type == '.z80':
-        return _parse_z80(infile)
-    if snapshot_type == '.szx':
-        return _parse_szx(infile)
-    return None, None, None
-
 ###############################################################################
 
 # https://worldofspectrum.net/features/faq/reference/z80format.htm
 # https://worldofspectrum.net/features/faq/reference/128kreference.htm
 
 BLOCK_ADDRESSES_48K = {
     4: '32768-49151 8000-BFFF',
@@ -115,130 +85,83 @@
 
 BLOCK_ADDRESSES_128K = {
     5: '32768-49151 8000-BFFF',
     8: '16384-32767 4000-7FFF'
 }
 
 V2_MACHINES = {
-    0: ('48K Spectrum', '16K Spectrum', True),
-    1: ('48K Spectrum + IF1', '16K Spectrum + IF1', True),
-    2: ('SamRam', 'SamRam', False),
-    3: ('128K Spectrum', 'Spectrum +2', False),
-    4: ('128K Spectrum + IF1', 'Spectrum +2 + IF1', False)
+    0: ('48K Spectrum', '16K Spectrum'),
+    1: ('48K Spectrum + IF1', '16K Spectrum + IF1'),
+    2: ('SamRam', 'SamRam'),
+    3: ('128K Spectrum', 'Spectrum +2'),
+    4: ('128K Spectrum + IF1', 'Spectrum +2 + IF1')
 }
 
 V3_MACHINES = {
-    0: ('48K Spectrum', '16K Spectrum', True),
-    1: ('48K Spectrum + IF1', '16K Spectrum + IF1', True),
-    2: ('SamRam', 'SamRam', False),
-    3: ('48K Spectrum + MGT', '16K Spectrum + MGT', True),
-    4: ('128K Spectrum', 'Spectrum +2', False),
-    5: ('128K Spectrum + IF1', 'Spectrum +2 + IF1', False),
-    6: ('128K Spectrum + MGT', 'Spectrum +2 + MGT', False),
+    0: ('48K Spectrum', '16K Spectrum'),
+    1: ('48K Spectrum + IF1', '16K Spectrum + IF1'),
+    2: ('SamRam', 'SamRam'),
+    3: ('48K Spectrum + MGT', '16K Spectrum + MGT'),
+    4: ('128K Spectrum', 'Spectrum +2'),
+    5: ('128K Spectrum + IF1', 'Spectrum +2 + IF1'),
+    6: ('128K Spectrum + MGT', 'Spectrum +2 + MGT'),
 }
 
 MACHINES = {
-    7: ('Spectrum +3', 'Spectrum +2A', False),
-    8: ('Spectrum +3', 'Spectrum +2A', False),
-    9: ('Pentagon (128K)', 'Pentagon (128K)', False),
-    10: ('Scorpion (256K)', 'Scorpion (256K)', False),
-    11: ('Didaktik+Kompakt', 'Didaktik+Kompakt', False),
-    12: ('Spectrum +2', 'Spectrum +2', False),
-    13: ('Spectrum +2A', 'Spectrum +2A', False),
-    14: ('TC2048', 'TC2048', False),
-    15: ('TC2068', 'TC2068', False),
-    128: ('TS2068', 'TS2068', False),
+    7: ('Spectrum +3', 'Spectrum +2A'),
+    8: ('Spectrum +3', 'Spectrum +2A'),
+    9: ('Pentagon (128K)', 'Pentagon (128K)'),
+    10: ('Scorpion (256K)', 'Scorpion (256K)'),
+    11: ('Didaktik+Kompakt', 'Didaktik+Kompakt'),
+    12: ('Spectrum +2', 'Spectrum +2'),
+    13: ('Spectrum +2A', 'Spectrum +2A'),
+    14: ('TC2048', 'TC2048'),
+    15: ('TC2068', 'TC2068'),
+    128: ('TS2068', 'TS2068'),
 }
 
-def _parse_z80(z80file):
-    data = read_bin_file(z80file)
-
-    # Extract header and RAM block(s)
-    if get_word(data, 6) > 0:
-        version = 1
-        header = data[:30]
-        ram_blocks = data[30:]
-    else:
-        header_len = 32 + get_word(data, 30)
-        header = data[:header_len]
-        ram_blocks = data[header_len:]
-        version = 2 if header_len == 55 else 3
-
-    reg = Registers(
-        a=header[0],
-        f=header[1],
-        bc=get_word(header, 2),
-        hl=get_word(header, 4),
-        sp=get_word(header, 8),
-        i=header[10],
-        r=128 * (header[12] & 1) + (header[11] & 127),
-        de=get_word(header, 13),
-        bc2=get_word(header, 15),
-        de2=get_word(header, 17),
-        hl2=get_word(header, 19),
-        a2=header[21],
-        f2=header[22],
-        iy=get_word(header, 23),
-        ix=get_word(header, 25),
-        border=(header[12] // 2) % 8,
-        iff2=header[28],
-        im=header[29] & 3
-    )
-
+def get_z80_machine_type(header):
+    version = _get_z80_version(header)
     if version == 1:
-        reg.pc = get_word(header, 6)
+        return '48K Spectrum'
+    if version == 2:
+        machine_dict = V2_MACHINES
     else:
-        reg.pc = get_word(header, 32)
-        reg.out7ffd = header[35]
-        reg.outfffd = header[38]
-        reg.ay = tuple(header[39:55])
-
-    if version == 3:
-        frame_duration = FRAME_DURATIONS[header[34] > 3]
-        qframe_duration = frame_duration // 4
-        t1 = (header[55] + 256 * header[56]) % qframe_duration
-        t2 = (2 - header[57]) % 4
-        reg.tstates = frame_duration - 1 - t2 * qframe_duration - t1
-
-    return header, reg, ram_blocks
-
-def _analyse_z80(z80file, header, reg, ram_blocks):
-    if get_word(header, 6) > 0:
-        version = 1
-    else:
-        version = 2 if len(header) == 55 else 3
-
-    # Print file name, version, machine, interrupt status, border, port $7FFD
-    print('Z80 file: {}'.format(z80file))
+        machine_dict = V3_MACHINES
+    machine_id = header[34]
+    index = header[37] // 128
+    machine_spec = machine_dict.get(machine_id, MACHINES.get(machine_id, ('Unknown', 'Unknown')))
+    return machine_spec[index]
+
+def _get_z80_version(header):
+    if len(header) == 30:
+        return 1
+    if len(header) == 55:
+        return 2
+    return 3
+
+def _analyse_z80(header, reg, ram_blocks):
+    # Print version, machine, interrupt status, border, port $7FFD
+    version = _get_z80_version(header)
     print('Version: {}'.format(version))
-    is128 = False
-    if version == 1:
-        machine = '48K Spectrum'
-        block_dict = BLOCK_ADDRESSES_48K
+    is128 = (version == 2 and header[34] > 1) or (version == 3 and header[34] not in (0, 1, 3))
+    if is128:
+        block_dict = BLOCK_ADDRESSES_128K
     else:
-        machine_dict = V2_MACHINES if version == 2 else V3_MACHINES
-        machine_id = header[34]
-        index = header[37] // 128
-        machine_spec = machine_dict.get(machine_id, MACHINES.get(machine_id, ('Unknown', 'Unknown', True)))
-        machine = machine_spec[index]
-        if machine_spec[2]:
-            block_dict = BLOCK_ADDRESSES_48K
-        else:
-            is128 = True
-            block_dict = BLOCK_ADDRESSES_128K
-    print('Machine: {}'.format(machine))
-    print('Interrupts: {}abled'.format('en' if reg.iff2 else 'dis'))
+        block_dict = BLOCK_ADDRESSES_48K
+    print('Machine: {}'.format(get_z80_machine_type(header)))
+    print('Interrupts: {}abled'.format('en' if reg.iff1 else 'dis'))
     print('Interrupt mode: {}'.format(reg.im))
     print('Issue 2 emulation: {}abled'.format('en' if header[29] & 4 else 'dis'))
     if version == 3:
         print(f'T-states: {reg.tstates}')
-    print('Border: {}'.format((header[12] // 2) & 7))
+    print(f'Border: {reg.border}')
     if is128:
         print(f'Port $FFFD: {reg.outfffd}')
-        bank = header[35] & 7
+        bank = reg.out7ffd % 8
         print('Port $7FFD: {} - bank {} (block {}) paged into 49152-65535 C000-FFFF'.format(reg.out7ffd, bank, bank + 3))
 
     # Print register contents
     print('Registers:')
     for line in reg.get_lines():
         print('  ' + line)
 
@@ -275,66 +198,29 @@
 SZX_MACHINES = {
     0: '16K ZX Spectrum',
     1: '48K ZX Spectrum',
     2: 'ZX Spectrum 128',
     3: 'ZX Spectrum +2',
     4: 'ZX Spectrum +2A/+2B',
     5: 'ZX Spectrum +3',
-    6: 'ZX Spectrum +3e'
+    6: 'ZX Spectrum +3e',
+    7: 'Pentagon 128',
+    8: 'Timex Sinclair TC2048',
+    9: 'Timex Sinclair TC2068',
+    10: 'Scorpion ZS-256',
+    11: 'ZX Spectrum SE',
+    12: 'Timex Sinclair TS2068',
+    13: 'Pentagon 512',
+    14: 'Pentagon 1024',
+    15: '48K ZX Spectrum (NTSC)',
+    16: 'ZX Spectrum 128Ke'
 }
 
-def _parse_szx(szxfile):
-    szx = read_bin_file(szxfile)
-    magic = _get_block_id(szx, 0)
-    if magic != 'ZXST':
-        raise SkoolKitError("{} is not an SZX file".format(szxfile))
-
-    header = szx[:8]
-
-    reg = Registers()
-    blocks = []
-    i = 8
-    while i < len(szx):
-        block_id = _get_block_id(szx, i)
-        block_size = get_dword(szx, i + 4)
-        i += 8 + block_size
-        block = szx[i - block_size:i]
-        blocks.append((block_id, block))
-        if block_id == 'Z80R':
-            reg.f = block[0]
-            reg.a = block[1]
-            reg.bc = get_word(block, 2)
-            reg.de = get_word(block, 4)
-            reg.hl = get_word(block, 6)
-            reg.f2 = block[8]
-            reg.a2 = block[9]
-            reg.bc2 = get_word(block, 10)
-            reg.de2 = get_word(block, 12)
-            reg.hl2 = get_word(block, 14)
-            reg.ix = get_word(block, 16)
-            reg.iy = get_word(block, 18)
-            reg.sp = get_word(block, 20)
-            reg.pc = get_word(block, 22)
-            reg.i = block[24]
-            reg.r = block[25]
-            reg.iff2 = block[27]
-            reg.im = block[28]
-            reg.tstates = get_dword(block, 29)
-        elif block_id == 'SPCR':
-            reg.border = block[0]
-            reg.out7ffd = block[1]
-            reg.outfe = block[3]
-        elif block_id == 'AY':
-            reg.outfffd = block[1]
-            reg.ay = tuple(block[2:18])
-
-    return header, reg, blocks
-
-def _get_block_id(data, index):
-    return ''.join(chr(b) for b in data[index:index+ 4] if b)
+def get_szx_machine_type(header):
+    return SZX_MACHINES.get(header[6], 'Unknown')
 
 def _print_ay(block, reg):
     return [f'Current AY register: {reg.outfffd}']
 
 def _print_keyb(block, reg):
     issue2 = get_dword(block, 0) & 1
     return ['Issue 2 emulation: {}abled'.format('en' if issue2 else 'dis')]
@@ -362,15 +248,15 @@
     lines = [f'Border: {reg.border}']
     if reg.machine_id > 1:
         lines.append(f'Port $7FFD: {reg.out7ffd} (bank {reg.out7ffd % 8} paged into 49152-65535 C000-FFFF)')
     return lines
 
 def _print_z80r(block, reg):
     lines = [
-        'Interrupts: {}abled'.format('en' if reg.iff2 else 'dis'),
+        'Interrupts: {}abled'.format('en' if reg.iff1 else 'dis'),
         f'Interrupt mode: {reg.im}',
         f'T-states: {reg.tstates}'
     ]
     return lines + reg.get_lines()
 
 SZX_BLOCK_PRINTERS = {
     'AY': _print_ay,
@@ -378,76 +264,42 @@
     'RAMP': _print_ramp,
     'SPCR': _print_spcr,
     'Z80R': _print_z80r
 }
 
 def _analyse_szx(header, reg, blocks):
     print('Version: {}.{}'.format(header[4], header[5]))
+    print('Machine: {}'.format(get_szx_machine_type(header)))
     reg.machine_id = header[6]
-    print('Machine: {}'.format(SZX_MACHINES.get(reg.machine_id, 'Unknown')))
 
     for block_id, block in blocks:
         print('{}: {} bytes'.format(block_id, len(block)))
         printer = SZX_BLOCK_PRINTERS.get(block_id)
         if printer:
             for line in printer(block, reg):
                 print("  " + line)
 
 ###############################################################################
 
 # https://worldofspectrum.net/features/faq/reference/formats.htm#SNA
 
-def _parse_sna(snafile):
-    sna = read_bin_file(snafile, 147488)
-    if len(sna) not in (49179, 131103, 147487):
-        raise SkoolKitError('{}: not a SNA file'.format(snafile))
-
-    reg = Registers(
-        i=sna[0],
-        hl2=get_word(sna, 1),
-        de2=get_word(sna, 3),
-        bc2=get_word(sna, 5),
-        f2=sna[7],
-        a2=sna[8],
-        hl=get_word(sna, 9),
-        de=get_word(sna, 11),
-        bc=get_word(sna, 13),
-        iy=get_word(sna, 15),
-        ix=get_word(sna, 17),
-        r=sna[20],
-        f=sna[21],
-        a=sna[22],
-        sp=get_word(sna, 23),
-        border=sna[26],
-        iff2=(sna[19] & 4) // 4,
-        im=sna[25]
-    )
-
-    if len(sna) > 49179:
-        reg.pc = get_word(sna, 49179)
-        reg.out7ffd = sna[49181]
-    else:
-        reg.pc = get_word(sna, reg.sp - 16357)
-
-    return sna[:27], reg, sna[27:]
-
 def _print_ram_banks(sna):
     bank = sna[49154] & 7
     print('RAM bank 5 (16384 bytes: 16384-32767 4000-7FFF)')
     print('RAM bank 2 (16384 bytes: 32768-49151 8000-BFFF)')
     print('RAM bank {} (16384 bytes: 49152-65535 C000-FFFF)'.format(bank))
     for b in sorted({0, 1, 3, 4, 6, 7} - {bank}):
         print('RAM bank {} (16384 bytes)'.format(b))
 
-def _analyse_sna(header, reg, ram):
+def _analyse_sna(reg, ram):
     is128 = len(ram) > 49152
     print('RAM: {}K'.format(128 if is128 else 48))
-    print('Interrupts: {}abled'.format('en' if reg.iff2 else 'dis'))
+    print('Interrupts: {}abled'.format('en' if reg.iff1 else 'dis'))
     print('Interrupt mode: {}'.format(reg.im))
-    print('Border: {}'.format(header[26] & 7))
+    print('Border: {}'.format(reg.border))
 
     print('Registers:')
     for line in reg.get_lines():
         print('  ' + line)
 
     if is128:
         _print_ram_banks(ram)
@@ -585,21 +437,23 @@
             _word(snapshot, options.word, config['Word'])
         else:
             if options.basic:
                 print(BasicLister().list_basic(snapshot))
             if options.variables:
                 print(VariableLister().list_variables(snapshot))
     else:
-        snapshot_type = infile[-4:].lower()
-        if snapshot_type == '.sna':
-            _analyse_sna(*_parse_sna(infile))
-        elif snapshot_type == '.z80':
-            _analyse_z80(infile, *_parse_z80(infile))
-        elif snapshot_type == '.szx':
-            _analyse_szx(*_parse_szx(infile))
+        snapshot = Snapshot.get(infile)
+        if snapshot:
+            registers = Registers(snapshot)
+            if snapshot.type == 'SNA':
+                _analyse_sna(registers, snapshot.tail)
+            elif snapshot.type == 'Z80':
+                _analyse_z80(snapshot.header, registers, snapshot.tail)
+            elif snapshot.type == 'SZX':
+                _analyse_szx(snapshot.header, registers, snapshot.tail)
 
 def main(args):
     config = get_config('snapinfo')
     parser = argparse.ArgumentParser(
         usage='snapinfo.py [options] file',
         description="Analyse a binary (raw memory) file or a SNA, SZX or Z80 snapshot.",
         add_help=False
```

### Comparing `skoolkit-9.1/skoolkit/snapmod.py` & `skoolkit-9.2/skoolkit/snapmod.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/snapshot.py` & `skoolkit-9.2/skoolkit/rzxplay.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2009-2013, 2015-2023 Richard Dymond (rjdymond@gmail.com)
+# Copyright 2024 Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
 # version.
@@ -10,663 +10,518 @@
 # SkoolKit is distributed in the hope that it will be useful, but WITHOUT ANY
 # WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
-import textwrap
+import argparse
+import contextlib
+from functools import partial
+import io
+import os
+import re
 import zlib
 
-from skoolkit import SkoolKitError, get_dword, get_int_param, parse_int, read_bin_file
-from skoolkit.components import get_snapshot_reader, get_value
-
-FRAME_DURATIONS = (69888, 70908)
-
-# https://worldofspectrum.net/faq/reference/z80format.htm
-Z80_REGISTERS = {
-    'a': 0,
-    'f': 1,
-    'bc': 2,
-    'c': 2,
-    'b': 3,
-    'hl': 4,
-    'l': 4,
-    'h': 5,
-    'sp': 8,
-    'i': 10,
-    'r': 11,
-    'de': 13,
-    'e': 13,
-    'd': 14,
-    '^bc': 15,
-    '^c': 15,
-    '^b': 16,
-    '^de': 17,
-    '^e': 17,
-    '^d': 18,
-    '^hl': 19,
-    '^l': 19,
-    '^h': 20,
-    '^a': 21,
-    '^f': 22,
-    'iy': 23,
-    'ix': 25,
-    'pc': 32
-}
-
-# https://spectaculator.com/docs/zx-state/z80regs.shtml
-SZX_REGISTERS = {
-    'a': 1,
-    'f': 0,
-    'bc': 2,
-    'c': 2,
-    'b': 3,
-    'de': 4,
-    'e': 4,
-    'd': 5,
-    'hl': 6,
-    'l': 6,
-    'h': 7,
-    '^a': 9,
-    '^f': 8,
-    '^bc': 10,
-    '^c': 10,
-    '^b': 11,
-    '^de': 12,
-    '^e': 12,
-    '^d': 13,
-    '^hl': 14,
-    '^l': 14,
-    '^h': 15,
-    'ix': 16,
-    'iy': 18,
-    'sp': 20,
-    'pc': 22,
-    'i': 24,
-    'r': 25
-}
-
-class Memory:
-    def __init__(self, snapshot=None, banks=None, page=None):
-        if banks:
-            self.banks = banks
-            if page is None:
-                # Z80 48K
-                self.memory = [[0] * 0x4000, self.banks[5], self.banks[1], self.banks[2]]
-            else:
-                self.memory = [[0] * 0x4000, self.banks[5], self.banks[2], self.banks[page]]
-        elif len(snapshot) == 0x20000:
-            self.banks = [snapshot[a:a + 0x4000] for a in range(0, 0x20000, 0x4000)]
-            self.memory = [[0] * 0x4000, self.banks[5], self.banks[2], self.banks[page]]
-        else:
-            self.banks = [None] * 8
-            self.memory = [[0] * 0x4000, snapshot[0x4000:0x8000], snapshot[0x8000:0xC000], snapshot[0xC000:]]
-
-    def __getitem__(self, index):
-        if isinstance(index, int):
-            return self.memory[index // 0x4000][index % 0x4000]
-        return [self.memory[a // 0x4000][a % 0x4000] for a in range(index.start, min(index.stop, 0x10000))]
-
-    def __setitem__(self, index, value):
-        if isinstance(index, int):
-            self.memory[index // 0x4000][index % 0x4000] = value
+with contextlib.redirect_stdout(io.StringIO()) as pygame_io:
+    try:
+        import pygame
+    except ImportError: # pragma: no cover
+        pygame = None
+
+from skoolkit import (VERSION, SkoolKitError, CSimulator, get_dword, get_word,
+                      parse_int, read_bin_file, warn, write)
+from skoolkit.pagingtracer import PagingTracer
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import from_snapshot, get_state
+from skoolkit.snapshot import Snapshot, write_snapshot
+from skoolkit.traceutils import disassemble
+
+if pygame: # pragma: no cover
+    COLOURS = (
+        pygame.Color(0x00, 0x00, 0x00), # Black
+        pygame.Color(0x00, 0x00, 0xc5), # Blue
+        pygame.Color(0xc5, 0x00, 0x00), # Red
+        pygame.Color(0xc5, 0x00, 0xc5), # Magenta
+        pygame.Color(0x00, 0xc6, 0x00), # Green
+        pygame.Color(0x00, 0xc6, 0xc5), # Cyan
+        pygame.Color(0xc5, 0xc6, 0x00), # Yellow
+        pygame.Color(0xcd, 0xc6, 0xcd), # White
+        pygame.Color(0x00, 0x00, 0x00), # Bright black
+        pygame.Color(0x00, 0x00, 0xff), # Bright blue
+        pygame.Color(0xff, 0x00, 0x00), # Bright red
+        pygame.Color(0xff, 0x00, 0xff), # Bright magenta
+        pygame.Color(0x00, 0xff, 0x00), # Bright green
+        pygame.Color(0x00, 0xff, 0xff), # Bright cyan
+        pygame.Color(0xff, 0xff, 0x00), # Bright yellow
+        pygame.Color(0xff, 0xff, 0xff), # Bright white
+    )
+
+CELLS = tuple((x, y, 2048 * (y // 8) + 32 * (y % 8) + x, 6144 + 32 * y + x) for x in range(32) for y in range(24))
+
+class RZXBlock:
+    def __init__(self, data, obj):
+        self.data = data
+        self.obj = obj
+
+class InputRecording:
+    def __init__(self, tstates, frames, data):
+        self.tstates = tstates
+        self.frames = frames
+        self.data = data
+
+class Frame:
+    def __init__(self, fetch_counter, start, end):
+        self.fetch_counter = fetch_counter
+        self.start = start
+        self.end = end
+
+class RZXTracer(PagingTracer):
+    def __init__(self, context, input_rec):
+        self.context = context
+        self.set_input_rec(input_rec)
+        self.simulator = context.simulator
+        self.simulator.registers[25] = input_rec.tstates
+        self.border = context.snapshot.border
+        self.out7ffd = context.snapshot.out7ffd
+        self.outfffd = context.snapshot.outfffd
+        self.ay = list(context.snapshot.ay)
+        self.outfe = context.snapshot.outfe
+
+    def set_input_rec(self, input_rec):
+        self.frames = input_rec.frames
+        self.data = input_rec.data
+        self.frame_index = -1
+        self.index = 0
+        self.end = 0
+
+    def next_frame(self):
+        if self.end > self.index:
+            raise SkoolKitError(f'{self.end - self.index} port reading(s) left for frame {self.context.frame_count}')
+        self.frame_index += 1
+        if self.frame_index > 0:
+            self.context.frame_count += 1
+        while self.frame_index < len(self.frames):
+            frame = self.frames[self.frame_index]
+            if frame.fetch_counter > 0:
+                self.index = frame.start
+                self.end = frame.end
+                return frame.fetch_counter
+            self.frame_index += 1
+            self.context.frame_count += 1
+        return -1
+
+    def read_port(self, registers, port):
+        if self.index < self.end:
+            self.index += 1
+            return self.data[self.index - 1]
+        raise SkoolKitError(f'Port readings exhausted for frame {self.context.frame_count}')
+
+class RZXContext:
+    def __init__(self, screen=None, p_rectangles=None, c_rectangles=None, clock=None):
+        self.screen = screen
+        self.p_rectangles = p_rectangles
+        self.c_rectangles = c_rectangles
+        self.clock = clock
+        self.exec_map = None
+        self.tracefile = None
+        self.snapshot = None
+        self.simulator = None
+        self.total_frames = 0
+        self.frame_count = 0
+        self.stop = False
+
+def as_dword(num):
+    return (num % 256, (num >> 8) % 256, (num >> 16) % 256, (num >> 24) % 256)
+
+def write_rzx(fname, context, rzx_blocks):
+    creator_b = (83, 107, 111, 111, 108, 75, 105, 116, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
+    major, minor = re.match('([0-9]+).([0-9]+)', VERSION).groups()
+    rzx_data = bytearray((
+        82, 90, 88, 33,   # RZX!
+        0, 13,            # Version 0.13
+        0, 0, 0, 0,       # Flags
+        0x10,             # Block ID (Creator)
+        29, 0, 0, 0,      # Block length
+        *creator_b,       # Creator ID (SkoolKit)
+        int(major), 0,
+        int(minor), 0
+    ))
+
+    ram, registers, state = get_state(context.simulator)[:3]
+    snapshot = context.snapshot
+    snapshot.set_ram(ram)
+    snapshot.set_registers_and_state(registers, state)
+    snapshot_data = snapshot.data()
+    snapshot_data_z = zlib.compress(snapshot_data, 9)
+    snapshot_ext = [ord(c) for c in snapshot.type.lower()] + [0]
+    s_len = len(snapshot_data)
+    b_len = 17 + len(snapshot_data_z)
+    rzx_data.extend((
+        0x30,             # Block ID (Snapshot)
+        *as_dword(b_len), # Block length
+        2, 0, 0, 0,       # Flags
+        *snapshot_ext,    # z80/szx
+        *as_dword(s_len)  # Uncompressed snapshot length
+    ))
+    rzx_data.extend(snapshot_data_z)
+
+    tracer = context.simulator.tracer
+    frames = tracer.frames[tracer.frame_index:]
+    nf = len(frames)
+    io_frames = bytearray()
+    for frame in frames:
+        fc = frame.fetch_counter
+        port_readings = tracer.data[frame.start:frame.end]
+        ic = len(port_readings)
+        io_frames.extend((fc % 256, fc // 256, ic % 256, ic // 256))
+        io_frames.extend(port_readings)
+    io_frames = zlib.compress(io_frames, 9)
+    b_len = 18 + len(io_frames)
+    rzx_data.extend((
+        0x80,             # Block ID (Input recording)
+        *as_dword(b_len), # Block length
+        *as_dword(nf),    # Number of frames
+        0,                # Reserved
+        0, 0, 0, 0,       # Initial T-states
+        2, 0, 0, 0        # Flags
+    ))
+    rzx_data.extend(io_frames)
+
+    for rzx_block in rzx_blocks:
+        rzx_data.extend(rzx_block.data)
+
+    with open(fname, 'wb') as f:
+        f.write(rzx_data)
+
+def parse_rzx(rzxfile):
+    data = read_bin_file(rzxfile)
+    if data[:4] != b'RZX!' or len(data) < 10:
+        raise SkoolKitError('Not an RZX file')
+    i = 10
+    contents = []
+    while i < len(data):
+        block_id = data[i]
+        block_len = get_dword(data, i + 1)
+        if block_id == 0x30:
+            # Snapshot
+            flags = data[i + 5]
+            if flags & 1 == 0:
+                ext = ''.join(chr(b) for b in data[i + 9:i + 13] if b)
+                sdata = data[i + 17:i + block_len]
+                if flags & 2:
+                    try:
+                        sdata = zlib.decompress(sdata)
+                    except zlib.error as e:
+                        raise SkoolKitError(f'Failed to decompress snapshot: {e.args[0]}')
+                contents.append(RZXBlock(data[i:i + block_len], Snapshot.get(sdata, ext)))
+        elif block_id == 0x80:
+            # Input recording
+            num_frames = get_dword(data, i + 5)
+            tstates = get_dword(data, i + 10)
+            flags = get_dword(data, i + 14)
+            frames = []
+            frames_data = data[i + 18:i + block_len]
+            if flags & 2:
+                try:
+                    frames_data = zlib.decompress(frames_data)
+                except zlib.error as e:
+                    raise SkoolKitError(f'Failed to decompress input recording block: {e.args[0]}')
+            contents.append(RZXBlock(data[i:i + block_len], InputRecording(tstates, frames, frames_data)))
+            j = 0
+            start = end = 0
+            for k in range(num_frames):
+                fetch_counter = get_word(frames_data, j)
+                in_counter = get_word(frames_data, j + 2)
+                if in_counter == 65535:
+                    j += 4
+                else:
+                    start = j + 4
+                    end = j = start + in_counter
+                frames.append(Frame(fetch_counter, start, end))
+        i += block_len
+    return contents
+
+def draw(screen, memory, frame, pixel_rects, cell_rects, prev_scr): # pragma: no cover
+    current_scr = memory[16384:23296]
+    flash_change = (frame % 16) == 0
+    flash_switch = (frame // 16) % 2
+
+    for (x, y, df_addr, af_addr) in CELLS:
+        update = False
+        attr = current_scr[af_addr]
+        for a in range(df_addr, df_addr + 2048, 256):
+            if current_scr[a] != prev_scr[a]:
+                update = True
+                break
         else:
-            for a, b in zip(range(index.start, index.stop), value):
-                self.memory[a // 0x4000][a % 0x4000] = b
-
-    def contents(self):
-        if all(self.banks):
-            return self.banks
-        return self.memory[1] + self.memory[2] + self.memory[3]
-
-    def ram(self, page):
-        if not all(self.banks) or page is None:
-            if self.memory[2]:
-                return self.memory[1] + self.memory[2] + self.memory[3]
-            return self.memory[1] + [0] * 32768
-        if page >= 0:
-            return self.banks[5] + self.banks[2] + self.banks[page]
-        return self.banks[0] + self.banks[1] + self.banks[2] + self.banks[3] + self.banks[4] + self.banks[5] + self.banks[6] + self.banks[7]
-
-class Snapshot:
-    @classmethod
-    def get(cls, sfile):
-        ext = sfile[-4:].lower()
-        if ext == '.sna':
-            return SNA(sfile)
-        if ext == '.szx':
-            return SZX(sfile)
-        if ext == '.z80':
-            return Z80(sfile)
-
-    def ram(self, page=None):
-        return self.memory.ram(page)
-
-    def move(self, specs):
-        for spec in specs:
-            move(self.memory, spec)
-
-    def poke(self, specs):
-        for spec in specs:
-            poke(self.memory, spec)
-
-class SNA(Snapshot):
-    def __init__(self, snafile):
-        banks = [None] * 8
-        data = list(read_bin_file(snafile))
-        if len(data) > 49179:
-            page = data[49181] % 8
-            offset = 49183
-            for i in sorted(set(range(8)) - {5, 2, page}):
-                banks[i] = data[offset:offset + 16384]
-                offset += 16384
+            update = attr != prev_scr[af_addr] or (flash_change and attr & 0x80)
+        if update:
+            bright = (attr & 64) // 8
+            ink = COLOURS[bright + (attr % 8)]
+            paper = COLOURS[bright + ((attr // 8) % 8)]
+            if attr & 0x80 and flash_switch:
+                ink, paper = paper, ink
+            py = 8 * y
+            screen.fill(paper, cell_rects[x][y])
+            for addr in range(df_addr, df_addr + 2048, 256):
+                b = current_scr[addr]
+                px = 8 * x
+                while b % 256:
+                    if b & 0x80:
+                        screen.fill(ink, pixel_rects[px][py])
+                    b *= 2
+                    px += 1
+                py += 1
+
+def check_supported(snapshot, options):
+    if options.force:
+        return
+    if snapshot.machine is None:
+        return 'Unsupported machine type'
+    if snapshot.type == 'Z80':
+        header = snapshot.header
+        if len(header) == 55 and header[34] not in (0, 3):
+            # Version 2
+            warn('Unsupported hardware (IF1)')
+        elif len(header) > 55 and header[34] not in (0, 4, 12):
+            # Version 3
+            warn('Unsupported hardware (IF1 or MGT)')
+    elif snapshot.type == 'SZX':
+        supported_blocks = {'AY', 'CRTR', 'KEYB', 'JOY', 'RAMP', 'SPCR', 'TAPE', 'Z80R'}
+        unsupported_blocks = set(b[0] for b in snapshot.tail) - supported_blocks
+        if unsupported_blocks:
+            warn('Unsupported block(s) ({}) in SZX snapshot'.format(', '.join(sorted(unsupported_blocks))))
+
+def trace_exec(tracefile, context, fetch_counter, pc):
+    i = disassemble(context.simulator.memory, pc)[0]
+    readings_left = context.simulator.tracer.end - context.simulator.tracer.index
+    tracefile.write(f'F:{context.frame_count:0{context.fnwidth}} C:{fetch_counter:05} I:{readings_left:05} ${pc:04X} {i}\n')
+
+def process_block(block, options, context):
+    if block is None:
+        raise SkoolKitError('Unsupported snapshot type')
+    if isinstance(block, Snapshot):
+        error_msg = check_supported(block, options)
+        if error_msg:
+            raise SkoolKitError(error_msg)
+        context.snapshot = block
+        context.simulator = None
+        return
+    if context.simulator:
+        simulator = context.simulator
+        tracer = simulator.tracer
+        tracer.set_input_rec(block)
+    else:
+        # Set 'int_active' to 0 to prevent 'HALT' and 'LD A,I/R' from ever
+        # behaving as if an interrupt is to be accepted
+        config = {'int_active': 0}
+        if options.python:
+            simulator_cls = Simulator
         else:
-            page = 0
-        banks[5] = data[27:16411]
-        banks[2] = data[16411:32795]
-        banks[page] = data[32795:49179]
-        self.memory = Memory(banks=banks, page=page)
-
-class SZX(Snapshot):
-    def __init__(self, szxfile=None, ram=None):
-        if szxfile:
-            self._read(szxfile)
+            simulator_cls = CSimulator or Simulator
+        simulator = from_snapshot(simulator_cls, context.snapshot, config=config)
+        context.simulator = simulator
+        tracer = RZXTracer(context, block)
+        simulator.set_tracer(tracer)
+    opcodes = simulator.opcodes if hasattr(simulator, 'opcodes') else None
+    memory = simulator.memory
+    registers = simulator.registers
+    total_frames = context.total_frames
+    context.fnwidth = len(str(total_frames)) - 1
+    prev_scr = [None] * 6912
+    show_progress = not options.quiet
+    fps = options.fps
+    stop = options.stop or total_frames
+    flags = parse_int(options.flags, 0)
+    flags_ldair = flags & 1
+    flags_ei = flags & 2
+    exec_map = context.exec_map
+    tracefile = context.tracefile
+    if tracefile:
+        trace = partial(trace_exec, tracefile, context)
+    else:
+        trace = None
+    screen = context.screen
+    if screen: # pragma: no cover
+        p_rectangles = context.p_rectangles
+        c_rectangles = context.c_rectangles
+        clock = context.clock
+    fetch_counter = tracer.next_frame()
+    run = True
+    csimulator = hasattr(simulator, 'exec_frame')
+    while run:
+        if fetch_counter < 0:
+            break
+        if csimulator: # pragma: no cover
+            pc = simulator.exec_frame(fetch_counter, exec_map, trace)
         else:
-            self.header = bytearray(b'ZXST\x01\x04\x01\x00')
-            self.blocks = {}
-            if len(ram) == 8:
-                # 128K
-                self.header[6] = 2
-                self.blocks[b'AY\x00\x00'] = bytearray([0] * 18)
-                banks = ram
-            else:
-                # 48K
-                self.blocks[b'KEYB'] = bytearray([0] * 5)
-                banks = [None] * 8
-                banks[5] = ram[0x0000:0x4000]
-                banks[2] = ram[0x4000:0x8000]
-                banks[0] = ram[0x8000:0xC000]
-            self.memory = Memory(banks=banks)
-
-    def _read(self, szxfile):
-        self.blocks = {}
-        banks = [None] * 8
-        data = bytearray(read_bin_file(szxfile))
-        if len(data) < 8 or data[:4] != b'ZXST':
-            raise SnapshotError(f'{szxfile}: invalid SZX file')
-        self.header = data[:8]
-        page = 0
-        i = 8
-        while i + 8 <= len(data):
-            block_id = data[i:i + 4]
-            block_len = get_dword(data, i + 4)
-            if i + 8 + block_len <= len(data):
-                if block_id == b'RAMP':
-                    bank = data[i + 10] % 8
-                    ram = data[i + 11:i + 8 + block_len]
-                    if data[i + 8] % 2:
-                        try:
-                            ram = zlib.decompress(ram)
-                        except zlib.error as e:
-                            raise SnapshotError(f'Error while decompressing page {bank}: {e.args[0]}')
-                    if len(ram) != 16384:
-                        raise SnapshotError(f'Page {bank} is {len(ram)} bytes (should be 16384)')
-                    banks[bank] = list(ram)
-                else:
-                    if block_id == b'SPCR':
-                        page = data[i + 9] % 8
-                    self.blocks[bytes(block_id)] = data[i + 8:i + 8 + block_len]
-            i += 8 + block_len
-        if self.header[6] > 1 and b'SPCR' not in self.blocks:
-            raise SnapshotError("SPECREGS (SPCR) block not found")
-        self.memory = Memory(banks=banks, page=page)
-
-    def _add_zxstspecregs(self, state):
-        spcr = self.blocks.setdefault(b'SPCR', bytearray([0] * 8))
-        for spec in state:
-            name, sep, val = spec.lower().partition('=')
-            try:
-                if name == 'border':
-                    spcr[0] = get_int_param(val) % 8
-                elif name == '7ffd':
-                    spcr[1] = get_int_param(val) % 256
-                elif name == 'fe':
-                    spcr[3] = get_int_param(val) % 256
-            except ValueError:
-                raise SkoolKitError(f'Cannot parse integer: {spec}')
-
-    def _add_zxstz80regs(self, registers, state):
-        z80r = self.blocks.setdefault(b'Z80R', bytearray([0] * 37))
-        for spec in registers:
-            reg, sep, val = spec.lower().partition('=')
-            if sep:
-                if reg.startswith('^'):
-                    size = len(reg) - 1
+            while fetch_counter > 0:
+                pc = registers[24]
+                r0 = registers[15]
+                ld_r_a = memory[pc] == 0xED and memory[(pc + 1) % 65536] == 0x4F
+                if tracefile:
+                    trace_exec(tracefile, context, fetch_counter, pc)
+                if exec_map is not None:
+                    exec_map.add(pc)
+                opcodes[memory[pc]]()
+                if ld_r_a:
+                    fetch_counter -= 2
                 else:
-                    size = len(reg)
-                offset = SZX_REGISTERS.get(reg)
-                if offset is None:
-                    raise SkoolKitError(f'Invalid register: {spec}')
-                try:
-                    value = get_int_param(val, True)
-                except ValueError:
-                    raise SkoolKitError(f'Cannot parse register value: {spec}')
-                z80r[offset] = value % 256
-                if size == 2:
-                    z80r[offset + 1] = (value // 256) % 256
-        for spec in state:
-            name, sep, val = spec.lower().partition('=')
-            try:
-                if name == 'iff':
-                    z80r[26] = z80r[27] = get_int_param(val) & 255
-                elif name == 'im':
-                    z80r[28] = get_int_param(val) & 3
-                elif name == 'tstates':
-                    tstates = get_int_param(val)
-                    z80r[29:32] = (tstates % 256, (tstates // 256) % 256, (tstates // 65536) % 256)
-            except ValueError:
-                raise SkoolKitError(f'Cannot parse integer: {spec}')
-
-    def _add_zxstayblock(self, state):
-        ay = self.blocks.setdefault(b'AY\x00\x00', bytearray([0] * 18))
-        for spec in state:
-            name, sep, val = spec.lower().partition('=')
-            try:
-                if name == 'fffd':
-                    ay[1] = get_int_param(val) % 256
-                elif name.startswith('ay[') and name.endswith(']'):
-                    r = get_int_param(name[3:-1]) % 16
-                    ay[2 + r] = get_int_param(val) % 256
-            except ValueError:
-                raise SkoolKitError(f'Cannot parse integer: {spec}')
-
-    def _add_zxstkeyboard(self, state):
-        keyb = self.blocks.setdefault(b'KEYB', bytearray([0] * 5))
-        for spec in state:
-            name, sep, val = spec.lower().partition('=')
-            try:
-                if name == 'issue2':
-                    keyb[0] = get_int_param(val) % 2
-            except ValueError:
-                raise SkoolKitError(f'Cannot parse integer: {spec}')
-
-    def _get_zxstrampage(self, page, data):
-        ram = zlib.compress(bytes(data), 9)
-        size = len(ram) + 3
-        ramp = bytearray(b'RAMP')
-        ramp.extend((size % 256, size // 256, 0, 0)) # Block size
-        ramp.extend((1, 0, page))
-        ramp.extend(ram)
-        return ramp
-
-    def set_registers_and_state(self, registers, state):
-        self._add_zxstspecregs(state)
-        self._add_zxstz80regs(registers, state)
-        if any(spec.startswith(('ay[', 'fffd=')) for spec in state):
-            self._add_zxstayblock(state)
-        if any(spec.startswith('issue2=') for spec in state) and self.header[6] < 2:
-            self._add_zxstkeyboard(state)
-
-    def write(self, szxfile):
-        with open(szxfile, 'wb') as f:
-            f.write(self.header)
-            for block_id, block_data in self.blocks.items():
-                f.write(block_id)
-                size = len(block_data)
-                f.write(bytes((size % 256, (size >> 8) % 256, (size >> 16) % 256, (size >> 24) % 256)))
-                f.write(block_data)
-            for bank, data in enumerate(self.memory.banks):
-                if data:
-                    f.write(self._get_zxstrampage(bank, data))
-
-class Z80(Snapshot):
-    def __init__(self, z80file=None, ram=(0,) * 49152):
-        if z80file:
-            self._read(z80file)
-        else:
-            self.header = [0] * 86
-            self.header[30] = 54 # Version 3
-            if len(ram) == 8:
-                # 128K
-                self.header[34] = 4
-                banks = ram
-            else:
-                # 48K
-                banks = [None] * 8
-                banks[5] = ram[0x0000:0x4000]
-                banks[1] = ram[0x4000:0x8000]
-                banks[2] = ram[0x8000:0xC000]
-            self.memory = Memory(banks=banks)
-
-    def _read(self, z80file):
-        banks = [None] * 8
-        data = list(read_bin_file(z80file))
-        if sum(data[6:8]) > 0:
-            # Version 1
-            page = 0
-            self.header = data[:30]
-            if data[12] & 32:
-                ram = self._decompress(data[30:-4])
+                    fetch_counter -= 2 - ((registers[15] ^ r0) % 2)
+        if screen: # pragma: no cover
+            draw(screen, memory, context.frame_count, p_rectangles, c_rectangles, prev_scr)
+            pygame.display.update()
+            for event in pygame.event.get():
+                if event.type == pygame.QUIT:
+                    run = False
+            if fps > 0:
+                clock.tick(fps)
+            prev_scr = memory[16384:23296]
+        registers[25] = 0
+        fetch_counter = tracer.next_frame()
+        if registers[26]:
+            if memory[pc] == 0x76:
+                # Advance PC if the CPU was halted
+                registers[24] = (registers[24] + 1) % 65536
+                simulator.accept_interrupt(registers, memory, 0)
+            elif flags_ldair and memory[pc] == 0xED and memory[(pc + 1) % 65536] in (0x57, 0x5F):
+                # If bit 0 of the playback flags is set and the last
+                # instruction was 'LD A,I' or 'LD A,R', reset bit 2 of F
+                registers[1] &= 0b11111011
+                simulator.accept_interrupt(registers, memory, 0)
+            elif flags_ei:
+                # If bit 1 of the playback flags is set, accept an interrupt at
+                # a frame boundary unless the last instruction was EI and the
+                # next frame is short
+                if memory[pc] != 0xFB or fetch_counter > 2:
+                    simulator.accept_interrupt(registers, memory, 0)
             else:
-                ram = data[30:]
-            banks[5] = ram[0x0000:0x4000]
-            banks[2] = ram[0x4000:0x8000]
-            banks[0] = ram[0x8000:0xC000]
+                simulator.accept_interrupt(registers, memory, 0)
+        if show_progress:
+            p = (context.frame_count / total_frames) * 100
+            write(f'[{p:5.1f}%]\x08\x08\x08\x08\x08\x08\x08\x08')
+        if context.frame_count >= stop:
+            context.stop = True
+            break
+
+def run(infile, options):
+    if options.screen and pygame: # pragma: no cover
+        print(pygame_io.getvalue())
+        pygame.init()
+        scale = options.scale
+        pygame.display.set_mode((256 * scale, 192 * scale))
+        pygame.display.set_caption(os.path.basename(infile))
+        p_rectangles = [[pygame.Rect(px * scale, py * scale, scale, scale) for py in range(192)] for px in range(256)]
+        c_rectangles = [[pygame.Rect(px * scale, py * scale, 8 * scale, 8 * scale) for py in range(0, 192, 8)] for px in range(0, 256, 8)]
+        screen = pygame.display.get_surface()
+        clock = pygame.time.Clock()
+        context = RZXContext(screen, p_rectangles, c_rectangles, clock)
+    else:
+        context = RZXContext()
+    if options.map:
+        context.exec_map = set()
+        if os.path.isfile(options.map):
+            with open(options.map) as f:
+                for line in f:
+                    if re.match(r'\$[0-9A-F]{4}', line):
+                        context.exec_map.add(int(line[1:5], 16))
+    if options.trace:
+        context.tracefile = open(options.trace, 'w')
+    rzx_blocks = parse_rzx(infile)
+    if options.snapshot:
+        rzx_blocks.insert(0, RZXBlock(None, Snapshot.get(options.snapshot)))
+    while rzx_blocks and isinstance(rzx_blocks[-1].obj, Snapshot):
+        rzx_blocks.pop()
+    if rzx_blocks and isinstance(rzx_blocks[0].obj, InputRecording):
+        raise SkoolKitError('Missing snapshot')
+    for block in rzx_blocks:
+        if isinstance(block.obj, InputRecording):
+            context.total_frames += len(block.obj.frames)
+    if options.stop and options.stop > 0:
+        context.total_frames = min(options.stop, context.total_frames)
+    while rzx_blocks:
+        process_block(rzx_blocks.pop(0).obj, options, context)
+        if context.stop:
+            break
+    if options.map:
+        with open(options.map, 'w') as f:
+            for addr in sorted(context.exec_map):
+                f.write(f'${addr:04X}\n')
+    if context.tracefile:
+        context.tracefile.close()
+    if options.dump:
+        ext = options.dump.lower().rpartition('.')[2]
+        if ext in ('szx', 'z80'):
+            ram, registers, state, machine = get_state(context.simulator)
+            write_snapshot(options.dump, ram, registers, state, machine)
+        elif ext == 'rzx':
+            write_rzx(options.dump, context, rzx_blocks)
         else:
-            page = None
-            i = 32 + data[30]
-            self.header = data[:i]
-            if (i == 55 and data[34] > 2) or (i > 55 and data[34] > 3):
-                page = data[35] % 8 # 128K
-            while i < len(data):
-                length = data[i] + 256 * data[i + 1]
-                bank = data[i + 2] - 3
-                if length == 65535:
-                    length = 16384
-                    banks[bank] = data[i + 3:i + 3 + length]
-                else:
-                    banks[bank] = self._decompress(data[i + 3:i + 3 + length])
-                i += 3 + length
-        self.memory = Memory(banks=banks, page=page)
-
-    def _decompress(self, ramz):
-        block = []
-        i = 0
-        while i < len(ramz):
-            b = ramz[i]
-            i += 1
-            if b == 237 and i < len(ramz):
-                c = ramz[i]
-                i += 1
-                if c == 237:
-                    length, byte = ramz[i], ramz[i + 1]
-                    if length == 0:
-                        raise SnapshotError("Found ED ED 00 {0:02X}".format(byte))
-                    block += [byte] * length
-                    i += 2
-                else:
-                    block += [b, c]
-            else:
-                block.append(b)
-        return block
+            raise SkoolKitError(f'Unknown file type: {ext}')
+        print(f'Wrote {options.dump}')
 
-    def _set_registers(self, specs):
-        for spec in specs:
-            reg, sep, val = spec.lower().partition('=')
-            if sep:
-                if reg.startswith('^'):
-                    size = len(reg) - 1
-                else:
-                    size = len(reg)
-                if reg == 'pc' and sum(self.header[6:8]) > 0:
-                    offset = 6
-                else:
-                    offset = Z80_REGISTERS.get(reg, -1)
-                if offset >= 0:
-                    try:
-                        value = get_int_param(val, True)
-                    except ValueError:
-                        raise SkoolKitError("Cannot parse register value: {}".format(spec))
-                    lsb, msb = value % 256, (value & 65535) // 256
-                    if size == 1:
-                        self.header[offset] = lsb
-                    elif size == 2:
-                        self.header[offset:offset + 2] = [lsb, msb]
-                    if reg == 'r':
-                        if lsb & 128:
-                            self.header[12] |= 1
-                        else:
-                            self.header[12] &= 254
-                else:
-                    raise SkoolKitError('Invalid register: {}'.format(spec))
-
-    def _set_state(self, specs):
-        for spec in specs:
-            name, sep, val = spec.lower().partition('=')
-            try:
-                if name == 'iff':
-                    self.header[27] = self.header[28] = get_int_param(val) & 255
-                elif name == 'im':
-                    self.header[29] &= 252 # Clear bits 0 and 1
-                    self.header[29] |= get_int_param(val) & 3
-                elif name == 'issue2':
-                    self.header[29] &= 251 # Clear bit 2
-                    self.header[29] |= (get_int_param(val) & 1) * 4
-                elif name == 'border':
-                    self.header[12] &= 241 # Clear bits 1-3
-                    self.header[12] |= (get_int_param(val) & 7) * 2 # Border colour
-                elif name == 'tstates':
-                    frame_duration = FRAME_DURATIONS[self.header[34] > 3]
-                    qframe_duration = frame_duration // 4
-                    t = frame_duration - 1 - (get_int_param(val) % frame_duration)
-                    t1, t2 = t % qframe_duration, t // qframe_duration
-                    self.header[55:58] = (t1 % 256, t1 // 256, (2 - t2) % 4)
-                elif name == '7ffd':
-                    self.header[35] = get_int_param(val) & 255
-                elif name == 'fffd':
-                    self.header[38] = get_int_param(val) & 255
-                elif name.startswith('ay[') and name.endswith(']'):
-                    r = get_int_param(name[3:-1]) & 15
-                    self.header[39 + r] = get_int_param(val) & 255
-            except ValueError:
-                raise SkoolKitError("Cannot parse integer: {}".format(spec))
-
-    def _make_z80_ram_block(self, data, page=None):
-        block = []
-        prev_b = None
-        count = 0
-        for b in data:
-            if b == prev_b or prev_b is None:
-                prev_b = b
-                if count < 255:
-                    count += 1
-                    continue
-            if count > 4 or (count > 1 and prev_b == 237):
-                block.extend((237, 237, count, prev_b))
-            elif prev_b == 237:
-                block.extend((237, b))
-                prev_b = None
-                count = 0
-                continue
-            else:
-                block.extend((prev_b,) * count)
-            prev_b = b
-            count = 1
-        if count > 4 or (count > 1 and prev_b == 237):
-            block.extend((237, 237, count, prev_b))
-        else:
-            block.extend((prev_b,) * count)
-        if page is None:
-            return bytes(block + [0, 237, 237, 0])
-        length = len(block)
-        return bytes([length % 256, length // 256, page] + block)
-
-    def set_registers_and_state(self, registers, state):
-        self._set_registers(registers)
-        self._set_state(state)
-
-    def write(self, z80file):
-        with open(z80file, 'wb') as f:
-            if len(self.header) == 30:
-                # Version 1
-                self.header[12] |= 32 # RAM is compressed
-                f.write(bytes(self.header))
-                ram = self.memory.banks[5] + self.memory.banks[2] + self.memory.banks[0]
-                f.write(self._make_z80_ram_block(ram))
-            else:
-                f.write(bytes(self.header))
-                for bank, data in enumerate(self.memory.banks, 3):
-                    if data:
-                        f.write(self._make_z80_ram_block(data, bank))
-
-# Component API
-def can_read(fname):
-    """
-    Return whether this snapshot reader can read the file `fname`.
-    """
-    return fname[-4:].lower() in ('.sna', '.z80', '.szx')
-
-# Component API
-def get_snapshot(fname, page=None):
-    """
-    Read a snapshot file and produce a list of byte values. For a 48K snapshot,
-    or a 128K snapshot with a page number (0-7) specified, the list contains
-    65536 (64K) elements: a blank 16K ROM followed by 48K RAM. For a 128K
-    snapshot with `page` equal to -1, the list contains 131072 (128K) elements:
-    RAM banks 0-7 (16K each) in order.
-
-    :param fname: The snapshot filename.
-    :param page: The page number (0-7) to map to addresses 49152-65535
-                 (C000-FFFF), or -1 to return all RAM banks. This is relevant
-                 only when reading a 128K snapshot file.
-    :return: A list of byte values.
-    """
-    if not can_read(fname):
-        raise SnapshotError("{}: Unknown file type".format(fname))
-    ram = Snapshot.get(fname).ram(page)
-    if len(ram) == 49152:
-        return [0] * 16384 + list(ram)
-    if len(ram) == 131072:
-        return list(ram)
-    raise SnapshotError(f'RAM size is {len(ram)}')
-
-def make_snapshot(fname, org, start=None, end=65536, page=None):
-    snapshot_reader = get_snapshot_reader()
-    if snapshot_reader.can_read(fname):
-        if start is None:
-            start = parse_int(get_value('DefaultDisassemblyStartAddress'), 16384)
-        return snapshot_reader.get_snapshot(fname, page), start, end
-    if start is None:
-        start = 0
-    ram = read_bin_file(fname, 65536)
-    if org is None:
-        org = 65536 - len(ram)
-    mem = [0] * 65536
-    mem[org:org + len(ram)] = ram
-    return mem, max(org, start), min(end, org + len(ram))
-
-def write_snapshot(fname, ram, registers, state):
-    snapshot_type = fname[-4:].lower()
-    if snapshot_type == '.z80':
-        snapshot = Z80(ram=ram)
-        registers = ('i=63', 'iy=23610', *registers)
-    elif snapshot_type == '.szx':
-        snapshot = SZX(ram=ram)
-    else:
-        raise SnapshotError(f'{fname}: Unsupported snapshot type')
-    snapshot.set_registers_and_state(registers, ('iff=1', 'im=1', 'tstates=34943', *state))
-    snapshot.write(fname)
-
-def print_reg_help(short_option=None):
-    options = ['--reg name=value']
-    if short_option:
-        options.insert(0, '-{} name=value'.format(short_option))
-    reg_names = ', '.join(sorted(Z80_REGISTERS))
+def print_flags_help():
     print("""
-Usage: {}
-
-Set the value of a register or register pair. For example:
-
-  --reg hl=32768
-  --reg b=17
-
-To set the value of an alternate (shadow) register, use the '^' prefix:
-
-  --reg ^hl=10072
+Usage: --flags FLAGS
 
-Recognised register names are:
-
-  {}
-""".format(', '.join(options), '\n  '.join(textwrap.wrap(reg_names, 70))).strip())
-
-def print_state_help(short_option=None, show_defaults=True):
-    options = ['--state name=value']
-    if short_option:
-        options.insert(0, '-{} name=value'.format(short_option))
-    opts = ', '.join(options)
-    if show_defaults:
-        infix = 'and their default values '
-        border = issue2 = ' (default=0)'
-        iff = im = ' (default=1)'
-        tstates = ' (default=34943)'
-    else:
-        infix = border = issue2 = iff = im = tstates = ''
-    attributes = [
-        ('7ffd', 'last OUT to port 0x7ffd (128K only)'),
-        ('ay[N]', 'contents of AY register N (N=0-15; 128K only)'),
-        ('border', f'border colour{border}'),
-        ('fe', 'last OUT to port 0xfe (SZX only)'),
-        ('fffd', 'last OUT to port 0xfffd (128K only)'),
-        ('iff', f'interrupt flip-flop: 0=disabled, 1=enabled{iff}'),
-        ('im', f'interrupt mode{im}'),
-        ('issue2', f'issue 2 emulation: 0=disabled, 1=enabled{issue2}'),
-        ('tstates', f'T-states elapsed since start of frame{tstates}')
-    ]
-    attrs = '\n'.join(f'  {a:<7} - {d}' for a, d in sorted(attributes))
-    print(f'Usage: {opts}\n\nSet a hardware state attribute. Recognised names {infix}are:\n\n{attrs}')
-
-def _get_page(param, desc, spec, default=None):
-    if ':' in param:
-        page, v = param.split(':', 1)
-        try:
-            return get_int_param(page), v
-        except ValueError:
-            raise SkoolKitError(f'Invalid page number in {desc} spec: {spec}')
-    return default, param
-
-def move(snapshot, param_str):
-    try:
-        src, length, dest = param_str.split(',', 2)
-    except ValueError:
-        raise SkoolKitError(f'Not enough arguments in move spec (expected 3): {param_str}')
-    src_page, src = _get_page(src, 'move', param_str)
-    dest_page, dest = _get_page(dest, 'move', param_str, src_page)
-    try:
-        src, length, dest = [get_int_param(p, True) for p in (src, length, dest)]
-    except ValueError:
-        raise SkoolKitError('Invalid integer in move spec: {}'.format(param_str))
-    if src_page is None:
-        snapshot[dest:dest + length] = snapshot[src:src + length]
-    elif hasattr(snapshot, 'banks'):
-        src_bank = snapshot.banks[src_page % 8]
-        dest_bank = snapshot.banks[dest_page % 8]
-        if src_bank and dest_bank:
-            s = src % 0x4000
-            d = dest % 0x4000
-            dest_bank[d:d + length] = src_bank[s:s + length]
-
-def poke(snapshot, param_str):
-    try:
-        addr, val = param_str.split(',', 1)
-    except ValueError:
-        raise SkoolKitError("Value missing in poke spec: {}".format(param_str))
-    page, addr = _get_page(addr, 'poke', param_str)
-    try:
-        if val.startswith('^'):
-            value = get_int_param(val[1:], True)
-            poke_f = lambda b: b ^ value
-        elif val.startswith('+'):
-            value = get_int_param(val[1:], True)
-            poke_f = lambda b: (b + value) & 255
-        else:
-            value = get_int_param(val, True)
-            poke_f = lambda b: value
-    except ValueError:
-        raise SkoolKitError('Invalid value in poke spec: {}'.format(param_str))
-    try:
-        values = [get_int_param(i, True) for i in addr.split('-', 2)]
-    except ValueError:
-        raise SkoolKitError('Invalid address range in poke spec: {}'.format(param_str))
-    addr1, addr2, step = values + [values[0], 1][len(values) - 1:]
-    if page is None:
-        for a in range(addr1, addr2 + 1, step):
-            snapshot[a] = poke_f(snapshot[a])
-    elif hasattr(snapshot, 'banks'):
-        bank = snapshot.banks[page % 8]
-        if bank:
-            for a in range(addr1, addr2 + 1, step):
-                bank[a % 0x4000] = poke_f(bank[a % 0x4000])
-
-# API (SnapshotReader)
-class SnapshotError(SkoolKitError):
-    """Raised when an error occurs while reading a snapshot file."""
+Set flags that control the playback of RZX frames when interrupts are enabled.
+FLAGS is the sum of the following values, chosen according to the desired
+outcome:
+
+  1 - When the last instruction in a frame is either 'LD A,I' or 'LD A,R',
+      reset bit 2 of the flags register. This is the expected behaviour of a
+      real Z80, but some RZX files fail when this flag is set.
+
+  2 - When the last instruction in a frame is 'EI', and the next frame is a
+      short one (i.e. has a fetch count of 1 or 2), block the interrupt in the
+      next frame. By default, and according to RZX convention, rzxplay.py
+      accepts an interrupt at the start of every frame except the first,
+      regardless of whether the instruction just executed would normally block
+      it. However, some RZX files contain a short frame immediately after an
+      'EI' to indicate that the interrupt should in fact be blocked, and
+      therefore require this flag to be set to play back correctly.
+
+""".strip())
+
+def main(args):
+    parser = argparse.ArgumentParser(
+        usage='rzxplay.py [options] FILE [OUTFILE]',
+        description="Play an RZX file. "
+                    "If 'OUTFILE' is given, an SZX or Z80 snapshot or an RZX file is written after playback has completed.",
+        add_help=False
+    )
+    parser.add_argument('infile', help=argparse.SUPPRESS, nargs='?')
+    parser.add_argument('dump', help=argparse.SUPPRESS, nargs='?')
+    group = parser.add_argument_group('Options')
+    group.add_argument('--flags', default='0',
+                       help="Set playback flags. Do '--flags help' for more information.")
+    group.add_argument('--force', action='store_true',
+                       help="Force playback when unsupported hardware is detected.")
+    group.add_argument('--fps', type=int, default=50,
+                       help="Run at this many frames per second (default: 50). "
+                            "0 means maximum speed.")
+    group.add_argument('--map', metavar='FILE',
+                       help="Log addresses of executed instructions to a file.")
+    group.add_argument('--no-screen', dest='screen', action='store_false',
+                       help="Run without a screen.")
+    group.add_argument('--python', action='store_true',
+                       help="Use the pure Python Z80 simulator.")
+    group.add_argument('--quiet', action='store_true',
+                       help="Don't print progress percentage.")
+    group.add_argument('--scale', metavar='SCALE', type=int, default=2, choices=(1, 2, 3, 4),
+                       help="Scale display up by this factor (1-4; default: 2).")
+    group.add_argument('--snapshot', metavar='FILE',
+                       help="Specify an external snapshot file to start with.")
+    group.add_argument('--stop', metavar='FRAMES', type=int,
+                       help="Stop after playing this many frames.")
+    group.add_argument('--trace', metavar='FILE',
+                       help="Log executed instructions to a file.")
+    group.add_argument('-V', '--version', action='version', version='SkoolKit {}'.format(VERSION),
+                       help='Show SkoolKit version number and exit.')
+    namespace, unknown_args = parser.parse_known_args(args)
+    if namespace.flags == 'help':
+        print_flags_help()
+        return
+    if unknown_args or namespace.infile is None:
+        parser.exit(2, parser.format_help())
+    run(namespace.infile, namespace)
```

### Comparing `skoolkit-9.1/skoolkit/snaskool.py` & `skoolkit-9.2/skoolkit/snaskool.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/tap2sna.py` & `skoolkit-9.2/skoolkit/tap2sna.py`

 * *Files 3% similar despite different names*

```diff
@@ -19,26 +19,27 @@
 import argparse
 import hashlib
 import tempfile
 import zipfile
 from urllib.request import Request, urlopen
 from urllib.parse import urlparse
 
-from skoolkit import (SkoolKitError, get_dword, get_int_param, get_object,
-                      get_word, get_word3, integer, open_file, parse_int,
-                      read_bin_file, write_line, ROM48, VERSION)
+from skoolkit import (SkoolKitError, CSimulator, CCMIOSimulator, get_dword,
+                      get_int_param, get_object, get_word, get_word3, integer,
+                      open_file, parse_int, read_bin_file, write_line, ROM48,
+                      VERSION)
 from skoolkit.cmiosimulator import CMIOSimulator
 from skoolkit.config import get_config, show_config, update_options
 from skoolkit.kbtracer import KeyboardTracer
 from skoolkit.loadsample import ACCELERATORS
 from skoolkit.loadtracer import LoadTracer, get_edges
 from skoolkit.pagingtracer import Memory
-from skoolkit.simulator import (Simulator, INT_ACTIVE, A, F, B, C, D, E, H, L, IXh, IXl, IYh, IYl,
-                                SP, I, R, xA, xF, xB, xC, xD, xE, xH, xL, PC, T)
-from skoolkit.snapshot import FRAME_DURATIONS, move, poke, print_reg_help, print_state_help, write_snapshot
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import FRAME_DURATIONS, INT_ACTIVE, PC, T, get_state
+from skoolkit.snapshot import move, poke, print_reg_help, print_state_help, write_snapshot
 
 SYSVARS = (
     255, 0, 0, 0,         # 23552 - KSTATE0
     255, 0, 0, 0,         # 23556 - KSTATE4
     0,                    # 23560 - LAST-K
     35,                   # 23561 - REPDEL
     5,                    # 23562 - REPPER
@@ -235,22 +236,23 @@
             args.append(arg)
         return args
 
 class TapeError(Exception):
     pass
 
 class TapeBlockTimings:
-    def __init__(self, pilot_len=0, pilot=0, sync=(), zero=0, one=0, pause=0, used_bits=8, error=None):
+    def __init__(self, pilot_len=0, pilot=0, sync=(), zero=0, one=0, pause=0, used_bits=8, pulses=(), error=None):
         self.pilot_len = pilot_len
         self.pilot = pilot
         self.sync = sync
         self.zero = zero
         self.one = one
         self.pause = pause
         self.used_bits = used_bits
+        self.pulses = pulses
         self.error = error
 
 def get_tape_block_timings(first_byte, pause=3500000):
     if first_byte == 0:
         # Header block
         return TapeBlockTimings(8063, 2168, (667, 735), 855, 1710, pause)
     # Data block
@@ -289,14 +291,15 @@
     options.finish_tape = False
     options.first_edge = 0
     options.in_flags = 0
     options.load = None
     options.machine = '48'
     options.pause = True
     options.polarity = 0
+    options.python = 0
     options.timeout = 900
     options.trace = None
     for spec in options.sim_load_config:
         name, sep, value = spec.partition('=')
         if sep:
             if name == 'accelerate-dec-a':
                 options.accelerate_dec_a = parse_int(value, options.accelerate_dec_a)
@@ -316,51 +319,55 @@
                 options.load = value
             elif name == 'machine':
                 options.machine = value
             elif name == 'pause':
                 options.pause = parse_int(value, options.pause)
             elif name == 'polarity':
                 options.polarity = parse_int(value, options.polarity)
+            elif name == 'python':
+                options.python = parse_int(value, options.python)
             elif name == 'timeout':
                 options.timeout = parse_int(value, options.timeout)
             elif name == 'trace':
                 options.trace = value
             else:
                 raise SkoolKitError(f'Invalid sim-load configuration parameter: {name}')
 
 def sim_load(blocks, options, config):
     if options.tape_analysis:
         get_edges(blocks, options.first_edge, options.polarity, True)
         sys.exit(0)
 
-    list_accelerators = options.accelerator == 'list'
+    list_accelerators = int(options.accelerator == 'list')
     accelerators = set()
     if options.accelerator == 'auto' or list_accelerators:
         accelerators.update(ACCELERATORS.values())
     elif options.accelerator and options.accelerator != 'none':
         for name in options.accelerator.split(','):
             if name in ACCELERATORS:
                 accelerators.add(ACCELERATORS[name])
             else:
                 raise SkoolKitError(f'Unrecognised accelerator: {name}')
 
     interrupted = False
+    fast = not options.trace
+    sim_cfg = {'fast_djnz': fast, 'fast_ldir': fast}
     if options.machine == '128':
         if not options.load:
             options.load = 'ENTER'
         registers = {'PC': 0x00EA, '^HL': 0xFFFF, 'R': 0x38}
         state = {'tstates': 3453395}
-        sim_cfg = {'frame_duration': FRAME_DURATIONS[1], 'int_active': INT_ACTIVE[1]}
+        sim_cfg['frame_duration'] = FRAME_DURATIONS[1]
+        sim_cfg['int_active'] = INT_ACTIVE[1]
         memory = Memory()
         stop = 0x13BE
         kb_delay = 13
     else:
         registers = {'PC': 0x1200, 'HL': 0xFFFF, 'R': 0x22}
         state = {'tstates': 5701854}
-        sim_cfg = {}
         memory = [0] * 65536
         memory[:0x4000] = read_bin_file(ROM48, 16384)
         stop = 0x0605 # SAVE-ETC
         kb_delay = 4
 
     if options.trace:
         tracefile = open_file(options.trace, 'w')
@@ -369,17 +376,24 @@
         prefix, byte_fmt, word_fmt = (op_fmt + ',' * (2 - op_fmt.count(','))).split(',')[:3]
     else:
         tracefile = trace_line = prefix = byte_fmt = word_fmt = None
 
     timeout = options.timeout * 3500000
 
     if options.cmio:
-        simulator_cls = CMIOSimulator
-    else:
+        if options.python:
+            simulator_cls = CMIOSimulator
+        else:
+            simulator_cls = CCMIOSimulator or CMIOSimulator
+        accelerators.clear()
+        options.accelerate_dec_a = 0
+    elif options.python:
         simulator_cls = Simulator
+    else:
+        simulator_cls = CSimulator or Simulator
 
     if options.load:
         load = options.load.split()
         if load[-1].startswith('PC='):
             pc = load.pop()
             try:
                 stop = get_int_param(pc[3:], True)
@@ -405,27 +419,28 @@
         memory[0x5800:0x5B00] = [56] * 768 # PAPER 7: INK 0
         memory[0x5C00:0x5C00 + len(SYSVARS)] = SYSVARS
         for a, b in SIM_LOAD_PATCH.items():
             memory[a] = b % 256
             if b > 0xFF:
                 memory[a + 1] = b // 256
         is_code = False
-        for block in blocks:
-            block_data = block[1]
+        for block_id, timings, block_data in blocks:
+            if block_id == 0x15:
+                break
             if block_data:
                 if len(block_data) >= 19 and tuple(block_data[0:2]) == (0, 3):
                     is_code = True
                 break
         if is_code:
             for a, b in SIM_LOAD_CODE_PATCH.items():
                 memory[a] = b % 256
                 if b > 0xFF:
                     memory[a + 1] = b // 256
         memory[0xFF58:] = memory[0x3E08:0x3EB0] # UDGs
-        simulator = simulator_cls(memory, {'PC': 0x0605, 'SP': 0xFF50})
+        simulator = simulator_cls(memory, {'PC': 0x0605, 'SP': 0xFF50}, config=sim_cfg)
         border = 7
         out7ffd = 0
         outfffd = 0
         ay = [0] * 16
         outfe = 0
 
     if timeout <= 0:
@@ -434,70 +449,35 @@
         if options.in_flags & 1:
             in_min_addr = 0x4000
         elif options.in_flags & 2:
             in_min_addr = 0x10000
         else:
             in_min_addr = 0x8000
         tracer = LoadTracer(simulator, blocks, accelerators, options.pause, options.first_edge,
-                            options.polarity, options.finish_tape, in_min_addr, options.accelerate_dec_a,
+                            options.polarity, in_min_addr, options.accelerate_dec_a,
                             list_accelerators, border, out7ffd, outfffd, ay, outfe)
         simulator.set_tracer(tracer, options.in_flags & 4, False)
         try:
-            tracer.run(options.start, options.fast_load, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt)
-            _ram_operations(memory, options.ram_ops)
+            tracer.run(options.start, options.fast_load, options.finish_tape, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt)
+            _ram_operations(simulator.memory, options.ram_ops)
         except KeyboardInterrupt:
             write_line(f'Simulation stopped (interrupted): PC={simulator.registers[PC]}')
         if list_accelerators:
-            accelerators = '; '.join(f'{k}: {v}' for k, v in tracer.accelerators.items()) or 'none'
+            accelerators = '; '.join(f'{k}: {v}' for k, v in sorted(tracer.acc_usage.items())) or 'none'
             tsl_misses = f'{tracer.inc_b_misses}/{tracer.dec_b_misses}'
             dec_a_stats = f'{tracer.dec_a_jr_hits}/{tracer.dec_a_jp_hits}/{tracer.dec_a_misses}'
             write_line(f'Accelerators: {accelerators}; misses: {tsl_misses}; dec-a: {dec_a_stats}')
 
     if tracefile:
         tracefile.close()
 
-    sim_registers = simulator.registers
-    registers = {
-        'A': sim_registers[A],
-        'F': sim_registers[F],
-        'B': sim_registers[B],
-        'C': sim_registers[C],
-        'D': sim_registers[D],
-        'E': sim_registers[E],
-        'H': sim_registers[H],
-        'L': sim_registers[L],
-        'IX': sim_registers[IXl] + 256 * sim_registers[IXh],
-        'IY': sim_registers[IYl] + 256 * sim_registers[IYh],
-        'I': sim_registers[I],
-        'R': sim_registers[R],
-        'SP': sim_registers[SP],
-        '^A': sim_registers[xA],
-        '^F': sim_registers[xF],
-        '^B': sim_registers[xB],
-        '^C': sim_registers[xC],
-        '^D': sim_registers[xD],
-        '^E': sim_registers[xE],
-        '^H': sim_registers[xH],
-        '^L': sim_registers[xL],
-        'PC': sim_registers[PC]
-    }
-    options.reg = [f'{r}={v}' for r, v in registers.items()] + options.reg
-    state = [
-        f'im={simulator.imode}',
-        f'iff={simulator.iff}',
-        f'border={tracer.border}',
-        f'7ffd={tracer.out7ffd}',
-        f'fffd={tracer.outfffd}',
-        f'fe={tracer.outfe}'
-    ]
-    state.extend(f'ay[{r}]={v}' for r, v in enumerate(tracer.ay))
+    ram, registers, state = get_state(simulator, False)[:3]
+    options.reg = registers + options.reg
     options.state = state + options.state
-    if isinstance(memory, Memory):
-        return memory.banks
-    return memory[0x4000:]
+    return ram
 
 def _get_load_params(param_str):
     params = []
     for index, n in enumerate(param_str.split(',')):
         if index == 0:
             params.append(n)
         elif n:
@@ -616,15 +596,41 @@
             used_bits = data[i + 4]
             pause = get_word(data, i + 5) * 3500
             timings = TapeBlockTimings(zero=zero, one=one, pause=pause, used_bits=used_bits)
         i += 10 + length
     elif block_id == 21:
         # Direct recording block
         if sim:
-            timings = TapeBlockTimings(error="TZX Direct Recording (0x15) not supported")
+            tape_data = []
+            tps = get_word(data, i)
+            pause = get_word(data, i + 2)
+            used_bits = data[i + 4]
+            num_bytes = get_word3(data, i + 5)
+            j = 0
+            pulses = []
+            prev_bit = data[i + 8] & 0x80
+            if prev_bit:
+                pulses.append(0)
+            bit_count = 0
+            for j, b in enumerate(data[i + 8:i + 8 + num_bytes], 1):
+                if j < num_bytes:
+                    num_bits = 8
+                else:
+                    num_bits = used_bits
+                for k in range(num_bits):
+                    bit = b & 0x80
+                    if bit == prev_bit:
+                        bit_count += 1
+                    else:
+                        pulses.append(bit_count * tps)
+                        prev_bit = bit
+                        bit_count = 1
+                    b *= 2
+            pulses.append(bit_count * tps)
+            timings = TapeBlockTimings(pause=pause, pulses=pulses)
         i += get_word3(data, i + 5) + 8
     elif block_id == 24:
         # CSW recording block
         if sim:
             timings = TapeBlockTimings(error="TZX CSW Recording (0x18) not supported")
         i += get_dword(data, i) + 4
     elif block_id == 25:
@@ -712,17 +718,17 @@
                 elif block_id == 0x24:
                     loop = []
                     repetitions = get_word(data, i - 2)
                 elif block_id == 0x2A and stop == 0 and is48:
                     # Stop the tape if in 48K mode
                     break
             if loop is None:
-                blocks.append((timings, tape_data))
+                blocks.append((block_id, timings, tape_data))
             else:
-                loop.append((timings, tape_data))
+                loop.append((block_id, timings, tape_data))
             if block_id == 0x25 and loop is not None:
                 blocks.extend(loop * repetitions)
                 loop = None
         block_num += 1
     return blocks
 
 def get_tap_blocks(tap, start=1, stop=0):
@@ -734,59 +740,59 @@
             break
         block_len = tap[i] + 256 * tap[i + 1]
         i += 2
         if block_num >= start:
             data = tap[i:i + block_len]
             if data:
                 timings = get_tape_block_timings(data[0])
-                blocks.append((timings, data))
+                blocks.append((None, timings, data))
         i += block_len
         block_num += 1
     return blocks
 
 def _get_tape_blocks(tape_type, tape, sim, start, stop, is48):
     if tape_type.lower() == 'tzx':
         return _get_tzx_blocks(tape, sim, start, stop, is48)
     return get_tap_blocks(tape, start, stop)
 
 def _get_tape(urlstring, user_agent, member):
     url = urlparse(urlstring)
     if url.scheme:
-        write_line('Downloading {0}'.format(urlstring))
+        write_line(f'Downloading {urlstring}')
         r = Request(urlstring, headers={'User-Agent': user_agent})
-        u = urlopen(r, timeout=30)
         f = tempfile.NamedTemporaryFile(prefix='tap2sna-')
-        while 1:
-            data = bytearray(u.read(4096))
-            if not data:
-                break
-            f.write(data)
+        with urlopen(r, timeout=30) as u:
+            while 1:
+                data = u.read(4096)
+                if not data:
+                    break
+                f.write(data)
+        f.seek(0)
     else:
         f = open_file(urlstring, 'rb')
 
     if urlstring.lower().endswith('.zip'):
         z = zipfile.ZipFile(f)
         if member is None:
             for name in z.namelist():
                 if name.lower().endswith(('.tap', '.tzx')):
                     member = name
                     break
             else:
                 f.close()
                 raise TapeError('No TAP or TZX file found')
-        write_line('Extracting {0}'.format(member))
+        write_line(f'Extracting {member}')
         try:
             tape = z.open(member)
         except KeyError:
             raise TapeError(f'No file named "{member}" in the archive')
-        data = bytearray(tape.read())
+        data = tape.read()
     else:
         member = os.path.basename(urlstring)
-        f.seek(0)
-        data = bytearray(f.read())
+        data = f.read()
 
     f.close()
     tape_type = member[-3:]
     return member, tape_type, data
 
 def _print_ram_help():
     sys.stdout.write("""
@@ -895,14 +901,15 @@
        --sim-load-config finish-tape=0/1
        --sim-load-config first-edge=N
        --sim-load-config in-flags=FLAGS
        --sim-load-config load=KEYS
        --sim-load-config machine=48/128
        --sim-load-config pause=0/1
        --sim-load-config polarity=0/1
+       --sim-load-config python=0/1
        --sim-load-config timeout=N
        --sim-load-config trace=FILE
 
 Configure various properties of a simulated LOAD.
 
 --sim-load-config accelerate-dec-a=0/1/2
 
@@ -919,15 +926,16 @@
 
   {accelerators}
 
 --sim-load-config cmio=0/1
 
   By default, memory contention and I/O contention delays are not simulated.
   This improves performance and does not affect most loaders. Set cmio=1 to
-  enable simulation of memory and I/O contention delays.
+  enable simulation of memory and I/O contention delays. Note that when cmio=1,
+  all acceleration is disabled.
 
 --sim-load-config fast-load=0/1
 
   By default, whenever the Spectrum ROM's load routine is called, a shortcut is
   taken by "fast loading" the next block on the tape. This significantly
   reduces the load time for many tapes, but can also cause some loaders to
   fail. Set fast-load=0 to disable fast loading.
@@ -1003,14 +1011,19 @@
 
 --sim-load-config polarity=0/1
 
   By default, the first pulse on the tape produces an EAR bit reading of 0
   (polarity=0), and subsequent pulses give readings that alternate between 1
   and 0. This works for most loaders, but some require polarity=1.
 
+--sim-load-config python=0/1
+
+  By default, tap2sna.py will use the C version of the Z80 simulator if it's
+  available. Set python=1 to force usage of the pure Python Z80 simulator.
+
 --sim-load-config timeout=N
 
   Set the timeout to N seconds (default: 900). A simulated LOAD still in
   progress after this period of Z80 CPU time will automatically abort.
 
 --sim-load-config trace=FILE
 
@@ -1026,20 +1039,20 @@
     if options.sim_load:
         _set_sim_load_config(options)
         is48 = options.machine == '48'
     else:
         is48 = True
     tape_blocks = _get_tape_blocks(tape_type, tape, options.sim_load, options.tape_start, options.tape_stop, is48)
     if options.sim_load:
-        blocks = [b for b in tape_blocks if b[0]]
+        blocks = [b for b in tape_blocks if b[1]]
         if not blocks:
             raise TapeError('Tape is empty')
         ram = sim_load(blocks, options, config)
     else:
-        blocks = [b[1] for b in tape_blocks]
+        blocks = [b[2] for b in tape_blocks]
         ram = _get_ram(blocks, options)
     if outfile is None:
         if tape_name.lower().endswith(('.tap', '.tzx')):
             tape_name = tape_name[:-4]
         fmt = config['DefaultSnapshotFormat']
         outfile = f'{tape_name}.{fmt}'
     if options.output_dir:
```

### Comparing `skoolkit-9.1/skoolkit/tapinfo.py` & `skoolkit-9.2/skoolkit/tapinfo.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2013, 2015, 2017, 2020, 2022, 2023
+# Copyright 2013, 2015, 2017, 2020, 2022-2024
 # Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
@@ -301,15 +301,20 @@
         info.append('Used bits in last byte: {}'.format(data[i + 4]))
         info.append('Pause: {}ms'.format(get_word(data, i + 5)))
         length = get_word3(data, i + 7)
         tape_data = data[i + 10:i + 10 + length]
         i += length + 10
     elif block_id == 21:
         header = 'Direct recording'
-        i += get_word3(data, i + 5) + 8
+        info.append('T-states per sample: {}'.format(get_word(data, i)))
+        info.append('Pause: {}ms'.format(get_word(data, i + 2)))
+        info.append('Used bits in last byte: {}'.format(data[i + 4]))
+        samples_length = get_word3(data, i + 5)
+        info.append('Length: {}'.format(samples_length))
+        i += 8 + samples_length
     elif block_id == 24:
         header = 'CSW recording'
         i += get_dword(data, i) + 4
     elif block_id == 25:
         header = 'Generalized data'
         i += get_dword(data, i) + 4
     elif block_id == 32:
```

### Comparing `skoolkit-9.1/skoolkit/textutils.py` & `skoolkit-9.2/skoolkit/textutils.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit/traceutils.py` & `skoolkit-9.2/skoolkit/traceutils.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# Copyright 2022, 2023 Richard Dymond (rjdymond@gmail.com)
+# Copyright 2022-2024 Richard Dymond (rjdymond@gmail.com)
 #
 # This file is part of SkoolKit.
 #
 # SkoolKit is free software: you can redistribute it and/or modify it under the
 # terms of the GNU General Public License as published by the Free Software
 # Foundation, either version 3 of the License, or (at your option) any later
 # version.
@@ -10,16 +10,16 @@
 # SkoolKit is distributed in the hope that it will be useful, but WITHOUT ANY
 # WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 # A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License along with
 # SkoolKit. If not, see <http://www.gnu.org/licenses/>.
 
-from skoolkit.simulator import (A, F, B, C, D, E, H, L, IXh, IXl, IYh, IYl,
-                                SP, SP2, I, R, xA, xF, xB, xC, xD, xE, xH, xL)
+from skoolkit.simutils import (A, F, B, C, D, E, H, L, IXh, IXl, IYh, IYl,
+                               SP, SP2, I, R, xA, xF, xB, xC, xD, xE, xH, xL)
 
 REGISTERS = {
     'a': (A, SP2),
     'f': (F, SP2),
     'bc': (C, B),
     'b': (B, SP2),
     'c': (C, SP2),
```

### Comparing `skoolkit-9.1/skoolkit/z80.py` & `skoolkit-9.2/skoolkit/z80.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/skoolkit.egg-info/PKG-INFO` & `skoolkit-9.2/skoolkit.egg-info/PKG-INFO`

 * *Files 9% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: skoolkit
-Version: 9.1
+Version: 9.2
 Summary: A suite of tools for creating disassemblies of ZX Spectrum games
 Home-page: https://skoolkit.ca
 Author: Richard Dymond
 Author-email: rjdymond@gmail.com
 License: GPLv3
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)
@@ -39,15 +39,15 @@
 With SkoolKit you can:
 
 * use sna2ctl.py_ to generate a `control file`_ (an attempt to identify
   routines and data blocks by static analysis) from a snapshot (SNA, SZX or
   Z80) or raw memory file
 * enable sna2ctl.py_ to generate a much better control file that more reliably
   distinguishes code from data by using a code execution map produced by an
-  emulator
+  emulator or rzxplay.py_
 * use sna2skool.py_ along with this control file to produce a disassembly of a
   snapshot or raw memory file
 * add annotations to this disassembly (or the control file) as you discover the
   purpose of each routine and data block
 * use skool2html.py_ to convert a disassembly into a bunch of HTML files (with
   annotations in place, and the operands of CALL and JP instructions converted
   into hyperlinks)
@@ -59,16 +59,20 @@
 * use tap2sna.py_ to convert a TAP or TZX file into a 'pristine' Z80 or SZX
   snapshot
 * use snapinfo.py_ to analyse a snapshot or raw memory file and list the BASIC
   program it contains, show register values, produce a call graph, find tile
   graphic data, find text, or find sequences of arbitrary byte values
 * use trace.py_ to trace the execution of machine code in a snapshot or raw
   memory file
+* use rzxplay.py_ to trace the execution of machine code in an RZX file, and
+  produce a code execution map for sna2ctl.py_
 * use tapinfo.py_ to analyse the blocks in a TAP or TZX file, and list the
   BASIC program it contains
+* use rzxinfo.py_ to analyse the blocks in an RZX file, and extract snapshots
+  from it
 * use bin2tap.py_ to convert a snapshot or raw memory file into a TAP file
 * use bin2sna.py_ to convert a raw memory file into a Z80 or SZX snapshot
 * use snapmod.py_ to modify the register values or memory contents in a Z80 or
   SZX snapshot
 * use sna2img.py_ to convert graphic data in a disassembly, SCR file, snapshot
   or raw memory file into a PNG image
 
@@ -84,14 +88,16 @@
 
 For a demonstration of SkoolKit's capabilities, take a look at the complete
 disassemblies of `Skool Daze`_, `Back to Skool`_, `Contact Sam Cruise`_,
 `Manic Miner`_, `Jet Set Willy`_ and `Hungry Horace`_.
 
 .. _bin2sna.py: https://skoolkid.github.io/skoolkit/commands.html#bin2sna-py
 .. _bin2tap.py: https://skoolkid.github.io/skoolkit/commands.html#bin2tap-py
+.. _rzxinfo.py: https://skoolkid.github.io/skoolkit/commands.html#rzxinfo-py
+.. _rzxplay.py: https://skoolkid.github.io/skoolkit/commands.html#rzxplay-py
 .. _skool2asm.py: https://skoolkid.github.io/skoolkit/commands.html#skool2asm-py
 .. _skool2bin.py: https://skoolkid.github.io/skoolkit/commands.html#skool2bin-py
 .. _skool2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#skool2ctl-py
 .. _skool2html.py: https://skoolkid.github.io/skoolkit/commands.html#skool2html-py
 .. _sna2ctl.py: https://skoolkid.github.io/skoolkit/commands.html#sna2ctl-py
 .. _sna2img.py: https://skoolkid.github.io/skoolkit/commands.html#sna2img-py
 .. _sna2skool.py: https://skoolkid.github.io/skoolkit/commands.html#sna2skool-py
```

### Comparing `skoolkit-9.1/skoolkit.egg-info/SOURCES.txt` & `skoolkit-9.2/skoolkit.egg-info/SOURCES.txt`

 * *Files 3% similar despite different names*

```diff
@@ -1,37 +1,42 @@
 COPYING
 MANIFEST.in
 bin2sna.py
 bin2tap.py
 long_description.rst
 pyproject.toml
+rzxinfo.py
+rzxplay.py
 setup.cfg
+setup.py
 skool2asm.py
 skool2bin.py
 skool2ctl.py
 skool2html.py
 sna2ctl.py
 sna2img.py
 sna2skool.py
 snapinfo.py
 snapmod.py
 tap2sna.py
 tapinfo.py
 trace.py
+c/csimulator.c
 docs/asm-templates.html
 docs/asm.html
 docs/assemblers.html
 docs/changelog.html
 docs/changelog1.html
 docs/changelog2.html
 docs/changelog3.html
 docs/changelog4.html
 docs/changelog5.html
 docs/changelog6.html
 docs/changelog7.html
+docs/changelog8.html
 docs/commands.html
 docs/components.html
 docs/control-files.html
 docs/diy.html
 docs/extending.html
 docs/genindex.html
 docs/html-templates.html
@@ -52,14 +57,15 @@
 docs/_sources/changelog1.rst.txt
 docs/_sources/changelog2.rst.txt
 docs/_sources/changelog3.rst.txt
 docs/_sources/changelog4.rst.txt
 docs/_sources/changelog5.rst.txt
 docs/_sources/changelog6.rst.txt
 docs/_sources/changelog7.rst.txt
+docs/_sources/changelog8.rst.txt
 docs/_sources/commands.rst.txt
 docs/_sources/components.rst.txt
 docs/_sources/control-files.rst.txt
 docs/_sources/diy.rst.txt
 docs/_sources/extending.rst.txt
 docs/_sources/html-templates.rst.txt
 docs/_sources/index.rst.txt
@@ -68,14 +74,16 @@
 docs/_sources/ref-files.rst.txt
 docs/_sources/skool-files.rst.txt
 docs/_sources/skool-macros.rst.txt
 docs/_sources/usage.rst.txt
 docs/_sources/whatis.rst.txt
 docs/_sources/man/bin2sna.py.rst.txt
 docs/_sources/man/bin2tap.py.rst.txt
+docs/_sources/man/rzxinfo.py.rst.txt
+docs/_sources/man/rzxplay.py.rst.txt
 docs/_sources/man/skool2asm.py.rst.txt
 docs/_sources/man/skool2bin.py.rst.txt
 docs/_sources/man/skool2ctl.py.rst.txt
 docs/_sources/man/skool2html.py.rst.txt
 docs/_sources/man/sna2ctl.py.rst.txt
 docs/_sources/man/sna2img.py.rst.txt
 docs/_sources/man/sna2skool.py.rst.txt
@@ -98,14 +106,16 @@
 docs/_static/pygments.css
 docs/_static/searchtools.js
 docs/_static/sidebar.js
 docs/_static/sphinx_highlight.js
 docs/_static/underscore.js
 docs/man/bin2sna.py.html
 docs/man/bin2tap.py.html
+docs/man/rzxinfo.py.html
+docs/man/rzxplay.py.html
 docs/man/skool2asm.py.html
 docs/man/skool2bin.py.html
 docs/man/skool2ctl.py.html
 docs/man/skool2html.py.html
 docs/man/sna2ctl.py.html
 docs/man/sna2img.py.html
 docs/man/sna2skool.py.html
@@ -115,14 +125,16 @@
 docs/man/tapinfo.py.html
 docs/man/trace.py.html
 examples/hungry_horace.ctl
 examples/hungry_horace.ref
 examples/hungry_horace.t2s
 man/man1/bin2sna.py.1
 man/man1/bin2tap.py.1
+man/man1/rzxinfo.py.1
+man/man1/rzxplay.py.1
 man/man1/skool2asm.py.1
 man/man1/skool2bin.py.1
 man/man1/skool2ctl.py.1
 man/man1/skool2html.py.1
 man/man1/sna2ctl.py.1
 man/man1/sna2img.py.1
 man/man1/sna2skool.py.1
@@ -147,16 +159,19 @@
 skoolkit/kbtracer.py
 skoolkit/loadsample.py
 skoolkit/loadtracer.py
 skoolkit/opcodes.py
 skoolkit/pagingtracer.py
 skoolkit/pngwriter.py
 skoolkit/refparser.py
+skoolkit/rzxinfo.py
+skoolkit/rzxplay.py
 skoolkit/simtables.py
 skoolkit/simulator.py
+skoolkit/simutils.py
 skoolkit/skool2asm.py
 skoolkit/skool2bin.py
 skoolkit/skool2ctl.py
 skoolkit/skool2html.py
 skoolkit/skoolasm.py
 skoolkit/skoolctl.py
 skoolkit/skoolhtml.py
@@ -180,14 +195,16 @@
 skoolkit.egg-info/PKG-INFO
 skoolkit.egg-info/SOURCES.txt
 skoolkit.egg-info/dependency_links.txt
 skoolkit.egg-info/top_level.txt
 skoolkit/resources/128-0.rom
 skoolkit/resources/128-1.rom
 skoolkit/resources/48.rom
+skoolkit/resources/plus2-0.rom
+skoolkit/resources/plus2-1.rom
 skoolkit/resources/skoolkit-dark.css
 skoolkit/resources/skoolkit-green.css
 skoolkit/resources/skoolkit-plum.css
 skoolkit/resources/skoolkit-wide.css
 skoolkit/resources/skoolkit.css
 tests/macrotest.py
 tests/skoolkittest.py
@@ -198,14 +215,16 @@
 tests/test_cmiosimulator.py
 tests/test_ctlparser.py
 tests/test_disassembler.py
 tests/test_graphics.py
 tests/test_image.py
 tests/test_kbtracer.py
 tests/test_refparser.py
+tests/test_rzxinfo.py
+tests/test_rzxplay.py
 tests/test_simulator.py
 tests/test_skool2asm.py
 tests/test_skool2bin.py
 tests/test_skool2ctl.py
 tests/test_skool2html.py
 tests/test_skoolasm.py
 tests/test_skoolctl.py
```

### Comparing `skoolkit-9.1/sna2ctl.py` & `skoolkit-9.2/sna2ctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/sna2img.py` & `skoolkit-9.2/sna2img.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/sna2skool.py` & `skoolkit-9.2/sna2skool.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/snapinfo.py` & `skoolkit-9.2/snapinfo.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/snapmod.py` & `skoolkit-9.2/snapmod.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tap2sna.py` & `skoolkit-9.2/tap2sna.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tapinfo.py` & `skoolkit-9.2/tapinfo.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/macrotest.py` & `skoolkit-9.2/tests/macrotest.py`

 * *Files 0% similar despite different names*

```diff
@@ -2013,14 +2013,33 @@
         self.assertEqual(banks[3][0], 131)
         self.assertEqual(banks[4][0], 132)
         self.assertEqual(banks[5][0], 133)
         self.assertEqual(banks[6][0], 134)
         self.assertEqual(banks[7][0], 135)
         self.assertEqual(writer.expand('#FORMAT(7ffd={sim[7ffd]})'), '7ffd=7')
 
+    def test_macro_sim_128k_rom_switching_with_intervening_bank_macro(self):
+        skool = """
+            @start
+            @bank=0
+            ; Routine
+            c40000 LD BC,$7FFD
+             40003 LD D,16
+             40005 OUT (C),D   ; Page in ROM 1
+             40007 RET
+
+            ; Another routine
+            c40008 LD A,(1)    ; Opcode at address 1 in ROM 1 is 175 (XOR A)
+             40011 RET
+        """
+        writer = self._get_writer(skool=skool)
+        writer.expand('#SIM(start=40000,stop=40007) #BANK1 #SIM(start=40008,stop=40011)')
+        self.assertEqual(writer.expand('#PEEK1'), '175')
+        self.assertEqual(writer.expand('#FORMAT(A={sim[A]})'), 'A=175')
+
     def test_macro_sim_128k_port_7ffd_saved_and_restored(self):
         skool = """
             @start
             @bank=0
             ; Disable paging
             c32768 LD BC,$7FFD
              32771 LD A,32
```

### Comparing `skoolkit-9.1/tests/skoolkittest.py` & `skoolkit-9.2/tests/skoolkittest.py`

 * *Files 6% similar despite different names*

```diff
@@ -8,26 +8,29 @@
 import tempfile
 from textwrap import dedent
 import zlib
 from unittest import TestCase
 
 SKOOLKIT_HOME = abspath(dirname(dirname(__file__)))
 sys.path.insert(0, SKOOLKIT_HOME)
-from skoolkit import (bin2sna, bin2tap, sna2img, skool2asm, skool2bin,
-                      skool2ctl, skool2html, sna2ctl, sna2skool, snapinfo,
-                      snapmod, tap2sna, tapinfo, trace)
+from skoolkit import (bin2sna, bin2tap, rzxinfo, rzxplay, sna2img, skool2asm,
+                      skool2bin, skool2ctl, skool2html, sna2ctl, sna2skool,
+                      snapinfo, snapmod, tap2sna, tapinfo, trace)
 
 Z80_REGISTERS = {
     'a': 0, 'f': 1, 'bc': 2, 'c': 2, 'b': 3, 'hl': 4, 'l': 4, 'h': 5,
     'sp': 8, 'i': 10, 'r': 11, 'de': 13, 'e': 13, 'd': 14, '^bc': 15,
     '^c': 15, '^b': 16, '^de': 17, '^e': 17, '^d': 18, '^hl': 19,
     '^l': 19, '^h': 20, '^a': 21, '^f': 22, 'iy': 23, 'ix': 25,
     'pc': 32
 }
 
+def as_dword(num):
+    return (num % 256, (num >> 8) % 256, (num >> 16) % 256, (num >> 24) % 256)
+
 def get_parity(data):
     parity = 0
     for b in data:
         parity ^= b
     return parity
 
 def create_header_block(title='', start=0, length=0, data_type=3):
@@ -235,14 +238,113 @@
                     i += 2
                 else:
                     block += [b, c]
             else:
                 block.append(b)
         return block
 
+class RZX:
+    def __init__(self, major=0, minor=13):
+        self.major = major
+        self.minor = minor
+        self.creator = ()
+        self.security = ()
+        self.signature = ()
+        self.snapshots = []
+
+    def set_creator(self, creator_id='Nobody', major=1, minor=0, custom_data=()):
+        b_len = 29 + len(custom_data)
+        creator_b = [ord(c) for c in creator_id[:20]]
+        creator_b += [0] * (20 - len(creator_b))
+        self.creator = [
+            0x10,             # Block ID
+            *as_dword(b_len), # Block length
+            *creator_b,       # Creator ID
+            major % 256, major // 256,
+            minor % 256, minor // 256,
+            *custom_data
+        ]
+
+    def set_security(self, key_id=0, week_code=0):
+        self.security = [
+            0x20,                # Block ID
+            13, 0, 0, 0,         # Block length
+            *as_dword(key_id),
+            *as_dword(week_code)
+        ]
+
+    def set_signature(self, r=(), s=()):
+        b_len = 5 + len(r) + len(s)
+        self.signature = [
+            0x21,            # Block ID
+            *as_dword(b_len) # Block length
+        ]
+        self.signature.extend(r)
+        self.signature.extend(s)
+
+    def add_snapshot(self, data=None, ext=None, frames=None, flags=0, tstates=0, io_flags=2):
+        if data:
+            ext_b = [ord(c) for c in ext[:4]]
+            ext_b += [0] * (4 - len(ext_b))
+            s_len = len(data)
+            if flags & 2:
+                s_data = zlib.compress(bytes(data), 9)
+            else:
+                s_data = data
+            b_len = 17 + len(s_data)
+            s_block = [
+                0x30,             # Block ID
+                *as_dword(b_len), # Block length
+                *as_dword(flags), # Flags
+                *ext_b,
+                *as_dword(s_len)  # Uncompressed snapshot length
+            ]
+            s_block.extend(s_data)
+        else:
+            s_block = ()
+
+        if frames is None:
+            frames = [(1, 1, [0])]
+        if frames:
+            io_frames = []
+            for nf, (fc, ic, readings) in enumerate(frames, 1):
+                io_frames.extend((fc % 256, fc // 256, ic % 256, ic // 256))
+                io_frames.extend(readings)
+            if io_flags & 2:
+                io_frames = zlib.compress(bytes(io_frames), 9)
+            b_len = 18 + len(io_frames)
+            io_block = [
+                0x80,               # Block ID
+                *as_dword(b_len),   # Block length
+                *as_dword(nf),      # Number of frames
+                0,                  # Reserved
+                *as_dword(tstates), # Initial T-states
+                *as_dword(io_flags) # Flags
+            ]
+            io_block.extend(io_frames)
+        else:
+            io_block = ()
+
+        self.snapshots.append((s_block, io_block))
+
+    def data(self):
+        data = [
+            82, 90, 88, 33, # RZX!
+            self.major,
+            self.minor,
+            0, 0, 0, 0      # Flags
+        ]
+        data.extend(self.creator)
+        data.extend(self.security)
+        data.extend(self.signature)
+        for snapshot, input_recording in self.snapshots:
+            data.extend(snapshot)
+            data.extend(input_recording)
+        return data
+
 class SkoolKitTestCase(TestCase):
     stdout_binary = False
 
     def setUp(self):
         self.longMessage = True
         self.maxDiff = None
         self.stdin = sys.stdin
@@ -322,14 +424,17 @@
         ini = "[skoolkit]\n{}=:{}".format(key, value.replace('*', module_name))
         self.write_text_file(ini, 'skoolkit.ini')
         invalidate_caches()
 
     def write_stdin(self, contents):
         sys.stdin = StdIn(contents)
 
+    def write_rzx_file(self, rzx):
+        return self.write_bin_file(rzx.data(), suffix='.rzx')
+
     def _get_z80_ram_block(self, data, compress, page=None):
         if compress:
             block = []
             prev_b = None
             count = 0
             for b in data:
                 if b == prev_b or prev_b is None:
@@ -402,15 +507,15 @@
         header[24] = registers.get('IXh', 0)
         header[25] = registers.get('IYl', 0)
         header[26] = registers.get('IYh', 0)
         header[27] = registers.get('iff1', 0)
         header[28] = registers.get('iff2', 0)
         header[29] = (header[29] & 0xFC) | registers.get('im', 0)
 
-    def write_z80(self, ram, version=3, compress=False, machine_id=0, modify=False, out_7ffd=0, pages={}, header=None, registers=None, ay=None):
+    def write_z80(self, ram, version=3, compress=False, machine_id=0, modify=False, out_7ffd=0, pages={}, header=None, registers=None, ay=None, ret_data=False):
         model = 1
         if version == 1:
             if header is None:
                 header = [0] * 30
                 header[6] = 255 # Set PC > 0 to indicate a v1 Z80 snapshot
                 if compress:
                     header[12] |= 32 # Signal that the RAM data block is compressed
@@ -447,18 +552,20 @@
                 if ay:
                     header[38:38 + len(ay)] = ay
             z80 = header[:]
             if registers:
                 self._set_z80_registers(z80, version, registers)
             for bank in sorted(banks):
                 z80 += self._get_z80_ram_block(banks[bank], compress, bank + 3)
+        if ret_data:
+            return model, z80
         return model, self.write_bin_file(z80, suffix='.z80')
 
-    def write_z80_file(self, header, ram, version=3, compress=False, machine_id=0, pages={}, registers=None, ay=None):
-        return self.write_z80(ram, version, compress, machine_id, pages=pages, header=header, registers=registers, ay=ay)[1]
+    def write_z80_file(self, header, ram, version=3, compress=False, machine_id=0, modify=False, out7ffd=0, pages={}, registers=None, ay=None, ret_data=False):
+        return self.write_z80(ram, version, compress, machine_id, modify, out7ffd, pages, header, registers, ay, ret_data)[1]
 
     def _get_szx_header(self, machine_id=1, ch7ffd=0, specregs=True, border=0):
         header = [90, 88, 83, 84] # ZXST
         header.extend((1, 4)) # Version 1.4
         header.append(machine_id) # 0=16K, 1=48K, 2+=128K
         header.append(0) # Flags
         if specregs:
@@ -485,15 +592,15 @@
         size = len(ram) + 3
         ramp.extend((size % 256, size // 256, 0, 0))
         ramp.extend((1 if compress else 0, 0))
         ramp.append(page)
         ramp.extend(ram)
         return ramp
 
-    def write_szx(self, ram, compress=True, machine_id=1, ch7ffd=0, pages={}, registers=(), border=0, keyb=False, issue2=0, ay=None):
+    def write_szx(self, ram, compress=True, machine_id=1, ch7ffd=0, pages={}, registers=(), border=0, keyb=False, issue2=0, ay=None, blocks=(), ret_data=False):
         szx = self._get_szx_header(machine_id, ch7ffd, border=border)
         if keyb:
             szx.extend((75, 69, 89, 66)) # KEYB
             szx.extend((5, 0, 0, 0)) # Size
             szx.extend((issue2, 0, 0, 0)) # dwFlags
             szx.append(0) # chKeyboardJoystick
         if ay:
@@ -515,16 +622,20 @@
             else:
                 # 128K
                 rampages[ch7ffd & 7] = self._get_zxstrampage(ch7ffd & 7, compress, ram[32768:])
                 for bank, data in pages.items():
                     rampages[bank] = self._get_zxstrampage(bank, compress, data)
                 for bank in set(range(8)) - set(rampages):
                     rampages[bank] = self._get_zxstrampage(bank, compress, [0] * 16384)
+        for block in blocks:
+            szx.extend(block)
         for bank in sorted(rampages):
             szx.extend(rampages[bank])
+        if ret_data:
+            return szx
         return self.write_bin_file(szx, suffix='.szx')
 
     def _run_skoolkit_command(self, cmd, args, catch_exit):
         self.clear_streams()
         if isinstance(args, str):
             args = args.split()
         if catch_exit is None:
@@ -537,14 +648,20 @@
 
     def run_bin2sna(self, args='', catch_exit=None):
         return self._run_skoolkit_command(bin2sna.main, args, catch_exit)
 
     def run_bin2tap(self, args='', catch_exit=None):
         return self._run_skoolkit_command(bin2tap.main, args, catch_exit)
 
+    def run_rzxinfo(self, args='', catch_exit=None):
+        return self._run_skoolkit_command(rzxinfo.main, args, catch_exit)
+
+    def run_rzxplay(self, args='', catch_exit=None):
+        return self._run_skoolkit_command(rzxplay.main, args, catch_exit)
+
     def run_sna2img(self, args='', catch_exit=None):
         return self._run_skoolkit_command(sna2img.main, args, catch_exit)
 
     def run_skool2asm(self, args='', catch_exit=None):
         return self._run_skoolkit_command(skool2asm.main, args, catch_exit)
 
     def run_skool2bin(self, args='', catch_exit=None):
```

### Comparing `skoolkit-9.1/tests/test_audio.py` & `skoolkit-9.2/tests/test_audio.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_basic.py` & `skoolkit-9.2/tests/test_basic.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_bin2sna.py` & `skoolkit-9.2/tests/test_bin2sna.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_bin2tap.py` & `skoolkit-9.2/tests/test_bin2tap.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_cmiosimulator.py` & `skoolkit-9.2/tests/test_cmiosimulator.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_ctlparser.py` & `skoolkit-9.2/tests/test_ctlparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_disassembler.py` & `skoolkit-9.2/tests/test_disassembler.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_graphics.py` & `skoolkit-9.2/tests/test_graphics.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_image.py` & `skoolkit-9.2/tests/test_image.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_kbtracer.py` & `skoolkit-9.2/tests/test_kbtracer.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 from io import StringIO
 from textwrap import dedent
 
 from skoolkittest import SkoolKitTestCase
 from skoolkit import SkoolKitError
 from skoolkit.kbtracer import KeyboardTracer
-from skoolkit.simulator import Simulator, PC, T
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import PC, T
 
 KEYS = {
     '1': (0xF7, 0b11111110),
     '2': (0xF7, 0b11111101),
     '3': (0xF7, 0b11111011),
     '4': (0xF7, 0b11110111),
     '5': (0xF7, 0b11101111),
```

### Comparing `skoolkit-9.1/tests/test_refparser.py` & `skoolkit-9.2/tests/test_refparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_simulator.py` & `skoolkit-9.2/tests/test_simulator.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 from skoolkittest import SkoolKitTestCase
-from skoolkit.simulator import (Simulator,
-                                A, F, B, C, D, E, H, L, IXh, IXl, IYh, IYl, SP, I, R,
-                                xA, xF, xB, xC, xD, xE, xH, xL, PC, T)
-from skoolkit.simulator import REGISTERS as SIMULATOR_REGISTERS
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import (REGISTERS as SIMULATOR_REGISTERS, A, F, B, C, D,
+                               E, H, L, IXh, IXl, IYh, IYl, SP, I, R, xA, xF,
+                               xB, xC, xD, xE, xH, xL, PC, T, IFF, IM)
 
 REGISTER_NAMES = {v: r for r, v in SIMULATOR_REGISTERS.items()}
 
 REGISTERS = (('B', B), ('C', C), ('D', D), ('E', E), ('H', H), ('L', L), ('(HL)', -1), ('A', A))
 
 REGISTER_PAIRS = (('BC', B, C), ('DE', D, E), ('HL', H, L), ('SP', 0, 0))
 
@@ -69,17 +69,17 @@
                     reg_new[reg_name] = v
             self.assertEqual(reg_new, reg_exp, f"Register mismatch for '{inst}' ({data_hex}); input: {regvals}")
         if sna_out:
             actual_memory = {a: simulator.memory[a] for a in sna_out}
             self.assertEqual(actual_memory, sna_out, f"Memory mismatch for '{inst}' ({data_hex}); input: {regvals}")
         if state_out:
             if 'im' in state_out:
-                self.assertEqual(simulator.imode, state_out['im'])
+                self.assertEqual(simulator.registers[IM], state_out['im'])
             if 'iff' in state_out:
-                self.assertEqual(simulator.iff, state_out['iff'])
+                self.assertEqual(simulator.registers[IFF], state_out['iff'])
 
     def _test_arithmetic(self, op, opcode1, opcode2, *specs):
         simulator = Simulator([0] * 65536)
         registers = simulator.registers
         memory = simulator.memory
 
         if op in ('AND', 'CP', 'OR', 'SUB', 'XOR'):
@@ -1919,24 +1919,28 @@
             self._test_instruction(simulator, operation, data, timing, reg_out, start=start, end=end)
 
     def test_djnz_fast(self):
         simulator = Simulator([0] * 65536, config={'fast_djnz': True})
         registers = simulator.registers
         start = 35732
 
-        for offset, b_in, b_out, timing, r_out, end in (
-                (-2, 100, 0,   1295, 100, start + 2),
-                (-2, 1,   0,   8,    1,   start + 2),
-                (-2, 0,   0,   3323, 0,   start + 2),
-                (-3, 100, 99,  13,   1,   start - 1),
-                (-3, 1,   0,   8,    1,   start + 2),
-                (-3, 0,   255, 13,   1,   start - 1),
+        for offset, iff, b_in, b_out, timing, r_out, end in (
+                (-2, 0, 100, 0,   1295, 100, start + 2),
+                (-2, 0, 1,   0,   8,    1,   start + 2),
+                (-2, 0, 0,   0,   3323, 0,   start + 2),
+                (-2, 1, 100, 99,  13,   1,   start),
+                (-2, 1, 1,   0,   8,    1,   start + 2),
+                (-2, 1, 0,   255, 13,   1,   start),
+                (-3, 0, 100, 99,  13,   1,   start - 1),
+                (-3, 0, 1,   0,   8,    1,   start + 2),
+                (-3, 0, 0,   255, 13,   1,   start - 1),
         ):
             operation = f'DJNZ ${start + 2 + offset:04X}'
             data = (16, offset & 0xFF)
+            registers[IFF] = iff
             registers[B] = b_in
             registers[R] = 0
             reg_out = {B: b_out, R: r_out}
             self._test_instruction(simulator, operation, data, timing, reg_out, start=start, end=end)
 
     def test_di(self):
         simulator = Simulator([0] * 65536, state={'iff': 1})
@@ -2216,19 +2220,19 @@
         memory = simulator.memory
         data = (0xED, 0xB8)
         start = 30000
         at_hl = 250
 
         for bc_in, bc_out, de_in, de_out, hl_in, hl_out, f_out, r_out, timing, end in (
                 #                                     SZ5H3PNC
-                (52, 1, 30051, 30000, 40000, 39949, 0b00100100, 102,    1066, start),     # 0xB8 overwritten
+                (52, 1, 30051, 30000, 40000, 39949, 0b00100100, 102,    1071, start),     # 0xB8 overwritten
                 (51, 0, 30051, 30000, 40000, 39949, 0b00101000, 102,    1066, start + 2), # 0xB8 overwritten
                 (50, 0, 30051, 30001, 40000, 39950, 0b00101000, 100,    1045, start + 2),
                 ( 1, 0, 30051, 30050, 40000, 39999, 0b00101000,   2,      16, start + 2),
-                ( 0, 1, 29999, 30000, 29999, 30000, 0b00100100, 126, 1376230, start),     # 0xB8 overwritten
+                ( 0, 1, 29999, 30000, 29999, 30000, 0b00100100, 126, 1376235, start),     # 0xB8 overwritten
         ):
             registers[B] = bc_in // 256
             registers[C] = bc_in % 256
             registers[D] = de_in // 256
             registers[E] = de_in % 256
             registers[H] = hl_in // 256
             registers[L] = hl_in % 256
@@ -2257,22 +2261,25 @@
         simulator = Simulator([0] * 65536, config={'fast_ldir': True})
         registers = simulator.registers
         memory = simulator.memory
         data = (0xED, 0xB0)
         start = 30000
         at_hl = 250
 
-        for bc_in, bc_out, de_in, de_out, hl_in, hl_out, f_out, r_out, timing, end in (
-                #                                     SZ5H3PNC
-                (52, 1, 29950, 30001, 40000, 40051, 0b00100100, 102,    1066, start),     # 0xED overwritten
-                (51, 0, 29950, 30001, 40000, 40051, 0b00101000, 102,    1066, start + 2), # 0xED overwritten
-                (50, 0, 29950, 30000, 40000, 40050, 0b00101000, 100,    1045, start + 2),
-                ( 1, 0, 29950, 29951, 40000, 40001, 0b00101000,   2,      16, start + 2),
-                ( 0, 1, 30002, 30001, 30002, 30001, 0b00100100, 126, 1376230, start),     # 0xED overwritten
+        for iff, bc_in, bc_out, de_in, de_out, hl_in, hl_out, f_out, r_out, timing, end in (
+                #                                         SZ5H3PNC
+                (0, 52,  1, 29950, 30001, 40000, 40051, 0b00100100, 102,    1071, start),     # 0xED overwritten
+                (0, 51,  0, 29950, 30001, 40000, 40051, 0b00101000, 102,    1066, start + 2), # 0xED overwritten
+                (0, 50,  0, 29950, 30000, 40000, 40050, 0b00101000, 100,    1045, start + 2),
+                (0,  1,  0, 29950, 29951, 40000, 40001, 0b00101000,   2,      16, start + 2),
+                (0,  0,  1, 30002, 30001, 30002, 30001, 0b00100100, 126, 1376235, start),     # 0xED overwritten
+                (1, 50, 49, 50000, 50001, 40000, 40001, 0b00100100,   2,      21, start),
+                (1,  1,  0, 50000, 50001, 40000, 40001, 0b00101000,   2,      16, start + 2),
         ):
+            registers[IFF] = iff
             registers[B] = bc_in // 256
             registers[C] = bc_in % 256
             registers[D] = de_in // 256
             registers[E] = de_in % 256
             registers[H] = hl_in // 256
             registers[L] = hl_in % 256
             registers[R] = 0
@@ -2843,28 +2850,28 @@
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertTrue(accepted)
         self.assertEqual(simulator.registers[T], 13)
         self.assertEqual(simulator.registers[PC], 56)
         self.assertEqual(simulator.registers[R], 1)
         self.assertEqual(simulator.registers[SP], sp - 2)
         self.assertEqual([pc % 256, pc // 256], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 0)
+        self.assertEqual(simulator.registers[IFF], 0)
 
     def test_accept_interrupt_mode_1(self):
         pc = 40000
         sp = 50000
         simulator = Simulator([0] * 65536, {'PC': pc, 'SP': sp}, {'iff': 1, 'im': 1})
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertTrue(accepted)
         self.assertEqual(simulator.registers[T], 13)
         self.assertEqual(simulator.registers[PC], 56)
         self.assertEqual(simulator.registers[R], 1)
         self.assertEqual(simulator.registers[SP], sp - 2)
         self.assertEqual([pc % 256, pc // 256], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 0)
+        self.assertEqual(simulator.registers[IFF], 0)
 
     def test_accept_interrupt_mode_2(self):
         memory = [0] * 65536
         iaddr = 40000
         i = 64
         vaddr = 255 + 256 * i
         memory[vaddr:vaddr + 2] = (iaddr % 256, iaddr // 256)
@@ -2874,53 +2881,53 @@
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertTrue(accepted)
         self.assertEqual(simulator.registers[T], 19)
         self.assertEqual(simulator.registers[PC], iaddr)
         self.assertEqual(simulator.registers[R], 1)
         self.assertEqual(simulator.registers[SP], sp - 2)
         self.assertEqual([pc % 256, pc // 256], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 0)
+        self.assertEqual(simulator.registers[IFF], 0)
 
     def test_accept_interrupt_after_ei(self):
         memory = [0] * 65536
         pc = 30000
         sp = 40000
         memory[pc - 1] = 0xFB # EI
         simulator = Simulator(memory, {'PC': pc, 'SP': sp}, {'iff': 1, 'im': 1})
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertFalse(accepted)
         self.assertEqual(simulator.registers[T], 0)
         self.assertEqual(simulator.registers[PC], pc)
         self.assertEqual(simulator.registers[R], 0)
         self.assertEqual(simulator.registers[SP], sp)
         self.assertEqual([0, 0], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 1)
+        self.assertEqual(simulator.registers[IFF], 1)
 
     def test_accept_interrupt_after_dd_prefix(self):
         memory = [0] * 65536
         pc = 30000
         sp = 40000
         memory[pc - 1] = 0xDD
         simulator = Simulator(memory, {'PC': pc, 'SP': sp}, {'iff': 1, 'im': 1})
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertFalse(accepted)
         self.assertEqual(simulator.registers[T], 0)
         self.assertEqual(simulator.registers[PC], pc)
         self.assertEqual(simulator.registers[R], 0)
         self.assertEqual(simulator.registers[SP], sp)
         self.assertEqual([0, 0], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 1)
+        self.assertEqual(simulator.registers[IFF], 1)
 
     def test_accept_interrupt_after_fd_prefix(self):
         memory = [0] * 65536
         pc = 30000
         sp = 40000
         memory[pc - 1] = 0xFD
         simulator = Simulator(memory, {'PC': pc, 'SP': sp}, {'iff': 1, 'im': 1})
         accepted = simulator.accept_interrupt(simulator.registers, simulator.memory, pc - 1)
         self.assertFalse(accepted)
         self.assertEqual(simulator.registers[T], 0)
         self.assertEqual(simulator.registers[PC], pc)
         self.assertEqual(simulator.registers[R], 0)
         self.assertEqual(simulator.registers[SP], sp)
         self.assertEqual([0, 0], simulator.memory[sp - 2:sp])
-        self.assertEqual(simulator.iff, 1)
+        self.assertEqual(simulator.registers[IFF], 1)
```

### Comparing `skoolkit-9.1/tests/test_skool2asm.py` & `skoolkit-9.2/tests/test_skool2asm.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skool2bin.py` & `skoolkit-9.2/tests/test_skool2bin.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skool2ctl.py` & `skoolkit-9.2/tests/test_skool2ctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skool2html.py` & `skoolkit-9.2/tests/test_skool2html.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skoolasm.py` & `skoolkit-9.2/tests/test_skoolasm.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skoolctl.py` & `skoolkit-9.2/tests/test_skoolctl.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skoolhtml.py` & `skoolkit-9.2/tests/test_skoolhtml.py`

 * *Files 0% similar despite different names*

```diff
@@ -1586,14 +1586,37 @@
         fname = 'sound.wav'
         macro = f'#AUDIO4({fname})(32768,32781)'
         exp_src = f'../audio/{fname}'
         exp_path = f'audio/{fname}'
         exp_delays = [2636] * 63
         self._test_audio_macro(writer, macro, exp_src, exp_path, exp_delays)
 
+    def test_macro_audio_with_code_simulation_modifies_internal_memory_snapshot(self):
+        skool = """
+            ; Beep
+            c32768 LD C,16
+            *32770 OUT (254),A
+             32772 XOR 16
+             32774 LD B,20
+             32776 DJNZ 32776
+             32778 DEC C
+             32779 JR NZ,32770
+             32781 LD HL,65535
+             32784 LD (49152),HL
+             32787 RET
+        """
+        writer = self._get_writer(skool=skool, mock_file_info=True)
+        fname = 'sound.wav'
+        macro = f'#AUDIO4({fname})(32768,32787)'
+        exp_src = f'../audio/{fname}'
+        exp_path = f'audio/{fname}'
+        exp_delays = [296] * 15
+        self._test_audio_macro(writer, macro, exp_src, exp_path, exp_delays)
+        self.assertEqual([255, 255], writer.snapshot[49152:49154])
+
     def test_macro_audio_with_code_simulation_executing_interrupts(self):
         skool = """
             ; Beep with interrupts enabled
             @rom
             c40000 EI          ; [4]
              40001 LD L,4      ; [7]
             *40003 OUT (254),A ; [11]
@@ -2316,14 +2339,23 @@
             Frame([[Udg(56, char1)]], scale=2),
             Frame([[Udg(7, char2)]], scale=2),
             Frame([[Udg(56, char3)]], scale=2),
             Frame([[Udg(56, char4)]], scale=3, x=1, y=2, width=16, height=16)
         ]
         self._check_animated_image(writer.image_writer, exp_frames)
 
+    def test_macro_font_frame_is_evaluated_immediately(self):
+        snapshot = [1, 2, 3, 4, 5, 6, 7, 8] # ' ' (space)
+        fname = 'space'
+        message = ' '
+        macros = f'#FONT:({message})0(*frame)#POKES(0,255)#UDGARRAY*frame({fname})'
+        exp_image_path = f'{UDGDIR}/{fname}.png'
+        exp_udgs = [[Udg(56, [1, 2, 3, 4, 5, 6, 7, 8])]]
+        self._test_image_macro(snapshot, macros, exp_image_path, exp_udgs)
+
     def test_macro_font_alt_text_without_fname(self):
         snapshot = [0] * 8
         fname = 'font'
         alt = 'Space'
         macro = '#FONT:( )0(|{})'.format(alt)
         exp_image_path = '{}/{}.png'.format(FONTDIR, fname)
         self._test_image_macro(snapshot, macro, exp_image_path, alt=alt)
@@ -3966,14 +3998,22 @@
             Frame([[Udg(1, snapshot[0:2048:256])]], scale=1),
             Frame([[Udg(2, snapshot[1:2048:256])]], scale=1),
             Frame([[Udg(3, snapshot[2:2048:256])]], scale=1),
             Frame([[Udg(4, snapshot[3:2048:256])]], scale=2, x=2, y=3, width=8, height=8)
         ]
         self._check_animated_image(writer.image_writer, exp_frames)
 
+    def test_macro_scr_frame_is_evaluated_immediately(self):
+        snapshot = [1] * 23296
+        fname = 'scr'
+        macros = f'#SCR(2,w=1,h=1)(*frame)#POKES(16384,255)#UDGARRAY*frame({fname})'
+        exp_image_path = f'{UDGDIR}/{fname}.png'
+        exp_udgs = [[Udg(1, [1] * 8)]]
+        self._test_image_macro(snapshot, macros, exp_image_path, exp_udgs)
+
     def test_macro_scr_alt_text_without_fname(self):
         snapshot = [0] * 23296
         alt = 'An awesome screenshot'
         macro = '#SCR(|{})'.format(alt)
         exp_image_path = '{}/scr.png'.format(SCRDIR)
         self._test_image_macro(snapshot, macro, exp_image_path, alt=alt)
 
@@ -4316,14 +4356,22 @@
             Frame([[Udg(56, udg1)]], scale=4),
             Frame([[Udg(56, udg2)]], scale=4),
             Frame([[Udg(56, udg3)]], scale=4),
             Frame([[Udg(4, udg4, udg1)]], scale=6, mask=1, x=5, y=6, width=32, height=32)
         ]
         self._check_animated_image(writer.image_writer, exp_frames)
 
+    def test_macro_udg_frame_is_evaluated_immediately(self):
+        snapshot = [128] * 8
+        fname = 'udg'
+        macros = f'#UDG0(*frame)#POKES(0,255)#UDGARRAY*frame({fname})'
+        exp_image_path = f'{UDGDIR}/{fname}.png'
+        exp_udgs = [[Udg(56, [128] * 8)]]
+        self._test_image_macro(snapshot, macros, exp_image_path, exp_udgs, scale=4)
+
     def test_macro_udg_alt_text_with_fname(self):
         snapshot = [0] * 8
         fname = 'foo'
         alt = 'bar'
         macro = '#UDG0({}|{})'.format(fname, alt)
         exp_image_path = '{}/{}.png'.format(UDGDIR, fname)
         self._test_image_macro(snapshot, macro, exp_image_path, alt=alt)
@@ -4686,14 +4734,22 @@
 
         frame1 = Frame([[udg1]], 2, delay=delay1)
         frame2 = Frame([[udg2]], 1, delay=delay1, x_offset=2, y_offset=3) # Same delay as frame1
         frame3 = Frame([[udg3]], 2, delay=17)                             # Offsets revert to (0, 0)
         exp_frames = [frame1, frame2, frame3]
         self._check_animated_image(writer.image_writer, exp_frames)
 
+    def test_macro_udgarray_frame_is_evaluated_immediately(self):
+        snapshot = [128] * 8
+        fname = 'udgarray'
+        macros = f'#UDGARRAY1(0)(*frame)#POKES(0,255)#UDGARRAY*frame({fname})'
+        exp_image_path = f'{UDGDIR}/{fname}.png'
+        exp_udgs = [[Udg(56, [128] * 8)]]
+        self._test_image_macro(snapshot, macros, exp_image_path, exp_udgs)
+
     def test_macro_udgarray_frames_with_replacement_fields(self):
         udg1, udg2 = Udg(23, [101] * 8), Udg(47, [35] * 8)
         snapshot = udg1.data + udg2.data
         writer = self._get_writer(snapshot=snapshot, mock_file_info=True)
         writer.expand('#UDGARRAY1;0,23(*foo)', ASMDIR)
         writer.expand('#UDGARRAY1,,1;8,47(*bar)', ASMDIR)
         writer.expand('#LET(d=50) #LET(x=1) #LET(y=2)')
@@ -4994,14 +5050,22 @@
 
         frame1 = Frame([[udg1]], 2, delay=delay1)
         frame2 = Frame([[udg2]], 1, delay=delay1, x_offset=2, y_offset=3) # Same delay as frame1
         frame3 = Frame([[udg3]], 2, delay=17)                             # Offsets revert to (0, 0)
         exp_frames = [frame1, frame2, frame3]
         self._check_animated_image(writer.image_writer, exp_frames)
 
+    def test_macro_udgs_frame_is_evaluated_immediately(self):
+        snapshot = [1] * 8
+        fname = 'udgs'
+        macros = f'#UDGS1,1(*frame)(#UDG0,2,2(*f) f)#POKES(0,255)#UDGARRAY*frame({fname})'
+        exp_image_path = f'{UDGDIR}/{fname}.png'
+        exp_udgs = [[Udg(2, [1] * 8)]]
+        self._test_image_macro(snapshot, macros, exp_image_path, exp_udgs)
+
     def test_macro_udgs_alt_text(self):
         snapshot = [0] * 8
         fname = 'foo'
         alt = 'bar'
         macro = f'#UDGS1,1({fname}|{alt})(#UDG0(*u) u)'
         exp_image_path = f'{UDGDIR}/{fname}.png'
         self._test_image_macro(snapshot, macro, exp_image_path, alt=alt)
@@ -11114,15 +11178,15 @@
         self.write_component_config('ImageWriter', '*.CustomImageWriter', custom_image_writer)
         page_id = 'Stuff'
         img_fname = 'thing.gif'
         ref = """
             [Page:{}]
             PageContent=#UDG0({})
         """.format(page_id, img_fname)
-        writer = self._get_writer(ref=ref, mock_image_writer=False, mock_file_info=True)
+        writer = self._get_writer(ref=ref, snapshot=[0] * 8, mock_image_writer=False, mock_file_info=True)
         writer.write_page(page_id)
         self.assertEqual(writer.file_info.files['images/udgs/{}'.format(img_fname)], b'hello')
 
     @patch.object(components, 'SK_CONFIG', None)
     def test_custom_image_writer_returning_content(self):
         custom_image_writer = """
             class CustomImageWriter:
@@ -11139,15 +11203,15 @@
         ref = """
             [Page:{0}]
             PageContent=#UDG0({1})
 
             [Template:{0}]
             {{Page[PageContent]}}
         """.format(page_id, img_fname)
-        writer = self._get_writer(ref=ref, mock_image_writer=False)
+        writer = self._get_writer(ref=ref, snapshot=[0] * 8, mock_image_writer=False)
         writer.write_page(page_id)
         self._assert_content_equal('goodbye', '{}.html'.format(page_id))
         img_dir = '{}/{}/{}'.format(self.odir, GAMEDIR, UDGDIR)
         self.assertTrue(isdir(img_dir))
         img_path = '{}/{}'.format(img_dir, img_fname)
         self.assertFalse(isfile(img_path), '{} exists'.format(img_path))
```

### Comparing `skoolkit-9.1/tests/test_skoolkit.py` & `skoolkit-9.2/tests/test_skoolkit.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skoolmacro.py` & `skoolkit-9.2/tests/test_skoolmacro.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_skoolparser.py` & `skoolkit-9.2/tests/test_skoolparser.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_sna2ctl.py` & `skoolkit-9.2/tests/test_sna2ctl.py`

 * *Files 1% similar despite different names*

```diff
@@ -156,14 +156,20 @@
     return {k: v[0] for k, v in COMMANDS[name].items()}
 
 class MockControlFileGenerator:
     def generate_ctls(self, snapshot, start, end, code_map, config):
         return {0: 'i'}
 
 class Sna2CtlTest(SkoolKitTestCase):
+    def _create_rzxplay_map(self, addresses):
+        profile = []
+        for a in addresses:
+            profile.append(f'${a:04X}')
+        return profile
+
     def _create_z80_map(self, addresses):
         bits = []
         map_data = []
         for a in range(65536):
             bits.append('1' if a in addresses else '0')
             if len(bits) == 8:
                 map_data.append(int(''.join(reversed(bits)), 2))
@@ -904,14 +910,17 @@
             exp_error = 'Reading {}: .*100%\x08\x08\x08\x08\n'.format(code_map_file)
         output, error = self.run_sna2ctl('{} {} -o {} {}'.format(option, code_map_file, TEST_MAP_BIN_ORG, binfile))
         match = re.match(exp_error, error)
         self.assertIsNotNone(match)
         self.assertEqual(match.group(), error)
         self.assertEqual(TEST_MAP_CTL_G, output)
 
+    def test_option_m_rzxplay(self):
+        self._test_option_m(self._create_rzxplay_map(TEST_MAP), '--map')
+
     def test_option_m_z80(self):
         self._test_option_m(self._create_z80_map(TEST_MAP), '-m', True)
 
     def test_option_m_fuse(self):
         self._test_option_m(self._create_fuse_profile(TEST_MAP), '--map')
 
     def test_option_m_specemu_log(self):
```

### Comparing `skoolkit-9.1/tests/test_sna2img.py` & `skoolkit-9.2/tests/test_sna2img.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_sna2skool.py` & `skoolkit-9.2/tests/test_sna2skool.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_snapinfo.py` & `skoolkit-9.2/tests/test_snapinfo.py`

 * *Files 1% similar despite different names*

```diff
@@ -7,5184 +7,5182 @@
 00000060: 706f 7274 2053 6b6f 6f6c 4b69 7454 6573  port SkoolKitTes
 00000070: 7443 6173 650a 6672 6f6d 2073 6b6f 6f6c  tCase.from skool
 00000080: 6b69 7420 696d 706f 7274 2053 6b6f 6f6c  kit import Skool
 00000090: 4b69 7445 7272 6f72 2c20 636f 6d70 6f6e  KitError, compon
 000000a0: 656e 7473 2c20 736e 6170 696e 666f 2c20  ents, snapinfo, 
 000000b0: 5645 5253 494f 4e0a 6672 6f6d 2073 6b6f  VERSION.from sko
 000000c0: 6f6c 6b69 742e 636f 6e66 6967 2069 6d70  olkit.config imp
-000000d0: 6f72 7420 434f 4d4d 414e 4453 0a0a 6465  ort COMMANDS..de
-000000e0: 6620 6d6f 636b 5f72 756e 282a 6172 6773  f mock_run(*args
-000000f0: 293a 0a20 2020 2067 6c6f 6261 6c20 7275  ):.    global ru
-00000100: 6e5f 6172 6773 0a20 2020 2072 756e 5f61  n_args.    run_a
-00000110: 7267 7320 3d20 6172 6773 0a0a 6465 6620  rgs = args..def 
-00000120: 6d6f 636b 5f63 6f6e 6669 6728 6e61 6d65  mock_config(name
-00000130: 293a 0a20 2020 2072 6574 7572 6e20 7b6b  ):.    return {k
-00000140: 3a20 765b 305d 2066 6f72 206b 2c20 7620  : v[0] for k, v 
-00000150: 696e 2043 4f4d 4d41 4e44 535b 6e61 6d65  in COMMANDS[name
-00000160: 5d2e 6974 656d 7328 297d 0a0a 636c 6173  ].items()}..clas
-00000170: 7320 4d6f 636b 4261 7369 634c 6973 7465  s MockBasicListe
-00000180: 723a 0a20 2020 2064 6566 206c 6973 745f  r:.    def list_
-00000190: 6261 7369 6328 7365 6c66 2c20 736e 6170  basic(self, snap
-000001a0: 7368 6f74 293a 0a20 2020 2020 2020 2067  shot):.        g
-000001b0: 6c6f 6261 6c20 6d6f 636b 5f62 6173 6963  lobal mock_basic
-000001c0: 5f6c 6973 7465 720a 2020 2020 2020 2020  _lister.        
-000001d0: 6d6f 636b 5f62 6173 6963 5f6c 6973 7465  mock_basic_liste
-000001e0: 7220 3d20 7365 6c66 0a20 2020 2020 2020  r = self.       
-000001f0: 2073 656c 662e 736e 6170 7368 6f74 203d   self.snapshot =
-00000200: 2073 6e61 7073 686f 740a 2020 2020 2020   snapshot.      
-00000210: 2020 7265 7475 726e 2027 4241 5349 4320    return 'BASIC 
-00000220: 444f 4e45 2127 0a0a 636c 6173 7320 4d6f  DONE!'..class Mo
-00000230: 636b 5661 7269 6162 6c65 4c69 7374 6572  ckVariableLister
-00000240: 3a0a 2020 2020 6465 6620 6c69 7374 5f76  :.    def list_v
-00000250: 6172 6961 626c 6573 2873 656c 662c 2073  ariables(self, s
-00000260: 6e61 7073 686f 7429 3a0a 2020 2020 2020  napshot):.      
-00000270: 2020 676c 6f62 616c 206d 6f63 6b5f 7661    global mock_va
-00000280: 7269 6162 6c65 5f6c 6973 7465 720a 2020  riable_lister.  
-00000290: 2020 2020 2020 6d6f 636b 5f76 6172 6961        mock_varia
-000002a0: 626c 655f 6c69 7374 6572 203d 2073 656c  ble_lister = sel
-000002b0: 660a 2020 2020 2020 2020 7365 6c66 2e73  f.        self.s
-000002c0: 6e61 7073 686f 7420 3d20 736e 6170 7368  napshot = snapsh
-000002d0: 6f74 0a20 2020 2020 2020 2072 6574 7572  ot.        retur
-000002e0: 6e20 2756 4152 4941 424c 4553 2044 4f4e  n 'VARIABLES DON
-000002f0: 4521 270a 0a63 6c61 7373 2053 6e61 7069  E!'..class Snapi
-00000300: 6e66 6f54 6573 7428 536b 6f6f 6c4b 6974  nfoTest(SkoolKit
-00000310: 5465 7374 4361 7365 293a 0a20 2020 2064  TestCase):.    d
-00000320: 6566 205f 7465 7374 5f73 6e61 2873 656c  ef _test_sna(sel
-00000330: 662c 2072 616d 2c20 6578 705f 6f75 7470  f, ram, exp_outp
-00000340: 7574 2c20 6f70 7469 6f6e 733d 2727 2c20  ut, options='', 
-00000350: 6374 6c3d 4e6f 6e65 2c20 6374 6c66 696c  ctl=None, ctlfil
-00000360: 6573 3d28 292c 2068 6561 6465 723d 4e6f  es=(), header=No
-00000370: 6e65 2c20 7375 6666 6978 3d27 2e73 6e61  ne, suffix='.sna
-00000380: 2729 3a0a 2020 2020 2020 2020 6966 2068  '):.        if h
-00000390: 6561 6465 7220 6973 204e 6f6e 653a 0a20  eader is None:. 
-000003a0: 2020 2020 2020 2020 2020 2068 6561 6465             heade
-000003b0: 7220 3d20 5b30 5d20 2a20 3237 0a20 2020  r = [0] * 27.   
-000003c0: 2020 2020 2073 6e61 6669 6c65 203d 2073       snafile = s
-000003d0: 656c 662e 7772 6974 655f 6269 6e5f 6669  elf.write_bin_fi
-000003e0: 6c65 2868 6561 6465 7220 2b20 7261 6d2c  le(header + ram,
-000003f0: 2073 7566 6669 783d 7375 6666 6978 290a   suffix=suffix).
-00000400: 2020 2020 2020 2020 6966 2063 746c 206f          if ctl o
-00000410: 7220 6374 6c66 696c 6573 3a0a 2020 2020  r ctlfiles:.    
-00000420: 2020 2020 2020 2020 6966 2063 746c 3a0a          if ctl:.
-00000430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000440: 7072 6566 6978 203d 2073 6e61 6669 6c65  prefix = snafile
-00000450: 5b3a 2d34 5d20 6966 2073 7566 6669 7820  [:-4] if suffix 
-00000460: 696e 2028 272e 6269 6e27 2c20 272e 736e  in ('.bin', '.sn
-00000470: 6127 2c20 272e 737a 7827 2c20 272e 7a38  a', '.szx', '.z8
-00000480: 3027 2920 656c 7365 2073 6e61 6669 6c65  0') else snafile
-00000490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000004a0: 2063 746c 6669 6c65 203d 2073 656c 662e   ctlfile = self.
-000004b0: 7772 6974 655f 7465 7874 5f66 696c 6528  write_text_file(
-000004c0: 6465 6465 6e74 2863 746c 292e 7374 7269  dedent(ctl).stri
-000004d0: 7028 292c 2070 7265 6669 7820 2b20 272e  p(), prefix + '.
-000004e0: 6374 6c27 290a 2020 2020 2020 2020 2020  ctl').          
-000004f0: 2020 2020 2020 6966 206e 6f74 2063 746c        if not ctl
-00000500: 6669 6c65 733a 0a20 2020 2020 2020 2020  files:.         
-00000510: 2020 2020 2020 2020 2020 2063 746c 6669             ctlfi
-00000520: 6c65 7320 3d20 5b63 746c 6669 6c65 5d0a  les = [ctlfile].
-00000530: 2020 2020 2020 2020 2020 2020 7375 6666              suff
-00000540: 6978 203d 2027 7327 2069 6620 6c65 6e28  ix = 's' if len(
-00000550: 6374 6c66 696c 6573 2920 3e20 3120 656c  ctlfiles) > 1 el
-00000560: 7365 2027 270a 2020 2020 2020 2020 2020  se ''.          
-00000570: 2020 6578 705f 6572 726f 7220 3d20 2755    exp_error = 'U
-00000580: 7369 6e67 2063 6f6e 7472 6f6c 2066 696c  sing control fil
-00000590: 657b 7d3a 207b 7d5c 6e27 2e66 6f72 6d61  e{}: {}\n'.forma
-000005a0: 7428 7375 6666 6978 2c20 272c 2027 2e6a  t(suffix, ', '.j
-000005b0: 6f69 6e28 6374 6c66 696c 6573 2929 0a20  oin(ctlfiles)). 
-000005c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000005d0: 2020 2020 2020 2020 2065 7870 5f65 7272           exp_err
-000005e0: 6f72 203d 2027 270a 2020 2020 2020 2020  or = ''.        
-000005f0: 6f75 7470 7574 2c20 6572 726f 7220 3d20  output, error = 
-00000600: 7365 6c66 2e72 756e 5f73 6e61 7069 6e66  self.run_snapinf
-00000610: 6f28 2720 272e 6a6f 696e 2828 6f70 7469  o(' '.join((opti
-00000620: 6f6e 732c 2073 6e61 6669 6c65 2929 290a  ons, snafile))).
-00000630: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00000640: 6572 7445 7175 616c 2865 7272 6f72 2c20  ertEqual(error, 
-00000650: 6578 705f 6572 726f 7229 0a20 2020 2020  exp_error).     
-00000660: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00000670: 7561 6c28 6465 6465 6e74 2865 7870 5f6f  ual(dedent(exp_o
-00000680: 7574 7075 7429 2e6c 7374 7269 7028 275c  utput).lstrip('\
-00000690: 6e27 292e 7273 7472 6970 2829 2c20 6f75  n').rstrip(), ou
-000006a0: 7470 7574 2e72 7374 7269 7028 2929 0a0a  tput.rstrip())..
-000006b0: 2020 2020 6465 6620 5f74 6573 745f 7a38      def _test_z8
-000006c0: 3028 7365 6c66 2c20 6578 705f 6f75 7470  0(self, exp_outp
-000006d0: 7574 2c20 6865 6164 6572 3d4e 6f6e 652c  ut, header=None,
-000006e0: 2072 616d 3d4e 6f6e 652c 2076 6572 7369   ram=None, versi
-000006f0: 6f6e 3d33 2c20 636f 6d70 7265 7373 3d46  on=3, compress=F
-00000700: 616c 7365 2c20 6d61 6368 696e 655f 6964  alse, machine_id
-00000710: 3d30 2c20 7061 6765 733d 4e6f 6e65 293a  =0, pages=None):
-00000720: 0a20 2020 2020 2020 2069 6620 7261 6d20  .        if ram 
-00000730: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00000740: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
-00000750: 2034 3931 3532 0a20 2020 2020 2020 207a   49152.        z
-00000760: 3830 6669 6c65 203d 2073 656c 662e 7772  80file = self.wr
-00000770: 6974 655f 7a38 305f 6669 6c65 2868 6561  ite_z80_file(hea
-00000780: 6465 722c 2072 616d 2c20 7665 7273 696f  der, ram, versio
-00000790: 6e2c 2063 6f6d 7072 6573 732c 206d 6163  n, compress, mac
-000007a0: 6869 6e65 5f69 642c 2070 6167 6573 206f  hine_id, pages o
-000007b0: 7220 7b7d 290a 2020 2020 2020 2020 6f75  r {}).        ou
-000007c0: 7470 7574 2c20 6572 726f 7220 3d20 7365  tput, error = se
-000007d0: 6c66 2e72 756e 5f73 6e61 7069 6e66 6f28  lf.run_snapinfo(
-000007e0: 7a38 3066 696c 6529 0a20 2020 2020 2020  z80file).       
-000007f0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00000800: 6c28 6572 726f 722c 2027 2729 0a20 2020  l(error, '').   
-00000810: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00000820: 4571 7561 6c28 275a 3830 2066 696c 653a  Equal('Z80 file:
-00000830: 207b 7d7b 7d27 2e66 6f72 6d61 7428 7a38   {}{}'.format(z8
-00000840: 3066 696c 652c 2064 6564 656e 7428 6578  0file, dedent(ex
-00000850: 705f 6f75 7470 7574 2929 2c20 6f75 7470  p_output)), outp
-00000860: 7574 290a 0a20 2020 2064 6566 205f 7465  ut)..    def _te
-00000870: 7374 5f73 7a78 2873 656c 662c 2065 7870  st_szx(self, exp
-00000880: 5f6f 7574 7075 742c 2072 6567 6973 7465  _output, registe
-00000890: 7273 3d4e 6f6e 652c 2062 6f72 6465 723d  rs=None, border=
-000008a0: 302c 206b 6579 623d 4661 6c73 652c 2069  0, keyb=False, i
-000008b0: 7373 7565 323d 302c 2072 616d 3d4e 6f6e  ssue2=0, ram=Non
-000008c0: 652c 2063 6f6d 7072 6573 733d 4661 6c73  e, compress=Fals
-000008d0: 652c 206d 6163 6869 6e65 5f69 643d 312c  e, machine_id=1,
-000008e0: 2063 6837 6666 643d 302c 2070 6167 6573   ch7ffd=0, pages
-000008f0: 3d4e 6f6e 652c 2061 793d 4e6f 6e65 293a  =None, ay=None):
-00000900: 0a20 2020 2020 2020 2069 6620 7261 6d20  .        if ram 
-00000910: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00000920: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
-00000930: 2034 3931 3532 0a20 2020 2020 2020 2069   49152.        i
-00000940: 6620 6d61 6368 696e 655f 6964 203e 2031  f machine_id > 1
-00000950: 2061 6e64 2070 6167 6573 2069 7320 4e6f   and pages is No
-00000960: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00000970: 6261 6e6b 203d 2028 302c 2920 2a20 3136  bank = (0,) * 16
-00000980: 3338 340a 2020 2020 2020 2020 2020 2020  384.            
-00000990: 7061 6765 7320 3d20 7b70 3a20 6261 6e6b  pages = {p: bank
-000009a0: 2066 6f72 2070 2069 6e20 2831 2c20 332c   for p in (1, 3,
-000009b0: 2034 2c20 362c 2037 297d 0a20 2020 2020   4, 6, 7)}.     
-000009c0: 2020 2073 7a78 6669 6c65 203d 2073 656c     szxfile = sel
-000009d0: 662e 7772 6974 655f 737a 7828 7261 6d2c  f.write_szx(ram,
-000009e0: 2063 6f6d 7072 6573 732c 206d 6163 6869   compress, machi
-000009f0: 6e65 5f69 642c 2063 6837 6666 642c 2070  ne_id, ch7ffd, p
-00000a00: 6167 6573 2c20 7265 6769 7374 6572 732c  ages, registers,
-00000a10: 2062 6f72 6465 722c 206b 6579 622c 2069   border, keyb, i
-00000a20: 7373 7565 322c 2061 7929 0a20 2020 2020  ssue2, ay).     
-00000a30: 2020 206f 7574 7075 742c 2065 7272 6f72     output, error
-00000a40: 203d 2073 656c 662e 7275 6e5f 736e 6170   = self.run_snap
-00000a50: 696e 666f 2873 7a78 6669 6c65 290a 2020  info(szxfile).  
-00000a60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00000a70: 7445 7175 616c 2865 7272 6f72 2c20 2727  tEqual(error, ''
-00000a80: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00000a90: 7373 6572 7445 7175 616c 2864 6564 656e  ssertEqual(deden
-00000aa0: 7428 6578 705f 6f75 7470 7574 292e 6c73  t(exp_output).ls
-00000ab0: 7472 6970 2829 2c20 6f75 7470 7574 290a  trip(), output).
-00000ac0: 0a20 2020 2064 6566 205f 7465 7374 5f62  .    def _test_b
-00000ad0: 696e 2873 656c 662c 2072 616d 2c20 6578  in(self, ram, ex
-00000ae0: 705f 6f75 7470 7574 2c20 6f70 7469 6f6e  p_output, option
-00000af0: 733d 2727 2c20 6374 6c3d 4e6f 6e65 2c20  s='', ctl=None, 
-00000b00: 7375 6666 6978 3d27 2e62 696e 2729 3a0a  suffix='.bin'):.
-00000b10: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
-00000b20: 7374 5f73 6e61 2872 616d 2c20 6578 705f  st_sna(ram, exp_
-00000b30: 6f75 7470 7574 2c20 6f70 7469 6f6e 732c  output, options,
-00000b40: 2063 746c 2c20 6865 6164 6572 3d5b 5d2c   ctl, header=[],
-00000b50: 2073 7566 6669 783d 7375 6666 6978 290a   suffix=suffix).
-00000b60: 0a20 2020 2064 6566 205f 7465 7374 5f62  .    def _test_b
-00000b70: 6164 5f73 7065 6328 7365 6c66 2c20 6f70  ad_spec(self, op
-00000b80: 7469 6f6e 2c20 6261 645f 7370 6563 2c20  tion, bad_spec, 
-00000b90: 6578 705f 6572 726f 722c 2061 6464 5f73  exp_error, add_s
-00000ba0: 7065 633d 5472 7565 293a 0a20 2020 2020  pec=True):.     
-00000bb0: 2020 2073 6e61 6669 6c65 203d 2073 656c     snafile = sel
-00000bc0: 662e 7772 6974 655f 6269 6e5f 6669 6c65  f.write_bin_file
-00000bd0: 2828 302c 2920 2a20 3439 3137 392c 2073  ((0,) * 49179, s
-00000be0: 7566 6669 783d 272e 736e 6127 290a 2020  uffix='.sna').  
-00000bf0: 2020 2020 2020 7769 7468 2073 656c 662e        with self.
-00000c00: 6173 7365 7274 5261 6973 6573 2853 6b6f  assertRaises(Sko
-00000c10: 6f6c 4b69 7445 7272 6f72 2920 6173 2063  olKitError) as c
-00000c20: 6d3a 0a20 2020 2020 2020 2020 2020 2073  m:.            s
-00000c30: 656c 662e 7275 6e5f 736e 6170 696e 666f  elf.run_snapinfo
-00000c40: 2827 7b7d 207b 7d20 7b7d 272e 666f 726d  ('{} {} {}'.form
-00000c50: 6174 286f 7074 696f 6e2c 2062 6164 5f73  at(option, bad_s
-00000c60: 7065 632c 2073 6e61 6669 6c65 2929 0a20  pec, snafile)). 
-00000c70: 2020 2020 2020 2069 6620 6164 645f 7370         if add_sp
-00000c80: 6563 3a0a 2020 2020 2020 2020 2020 2020  ec:.            
-00000c90: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00000ca0: 2863 6d2e 6578 6365 7074 696f 6e2e 6172  (cm.exception.ar
-00000cb0: 6773 5b30 5d2c 2027 7b7d 3a20 7b7d 272e  gs[0], '{}: {}'.
-00000cc0: 666f 726d 6174 2865 7870 5f65 7272 6f72  format(exp_error
-00000cd0: 2c20 6261 645f 7370 6563 2929 0a20 2020  , bad_spec)).   
-00000ce0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00000cf0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00000d00: 7274 4571 7561 6c28 636d 2e65 7863 6570  rtEqual(cm.excep
-00000d10: 7469 6f6e 2e61 7267 735b 305d 2c20 6578  tion.args[0], ex
-00000d20: 705f 6572 726f 7229 0a0a 2020 2020 6465  p_error)..    de
-00000d30: 6620 7465 7374 5f6e 6f5f 6172 6775 6d65  f test_no_argume
-00000d40: 6e74 7328 7365 6c66 293a 0a20 2020 2020  nts(self):.     
-00000d50: 2020 206f 7574 7075 742c 2065 7272 6f72     output, error
-00000d60: 203d 2073 656c 662e 7275 6e5f 736e 6170   = self.run_snap
-00000d70: 696e 666f 2863 6174 6368 5f65 7869 743d  info(catch_exit=
-00000d80: 3229 0a20 2020 2020 2020 2073 656c 662e  2).        self.
-00000d90: 6173 7365 7274 4571 7561 6c28 6f75 7470  assertEqual(outp
-00000da0: 7574 2c20 2727 290a 2020 2020 2020 2020  ut, '').        
-00000db0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00000dc0: 6572 726f 722e 7374 6172 7473 7769 7468  error.startswith
-00000dd0: 2827 7573 6167 653a 2073 6e61 7069 6e66  ('usage: snapinf
-00000de0: 6f2e 7079 2729 290a 0a20 2020 2040 7061  o.py'))..    @pa
-00000df0: 7463 682e 6f62 6a65 6374 2873 6e61 7069  tch.object(snapi
-00000e00: 6e66 6f2c 2027 7275 6e27 2c20 6d6f 636b  nfo, 'run', mock
-00000e10: 5f72 756e 290a 2020 2020 6465 6620 7465  _run).    def te
-00000e20: 7374 5f63 6f6e 6669 675f 7265 6164 5f66  st_config_read_f
-00000e30: 726f 6d5f 6669 6c65 2873 656c 6629 3a0a  rom_file(self):.
-00000e40: 2020 2020 2020 2020 696e 6920 3d20 2222          ini = ""
-00000e50: 220a 2020 2020 2020 2020 2020 2020 5b73  ".            [s
-00000e60: 6e61 7069 6e66 6f5d 0a20 2020 2020 2020  napinfo].       
-00000e70: 2020 2020 204e 6f64 6541 7474 7269 6275       NodeAttribu
-00000e80: 7465 733d 7368 6170 653d 6369 7263 6c65  tes=shape=circle
-00000e90: 0a20 2020 2020 2020 2020 2020 204e 6f64  .            Nod
-00000ea0: 654c 6162 656c 3d22 7b6c 6162 656c 7d22  eLabel="{label}"
-00000eb0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00000ec0: 2020 2020 2073 656c 662e 7772 6974 655f       self.write_
-00000ed0: 7465 7874 5f66 696c 6528 6465 6465 6e74  text_file(dedent
-00000ee0: 2869 6e69 292e 7374 7269 7028 292c 2027  (ini).strip(), '
-00000ef0: 736b 6f6f 6c6b 6974 2e69 6e69 2729 0a20  skoolkit.ini'). 
-00000f00: 2020 2020 2020 2073 6e61 7069 6e66 6f2e         snapinfo.
-00000f10: 6d61 696e 2828 2774 6573 742e 736e 6127  main(('test.sna'
-00000f20: 2c29 290a 2020 2020 2020 2020 736e 6166  ,)).        snaf
-00000f30: 696c 652c 206f 7074 696f 6e73 2c20 636f  ile, options, co
-00000f40: 6e66 6967 203d 2072 756e 5f61 7267 730a  nfig = run_args.
-00000f50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00000f60: 6572 7445 7175 616c 2873 6e61 6669 6c65  ertEqual(snafile
-00000f70: 2c20 2774 6573 742e 736e 6127 290a 2020  , 'test.sna').  
-00000f80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00000f90: 7446 616c 7365 286f 7074 696f 6e73 2e62  tFalse(options.b
-00000fa0: 6173 6963 290a 2020 2020 2020 2020 7365  asic).        se
-00000fb0: 6c66 2e61 7373 6572 7446 616c 7365 286f  lf.assertFalse(o
-00000fc0: 7074 696f 6e73 2e63 616c 6c5f 6772 6170  ptions.call_grap
-00000fd0: 6829 0a20 2020 2020 2020 2073 656c 662e  h).        self.
-00000fe0: 6173 7365 7274 4571 7561 6c28 5b5d 2c20  assertEqual([], 
-00000ff0: 6f70 7469 6f6e 732e 7061 7261 6d73 290a  options.params).
-00001000: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00001010: 6572 7449 734e 6f6e 6528 6f70 7469 6f6e  ertIsNone(option
-00001020: 732e 7065 656b 290a 2020 2020 2020 2020  s.peek).        
-00001030: 7365 6c66 2e61 7373 6572 7449 734e 6f6e  self.assertIsNon
-00001040: 6528 6f70 7469 6f6e 732e 7465 7874 290a  e(options.text).
-00001050: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00001060: 6572 7449 734e 6f6e 6528 6f70 7469 6f6e  ertIsNone(option
-00001070: 732e 7469 6c65 290a 2020 2020 2020 2020  s.tile).        
-00001080: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
-00001090: 286f 7074 696f 6e73 2e76 6172 6961 626c  (options.variabl
-000010a0: 6573 290a 2020 2020 2020 2020 7365 6c66  es).        self
-000010b0: 2e61 7373 6572 7449 734e 6f6e 6528 6f70  .assertIsNone(op
-000010c0: 7469 6f6e 732e 776f 7264 290a 2020 2020  tions.word).    
-000010d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000010e0: 7175 616c 2863 6f6e 6669 675b 274e 6f64  qual(config['Nod
-000010f0: 6541 7474 7269 6275 7465 7327 5d2c 2027  eAttributes'], '
-00001100: 7368 6170 653d 6369 7263 6c65 2729 0a20  shape=circle'). 
-00001110: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00001120: 7274 4571 7561 6c28 636f 6e66 6967 5b27  rtEqual(config['
-00001130: 4e6f 6465 4c61 6265 6c27 5d2c 2027 227b  NodeLabel'], '"{
-00001140: 6c61 6265 6c7d 2227 290a 0a20 2020 2064  label}"')..    d
-00001150: 6566 2074 6573 745f 696e 7661 6c69 645f  ef test_invalid_
-00001160: 6f70 7469 6f6e 2873 656c 6629 3a0a 2020  option(self):.  
-00001170: 2020 2020 2020 6f75 7470 7574 2c20 6572        output, er
-00001180: 726f 7220 3d20 7365 6c66 2e72 756e 5f73  ror = self.run_s
-00001190: 6e61 7069 6e66 6f28 272d 7820 7465 7374  napinfo('-x test
-000011a0: 2e7a 3830 272c 2063 6174 6368 5f65 7869  .z80', catch_exi
-000011b0: 743d 3229 0a20 2020 2020 2020 2073 656c  t=2).        sel
-000011c0: 662e 6173 7365 7274 4571 7561 6c28 6f75  f.assertEqual(ou
-000011d0: 7470 7574 2c20 2727 290a 2020 2020 2020  tput, '').      
-000011e0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-000011f0: 6528 6572 726f 722e 7374 6172 7473 7769  e(error.startswi
-00001200: 7468 2827 7573 6167 653a 2073 6e61 7069  th('usage: snapi
-00001210: 6e66 6f2e 7079 2729 290a 0a20 2020 2064  nfo.py'))..    d
-00001220: 6566 2074 6573 745f 6e6f 6e65 7869 7374  ef test_nonexist
-00001230: 656e 745f 696e 7075 745f 6669 6c65 2873  ent_input_file(s
-00001240: 656c 6629 3a0a 2020 2020 2020 2020 696e  elf):.        in
-00001250: 6669 6c65 203d 2027 7b7d 2f6e 6f6e 2d65  file = '{}/non-e
-00001260: 7869 7374 656e 742e 7a38 3027 2e66 6f72  xistent.z80'.for
-00001270: 6d61 7428 7365 6c66 2e6d 616b 655f 6469  mat(self.make_di
-00001280: 7265 6374 6f72 7928 2929 0a20 2020 2020  rectory()).     
-00001290: 2020 2077 6974 6820 7365 6c66 2e61 7373     with self.ass
-000012a0: 6572 7452 6169 7365 7328 536b 6f6f 6c4b  ertRaises(SkoolK
-000012b0: 6974 4572 726f 7229 2061 7320 636d 3a0a  itError) as cm:.
-000012c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000012d0: 2e72 756e 5f73 6e61 7069 6e66 6f28 696e  .run_snapinfo(in
-000012e0: 6669 6c65 290a 2020 2020 2020 2020 7365  file).        se
-000012f0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-00001300: 6d2e 6578 6365 7074 696f 6e2e 6172 6773  m.exception.args
-00001310: 5b30 5d2c 2027 7b7d 3a20 6669 6c65 206e  [0], '{}: file n
-00001320: 6f74 2066 6f75 6e64 272e 666f 726d 6174  ot found'.format
-00001330: 2869 6e66 696c 6529 290a 0a20 2020 2064  (infile))..    d
-00001340: 6566 2074 6573 745f 736e 615f 3438 6b28  ef test_sna_48k(
-00001350: 7365 6c66 293a 0a20 2020 2020 2020 2068  self):.        h
-00001360: 6561 6465 7220 3d20 6c69 7374 2872 616e  eader = list(ran
-00001370: 6765 2832 3329 290a 2020 2020 2020 2020  ge(23)).        
-00001380: 6865 6164 6572 5b31 395d 203d 2034 2023  header[19] = 4 #
-00001390: 2049 6e74 6572 7275 7074 7320 656e 6162   Interrupts enab
-000013a0: 6c65 640a 2020 2020 2020 2020 6865 6164  led.        head
-000013b0: 6572 2e65 7874 656e 6428 2830 2c20 3634  er.extend((0, 64
-000013c0: 2929 2023 2053 503d 3136 3338 340a 2020  )) # SP=16384.  
-000013d0: 2020 2020 2020 6865 6164 6572 2e61 7070        header.app
-000013e0: 656e 6428 3129 2023 2049 4d20 310a 2020  end(1) # IM 1.  
-000013f0: 2020 2020 2020 6865 6164 6572 2e61 7070        header.app
-00001400: 656e 6428 3229 2023 2042 4f52 4445 5220  end(2) # BORDER 
-00001410: 320a 2020 2020 2020 2020 7261 6d20 3d20  2.        ram = 
-00001420: 5b30 2c20 3132 385d 2023 2050 433d 3332  [0, 128] # PC=32
-00001430: 3736 380a 2020 2020 2020 2020 7261 6d2e  768.        ram.
-00001440: 6578 7465 6e64 285b 305d 202a 2034 3931  extend([0] * 491
-00001450: 3530 290a 2020 2020 2020 2020 6578 705f  50).        exp_
-00001460: 6f75 7470 7574 203d 2022 2222 0a20 2020  output = """.   
-00001470: 2020 2020 2020 2020 2052 414d 3a20 3438           RAM: 48
-00001480: 4b0a 2020 2020 2020 2020 2020 2020 496e  K.            In
-00001490: 7465 7272 7570 7473 3a20 656e 6162 6c65  terrupts: enable
-000014a0: 640a 2020 2020 2020 2020 2020 2020 496e  d.            In
-000014b0: 7465 7272 7570 7420 6d6f 6465 3a20 310a  terrupt mode: 1.
-000014c0: 2020 2020 2020 2020 2020 2020 426f 7264              Bord
-000014d0: 6572 3a20 320a 2020 2020 2020 2020 2020  er: 2.          
-000014e0: 2020 5265 6769 7374 6572 733a 0a20 2020    Registers:.   
-000014f0: 2020 2020 2020 2020 2020 2050 4320 2033             PC  3
-00001500: 3237 3638 2038 3030 3020 2020 2053 5020  2768 8000    SP 
-00001510: 2031 3633 3834 2034 3030 300a 2020 2020   16384 4000.    
-00001520: 2020 2020 2020 2020 2020 4958 2020 2034            IX   4
-00001530: 3632 3520 3132 3131 2020 2020 4959 2020  625 1211    IY  
-00001540: 2034 3131 3120 3130 3046 0a20 2020 2020   4111 100F.     
-00001550: 2020 2020 2020 2020 2049 2020 2020 2020           I      
-00001560: 2030 2020 2030 3020 2020 2052 2020 2020   0   00    R    
-00001570: 2020 3230 2020 2031 340a 2020 2020 2020    20   14.      
-00001580: 2020 2020 2020 2020 4220 2020 2020 2031          B      1
-00001590: 3420 2020 3045 2020 2020 4227 2020 2020  4   0E    B'    
-000015a0: 2020 3620 2020 3036 0a20 2020 2020 2020    6   06.       
-000015b0: 2020 2020 2020 2043 2020 2020 2020 3133         C      13
-000015c0: 2020 2030 4420 2020 2043 2720 2020 2020     0D    C'     
-000015d0: 2035 2020 2030 350a 2020 2020 2020 2020   5   05.        
-000015e0: 2020 2020 2020 4243 2020 2033 3539 3720        BC   3597 
-000015f0: 3045 3044 2020 2020 4243 2720 2031 3534  0E0D    BC'  154
-00001600: 3120 3036 3035 0a20 2020 2020 2020 2020  1 0605.         
-00001610: 2020 2020 2044 2020 2020 2020 3132 2020       D      12  
-00001620: 2030 4320 2020 2044 2720 2020 2020 2034   0C    D'      4
-00001630: 2020 2030 340a 2020 2020 2020 2020 2020     04.          
-00001640: 2020 2020 4520 2020 2020 2031 3120 2020      E      11   
-00001650: 3042 2020 2020 4527 2020 2020 2020 3320  0B    E'      3 
-00001660: 2020 3033 0a20 2020 2020 2020 2020 2020    03.           
-00001670: 2020 2044 4520 2020 3330 3833 2030 4330     DE   3083 0C0
-00001680: 4220 2020 2044 4527 2020 3130 3237 2030  B    DE'  1027 0
-00001690: 3430 330a 2020 2020 2020 2020 2020 2020  403.            
-000016a0: 2020 4820 2020 2020 2031 3020 2020 3041    H      10   0A
-000016b0: 2020 2020 4827 2020 2020 2020 3220 2020      H'      2   
-000016c0: 3032 0a20 2020 2020 2020 2020 2020 2020  02.             
-000016d0: 204c 2020 2020 2020 2039 2020 2030 3920   L       9   09 
-000016e0: 2020 204c 2720 2020 2020 2031 2020 2030     L'      1   0
-000016f0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00001700: 484c 2020 2032 3536 3920 3041 3039 2020  HL   2569 0A09  
-00001710: 2020 484c 2720 2020 3531 3320 3032 3031    HL'   513 0201
-00001720: 0a20 2020 2020 2020 2020 2020 2020 2041  .              A
-00001730: 2020 2020 2020 3232 2020 2031 3620 2020        22   16   
-00001740: 2041 2720 2020 2020 2038 2020 2030 380a   A'      8   08.
-00001750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001760: 535a 3548 3350 4e43 2020 2020 2020 2020  SZ5H3PNC        
-00001770: 2020 2053 5a35 4833 504e 430a 2020 2020     SZ5H3PNC.    
-00001780: 2020 2020 2020 2020 2020 4620 3030 3031            F 0001
-00001790: 3031 3031 2020 2020 2020 2020 4627 2030  0101        F' 0
-000017a0: 3030 3030 3131 310a 2020 2020 2020 2020  0000111.        
-000017b0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-000017c0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
-000017d0: 6578 705f 6f75 7470 7574 2c20 6865 6164  exp_output, head
-000017e0: 6572 3d68 6561 6465 7229 0a0a 2020 2020  er=header)..    
-000017f0: 6465 6620 7465 7374 5f73 6e61 5f31 3238  def test_sna_128
-00001800: 6b28 7365 6c66 293a 0a20 2020 2020 2020  k(self):.       
-00001810: 2068 6561 6465 7220 3d20 6c69 7374 2872   header = list(r
-00001820: 616e 6765 2832 3529 290a 2020 2020 2020  ange(25)).      
-00001830: 2020 6865 6164 6572 5b31 395d 203d 2030    header[19] = 0
-00001840: 2023 2049 6e74 6572 7275 7074 7320 6469   # Interrupts di
-00001850: 7361 626c 6564 0a20 2020 2020 2020 2068  sabled.        h
-00001860: 6561 6465 722e 6170 7065 6e64 2832 2920  eader.append(2) 
-00001870: 2320 494d 2032 0a20 2020 2020 2020 2068  # IM 2.        h
-00001880: 6561 6465 722e 6170 7065 6e64 2834 2920  eader.append(4) 
-00001890: 2320 424f 5244 4552 2034 0a20 2020 2020  # BORDER 4.     
-000018a0: 2020 2072 616d 203d 205b 305d 202a 2034     ram = [0] * 4
-000018b0: 3931 3532 0a20 2020 2020 2020 2068 6561  9152.        hea
-000018c0: 6465 7232 203d 205b 302c 2039 365d 2023  der2 = [0, 96] #
-000018d0: 2050 433d 3234 3537 360a 2020 2020 2020   PC=24576.      
-000018e0: 2020 6865 6164 6572 322e 6170 7065 6e64    header2.append
-000018f0: 2831 2920 2320 506f 7274 2030 7837 6666  (1) # Port 0x7ff
-00001900: 640a 2020 2020 2020 2020 6865 6164 6572  d.        header
-00001910: 322e 6170 7065 6e64 2830 2920 2320 5452  2.append(0) # TR
-00001920: 2d44 4f53 2052 4f4d 206e 6f74 2070 6167  -DOS ROM not pag
-00001930: 6564 0a20 2020 2020 2020 2062 616e 6b73  ed.        banks
-00001940: 203d 205b 305d 202a 2028 3520 2a20 3136   = [0] * (5 * 16
-00001950: 3338 3429 0a20 2020 2020 2020 2065 7870  384).        exp
-00001960: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
-00001970: 2020 2020 2020 2020 2020 5241 4d3a 2031            RAM: 1
-00001980: 3238 4b0a 2020 2020 2020 2020 2020 2020  28K.            
-00001990: 496e 7465 7272 7570 7473 3a20 6469 7361  Interrupts: disa
-000019a0: 626c 6564 0a20 2020 2020 2020 2020 2020  bled.           
-000019b0: 2049 6e74 6572 7275 7074 206d 6f64 653a   Interrupt mode:
-000019c0: 2032 0a20 2020 2020 2020 2020 2020 2042   2.            B
-000019d0: 6f72 6465 723a 2034 0a20 2020 2020 2020  order: 4.       
-000019e0: 2020 2020 2052 6567 6973 7465 7273 3a0a       Registers:.
-000019f0: 2020 2020 2020 2020 2020 2020 2020 5043                PC
-00001a00: 2020 3234 3537 3620 3630 3030 2020 2020    24576 6000    
-00001a10: 5350 2020 2036 3136 3720 3138 3137 0a20  SP   6167 1817. 
-00001a20: 2020 2020 2020 2020 2020 2020 2049 5820               IX 
-00001a30: 2020 3436 3235 2031 3231 3120 2020 2049    4625 1211    I
-00001a40: 5920 2020 3431 3131 2031 3030 460a 2020  Y   4111 100F.  
-00001a50: 2020 2020 2020 2020 2020 2020 4920 2020              I   
-00001a60: 2020 2020 3020 2020 3030 2020 2020 5220      0   00    R 
-00001a70: 2020 2020 2032 3020 2020 3134 0a20 2020       20   14.   
-00001a80: 2020 2020 2020 2020 2020 2042 2020 2020             B    
-00001a90: 2020 3134 2020 2030 4520 2020 2042 2720    14   0E    B' 
-00001aa0: 2020 2020 2036 2020 2030 360a 2020 2020       6   06.    
-00001ab0: 2020 2020 2020 2020 2020 4320 2020 2020            C     
-00001ac0: 2031 3320 2020 3044 2020 2020 4327 2020   13   0D    C'  
-00001ad0: 2020 2020 3520 2020 3035 0a20 2020 2020      5   05.     
-00001ae0: 2020 2020 2020 2020 2042 4320 2020 3335           BC   35
-00001af0: 3937 2030 4530 4420 2020 2042 4327 2020  97 0E0D    BC'  
-00001b00: 3135 3431 2030 3630 350a 2020 2020 2020  1541 0605.      
-00001b10: 2020 2020 2020 2020 4420 2020 2020 2031          D      1
-00001b20: 3220 2020 3043 2020 2020 4427 2020 2020  2   0C    D'    
-00001b30: 2020 3420 2020 3034 0a20 2020 2020 2020    4   04.       
-00001b40: 2020 2020 2020 2045 2020 2020 2020 3131         E      11
-00001b50: 2020 2030 4220 2020 2045 2720 2020 2020     0B    E'     
-00001b60: 2033 2020 2030 330a 2020 2020 2020 2020   3   03.        
-00001b70: 2020 2020 2020 4445 2020 2033 3038 3320        DE   3083 
-00001b80: 3043 3042 2020 2020 4445 2720 2031 3032  0C0B    DE'  102
-00001b90: 3720 3034 3033 0a20 2020 2020 2020 2020  7 0403.         
-00001ba0: 2020 2020 2048 2020 2020 2020 3130 2020       H      10  
-00001bb0: 2030 4120 2020 2048 2720 2020 2020 2032   0A    H'      2
-00001bc0: 2020 2030 320a 2020 2020 2020 2020 2020     02.          
-00001bd0: 2020 2020 4c20 2020 2020 2020 3920 2020      L       9   
-00001be0: 3039 2020 2020 4c27 2020 2020 2020 3120  09    L'      1 
-00001bf0: 2020 3031 0a20 2020 2020 2020 2020 2020    01.           
-00001c00: 2020 2048 4c20 2020 3235 3639 2030 4130     HL   2569 0A0
-00001c10: 3920 2020 2048 4c27 2020 2035 3133 2030  9    HL'   513 0
-00001c20: 3230 310a 2020 2020 2020 2020 2020 2020  201.            
-00001c30: 2020 4120 2020 2020 2032 3220 2020 3136    A      22   16
-00001c40: 2020 2020 4127 2020 2020 2020 3820 2020      A'      8   
-00001c50: 3038 0a20 2020 2020 2020 2020 2020 2020  08.             
-00001c60: 2020 2053 5a35 4833 504e 4320 2020 2020     SZ5H3PNC     
-00001c70: 2020 2020 2020 535a 3548 3350 4e43 0a20        SZ5H3PNC. 
-00001c80: 2020 2020 2020 2020 2020 2020 2046 2030               F 0
-00001c90: 3030 3130 3130 3120 2020 2020 2020 2046  0010101        F
-00001ca0: 2720 3030 3030 3031 3131 0a20 2020 2020  ' 00000111.     
-00001cb0: 2020 2020 2020 2052 414d 2062 616e 6b20         RAM bank 
-00001cc0: 3520 2831 3633 3834 2062 7974 6573 3a20  5 (16384 bytes: 
-00001cd0: 3136 3338 342d 3332 3736 3720 3430 3030  16384-32767 4000
-00001ce0: 2d37 4646 4629 0a20 2020 2020 2020 2020  -7FFF).         
-00001cf0: 2020 2052 414d 2062 616e 6b20 3220 2831     RAM bank 2 (1
-00001d00: 3633 3834 2062 7974 6573 3a20 3332 3736  6384 bytes: 3276
-00001d10: 382d 3439 3135 3120 3830 3030 2d42 4646  8-49151 8000-BFF
-00001d20: 4629 0a20 2020 2020 2020 2020 2020 2052  F).            R
-00001d30: 414d 2062 616e 6b20 3120 2831 3633 3834  AM bank 1 (16384
-00001d40: 2062 7974 6573 3a20 3439 3135 322d 3635   bytes: 49152-65
-00001d50: 3533 3520 4330 3030 2d46 4646 4629 0a20  535 C000-FFFF). 
-00001d60: 2020 2020 2020 2020 2020 2052 414d 2062             RAM b
-00001d70: 616e 6b20 3020 2831 3633 3834 2062 7974  ank 0 (16384 byt
-00001d80: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-00001d90: 5241 4d20 6261 6e6b 2033 2028 3136 3338  RAM bank 3 (1638
-00001da0: 3420 6279 7465 7329 0a20 2020 2020 2020  4 bytes).       
-00001db0: 2020 2020 2052 414d 2062 616e 6b20 3420       RAM bank 4 
-00001dc0: 2831 3633 3834 2062 7974 6573 290a 2020  (16384 bytes).  
-00001dd0: 2020 2020 2020 2020 2020 5241 4d20 6261            RAM ba
-00001de0: 6e6b 2036 2028 3136 3338 3420 6279 7465  nk 6 (16384 byte
-00001df0: 7329 0a20 2020 2020 2020 2020 2020 2052  s).            R
-00001e00: 414d 2062 616e 6b20 3720 2831 3633 3834  AM bank 7 (16384
-00001e10: 2062 7974 6573 290a 2020 2020 2020 2020   bytes).        
-00001e20: 2222 220a 0a20 2020 2020 2020 2073 656c  """..        sel
-00001e30: 662e 5f74 6573 745f 736e 6128 7261 6d20  f._test_sna(ram 
-00001e40: 2b20 6865 6164 6572 3220 2b20 6261 6e6b  + header2 + bank
-00001e50: 732c 2065 7870 5f6f 7574 7075 742c 2068  s, exp_output, h
-00001e60: 6561 6465 723d 6865 6164 6572 290a 0a20  eader=header).. 
-00001e70: 2020 2064 6566 2074 6573 745f 736e 615f     def test_sna_
-00001e80: 3132 386b 5f39 5f62 616e 6b73 2873 656c  128k_9_banks(sel
-00001e90: 6629 3a0a 2020 2020 2020 2020 6865 6164  f):.        head
-00001ea0: 6572 203d 206c 6973 7428 7261 6e67 6528  er = list(range(
-00001eb0: 3235 2929 0a20 2020 2020 2020 2068 6561  25)).        hea
-00001ec0: 6465 725b 3139 5d20 3d20 3020 2320 496e  der[19] = 0 # In
-00001ed0: 7465 7272 7570 7473 2064 6973 6162 6c65  terrupts disable
-00001ee0: 640a 2020 2020 2020 2020 6865 6164 6572  d.        header
-00001ef0: 2e61 7070 656e 6428 3129 2023 2049 4d20  .append(1) # IM 
-00001f00: 310a 2020 2020 2020 2020 6865 6164 6572  1.        header
-00001f10: 2e61 7070 656e 6428 3529 2023 2042 4f52  .append(5) # BOR
-00001f20: 4445 5220 350a 2020 2020 2020 2020 7261  DER 5.        ra
-00001f30: 6d20 3d20 5b30 5d20 2a20 3439 3135 320a  m = [0] * 49152.
-00001f40: 2020 2020 2020 2020 6865 6164 6572 3220          header2 
-00001f50: 3d20 5b30 2c20 3936 5d20 2320 5043 3d32  = [0, 96] # PC=2
-00001f60: 3435 3736 0a20 2020 2020 2020 2068 6561  4576.        hea
-00001f70: 6465 7232 2e61 7070 656e 6428 3229 2023  der2.append(2) #
-00001f80: 2050 6f72 7420 3078 3766 6664 0a20 2020   Port 0x7ffd.   
-00001f90: 2020 2020 2068 6561 6465 7232 2e61 7070       header2.app
-00001fa0: 656e 6428 3029 2023 2054 522d 444f 5320  end(0) # TR-DOS 
-00001fb0: 524f 4d20 6e6f 7420 7061 6765 640a 2020  ROM not paged.  
-00001fc0: 2020 2020 2020 6261 6e6b 7320 3d20 5b30        banks = [0
-00001fd0: 5d20 2a20 2836 202a 2031 3633 3834 290a  ] * (6 * 16384).
-00001fe0: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-00001ff0: 7574 203d 2022 2222 0a20 2020 2020 2020  ut = """.       
-00002000: 2020 2020 2052 414d 3a20 3132 384b 0a20       RAM: 128K. 
-00002010: 2020 2020 2020 2020 2020 2049 6e74 6572             Inter
-00002020: 7275 7074 733a 2064 6973 6162 6c65 640a  rupts: disabled.
-00002030: 2020 2020 2020 2020 2020 2020 496e 7465              Inte
-00002040: 7272 7570 7420 6d6f 6465 3a20 310a 2020  rrupt mode: 1.  
-00002050: 2020 2020 2020 2020 2020 426f 7264 6572            Border
-00002060: 3a20 350a 2020 2020 2020 2020 2020 2020  : 5.            
-00002070: 5265 6769 7374 6572 733a 0a20 2020 2020  Registers:.     
-00002080: 2020 2020 2020 2020 2050 4320 2032 3435           PC  245
-00002090: 3736 2036 3030 3020 2020 2053 5020 2020  76 6000    SP   
-000020a0: 3631 3637 2031 3831 370a 2020 2020 2020  6167 1817.      
-000020b0: 2020 2020 2020 2020 4958 2020 2034 3632          IX   462
-000020c0: 3520 3132 3131 2020 2020 4959 2020 2034  5 1211    IY   4
-000020d0: 3131 3120 3130 3046 0a20 2020 2020 2020  111 100F.       
-000020e0: 2020 2020 2020 2049 2020 2020 2020 2030         I       0
-000020f0: 2020 2030 3020 2020 2052 2020 2020 2020     00    R      
-00002100: 3230 2020 2031 340a 2020 2020 2020 2020  20   14.        
-00002110: 2020 2020 2020 4220 2020 2020 2031 3420        B      14 
-00002120: 2020 3045 2020 2020 4227 2020 2020 2020    0E    B'      
-00002130: 3620 2020 3036 0a20 2020 2020 2020 2020  6   06.         
-00002140: 2020 2020 2043 2020 2020 2020 3133 2020       C      13  
-00002150: 2030 4420 2020 2043 2720 2020 2020 2035   0D    C'      5
-00002160: 2020 2030 350a 2020 2020 2020 2020 2020     05.          
-00002170: 2020 2020 4243 2020 2033 3539 3720 3045      BC   3597 0E
-00002180: 3044 2020 2020 4243 2720 2031 3534 3120  0D    BC'  1541 
-00002190: 3036 3035 0a20 2020 2020 2020 2020 2020  0605.           
-000021a0: 2020 2044 2020 2020 2020 3132 2020 2030     D      12   0
-000021b0: 4320 2020 2044 2720 2020 2020 2034 2020  C    D'      4  
-000021c0: 2030 340a 2020 2020 2020 2020 2020 2020   04.            
-000021d0: 2020 4520 2020 2020 2031 3120 2020 3042    E      11   0B
-000021e0: 2020 2020 4527 2020 2020 2020 3320 2020      E'      3   
-000021f0: 3033 0a20 2020 2020 2020 2020 2020 2020  03.             
-00002200: 2044 4520 2020 3330 3833 2030 4330 4220   DE   3083 0C0B 
-00002210: 2020 2044 4527 2020 3130 3237 2030 3430     DE'  1027 040
-00002220: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-00002230: 4820 2020 2020 2031 3020 2020 3041 2020  H      10   0A  
-00002240: 2020 4827 2020 2020 2020 3220 2020 3032    H'      2   02
-00002250: 0a20 2020 2020 2020 2020 2020 2020 204c  .              L
-00002260: 2020 2020 2020 2039 2020 2030 3920 2020         9   09   
-00002270: 204c 2720 2020 2020 2031 2020 2030 310a   L'      1   01.
-00002280: 2020 2020 2020 2020 2020 2020 2020 484c                HL
-00002290: 2020 2032 3536 3920 3041 3039 2020 2020     2569 0A09    
-000022a0: 484c 2720 2020 3531 3320 3032 3031 0a20  HL'   513 0201. 
-000022b0: 2020 2020 2020 2020 2020 2020 2041 2020               A  
-000022c0: 2020 2020 3232 2020 2031 3620 2020 2041      22   16    A
-000022d0: 2720 2020 2020 2038 2020 2030 380a 2020  '      8   08.  
-000022e0: 2020 2020 2020 2020 2020 2020 2020 535a                SZ
-000022f0: 3548 3350 4e43 2020 2020 2020 2020 2020  5H3PNC          
-00002300: 2053 5a35 4833 504e 430a 2020 2020 2020   SZ5H3PNC.      
-00002310: 2020 2020 2020 2020 4620 3030 3031 3031          F 000101
-00002320: 3031 2020 2020 2020 2020 4627 2030 3030  01        F' 000
-00002330: 3030 3131 310a 2020 2020 2020 2020 2020  00111.          
-00002340: 2020 5241 4d20 6261 6e6b 2035 2028 3136    RAM bank 5 (16
-00002350: 3338 3420 6279 7465 733a 2031 3633 3834  384 bytes: 16384
-00002360: 2d33 3237 3637 2034 3030 302d 3746 4646  -32767 4000-7FFF
-00002370: 290a 2020 2020 2020 2020 2020 2020 5241  ).            RA
-00002380: 4d20 6261 6e6b 2032 2028 3136 3338 3420  M bank 2 (16384 
-00002390: 6279 7465 733a 2033 3237 3638 2d34 3931  bytes: 32768-491
-000023a0: 3531 2038 3030 302d 4246 4646 290a 2020  51 8000-BFFF).  
-000023b0: 2020 2020 2020 2020 2020 5241 4d20 6261            RAM ba
-000023c0: 6e6b 2032 2028 3136 3338 3420 6279 7465  nk 2 (16384 byte
-000023d0: 733a 2034 3931 3532 2d36 3535 3335 2043  s: 49152-65535 C
-000023e0: 3030 302d 4646 4646 290a 2020 2020 2020  000-FFFF).      
-000023f0: 2020 2020 2020 5241 4d20 6261 6e6b 2030        RAM bank 0
-00002400: 2028 3136 3338 3420 6279 7465 7329 0a20   (16384 bytes). 
-00002410: 2020 2020 2020 2020 2020 2052 414d 2062             RAM b
-00002420: 616e 6b20 3120 2831 3633 3834 2062 7974  ank 1 (16384 byt
-00002430: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-00002440: 5241 4d20 6261 6e6b 2033 2028 3136 3338  RAM bank 3 (1638
-00002450: 3420 6279 7465 7329 0a20 2020 2020 2020  4 bytes).       
-00002460: 2020 2020 2052 414d 2062 616e 6b20 3420       RAM bank 4 
-00002470: 2831 3633 3834 2062 7974 6573 290a 2020  (16384 bytes).  
-00002480: 2020 2020 2020 2020 2020 5241 4d20 6261            RAM ba
-00002490: 6e6b 2036 2028 3136 3338 3420 6279 7465  nk 6 (16384 byte
-000024a0: 7329 0a20 2020 2020 2020 2020 2020 2052  s).            R
-000024b0: 414d 2062 616e 6b20 3720 2831 3633 3834  AM bank 7 (16384
-000024c0: 2062 7974 6573 290a 2020 2020 2020 2020   bytes).        
-000024d0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-000024e0: 2e5f 7465 7374 5f73 6e61 2872 616d 202b  ._test_sna(ram +
-000024f0: 2068 6561 6465 7232 202b 2062 616e 6b73   header2 + banks
-00002500: 2c20 6578 705f 6f75 7470 7574 2c20 6865  , exp_output, he
-00002510: 6164 6572 3d68 6561 6465 7229 0a0a 2020  ader=header)..  
-00002520: 2020 6465 6620 7465 7374 5f73 6e61 5f62    def test_sna_b
-00002530: 6164 5f73 697a 6528 7365 6c66 293a 0a20  ad_size(self):. 
-00002540: 2020 2020 2020 2066 6f72 2073 697a 6520         for size 
-00002550: 696e 2028 3439 3137 382c 2034 3931 3830  in (49178, 49180
-00002560: 2c20 3133 3131 3034 2c20 3134 3734 3838  , 131104, 147488
-00002570: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00002580: 6e66 696c 6520 3d20 7365 6c66 2e77 7269  nfile = self.wri
-00002590: 7465 5f62 696e 5f66 696c 6528 5b30 5d20  te_bin_file([0] 
-000025a0: 2a20 7369 7a65 2c20 7375 6666 6978 3d27  * size, suffix='
-000025b0: 2e73 6e61 2729 0a20 2020 2020 2020 2020  .sna').         
-000025c0: 2020 2077 6974 6820 7365 6c66 2e61 7373     with self.ass
-000025d0: 6572 7452 6169 7365 7328 536b 6f6f 6c4b  ertRaises(SkoolK
-000025e0: 6974 4572 726f 7229 2061 7320 636d 3a0a  itError) as cm:.
-000025f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002600: 7365 6c66 2e72 756e 5f73 6e61 7069 6e66  self.run_snapinf
-00002610: 6f28 696e 6669 6c65 290a 2020 2020 2020  o(infile).      
-00002620: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00002630: 7445 7175 616c 2863 6d2e 6578 6365 7074  tEqual(cm.except
-00002640: 696f 6e2e 6172 6773 5b30 5d2c 2027 7b7d  ion.args[0], '{}
-00002650: 3a20 6e6f 7420 6120 534e 4120 6669 6c65  : not a SNA file
-00002660: 272e 666f 726d 6174 2869 6e66 696c 6529  '.format(infile)
-00002670: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00002680: 7a38 3076 315f 756e 636f 6d70 7265 7373  z80v1_uncompress
-00002690: 6564 2873 656c 6629 3a0a 2020 2020 2020  ed(self):.      
-000026a0: 2020 6865 6164 6572 203d 206c 6973 7428    header = list(
-000026b0: 7261 6e67 6528 3136 2c20 3436 2929 0a20  range(16, 46)). 
-000026c0: 2020 2020 2020 2068 6561 6465 725b 3132         header[12
-000026d0: 5d20 3d20 3132 2023 2042 4f52 4445 5220  ] = 12 # BORDER 
-000026e0: 362c 2075 6e63 6f6d 7072 6573 7365 6420  6, uncompressed 
-000026f0: 5241 4d0a 2020 2020 2020 2020 6865 6164  RAM.        head
-00002700: 6572 5b32 395d 207c 3d20 3420 2320 4973  er[29] |= 4 # Is
-00002710: 7375 6520 3220 656d 756c 6174 696f 6e20  sue 2 emulation 
-00002720: 656e 6162 6c65 640a 2020 2020 2020 2020  enabled.        
-00002730: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
-00002740: 0a20 2020 2020 2020 2020 2020 2056 6572  .            Ver
-00002750: 7369 6f6e 3a20 310a 2020 2020 2020 2020  sion: 1.        
-00002760: 2020 2020 4d61 6368 696e 653a 2034 384b      Machine: 48K
-00002770: 2053 7065 6374 7275 6d0a 2020 2020 2020   Spectrum.      
-00002780: 2020 2020 2020 496e 7465 7272 7570 7473        Interrupts
-00002790: 3a20 656e 6162 6c65 640a 2020 2020 2020  : enabled.      
-000027a0: 2020 2020 2020 496e 7465 7272 7570 7420        Interrupt 
-000027b0: 6d6f 6465 3a20 310a 2020 2020 2020 2020  mode: 1.        
-000027c0: 2020 2020 4973 7375 6520 3220 656d 756c      Issue 2 emul
-000027d0: 6174 696f 6e3a 2065 6e61 626c 6564 0a20  ation: enabled. 
-000027e0: 2020 2020 2020 2020 2020 2042 6f72 6465             Borde
-000027f0: 723a 2036 0a20 2020 2020 2020 2020 2020  r: 6.           
-00002800: 2052 6567 6973 7465 7273 3a0a 2020 2020   Registers:.    
-00002810: 2020 2020 2020 2020 2020 5043 2020 2035            PC   5
-00002820: 3931 3020 3137 3136 2020 2020 5350 2020  910 1716    SP  
-00002830: 2036 3432 3420 3139 3138 0a20 2020 2020   6424 1918.     
-00002840: 2020 2020 2020 2020 2049 5820 2031 3037           IX  107
-00002850: 3933 2032 4132 3920 2020 2049 5920 2031  93 2A29    IY  1
-00002860: 3032 3739 2032 3832 370a 2020 2020 2020  0279 2827.      
-00002870: 2020 2020 2020 2020 4920 2020 2020 2032          I      2
-00002880: 3620 2020 3141 2020 2020 5220 2020 2020  6   1A    R     
-00002890: 2032 3720 2020 3142 0a20 2020 2020 2020   27   1B.       
-000028a0: 2020 2020 2020 2042 2020 2020 2020 3139         B      19
-000028b0: 2020 2031 3320 2020 2042 2720 2020 2020     13    B'     
-000028c0: 3332 2020 2032 300a 2020 2020 2020 2020  32   20.        
-000028d0: 2020 2020 2020 4320 2020 2020 2031 3820        C      18 
-000028e0: 2020 3132 2020 2020 4327 2020 2020 2033    12    C'     3
-000028f0: 3120 2020 3146 0a20 2020 2020 2020 2020  1   1F.         
-00002900: 2020 2020 2042 4320 2020 3438 3832 2031       BC   4882 1
-00002910: 3331 3220 2020 2042 4327 2020 3832 3233  312    BC'  8223
-00002920: 2032 3031 460a 2020 2020 2020 2020 2020   201F.          
-00002930: 2020 2020 4420 2020 2020 2033 3020 2020      D      30   
-00002940: 3145 2020 2020 4427 2020 2020 2033 3420  1E    D'     34 
-00002950: 2020 3232 0a20 2020 2020 2020 2020 2020    22.           
-00002960: 2020 2045 2020 2020 2020 3239 2020 2031     E      29   1
-00002970: 4420 2020 2045 2720 2020 2020 3333 2020  D    E'     33  
-00002980: 2032 310a 2020 2020 2020 2020 2020 2020   21.            
-00002990: 2020 4445 2020 2037 3730 3920 3145 3144    DE   7709 1E1D
-000029a0: 2020 2020 4445 2720 2038 3733 3720 3232      DE'  8737 22
-000029b0: 3231 0a20 2020 2020 2020 2020 2020 2020  21.             
-000029c0: 2048 2020 2020 2020 3231 2020 2031 3520   H      21   15 
-000029d0: 2020 2048 2720 2020 2020 3336 2020 2032     H'     36   2
-000029e0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
-000029f0: 4c20 2020 2020 2032 3020 2020 3134 2020  L      20   14  
-00002a00: 2020 4c27 2020 2020 2033 3520 2020 3233    L'     35   23
-00002a10: 0a20 2020 2020 2020 2020 2020 2020 2048  .              H
-00002a20: 4c20 2020 3533 3936 2031 3531 3420 2020  L   5396 1514   
-00002a30: 2048 4c27 2020 3932 3531 2032 3432 330a   HL'  9251 2423.
-00002a40: 2020 2020 2020 2020 2020 2020 2020 4120                A 
-00002a50: 2020 2020 2031 3620 2020 3130 2020 2020       16   10    
-00002a60: 4127 2020 2020 2033 3720 2020 3235 0a20  A'     37   25. 
-00002a70: 2020 2020 2020 2020 2020 2020 2020 2053                 S
-00002a80: 5a35 4833 504e 4320 2020 2020 2020 2020  Z5H3PNC         
-00002a90: 2020 535a 3548 3350 4e43 0a20 2020 2020    SZ5H3PNC.     
-00002aa0: 2020 2020 2020 2020 2046 2030 3030 3130           F 00010
-00002ab0: 3030 3120 2020 2020 2020 2046 2720 3030  001        F' 00
-00002ac0: 3130 3031 3130 0a20 2020 2020 2020 2020  100110.         
-00002ad0: 2020 2034 384b 2052 414d 2062 6c6f 636b     48K RAM block
-00002ae0: 2028 3136 3338 342d 3635 3533 3520 3430   (16384-65535 40
-00002af0: 3030 2d46 4646 4629 3a20 3439 3135 3220  00-FFFF): 49152 
-00002b00: 6279 7465 7320 2875 6e63 6f6d 7072 6573  bytes (uncompres
-00002b10: 7365 6429 0a20 2020 2020 2020 2022 2222  sed).        """
-00002b20: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-00002b30: 6573 745f 7a38 3028 6578 705f 6f75 7470  est_z80(exp_outp
-00002b40: 7574 2c20 6865 6164 6572 2c20 7665 7273  ut, header, vers
-00002b50: 696f 6e3d 3129 0a0a 2020 2020 6465 6620  ion=1)..    def 
-00002b60: 7465 7374 5f7a 3830 7631 5f63 6f6d 7072  test_z80v1_compr
-00002b70: 6573 7365 6428 7365 6c66 293a 0a20 2020  essed(self):.   
-00002b80: 2020 2020 2068 6561 6465 7220 3d20 6c69       header = li
-00002b90: 7374 2872 616e 6765 2831 362c 2034 3629  st(range(16, 46)
-00002ba0: 290a 2020 2020 2020 2020 6865 6164 6572  ).        header
-00002bb0: 5b31 325d 203d 2034 3220 2320 424f 5244  [12] = 42 # BORD
-00002bc0: 4552 2035 2c20 636f 6d70 7265 7373 6564  ER 5, compressed
-00002bd0: 2052 414d 0a20 2020 2020 2020 2068 6561   RAM.        hea
-00002be0: 6465 725b 3239 5d20 7c3d 2034 2023 2049  der[29] |= 4 # I
-00002bf0: 7373 7565 2032 2065 6d75 6c61 7469 6f6e  ssue 2 emulation
-00002c00: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
-00002c10: 2065 7870 5f6f 7574 7075 7420 3d20 2222   exp_output = ""
-00002c20: 220a 2020 2020 2020 2020 2020 2020 5665  ".            Ve
-00002c30: 7273 696f 6e3a 2031 0a20 2020 2020 2020  rsion: 1.       
-00002c40: 2020 2020 204d 6163 6869 6e65 3a20 3438       Machine: 48
-00002c50: 4b20 5370 6563 7472 756d 0a20 2020 2020  K Spectrum.     
-00002c60: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
-00002c70: 733a 2065 6e61 626c 6564 0a20 2020 2020  s: enabled.     
-00002c80: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
-00002c90: 206d 6f64 653a 2031 0a20 2020 2020 2020   mode: 1.       
-00002ca0: 2020 2020 2049 7373 7565 2032 2065 6d75       Issue 2 emu
-00002cb0: 6c61 7469 6f6e 3a20 656e 6162 6c65 640a  lation: enabled.
-00002cc0: 2020 2020 2020 2020 2020 2020 426f 7264              Bord
-00002cd0: 6572 3a20 350a 2020 2020 2020 2020 2020  er: 5.          
-00002ce0: 2020 5265 6769 7374 6572 733a 0a20 2020    Registers:.   
-00002cf0: 2020 2020 2020 2020 2020 2050 4320 2020             PC   
-00002d00: 3539 3130 2031 3731 3620 2020 2053 5020  5910 1716    SP 
-00002d10: 2020 3634 3234 2031 3931 380a 2020 2020    6424 1918.    
-00002d20: 2020 2020 2020 2020 2020 4958 2020 3130            IX  10
-00002d30: 3739 3320 3241 3239 2020 2020 4959 2020  793 2A29    IY  
-00002d40: 3130 3237 3920 3238 3237 0a20 2020 2020  10279 2827.     
-00002d50: 2020 2020 2020 2020 2049 2020 2020 2020           I      
-00002d60: 3236 2020 2031 4120 2020 2052 2020 2020  26   1A    R    
-00002d70: 2020 3237 2020 2031 420a 2020 2020 2020    27   1B.      
-00002d80: 2020 2020 2020 2020 4220 2020 2020 2031          B      1
-00002d90: 3920 2020 3133 2020 2020 4227 2020 2020  9   13    B'    
-00002da0: 2033 3220 2020 3230 0a20 2020 2020 2020   32   20.       
-00002db0: 2020 2020 2020 2043 2020 2020 2020 3138         C      18
-00002dc0: 2020 2031 3220 2020 2043 2720 2020 2020     12    C'     
-00002dd0: 3331 2020 2031 460a 2020 2020 2020 2020  31   1F.        
-00002de0: 2020 2020 2020 4243 2020 2034 3838 3220        BC   4882 
-00002df0: 3133 3132 2020 2020 4243 2720 2038 3232  1312    BC'  822
-00002e00: 3320 3230 3146 0a20 2020 2020 2020 2020  3 201F.         
-00002e10: 2020 2020 2044 2020 2020 2020 3330 2020       D      30  
-00002e20: 2031 4520 2020 2044 2720 2020 2020 3334   1E    D'     34
-00002e30: 2020 2032 320a 2020 2020 2020 2020 2020     22.          
-00002e40: 2020 2020 4520 2020 2020 2032 3920 2020      E      29   
-00002e50: 3144 2020 2020 4527 2020 2020 2033 3320  1D    E'     33 
-00002e60: 2020 3231 0a20 2020 2020 2020 2020 2020    21.           
-00002e70: 2020 2044 4520 2020 3737 3039 2031 4531     DE   7709 1E1
-00002e80: 4420 2020 2044 4527 2020 3837 3337 2032  D    DE'  8737 2
-00002e90: 3232 310a 2020 2020 2020 2020 2020 2020  221.            
-00002ea0: 2020 4820 2020 2020 2032 3120 2020 3135    H      21   15
-00002eb0: 2020 2020 4827 2020 2020 2033 3620 2020      H'     36   
-00002ec0: 3234 0a20 2020 2020 2020 2020 2020 2020  24.             
-00002ed0: 204c 2020 2020 2020 3230 2020 2031 3420   L      20   14 
-00002ee0: 2020 204c 2720 2020 2020 3335 2020 2032     L'     35   2
-00002ef0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
-00002f00: 484c 2020 2035 3339 3620 3135 3134 2020  HL   5396 1514  
-00002f10: 2020 484c 2720 2039 3235 3120 3234 3233    HL'  9251 2423
-00002f20: 0a20 2020 2020 2020 2020 2020 2020 2041  .              A
-00002f30: 2020 2020 2020 3136 2020 2031 3020 2020        16   10   
-00002f40: 2041 2720 2020 2020 3337 2020 2032 350a   A'     37   25.
-00002f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f60: 535a 3548 3350 4e43 2020 2020 2020 2020  SZ5H3PNC        
-00002f70: 2020 2053 5a35 4833 504e 430a 2020 2020     SZ5H3PNC.    
-00002f80: 2020 2020 2020 2020 2020 4620 3030 3031            F 0001
-00002f90: 3030 3031 2020 2020 2020 2020 4627 2030  0001        F' 0
-00002fa0: 3031 3030 3131 300a 2020 2020 2020 2020  0100110.        
-00002fb0: 2020 2020 3438 4b20 5241 4d20 626c 6f63      48K RAM bloc
-00002fc0: 6b20 2831 3633 3834 2d36 3535 3335 2034  k (16384-65535 4
-00002fd0: 3030 302d 4646 4646 293a 2037 3736 2062  000-FFFF): 776 b
-00002fe0: 7974 6573 2028 636f 6d70 7265 7373 6564  ytes (compressed
-00002ff0: 290a 2020 2020 2020 2020 2222 220a 2020  ).        """.  
-00003000: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
-00003010: 5f7a 3830 2865 7870 5f6f 7574 7075 742c  _z80(exp_output,
-00003020: 2068 6561 6465 722c 2076 6572 7369 6f6e   header, version
-00003030: 3d31 2c20 636f 6d70 7265 7373 3d54 7275  =1, compress=Tru
-00003040: 6529 0a0a 2020 2020 6465 6620 7465 7374  e)..    def test
-00003050: 5f7a 3830 7632 5f34 386b 5f75 6e63 6f6d  _z80v2_48k_uncom
-00003060: 7072 6573 7365 6428 7365 6c66 293a 0a20  pressed(self):. 
-00003070: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
-00003080: 6c69 7374 2872 616e 6765 2833 3029 290a  list(range(30)).
-00003090: 2020 2020 2020 2020 6865 6164 6572 5b36          header[6
-000030a0: 3a38 5d20 3d20 5b30 2c20 305d 2023 2056  :8] = [0, 0] # V
-000030b0: 6572 7369 6f6e 2032 2b0a 2020 2020 2020  ersion 2+.      
-000030c0: 2020 6865 6164 6572 5b31 325d 203d 2038    header[12] = 8
-000030d0: 2023 2042 4f52 4445 5220 340a 2020 2020   # BORDER 4.    
-000030e0: 2020 2020 6865 6164 6572 5b32 395d 2026      header[29] &
-000030f0: 3d20 3235 3120 2320 4973 7375 6520 3220  = 251 # Issue 2 
-00003100: 656d 756c 6174 696f 6e20 6469 7361 626c  emulation disabl
-00003110: 6564 0a20 2020 2020 2020 2068 6561 6465  ed.        heade
-00003120: 722e 6578 7465 6e64 2828 3233 2c20 3029  r.extend((23, 0)
-00003130: 2920 2320 5265 6d61 696e 696e 6720 6865  ) # Remaining he
-00003140: 6164 6572 206c 656e 6774 6820 2876 6572  ader length (ver
-00003150: 7369 6f6e 2032 290a 2020 2020 2020 2020  sion 2).        
-00003160: 6865 6164 6572 2e65 7874 656e 6428 2831  header.extend((1
-00003170: 3733 2c20 3232 3229 2920 2320 5043 3d35  73, 222)) # PC=5
-00003180: 3730 3035 0a20 2020 2020 2020 2068 6561  7005.        hea
-00003190: 6465 722e 6578 7465 6e64 285b 305d 202a  der.extend([0] *
-000031a0: 2028 6865 6164 6572 5b2d 345d 202d 2032   (header[-4] - 2
-000031b0: 2929 0a20 2020 2020 2020 2065 7870 5f6f  )).        exp_o
-000031c0: 7574 7075 7420 3d20 2222 220a 2020 2020  utput = """.    
-000031d0: 2020 2020 2020 2020 5665 7273 696f 6e3a          Version:
-000031e0: 2032 0a20 2020 2020 2020 2020 2020 204d   2.            M
-000031f0: 6163 6869 6e65 3a20 3438 4b20 5370 6563  achine: 48K Spec
-00003200: 7472 756d 0a20 2020 2020 2020 2020 2020  trum.           
-00003210: 2049 6e74 6572 7275 7074 733a 2065 6e61   Interrupts: ena
-00003220: 626c 6564 0a20 2020 2020 2020 2020 2020  bled.           
-00003230: 2049 6e74 6572 7275 7074 206d 6f64 653a   Interrupt mode:
-00003240: 2031 0a20 2020 2020 2020 2020 2020 2049   1.            I
-00003250: 7373 7565 2032 2065 6d75 6c61 7469 6f6e  ssue 2 emulation
-00003260: 3a20 6469 7361 626c 6564 0a20 2020 2020  : disabled.     
-00003270: 2020 2020 2020 2042 6f72 6465 723a 2034         Border: 4
-00003280: 0a20 2020 2020 2020 2020 2020 2052 6567  .            Reg
-00003290: 6973 7465 7273 3a0a 2020 2020 2020 2020  isters:.        
-000032a0: 2020 2020 2020 5043 2020 3537 3030 3520        PC  57005 
-000032b0: 4445 4144 2020 2020 5350 2020 2032 3331  DEAD    SP   231
-000032c0: 3220 3039 3038 0a20 2020 2020 2020 2020  2 0908.         
-000032d0: 2020 2020 2049 5820 2020 3636 3831 2031       IX   6681 1
-000032e0: 4131 3920 2020 2049 5920 2020 3631 3637  A19    IY   6167
-000032f0: 2031 3831 370a 2020 2020 2020 2020 2020   1817.          
-00003300: 2020 2020 4920 2020 2020 2031 3020 2020      I      10   
-00003310: 3041 2020 2020 5220 2020 2020 2031 3120  0A    R      11 
-00003320: 2020 3042 0a20 2020 2020 2020 2020 2020    0B.           
-00003330: 2020 2042 2020 2020 2020 2033 2020 2030     B       3   0
-00003340: 3320 2020 2042 2720 2020 2020 3136 2020  3    B'     16  
-00003350: 2031 300a 2020 2020 2020 2020 2020 2020   10.            
-00003360: 2020 4320 2020 2020 2020 3220 2020 3032    C       2   02
-00003370: 2020 2020 4327 2020 2020 2031 3520 2020      C'     15   
-00003380: 3046 0a20 2020 2020 2020 2020 2020 2020  0F.             
-00003390: 2042 4320 2020 2037 3730 2030 3330 3220   BC    770 0302 
-000033a0: 2020 2042 4327 2020 3431 3131 2031 3030     BC'  4111 100
-000033b0: 460a 2020 2020 2020 2020 2020 2020 2020  F.              
-000033c0: 4420 2020 2020 2031 3420 2020 3045 2020  D      14   0E  
-000033d0: 2020 4427 2020 2020 2031 3820 2020 3132    D'     18   12
-000033e0: 0a20 2020 2020 2020 2020 2020 2020 2045  .              E
-000033f0: 2020 2020 2020 3133 2020 2030 4420 2020        13   0D   
-00003400: 2045 2720 2020 2020 3137 2020 2031 310a   E'     17   11.
-00003410: 2020 2020 2020 2020 2020 2020 2020 4445                DE
-00003420: 2020 2033 3539 3720 3045 3044 2020 2020     3597 0E0D    
-00003430: 4445 2720 2034 3632 3520 3132 3131 0a20  DE'  4625 1211. 
-00003440: 2020 2020 2020 2020 2020 2020 2048 2020               H  
-00003450: 2020 2020 2035 2020 2030 3520 2020 2048       5   05    H
-00003460: 2720 2020 2020 3230 2020 2031 340a 2020  '     20   14.  
-00003470: 2020 2020 2020 2020 2020 2020 4c20 2020              L   
-00003480: 2020 2020 3420 2020 3034 2020 2020 4c27      4   04    L'
-00003490: 2020 2020 2031 3920 2020 3133 0a20 2020       19   13.   
-000034a0: 2020 2020 2020 2020 2020 2048 4c20 2020             HL   
-000034b0: 3132 3834 2030 3530 3420 2020 2048 4c27  1284 0504    HL'
-000034c0: 2020 3531 3339 2031 3431 330a 2020 2020    5139 1413.    
-000034d0: 2020 2020 2020 2020 2020 4120 2020 2020            A     
-000034e0: 2020 3020 2020 3030 2020 2020 4127 2020    0   00    A'  
-000034f0: 2020 2032 3120 2020 3135 0a20 2020 2020     21   15.     
-00003500: 2020 2020 2020 2020 2020 2053 5a35 4833             SZ5H3
-00003510: 504e 4320 2020 2020 2020 2020 2020 535a  PNC           SZ
-00003520: 3548 3350 4e43 0a20 2020 2020 2020 2020  5H3PNC.         
-00003530: 2020 2020 2046 2030 3030 3030 3030 3120       F 00000001 
-00003540: 2020 2020 2020 2046 2720 3030 3031 3031         F' 000101
-00003550: 3130 0a20 2020 2020 2020 2020 2020 2052  10.            R
-00003560: 414d 2062 6c6f 636b 2034 2028 3332 3736  AM block 4 (3276
-00003570: 382d 3439 3135 3120 3830 3030 2d42 4646  8-49151 8000-BFF
-00003580: 4629 3a20 3136 3338 3420 6279 7465 7320  F): 16384 bytes 
-00003590: 2875 6e63 6f6d 7072 6573 7365 6429 0a20  (uncompressed). 
-000035a0: 2020 2020 2020 2020 2020 2052 414d 2062             RAM b
-000035b0: 6c6f 636b 2035 2028 3439 3135 322d 3635  lock 5 (49152-65
-000035c0: 3533 3520 4330 3030 2d46 4646 4629 3a20  535 C000-FFFF): 
-000035d0: 3136 3338 3420 6279 7465 7320 2875 6e63  16384 bytes (unc
-000035e0: 6f6d 7072 6573 7365 6429 0a20 2020 2020  ompressed).     
-000035f0: 2020 2020 2020 2052 414d 2062 6c6f 636b         RAM block
-00003600: 2038 2028 3136 3338 342d 3332 3736 3720   8 (16384-32767 
-00003610: 3430 3030 2d37 4646 4629 3a20 3136 3338  4000-7FFF): 1638
-00003620: 3420 6279 7465 7320 2875 6e63 6f6d 7072  4 bytes (uncompr
-00003630: 6573 7365 6429 0a20 2020 2020 2020 2022  essed).        "
-00003640: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-00003650: 5f74 6573 745f 7a38 3028 6578 705f 6f75  _test_z80(exp_ou
-00003660: 7470 7574 2c20 6865 6164 6572 2c20 7665  tput, header, ve
-00003670: 7273 696f 6e3d 3229 0a0a 2020 2020 6465  rsion=2)..    de
-00003680: 6620 7465 7374 5f7a 3830 7632 5f34 386b  f test_z80v2_48k
-00003690: 5f63 6f6d 7072 6573 7365 6428 7365 6c66  _compressed(self
-000036a0: 293a 0a20 2020 2020 2020 2068 6561 6465  ):.        heade
-000036b0: 7220 3d20 6c69 7374 2872 616e 6765 2833  r = list(range(3
-000036c0: 3029 290a 2020 2020 2020 2020 6865 6164  0)).        head
-000036d0: 6572 5b36 3a38 5d20 3d20 5b30 2c20 305d  er[6:8] = [0, 0]
-000036e0: 2023 2056 6572 7369 6f6e 2032 2b0a 2020   # Version 2+.  
-000036f0: 2020 2020 2020 6865 6164 6572 5b31 325d        header[12]
-00003700: 203d 2031 3020 2320 424f 5244 4552 2035   = 10 # BORDER 5
-00003710: 0a20 2020 2020 2020 2068 6561 6465 725b  .        header[
-00003720: 3239 5d20 7c3d 2034 2023 2049 7373 7565  29] |= 4 # Issue
-00003730: 2032 2065 6d75 6c61 7469 6f6e 2065 6e61   2 emulation ena
-00003740: 626c 6564 0a20 2020 2020 2020 2068 6561  bled.        hea
-00003750: 6465 722e 6578 7465 6e64 2828 3233 2c20  der.extend((23, 
-00003760: 3029 2920 2320 5265 6d61 696e 696e 6720  0)) # Remaining 
-00003770: 6865 6164 6572 206c 656e 6774 6820 2876  header length (v
-00003780: 6572 7369 6f6e 2032 290a 2020 2020 2020  ersion 2).      
-00003790: 2020 6865 6164 6572 2e65 7874 656e 6428    header.extend(
-000037a0: 2832 3339 2c20 3139 3029 2920 2320 5043  (239, 190)) # PC
-000037b0: 3d34 3838 3739 0a20 2020 2020 2020 2068  =48879.        h
-000037c0: 6561 6465 722e 6578 7465 6e64 285b 305d  eader.extend([0]
-000037d0: 202a 2028 6865 6164 6572 5b2d 345d 202d   * (header[-4] -
-000037e0: 2032 2929 0a20 2020 2020 2020 2065 7870   2)).        exp
-000037f0: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
-00003800: 2020 2020 2020 2020 2020 5665 7273 696f            Versio
-00003810: 6e3a 2032 0a20 2020 2020 2020 2020 2020  n: 2.           
-00003820: 204d 6163 6869 6e65 3a20 3438 4b20 5370   Machine: 48K Sp
-00003830: 6563 7472 756d 0a20 2020 2020 2020 2020  ectrum.         
-00003840: 2020 2049 6e74 6572 7275 7074 733a 2065     Interrupts: e
-00003850: 6e61 626c 6564 0a20 2020 2020 2020 2020  nabled.         
-00003860: 2020 2049 6e74 6572 7275 7074 206d 6f64     Interrupt mod
-00003870: 653a 2031 0a20 2020 2020 2020 2020 2020  e: 1.           
-00003880: 2049 7373 7565 2032 2065 6d75 6c61 7469   Issue 2 emulati
-00003890: 6f6e 3a20 656e 6162 6c65 640a 2020 2020  on: enabled.    
-000038a0: 2020 2020 2020 2020 426f 7264 6572 3a20          Border: 
-000038b0: 350a 2020 2020 2020 2020 2020 2020 5265  5.            Re
-000038c0: 6769 7374 6572 733a 0a20 2020 2020 2020  gisters:.       
-000038d0: 2020 2020 2020 2050 4320 2034 3838 3739         PC  48879
-000038e0: 2042 4545 4620 2020 2053 5020 2020 3233   BEEF    SP   23
-000038f0: 3132 2030 3930 380a 2020 2020 2020 2020  12 0908.        
-00003900: 2020 2020 2020 4958 2020 2036 3638 3120        IX   6681 
-00003910: 3141 3139 2020 2020 4959 2020 2036 3136  1A19    IY   616
-00003920: 3720 3138 3137 0a20 2020 2020 2020 2020  7 1817.         
-00003930: 2020 2020 2049 2020 2020 2020 3130 2020       I      10  
-00003940: 2030 4120 2020 2052 2020 2020 2020 3131   0A    R      11
-00003950: 2020 2030 420a 2020 2020 2020 2020 2020     0B.          
-00003960: 2020 2020 4220 2020 2020 2020 3320 2020      B       3   
-00003970: 3033 2020 2020 4227 2020 2020 2031 3620  03    B'     16 
-00003980: 2020 3130 0a20 2020 2020 2020 2020 2020    10.           
-00003990: 2020 2043 2020 2020 2020 2032 2020 2030     C       2   0
-000039a0: 3220 2020 2043 2720 2020 2020 3135 2020  2    C'     15  
-000039b0: 2030 460a 2020 2020 2020 2020 2020 2020   0F.            
-000039c0: 2020 4243 2020 2020 3737 3020 3033 3032    BC    770 0302
-000039d0: 2020 2020 4243 2720 2034 3131 3120 3130      BC'  4111 10
-000039e0: 3046 0a20 2020 2020 2020 2020 2020 2020  0F.             
-000039f0: 2044 2020 2020 2020 3134 2020 2030 4520   D      14   0E 
-00003a00: 2020 2044 2720 2020 2020 3138 2020 2031     D'     18   1
-00003a10: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-00003a20: 4520 2020 2020 2031 3320 2020 3044 2020  E      13   0D  
-00003a30: 2020 4527 2020 2020 2031 3720 2020 3131    E'     17   11
-00003a40: 0a20 2020 2020 2020 2020 2020 2020 2044  .              D
-00003a50: 4520 2020 3335 3937 2030 4530 4420 2020  E   3597 0E0D   
-00003a60: 2044 4527 2020 3436 3235 2031 3231 310a   DE'  4625 1211.
-00003a70: 2020 2020 2020 2020 2020 2020 2020 4820                H 
-00003a80: 2020 2020 2020 3520 2020 3035 2020 2020        5   05    
-00003a90: 4827 2020 2020 2032 3020 2020 3134 0a20  H'     20   14. 
-00003aa0: 2020 2020 2020 2020 2020 2020 204c 2020               L  
-00003ab0: 2020 2020 2034 2020 2030 3420 2020 204c       4   04    L
-00003ac0: 2720 2020 2020 3139 2020 2031 330a 2020  '     19   13.  
-00003ad0: 2020 2020 2020 2020 2020 2020 484c 2020              HL  
-00003ae0: 2031 3238 3420 3035 3034 2020 2020 484c   1284 0504    HL
-00003af0: 2720 2035 3133 3920 3134 3133 0a20 2020  '  5139 1413.   
-00003b00: 2020 2020 2020 2020 2020 2041 2020 2020             A    
-00003b10: 2020 2030 2020 2030 3020 2020 2041 2720     0   00    A' 
-00003b20: 2020 2020 3231 2020 2031 350a 2020 2020      21   15.    
-00003b30: 2020 2020 2020 2020 2020 2020 535a 3548              SZ5H
-00003b40: 3350 4e43 2020 2020 2020 2020 2020 2053  3PNC           S
-00003b50: 5a35 4833 504e 430a 2020 2020 2020 2020  Z5H3PNC.        
-00003b60: 2020 2020 2020 4620 3030 3030 3030 3031        F 00000001
-00003b70: 2020 2020 2020 2020 4627 2030 3030 3130          F' 00010
-00003b80: 3131 300a 2020 2020 2020 2020 2020 2020  110.            
-00003b90: 5241 4d20 626c 6f63 6b20 3420 2833 3237  RAM block 4 (327
-00003ba0: 3638 2d34 3931 3531 2038 3030 302d 4246  68-49151 8000-BF
-00003bb0: 4646 293a 2032 3630 2062 7974 6573 2028  FF): 260 bytes (
-00003bc0: 636f 6d70 7265 7373 6564 290a 2020 2020  compressed).    
-00003bd0: 2020 2020 2020 2020 5241 4d20 626c 6f63          RAM bloc
-00003be0: 6b20 3520 2834 3931 3532 2d36 3535 3335  k 5 (49152-65535
-00003bf0: 2043 3030 302d 4646 4646 293a 2032 3630   C000-FFFF): 260
-00003c00: 2062 7974 6573 2028 636f 6d70 7265 7373   bytes (compress
-00003c10: 6564 290a 2020 2020 2020 2020 2020 2020  ed).            
-00003c20: 5241 4d20 626c 6f63 6b20 3820 2831 3633  RAM block 8 (163
-00003c30: 3834 2d33 3237 3637 2034 3030 302d 3746  84-32767 4000-7F
-00003c40: 4646 293a 2032 3630 2062 7974 6573 2028  FF): 260 bytes (
-00003c50: 636f 6d70 7265 7373 6564 290a 2020 2020  compressed).    
-00003c60: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00003c70: 7365 6c66 2e5f 7465 7374 5f7a 3830 2865  self._test_z80(e
-00003c80: 7870 5f6f 7574 7075 742c 2068 6561 6465  xp_output, heade
-00003c90: 722c 2076 6572 7369 6f6e 3d32 2c20 636f  r, version=2, co
-00003ca0: 6d70 7265 7373 3d54 7275 6529 0a0a 2020  mpress=True)..  
-00003cb0: 2020 6465 6620 7465 7374 5f7a 3830 7633    def test_z80v3
-00003cc0: 5f34 386b 5f75 6e63 6f6d 7072 6573 7365  _48k_uncompresse
-00003cd0: 6428 7365 6c66 293a 0a20 2020 2020 2020  d(self):.       
-00003ce0: 2068 6561 6465 7220 3d20 6c69 7374 2872   header = list(r
-00003cf0: 616e 6765 2833 3029 290a 2020 2020 2020  ange(30)).      
-00003d00: 2020 6865 6164 6572 5b36 3a38 5d20 3d20    header[6:8] = 
-00003d10: 5b30 2c20 305d 2023 2056 6572 7369 6f6e  [0, 0] # Version
-00003d20: 2032 2b0a 2020 2020 2020 2020 6865 6164   2+.        head
-00003d30: 6572 5b31 325d 203d 2036 2023 2042 4f52  er[12] = 6 # BOR
-00003d40: 4445 5220 330a 2020 2020 2020 2020 6865  DER 3.        he
-00003d50: 6164 6572 5b32 395d 2026 3d20 3235 3120  ader[29] &= 251 
-00003d60: 2320 4973 7375 6520 3220 656d 756c 6174  # Issue 2 emulat
-00003d70: 696f 6e20 6469 7361 626c 6564 0a20 2020  ion disabled.   
-00003d80: 2020 2020 2068 6561 6465 722e 6578 7465       header.exte
-00003d90: 6e64 2828 3534 2c20 3029 2920 2320 5265  nd((54, 0)) # Re
-00003da0: 6d61 696e 696e 6720 6865 6164 6572 206c  maining header l
-00003db0: 656e 6774 6820 2876 6572 7369 6f6e 2033  ength (version 3
-00003dc0: 290a 2020 2020 2020 2020 6865 6164 6572  ).        header
-00003dd0: 2e65 7874 656e 6428 2832 3036 2c20 3235  .extend((206, 25
-00003de0: 3029 2920 2320 5043 3d36 3432 3036 0a20  0)) # PC=64206. 
-00003df0: 2020 2020 2020 2068 6561 6465 7220 2b3d         header +=
-00003e00: 205b 305d 202a 2028 6865 6164 6572 5b2d   [0] * (header[-
-00003e10: 345d 202d 2032 290a 2020 2020 2020 2020  4] - 2).        
-00003e20: 6865 6164 6572 5b35 353a 3538 5d20 3d20  header[55:58] = 
-00003e30: 5b31 2c20 322c 2033 5d20 2320 542d 7374  [1, 2, 3] # T-st
-00003e40: 6174 6573 0a20 2020 2020 2020 2065 7870  ates.        exp
-00003e50: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
-00003e60: 2020 2020 2020 2020 2020 5665 7273 696f            Versio
-00003e70: 6e3a 2033 0a20 2020 2020 2020 2020 2020  n: 3.           
-00003e80: 204d 6163 6869 6e65 3a20 3438 4b20 5370   Machine: 48K Sp
-00003e90: 6563 7472 756d 0a20 2020 2020 2020 2020  ectrum.         
-00003ea0: 2020 2049 6e74 6572 7275 7074 733a 2065     Interrupts: e
-00003eb0: 6e61 626c 6564 0a20 2020 2020 2020 2020  nabled.         
-00003ec0: 2020 2049 6e74 6572 7275 7074 206d 6f64     Interrupt mod
-00003ed0: 653a 2031 0a20 2020 2020 2020 2020 2020  e: 1.           
-00003ee0: 2049 7373 7565 2032 2065 6d75 6c61 7469   Issue 2 emulati
-00003ef0: 6f6e 3a20 6469 7361 626c 6564 0a20 2020  on: disabled.   
-00003f00: 2020 2020 2020 2020 2054 2d73 7461 7465           T-state
-00003f10: 733a 2031 3639 3538 0a20 2020 2020 2020  s: 16958.       
-00003f20: 2020 2020 2042 6f72 6465 723a 2033 0a20       Border: 3. 
-00003f30: 2020 2020 2020 2020 2020 2052 6567 6973             Regis
-00003f40: 7465 7273 3a0a 2020 2020 2020 2020 2020  ters:.          
-00003f50: 2020 2020 5043 2020 3634 3230 3620 4641      PC  64206 FA
-00003f60: 4345 2020 2020 5350 2020 2032 3331 3220  CE    SP   2312 
-00003f70: 3039 3038 0a20 2020 2020 2020 2020 2020  0908.           
-00003f80: 2020 2049 5820 2020 3636 3831 2031 4131     IX   6681 1A1
-00003f90: 3920 2020 2049 5920 2020 3631 3637 2031  9    IY   6167 1
-00003fa0: 3831 370a 2020 2020 2020 2020 2020 2020  817.            
-00003fb0: 2020 4920 2020 2020 2031 3020 2020 3041    I      10   0A
-00003fc0: 2020 2020 5220 2020 2020 2031 3120 2020      R      11   
-00003fd0: 3042 0a20 2020 2020 2020 2020 2020 2020  0B.             
-00003fe0: 2042 2020 2020 2020 2033 2020 2030 3320   B       3   03 
-00003ff0: 2020 2042 2720 2020 2020 3136 2020 2031     B'     16   1
-00004000: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
-00004010: 4320 2020 2020 2020 3220 2020 3032 2020  C       2   02  
-00004020: 2020 4327 2020 2020 2031 3520 2020 3046    C'     15   0F
-00004030: 0a20 2020 2020 2020 2020 2020 2020 2042  .              B
-00004040: 4320 2020 2037 3730 2030 3330 3220 2020  C    770 0302   
-00004050: 2042 4327 2020 3431 3131 2031 3030 460a   BC'  4111 100F.
-00004060: 2020 2020 2020 2020 2020 2020 2020 4420                D 
-00004070: 2020 2020 2031 3420 2020 3045 2020 2020       14   0E    
-00004080: 4427 2020 2020 2031 3820 2020 3132 0a20  D'     18   12. 
-00004090: 2020 2020 2020 2020 2020 2020 2045 2020               E  
-000040a0: 2020 2020 3133 2020 2030 4420 2020 2045      13   0D    E
-000040b0: 2720 2020 2020 3137 2020 2031 310a 2020  '     17   11.  
-000040c0: 2020 2020 2020 2020 2020 2020 4445 2020              DE  
-000040d0: 2033 3539 3720 3045 3044 2020 2020 4445   3597 0E0D    DE
-000040e0: 2720 2034 3632 3520 3132 3131 0a20 2020  '  4625 1211.   
-000040f0: 2020 2020 2020 2020 2020 2048 2020 2020             H    
-00004100: 2020 2035 2020 2030 3520 2020 2048 2720     5   05    H' 
-00004110: 2020 2020 3230 2020 2031 340a 2020 2020      20   14.    
-00004120: 2020 2020 2020 2020 2020 4c20 2020 2020            L     
-00004130: 2020 3420 2020 3034 2020 2020 4c27 2020    4   04    L'  
-00004140: 2020 2031 3920 2020 3133 0a20 2020 2020     19   13.     
-00004150: 2020 2020 2020 2020 2048 4c20 2020 3132           HL   12
-00004160: 3834 2030 3530 3420 2020 2048 4c27 2020  84 0504    HL'  
-00004170: 3531 3339 2031 3431 330a 2020 2020 2020  5139 1413.      
-00004180: 2020 2020 2020 2020 4120 2020 2020 2020          A       
-00004190: 3020 2020 3030 2020 2020 4127 2020 2020  0   00    A'    
-000041a0: 2032 3120 2020 3135 0a20 2020 2020 2020   21   15.       
-000041b0: 2020 2020 2020 2020 2053 5a35 4833 504e           SZ5H3PN
-000041c0: 4320 2020 2020 2020 2020 2020 535a 3548  C           SZ5H
-000041d0: 3350 4e43 0a20 2020 2020 2020 2020 2020  3PNC.           
-000041e0: 2020 2046 2030 3030 3030 3030 3120 2020     F 00000001   
-000041f0: 2020 2020 2046 2720 3030 3031 3031 3130       F' 00010110
-00004200: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
-00004210: 2062 6c6f 636b 2034 2028 3332 3736 382d   block 4 (32768-
-00004220: 3439 3135 3120 3830 3030 2d42 4646 4629  49151 8000-BFFF)
-00004230: 3a20 3136 3338 3420 6279 7465 7320 2875  : 16384 bytes (u
-00004240: 6e63 6f6d 7072 6573 7365 6429 0a20 2020  ncompressed).   
-00004250: 2020 2020 2020 2020 2052 414d 2062 6c6f           RAM blo
-00004260: 636b 2035 2028 3439 3135 322d 3635 3533  ck 5 (49152-6553
-00004270: 3520 4330 3030 2d46 4646 4629 3a20 3136  5 C000-FFFF): 16
-00004280: 3338 3420 6279 7465 7320 2875 6e63 6f6d  384 bytes (uncom
-00004290: 7072 6573 7365 6429 0a20 2020 2020 2020  pressed).       
-000042a0: 2020 2020 2052 414d 2062 6c6f 636b 2038       RAM block 8
-000042b0: 2028 3136 3338 342d 3332 3736 3720 3430   (16384-32767 40
-000042c0: 3030 2d37 4646 4629 3a20 3136 3338 3420  00-7FFF): 16384 
-000042d0: 6279 7465 7320 2875 6e63 6f6d 7072 6573  bytes (uncompres
-000042e0: 7365 6429 0a20 2020 2020 2020 2022 2222  sed).        """
-000042f0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-00004300: 6573 745f 7a38 3028 6578 705f 6f75 7470  est_z80(exp_outp
-00004310: 7574 2c20 6865 6164 6572 2c20 7665 7273  ut, header, vers
-00004320: 696f 6e3d 3329 0a0a 2020 2020 6465 6620  ion=3)..    def 
-00004330: 7465 7374 5f7a 3830 7633 5f34 386b 5f63  test_z80v3_48k_c
-00004340: 6f6d 7072 6573 7365 6428 7365 6c66 293a  ompressed(self):
-00004350: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
-00004360: 3d20 6c69 7374 2872 616e 6765 2834 382c  = list(range(48,
-00004370: 2037 3829 290a 2020 2020 2020 2020 6865   78)).        he
-00004380: 6164 6572 5b36 3a38 5d20 3d20 5b30 2c20  ader[6:8] = [0, 
-00004390: 305d 2023 2056 6572 7369 6f6e 2032 2b0a  0] # Version 2+.
-000043a0: 2020 2020 2020 2020 6865 6164 6572 5b31          header[1
-000043b0: 325d 203d 2031 3420 2320 424f 5244 4552  2] = 14 # BORDER
-000043c0: 2037 0a20 2020 2020 2020 2068 6561 6465   7.        heade
-000043d0: 725b 3238 5d20 3d20 3020 2320 496e 7465  r[28] = 0 # Inte
-000043e0: 7272 7570 7473 2064 6973 6162 6c65 640a  rrupts disabled.
-000043f0: 2020 2020 2020 2020 6865 6164 6572 5b32          header[2
-00004400: 395d 207c 3d20 3420 2320 4973 7375 6520  9] |= 4 # Issue 
-00004410: 3220 656d 756c 6174 696f 6e20 656e 6162  2 emulation enab
-00004420: 6c65 640a 2020 2020 2020 2020 6865 6164  led.        head
-00004430: 6572 2e65 7874 656e 6428 2835 342c 2030  er.extend((54, 0
-00004440: 2929 2023 2052 656d 6169 6e69 6e67 2068  )) # Remaining h
-00004450: 6561 6465 7220 6c65 6e67 7468 2028 7665  eader length (ve
-00004460: 7273 696f 6e20 3329 0a20 2020 2020 2020  rsion 3).       
-00004470: 2068 6561 6465 722e 6578 7465 6e64 2828   header.extend((
-00004480: 3138 332c 2032 3031 2929 2023 2050 433d  183, 201)) # PC=
-00004490: 3531 3633 390a 2020 2020 2020 2020 6865  51639.        he
-000044a0: 6164 6572 202b 3d20 5b30 5d20 2a20 2868  ader += [0] * (h
-000044b0: 6561 6465 725b 2d34 5d20 2d20 3229 0a20  eader[-4] - 2). 
-000044c0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-000044d0: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
-000044e0: 2020 2020 5665 7273 696f 6e3a 2033 0a20      Version: 3. 
-000044f0: 2020 2020 2020 2020 2020 204d 6163 6869             Machi
-00004500: 6e65 3a20 3438 4b20 5370 6563 7472 756d  ne: 48K Spectrum
-00004510: 0a20 2020 2020 2020 2020 2020 2049 6e74  .            Int
-00004520: 6572 7275 7074 733a 2064 6973 6162 6c65  errupts: disable
-00004530: 640a 2020 2020 2020 2020 2020 2020 496e  d.            In
-00004540: 7465 7272 7570 7420 6d6f 6465 3a20 310a  terrupt mode: 1.
-00004550: 2020 2020 2020 2020 2020 2020 4973 7375              Issu
-00004560: 6520 3220 656d 756c 6174 696f 6e3a 2065  e 2 emulation: e
-00004570: 6e61 626c 6564 0a20 2020 2020 2020 2020  nabled.         
-00004580: 2020 2054 2d73 7461 7465 733a 2033 3439     T-states: 349
-00004590: 3433 0a20 2020 2020 2020 2020 2020 2042  43.            B
-000045a0: 6f72 6465 723a 2037 0a20 2020 2020 2020  order: 7.       
-000045b0: 2020 2020 2052 6567 6973 7465 7273 3a0a       Registers:.
-000045c0: 2020 2020 2020 2020 2020 2020 2020 5043                PC
-000045d0: 2020 3531 3633 3920 4339 4237 2020 2020    51639 C9B7    
-000045e0: 5350 2020 3134 3634 3820 3339 3338 0a20  SP  14648 3938. 
-000045f0: 2020 2020 2020 2020 2020 2020 2049 5820               IX 
-00004600: 2031 3930 3137 2034 4134 3920 2020 2049   19017 4A49    I
-00004610: 5920 2031 3835 3033 2034 3834 370a 2020  Y  18503 4847.  
-00004620: 2020 2020 2020 2020 2020 2020 4920 2020              I   
-00004630: 2020 2035 3820 2020 3341 2020 2020 5220     58   3A    R 
-00004640: 2020 2020 2035 3920 2020 3342 0a20 2020       59   3B.   
-00004650: 2020 2020 2020 2020 2020 2042 2020 2020             B    
-00004660: 2020 3531 2020 2033 3320 2020 2042 2720    51   33    B' 
-00004670: 2020 2020 3634 2020 2034 300a 2020 2020      64   40.    
-00004680: 2020 2020 2020 2020 2020 4320 2020 2020            C     
-00004690: 2035 3020 2020 3332 2020 2020 4327 2020   50   32    C'  
-000046a0: 2020 2036 3320 2020 3346 0a20 2020 2020     63   3F.     
-000046b0: 2020 2020 2020 2020 2042 4320 2031 3331           BC  131
-000046c0: 3036 2033 3333 3220 2020 2042 4327 2031  06 3332    BC' 1
-000046d0: 3634 3437 2034 3033 460a 2020 2020 2020  6447 403F.      
-000046e0: 2020 2020 2020 2020 4420 2020 2020 2036          D      6
-000046f0: 3220 2020 3345 2020 2020 4427 2020 2020  2   3E    D'    
-00004700: 2036 3620 2020 3432 0a20 2020 2020 2020   66   42.       
-00004710: 2020 2020 2020 2045 2020 2020 2020 3631         E      61
-00004720: 2020 2033 4420 2020 2045 2720 2020 2020     3D    E'     
-00004730: 3635 2020 2034 310a 2020 2020 2020 2020  65   41.        
-00004740: 2020 2020 2020 4445 2020 3135 3933 3320        DE  15933 
-00004750: 3345 3344 2020 2020 4445 2720 3136 3936  3E3D    DE' 1696
-00004760: 3120 3432 3431 0a20 2020 2020 2020 2020  1 4241.         
-00004770: 2020 2020 2048 2020 2020 2020 3533 2020       H      53  
-00004780: 2033 3520 2020 2048 2720 2020 2020 3638   35    H'     68
-00004790: 2020 2034 340a 2020 2020 2020 2020 2020     44.          
-000047a0: 2020 2020 4c20 2020 2020 2035 3220 2020      L      52   
-000047b0: 3334 2020 2020 4c27 2020 2020 2036 3720  34    L'     67 
-000047c0: 2020 3433 0a20 2020 2020 2020 2020 2020    43.           
-000047d0: 2020 2048 4c20 2031 3336 3230 2033 3533     HL  13620 353
-000047e0: 3420 2020 2048 4c27 2031 3734 3735 2034  4    HL' 17475 4
-000047f0: 3434 330a 2020 2020 2020 2020 2020 2020  443.            
-00004800: 2020 4120 2020 2020 2034 3820 2020 3330    A      48   30
-00004810: 2020 2020 4127 2020 2020 2036 3920 2020      A'     69   
-00004820: 3435 0a20 2020 2020 2020 2020 2020 2020  45.             
-00004830: 2020 2053 5a35 4833 504e 4320 2020 2020     SZ5H3PNC     
-00004840: 2020 2020 2020 535a 3548 3350 4e43 0a20        SZ5H3PNC. 
-00004850: 2020 2020 2020 2020 2020 2020 2046 2030               F 0
-00004860: 3031 3130 3030 3120 2020 2020 2020 2046  0110001        F
-00004870: 2720 3031 3030 3031 3130 0a20 2020 2020  ' 01000110.     
-00004880: 2020 2020 2020 2052 414d 2062 6c6f 636b         RAM block
-00004890: 2034 2028 3332 3736 382d 3439 3135 3120   4 (32768-49151 
-000048a0: 3830 3030 2d42 4646 4629 3a20 3236 3020  8000-BFFF): 260 
-000048b0: 6279 7465 7320 2863 6f6d 7072 6573 7365  bytes (compresse
-000048c0: 6429 0a20 2020 2020 2020 2020 2020 2052  d).            R
-000048d0: 414d 2062 6c6f 636b 2035 2028 3439 3135  AM block 5 (4915
-000048e0: 322d 3635 3533 3520 4330 3030 2d46 4646  2-65535 C000-FFF
-000048f0: 4629 3a20 3236 3020 6279 7465 7320 2863  F): 260 bytes (c
-00004900: 6f6d 7072 6573 7365 6429 0a20 2020 2020  ompressed).     
-00004910: 2020 2020 2020 2052 414d 2062 6c6f 636b         RAM block
-00004920: 2038 2028 3136 3338 342d 3332 3736 3720   8 (16384-32767 
-00004930: 3430 3030 2d37 4646 4629 3a20 3236 3020  4000-7FFF): 260 
-00004940: 6279 7465 7320 2863 6f6d 7072 6573 7365  bytes (compresse
-00004950: 6429 0a20 2020 2020 2020 2022 2222 0a20  d).        """. 
-00004960: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
-00004970: 745f 7a38 3028 6578 705f 6f75 7470 7574  t_z80(exp_output
-00004980: 2c20 6865 6164 6572 2c20 7665 7273 696f  , header, versio
-00004990: 6e3d 332c 2063 6f6d 7072 6573 733d 5472  n=3, compress=Tr
-000049a0: 7565 290a 0a20 2020 2064 6566 2074 6573  ue)..    def tes
-000049b0: 745f 7a38 3076 335f 3132 386b 5f75 6e63  t_z80v3_128k_unc
-000049c0: 6f6d 7072 6573 7365 6428 7365 6c66 293a  ompressed(self):
-000049d0: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
-000049e0: 3d20 6c69 7374 2872 616e 6765 2833 322c  = list(range(32,
-000049f0: 2036 3229 290a 2020 2020 2020 2020 6865   62)).        he
-00004a00: 6164 6572 5b36 3a38 5d20 3d20 5b30 2c20  ader[6:8] = [0, 
-00004a10: 305d 2023 2056 6572 7369 6f6e 2032 2b0a  0] # Version 2+.
-00004a20: 2020 2020 2020 2020 6865 6164 6572 5b31          header[1
-00004a30: 325d 203d 2038 2023 2042 4f52 4445 5220  2] = 8 # BORDER 
-00004a40: 340a 2020 2020 2020 2020 6865 6164 6572  4.        header
-00004a50: 5b32 395d 2026 3d20 3235 3120 2320 4973  [29] &= 251 # Is
-00004a60: 7375 6520 3220 656d 756c 6174 696f 6e20  sue 2 emulation 
-00004a70: 6469 7361 626c 6564 0a20 2020 2020 2020  disabled.       
-00004a80: 2068 6561 6465 722e 6578 7465 6e64 2828   header.extend((
-00004a90: 3534 2c20 3029 2920 2320 5265 6d61 696e  54, 0)) # Remain
-00004aa0: 696e 6720 6865 6164 6572 206c 656e 6774  ing header lengt
-00004ab0: 6820 2876 6572 7369 6f6e 2033 290a 2020  h (version 3).  
-00004ac0: 2020 2020 2020 6865 6164 6572 2e65 7874        header.ext
-00004ad0: 656e 6428 2832 372c 2031 3031 2929 2023  end((27, 101)) #
-00004ae0: 2050 433d 3235 3838 330a 2020 2020 2020   PC=25883.      
-00004af0: 2020 6865 6164 6572 2e61 7070 656e 6428    header.append(
-00004b00: 3429 2023 2031 3238 4b0a 2020 2020 2020  4) # 128K.      
-00004b10: 2020 6865 6164 6572 2e61 7070 656e 6428    header.append(
-00004b20: 3329 2023 2050 6f72 7420 3078 3766 6664  3) # Port 0x7ffd
-00004b30: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
-00004b40: 2b3d 205b 305d 202a 2028 6865 6164 6572  += [0] * (header
-00004b50: 5b2d 365d 202d 2034 290a 2020 2020 2020  [-6] - 4).      
-00004b60: 2020 6865 6164 6572 5b33 385d 203d 2032    header[38] = 2
-00004b70: 2023 2050 6f72 7420 3078 6666 6664 0a20   # Port 0xfffd. 
-00004b80: 2020 2020 2020 2070 6167 6573 203d 207b         pages = {
-00004b90: 6261 6e6b 3a20 5b30 5d20 2a20 3136 3338  bank: [0] * 1638
-00004ba0: 3420 666f 7220 6261 6e6b 2069 6e20 2831  4 for bank in (1
-00004bb0: 2c20 332c 2034 2c20 362c 2037 297d 0a20  , 3, 4, 6, 7)}. 
-00004bc0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-00004bd0: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
-00004be0: 2020 2020 5665 7273 696f 6e3a 2033 0a20      Version: 3. 
-00004bf0: 2020 2020 2020 2020 2020 204d 6163 6869             Machi
-00004c00: 6e65 3a20 3132 384b 2053 7065 6374 7275  ne: 128K Spectru
-00004c10: 6d0a 2020 2020 2020 2020 2020 2020 496e  m.            In
-00004c20: 7465 7272 7570 7473 3a20 656e 6162 6c65  terrupts: enable
-00004c30: 640a 2020 2020 2020 2020 2020 2020 496e  d.            In
-00004c40: 7465 7272 7570 7420 6d6f 6465 3a20 310a  terrupt mode: 1.
-00004c50: 2020 2020 2020 2020 2020 2020 4973 7375              Issu
-00004c60: 6520 3220 656d 756c 6174 696f 6e3a 2064  e 2 emulation: d
-00004c70: 6973 6162 6c65 640a 2020 2020 2020 2020  isabled.        
-00004c80: 2020 2020 542d 7374 6174 6573 3a20 3335      T-states: 35
-00004c90: 3435 330a 2020 2020 2020 2020 2020 2020  453.            
-00004ca0: 426f 7264 6572 3a20 340a 2020 2020 2020  Border: 4.      
-00004cb0: 2020 2020 2020 506f 7274 2024 4646 4644        Port $FFFD
-00004cc0: 3a20 320a 2020 2020 2020 2020 2020 2020  : 2.            
-00004cd0: 506f 7274 2024 3746 4644 3a20 3320 2d20  Port $7FFD: 3 - 
-00004ce0: 6261 6e6b 2033 2028 626c 6f63 6b20 3629  bank 3 (block 6)
-00004cf0: 2070 6167 6564 2069 6e74 6f20 3439 3135   paged into 4915
-00004d00: 322d 3635 3533 3520 4330 3030 2d46 4646  2-65535 C000-FFF
-00004d10: 460a 2020 2020 2020 2020 2020 2020 5265  F.            Re
-00004d20: 6769 7374 6572 733a 0a20 2020 2020 2020  gisters:.       
-00004d30: 2020 2020 2020 2050 4320 2032 3538 3833         PC  25883
-00004d40: 2036 3531 4220 2020 2053 5020 2031 3035   651B    SP  105
-00004d50: 3336 2032 3932 380a 2020 2020 2020 2020  36 2928.        
-00004d60: 2020 2020 2020 4958 2020 3134 3930 3520        IX  14905 
-00004d70: 3341 3339 2020 2020 4959 2020 3134 3339  3A39    IY  1439
-00004d80: 3120 3338 3337 0a20 2020 2020 2020 2020  1 3837.         
-00004d90: 2020 2020 2049 2020 2020 2020 3432 2020       I      42  
-00004da0: 2032 4120 2020 2052 2020 2020 2020 3433   2A    R      43
-00004db0: 2020 2032 420a 2020 2020 2020 2020 2020     2B.          
-00004dc0: 2020 2020 4220 2020 2020 2033 3520 2020      B      35   
-00004dd0: 3233 2020 2020 4227 2020 2020 2034 3820  23    B'     48 
-00004de0: 2020 3330 0a20 2020 2020 2020 2020 2020    30.           
-00004df0: 2020 2043 2020 2020 2020 3334 2020 2032     C      34   2
-00004e00: 3220 2020 2043 2720 2020 2020 3437 2020  2    C'     47  
-00004e10: 2032 460a 2020 2020 2020 2020 2020 2020   2F.            
-00004e20: 2020 4243 2020 2038 3939 3420 3233 3232    BC   8994 2322
-00004e30: 2020 2020 4243 2720 3132 3333 3520 3330      BC' 12335 30
-00004e40: 3246 0a20 2020 2020 2020 2020 2020 2020  2F.             
-00004e50: 2044 2020 2020 2020 3436 2020 2032 4520   D      46   2E 
-00004e60: 2020 2044 2720 2020 2020 3530 2020 2033     D'     50   3
-00004e70: 320a 2020 2020 2020 2020 2020 2020 2020  2.              
-00004e80: 4520 2020 2020 2034 3520 2020 3244 2020  E      45   2D  
-00004e90: 2020 4527 2020 2020 2034 3920 2020 3331    E'     49   31
-00004ea0: 0a20 2020 2020 2020 2020 2020 2020 2044  .              D
-00004eb0: 4520 2031 3138 3231 2032 4532 4420 2020  E  11821 2E2D   
-00004ec0: 2044 4527 2031 3238 3439 2033 3233 310a   DE' 12849 3231.
-00004ed0: 2020 2020 2020 2020 2020 2020 2020 4820                H 
-00004ee0: 2020 2020 2033 3720 2020 3235 2020 2020       37   25    
-00004ef0: 4827 2020 2020 2035 3220 2020 3334 0a20  H'     52   34. 
-00004f00: 2020 2020 2020 2020 2020 2020 204c 2020               L  
-00004f10: 2020 2020 3336 2020 2032 3420 2020 204c      36   24    L
-00004f20: 2720 2020 2020 3531 2020 2033 330a 2020  '     51   33.  
-00004f30: 2020 2020 2020 2020 2020 2020 484c 2020              HL  
-00004f40: 2039 3530 3820 3235 3234 2020 2020 484c   9508 2524    HL
-00004f50: 2720 3133 3336 3320 3334 3333 0a20 2020  ' 13363 3433.   
-00004f60: 2020 2020 2020 2020 2020 2041 2020 2020             A    
-00004f70: 2020 3332 2020 2032 3020 2020 2041 2720    32   20    A' 
-00004f80: 2020 2020 3533 2020 2033 350a 2020 2020      53   35.    
-00004f90: 2020 2020 2020 2020 2020 2020 535a 3548              SZ5H
-00004fa0: 3350 4e43 2020 2020 2020 2020 2020 2053  3PNC           S
-00004fb0: 5a35 4833 504e 430a 2020 2020 2020 2020  Z5H3PNC.        
-00004fc0: 2020 2020 2020 4620 3030 3130 3030 3031        F 00100001
-00004fd0: 2020 2020 2020 2020 4627 2030 3031 3130          F' 00110
-00004fe0: 3131 300a 2020 2020 2020 2020 2020 2020  110.            
-00004ff0: 5241 4d20 626c 6f63 6b20 333a 2031 3633  RAM block 3: 163
-00005000: 3834 2062 7974 6573 2028 756e 636f 6d70  84 bytes (uncomp
-00005010: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
-00005020: 2020 2020 5241 4d20 626c 6f63 6b20 343a      RAM block 4:
-00005030: 2031 3633 3834 2062 7974 6573 2028 756e   16384 bytes (un
-00005040: 636f 6d70 7265 7373 6564 290a 2020 2020  compressed).    
-00005050: 2020 2020 2020 2020 5241 4d20 626c 6f63          RAM bloc
-00005060: 6b20 3520 2833 3237 3638 2d34 3931 3531  k 5 (32768-49151
-00005070: 2038 3030 302d 4246 4646 293a 2031 3633   8000-BFFF): 163
-00005080: 3834 2062 7974 6573 2028 756e 636f 6d70  84 bytes (uncomp
-00005090: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
-000050a0: 2020 2020 5241 4d20 626c 6f63 6b20 3620      RAM block 6 
-000050b0: 2834 3931 3532 2d36 3535 3335 2043 3030  (49152-65535 C00
-000050c0: 302d 4646 4646 293a 2031 3633 3834 2062  0-FFFF): 16384 b
-000050d0: 7974 6573 2028 756e 636f 6d70 7265 7373  ytes (uncompress
-000050e0: 6564 290a 2020 2020 2020 2020 2020 2020  ed).            
-000050f0: 5241 4d20 626c 6f63 6b20 373a 2031 3633  RAM block 7: 163
-00005100: 3834 2062 7974 6573 2028 756e 636f 6d70  84 bytes (uncomp
-00005110: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
-00005120: 2020 2020 5241 4d20 626c 6f63 6b20 3820      RAM block 8 
-00005130: 2831 3633 3834 2d33 3237 3637 2034 3030  (16384-32767 400
-00005140: 302d 3746 4646 293a 2031 3633 3834 2062  0-7FFF): 16384 b
-00005150: 7974 6573 2028 756e 636f 6d70 7265 7373  ytes (uncompress
-00005160: 6564 290a 2020 2020 2020 2020 2020 2020  ed).            
-00005170: 5241 4d20 626c 6f63 6b20 393a 2031 3633  RAM block 9: 163
-00005180: 3834 2062 7974 6573 2028 756e 636f 6d70  84 bytes (uncomp
-00005190: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
-000051a0: 2020 2020 5241 4d20 626c 6f63 6b20 3130      RAM block 10
-000051b0: 3a20 3136 3338 3420 6279 7465 7320 2875  : 16384 bytes (u
-000051c0: 6e63 6f6d 7072 6573 7365 6429 0a20 2020  ncompressed).   
-000051d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000051e0: 2073 656c 662e 5f74 6573 745f 7a38 3028   self._test_z80(
-000051f0: 6578 705f 6f75 7470 7574 2c20 6865 6164  exp_output, head
-00005200: 6572 2c20 636f 6d70 7265 7373 3d46 616c  er, compress=Fal
-00005210: 7365 2c20 6d61 6368 696e 655f 6964 3d34  se, machine_id=4
-00005220: 2c20 7061 6765 733d 7061 6765 7329 0a0a  , pages=pages)..
-00005230: 2020 2020 6465 6620 7465 7374 5f7a 3830      def test_z80
-00005240: 7633 5f31 3238 6b5f 636f 6d70 7265 7373  v3_128k_compress
-00005250: 6564 2873 656c 6629 3a0a 2020 2020 2020  ed(self):.      
-00005260: 2020 6865 6164 6572 203d 206c 6973 7428    header = list(
-00005270: 7261 6e67 6528 3332 2c20 3632 2929 0a20  range(32, 62)). 
-00005280: 2020 2020 2020 2068 6561 6465 725b 363a         header[6:
-00005290: 385d 203d 205b 302c 2030 5d20 2320 5665  8] = [0, 0] # Ve
-000052a0: 7273 696f 6e20 322b 0a20 2020 2020 2020  rsion 2+.       
-000052b0: 2068 6561 6465 725b 3132 5d20 3d20 3134   header[12] = 14
-000052c0: 2023 2042 4f52 4445 5220 370a 2020 2020   # BORDER 7.    
-000052d0: 2020 2020 6865 6164 6572 5b32 395d 207c      header[29] |
-000052e0: 3d20 3420 2320 4973 7375 6520 3220 656d  = 4 # Issue 2 em
-000052f0: 756c 6174 696f 6e20 656e 6162 6c65 640a  ulation enabled.
-00005300: 2020 2020 2020 2020 6865 6164 6572 2e65          header.e
-00005310: 7874 656e 6428 2835 342c 2030 2929 2023  xtend((54, 0)) #
-00005320: 2052 656d 6169 6e69 6e67 2068 6561 6465   Remaining heade
-00005330: 7220 6c65 6e67 7468 2028 7665 7273 696f  r length (versio
-00005340: 6e20 3329 0a20 2020 2020 2020 2068 6561  n 3).        hea
-00005350: 6465 722e 6578 7465 6e64 2828 3233 372c  der.extend((237,
-00005360: 2032 3534 2929 2023 2050 433d 3635 3236   254)) # PC=6526
-00005370: 310a 2020 2020 2020 2020 6865 6164 6572  1.        header
-00005380: 2e61 7070 656e 6428 3429 2023 2031 3238  .append(4) # 128
-00005390: 4b0a 2020 2020 2020 2020 6865 6164 6572  K.        header
-000053a0: 2e61 7070 656e 6428 3329 2023 2050 6f72  .append(3) # Por
-000053b0: 7420 3078 3766 6664 0a20 2020 2020 2020  t 0x7ffd.       
-000053c0: 2068 6561 6465 7220 2b3d 205b 305d 202a   header += [0] *
-000053d0: 2028 6865 6164 6572 5b2d 365d 202d 2034   (header[-6] - 4
-000053e0: 290a 2020 2020 2020 2020 6865 6164 6572  ).        header
-000053f0: 5b33 385d 203d 2037 2023 2050 6f72 7420  [38] = 7 # Port 
-00005400: 3078 6666 6664 0a20 2020 2020 2020 2068  0xfffd.        h
-00005410: 6561 6465 725b 3535 3a35 385d 203d 205b  eader[55:58] = [
-00005420: 3632 2c20 3639 2c20 335d 2023 2054 2d73  62, 69, 3] # T-s
-00005430: 7461 7465 730a 2020 2020 2020 2020 7061  tates.        pa
-00005440: 6765 7320 3d20 7b62 616e 6b3a 205b 305d  ges = {bank: [0]
-00005450: 202a 2031 3633 3834 2066 6f72 2062 616e   * 16384 for ban
-00005460: 6b20 696e 2028 312c 2033 2c20 342c 2036  k in (1, 3, 4, 6
-00005470: 2c20 3729 7d0a 2020 2020 2020 2020 6578  , 7)}.        ex
-00005480: 705f 6f75 7470 7574 203d 2022 2222 0a20  p_output = """. 
-00005490: 2020 2020 2020 2020 2020 2056 6572 7369             Versi
-000054a0: 6f6e 3a20 330a 2020 2020 2020 2020 2020  on: 3.          
-000054b0: 2020 4d61 6368 696e 653a 2031 3238 4b20    Machine: 128K 
-000054c0: 5370 6563 7472 756d 0a20 2020 2020 2020  Spectrum.       
-000054d0: 2020 2020 2049 6e74 6572 7275 7074 733a       Interrupts:
-000054e0: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
-000054f0: 2020 2020 2049 6e74 6572 7275 7074 206d       Interrupt m
-00005500: 6f64 653a 2031 0a20 2020 2020 2020 2020  ode: 1.         
-00005510: 2020 2049 7373 7565 2032 2065 6d75 6c61     Issue 2 emula
-00005520: 7469 6f6e 3a20 656e 6162 6c65 640a 2020  tion: enabled.  
-00005530: 2020 2020 2020 2020 2020 542d 7374 6174            T-stat
-00005540: 6573 3a20 300a 2020 2020 2020 2020 2020  es: 0.          
-00005550: 2020 426f 7264 6572 3a20 370a 2020 2020    Border: 7.    
-00005560: 2020 2020 2020 2020 506f 7274 2024 4646          Port $FF
-00005570: 4644 3a20 370a 2020 2020 2020 2020 2020  FD: 7.          
-00005580: 2020 506f 7274 2024 3746 4644 3a20 3320    Port $7FFD: 3 
-00005590: 2d20 6261 6e6b 2033 2028 626c 6f63 6b20  - bank 3 (block 
-000055a0: 3629 2070 6167 6564 2069 6e74 6f20 3439  6) paged into 49
-000055b0: 3135 322d 3635 3533 3520 4330 3030 2d46  152-65535 C000-F
-000055c0: 4646 460a 2020 2020 2020 2020 2020 2020  FFF.            
-000055d0: 5265 6769 7374 6572 733a 0a20 2020 2020  Registers:.     
-000055e0: 2020 2020 2020 2020 2050 4320 2036 3532           PC  652
-000055f0: 3631 2046 4545 4420 2020 2053 5020 2031  61 FEED    SP  1
-00005600: 3035 3336 2032 3932 380a 2020 2020 2020  0536 2928.      
-00005610: 2020 2020 2020 2020 4958 2020 3134 3930          IX  1490
-00005620: 3520 3341 3339 2020 2020 4959 2020 3134  5 3A39    IY  14
-00005630: 3339 3120 3338 3337 0a20 2020 2020 2020  391 3837.       
-00005640: 2020 2020 2020 2049 2020 2020 2020 3432         I      42
-00005650: 2020 2032 4120 2020 2052 2020 2020 2020     2A    R      
-00005660: 3433 2020 2032 420a 2020 2020 2020 2020  43   2B.        
-00005670: 2020 2020 2020 4220 2020 2020 2033 3520        B      35 
-00005680: 2020 3233 2020 2020 4227 2020 2020 2034    23    B'     4
-00005690: 3820 2020 3330 0a20 2020 2020 2020 2020  8   30.         
-000056a0: 2020 2020 2043 2020 2020 2020 3334 2020       C      34  
-000056b0: 2032 3220 2020 2043 2720 2020 2020 3437   22    C'     47
-000056c0: 2020 2032 460a 2020 2020 2020 2020 2020     2F.          
-000056d0: 2020 2020 4243 2020 2038 3939 3420 3233      BC   8994 23
-000056e0: 3232 2020 2020 4243 2720 3132 3333 3520  22    BC' 12335 
-000056f0: 3330 3246 0a20 2020 2020 2020 2020 2020  302F.           
-00005700: 2020 2044 2020 2020 2020 3436 2020 2032     D      46   2
-00005710: 4520 2020 2044 2720 2020 2020 3530 2020  E    D'     50  
-00005720: 2033 320a 2020 2020 2020 2020 2020 2020   32.            
-00005730: 2020 4520 2020 2020 2034 3520 2020 3244    E      45   2D
-00005740: 2020 2020 4527 2020 2020 2034 3920 2020      E'     49   
-00005750: 3331 0a20 2020 2020 2020 2020 2020 2020  31.             
-00005760: 2044 4520 2031 3138 3231 2032 4532 4420   DE  11821 2E2D 
-00005770: 2020 2044 4527 2031 3238 3439 2033 3233     DE' 12849 323
-00005780: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00005790: 4820 2020 2020 2033 3720 2020 3235 2020  H      37   25  
-000057a0: 2020 4827 2020 2020 2035 3220 2020 3334    H'     52   34
-000057b0: 0a20 2020 2020 2020 2020 2020 2020 204c  .              L
-000057c0: 2020 2020 2020 3336 2020 2032 3420 2020        36   24   
-000057d0: 204c 2720 2020 2020 3531 2020 2033 330a   L'     51   33.
-000057e0: 2020 2020 2020 2020 2020 2020 2020 484c                HL
-000057f0: 2020 2039 3530 3820 3235 3234 2020 2020     9508 2524    
-00005800: 484c 2720 3133 3336 3320 3334 3333 0a20  HL' 13363 3433. 
-00005810: 2020 2020 2020 2020 2020 2020 2041 2020               A  
-00005820: 2020 2020 3332 2020 2032 3020 2020 2041      32   20    A
-00005830: 2720 2020 2020 3533 2020 2033 350a 2020  '     53   35.  
-00005840: 2020 2020 2020 2020 2020 2020 2020 535a                SZ
-00005850: 3548 3350 4e43 2020 2020 2020 2020 2020  5H3PNC          
-00005860: 2053 5a35 4833 504e 430a 2020 2020 2020   SZ5H3PNC.      
-00005870: 2020 2020 2020 2020 4620 3030 3130 3030          F 001000
-00005880: 3031 2020 2020 2020 2020 4627 2030 3031  01        F' 001
-00005890: 3130 3131 300a 2020 2020 2020 2020 2020  10110.          
-000058a0: 2020 5241 4d20 626c 6f63 6b20 333a 2032    RAM block 3: 2
-000058b0: 3630 2062 7974 6573 2028 636f 6d70 7265  60 bytes (compre
-000058c0: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
-000058d0: 2020 5241 4d20 626c 6f63 6b20 343a 2032    RAM block 4: 2
-000058e0: 3630 2062 7974 6573 2028 636f 6d70 7265  60 bytes (compre
-000058f0: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
-00005900: 2020 5241 4d20 626c 6f63 6b20 3520 2833    RAM block 5 (3
-00005910: 3237 3638 2d34 3931 3531 2038 3030 302d  2768-49151 8000-
-00005920: 4246 4646 293a 2032 3630 2062 7974 6573  BFFF): 260 bytes
-00005930: 2028 636f 6d70 7265 7373 6564 290a 2020   (compressed).  
-00005940: 2020 2020 2020 2020 2020 5241 4d20 626c            RAM bl
-00005950: 6f63 6b20 3620 2834 3931 3532 2d36 3535  ock 6 (49152-655
-00005960: 3335 2043 3030 302d 4646 4646 293a 2032  35 C000-FFFF): 2
-00005970: 3630 2062 7974 6573 2028 636f 6d70 7265  60 bytes (compre
-00005980: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
-00005990: 2020 5241 4d20 626c 6f63 6b20 373a 2032    RAM block 7: 2
-000059a0: 3630 2062 7974 6573 2028 636f 6d70 7265  60 bytes (compre
-000059b0: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
-000059c0: 2020 5241 4d20 626c 6f63 6b20 3820 2831    RAM block 8 (1
-000059d0: 3633 3834 2d33 3237 3637 2034 3030 302d  6384-32767 4000-
-000059e0: 3746 4646 293a 2032 3630 2062 7974 6573  7FFF): 260 bytes
-000059f0: 2028 636f 6d70 7265 7373 6564 290a 2020   (compressed).  
-00005a00: 2020 2020 2020 2020 2020 5241 4d20 626c            RAM bl
-00005a10: 6f63 6b20 393a 2032 3630 2062 7974 6573  ock 9: 260 bytes
-00005a20: 2028 636f 6d70 7265 7373 6564 290a 2020   (compressed).  
-00005a30: 2020 2020 2020 2020 2020 5241 4d20 626c            RAM bl
-00005a40: 6f63 6b20 3130 3a20 3236 3020 6279 7465  ock 10: 260 byte
-00005a50: 7320 2863 6f6d 7072 6573 7365 6429 0a20  s (compressed). 
-00005a60: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00005a70: 2020 2073 656c 662e 5f74 6573 745f 7a38     self._test_z8
-00005a80: 3028 6578 705f 6f75 7470 7574 2c20 6865  0(exp_output, he
-00005a90: 6164 6572 2c20 636f 6d70 7265 7373 3d54  ader, compress=T
-00005aa0: 7275 652c 206d 6163 6869 6e65 5f69 643d  rue, machine_id=
-00005ab0: 342c 2070 6167 6573 3d70 6167 6573 290a  4, pages=pages).
-00005ac0: 0a20 2020 2064 6566 2074 6573 745f 737a  .    def test_sz
-00005ad0: 785f 3136 6b5f 756e 636f 6d70 7265 7373  x_16k_uncompress
-00005ae0: 6564 2873 656c 6629 3a0a 2020 2020 2020  ed(self):.      
-00005af0: 2020 7265 6769 7374 6572 7320 3d20 6c69    registers = li
-00005b00: 7374 2872 616e 6765 2833 322c 2035 3829  st(range(32, 58)
-00005b10: 2920 2320 5265 6769 7374 6572 730a 2020  ) # Registers.  
-00005b20: 2020 2020 2020 7265 6769 7374 6572 732e        registers.
-00005b30: 6578 7465 6e64 2828 302c 2030 2929 2023  extend((0, 0)) #
-00005b40: 2049 4646 312c 2049 4646 320a 2020 2020   IFF1, IFF2.    
-00005b50: 2020 2020 7265 6769 7374 6572 732e 6170      registers.ap
-00005b60: 7065 6e64 2831 2920 2320 496e 7465 7272  pend(1) # Interr
-00005b70: 7570 7420 6d6f 6465 0a20 2020 2020 2020  upt mode.       
-00005b80: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
-00005b90: 6428 2830 2c20 302c 2030 2c20 3029 2920  d((0, 0, 0, 0)) 
-00005ba0: 2320 6477 4379 636c 6573 5374 6172 740a  # dwCyclesStart.
-00005bb0: 2020 2020 2020 2020 7265 6769 7374 6572          register
-00005bc0: 732e 6578 7465 6e64 2828 302c 2030 2c20  s.extend((0, 0, 
-00005bd0: 302c 2030 2929 0a20 2020 2020 2020 2065  0, 0)).        e
-00005be0: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
-00005bf0: 2020 2020 2020 2020 2020 2020 5665 7273              Vers
-00005c00: 696f 6e3a 2031 2e34 0a20 2020 2020 2020  ion: 1.4.       
-00005c10: 2020 2020 204d 6163 6869 6e65 3a20 3136       Machine: 16
-00005c20: 4b20 5a58 2053 7065 6374 7275 6d0a 2020  K ZX Spectrum.  
-00005c30: 2020 2020 2020 2020 2020 5350 4352 3a20            SPCR: 
-00005c40: 3820 6279 7465 730a 2020 2020 2020 2020  8 bytes.        
-00005c50: 2020 2020 2020 426f 7264 6572 3a20 310a        Border: 1.
-00005c60: 2020 2020 2020 2020 2020 2020 5a38 3052              Z80R
-00005c70: 3a20 3337 2062 7974 6573 0a20 2020 2020  : 37 bytes.     
-00005c80: 2020 2020 2020 2020 2049 6e74 6572 7275           Interru
-00005c90: 7074 733a 2064 6973 6162 6c65 640a 2020  pts: disabled.  
-00005ca0: 2020 2020 2020 2020 2020 2020 496e 7465              Inte
-00005cb0: 7272 7570 7420 6d6f 6465 3a20 310a 2020  rrupt mode: 1.  
-00005cc0: 2020 2020 2020 2020 2020 2020 542d 7374              T-st
-00005cd0: 6174 6573 3a20 300a 2020 2020 2020 2020  ates: 0.        
-00005ce0: 2020 2020 2020 5043 2020 3134 3133 3420        PC  14134 
-00005cf0: 3337 3336 2020 2020 5350 2020 3133 3632  3736    SP  1362
-00005d00: 3020 3335 3334 0a20 2020 2020 2020 2020  0 3534.         
-00005d10: 2020 2020 2049 5820 2031 3235 3932 2033       IX  12592 3
-00005d20: 3133 3020 2020 2049 5920 2031 3331 3036  130    IY  13106
-00005d30: 2033 3333 320a 2020 2020 2020 2020 2020   3332.          
-00005d40: 2020 2020 4920 2020 2020 2035 3620 2020      I      56   
-00005d50: 3338 2020 2020 5220 2020 2020 2035 3720  38    R      57 
-00005d60: 2020 3339 0a20 2020 2020 2020 2020 2020    39.           
-00005d70: 2020 2042 2020 2020 2020 3335 2020 2032     B      35   2
-00005d80: 3320 2020 2042 2720 2020 2020 3433 2020  3    B'     43  
-00005d90: 2032 420a 2020 2020 2020 2020 2020 2020   2B.            
-00005da0: 2020 4320 2020 2020 2033 3420 2020 3232    C      34   22
-00005db0: 2020 2020 4327 2020 2020 2034 3220 2020      C'     42   
-00005dc0: 3241 0a20 2020 2020 2020 2020 2020 2020  2A.             
-00005dd0: 2042 4320 2020 3839 3934 2032 3332 3220   BC   8994 2322 
-00005de0: 2020 2042 4327 2031 3130 3530 2032 4232     BC' 11050 2B2
-00005df0: 410a 2020 2020 2020 2020 2020 2020 2020  A.              
-00005e00: 4420 2020 2020 2033 3720 2020 3235 2020  D      37   25  
-00005e10: 2020 4427 2020 2020 2034 3520 2020 3244    D'     45   2D
-00005e20: 0a20 2020 2020 2020 2020 2020 2020 2045  .              E
-00005e30: 2020 2020 2020 3336 2020 2032 3420 2020        36   24   
-00005e40: 2045 2720 2020 2020 3434 2020 2032 430a   E'     44   2C.
-00005e50: 2020 2020 2020 2020 2020 2020 2020 4445                DE
-00005e60: 2020 2039 3530 3820 3235 3234 2020 2020     9508 2524    
-00005e70: 4445 2720 3131 3536 3420 3244 3243 0a20  DE' 11564 2D2C. 
-00005e80: 2020 2020 2020 2020 2020 2020 2048 2020               H  
-00005e90: 2020 2020 3339 2020 2032 3720 2020 2048      39   27    H
-00005ea0: 2720 2020 2020 3437 2020 2032 460a 2020  '     47   2F.  
-00005eb0: 2020 2020 2020 2020 2020 2020 4c20 2020              L   
-00005ec0: 2020 2033 3820 2020 3236 2020 2020 4c27     38   26    L'
-00005ed0: 2020 2020 2034 3620 2020 3245 0a20 2020       46   2E.   
-00005ee0: 2020 2020 2020 2020 2020 2048 4c20 2031             HL  1
-00005ef0: 3030 3232 2032 3732 3620 2020 2048 4c27  0022 2726    HL'
-00005f00: 2031 3230 3738 2032 4632 450a 2020 2020   12078 2F2E.    
-00005f10: 2020 2020 2020 2020 2020 4120 2020 2020            A     
-00005f20: 2033 3320 2020 3231 2020 2020 4127 2020   33   21    A'  
-00005f30: 2020 2034 3120 2020 3239 0a20 2020 2020     41   29.     
-00005f40: 2020 2020 2020 2020 2020 2053 5a35 4833             SZ5H3
-00005f50: 504e 4320 2020 2020 2020 2020 2020 535a  PNC           SZ
-00005f60: 3548 3350 4e43 0a20 2020 2020 2020 2020  5H3PNC.         
-00005f70: 2020 2020 2046 2030 3031 3030 3030 3020       F 00100000 
-00005f80: 2020 2020 2020 2046 2720 3030 3130 3130         F' 001010
-00005f90: 3030 0a20 2020 2020 2020 2020 2020 2052  00.            R
-00005fa0: 414d 503a 2031 3633 3837 2062 7974 6573  AMP: 16387 bytes
-00005fb0: 0a20 2020 2020 2020 2020 2020 2020 2050  .              P
-00005fc0: 6167 653a 2035 0a20 2020 2020 2020 2020  age: 5.         
-00005fd0: 2020 2020 2052 414d 3a20 3136 3338 342d       RAM: 16384-
-00005fe0: 3332 3736 3720 3430 3030 2d37 4646 463a  32767 4000-7FFF:
-00005ff0: 2031 3633 3834 2062 7974 6573 2c20 756e   16384 bytes, un
-00006000: 636f 6d70 7265 7373 6564 0a20 2020 2020  compressed.     
-00006010: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-00006020: 656c 662e 5f74 6573 745f 737a 7828 6578  elf._test_szx(ex
-00006030: 705f 6f75 7470 7574 2c20 7265 6769 7374  p_output, regist
-00006040: 6572 732c 2062 6f72 6465 723d 312c 2063  ers, border=1, c
-00006050: 6f6d 7072 6573 733d 4661 6c73 652c 206d  ompress=False, m
-00006060: 6163 6869 6e65 5f69 643d 3029 0a0a 2020  achine_id=0)..  
-00006070: 2020 6465 6620 7465 7374 5f73 7a78 5f31    def test_szx_1
-00006080: 366b 5f63 6f6d 7072 6573 7365 6428 7365  6k_compressed(se
-00006090: 6c66 293a 0a20 2020 2020 2020 2072 6567  lf):.        reg
-000060a0: 6973 7465 7273 203d 206c 6973 7428 7261  isters = list(ra
-000060b0: 6e67 6528 3332 2c20 3538 2929 2023 2052  nge(32, 58)) # R
-000060c0: 6567 6973 7465 7273 0a20 2020 2020 2020  egisters.       
-000060d0: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
-000060e0: 6428 2830 2c20 3029 2920 2320 4946 4631  d((0, 0)) # IFF1
-000060f0: 2c20 4946 4632 0a20 2020 2020 2020 2072  , IFF2.        r
-00006100: 6567 6973 7465 7273 2e61 7070 656e 6428  egisters.append(
-00006110: 3129 2023 2049 6e74 6572 7275 7074 206d  1) # Interrupt m
-00006120: 6f64 650a 2020 2020 2020 2020 7265 6769  ode.        regi
-00006130: 7374 6572 732e 6578 7465 6e64 2828 312c  sters.extend((1,
-00006140: 2030 2c20 302c 2030 2929 2023 2064 7743   0, 0, 0)) # dwC
-00006150: 7963 6c65 7353 7461 7274 0a20 2020 2020  yclesStart.     
-00006160: 2020 2072 6567 6973 7465 7273 2e65 7874     registers.ext
-00006170: 656e 6428 2830 2c20 302c 2030 2c20 3029  end((0, 0, 0, 0)
-00006180: 290a 2020 2020 2020 2020 6578 705f 6f75  ).        exp_ou
-00006190: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
-000061a0: 2020 2020 2020 2056 6572 7369 6f6e 3a20         Version: 
-000061b0: 312e 340a 2020 2020 2020 2020 2020 2020  1.4.            
-000061c0: 4d61 6368 696e 653a 2031 364b 205a 5820  Machine: 16K ZX 
-000061d0: 5370 6563 7472 756d 0a20 2020 2020 2020  Spectrum.       
-000061e0: 2020 2020 2053 5043 523a 2038 2062 7974       SPCR: 8 byt
-000061f0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
-00006200: 2042 6f72 6465 723a 2032 0a20 2020 2020   Border: 2.     
-00006210: 2020 2020 2020 204b 4559 423a 2035 2062         KEYB: 5 b
-00006220: 7974 6573 0a20 2020 2020 2020 2020 2020  ytes.           
-00006230: 2020 2049 7373 7565 2032 2065 6d75 6c61     Issue 2 emula
-00006240: 7469 6f6e 3a20 6469 7361 626c 6564 0a20  tion: disabled. 
-00006250: 2020 2020 2020 2020 2020 205a 3830 523a             Z80R:
-00006260: 2033 3720 6279 7465 730a 2020 2020 2020   37 bytes.      
-00006270: 2020 2020 2020 2020 496e 7465 7272 7570          Interrup
-00006280: 7473 3a20 6469 7361 626c 6564 0a20 2020  ts: disabled.   
-00006290: 2020 2020 2020 2020 2020 2049 6e74 6572             Inter
-000062a0: 7275 7074 206d 6f64 653a 2031 0a20 2020  rupt mode: 1.   
-000062b0: 2020 2020 2020 2020 2020 2054 2d73 7461             T-sta
-000062c0: 7465 733a 2031 0a20 2020 2020 2020 2020  tes: 1.         
-000062d0: 2020 2020 2050 4320 2031 3431 3334 2033       PC  14134 3
-000062e0: 3733 3620 2020 2053 5020 2031 3336 3230  736    SP  13620
-000062f0: 2033 3533 340a 2020 2020 2020 2020 2020   3534.          
-00006300: 2020 2020 4958 2020 3132 3539 3220 3331      IX  12592 31
-00006310: 3330 2020 2020 4959 2020 3133 3130 3620  30    IY  13106 
-00006320: 3333 3332 0a20 2020 2020 2020 2020 2020  3332.           
-00006330: 2020 2049 2020 2020 2020 3536 2020 2033     I      56   3
-00006340: 3820 2020 2052 2020 2020 2020 3537 2020  8    R      57  
-00006350: 2033 390a 2020 2020 2020 2020 2020 2020   39.            
-00006360: 2020 4220 2020 2020 2033 3520 2020 3233    B      35   23
-00006370: 2020 2020 4227 2020 2020 2034 3320 2020      B'     43   
-00006380: 3242 0a20 2020 2020 2020 2020 2020 2020  2B.             
-00006390: 2043 2020 2020 2020 3334 2020 2032 3220   C      34   22 
-000063a0: 2020 2043 2720 2020 2020 3432 2020 2032     C'     42   2
-000063b0: 410a 2020 2020 2020 2020 2020 2020 2020  A.              
-000063c0: 4243 2020 2038 3939 3420 3233 3232 2020  BC   8994 2322  
-000063d0: 2020 4243 2720 3131 3035 3020 3242 3241    BC' 11050 2B2A
-000063e0: 0a20 2020 2020 2020 2020 2020 2020 2044  .              D
-000063f0: 2020 2020 2020 3337 2020 2032 3520 2020        37   25   
-00006400: 2044 2720 2020 2020 3435 2020 2032 440a   D'     45   2D.
-00006410: 2020 2020 2020 2020 2020 2020 2020 4520                E 
-00006420: 2020 2020 2033 3620 2020 3234 2020 2020       36   24    
-00006430: 4527 2020 2020 2034 3420 2020 3243 0a20  E'     44   2C. 
-00006440: 2020 2020 2020 2020 2020 2020 2044 4520               DE 
-00006450: 2020 3935 3038 2032 3532 3420 2020 2044    9508 2524    D
-00006460: 4527 2031 3135 3634 2032 4432 430a 2020  E' 11564 2D2C.  
-00006470: 2020 2020 2020 2020 2020 2020 4820 2020              H   
-00006480: 2020 2033 3920 2020 3237 2020 2020 4827     39   27    H'
-00006490: 2020 2020 2034 3720 2020 3246 0a20 2020       47   2F.   
-000064a0: 2020 2020 2020 2020 2020 204c 2020 2020             L    
-000064b0: 2020 3338 2020 2032 3620 2020 204c 2720    38   26    L' 
-000064c0: 2020 2020 3436 2020 2032 450a 2020 2020      46   2E.    
-000064d0: 2020 2020 2020 2020 2020 484c 2020 3130            HL  10
-000064e0: 3032 3220 3237 3236 2020 2020 484c 2720  022 2726    HL' 
-000064f0: 3132 3037 3820 3246 3245 0a20 2020 2020  12078 2F2E.     
-00006500: 2020 2020 2020 2020 2041 2020 2020 2020           A      
-00006510: 3333 2020 2032 3120 2020 2041 2720 2020  33   21    A'   
-00006520: 2020 3431 2020 2032 390a 2020 2020 2020    41   29.      
-00006530: 2020 2020 2020 2020 2020 535a 3548 3350            SZ5H3P
-00006540: 4e43 2020 2020 2020 2020 2020 2053 5a35  NC           SZ5
-00006550: 4833 504e 430a 2020 2020 2020 2020 2020  H3PNC.          
-00006560: 2020 2020 4620 3030 3130 3030 3030 2020      F 00100000  
-00006570: 2020 2020 2020 4627 2030 3031 3031 3030        F' 0010100
-00006580: 300a 2020 2020 2020 2020 2020 2020 5241  0.            RA
-00006590: 4d50 3a20 3432 2062 7974 6573 0a20 2020  MP: 42 bytes.   
-000065a0: 2020 2020 2020 2020 2020 2050 6167 653a             Page:
-000065b0: 2035 0a20 2020 2020 2020 2020 2020 2020   5.             
-000065c0: 2052 414d 3a20 3136 3338 342d 3332 3736   RAM: 16384-3276
-000065d0: 3720 3430 3030 2d37 4646 463a 2033 3920  7 4000-7FFF: 39 
-000065e0: 6279 7465 732c 2063 6f6d 7072 6573 7365  bytes, compresse
-000065f0: 640a 2020 2020 2020 2020 2222 220a 2020  d.        """.  
-00006600: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
-00006610: 5f73 7a78 2865 7870 5f6f 7574 7075 742c  _szx(exp_output,
-00006620: 2072 6567 6973 7465 7273 2c20 626f 7264   registers, bord
-00006630: 6572 3d32 2c20 6b65 7962 3d54 7275 652c  er=2, keyb=True,
-00006640: 2069 7373 7565 323d 302c 2063 6f6d 7072   issue2=0, compr
-00006650: 6573 733d 5472 7565 2c20 6d61 6368 696e  ess=True, machin
-00006660: 655f 6964 3d30 290a 0a20 2020 2064 6566  e_id=0)..    def
-00006670: 2074 6573 745f 737a 785f 3438 6b5f 756e   test_szx_48k_un
-00006680: 636f 6d70 7265 7373 6564 2873 656c 6629  compressed(self)
-00006690: 3a0a 2020 2020 2020 2020 7265 6769 7374  :.        regist
-000066a0: 6572 7320 3d20 6c69 7374 2872 616e 6765  ers = list(range
-000066b0: 2832 3629 2920 2320 5265 6769 7374 6572  (26)) # Register
-000066c0: 730a 2020 2020 2020 2020 7265 6769 7374  s.        regist
-000066d0: 6572 732e 6578 7465 6e64 2828 312c 2031  ers.extend((1, 1
-000066e0: 2929 2023 2049 4646 312c 2049 4646 320a  )) # IFF1, IFF2.
-000066f0: 2020 2020 2020 2020 7265 6769 7374 6572          register
-00006700: 732e 6170 7065 6e64 2832 2920 2320 496e  s.append(2) # In
-00006710: 7465 7272 7570 7420 6d6f 6465 0a20 2020  terrupt mode.   
-00006720: 2020 2020 2072 6567 6973 7465 7273 2e65       registers.e
-00006730: 7874 656e 6428 2832 3535 2c20 3136 2c20  xtend((255, 16, 
-00006740: 312c 2030 2929 2023 2064 7743 7963 6c65  1, 0)) # dwCycle
-00006750: 7353 7461 7274 0a20 2020 2020 2020 2072  sStart.        r
-00006760: 6567 6973 7465 7273 2e65 7874 656e 6428  egisters.extend(
-00006770: 2830 2c20 302c 2030 2c20 3029 290a 2020  (0, 0, 0, 0)).  
-00006780: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00006790: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-000067a0: 2020 2056 6572 7369 6f6e 3a20 312e 340a     Version: 1.4.
-000067b0: 2020 2020 2020 2020 2020 2020 4d61 6368              Mach
-000067c0: 696e 653a 2034 384b 205a 5820 5370 6563  ine: 48K ZX Spec
-000067d0: 7472 756d 0a20 2020 2020 2020 2020 2020  trum.           
-000067e0: 2053 5043 523a 2038 2062 7974 6573 0a20   SPCR: 8 bytes. 
-000067f0: 2020 2020 2020 2020 2020 2020 2042 6f72               Bor
-00006800: 6465 723a 2033 0a20 2020 2020 2020 2020  der: 3.         
-00006810: 2020 204b 4559 423a 2035 2062 7974 6573     KEYB: 5 bytes
-00006820: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
-00006830: 7373 7565 2032 2065 6d75 6c61 7469 6f6e  ssue 2 emulation
-00006840: 3a20 656e 6162 6c65 640a 2020 2020 2020  : enabled.      
-00006850: 2020 2020 2020 5a38 3052 3a20 3337 2062        Z80R: 37 b
-00006860: 7974 6573 0a20 2020 2020 2020 2020 2020  ytes.           
-00006870: 2020 2049 6e74 6572 7275 7074 733a 2065     Interrupts: e
-00006880: 6e61 626c 6564 0a20 2020 2020 2020 2020  nabled.         
-00006890: 2020 2020 2049 6e74 6572 7275 7074 206d       Interrupt m
-000068a0: 6f64 653a 2032 0a20 2020 2020 2020 2020  ode: 2.         
-000068b0: 2020 2020 2054 2d73 7461 7465 733a 2036       T-states: 6
-000068c0: 3938 3837 0a20 2020 2020 2020 2020 2020  9887.           
-000068d0: 2020 2050 4320 2020 3539 3130 2031 3731     PC   5910 171
-000068e0: 3620 2020 2053 5020 2020 3533 3936 2031  6    SP   5396 1
-000068f0: 3531 340a 2020 2020 2020 2020 2020 2020  514.            
-00006900: 2020 4958 2020 2034 3336 3820 3131 3130    IX   4368 1110
-00006910: 2020 2020 4959 2020 2034 3838 3220 3133      IY   4882 13
-00006920: 3132 0a20 2020 2020 2020 2020 2020 2020  12.             
-00006930: 2049 2020 2020 2020 3234 2020 2031 3820   I      24   18 
-00006940: 2020 2052 2020 2020 2020 3235 2020 2031     R      25   1
-00006950: 390a 2020 2020 2020 2020 2020 2020 2020  9.              
-00006960: 4220 2020 2020 2020 3320 2020 3033 2020  B       3   03  
-00006970: 2020 4227 2020 2020 2031 3120 2020 3042    B'     11   0B
-00006980: 0a20 2020 2020 2020 2020 2020 2020 2043  .              C
-00006990: 2020 2020 2020 2032 2020 2030 3220 2020         2   02   
-000069a0: 2043 2720 2020 2020 3130 2020 2030 410a   C'     10   0A.
-000069b0: 2020 2020 2020 2020 2020 2020 2020 4243                BC
-000069c0: 2020 2020 3737 3020 3033 3032 2020 2020      770 0302    
-000069d0: 4243 2720 2032 3832 3620 3042 3041 0a20  BC'  2826 0B0A. 
-000069e0: 2020 2020 2020 2020 2020 2020 2044 2020               D  
-000069f0: 2020 2020 2035 2020 2030 3520 2020 2044       5   05    D
-00006a00: 2720 2020 2020 3133 2020 2030 440a 2020  '     13   0D.  
-00006a10: 2020 2020 2020 2020 2020 2020 4520 2020              E   
-00006a20: 2020 2020 3420 2020 3034 2020 2020 4527      4   04    E'
-00006a30: 2020 2020 2031 3220 2020 3043 0a20 2020       12   0C.   
-00006a40: 2020 2020 2020 2020 2020 2044 4520 2020             DE   
-00006a50: 3132 3834 2030 3530 3420 2020 2044 4527  1284 0504    DE'
-00006a60: 2020 3333 3430 2030 4430 430a 2020 2020    3340 0D0C.    
-00006a70: 2020 2020 2020 2020 2020 4820 2020 2020            H     
-00006a80: 2020 3720 2020 3037 2020 2020 4827 2020    7   07    H'  
-00006a90: 2020 2031 3520 2020 3046 0a20 2020 2020     15   0F.     
-00006aa0: 2020 2020 2020 2020 204c 2020 2020 2020           L      
-00006ab0: 2036 2020 2030 3620 2020 204c 2720 2020   6   06    L'   
-00006ac0: 2020 3134 2020 2030 450a 2020 2020 2020    14   0E.      
-00006ad0: 2020 2020 2020 2020 484c 2020 2031 3739          HL   179
-00006ae0: 3820 3037 3036 2020 2020 484c 2720 2033  8 0706    HL'  3
-00006af0: 3835 3420 3046 3045 0a20 2020 2020 2020  854 0F0E.       
-00006b00: 2020 2020 2020 2041 2020 2020 2020 2031         A       1
-00006b10: 2020 2030 3120 2020 2041 2720 2020 2020     01    A'     
-00006b20: 2039 2020 2030 390a 2020 2020 2020 2020   9   09.        
-00006b30: 2020 2020 2020 2020 535a 3548 3350 4e43          SZ5H3PNC
-00006b40: 2020 2020 2020 2020 2020 2053 5a35 4833             SZ5H3
-00006b50: 504e 430a 2020 2020 2020 2020 2020 2020  PNC.            
-00006b60: 2020 4620 3030 3030 3030 3030 2020 2020    F 00000000    
-00006b70: 2020 2020 4627 2030 3030 3031 3030 300a      F' 00001000.
-00006b80: 2020 2020 2020 2020 2020 2020 5241 4d50              RAMP
-00006b90: 3a20 3136 3338 3720 6279 7465 730a 2020  : 16387 bytes.  
-00006ba0: 2020 2020 2020 2020 2020 2020 5061 6765              Page
-00006bb0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
-00006bc0: 2020 5241 4d3a 2031 3633 3834 2062 7974    RAM: 16384 byt
-00006bd0: 6573 2c20 756e 636f 6d70 7265 7373 6564  es, uncompressed
-00006be0: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
-00006bf0: 503a 2031 3633 3837 2062 7974 6573 0a20  P: 16387 bytes. 
-00006c00: 2020 2020 2020 2020 2020 2020 2050 6167               Pag
-00006c10: 653a 2032 0a20 2020 2020 2020 2020 2020  e: 2.           
-00006c20: 2020 2052 414d 3a20 3332 3736 382d 3439     RAM: 32768-49
-00006c30: 3135 3120 3830 3030 2d42 4646 463a 2031  151 8000-BFFF: 1
-00006c40: 3633 3834 2062 7974 6573 2c20 756e 636f  6384 bytes, unco
-00006c50: 6d70 7265 7373 6564 0a20 2020 2020 2020  mpressed.       
-00006c60: 2020 2020 2052 414d 503a 2031 3633 3837       RAMP: 16387
-00006c70: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-00006c80: 2020 2020 2050 6167 653a 2035 0a20 2020       Page: 5.   
-00006c90: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-00006ca0: 3136 3338 342d 3332 3736 3720 3430 3030  16384-32767 4000
-00006cb0: 2d37 4646 463a 2031 3633 3834 2062 7974  -7FFF: 16384 byt
-00006cc0: 6573 2c20 756e 636f 6d70 7265 7373 6564  es, uncompressed
-00006cd0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00006ce0: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00006cf0: 737a 7828 6578 705f 6f75 7470 7574 2c20  szx(exp_output, 
-00006d00: 7265 6769 7374 6572 732c 2062 6f72 6465  registers, borde
-00006d10: 723d 332c 206b 6579 623d 5472 7565 2c20  r=3, keyb=True, 
-00006d20: 6973 7375 6532 3d31 2c20 636f 6d70 7265  issue2=1, compre
-00006d30: 7373 3d46 616c 7365 290a 0a20 2020 2064  ss=False)..    d
-00006d40: 6566 2074 6573 745f 737a 785f 3438 6b5f  ef test_szx_48k_
-00006d50: 636f 6d70 7265 7373 6564 2873 656c 6629  compressed(self)
-00006d60: 3a0a 2020 2020 2020 2020 7265 6769 7374  :.        regist
-00006d70: 6572 7320 3d20 6c69 7374 2872 616e 6765  ers = list(range
-00006d80: 2832 3629 2920 2320 5265 6769 7374 6572  (26)) # Register
-00006d90: 730a 2020 2020 2020 2020 7265 6769 7374  s.        regist
-00006da0: 6572 732e 6578 7465 6e64 2828 312c 2031  ers.extend((1, 1
-00006db0: 2929 2023 2049 4646 312c 2049 4646 320a  )) # IFF1, IFF2.
-00006dc0: 2020 2020 2020 2020 7265 6769 7374 6572          register
-00006dd0: 732e 6170 7065 6e64 2832 2920 2320 496e  s.append(2) # In
-00006de0: 7465 7272 7570 7420 6d6f 6465 0a20 2020  terrupt mode.   
-00006df0: 2020 2020 2072 6567 6973 7465 7273 2e65       registers.e
-00006e00: 7874 656e 6428 2831 2c20 3132 382c 2030  xtend((1, 128, 0
-00006e10: 2c20 3029 2920 2320 6477 4379 636c 6573  , 0)) # dwCycles
-00006e20: 5374 6172 740a 2020 2020 2020 2020 7265  Start.        re
-00006e30: 6769 7374 6572 732e 6578 7465 6e64 2828  gisters.extend((
-00006e40: 302c 2030 2c20 302c 2030 2929 0a20 2020  0, 0, 0, 0)).   
-00006e50: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
-00006e60: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
-00006e70: 2020 5665 7273 696f 6e3a 2031 2e34 0a20    Version: 1.4. 
-00006e80: 2020 2020 2020 2020 2020 204d 6163 6869             Machi
-00006e90: 6e65 3a20 3438 4b20 5a58 2053 7065 6374  ne: 48K ZX Spect
-00006ea0: 7275 6d0a 2020 2020 2020 2020 2020 2020  rum.            
-00006eb0: 5350 4352 3a20 3820 6279 7465 730a 2020  SPCR: 8 bytes.  
-00006ec0: 2020 2020 2020 2020 2020 2020 426f 7264              Bord
-00006ed0: 6572 3a20 340a 2020 2020 2020 2020 2020  er: 4.          
-00006ee0: 2020 5a38 3052 3a20 3337 2062 7974 6573    Z80R: 37 bytes
-00006ef0: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
-00006f00: 6e74 6572 7275 7074 733a 2065 6e61 626c  nterrupts: enabl
-00006f10: 6564 0a20 2020 2020 2020 2020 2020 2020  ed.             
-00006f20: 2049 6e74 6572 7275 7074 206d 6f64 653a   Interrupt mode:
-00006f30: 2032 0a20 2020 2020 2020 2020 2020 2020   2.             
-00006f40: 2054 2d73 7461 7465 733a 2033 3237 3639   T-states: 32769
-00006f50: 0a20 2020 2020 2020 2020 2020 2020 2050  .              P
-00006f60: 4320 2020 3539 3130 2031 3731 3620 2020  C   5910 1716   
-00006f70: 2053 5020 2020 3533 3936 2031 3531 340a   SP   5396 1514.
-00006f80: 2020 2020 2020 2020 2020 2020 2020 4958                IX
-00006f90: 2020 2034 3336 3820 3131 3130 2020 2020     4368 1110    
-00006fa0: 4959 2020 2034 3838 3220 3133 3132 0a20  IY   4882 1312. 
-00006fb0: 2020 2020 2020 2020 2020 2020 2049 2020               I  
-00006fc0: 2020 2020 3234 2020 2031 3820 2020 2052      24   18    R
-00006fd0: 2020 2020 2020 3235 2020 2031 390a 2020        25   19.  
-00006fe0: 2020 2020 2020 2020 2020 2020 4220 2020              B   
-00006ff0: 2020 2020 3320 2020 3033 2020 2020 4227      3   03    B'
-00007000: 2020 2020 2031 3120 2020 3042 0a20 2020       11   0B.   
-00007010: 2020 2020 2020 2020 2020 2043 2020 2020             C    
-00007020: 2020 2032 2020 2030 3220 2020 2043 2720     2   02    C' 
-00007030: 2020 2020 3130 2020 2030 410a 2020 2020      10   0A.    
-00007040: 2020 2020 2020 2020 2020 4243 2020 2020            BC    
-00007050: 3737 3020 3033 3032 2020 2020 4243 2720  770 0302    BC' 
-00007060: 2032 3832 3620 3042 3041 0a20 2020 2020   2826 0B0A.     
-00007070: 2020 2020 2020 2020 2044 2020 2020 2020           D      
-00007080: 2035 2020 2030 3520 2020 2044 2720 2020   5   05    D'   
-00007090: 2020 3133 2020 2030 440a 2020 2020 2020    13   0D.      
-000070a0: 2020 2020 2020 2020 4520 2020 2020 2020          E       
-000070b0: 3420 2020 3034 2020 2020 4527 2020 2020  4   04    E'    
-000070c0: 2031 3220 2020 3043 0a20 2020 2020 2020   12   0C.       
-000070d0: 2020 2020 2020 2044 4520 2020 3132 3834         DE   1284
-000070e0: 2030 3530 3420 2020 2044 4527 2020 3333   0504    DE'  33
-000070f0: 3430 2030 4430 430a 2020 2020 2020 2020  40 0D0C.        
-00007100: 2020 2020 2020 4820 2020 2020 2020 3720        H       7 
-00007110: 2020 3037 2020 2020 4827 2020 2020 2031    07    H'     1
-00007120: 3520 2020 3046 0a20 2020 2020 2020 2020  5   0F.         
-00007130: 2020 2020 204c 2020 2020 2020 2036 2020       L       6  
-00007140: 2030 3620 2020 204c 2720 2020 2020 3134   06    L'     14
-00007150: 2020 2030 450a 2020 2020 2020 2020 2020     0E.          
-00007160: 2020 2020 484c 2020 2031 3739 3820 3037      HL   1798 07
-00007170: 3036 2020 2020 484c 2720 2033 3835 3420  06    HL'  3854 
-00007180: 3046 3045 0a20 2020 2020 2020 2020 2020  0F0E.           
-00007190: 2020 2041 2020 2020 2020 2031 2020 2030     A       1   0
-000071a0: 3120 2020 2041 2720 2020 2020 2039 2020  1    A'      9  
-000071b0: 2030 390a 2020 2020 2020 2020 2020 2020   09.            
-000071c0: 2020 2020 535a 3548 3350 4e43 2020 2020      SZ5H3PNC    
-000071d0: 2020 2020 2020 2053 5a35 4833 504e 430a         SZ5H3PNC.
-000071e0: 2020 2020 2020 2020 2020 2020 2020 4620                F 
-000071f0: 3030 3030 3030 3030 2020 2020 2020 2020  00000000        
-00007200: 4627 2030 3030 3031 3030 300a 2020 2020  F' 00001000.    
-00007210: 2020 2020 2020 2020 5241 4d50 3a20 3432          RAMP: 42
-00007220: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-00007230: 2020 2020 2050 6167 653a 2030 0a20 2020       Page: 0.   
-00007240: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-00007250: 3339 2062 7974 6573 2c20 636f 6d70 7265  39 bytes, compre
-00007260: 7373 6564 0a20 2020 2020 2020 2020 2020  ssed.           
-00007270: 2052 414d 503a 2034 3220 6279 7465 730a   RAMP: 42 bytes.
-00007280: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
-00007290: 6765 3a20 320a 2020 2020 2020 2020 2020  ge: 2.          
-000072a0: 2020 2020 5241 4d3a 2033 3237 3638 2d34      RAM: 32768-4
-000072b0: 3931 3531 2038 3030 302d 4246 4646 3a20  9151 8000-BFFF: 
-000072c0: 3339 2062 7974 6573 2c20 636f 6d70 7265  39 bytes, compre
-000072d0: 7373 6564 0a20 2020 2020 2020 2020 2020  ssed.           
-000072e0: 2052 414d 503a 2034 3220 6279 7465 730a   RAMP: 42 bytes.
-000072f0: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
-00007300: 6765 3a20 350a 2020 2020 2020 2020 2020  ge: 5.          
-00007310: 2020 2020 5241 4d3a 2031 3633 3834 2d33      RAM: 16384-3
-00007320: 3237 3637 2034 3030 302d 3746 4646 3a20  2767 4000-7FFF: 
-00007330: 3339 2062 7974 6573 2c20 636f 6d70 7265  39 bytes, compre
-00007340: 7373 6564 0a20 2020 2020 2020 2022 2222  ssed.        """
-00007350: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-00007360: 6573 745f 737a 7828 6578 705f 6f75 7470  est_szx(exp_outp
-00007370: 7574 2c20 7265 6769 7374 6572 732c 2062  ut, registers, b
-00007380: 6f72 6465 723d 342c 2063 6f6d 7072 6573  order=4, compres
-00007390: 733d 5472 7565 290a 0a20 2020 2064 6566  s=True)..    def
-000073a0: 2074 6573 745f 737a 785f 3132 386b 5f75   test_szx_128k_u
-000073b0: 6e63 6f6d 7072 6573 7365 6428 7365 6c66  ncompressed(self
-000073c0: 293a 0a20 2020 2020 2020 2072 6567 6973  ):.        regis
-000073d0: 7465 7273 203d 206c 6973 7428 7261 6e67  ters = list(rang
-000073e0: 6528 3136 2c20 3432 2929 2023 2052 6567  e(16, 42)) # Reg
-000073f0: 6973 7465 7273 0a20 2020 2020 2020 2072  isters.        r
-00007400: 6567 6973 7465 7273 2e65 7874 656e 6428  egisters.extend(
-00007410: 2830 2c20 3029 2920 2320 4946 4631 2c20  (0, 0)) # IFF1, 
-00007420: 4946 4632 0a20 2020 2020 2020 2072 6567  IFF2.        reg
-00007430: 6973 7465 7273 2e61 7070 656e 6428 3129  isters.append(1)
-00007440: 2023 2049 6e74 6572 7275 7074 206d 6f64   # Interrupt mod
-00007450: 650a 2020 2020 2020 2020 7265 6769 7374  e.        regist
-00007460: 6572 732e 6578 7465 6e64 2828 312c 2030  ers.extend((1, 0
-00007470: 2c20 312c 2030 2929 2023 2064 7743 7963  , 1, 0)) # dwCyc
-00007480: 6c65 7353 7461 7274 0a20 2020 2020 2020  lesStart.       
-00007490: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
-000074a0: 6428 2830 2c20 302c 2030 2c20 3029 290a  d((0, 0, 0, 0)).
-000074b0: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-000074c0: 7574 203d 2022 2222 0a20 2020 2020 2020  ut = """.       
-000074d0: 2020 2020 2056 6572 7369 6f6e 3a20 312e       Version: 1.
-000074e0: 340a 2020 2020 2020 2020 2020 2020 4d61  4.            Ma
-000074f0: 6368 696e 653a 205a 5820 5370 6563 7472  chine: ZX Spectr
-00007500: 756d 2031 3238 0a20 2020 2020 2020 2020  um 128.         
-00007510: 2020 2053 5043 523a 2038 2062 7974 6573     SPCR: 8 bytes
-00007520: 0a20 2020 2020 2020 2020 2020 2020 2042  .              B
-00007530: 6f72 6465 723a 2036 0a20 2020 2020 2020  order: 6.       
-00007540: 2020 2020 2020 2050 6f72 7420 2437 4646         Port $7FF
-00007550: 443a 2031 2028 6261 6e6b 2031 2070 6167  D: 1 (bank 1 pag
-00007560: 6564 2069 6e74 6f20 3439 3135 322d 3635  ed into 49152-65
-00007570: 3533 3520 4330 3030 2d46 4646 4629 0a20  535 C000-FFFF). 
-00007580: 2020 2020 2020 2020 2020 204b 4559 423a             KEYB:
-00007590: 2035 2062 7974 6573 0a20 2020 2020 2020   5 bytes.       
-000075a0: 2020 2020 2020 2049 7373 7565 2032 2065         Issue 2 e
-000075b0: 6d75 6c61 7469 6f6e 3a20 6469 7361 626c  mulation: disabl
-000075c0: 6564 0a20 2020 2020 2020 2020 2020 2041  ed.            A
-000075d0: 593a 2031 3820 6279 7465 730a 2020 2020  Y: 18 bytes.    
-000075e0: 2020 2020 2020 2020 2020 4375 7272 656e            Curren
-000075f0: 7420 4159 2072 6567 6973 7465 723a 2035  t AY register: 5
-00007600: 0a20 2020 2020 2020 2020 2020 205a 3830  .            Z80
-00007610: 523a 2033 3720 6279 7465 730a 2020 2020  R: 37 bytes.    
-00007620: 2020 2020 2020 2020 2020 496e 7465 7272            Interr
-00007630: 7570 7473 3a20 6469 7361 626c 6564 0a20  upts: disabled. 
-00007640: 2020 2020 2020 2020 2020 2020 2049 6e74               Int
-00007650: 6572 7275 7074 206d 6f64 653a 2031 0a20  errupt mode: 1. 
-00007660: 2020 2020 2020 2020 2020 2020 2054 2d73               T-s
-00007670: 7461 7465 733a 2036 3535 3337 0a20 2020  tates: 65537.   
-00007680: 2020 2020 2020 2020 2020 2050 4320 2031             PC  1
-00007690: 3030 3232 2032 3732 3620 2020 2053 5020  0022 2726    SP 
-000076a0: 2020 3935 3038 2032 3532 340a 2020 2020    9508 2524.    
-000076b0: 2020 2020 2020 2020 2020 4958 2020 2038            IX   8
-000076c0: 3438 3020 3231 3230 2020 2020 4959 2020  480 2120    IY  
-000076d0: 2038 3939 3420 3233 3232 0a20 2020 2020   8994 2322.     
-000076e0: 2020 2020 2020 2020 2049 2020 2020 2020           I      
-000076f0: 3430 2020 2032 3820 2020 2052 2020 2020  40   28    R    
-00007700: 2020 3431 2020 2032 390a 2020 2020 2020    41   29.      
-00007710: 2020 2020 2020 2020 4220 2020 2020 2031          B      1
-00007720: 3920 2020 3133 2020 2020 4227 2020 2020  9   13    B'    
-00007730: 2032 3720 2020 3142 0a20 2020 2020 2020   27   1B.       
-00007740: 2020 2020 2020 2043 2020 2020 2020 3138         C      18
-00007750: 2020 2031 3220 2020 2043 2720 2020 2020     12    C'     
-00007760: 3236 2020 2031 410a 2020 2020 2020 2020  26   1A.        
-00007770: 2020 2020 2020 4243 2020 2034 3838 3220        BC   4882 
-00007780: 3133 3132 2020 2020 4243 2720 2036 3933  1312    BC'  693
-00007790: 3820 3142 3141 0a20 2020 2020 2020 2020  8 1B1A.         
-000077a0: 2020 2020 2044 2020 2020 2020 3231 2020       D      21  
-000077b0: 2031 3520 2020 2044 2720 2020 2020 3239   15    D'     29
-000077c0: 2020 2031 440a 2020 2020 2020 2020 2020     1D.          
-000077d0: 2020 2020 4520 2020 2020 2032 3020 2020      E      20   
-000077e0: 3134 2020 2020 4527 2020 2020 2032 3820  14    E'     28 
-000077f0: 2020 3143 0a20 2020 2020 2020 2020 2020    1C.           
-00007800: 2020 2044 4520 2020 3533 3936 2031 3531     DE   5396 151
-00007810: 3420 2020 2044 4527 2020 3734 3532 2031  4    DE'  7452 1
-00007820: 4431 430a 2020 2020 2020 2020 2020 2020  D1C.            
-00007830: 2020 4820 2020 2020 2032 3320 2020 3137    H      23   17
-00007840: 2020 2020 4827 2020 2020 2033 3120 2020      H'     31   
-00007850: 3146 0a20 2020 2020 2020 2020 2020 2020  1F.             
-00007860: 204c 2020 2020 2020 3232 2020 2031 3620   L      22   16 
-00007870: 2020 204c 2720 2020 2020 3330 2020 2031     L'     30   1
-00007880: 450a 2020 2020 2020 2020 2020 2020 2020  E.              
-00007890: 484c 2020 2035 3931 3020 3137 3136 2020  HL   5910 1716  
-000078a0: 2020 484c 2720 2037 3936 3620 3146 3145    HL'  7966 1F1E
-000078b0: 0a20 2020 2020 2020 2020 2020 2020 2041  .              A
-000078c0: 2020 2020 2020 3137 2020 2031 3120 2020        17   11   
-000078d0: 2041 2720 2020 2020 3235 2020 2031 390a   A'     25   19.
-000078e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000078f0: 535a 3548 3350 4e43 2020 2020 2020 2020  SZ5H3PNC        
-00007900: 2020 2053 5a35 4833 504e 430a 2020 2020     SZ5H3PNC.    
-00007910: 2020 2020 2020 2020 2020 4620 3030 3031            F 0001
-00007920: 3030 3030 2020 2020 2020 2020 4627 2030  0000        F' 0
-00007930: 3030 3131 3030 300a 2020 2020 2020 2020  0011000.        
-00007940: 2020 2020 5241 4d50 3a20 3136 3338 3720      RAMP: 16387 
-00007950: 6279 7465 730a 2020 2020 2020 2020 2020  bytes.          
-00007960: 2020 2020 5061 6765 3a20 300a 2020 2020      Page: 0.    
-00007970: 2020 2020 2020 2020 2020 5241 4d3a 2031            RAM: 1
-00007980: 3633 3834 2062 7974 6573 2c20 756e 636f  6384 bytes, unco
-00007990: 6d70 7265 7373 6564 0a20 2020 2020 2020  mpressed.       
-000079a0: 2020 2020 2052 414d 503a 2031 3633 3837       RAMP: 16387
-000079b0: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-000079c0: 2020 2020 2050 6167 653a 2031 0a20 2020       Page: 1.   
-000079d0: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-000079e0: 3439 3135 322d 3635 3533 3520 4330 3030  49152-65535 C000
-000079f0: 2d46 4646 463a 2031 3633 3834 2062 7974  -FFFF: 16384 byt
-00007a00: 6573 2c20 756e 636f 6d70 7265 7373 6564  es, uncompressed
-00007a10: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
-00007a20: 503a 2031 3633 3837 2062 7974 6573 0a20  P: 16387 bytes. 
-00007a30: 2020 2020 2020 2020 2020 2020 2050 6167               Pag
-00007a40: 653a 2032 0a20 2020 2020 2020 2020 2020  e: 2.           
-00007a50: 2020 2052 414d 3a20 3332 3736 382d 3439     RAM: 32768-49
-00007a60: 3135 3120 3830 3030 2d42 4646 463a 2031  151 8000-BFFF: 1
-00007a70: 3633 3834 2062 7974 6573 2c20 756e 636f  6384 bytes, unco
-00007a80: 6d70 7265 7373 6564 0a20 2020 2020 2020  mpressed.       
-00007a90: 2020 2020 2052 414d 503a 2031 3633 3837       RAMP: 16387
-00007aa0: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-00007ab0: 2020 2020 2050 6167 653a 2033 0a20 2020       Page: 3.   
-00007ac0: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-00007ad0: 3136 3338 3420 6279 7465 732c 2075 6e63  16384 bytes, unc
-00007ae0: 6f6d 7072 6573 7365 640a 2020 2020 2020  ompressed.      
-00007af0: 2020 2020 2020 5241 4d50 3a20 3136 3338        RAMP: 1638
-00007b00: 3720 6279 7465 730a 2020 2020 2020 2020  7 bytes.        
-00007b10: 2020 2020 2020 5061 6765 3a20 340a 2020        Page: 4.  
-00007b20: 2020 2020 2020 2020 2020 2020 5241 4d3a              RAM:
-00007b30: 2031 3633 3834 2062 7974 6573 2c20 756e   16384 bytes, un
-00007b40: 636f 6d70 7265 7373 6564 0a20 2020 2020  compressed.     
-00007b50: 2020 2020 2020 2052 414d 503a 2031 3633         RAMP: 163
-00007b60: 3837 2062 7974 6573 0a20 2020 2020 2020  87 bytes.       
-00007b70: 2020 2020 2020 2050 6167 653a 2035 0a20         Page: 5. 
-00007b80: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
-00007b90: 3a20 3136 3338 342d 3332 3736 3720 3430  : 16384-32767 40
-00007ba0: 3030 2d37 4646 463a 2031 3633 3834 2062  00-7FFF: 16384 b
-00007bb0: 7974 6573 2c20 756e 636f 6d70 7265 7373  ytes, uncompress
-00007bc0: 6564 0a20 2020 2020 2020 2020 2020 2052  ed.            R
-00007bd0: 414d 503a 2031 3633 3837 2062 7974 6573  AMP: 16387 bytes
-00007be0: 0a20 2020 2020 2020 2020 2020 2020 2050  .              P
-00007bf0: 6167 653a 2036 0a20 2020 2020 2020 2020  age: 6.         
-00007c00: 2020 2020 2052 414d 3a20 3136 3338 3420       RAM: 16384 
-00007c10: 6279 7465 732c 2075 6e63 6f6d 7072 6573  bytes, uncompres
-00007c20: 7365 640a 2020 2020 2020 2020 2020 2020  sed.            
-00007c30: 5241 4d50 3a20 3136 3338 3720 6279 7465  RAMP: 16387 byte
-00007c40: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00007c50: 5061 6765 3a20 370a 2020 2020 2020 2020  Page: 7.        
-00007c60: 2020 2020 2020 5241 4d3a 2031 3633 3834        RAM: 16384
-00007c70: 2062 7974 6573 2c20 756e 636f 6d70 7265   bytes, uncompre
-00007c80: 7373 6564 0a20 2020 2020 2020 2022 2222  ssed.        """
-00007c90: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-00007ca0: 6573 745f 737a 7828 6578 705f 6f75 7470  est_szx(exp_outp
-00007cb0: 7574 2c20 7265 6769 7374 6572 732c 2062  ut, registers, b
-00007cc0: 6f72 6465 723d 362c 206b 6579 623d 5472  order=6, keyb=Tr
-00007cd0: 7565 2c20 6973 7375 6532 3d30 2c20 636f  ue, issue2=0, co
-00007ce0: 6d70 7265 7373 3d46 616c 7365 2c20 6d61  mpress=False, ma
-00007cf0: 6368 696e 655f 6964 3d32 2c20 6368 3766  chine_id=2, ch7f
-00007d00: 6664 3d31 2c20 7061 6765 733d 4e6f 6e65  fd=1, pages=None
-00007d10: 2c20 6179 3d5b 355d 290a 0a20 2020 2064  , ay=[5])..    d
-00007d20: 6566 2074 6573 745f 737a 785f 3132 386b  ef test_szx_128k
-00007d30: 5f63 6f6d 7072 6573 7365 6428 7365 6c66  _compressed(self
-00007d40: 293a 0a20 2020 2020 2020 2072 6567 6973  ):.        regis
-00007d50: 7465 7273 203d 206c 6973 7428 7261 6e67  ters = list(rang
-00007d60: 6528 3136 2c20 3432 2929 2023 2052 6567  e(16, 42)) # Reg
-00007d70: 6973 7465 7273 0a20 2020 2020 2020 2072  isters.        r
-00007d80: 6567 6973 7465 7273 2e65 7874 656e 6428  egisters.extend(
-00007d90: 2830 2c20 3029 2920 2320 4946 4631 2c20  (0, 0)) # IFF1, 
-00007da0: 4946 4632 0a20 2020 2020 2020 2072 6567  IFF2.        reg
-00007db0: 6973 7465 7273 2e61 7070 656e 6428 3129  isters.append(1)
-00007dc0: 2023 2049 6e74 6572 7275 7074 206d 6f64   # Interrupt mod
-00007dd0: 650a 2020 2020 2020 2020 7265 6769 7374  e.        regist
-00007de0: 6572 732e 6578 7465 6e64 2828 312c 2032  ers.extend((1, 2
-00007df0: 2c20 302c 2030 2929 2023 2064 7743 7963  , 0, 0)) # dwCyc
-00007e00: 6c65 7353 7461 7274 0a20 2020 2020 2020  lesStart.       
-00007e10: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
-00007e20: 6428 2830 2c20 302c 2030 2c20 3029 290a  d((0, 0, 0, 0)).
-00007e30: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-00007e40: 7574 203d 2022 2222 0a20 2020 2020 2020  ut = """.       
-00007e50: 2020 2020 2056 6572 7369 6f6e 3a20 312e       Version: 1.
-00007e60: 340a 2020 2020 2020 2020 2020 2020 4d61  4.            Ma
-00007e70: 6368 696e 653a 205a 5820 5370 6563 7472  chine: ZX Spectr
-00007e80: 756d 2031 3238 0a20 2020 2020 2020 2020  um 128.         
-00007e90: 2020 2053 5043 523a 2038 2062 7974 6573     SPCR: 8 bytes
-00007ea0: 0a20 2020 2020 2020 2020 2020 2020 2042  .              B
-00007eb0: 6f72 6465 723a 2037 0a20 2020 2020 2020  order: 7.       
-00007ec0: 2020 2020 2020 2050 6f72 7420 2437 4646         Port $7FF
-00007ed0: 443a 2031 2028 6261 6e6b 2031 2070 6167  D: 1 (bank 1 pag
-00007ee0: 6564 2069 6e74 6f20 3439 3135 322d 3635  ed into 49152-65
-00007ef0: 3533 3520 4330 3030 2d46 4646 4629 0a20  535 C000-FFFF). 
-00007f00: 2020 2020 2020 2020 2020 2041 593a 2031             AY: 1
-00007f10: 3820 6279 7465 730a 2020 2020 2020 2020  8 bytes.        
-00007f20: 2020 2020 2020 4375 7272 656e 7420 4159        Current AY
-00007f30: 2072 6567 6973 7465 723a 2031 330a 2020   register: 13.  
-00007f40: 2020 2020 2020 2020 2020 5a38 3052 3a20            Z80R: 
-00007f50: 3337 2062 7974 6573 0a20 2020 2020 2020  37 bytes.       
-00007f60: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
-00007f70: 733a 2064 6973 6162 6c65 640a 2020 2020  s: disabled.    
-00007f80: 2020 2020 2020 2020 2020 496e 7465 7272            Interr
-00007f90: 7570 7420 6d6f 6465 3a20 310a 2020 2020  upt mode: 1.    
-00007fa0: 2020 2020 2020 2020 2020 542d 7374 6174            T-stat
-00007fb0: 6573 3a20 3531 330a 2020 2020 2020 2020  es: 513.        
-00007fc0: 2020 2020 2020 5043 2020 3130 3032 3220        PC  10022 
-00007fd0: 3237 3236 2020 2020 5350 2020 2039 3530  2726    SP   950
-00007fe0: 3820 3235 3234 0a20 2020 2020 2020 2020  8 2524.         
-00007ff0: 2020 2020 2049 5820 2020 3834 3830 2032       IX   8480 2
-00008000: 3132 3020 2020 2049 5920 2020 3839 3934  120    IY   8994
-00008010: 2032 3332 320a 2020 2020 2020 2020 2020   2322.          
-00008020: 2020 2020 4920 2020 2020 2034 3020 2020      I      40   
-00008030: 3238 2020 2020 5220 2020 2020 2034 3120  28    R      41 
-00008040: 2020 3239 0a20 2020 2020 2020 2020 2020    29.           
-00008050: 2020 2042 2020 2020 2020 3139 2020 2031     B      19   1
-00008060: 3320 2020 2042 2720 2020 2020 3237 2020  3    B'     27  
-00008070: 2031 420a 2020 2020 2020 2020 2020 2020   1B.            
-00008080: 2020 4320 2020 2020 2031 3820 2020 3132    C      18   12
-00008090: 2020 2020 4327 2020 2020 2032 3620 2020      C'     26   
-000080a0: 3141 0a20 2020 2020 2020 2020 2020 2020  1A.             
-000080b0: 2042 4320 2020 3438 3832 2031 3331 3220   BC   4882 1312 
-000080c0: 2020 2042 4327 2020 3639 3338 2031 4231     BC'  6938 1B1
-000080d0: 410a 2020 2020 2020 2020 2020 2020 2020  A.              
-000080e0: 4420 2020 2020 2032 3120 2020 3135 2020  D      21   15  
-000080f0: 2020 4427 2020 2020 2032 3920 2020 3144    D'     29   1D
-00008100: 0a20 2020 2020 2020 2020 2020 2020 2045  .              E
-00008110: 2020 2020 2020 3230 2020 2031 3420 2020        20   14   
-00008120: 2045 2720 2020 2020 3238 2020 2031 430a   E'     28   1C.
-00008130: 2020 2020 2020 2020 2020 2020 2020 4445                DE
-00008140: 2020 2035 3339 3620 3135 3134 2020 2020     5396 1514    
-00008150: 4445 2720 2037 3435 3220 3144 3143 0a20  DE'  7452 1D1C. 
-00008160: 2020 2020 2020 2020 2020 2020 2048 2020               H  
-00008170: 2020 2020 3233 2020 2031 3720 2020 2048      23   17    H
-00008180: 2720 2020 2020 3331 2020 2031 460a 2020  '     31   1F.  
-00008190: 2020 2020 2020 2020 2020 2020 4c20 2020              L   
-000081a0: 2020 2032 3220 2020 3136 2020 2020 4c27     22   16    L'
-000081b0: 2020 2020 2033 3020 2020 3145 0a20 2020       30   1E.   
-000081c0: 2020 2020 2020 2020 2020 2048 4c20 2020             HL   
-000081d0: 3539 3130 2031 3731 3620 2020 2048 4c27  5910 1716    HL'
-000081e0: 2020 3739 3636 2031 4631 450a 2020 2020    7966 1F1E.    
-000081f0: 2020 2020 2020 2020 2020 4120 2020 2020            A     
-00008200: 2031 3720 2020 3131 2020 2020 4127 2020   17   11    A'  
-00008210: 2020 2032 3520 2020 3139 0a20 2020 2020     25   19.     
-00008220: 2020 2020 2020 2020 2020 2053 5a35 4833             SZ5H3
-00008230: 504e 4320 2020 2020 2020 2020 2020 535a  PNC           SZ
-00008240: 3548 3350 4e43 0a20 2020 2020 2020 2020  5H3PNC.         
-00008250: 2020 2020 2046 2030 3030 3130 3030 3020       F 00010000 
-00008260: 2020 2020 2020 2046 2720 3030 3031 3130         F' 000110
-00008270: 3030 0a20 2020 2020 2020 2020 2020 2052  00.            R
-00008280: 414d 503a 2034 3220 6279 7465 730a 2020  AMP: 42 bytes.  
-00008290: 2020 2020 2020 2020 2020 2020 5061 6765              Page
-000082a0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
-000082b0: 2020 5241 4d3a 2033 3920 6279 7465 732c    RAM: 39 bytes,
-000082c0: 2063 6f6d 7072 6573 7365 640a 2020 2020   compressed.    
-000082d0: 2020 2020 2020 2020 5241 4d50 3a20 3432          RAMP: 42
-000082e0: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-000082f0: 2020 2020 2050 6167 653a 2031 0a20 2020       Page: 1.   
-00008300: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-00008310: 3439 3135 322d 3635 3533 3520 4330 3030  49152-65535 C000
-00008320: 2d46 4646 463a 2033 3920 6279 7465 732c  -FFFF: 39 bytes,
-00008330: 2063 6f6d 7072 6573 7365 640a 2020 2020   compressed.    
-00008340: 2020 2020 2020 2020 5241 4d50 3a20 3432          RAMP: 42
-00008350: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-00008360: 2020 2020 2050 6167 653a 2032 0a20 2020       Page: 2.   
-00008370: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-00008380: 3332 3736 382d 3439 3135 3120 3830 3030  32768-49151 8000
-00008390: 2d42 4646 463a 2033 3920 6279 7465 732c  -BFFF: 39 bytes,
-000083a0: 2063 6f6d 7072 6573 7365 640a 2020 2020   compressed.    
-000083b0: 2020 2020 2020 2020 5241 4d50 3a20 3432          RAMP: 42
-000083c0: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
-000083d0: 2020 2020 2050 6167 653a 2033 0a20 2020       Page: 3.   
-000083e0: 2020 2020 2020 2020 2020 2052 414d 3a20             RAM: 
-000083f0: 3339 2062 7974 6573 2c20 636f 6d70 7265  39 bytes, compre
-00008400: 7373 6564 0a20 2020 2020 2020 2020 2020  ssed.           
-00008410: 2052 414d 503a 2034 3220 6279 7465 730a   RAMP: 42 bytes.
-00008420: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
-00008430: 6765 3a20 340a 2020 2020 2020 2020 2020  ge: 4.          
-00008440: 2020 2020 5241 4d3a 2033 3920 6279 7465      RAM: 39 byte
-00008450: 732c 2063 6f6d 7072 6573 7365 640a 2020  s, compressed.  
-00008460: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
-00008470: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
-00008480: 2020 2020 2020 2050 6167 653a 2035 0a20         Page: 5. 
-00008490: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
-000084a0: 3a20 3136 3338 342d 3332 3736 3720 3430  : 16384-32767 40
-000084b0: 3030 2d37 4646 463a 2033 3920 6279 7465  00-7FFF: 39 byte
-000084c0: 732c 2063 6f6d 7072 6573 7365 640a 2020  s, compressed.  
-000084d0: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
-000084e0: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
-000084f0: 2020 2020 2020 2050 6167 653a 2036 0a20         Page: 6. 
-00008500: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
-00008510: 3a20 3339 2062 7974 6573 2c20 636f 6d70  : 39 bytes, comp
-00008520: 7265 7373 6564 0a20 2020 2020 2020 2020  ressed.         
-00008530: 2020 2052 414d 503a 2034 3220 6279 7465     RAMP: 42 byte
-00008540: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00008550: 5061 6765 3a20 370a 2020 2020 2020 2020  Page: 7.        
-00008560: 2020 2020 2020 5241 4d3a 2033 3920 6279        RAM: 39 by
-00008570: 7465 732c 2063 6f6d 7072 6573 7365 640a  tes, compressed.
-00008580: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00008590: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-000085a0: 7a78 2865 7870 5f6f 7574 7075 742c 2072  zx(exp_output, r
-000085b0: 6567 6973 7465 7273 2c20 626f 7264 6572  egisters, border
-000085c0: 3d37 2c20 636f 6d70 7265 7373 3d54 7275  =7, compress=Tru
-000085d0: 652c 206d 6163 6869 6e65 5f69 643d 322c  e, machine_id=2,
-000085e0: 2063 6837 6666 643d 312c 2070 6167 6573   ch7ffd=1, pages
-000085f0: 3d4e 6f6e 652c 2061 793d 5b31 335d 290a  =None, ay=[13]).
-00008600: 0a20 2020 2064 6566 2074 6573 745f 737a  .    def test_sz
-00008610: 785f 7769 7468 6f75 745f 6d61 6769 635f  x_without_magic_
-00008620: 6e75 6d62 6572 2873 656c 6629 3a0a 2020  number(self):.  
-00008630: 2020 2020 2020 6e6f 6e5f 737a 7820 3d20        non_szx = 
-00008640: 7365 6c66 2e77 7269 7465 5f62 696e 5f66  self.write_bin_f
-00008650: 696c 6528 2831 2c20 322c 2033 292c 2073  ile((1, 2, 3), s
-00008660: 7566 6669 783d 272e 737a 7827 290a 2020  uffix='.szx').  
-00008670: 2020 2020 2020 7769 7468 2073 656c 662e        with self.
-00008680: 6173 7365 7274 5261 6973 6573 5265 6765  assertRaisesRege
-00008690: 7828 536b 6f6f 6c4b 6974 4572 726f 722c  x(SkoolKitError,
-000086a0: 2027 7b7d 2069 7320 6e6f 7420 616e 2053   '{} is not an S
-000086b0: 5a58 2066 696c 6524 272e 666f 726d 6174  ZX file$'.format
-000086c0: 286e 6f6e 5f73 7a78 2929 3a0a 2020 2020  (non_szx)):.    
-000086d0: 2020 2020 2020 2020 7365 6c66 2e72 756e          self.run
-000086e0: 5f73 6e61 7069 6e66 6f28 6e6f 6e5f 737a  _snapinfo(non_sz
-000086f0: 7829 0a0a 2020 2020 6465 6620 7465 7374  x)..    def test
-00008700: 5f72 6177 5f6d 656d 6f72 795f 6669 6c65  _raw_memory_file
-00008710: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00008720: 7261 6d20 3d20 5b30 5d0a 2020 2020 2020  ram = [0].      
-00008730: 2020 6578 705f 6f75 7470 7574 203d 2027    exp_output = '
-00008740: 270a 2020 2020 2020 2020 7365 6c66 2e5f  '.        self._
-00008750: 7465 7374 5f62 696e 2872 616d 2c20 6578  test_bin(ram, ex
-00008760: 705f 6f75 7470 7574 290a 0a20 2020 2040  p_output)..    @
-00008770: 7061 7463 682e 6f62 6a65 6374 2873 6e61  patch.object(sna
-00008780: 7069 6e66 6f2c 2027 4261 7369 634c 6973  pinfo, 'BasicLis
-00008790: 7465 7227 2c20 4d6f 636b 4261 7369 634c  ter', MockBasicL
-000087a0: 6973 7465 7229 0a20 2020 2064 6566 2074  ister).    def t
-000087b0: 6573 745f 6f70 7469 6f6e 5f62 2873 656c  est_option_b(sel
-000087c0: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
-000087d0: 3d20 5b31 3237 5d20 2a20 3439 3135 320a  = [127] * 49152.
-000087e0: 2020 2020 2020 2020 736e 6166 696c 6520          snafile 
-000087f0: 3d20 7365 6c66 2e77 7269 7465 5f62 696e  = self.write_bin
-00008800: 5f66 696c 6528 5b30 5d20 2a20 3237 202b  _file([0] * 27 +
-00008810: 2072 616d 2c20 7375 6666 6978 3d27 2e73   ram, suffix='.s
-00008820: 6e61 2729 0a20 2020 2020 2020 2065 7870  na').        exp
-00008830: 5f73 6e61 7073 686f 7420 3d20 5b30 5d20  _snapshot = [0] 
-00008840: 2a20 3136 3338 3420 2b20 7261 6d0a 2020  * 16384 + ram.  
-00008850: 2020 2020 2020 666f 7220 6f70 7469 6f6e        for option
-00008860: 2069 6e20 2827 2d62 272c 2027 2d2d 6261   in ('-b', '--ba
-00008870: 7369 6327 293a 0a20 2020 2020 2020 2020  sic'):.         
-00008880: 2020 206f 7574 7075 742c 2065 7272 6f72     output, error
-00008890: 203d 2073 656c 662e 7275 6e5f 736e 6170   = self.run_snap
-000088a0: 696e 666f 2827 7b7d 207b 7d27 2e66 6f72  info('{} {}'.for
-000088b0: 6d61 7428 6f70 7469 6f6e 2c20 736e 6166  mat(option, snaf
-000088c0: 696c 6529 290a 2020 2020 2020 2020 2020  ile)).          
-000088d0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000088e0: 616c 2865 7272 6f72 2c20 2727 290a 2020  al(error, '').  
-000088f0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00008900: 7373 6572 7445 7175 616c 2827 4241 5349  ssertEqual('BASI
-00008910: 4320 444f 4e45 215c 6e27 2c20 6f75 7470  C DONE!\n', outp
-00008920: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
-00008930: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00008940: 2865 7870 5f73 6e61 7073 686f 742c 206d  (exp_snapshot, m
-00008950: 6f63 6b5f 6261 7369 635f 6c69 7374 6572  ock_basic_lister
-00008960: 2e73 6e61 7073 686f 7429 0a20 2020 2020  .snapshot).     
-00008970: 2020 2020 2020 206d 6f63 6b5f 6261 7369         mock_basi
-00008980: 635f 6c69 7374 6572 2e73 6e61 7073 686f  c_lister.snapsho
-00008990: 7420 3d20 4e6f 6e65 0a0a 2020 2020 4070  t = None..    @p
-000089a0: 6174 6368 2e6f 626a 6563 7428 736e 6170  atch.object(snap
-000089b0: 696e 666f 2c20 2756 6172 6961 626c 654c  info, 'VariableL
-000089c0: 6973 7465 7227 2c20 4d6f 636b 5661 7269  ister', MockVari
-000089d0: 6162 6c65 4c69 7374 6572 290a 2020 2020  ableLister).    
-000089e0: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
-000089f0: 7628 7365 6c66 293a 0a20 2020 2020 2020  v(self):.       
-00008a00: 2072 616d 203d 205b 3132 375d 202a 2034   ram = [127] * 4
-00008a10: 3931 3532 0a20 2020 2020 2020 2073 6e61  9152.        sna
-00008a20: 6669 6c65 203d 2073 656c 662e 7772 6974  file = self.writ
-00008a30: 655f 6269 6e5f 6669 6c65 285b 305d 202a  e_bin_file([0] *
-00008a40: 2032 3720 2b20 7261 6d2c 2073 7566 6669   27 + ram, suffi
-00008a50: 783d 272e 736e 6127 290a 2020 2020 2020  x='.sna').      
-00008a60: 2020 6578 705f 736e 6170 7368 6f74 203d    exp_snapshot =
-00008a70: 205b 305d 202a 2031 3633 3834 202b 2072   [0] * 16384 + r
-00008a80: 616d 0a20 2020 2020 2020 2066 6f72 206f  am.        for o
-00008a90: 7074 696f 6e20 696e 2028 272d 7627 2c20  ption in ('-v', 
-00008aa0: 272d 2d76 6172 6961 626c 6573 2729 3a0a  '--variables'):.
-00008ab0: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
-00008ac0: 7574 2c20 6572 726f 7220 3d20 7365 6c66  ut, error = self
-00008ad0: 2e72 756e 5f73 6e61 7069 6e66 6f28 277b  .run_snapinfo('{
-00008ae0: 7d20 7b7d 272e 666f 726d 6174 286f 7074  } {}'.format(opt
-00008af0: 696f 6e2c 2073 6e61 6669 6c65 2929 0a20  ion, snafile)). 
-00008b00: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00008b10: 6173 7365 7274 4571 7561 6c28 6572 726f  assertEqual(erro
-00008b20: 722c 2027 2729 0a20 2020 2020 2020 2020  r, '').         
-00008b30: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00008b40: 7561 6c28 2756 4152 4941 424c 4553 2044  ual('VARIABLES D
-00008b50: 4f4e 4521 5c6e 272c 206f 7574 7075 7429  ONE!\n', output)
-00008b60: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00008b70: 662e 6173 7365 7274 4571 7561 6c28 6578  f.assertEqual(ex
-00008b80: 705f 736e 6170 7368 6f74 2c20 6d6f 636b  p_snapshot, mock
-00008b90: 5f76 6172 6961 626c 655f 6c69 7374 6572  _variable_lister
-00008ba0: 2e73 6e61 7073 686f 7429 0a20 2020 2020  .snapshot).     
-00008bb0: 2020 2020 2020 206d 6f63 6b5f 7661 7269         mock_vari
-00008bc0: 6162 6c65 5f6c 6973 7465 722e 736e 6170  able_lister.snap
-00008bd0: 7368 6f74 203d 204e 6f6e 650a 0a20 2020  shot = None..   
-00008be0: 2040 7061 7463 682e 6f62 6a65 6374 2873   @patch.object(s
-00008bf0: 6e61 7069 6e66 6f2c 2027 4261 7369 634c  napinfo, 'BasicL
-00008c00: 6973 7465 7227 2c20 4d6f 636b 4261 7369  ister', MockBasi
-00008c10: 634c 6973 7465 7229 0a20 2020 2040 7061  cLister).    @pa
-00008c20: 7463 682e 6f62 6a65 6374 2873 6e61 7069  tch.object(snapi
-00008c30: 6e66 6f2c 2027 5661 7269 6162 6c65 4c69  nfo, 'VariableLi
-00008c40: 7374 6572 272c 204d 6f63 6b56 6172 6961  ster', MockVaria
-00008c50: 626c 654c 6973 7465 7229 0a20 2020 2064  bleLister).    d
-00008c60: 6566 2074 6573 745f 6f70 7469 6f6e 735f  ef test_options_
-00008c70: 625f 616e 645f 7628 7365 6c66 293a 0a20  b_and_v(self):. 
-00008c80: 2020 2020 2020 2072 616d 203d 205b 3132         ram = [12
-00008c90: 375d 202a 2034 3931 3532 0a20 2020 2020  7] * 49152.     
-00008ca0: 2020 2073 6e61 6669 6c65 203d 2073 656c     snafile = sel
-00008cb0: 662e 7772 6974 655f 6269 6e5f 6669 6c65  f.write_bin_file
-00008cc0: 285b 305d 202a 2032 3720 2b20 7261 6d2c  ([0] * 27 + ram,
-00008cd0: 2073 7566 6669 783d 272e 736e 6127 290a   suffix='.sna').
-00008ce0: 2020 2020 2020 2020 6578 705f 736e 6170          exp_snap
-00008cf0: 7368 6f74 203d 205b 305d 202a 2031 3633  shot = [0] * 163
-00008d00: 3834 202b 2072 616d 0a20 2020 2020 2020  84 + ram.       
-00008d10: 2066 6f72 206f 7074 696f 6e20 696e 2028   for option in (
-00008d20: 272d 6276 272c 2027 2d62 202d 2d76 6172  '-bv', '-b --var
-00008d30: 6961 626c 6573 272c 2027 2d2d 6261 7369  iables', '--basi
-00008d40: 6320 2d76 272c 2027 2d2d 6261 7369 6320  c -v', '--basic 
-00008d50: 2d2d 7661 7269 6162 6c65 7327 293a 0a20  --variables'):. 
-00008d60: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
-00008d70: 742c 2065 7272 6f72 203d 2073 656c 662e  t, error = self.
-00008d80: 7275 6e5f 736e 6170 696e 666f 2827 7b7d  run_snapinfo('{}
-00008d90: 207b 7d27 2e66 6f72 6d61 7428 6f70 7469   {}'.format(opti
-00008da0: 6f6e 2c20 736e 6166 696c 6529 290a 2020  on, snafile)).  
-00008db0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00008dc0: 7373 6572 7445 7175 616c 2865 7272 6f72  ssertEqual(error
-00008dd0: 2c20 2727 290a 2020 2020 2020 2020 2020  , '').          
-00008de0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00008df0: 616c 2827 4241 5349 4320 444f 4e45 215c  al('BASIC DONE!\
-00008e00: 6e56 4152 4941 424c 4553 2044 4f4e 4521  nVARIABLES DONE!
-00008e10: 5c6e 272c 206f 7574 7075 7429 0a20 2020  \n', output).   
-00008e20: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00008e30: 7365 7274 4571 7561 6c28 6578 705f 736e  sertEqual(exp_sn
-00008e40: 6170 7368 6f74 2c20 6d6f 636b 5f62 6173  apshot, mock_bas
-00008e50: 6963 5f6c 6973 7465 722e 736e 6170 7368  ic_lister.snapsh
-00008e60: 6f74 290a 2020 2020 2020 2020 2020 2020  ot).            
-00008e70: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00008e80: 2865 7870 5f73 6e61 7073 686f 742c 206d  (exp_snapshot, m
-00008e90: 6f63 6b5f 7661 7269 6162 6c65 5f6c 6973  ock_variable_lis
-00008ea0: 7465 722e 736e 6170 7368 6f74 290a 2020  ter.snapshot).  
-00008eb0: 2020 2020 2020 2020 2020 6d6f 636b 5f62            mock_b
-00008ec0: 6173 6963 5f6c 6973 7465 722e 736e 6170  asic_lister.snap
-00008ed0: 7368 6f74 203d 204e 6f6e 650a 2020 2020  shot = None.    
-00008ee0: 2020 2020 2020 2020 6d6f 636b 5f76 6172          mock_var
-00008ef0: 6961 626c 655f 6c69 7374 6572 2e73 6e61  iable_lister.sna
-00008f00: 7073 686f 7420 3d20 4e6f 6e65 0a0a 2020  pshot = None..  
-00008f10: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
-00008f20: 6e5f 6328 7365 6c66 293a 0a20 2020 2020  n_c(self):.     
-00008f30: 2020 2072 616d 203d 205b 3230 312c 2031     ram = [201, 1
-00008f40: 3935 2c20 302c 2036 345d 202b 205b 305d  95, 0, 64] + [0]
-00008f50: 202a 2034 3931 3438 0a20 2020 2020 2020   * 49148.       
-00008f60: 2063 746c 203d 2022 2222 0a20 2020 2020   ctl = """.     
-00008f70: 2020 2020 2020 2040 2031 3633 3834 206c         @ 16384 l
-00008f80: 6162 656c 3d45 4e44 0a20 2020 2020 2020  abel=END.       
-00008f90: 2020 2020 2063 2031 3633 3834 0a20 2020       c 16384.   
-00008fa0: 2020 2020 2020 2020 2040 2031 3633 3835           @ 16385
-00008fb0: 206c 6162 656c 3d53 5441 5254 0a20 2020   label=START.   
-00008fc0: 2020 2020 2020 2020 2063 2031 3633 3835           c 16385
-00008fd0: 0a20 2020 2020 2020 2020 2020 2069 2031  .            i 1
-00008fe0: 3633 3838 0a20 2020 2020 2020 2022 2222  6388.        """
-00008ff0: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
-00009000: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
-00009010: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
-00009020: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
-00009030: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
-00009040: 6e73 3a20 3136 3338 350a 2020 2020 2020  ns: 16385.      
-00009050: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
-00009060: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
-00009070: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
-00009080: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
-00009090: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-000090a0: 205b 7368 6170 653d 7265 636f 7264 5d0a   [shape=record].
-000090b0: 2020 2020 2020 2020 2020 2020 3136 3338              1638
-000090c0: 3420 5b6c 6162 656c 3d22 3136 3338 3420  4 [label="16384 
-000090d0: 3430 3030 5c6e 454e 4422 5d0a 2020 2020  4000\nEND"].    
-000090e0: 2020 2020 2020 2020 3136 3338 3520 5b6c          16385 [l
-000090f0: 6162 656c 3d22 3136 3338 3520 3430 3031  abel="16385 4001
-00009100: 5c6e 5354 4152 5422 5d0a 2020 2020 2020  \nSTART"].      
-00009110: 2020 2020 2020 3136 3338 3520 2d3e 207b        16385 -> {
-00009120: 3136 3338 347d 0a20 2020 2020 2020 2020  16384}.         
-00009130: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
-00009140: 0a20 2020 2020 2020 2063 746c 6669 6c65  .        ctlfile
-00009150: 203d 2073 656c 662e 7772 6974 655f 7465   = self.write_te
-00009160: 7874 5f66 696c 6528 6465 6465 6e74 2863  xt_file(dedent(c
-00009170: 746c 292e 7374 7269 7028 292c 2073 7566  tl).strip(), suf
-00009180: 6669 783d 272e 6374 6c27 290a 2020 2020  fix='.ctl').    
-00009190: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-000091a0: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-000091b0: 7574 2c20 272d 6720 2d63 207b 7d27 2e66  ut, '-g -c {}'.f
-000091c0: 6f72 6d61 7428 6374 6c66 696c 6529 2c20  ormat(ctlfile), 
-000091d0: 6374 6c66 696c 6573 3d5b 6374 6c66 696c  ctlfiles=[ctlfil
-000091e0: 655d 290a 0a20 2020 2064 6566 2074 6573  e])..    def tes
-000091f0: 745f 6f70 7469 6f6e 5f63 5f6f 7665 7272  t_option_c_overr
-00009200: 6964 6573 5f64 6566 6175 6c74 5f63 746c  ides_default_ctl
-00009210: 5f66 696c 6528 7365 6c66 293a 0a20 2020  _file(self):.   
-00009220: 2020 2020 2072 616d 203d 205b 3234 2c20       ram = [24, 
-00009230: 302c 2032 342c 2032 3532 5d20 2b20 5b30  0, 24, 252] + [0
-00009240: 5d20 2a20 3439 3134 380a 2020 2020 2020  ] * 49148.      
-00009250: 2020 6465 665f 6374 6c20 3d20 2222 220a    def_ctl = """.
-00009260: 2020 2020 2020 2020 2020 2020 4020 3136              @ 16
-00009270: 3338 3420 6c61 6265 6c3d 414c 4c0a 2020  384 label=ALL.  
-00009280: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
-00009290: 340a 2020 2020 2020 2020 2020 2020 6920  4.            i 
-000092a0: 3136 3338 380a 2020 2020 2020 2020 2222  16388.        ""
-000092b0: 220a 2020 2020 2020 2020 6374 6c20 3d20  ".        ctl = 
-000092c0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
-000092d0: 4020 3136 3338 3420 6c61 6265 6c3d 4f4e  @ 16384 label=ON
-000092e0: 450a 2020 2020 2020 2020 2020 2020 6320  E.            c 
-000092f0: 3136 3338 340a 2020 2020 2020 2020 2020  16384.          
-00009300: 2020 4020 3136 3338 3620 6c61 6265 6c3d    @ 16386 label=
-00009310: 5457 4f0a 2020 2020 2020 2020 2020 2020  TWO.            
-00009320: 6320 3136 3338 360a 2020 2020 2020 2020  c 16386.        
-00009330: 2020 2020 6920 3136 3338 380a 2020 2020      i 16388.    
-00009340: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00009350: 6578 705f 6f75 7470 7574 203d 2072 2222  exp_output = r""
-00009360: 220a 2020 2020 2020 2020 2020 2020 2f2f  ".            //
-00009370: 2055 6e63 6f6e 6e65 6374 6564 3a20 4e6f   Unconnected: No
-00009380: 6e65 0a20 2020 2020 2020 2020 2020 202f  ne.            /
-00009390: 2f20 4f72 7068 616e 733a 204e 6f6e 650a  / Orphans: None.
-000093a0: 2020 2020 2020 2020 2020 2020 2f2f 2046              // F
-000093b0: 6972 7374 2069 6e73 7472 7563 7469 6f6e  irst instruction
-000093c0: 206e 6f74 2075 7365 643a 204e 6f6e 650a   not used: None.
-000093d0: 2020 2020 2020 2020 2020 2020 6469 6772              digr
-000093e0: 6170 6820 7b0a 2020 2020 2020 2020 2020  aph {.          
-000093f0: 2020 6e6f 6465 205b 7368 6170 653d 7265    node [shape=re
-00009400: 636f 7264 5d0a 2020 2020 2020 2020 2020  cord].          
-00009410: 2020 3136 3338 3420 5b6c 6162 656c 3d22    16384 [label="
-00009420: 3136 3338 3420 3430 3030 5c6e 4f4e 4522  16384 4000\nONE"
-00009430: 5d0a 2020 2020 2020 2020 2020 2020 3136  ].            16
-00009440: 3338 3420 2d3e 207b 3136 3338 367d 0a20  384 -> {16386}. 
-00009450: 2020 2020 2020 2020 2020 2031 3633 3836             16386
-00009460: 205b 6c61 6265 6c3d 2231 3633 3836 2034   [label="16386 4
-00009470: 3030 325c 6e54 574f 225d 0a20 2020 2020  002\nTWO"].     
-00009480: 2020 2020 2020 2031 3633 3836 202d 3e20         16386 -> 
-00009490: 7b31 3633 3834 7d0a 2020 2020 2020 2020  {16384}.        
-000094a0: 2020 2020 7d0a 2020 2020 2020 2020 2222      }.        ""
-000094b0: 220a 2020 2020 2020 2020 6374 6c66 696c  ".        ctlfil
-000094c0: 6520 3d20 7365 6c66 2e77 7269 7465 5f74  e = self.write_t
-000094d0: 6578 745f 6669 6c65 2864 6564 656e 7428  ext_file(dedent(
-000094e0: 6374 6c29 2e73 7472 6970 2829 2c20 7375  ctl).strip(), su
-000094f0: 6666 6978 3d27 2e63 746c 2729 0a20 2020  ffix='.ctl').   
-00009500: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00009510: 736e 6128 7261 6d2c 2065 7870 5f6f 7574  sna(ram, exp_out
-00009520: 7075 742c 2027 2d67 202d 2d63 746c 207b  put, '-g --ctl {
-00009530: 7d27 2e66 6f72 6d61 7428 6374 6c66 696c  }'.format(ctlfil
-00009540: 6529 2c20 6465 665f 6374 6c2c 205b 6374  e), def_ctl, [ct
-00009550: 6c66 696c 655d 290a 0a20 2020 2064 6566  lfile])..    def
-00009560: 2074 6573 745f 6f70 7469 6f6e 5f63 5f6d   test_option_c_m
-00009570: 756c 7469 706c 6528 7365 6c66 293a 0a20  ultiple(self):. 
-00009580: 2020 2020 2020 2072 616d 203d 205b 3230         ram = [20
-00009590: 312c 2031 3935 2c20 302c 2036 345d 202b  1, 195, 0, 64] +
-000095a0: 205b 305d 202a 2034 3931 3438 0a20 2020   [0] * 49148.   
-000095b0: 2020 2020 2063 746c 3120 3d20 2222 220a       ctl1 = """.
-000095c0: 2020 2020 2020 2020 2020 2020 4020 3136              @ 16
-000095d0: 3338 3420 6c61 6265 6c3d 454e 440a 2020  384 label=END.  
-000095e0: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
-000095f0: 340a 2020 2020 2020 2020 2222 220a 2020  4.        """.  
-00009600: 2020 2020 2020 6374 6c32 203d 2022 2222        ctl2 = """
-00009610: 0a20 2020 2020 2020 2020 2020 2040 2031  .            @ 1
-00009620: 3633 3835 206c 6162 656c 3d53 5441 5254  6385 label=START
-00009630: 0a20 2020 2020 2020 2020 2020 2063 2031  .            c 1
-00009640: 3633 3835 0a20 2020 2020 2020 2020 2020  6385.           
-00009650: 2069 2031 3633 3838 0a20 2020 2020 2020   i 16388.       
-00009660: 2022 2222 0a20 2020 2020 2020 2065 7870   """.        exp
-00009670: 5f6f 7574 7075 7420 3d20 7222 2222 0a20  _output = r""". 
-00009680: 2020 2020 2020 2020 2020 202f 2f20 556e             // Un
-00009690: 636f 6e6e 6563 7465 643a 204e 6f6e 650a  connected: None.
-000096a0: 2020 2020 2020 2020 2020 2020 2f2f 204f              // O
-000096b0: 7270 6861 6e73 3a20 3136 3338 350a 2020  rphans: 16385.  
-000096c0: 2020 2020 2020 2020 2020 2f2f 2046 6972            // Fir
-000096d0: 7374 2069 6e73 7472 7563 7469 6f6e 206e  st instruction n
-000096e0: 6f74 2075 7365 643a 204e 6f6e 650a 2020  ot used: None.  
-000096f0: 2020 2020 2020 2020 2020 6469 6772 6170            digrap
-00009700: 6820 7b0a 2020 2020 2020 2020 2020 2020  h {.            
-00009710: 6e6f 6465 205b 7368 6170 653d 7265 636f  node [shape=reco
-00009720: 7264 5d0a 2020 2020 2020 2020 2020 2020  rd].            
-00009730: 3136 3338 3420 5b6c 6162 656c 3d22 3136  16384 [label="16
-00009740: 3338 3420 3430 3030 5c6e 454e 4422 5d0a  384 4000\nEND"].
-00009750: 2020 2020 2020 2020 2020 2020 3136 3338              1638
-00009760: 3520 5b6c 6162 656c 3d22 3136 3338 3520  5 [label="16385 
-00009770: 3430 3031 5c6e 5354 4152 5422 5d0a 2020  4001\nSTART"].  
-00009780: 2020 2020 2020 2020 2020 3136 3338 3520            16385 
-00009790: 2d3e 207b 3136 3338 347d 0a20 2020 2020  -> {16384}.     
-000097a0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-000097b0: 2022 2222 0a20 2020 2020 2020 2063 746c   """.        ctl
-000097c0: 6669 6c65 7320 3d20 5b73 656c 662e 7772  files = [self.wr
-000097d0: 6974 655f 7465 7874 5f66 696c 6528 6465  ite_text_file(de
-000097e0: 6465 6e74 2863 292e 7374 7269 7028 292c  dent(c).strip(),
-000097f0: 2073 7566 6669 783d 272e 6374 6c27 2920   suffix='.ctl') 
-00009800: 666f 7220 6320 696e 2028 6374 6c31 2c20  for c in (ctl1, 
-00009810: 6374 6c32 295d 0a20 2020 2020 2020 2073  ctl2)].        s
-00009820: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-00009830: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-00009840: 2d67 202d 6320 7b7d 202d 2d63 746c 207b  -g -c {} --ctl {
-00009850: 7d27 2e66 6f72 6d61 7428 2a63 746c 6669  }'.format(*ctlfi
-00009860: 6c65 7329 2c20 6374 6c66 696c 6573 3d63  les), ctlfiles=c
-00009870: 746c 6669 6c65 7329 0a0a 2020 2020 6465  tlfiles)..    de
-00009880: 6620 7465 7374 5f6f 7074 696f 6e5f 635f  f test_option_c_
-00009890: 7769 7468 5f64 6972 6563 746f 7279 2873  with_directory(s
-000098a0: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
-000098b0: 6d20 3d20 5b32 3031 2c20 3139 352c 2030  m = [201, 195, 0
-000098c0: 2c20 3634 5d20 2b20 5b30 5d20 2a20 3439  , 64] + [0] * 49
-000098d0: 3134 380a 2020 2020 2020 2020 6374 6c31  148.        ctl1
-000098e0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-000098f0: 2020 2040 2031 3633 3834 206c 6162 656c     @ 16384 label
-00009900: 3d45 4e44 0a20 2020 2020 2020 2020 2020  =END.           
-00009910: 2063 2031 3633 3834 0a20 2020 2020 2020   c 16384.       
-00009920: 2022 2222 0a20 2020 2020 2020 2063 746c   """.        ctl
-00009930: 3220 3d20 2222 220a 2020 2020 2020 2020  2 = """.        
-00009940: 2020 2020 4020 3136 3338 3520 6c61 6265      @ 16385 labe
-00009950: 6c3d 5354 4152 540a 2020 2020 2020 2020  l=START.        
-00009960: 2020 2020 6320 3136 3338 350a 2020 2020      c 16385.    
-00009970: 2020 2020 2020 2020 6920 3136 3338 380a          i 16388.
-00009980: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00009990: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
-000099a0: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
-000099b0: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
-000099c0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
-000099d0: 2020 202f 2f20 4f72 7068 616e 733a 2031     // Orphans: 1
-000099e0: 3633 3835 0a20 2020 2020 2020 2020 2020  6385.           
-000099f0: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
-00009a00: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
-00009a10: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00009a20: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
-00009a30: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
-00009a40: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
-00009a50: 2020 2020 2020 2031 3633 3834 205b 6c61         16384 [la
-00009a60: 6265 6c3d 2231 3633 3834 2034 3030 305c  bel="16384 4000\
-00009a70: 6e45 4e44 225d 0a20 2020 2020 2020 2020  nEND"].         
-00009a80: 2020 2031 3633 3835 205b 6c61 6265 6c3d     16385 [label=
-00009a90: 2231 3633 3835 2034 3030 315c 6e53 5441  "16385 4001\nSTA
-00009aa0: 5254 225d 0a20 2020 2020 2020 2020 2020  RT"].           
-00009ab0: 2031 3633 3835 202d 3e20 7b31 3633 3834   16385 -> {16384
-00009ac0: 7d0a 2020 2020 2020 2020 2020 2020 7d0a  }.            }.
-00009ad0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00009ae0: 2020 2020 6374 6c64 6972 203d 2073 656c      ctldir = sel
-00009af0: 662e 6d61 6b65 5f64 6972 6563 746f 7279  f.make_directory
-00009b00: 2829 0a20 2020 2020 2020 2063 746c 3166  ().        ctl1f
-00009b10: 203d 2073 656c 662e 7772 6974 655f 7465   = self.write_te
-00009b20: 7874 5f66 696c 6528 6465 6465 6e74 2863  xt_file(dedent(c
-00009b30: 746c 3129 2e73 7472 6970 2829 2c20 7061  tl1).strip(), pa
-00009b40: 7468 3d6f 732e 7061 7468 2e6a 6f69 6e28  th=os.path.join(
-00009b50: 6374 6c64 6972 2c20 2762 6172 2e63 746c  ctldir, 'bar.ctl
-00009b60: 2729 290a 2020 2020 2020 2020 6374 6c32  ')).        ctl2
-00009b70: 6620 3d20 7365 6c66 2e77 7269 7465 5f74  f = self.write_t
-00009b80: 6578 745f 6669 6c65 2864 6564 656e 7428  ext_file(dedent(
-00009b90: 6374 6c32 292e 7374 7269 7028 292c 2070  ctl2).strip(), p
-00009ba0: 6174 683d 6f73 2e70 6174 682e 6a6f 696e  ath=os.path.join
-00009bb0: 2863 746c 6469 722c 2027 666f 6f2e 6374  (ctldir, 'foo.ct
-00009bc0: 6c27 2929 0a20 2020 2020 2020 2073 656c  l')).        sel
-00009bd0: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
-00009be0: 2065 7870 5f6f 7574 7075 742c 2027 2d67   exp_output, '-g
-00009bf0: 202d 6320 7b7d 272e 666f 726d 6174 2863   -c {}'.format(c
-00009c00: 746c 6469 7229 2c20 6374 6c66 696c 6573  tldir), ctlfiles
-00009c10: 3d28 6374 6c31 662c 2063 746c 3266 2929  =(ctl1f, ctl2f))
-00009c20: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
-00009c30: 7074 696f 6e5f 665f 7769 7468 5f73 696e  ption_f_with_sin
-00009c40: 676c 655f 6279 7465 2873 656c 6629 3a0a  gle_byte(self):.
-00009c50: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-00009c60: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
-00009c70: 2020 6164 6472 6573 7320 3d20 3533 3236    address = 5326
-00009c80: 370a 2020 2020 2020 2020 7261 6d5b 6164  7.        ram[ad
-00009c90: 6472 6573 7320 2d20 3136 3338 345d 203d  dress - 16384] =
-00009ca0: 2037 370a 2020 2020 2020 2020 6578 705f   77.        exp_
-00009cb0: 6f75 7470 7574 203d 2027 3533 3236 372d  output = '53267-
-00009cc0: 3533 3236 372d 3120 4430 3133 2d44 3031  53267-1 D013-D01
-00009cd0: 332d 313a 2037 3727 0a20 2020 2020 2020  3-1: 77'.       
-00009ce0: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
-00009cf0: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
-00009d00: 2027 2d66 2037 3727 290a 0a20 2020 2064   '-f 77')..    d
-00009d10: 6566 2074 6573 745f 6f70 7469 6f6e 5f66  ef test_option_f
-00009d20: 696e 645f 7769 7468 5f62 7974 655f 7365  ind_with_byte_se
-00009d30: 7175 656e 6365 2873 656c 6629 3a0a 2020  quence(self):.  
-00009d40: 2020 2020 2020 7261 6d20 3d20 5b30 5d20        ram = [0] 
-00009d50: 2a20 3439 3135 320a 2020 2020 2020 2020  * 49152.        
-00009d60: 6164 6472 6573 7320 3d20 3335 3637 340a  address = 35674.
-00009d70: 2020 2020 2020 2020 7365 7120 3d20 2832          seq = (2
-00009d80: 2c20 342c 2036 290a 2020 2020 2020 2020  , 4, 6).        
-00009d90: 7261 6d5b 6164 6472 6573 7320 2d20 3136  ram[address - 16
-00009da0: 3338 343a 6164 6472 6573 7320 2d20 3136  384:address - 16
-00009db0: 3338 3420 2b20 6c65 6e28 7365 7129 5d20  384 + len(seq)] 
-00009dc0: 3d20 7365 710a 2020 2020 2020 2020 7365  = seq.        se
-00009dd0: 715f 7374 7220 3d20 272c 272e 6a6f 696e  q_str = ','.join
-00009de0: 285b 7374 7228 6229 2066 6f72 2062 2069  ([str(b) for b i
-00009df0: 6e20 7365 715d 290a 2020 2020 2020 2020  n seq]).        
-00009e00: 6578 705f 6f75 7470 7574 203d 2027 3335  exp_output = '35
-00009e10: 3637 342d 3335 3637 362d 3120 3842 3541  674-35676-1 8B5A
-00009e20: 2d38 4235 432d 313a 207b 7d27 2e66 6f72  -8B5C-1: {}'.for
-00009e30: 6d61 7428 7365 715f 7374 7229 0a20 2020  mat(seq_str).   
-00009e40: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00009e50: 736e 6128 7261 6d2c 2065 7870 5f6f 7574  sna(ram, exp_out
-00009e60: 7075 742c 2027 2d2d 6669 6e64 207b 7d27  put, '--find {}'
-00009e70: 2e66 6f72 6d61 7428 7365 715f 7374 7229  .format(seq_str)
-00009e80: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00009e90: 6f70 7469 6f6e 5f66 5f77 6974 685f 6279  option_f_with_by
-00009ea0: 7465 5f73 6571 7565 6e63 655f 616e 645f  te_sequence_and_
-00009eb0: 7374 6570 2873 656c 6629 3a0a 2020 2020  step(self):.    
-00009ec0: 2020 2020 7261 6d20 3d20 5b30 5d20 2a20      ram = [0] * 
-00009ed0: 3439 3135 320a 2020 2020 2020 2020 6164  49152.        ad
-00009ee0: 6472 6573 7320 3d20 3437 3938 330a 2020  dress = 47983.  
-00009ef0: 2020 2020 2020 7365 7120 3d20 2832 2c20        seq = (2, 
-00009f00: 332c 2035 290a 2020 2020 2020 2020 7374  3, 5).        st
-00009f10: 6570 203d 2032 0a20 2020 2020 2020 2072  ep = 2.        r
-00009f20: 616d 5b61 6464 7265 7373 202d 2031 3633  am[address - 163
-00009f30: 3834 3a61 6464 7265 7373 202d 2031 3633  84:address - 163
-00009f40: 3834 202b 2073 7465 7020 2a20 6c65 6e28  84 + step * len(
-00009f50: 7365 7129 3a73 7465 705d 203d 2073 6571  seq):step] = seq
-00009f60: 0a20 2020 2020 2020 2073 6571 5f73 7472  .        seq_str
-00009f70: 203d 2027 2c27 2e6a 6f69 6e28 5b73 7472   = ','.join([str
-00009f80: 2862 2920 666f 7220 6220 696e 2073 6571  (b) for b in seq
-00009f90: 5d29 0a20 2020 2020 2020 2065 7870 5f6f  ]).        exp_o
-00009fa0: 7574 7075 7420 3d20 2734 3739 3833 2d34  utput = '47983-4
-00009fb0: 3739 3837 2d32 2042 4236 462d 4242 3733  7987-2 BB6F-BB73
-00009fc0: 2d32 3a20 7b7d 272e 666f 726d 6174 2873  -2: {}'.format(s
-00009fd0: 6571 5f73 7472 290a 2020 2020 2020 2020  eq_str).        
-00009fe0: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
-00009ff0: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
-0000a000: 272d 6620 7b7d 2d7b 7d27 2e66 6f72 6d61  '-f {}-{}'.forma
-0000a010: 7428 7365 715f 7374 722c 2073 7465 7029  t(seq_str, step)
-0000a020: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-0000a030: 6f70 7469 6f6e 5f66 5f77 6974 685f 6279  option_f_with_by
-0000a040: 7465 5f73 6571 7565 6e63 655f 616e 645f  te_sequence_and_
-0000a050: 7374 6570 5f72 616e 6765 2873 656c 6629  step_range(self)
-0000a060: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
-0000a070: 5b30 5d20 2a20 3439 3135 320a 2020 2020  [0] * 49152.    
-0000a080: 2020 2020 6164 6472 6573 7365 7320 3d20      addresses = 
-0000a090: 2833 3137 3833 2c20 3432 3536 372c 2035  (31783, 42567, 5
-0000a0a0: 3231 3732 290a 2020 2020 2020 2020 7365  2172).        se
-0000a0b0: 7120 3d20 2838 2c20 3130 2c20 3133 290a  q = (8, 10, 13).
-0000a0c0: 2020 2020 2020 2020 7374 6570 7320 3d20          steps = 
-0000a0d0: 2832 2c20 332c 2034 290a 2020 2020 2020  (2, 3, 4).      
-0000a0e0: 2020 7365 715f 7374 7220 3d20 272c 272e    seq_str = ','.
-0000a0f0: 6a6f 696e 285b 7374 7228 6229 2066 6f72  join([str(b) for
-0000a100: 2062 2069 6e20 7365 715d 290a 2020 2020   b in seq]).    
-0000a110: 2020 2020 666f 7220 6164 6472 2c20 7374      for addr, st
-0000a120: 6570 2069 6e20 7a69 7028 6164 6472 6573  ep in zip(addres
-0000a130: 7365 732c 2073 7465 7073 293a 0a20 2020  ses, steps):.   
-0000a140: 2020 2020 2020 2020 2072 616d 5b61 6464           ram[add
-0000a150: 7220 2d20 3136 3338 343a 6164 6472 202d  r - 16384:addr -
-0000a160: 2031 3633 3834 202b 2073 7465 7020 2a20   16384 + step * 
-0000a170: 6c65 6e28 7365 7129 3a73 7465 705d 203d  len(seq):step] =
-0000a180: 2073 6571 0a20 2020 2020 2020 2065 7870   seq.        exp
-0000a190: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
-0000a1a0: 2020 2020 2020 2020 2020 3331 3738 332d            31783-
-0000a1b0: 3331 3738 372d 3220 3743 3237 2d37 4332  31787-2 7C27-7C2
-0000a1c0: 422d 323a 2038 2c31 302c 3133 0a20 2020  B-2: 8,10,13.   
-0000a1d0: 2020 2020 2020 2020 2034 3235 3637 2d34           42567-4
-0000a1e0: 3235 3733 2d33 2041 3634 372d 4136 3444  2573-3 A647-A64D
-0000a1f0: 2d33 3a20 382c 3130 2c31 330a 2020 2020  -3: 8,10,13.    
-0000a200: 2020 2020 2020 2020 3532 3137 322d 3532          52172-52
-0000a210: 3138 302d 3420 4342 4343 2d43 4244 342d  180-4 CBCC-CBD4-
-0000a220: 343a 2038 2c31 302c 3133 0a20 2020 2020  4: 8,10,13.     
-0000a230: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0000a240: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-0000a250: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000a260: 2d66 207b 7d2d 312d 3527 2e66 6f72 6d61  -f {}-1-5'.forma
-0000a270: 7428 7365 715f 7374 7229 290a 0a20 2020  t(seq_str))..   
-0000a280: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
-0000a290: 5f66 5f77 6974 685f 6164 6472 6573 735f  _f_with_address_
-0000a2a0: 6265 6c6f 775f 3136 3338 3428 7365 6c66  below_16384(self
-0000a2b0: 293a 0a20 2020 2020 2020 2064 6174 6120  ):.        data 
-0000a2c0: 3d20 5b30 5d20 2a20 3235 360a 2020 2020  = [0] * 256.    
-0000a2d0: 2020 2020 6164 6472 6573 7320 3d20 3133      address = 13
-0000a2e0: 350a 2020 2020 2020 2020 7365 7120 3d20  5.        seq = 
-0000a2f0: 2832 2c20 342c 2036 290a 2020 2020 2020  (2, 4, 6).      
-0000a300: 2020 6461 7461 5b61 6464 7265 7373 3a61    data[address:a
-0000a310: 6464 7265 7373 202b 206c 656e 2873 6571  ddress + len(seq
-0000a320: 295d 203d 2073 6571 0a20 2020 2020 2020  )] = seq.       
-0000a330: 2073 6571 5f73 7472 203d 2027 2c27 2e6a   seq_str = ','.j
-0000a340: 6f69 6e28 5b73 7472 2862 2920 666f 7220  oin([str(b) for 
-0000a350: 6220 696e 2073 6571 5d29 0a20 2020 2020  b in seq]).     
-0000a360: 2020 2062 696e 6669 6c65 203d 2073 656c     binfile = sel
-0000a370: 662e 7772 6974 655f 6269 6e5f 6669 6c65  f.write_bin_file
-0000a380: 2864 6174 612c 2073 7566 6669 783d 272e  (data, suffix='.
-0000a390: 6269 6e27 290a 2020 2020 2020 2020 6578  bin').        ex
-0000a3a0: 705f 6f75 7470 7574 203d 2027 3133 352d  p_output = '135-
-0000a3b0: 3133 372d 3120 3030 3837 2d30 3038 392d  137-1 0087-0089-
-0000a3c0: 313a 207b 7d27 2e66 6f72 6d61 7428 7365  1: {}'.format(se
-0000a3d0: 715f 7374 7229 0a20 2020 2020 2020 206f  q_str).        o
-0000a3e0: 7574 7075 742c 2065 7272 6f72 203d 2073  utput, error = s
-0000a3f0: 656c 662e 7275 6e5f 736e 6170 696e 666f  elf.run_snapinfo
-0000a400: 2866 272d 6620 7b73 6571 5f73 7472 7d20  (f'-f {seq_str} 
-0000a410: 2d6f 2030 207b 6269 6e66 696c 657d 2729  -o 0 {binfile}')
-0000a420: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000a430: 7365 7274 4571 7561 6c28 6572 726f 722c  sertEqual(error,
-0000a440: 2027 2729 0a20 2020 2020 2020 2073 656c   '').        sel
-0000a450: 662e 6173 7365 7274 4571 7561 6c28 6f75  f.assertEqual(ou
-0000a460: 7470 7574 2e73 7472 6970 2829 2c20 6578  tput.strip(), ex
-0000a470: 705f 6f75 7470 7574 290a 0a20 2020 2064  p_output)..    d
-0000a480: 6566 2074 6573 745f 6f70 7469 6f6e 5f66  ef test_option_f
-0000a490: 5f77 6974 685f 6865 7861 6465 6369 6d61  _with_hexadecima
-0000a4a0: 6c5f 7661 6c75 6573 2873 656c 6629 3a0a  l_values(self):.
-0000a4b0: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-0000a4c0: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
-0000a4d0: 2020 6164 6472 6573 7320 3d20 3437 3938    address = 4798
-0000a4e0: 330a 2020 2020 2020 2020 7365 7120 3d20  3.        seq = 
-0000a4f0: 2830 7830 322c 2030 7833 662c 2030 7835  (0x02, 0x3f, 0x5
-0000a500: 6129 0a20 2020 2020 2020 2073 7465 7020  a).        step 
-0000a510: 3d20 3078 3161 0a20 2020 2020 2020 2072  = 0x1a.        r
-0000a520: 616d 5b61 6464 7265 7373 202d 2031 3633  am[address - 163
-0000a530: 3834 3a61 6464 7265 7373 202d 2031 3633  84:address - 163
-0000a540: 3834 202b 2073 7465 7020 2a20 6c65 6e28  84 + step * len(
-0000a550: 7365 7129 3a73 7465 705d 203d 2073 6571  seq):step] = seq
-0000a560: 0a20 2020 2020 2020 2073 6571 5f73 7472  .        seq_str
-0000a570: 203d 2027 2c27 2e6a 6f69 6e28 5b27 247b   = ','.join(['${
-0000a580: 3a30 3258 7d27 2e66 6f72 6d61 7428 6229  :02X}'.format(b)
-0000a590: 2066 6f72 2062 2069 6e20 7365 715d 290a   for b in seq]).
-0000a5a0: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-0000a5b0: 7574 203d 2027 3437 3938 332d 3438 3033  ut = '47983-4803
-0000a5c0: 352d 3236 2042 4236 462d 4242 4133 2d31  5-26 BB6F-BBA3-1
-0000a5d0: 413a 207b 7d27 2e66 6f72 6d61 7428 7365  A: {}'.format(se
-0000a5e0: 715f 7374 7229 0a20 2020 2020 2020 2073  q_str).        s
-0000a5f0: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-0000a600: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000a610: 2d66 207b 7d2d 247b 3a30 3278 7d27 2e66  -f {}-${:02x}'.f
-0000a620: 6f72 6d61 7428 7365 715f 7374 722c 2073  ormat(seq_str, s
-0000a630: 7465 7029 290a 0a20 2020 2064 6566 2074  tep))..    def t
-0000a640: 6573 745f 6f70 7469 6f6e 5f66 5f77 6974  est_option_f_wit
-0000a650: 685f 3078 5f68 6578 6164 6563 696d 616c  h_0x_hexadecimal
-0000a660: 5f76 616c 7565 7328 7365 6c66 293a 0a20  _values(self):. 
-0000a670: 2020 2020 2020 2072 616d 203d 205b 305d         ram = [0]
-0000a680: 202a 2034 3931 3532 0a20 2020 2020 2020   * 49152.       
-0000a690: 2061 6464 7265 7373 203d 2034 3739 3833   address = 47983
-0000a6a0: 0a20 2020 2020 2020 2073 6571 203d 2028  .        seq = (
-0000a6b0: 3078 3032 2c20 3078 3366 2c20 3078 3561  0x02, 0x3f, 0x5a
-0000a6c0: 290a 2020 2020 2020 2020 7374 6570 203d  ).        step =
-0000a6d0: 2030 7831 610a 2020 2020 2020 2020 7261   0x1a.        ra
-0000a6e0: 6d5b 6164 6472 6573 7320 2d20 3136 3338  m[address - 1638
-0000a6f0: 343a 6164 6472 6573 7320 2d20 3136 3338  4:address - 1638
-0000a700: 3420 2b20 7374 6570 202a 206c 656e 2873  4 + step * len(s
-0000a710: 6571 293a 7374 6570 5d20 3d20 7365 710a  eq):step] = seq.
-0000a720: 2020 2020 2020 2020 7365 715f 7374 7220          seq_str 
-0000a730: 3d20 272c 272e 6a6f 696e 285b 2730 787b  = ','.join(['0x{
-0000a740: 3a30 3258 7d27 2e66 6f72 6d61 7428 6229  :02X}'.format(b)
-0000a750: 2066 6f72 2062 2069 6e20 7365 715d 290a   for b in seq]).
-0000a760: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-0000a770: 7574 203d 2027 3437 3938 332d 3438 3033  ut = '47983-4803
-0000a780: 352d 3236 2042 4236 462d 4242 4133 2d31  5-26 BB6F-BBA3-1
-0000a790: 413a 207b 7d27 2e66 6f72 6d61 7428 7365  A: {}'.format(se
-0000a7a0: 715f 7374 7229 0a20 2020 2020 2020 2073  q_str).        s
-0000a7b0: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-0000a7c0: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000a7d0: 2d66 207b 7d2d 3078 7b3a 3032 787d 2d30  -f {}-0x{:02x}-0
-0000a7e0: 787b 3a30 3278 7d27 2e66 6f72 6d61 7428  x{:02x}'.format(
-0000a7f0: 7365 715f 7374 722c 2073 7465 702c 2073  seq_str, step, s
-0000a800: 7465 7020 2b20 3129 290a 0a20 2020 2064  tep + 1))..    d
-0000a810: 6566 2074 6573 745f 6f70 7469 6f6e 5f66  ef test_option_f
-0000a820: 696e 645f 7769 7468 5f6e 6f6e 6578 6973  ind_with_nonexis
-0000a830: 7465 6e74 5f62 7974 655f 7365 7175 656e  tent_byte_sequen
-0000a840: 6365 2873 656c 6629 3a0a 2020 2020 2020  ce(self):.      
-0000a850: 2020 7261 6d20 3d20 5b30 5d20 2a20 3439    ram = [0] * 49
-0000a860: 3135 320a 2020 2020 2020 2020 6578 705f  152.        exp_
-0000a870: 6f75 7470 7574 203d 2027 270a 2020 2020  output = ''.    
-0000a880: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-0000a890: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-0000a8a0: 7574 2c20 272d 2d66 696e 6420 312c 322c  ut, '--find 1,2,
-0000a8b0: 3327 290a 0a20 2020 2064 6566 2074 6573  3')..    def tes
-0000a8c0: 745f 6f70 7469 6f6e 5f66 696e 645f 7769  t_option_find_wi
-0000a8d0: 7468 5f69 6e76 616c 6964 5f62 7974 655f  th_invalid_byte_
-0000a8e0: 7365 7175 656e 6365 2873 656c 6629 3a0a  sequence(self):.
-0000a8f0: 2020 2020 2020 2020 6578 705f 6572 726f          exp_erro
-0000a900: 7220 3d20 2749 6e76 616c 6964 2062 7974  r = 'Invalid byt
-0000a910: 6520 7365 7175 656e 6365 270a 2020 2020  e sequence'.    
-0000a920: 2020 2020 7365 6c66 2e5f 7465 7374 5f62      self._test_b
-0000a930: 6164 5f73 7065 6328 272d 2d66 696e 6427  ad_spec('--find'
-0000a940: 2c20 277a 272c 2065 7870 5f65 7272 6f72  , 'z', exp_error
-0000a950: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-0000a960: 7465 7374 5f62 6164 5f73 7065 6328 272d  test_bad_spec('-
-0000a970: 6627 2c20 2731 2c21 272c 2065 7870 5f65  f', '1,!', exp_e
-0000a980: 7272 6f72 290a 2020 2020 2020 2020 7365  rror).        se
-0000a990: 6c66 2e5f 7465 7374 5f62 6164 5f73 7065  lf._test_bad_spe
-0000a9a0: 6328 272d 2d66 696e 6427 2c20 2731 2c32  c('--find', '1,2
-0000a9b0: 2c3f 272c 2065 7870 5f65 7272 6f72 290a  ,?', exp_error).
-0000a9c0: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
-0000a9d0: 7374 5f62 6164 5f73 7065 6328 272d 6627  st_bad_spec('-f'
-0000a9e0: 2c20 2731 2c2c 3327 2c20 6578 705f 6572  , '1,,3', exp_er
-0000a9f0: 726f 7229 0a0a 2020 2020 6465 6620 7465  ror)..    def te
-0000aa00: 7374 5f6f 7074 696f 6e5f 6669 6e64 5f77  st_option_find_w
-0000aa10: 6974 685f 696e 7661 6c69 645f 7374 6570  ith_invalid_step
-0000aa20: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000aa30: 6578 705f 6572 726f 7220 3d20 2749 6e76  exp_error = 'Inv
-0000aa40: 616c 6964 2064 6973 7461 6e63 653a 207b  alid distance: {
-0000aa50: 7d27 0a20 2020 2020 2020 2073 656c 662e  }'.        self.
-0000aa60: 5f74 6573 745f 6261 645f 7370 6563 2827  _test_bad_spec('
-0000aa70: 2d2d 6669 6e64 272c 2027 312c 322c 332d  --find', '1,2,3-
-0000aa80: 7827 2c20 6578 705f 6572 726f 722e 666f  x', exp_error.fo
-0000aa90: 726d 6174 2827 7827 292c 2046 616c 7365  rmat('x'), False
-0000aaa0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-0000aab0: 7465 7374 5f62 6164 5f73 7065 6328 272d  test_bad_spec('-
-0000aac0: 6627 2c20 2734 2c35 2c36 2d31 2d79 272c  f', '4,5,6-1-y',
-0000aad0: 2065 7870 5f65 7272 6f72 2e66 6f72 6d61   exp_error.forma
-0000aae0: 7428 2731 2d79 2729 2c20 4661 6c73 6529  t('1-y'), False)
-0000aaf0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-0000ab00: 6573 745f 6261 645f 7370 6563 2827 2d2d  est_bad_spec('--
-0000ab10: 6669 6e64 272c 2027 372c 382c 392d 7a2d  find', '7,8,9-z-
-0000ab20: 3527 2c20 6578 705f 6572 726f 722e 666f  5', exp_error.fo
-0000ab30: 726d 6174 2827 7a2d 3527 292c 2046 616c  rmat('z-5'), Fal
-0000ab40: 7365 290a 2020 2020 2020 2020 7365 6c66  se).        self
-0000ab50: 2e5f 7465 7374 5f62 6164 5f73 7065 6328  ._test_bad_spec(
-0000ab60: 272d 6627 2c20 2731 302c 3131 2c31 322d  '-f', '10,11,12-
-0000ab70: 712d 3f27 2c20 6578 705f 6572 726f 722e  q-?', exp_error.
-0000ab80: 666f 726d 6174 2827 712d 3f27 292c 2046  format('q-?'), F
-0000ab90: 616c 7365 290a 0a20 2020 2064 6566 2074  alse)..    def t
-0000aba0: 6573 745f 6f70 7469 6f6e 5f67 5f77 6974  est_option_g_wit
-0000abb0: 685f 6e6f 5f63 746c 5f66 696c 6528 7365  h_no_ctl_file(se
-0000abc0: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
-0000abd0: 203d 205b 305d 202a 2034 3931 3532 0a20   = [0] * 49152. 
-0000abe0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-0000abf0: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
-0000ac00: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
-0000ac10: 7465 643a 2031 3633 3834 0a20 2020 2020  ted: 16384.     
-0000ac20: 2020 2020 2020 202f 2f20 4f72 7068 616e         // Orphan
-0000ac30: 733a 204e 6f6e 650a 2020 2020 2020 2020  s: None.        
-0000ac40: 2020 2020 2f2f 2046 6972 7374 2069 6e73      // First ins
-0000ac50: 7472 7563 7469 6f6e 206e 6f74 2075 7365  truction not use
-0000ac60: 643a 204e 6f6e 650a 2020 2020 2020 2020  d: None.        
-0000ac70: 2020 2020 6469 6772 6170 6820 7b0a 2020      digraph {.  
-0000ac80: 2020 2020 2020 2020 2020 6e6f 6465 205b            node [
-0000ac90: 7368 6170 653d 7265 636f 7264 5d0a 2020  shape=record].  
-0000aca0: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
-0000acb0: 5b6c 6162 656c 3d22 3136 3338 3420 3430  [label="16384 40
-0000acc0: 3030 5c6e 225d 0a20 2020 2020 2020 2020  00\n"].         
-0000acd0: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
-0000ace0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-0000acf0: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
-0000ad00: 5f6f 7574 7075 742c 2027 2d67 2729 0a0a  _output, '-g')..
-0000ad10: 2020 2020 4070 6174 6368 2e6f 626a 6563      @patch.objec
-0000ad20: 7428 636f 6d70 6f6e 656e 7473 2c20 2753  t(components, 'S
-0000ad30: 4b5f 434f 4e46 4947 272c 204e 6f6e 6529  K_CONFIG', None)
-0000ad40: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
-0000ad50: 7469 6f6e 5f67 5f77 6974 685f 6e6f 5f63  tion_g_with_no_c
-0000ad60: 746c 5f66 696c 655f 616e 645f 6375 7374  tl_file_and_cust
-0000ad70: 6f6d 5f64 6566 6175 6c74 5f64 6973 6173  om_default_disas
-0000ad80: 7365 6d62 6c79 5f73 7461 7274 5f61 6464  sembly_start_add
-0000ad90: 7265 7373 2873 656c 6629 3a0a 2020 2020  ress(self):.    
-0000ada0: 2020 2020 696e 6920 3d20 225b 736b 6f6f      ini = "[skoo
-0000adb0: 6c6b 6974 5d5c 6e44 6566 6175 6c74 4469  lkit]\nDefaultDi
-0000adc0: 7361 7373 656d 626c 7953 7461 7274 4164  sassemblyStartAd
-0000add0: 6472 6573 733d 3634 3232 3222 0a20 2020  dress=64222".   
-0000ade0: 2020 2020 2073 656c 662e 7772 6974 655f       self.write_
-0000adf0: 7465 7874 5f66 696c 6528 696e 692c 2027  text_file(ini, '
-0000ae00: 736b 6f6f 6c6b 6974 2e69 6e69 2729 0a20  skoolkit.ini'). 
-0000ae10: 2020 2020 2020 2072 616d 203d 205b 305d         ram = [0]
-0000ae20: 202a 2034 3931 3532 0a20 2020 2020 2020   * 49152.       
-0000ae30: 2065 7870 5f6f 7574 7075 7420 3d20 7222   exp_output = r"
-0000ae40: 2222 0a20 2020 2020 2020 2020 2020 202f  "".            /
-0000ae50: 2f20 556e 636f 6e6e 6563 7465 643a 2036  / Unconnected: 6
-0000ae60: 3432 3232 0a20 2020 2020 2020 2020 2020  4222.           
-0000ae70: 202f 2f20 4f72 7068 616e 733a 204e 6f6e   // Orphans: Non
-0000ae80: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
-0000ae90: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
-0000aea0: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
-0000aeb0: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
-0000aec0: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
-0000aed0: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
-0000aee0: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
-0000aef0: 2020 2020 3634 3232 3220 5b6c 6162 656c      64222 [label
-0000af00: 3d22 3634 3232 3220 4641 4445 5c6e 225d  ="64222 FADE\n"]
-0000af10: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
-0000af20: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000af30: 2020 2073 656c 662e 5f74 6573 745f 736e     self._test_sn
-0000af40: 6128 7261 6d2c 2065 7870 5f6f 7574 7075  a(ram, exp_outpu
-0000af50: 742c 2027 2d67 2729 0a0a 2020 2020 6465  t, '-g')..    de
-0000af60: 6620 7465 7374 5f6f 7074 696f 6e5f 6361  f test_option_ca
-0000af70: 6c6c 5f67 7261 7068 5f77 6974 685f 6374  ll_graph_with_ct
-0000af80: 6c5f 6669 6c65 2873 656c 6629 3a0a 2020  l_file(self):.  
-0000af90: 2020 2020 2020 7261 6d20 3d20 5b31 3935        ram = [195
-0000afa0: 2c20 332c 2036 342c 2032 3031 5d20 2b20  , 3, 64, 201] + 
-0000afb0: 5b30 5d20 2a20 3439 3134 380a 2020 2020  [0] * 49148.    
-0000afc0: 2020 2020 6374 6c20 3d20 2222 220a 2020      ctl = """.  
-0000afd0: 2020 2020 2020 2020 2020 4020 3136 3338            @ 1638
-0000afe0: 3420 6c61 6265 6c3d 5354 4152 540a 2020  4 label=START.  
-0000aff0: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
-0000b000: 340a 2020 2020 2020 2020 2020 2020 4020  4.            @ 
-0000b010: 3136 3338 3720 6c61 6265 6c3d 454e 440a  16387 label=END.
-0000b020: 2020 2020 2020 2020 2020 2020 6320 3136              c 16
-0000b030: 3338 370a 2020 2020 2020 2020 2020 2020  387.            
-0000b040: 6920 3136 3338 380a 2020 2020 2020 2020  i 16388.        
-0000b050: 2222 220a 2020 2020 2020 2020 6578 705f  """.        exp_
-0000b060: 6f75 7470 7574 203d 2072 2222 220a 2020  output = r""".  
-0000b070: 2020 2020 2020 2020 2020 2f2f 2055 6e63            // Unc
-0000b080: 6f6e 6e65 6374 6564 3a20 4e6f 6e65 0a20  onnected: None. 
-0000b090: 2020 2020 2020 2020 2020 202f 2f20 4f72             // Or
-0000b0a0: 7068 616e 733a 2031 3633 3834 0a20 2020  phans: 16384.   
-0000b0b0: 2020 2020 2020 2020 202f 2f20 4669 7273           // Firs
-0000b0c0: 7420 696e 7374 7275 6374 696f 6e20 6e6f  t instruction no
-0000b0d0: 7420 7573 6564 3a20 4e6f 6e65 0a20 2020  t used: None.   
-0000b0e0: 2020 2020 2020 2020 2064 6967 7261 7068           digraph
-0000b0f0: 207b 0a20 2020 2020 2020 2020 2020 206e   {.            n
-0000b100: 6f64 6520 5b73 6861 7065 3d72 6563 6f72  ode [shape=recor
-0000b110: 645d 0a20 2020 2020 2020 2020 2020 2031  d].            1
-0000b120: 3633 3834 205b 6c61 6265 6c3d 2231 3633  6384 [label="163
-0000b130: 3834 2034 3030 305c 6e53 5441 5254 225d  84 4000\nSTART"]
-0000b140: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
-0000b150: 3834 202d 3e20 7b31 3633 3837 7d0a 2020  84 -> {16387}.  
-0000b160: 2020 2020 2020 2020 2020 3136 3338 3720            16387 
-0000b170: 5b6c 6162 656c 3d22 3136 3338 3720 3430  [label="16387 40
-0000b180: 3033 5c6e 454e 4422 5d0a 2020 2020 2020  03\nEND"].      
-0000b190: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0000b1a0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-0000b1b0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
-0000b1c0: 6578 705f 6f75 7470 7574 2c20 272d 2d63  exp_output, '--c
-0000b1d0: 616c 6c2d 6772 6170 6827 2c20 6374 6c29  all-graph', ctl)
-0000b1e0: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
-0000b1f0: 7074 696f 6e5f 675f 7769 7468 5f6f 6e65  ption_g_with_one
-0000b200: 5f72 6f75 7469 6e65 5f63 6f6e 7469 6e75  _routine_continu
-0000b210: 696e 675f 696e 746f 5f61 6e6f 7468 6572  ing_into_another
-0000b220: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000b230: 7261 6d20 3d20 5b31 3735 2c20 362c 2030  ram = [175, 6, 0
-0000b240: 2c20 3230 315d 202b 205b 305d 202a 2034  , 201] + [0] * 4
-0000b250: 3931 3438 0a20 2020 2020 2020 2063 746c  9148.        ctl
-0000b260: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-0000b270: 2020 2040 2031 3633 3834 206c 6162 656c     @ 16384 label
-0000b280: 3d53 5441 5254 0a20 2020 2020 2020 2020  =START.         
-0000b290: 2020 2063 2031 3633 3834 0a20 2020 2020     c 16384.     
-0000b2a0: 2020 2020 2020 2040 2031 3633 3837 206c         @ 16387 l
-0000b2b0: 6162 656c 3d43 4f4e 5449 4e55 450a 2020  abel=CONTINUE.  
-0000b2c0: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
-0000b2d0: 370a 2020 2020 2020 2020 2020 2020 6920  7.            i 
-0000b2e0: 3136 3338 380a 2020 2020 2020 2020 2222  16388.        ""
-0000b2f0: 220a 2020 2020 2020 2020 6578 705f 6f75  ".        exp_ou
-0000b300: 7470 7574 203d 2072 2222 220a 2020 2020  tput = r""".    
-0000b310: 2020 2020 2020 2020 2f2f 2055 6e63 6f6e          // Uncon
-0000b320: 6e65 6374 6564 3a20 4e6f 6e65 0a20 2020  nected: None.   
-0000b330: 2020 2020 2020 2020 202f 2f20 4f72 7068           // Orph
-0000b340: 616e 733a 2031 3633 3834 0a20 2020 2020  ans: 16384.     
-0000b350: 2020 2020 2020 202f 2f20 4669 7273 7420         // First 
-0000b360: 696e 7374 7275 6374 696f 6e20 6e6f 7420  instruction not 
-0000b370: 7573 6564 3a20 4e6f 6e65 0a20 2020 2020  used: None.     
-0000b380: 2020 2020 2020 2064 6967 7261 7068 207b         digraph {
-0000b390: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
-0000b3a0: 6520 5b73 6861 7065 3d72 6563 6f72 645d  e [shape=record]
-0000b3b0: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
-0000b3c0: 3834 205b 6c61 6265 6c3d 2231 3633 3834  84 [label="16384
-0000b3d0: 2034 3030 305c 6e53 5441 5254 225d 0a20   4000\nSTART"]. 
-0000b3e0: 2020 2020 2020 2020 2020 2031 3633 3834             16384
-0000b3f0: 202d 3e20 7b31 3633 3837 7d0a 2020 2020   -> {16387}.    
-0000b400: 2020 2020 2020 2020 3136 3338 3720 5b6c          16387 [l
-0000b410: 6162 656c 3d22 3136 3338 3720 3430 3033  abel="16387 4003
-0000b420: 5c6e 434f 4e54 494e 5545 225d 0a20 2020  \nCONTINUE"].   
-0000b430: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0000b440: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0000b450: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-0000b460: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000b470: 2d67 272c 2063 746c 290a 0a20 2020 2064  -g', ctl)..    d
-0000b480: 6566 2074 6573 745f 6f70 7469 6f6e 5f67  ef test_option_g
-0000b490: 5f77 6974 685f 7261 775f 6d65 6d6f 7279  _with_raw_memory
-0000b4a0: 5f66 696c 655f 616e 645f 6e6f 5f63 746c  _file_and_no_ctl
-0000b4b0: 5f66 696c 6528 7365 6c66 293a 0a20 2020  _file(self):.   
-0000b4c0: 2020 2020 2072 616d 203d 205b 305d 0a20       ram = [0]. 
-0000b4d0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-0000b4e0: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
-0000b4f0: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
-0000b500: 7465 643a 2030 0a20 2020 2020 2020 2020  ted: 0.         
-0000b510: 2020 202f 2f20 4f72 7068 616e 733a 204e     // Orphans: N
-0000b520: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000b530: 2f2f 2046 6972 7374 2069 6e73 7472 7563  // First instruc
-0000b540: 7469 6f6e 206e 6f74 2075 7365 643a 204e  tion not used: N
-0000b550: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000b560: 6469 6772 6170 6820 7b0a 2020 2020 2020  digraph {.      
-0000b570: 2020 2020 2020 6e6f 6465 205b 7368 6170        node [shap
-0000b580: 653d 7265 636f 7264 5d0a 2020 2020 2020  e=record].      
-0000b590: 2020 2020 2020 3020 5b6c 6162 656c 3d22        0 [label="
-0000b5a0: 3020 3030 3030 5c6e 225d 0a20 2020 2020  0 0000\n"].     
-0000b5b0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0000b5c0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-0000b5d0: 662e 5f74 6573 745f 6269 6e28 7261 6d2c  f._test_bin(ram,
-0000b5e0: 2065 7870 5f6f 7574 7075 742c 2027 2d67   exp_output, '-g
-0000b5f0: 202d 6f20 3027 290a 0a20 2020 2064 6566   -o 0')..    def
-0000b600: 2074 6573 745f 6f70 7469 6f6e 5f67 5f77   test_option_g_w
-0000b610: 6974 685f 7261 775f 6d65 6d6f 7279 5f66  ith_raw_memory_f
-0000b620: 696c 655f 616e 645f 6374 6c5f 6669 6c65  ile_and_ctl_file
-0000b630: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000b640: 7261 6d20 3d20 5b31 3935 2c20 332c 2030  ram = [195, 3, 0
-0000b650: 2c20 3230 315d 0a20 2020 2020 2020 2063  , 201].        c
-0000b660: 746c 203d 2022 2222 0a20 2020 2020 2020  tl = """.       
-0000b670: 2020 2020 2040 2030 3030 3030 206c 6162       @ 00000 lab
-0000b680: 656c 3d53 5441 5254 0a20 2020 2020 2020  el=START.       
-0000b690: 2020 2020 2063 2030 3030 3030 0a20 2020       c 00000.   
-0000b6a0: 2020 2020 2020 2020 2040 2030 3030 3033           @ 00003
-0000b6b0: 206c 6162 656c 3d45 4e44 0a20 2020 2020   label=END.     
-0000b6c0: 2020 2020 2020 2063 2030 3030 3033 0a20         c 00003. 
-0000b6d0: 2020 2020 2020 2020 2020 2069 2030 3030             i 000
-0000b6e0: 3034 0a20 2020 2020 2020 2022 2222 0a20  04.        """. 
-0000b6f0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-0000b700: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
-0000b710: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
-0000b720: 7465 643a 204e 6f6e 650a 2020 2020 2020  ted: None.      
-0000b730: 2020 2020 2020 2f2f 204f 7270 6861 6e73        // Orphans
-0000b740: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
-0000b750: 2f2f 2046 6972 7374 2069 6e73 7472 7563  // First instruc
-0000b760: 7469 6f6e 206e 6f74 2075 7365 643a 204e  tion not used: N
-0000b770: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000b780: 6469 6772 6170 6820 7b0a 2020 2020 2020  digraph {.      
-0000b790: 2020 2020 2020 6e6f 6465 205b 7368 6170        node [shap
-0000b7a0: 653d 7265 636f 7264 5d0a 2020 2020 2020  e=record].      
-0000b7b0: 2020 2020 2020 3020 5b6c 6162 656c 3d22        0 [label="
-0000b7c0: 3020 3030 3030 5c6e 5354 4152 5422 5d0a  0 0000\nSTART"].
-0000b7d0: 2020 2020 2020 2020 2020 2020 3020 2d3e              0 ->
-0000b7e0: 207b 337d 0a20 2020 2020 2020 2020 2020   {3}.           
-0000b7f0: 2033 205b 6c61 6265 6c3d 2233 2030 3030   3 [label="3 000
-0000b800: 335c 6e45 4e44 225d 0a20 2020 2020 2020  3\nEND"].       
-0000b810: 2020 2020 207d 0a20 2020 2020 2020 2022       }.        "
-0000b820: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-0000b830: 5f74 6573 745f 6269 6e28 7261 6d2c 2065  _test_bin(ram, e
-0000b840: 7870 5f6f 7574 7075 742c 2027 2d67 202d  xp_output, '-g -
-0000b850: 6f20 3027 2c20 6374 6c29 0a0a 2020 2020  o 0', ctl)..    
-0000b860: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
-0000b870: 675f 7769 7468 5f63 746c 5f66 696c 655f  g_with_ctl_file_
-0000b880: 666f 725f 7261 775f 6d65 6d6f 7279 5f66  for_raw_memory_f
-0000b890: 696c 655f 7769 7468 5f6e 6f6e 7374 616e  ile_with_nonstan
-0000b8a0: 6461 7264 5f73 7566 6669 7828 7365 6c66  dard_suffix(self
-0000b8b0: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-0000b8c0: 205b 3139 352c 2032 3535 2c20 3235 352c   [195, 255, 255,
-0000b8d0: 2032 3031 5d0a 2020 2020 2020 2020 6374   201].        ct
-0000b8e0: 6c20 3d20 2222 220a 2020 2020 2020 2020  l = """.        
-0000b8f0: 2020 2020 4020 3635 3533 3220 6c61 6265      @ 65532 labe
-0000b900: 6c3d 5354 4152 540a 2020 2020 2020 2020  l=START.        
-0000b910: 2020 2020 6320 3635 3533 320a 2020 2020      c 65532.    
-0000b920: 2020 2020 2020 2020 4020 3635 3533 3520          @ 65535 
-0000b930: 6c61 6265 6c3d 454e 440a 2020 2020 2020  label=END.      
-0000b940: 2020 2020 2020 6320 3635 3533 350a 2020        c 65535.  
-0000b950: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000b960: 2020 6578 705f 6f75 7470 7574 203d 2072    exp_output = r
-0000b970: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
-0000b980: 2f2f 2055 6e63 6f6e 6e65 6374 6564 3a20  // Unconnected: 
-0000b990: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000b9a0: 202f 2f20 4f72 7068 616e 733a 2036 3535   // Orphans: 655
-0000b9b0: 3332 0a20 2020 2020 2020 2020 2020 202f  32.            /
-0000b9c0: 2f20 4669 7273 7420 696e 7374 7275 6374  / First instruct
-0000b9d0: 696f 6e20 6e6f 7420 7573 6564 3a20 4e6f  ion not used: No
-0000b9e0: 6e65 0a20 2020 2020 2020 2020 2020 2064  ne.            d
-0000b9f0: 6967 7261 7068 207b 0a20 2020 2020 2020  igraph {.       
-0000ba00: 2020 2020 206e 6f64 6520 5b73 6861 7065       node [shape
-0000ba10: 3d72 6563 6f72 645d 0a20 2020 2020 2020  =record].       
-0000ba20: 2020 2020 2036 3535 3332 205b 6c61 6265       65532 [labe
-0000ba30: 6c3d 2236 3535 3332 2046 4646 435c 6e53  l="65532 FFFC\nS
-0000ba40: 5441 5254 225d 0a20 2020 2020 2020 2020  TART"].         
-0000ba50: 2020 2036 3535 3332 202d 3e20 7b36 3535     65532 -> {655
-0000ba60: 3335 7d0a 2020 2020 2020 2020 2020 2020  35}.            
-0000ba70: 3635 3533 3520 5b6c 6162 656c 3d22 3635  65535 [label="65
-0000ba80: 3533 3520 4646 4646 5c6e 454e 4422 5d0a  535 FFFF\nEND"].
-0000ba90: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0000baa0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000bab0: 2020 7365 6c66 2e5f 7465 7374 5f62 696e    self._test_bin
-0000bac0: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
-0000bad0: 2c20 272d 6727 2c20 6374 6c2c 2073 7566  , '-g', ctl, suf
-0000bae0: 6669 783d 272e 7261 6d27 290a 0a20 2020  fix='.ram')..   
-0000baf0: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
-0000bb00: 5f67 5f77 6974 685f 7265 6673 5f64 6972  _g_with_refs_dir
-0000bb10: 6563 7469 7665 2873 656c 6629 3a0a 2020  ective(self):.  
-0000bb20: 2020 2020 2020 7261 6d20 3d20 5b32 342c        ram = [24,
-0000bb30: 2031 2c20 3233 332c 2032 3031 5d0a 2020   1, 233, 201].  
-0000bb40: 2020 2020 2020 6374 6c20 3d20 2222 220a        ctl = """.
-0000bb50: 2020 2020 2020 2020 2020 2020 4020 3635              @ 65
-0000bb60: 3533 3220 6c61 6265 6c3d 4649 5253 540a  532 label=FIRST.
-0000bb70: 2020 2020 2020 2020 2020 2020 6320 3635              c 65
-0000bb80: 3533 320a 2020 2020 2020 2020 2020 2020  532.            
-0000bb90: 4020 3635 3533 3420 6c61 6265 6c3d 5345  @ 65534 label=SE
-0000bba0: 434f 4e44 0a20 2020 2020 2020 2020 2020  COND.           
-0000bbb0: 2063 2036 3535 3334 0a20 2020 2020 2020   c 65534.       
-0000bbc0: 2020 2020 2040 2036 3535 3335 206c 6162       @ 65535 lab
-0000bbd0: 656c 3d54 4849 5244 0a20 2020 2020 2020  el=THIRD.       
-0000bbe0: 2020 2020 2040 2036 3535 3335 2072 6566       @ 65535 ref
-0000bbf0: 733d 3635 3533 343a 3635 3533 320a 2020  s=65534:65532.  
-0000bc00: 2020 2020 2020 2020 2020 6320 3635 3533            c 6553
-0000bc10: 350a 2020 2020 2020 2020 2222 220a 2020  5.        """.  
-0000bc20: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-0000bc30: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
-0000bc40: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
-0000bc50: 6564 3a20 3635 3533 320a 2020 2020 2020  ed: 65532.      
-0000bc60: 2020 2020 2020 2f2f 204f 7270 6861 6e73        // Orphans
-0000bc70: 3a20 3635 3533 340a 2020 2020 2020 2020  : 65534.        
-0000bc80: 2020 2020 2f2f 2046 6972 7374 2069 6e73      // First ins
-0000bc90: 7472 7563 7469 6f6e 206e 6f74 2075 7365  truction not use
-0000bca0: 643a 204e 6f6e 650a 2020 2020 2020 2020  d: None.        
-0000bcb0: 2020 2020 6469 6772 6170 6820 7b0a 2020      digraph {.  
-0000bcc0: 2020 2020 2020 2020 2020 6e6f 6465 205b            node [
-0000bcd0: 7368 6170 653d 7265 636f 7264 5d0a 2020  shape=record].  
-0000bce0: 2020 2020 2020 2020 2020 3635 3533 3220            65532 
-0000bcf0: 5b6c 6162 656c 3d22 3635 3533 3220 4646  [label="65532 FF
-0000bd00: 4643 5c6e 4649 5253 5422 5d0a 2020 2020  FC\nFIRST"].    
-0000bd10: 2020 2020 2020 2020 3635 3533 3420 5b6c          65534 [l
-0000bd20: 6162 656c 3d22 3635 3533 3420 4646 4645  abel="65534 FFFE
-0000bd30: 5c6e 5345 434f 4e44 225d 0a20 2020 2020  \nSECOND"].     
-0000bd40: 2020 2020 2020 2036 3535 3334 202d 3e20         65534 -> 
-0000bd50: 7b36 3535 3335 7d0a 2020 2020 2020 2020  {65535}.        
-0000bd60: 2020 2020 3635 3533 3520 5b6c 6162 656c      65535 [label
-0000bd70: 3d22 3635 3533 3520 4646 4646 5c6e 5448  ="65535 FFFF\nTH
-0000bd80: 4952 4422 5d0a 2020 2020 2020 2020 2020  IRD"].          
-0000bd90: 2020 7d0a 2020 2020 2020 2020 2222 220a    }.        """.
-0000bda0: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
-0000bdb0: 7374 5f62 696e 2872 616d 2c20 6578 705f  st_bin(ram, exp_
-0000bdc0: 6f75 7470 7574 2c20 272d 6727 2c20 6374  output, '-g', ct
-0000bdd0: 6c29 0a0a 2020 2020 6465 6620 7465 7374  l)..    def test
-0000bde0: 5f6f 7074 696f 6e5f 675f 7769 7468 5f6e  _option_g_with_n
-0000bdf0: 6f5f 6f72 7068 616e 735f 6f72 5f75 6e63  o_orphans_or_unc
-0000be00: 6f6e 6e65 6374 6564 5f6e 6f64 6573 2873  onnected_nodes(s
-0000be10: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
-0000be20: 6d20 3d20 5b32 342c 2030 2c20 3234 2c20  m = [24, 0, 24, 
-0000be30: 3235 325d 0a20 2020 2020 2020 2063 746c  252].        ctl
-0000be40: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-0000be50: 2020 2040 2036 3535 3332 206c 6162 656c     @ 65532 label
-0000be60: 3d46 4f52 5448 0a20 2020 2020 2020 2020  =FORTH.         
-0000be70: 2020 2063 2036 3535 3332 0a20 2020 2020     c 65532.     
-0000be80: 2020 2020 2020 2040 2036 3535 3334 206c         @ 65534 l
-0000be90: 6162 656c 3d42 4143 4b0a 2020 2020 2020  abel=BACK.      
-0000bea0: 2020 2020 2020 6320 3635 3533 340a 2020        c 65534.  
-0000beb0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000bec0: 2020 6578 705f 6f75 7470 7574 203d 2072    exp_output = r
-0000bed0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
-0000bee0: 2f2f 2055 6e63 6f6e 6e65 6374 6564 3a20  // Unconnected: 
-0000bef0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000bf00: 202f 2f20 4f72 7068 616e 733a 204e 6f6e   // Orphans: Non
-0000bf10: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
-0000bf20: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
-0000bf30: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
-0000bf40: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
-0000bf50: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
-0000bf60: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
-0000bf70: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
-0000bf80: 2020 2020 3635 3533 3220 5b6c 6162 656c      65532 [label
-0000bf90: 3d22 3635 3533 3220 4646 4643 5c6e 464f  ="65532 FFFC\nFO
-0000bfa0: 5254 4822 5d0a 2020 2020 2020 2020 2020  RTH"].          
-0000bfb0: 2020 3635 3533 3220 2d3e 207b 3635 3533    65532 -> {6553
-0000bfc0: 347d 0a20 2020 2020 2020 2020 2020 2036  4}.            6
-0000bfd0: 3535 3334 205b 6c61 6265 6c3d 2236 3535  5534 [label="655
-0000bfe0: 3334 2046 4646 455c 6e42 4143 4b22 5d0a  34 FFFE\nBACK"].
-0000bff0: 2020 2020 2020 2020 2020 2020 3635 3533              6553
-0000c000: 3420 2d3e 207b 3635 3533 327d 0a20 2020  4 -> {65532}.   
-0000c010: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0000c020: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0000c030: 656c 662e 5f74 6573 745f 6269 6e28 7261  elf._test_bin(ra
-0000c040: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000c050: 2d67 272c 2063 746c 290a 0a20 2020 2064  -g', ctl)..    d
-0000c060: 6566 2074 6573 745f 6f70 7469 6f6e 5f67  ef test_option_g
-0000c070: 5f77 6974 685f 6f6e 655f 6f72 7068 616e  _with_one_orphan
-0000c080: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000c090: 7261 6d20 3d20 5b32 342c 2030 2c20 3230  ram = [24, 0, 20
-0000c0a0: 315d 0a20 2020 2020 2020 2063 746c 203d  1].        ctl =
-0000c0b0: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
-0000c0c0: 2040 2036 3535 3333 206c 6162 656c 3d53   @ 65533 label=S
-0000c0d0: 5441 5254 0a20 2020 2020 2020 2020 2020  TART.           
-0000c0e0: 2063 2036 3535 3333 0a20 2020 2020 2020   c 65533.       
-0000c0f0: 2020 2020 2040 2036 3535 3335 206c 6162       @ 65535 lab
-0000c100: 656c 3d45 4e44 0a20 2020 2020 2020 2020  el=END.         
-0000c110: 2020 2063 2036 3535 3335 0a20 2020 2020     c 65535.     
-0000c120: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
-0000c130: 7870 5f6f 7574 7075 7420 3d20 7222 2222  xp_output = r"""
-0000c140: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
-0000c150: 556e 636f 6e6e 6563 7465 643a 204e 6f6e  Unconnected: Non
-0000c160: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
-0000c170: 204f 7270 6861 6e73 3a20 3635 3533 330a   Orphans: 65533.
-0000c180: 2020 2020 2020 2020 2020 2020 2f2f 2046              // F
-0000c190: 6972 7374 2069 6e73 7472 7563 7469 6f6e  irst instruction
-0000c1a0: 206e 6f74 2075 7365 643a 204e 6f6e 650a   not used: None.
-0000c1b0: 2020 2020 2020 2020 2020 2020 6469 6772              digr
-0000c1c0: 6170 6820 7b0a 2020 2020 2020 2020 2020  aph {.          
-0000c1d0: 2020 6e6f 6465 205b 7368 6170 653d 7265    node [shape=re
-0000c1e0: 636f 7264 5d0a 2020 2020 2020 2020 2020  cord].          
-0000c1f0: 2020 3635 3533 3320 5b6c 6162 656c 3d22    65533 [label="
-0000c200: 3635 3533 3320 4646 4644 5c6e 5354 4152  65533 FFFD\nSTAR
-0000c210: 5422 5d0a 2020 2020 2020 2020 2020 2020  T"].            
-0000c220: 3635 3533 3320 2d3e 207b 3635 3533 357d  65533 -> {65535}
-0000c230: 0a20 2020 2020 2020 2020 2020 2036 3535  .            655
-0000c240: 3335 205b 6c61 6265 6c3d 2236 3535 3335  35 [label="65535
-0000c250: 2046 4646 465c 6e45 4e44 225d 0a20 2020   FFFF\nEND"].   
-0000c260: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0000c270: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0000c280: 656c 662e 5f74 6573 745f 6269 6e28 7261  elf._test_bin(ra
-0000c290: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-0000c2a0: 2d67 272c 2063 746c 290a 0a20 2020 2064  -g', ctl)..    d
-0000c2b0: 6566 2074 6573 745f 6f70 7469 6f6e 5f67  ef test_option_g
-0000c2c0: 5f77 6974 685f 7477 6f5f 6f72 7068 616e  _with_two_orphan
-0000c2d0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-0000c2e0: 2072 616d 203d 205b 3234 2c20 322c 2032   ram = [24, 2, 2
-0000c2f0: 342c 2030 2c20 3230 315d 0a20 2020 2020  4, 0, 201].     
-0000c300: 2020 2063 746c 203d 2022 2222 0a20 2020     ctl = """.   
-0000c310: 2020 2020 2020 2020 2040 2036 3535 3331           @ 65531
-0000c320: 206c 6162 656c 3d4f 4e45 0a20 2020 2020   label=ONE.     
-0000c330: 2020 2020 2020 2063 2036 3535 3331 0a20         c 65531. 
-0000c340: 2020 2020 2020 2020 2020 2040 2036 3535             @ 655
-0000c350: 3333 206c 6162 656c 3d54 574f 0a20 2020  33 label=TWO.   
-0000c360: 2020 2020 2020 2020 2063 2036 3535 3333           c 65533
-0000c370: 0a20 2020 2020 2020 2020 2020 2040 2036  .            @ 6
-0000c380: 3535 3335 206c 6162 656c 3d54 4852 4545  5535 label=THREE
-0000c390: 0a20 2020 2020 2020 2020 2020 2063 2036  .            c 6
-0000c3a0: 3535 3335 0a20 2020 2020 2020 2022 2222  5535.        """
-0000c3b0: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
-0000c3c0: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
-0000c3d0: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
-0000c3e0: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
-0000c3f0: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
-0000c400: 6e73 3a20 3635 3533 312c 2036 3535 3333  ns: 65531, 65533
-0000c410: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
-0000c420: 4669 7273 7420 696e 7374 7275 6374 696f  First instructio
-0000c430: 6e20 6e6f 7420 7573 6564 3a20 4e6f 6e65  n not used: None
-0000c440: 0a20 2020 2020 2020 2020 2020 2064 6967  .            dig
-0000c450: 7261 7068 207b 0a20 2020 2020 2020 2020  raph {.         
-0000c460: 2020 206e 6f64 6520 5b73 6861 7065 3d72     node [shape=r
-0000c470: 6563 6f72 645d 0a20 2020 2020 2020 2020  ecord].         
-0000c480: 2020 2036 3535 3331 205b 6c61 6265 6c3d     65531 [label=
-0000c490: 2236 3535 3331 2046 4646 425c 6e4f 4e45  "65531 FFFB\nONE
-0000c4a0: 225d 0a20 2020 2020 2020 2020 2020 2036  "].            6
-0000c4b0: 3535 3331 202d 3e20 7b36 3535 3335 7d0a  5531 -> {65535}.
-0000c4c0: 2020 2020 2020 2020 2020 2020 3635 3533              6553
-0000c4d0: 3320 5b6c 6162 656c 3d22 3635 3533 3320  3 [label="65533 
-0000c4e0: 4646 4644 5c6e 5457 4f22 5d0a 2020 2020  FFFD\nTWO"].    
-0000c4f0: 2020 2020 2020 2020 3635 3533 3320 2d3e          65533 ->
-0000c500: 207b 3635 3533 357d 0a20 2020 2020 2020   {65535}.       
-0000c510: 2020 2020 2036 3535 3335 205b 6c61 6265       65535 [labe
-0000c520: 6c3d 2236 3535 3335 2046 4646 465c 6e54  l="65535 FFFF\nT
-0000c530: 4852 4545 225d 0a20 2020 2020 2020 2020  HREE"].         
-0000c540: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
-0000c550: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-0000c560: 6573 745f 6269 6e28 7261 6d2c 2065 7870  est_bin(ram, exp
-0000c570: 5f6f 7574 7075 742c 2027 2d67 272c 2063  _output, '-g', c
-0000c580: 746c 290a 0a20 2020 2064 6566 2074 6573  tl)..    def tes
-0000c590: 745f 6f70 7469 6f6e 5f67 5f77 6974 685f  t_option_g_with_
-0000c5a0: 6f6e 655f 6d61 696e 5f65 6e74 7279 5f70  one_main_entry_p
-0000c5b0: 6f69 6e74 5f6f 7270 6861 6e28 7365 6c66  oint_orphan(self
-0000c5c0: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-0000c5d0: 205b 3137 352c 2032 3031 2c20 3234 2c20   [175, 201, 24, 
-0000c5e0: 3235 335d 0a20 2020 2020 2020 2063 746c  253].        ctl
-0000c5f0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-0000c600: 2020 2040 2036 3535 3332 206c 6162 656c     @ 65532 label
-0000c610: 3d46 4952 5354 0a20 2020 2020 2020 2020  =FIRST.         
-0000c620: 2020 2063 2036 3535 3332 0a20 2020 2020     c 65532.     
-0000c630: 2020 2020 2020 2040 2036 3535 3334 206c         @ 65534 l
-0000c640: 6162 656c 3d53 4543 4f4e 440a 2020 2020  abel=SECOND.    
-0000c650: 2020 2020 2020 2020 6320 3635 3533 340a          c 65534.
-0000c660: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000c670: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
-0000c680: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
-0000c690: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
-0000c6a0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
-0000c6b0: 2020 202f 2f20 4f72 7068 616e 733a 2036     // Orphans: 6
-0000c6c0: 3535 3334 0a20 2020 2020 2020 2020 2020  5534.           
-0000c6d0: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
-0000c6e0: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
-0000c6f0: 3635 3533 320a 2020 2020 2020 2020 2020  65532.          
-0000c700: 2020 6469 6772 6170 6820 7b0a 2020 2020    digraph {.    
-0000c710: 2020 2020 2020 2020 6e6f 6465 205b 7368          node [sh
-0000c720: 6170 653d 7265 636f 7264 5d0a 2020 2020  ape=record].    
-0000c730: 2020 2020 2020 2020 3635 3533 3220 5b6c          65532 [l
-0000c740: 6162 656c 3d22 3635 3533 3220 4646 4643  abel="65532 FFFC
-0000c750: 5c6e 4649 5253 5422 5d0a 2020 2020 2020  \nFIRST"].      
-0000c760: 2020 2020 2020 3635 3533 3420 5b6c 6162        65534 [lab
-0000c770: 656c 3d22 3635 3533 3420 4646 4645 5c6e  el="65534 FFFE\n
-0000c780: 5345 434f 4e44 225d 0a20 2020 2020 2020  SECOND"].       
-0000c790: 2020 2020 2036 3535 3334 202d 3e20 7b36       65534 -> {6
-0000c7a0: 3535 3332 7d0a 2020 2020 2020 2020 2020  5532}.          
-0000c7b0: 2020 7d0a 2020 2020 2020 2020 2222 220a    }.        """.
-0000c7c0: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
-0000c7d0: 7374 5f62 696e 2872 616d 2c20 6578 705f  st_bin(ram, exp_
-0000c7e0: 6f75 7470 7574 2c20 272d 6727 2c20 6374  output, '-g', ct
-0000c7f0: 6c29 0a0a 2020 2020 6465 6620 7465 7374  l)..    def test
-0000c800: 5f6f 7074 696f 6e5f 675f 7769 7468 5f74  _option_g_with_t
-0000c810: 776f 5f6d 6169 6e5f 656e 7472 795f 706f  wo_main_entry_po
-0000c820: 696e 745f 6f72 7068 616e 7328 7365 6c66  int_orphans(self
-0000c830: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-0000c840: 205b 3234 2c20 312c 2031 3735 2c20 3230   [24, 1, 175, 20
-0000c850: 312c 2032 342c 2031 2c20 3137 352c 2032  1, 24, 1, 175, 2
-0000c860: 3031 5d0a 2020 2020 2020 2020 6374 6c20  01].        ctl 
-0000c870: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
-0000c880: 2020 4020 3635 3532 3820 6c61 6265 6c3d    @ 65528 label=
-0000c890: 4649 5253 540a 2020 2020 2020 2020 2020  FIRST.          
-0000c8a0: 2020 6320 3635 3532 380a 2020 2020 2020    c 65528.      
-0000c8b0: 2020 2020 2020 4020 3635 3533 3020 6c61        @ 65530 la
-0000c8c0: 6265 6c3d 4d45 504f 310a 2020 2020 2020  bel=MEPO1.      
-0000c8d0: 2020 2020 2020 6320 3635 3533 300a 2020        c 65530.  
-0000c8e0: 2020 2020 2020 2020 2020 4020 3635 3533            @ 6553
-0000c8f0: 3220 6c61 6265 6c3d 5345 434f 4e44 0a20  2 label=SECOND. 
-0000c900: 2020 2020 2020 2020 2020 2063 2036 3535             c 655
-0000c910: 3332 0a20 2020 2020 2020 2020 2020 2040  32.            @
-0000c920: 2036 3535 3334 206c 6162 656c 3d4d 4550   65534 label=MEP
-0000c930: 4f32 0a20 2020 2020 2020 2020 2020 2063  O2.            c
-0000c940: 2036 3535 3334 0a20 2020 2020 2020 2022   65534.        "
-0000c950: 2222 0a20 2020 2020 2020 2065 7870 5f6f  "".        exp_o
-0000c960: 7574 7075 7420 3d20 7222 2222 0a20 2020  utput = r""".   
-0000c970: 2020 2020 2020 2020 202f 2f20 556e 636f           // Unco
-0000c980: 6e6e 6563 7465 643a 204e 6f6e 650a 2020  nnected: None.  
-0000c990: 2020 2020 2020 2020 2020 2f2f 204f 7270            // Orp
-0000c9a0: 6861 6e73 3a20 3635 3532 382c 2036 3535  hans: 65528, 655
-0000c9b0: 3332 0a20 2020 2020 2020 2020 2020 202f  32.            /
-0000c9c0: 2f20 4669 7273 7420 696e 7374 7275 6374  / First instruct
-0000c9d0: 696f 6e20 6e6f 7420 7573 6564 3a20 3635  ion not used: 65
-0000c9e0: 3533 302c 2036 3535 3334 0a20 2020 2020  530, 65534.     
-0000c9f0: 2020 2020 2020 2064 6967 7261 7068 207b         digraph {
-0000ca00: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
-0000ca10: 6520 5b73 6861 7065 3d72 6563 6f72 645d  e [shape=record]
-0000ca20: 0a20 2020 2020 2020 2020 2020 2036 3535  .            655
-0000ca30: 3238 205b 6c61 6265 6c3d 2236 3535 3238  28 [label="65528
-0000ca40: 2046 4646 385c 6e46 4952 5354 225d 0a20   FFF8\nFIRST"]. 
-0000ca50: 2020 2020 2020 2020 2020 2036 3535 3238             65528
-0000ca60: 202d 3e20 7b36 3535 3330 7d0a 2020 2020   -> {65530}.    
-0000ca70: 2020 2020 2020 2020 3635 3533 3020 5b6c          65530 [l
-0000ca80: 6162 656c 3d22 3635 3533 3020 4646 4641  abel="65530 FFFA
-0000ca90: 5c6e 4d45 504f 3122 5d0a 2020 2020 2020  \nMEPO1"].      
-0000caa0: 2020 2020 2020 3635 3533 3220 5b6c 6162        65532 [lab
-0000cab0: 656c 3d22 3635 3533 3220 4646 4643 5c6e  el="65532 FFFC\n
-0000cac0: 5345 434f 4e44 225d 0a20 2020 2020 2020  SECOND"].       
-0000cad0: 2020 2020 2036 3535 3332 202d 3e20 7b36       65532 -> {6
-0000cae0: 3535 3334 7d0a 2020 2020 2020 2020 2020  5534}.          
-0000caf0: 2020 3635 3533 3420 5b6c 6162 656c 3d22    65534 [label="
-0000cb00: 3635 3533 3420 4646 4645 5c6e 4d45 504f  65534 FFFE\nMEPO
-0000cb10: 3222 5d0a 2020 2020 2020 2020 2020 2020  2"].            
-0000cb20: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
-0000cb30: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
-0000cb40: 5f62 696e 2872 616d 2c20 6578 705f 6f75  _bin(ram, exp_ou
-0000cb50: 7470 7574 2c20 272d 6727 2c20 6374 6c29  tput, '-g', ctl)
-0000cb60: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
-0000cb70: 7074 696f 6e5f 675f 7769 7468 5f6f 6e65  ption_g_with_one
-0000cb80: 5f75 6e63 6f6e 6e65 6374 6564 5f6e 6f64  _unconnected_nod
-0000cb90: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0000cba0: 2072 616d 203d 205b 3230 315d 0a20 2020   ram = [201].   
-0000cbb0: 2020 2020 2063 746c 203d 2022 2222 0a20       ctl = """. 
-0000cbc0: 2020 2020 2020 2020 2020 2040 2036 3535             @ 655
-0000cbd0: 3335 206c 6162 656c 3d53 5441 5254 0a20  35 label=START. 
-0000cbe0: 2020 2020 2020 2020 2020 2063 2036 3535             c 655
-0000cbf0: 3335 0a20 2020 2020 2020 2022 2222 0a20  35.        """. 
-0000cc00: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-0000cc10: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
-0000cc20: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
-0000cc30: 7465 643a 2036 3535 3335 0a20 2020 2020  ted: 65535.     
-0000cc40: 2020 2020 2020 202f 2f20 4f72 7068 616e         // Orphan
-0000cc50: 733a 204e 6f6e 650a 2020 2020 2020 2020  s: None.        
-0000cc60: 2020 2020 2f2f 2046 6972 7374 2069 6e73      // First ins
-0000cc70: 7472 7563 7469 6f6e 206e 6f74 2075 7365  truction not use
-0000cc80: 643a 204e 6f6e 650a 2020 2020 2020 2020  d: None.        
-0000cc90: 2020 2020 6469 6772 6170 6820 7b0a 2020      digraph {.  
-0000cca0: 2020 2020 2020 2020 2020 6e6f 6465 205b            node [
-0000ccb0: 7368 6170 653d 7265 636f 7264 5d0a 2020  shape=record].  
-0000ccc0: 2020 2020 2020 2020 2020 3635 3533 3520            65535 
-0000ccd0: 5b6c 6162 656c 3d22 3635 3533 3520 4646  [label="65535 FF
-0000cce0: 4646 5c6e 5354 4152 5422 5d0a 2020 2020  FF\nSTART"].    
-0000ccf0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000cd00: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-0000cd10: 6c66 2e5f 7465 7374 5f62 696e 2872 616d  lf._test_bin(ram
-0000cd20: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
-0000cd30: 6727 2c20 6374 6c29 0a0a 2020 2020 6465  g', ctl)..    de
-0000cd40: 6620 7465 7374 5f6f 7074 696f 6e5f 675f  f test_option_g_
-0000cd50: 7769 7468 5f74 776f 5f75 6e63 6f6e 6e65  with_two_unconne
-0000cd60: 6374 6564 5f6e 6f64 6573 2873 656c 6629  cted_nodes(self)
-0000cd70: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
-0000cd80: 5b32 3031 2c20 3230 315d 0a20 2020 2020  [201, 201].     
-0000cd90: 2020 2063 746c 203d 2022 2222 0a20 2020     ctl = """.   
-0000cda0: 2020 2020 2020 2020 2040 2036 3535 3334           @ 65534
-0000cdb0: 206c 6162 656c 3d46 4952 5354 0a20 2020   label=FIRST.   
-0000cdc0: 2020 2020 2020 2020 2063 2036 3535 3334           c 65534
-0000cdd0: 0a20 2020 2020 2020 2020 2020 2040 2036  .            @ 6
-0000cde0: 3535 3335 206c 6162 656c 3d53 4543 4f4e  5535 label=SECON
-0000cdf0: 440a 2020 2020 2020 2020 2020 2020 6320  D.            c 
-0000ce00: 3635 3533 350a 2020 2020 2020 2020 2222  65535.        ""
-0000ce10: 220a 2020 2020 2020 2020 6578 705f 6f75  ".        exp_ou
-0000ce20: 7470 7574 203d 2072 2222 220a 2020 2020  tput = r""".    
-0000ce30: 2020 2020 2020 2020 2f2f 2055 6e63 6f6e          // Uncon
-0000ce40: 6e65 6374 6564 3a20 3635 3533 342c 2036  nected: 65534, 6
-0000ce50: 3535 3335 0a20 2020 2020 2020 2020 2020  5535.           
-0000ce60: 202f 2f20 4f72 7068 616e 733a 204e 6f6e   // Orphans: Non
-0000ce70: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
-0000ce80: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
-0000ce90: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
-0000cea0: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
-0000ceb0: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
-0000cec0: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
-0000ced0: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
-0000cee0: 2020 2020 3635 3533 3420 5b6c 6162 656c      65534 [label
-0000cef0: 3d22 3635 3533 3420 4646 4645 5c6e 4649  ="65534 FFFE\nFI
-0000cf00: 5253 5422 5d0a 2020 2020 2020 2020 2020  RST"].          
-0000cf10: 2020 3635 3533 3520 5b6c 6162 656c 3d22    65535 [label="
-0000cf20: 3635 3533 3520 4646 4646 5c6e 5345 434f  65535 FFFF\nSECO
-0000cf30: 4e44 225d 0a20 2020 2020 2020 2020 2020  ND"].           
-0000cf40: 207d 0a20 2020 2020 2020 2022 2222 0a20   }.        """. 
-0000cf50: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
-0000cf60: 745f 6269 6e28 7261 6d2c 2065 7870 5f6f  t_bin(ram, exp_o
-0000cf70: 7574 7075 742c 2027 2d67 272c 2063 746c  utput, '-g', ctl
-0000cf80: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-0000cf90: 6f70 7469 6f6e 5f67 5f77 6974 685f 726f  option_g_with_ro
-0000cfa0: 7574 696e 655f 7468 6174 5f72 6566 6572  utine_that_refer
-0000cfb0: 735f 746f 5f69 7473 656c 6628 7365 6c66  s_to_itself(self
-0000cfc0: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-0000cfd0: 205b 0a20 2020 2020 2020 2020 2020 2031   [.            1
-0000cfe0: 3735 2c20 2020 2023 2036 3535 3333 2058  75,    # 65533 X
-0000cff0: 4f52 2041 0a20 2020 2020 2020 2020 2020  OR A.           
-0000d000: 2032 342c 2032 3533 2023 2036 3535 3334   24, 253 # 65534
-0000d010: 204a 5220 3635 3533 330a 2020 2020 2020   JR 65533.      
-0000d020: 2020 5d0a 2020 2020 2020 2020 6374 6c20    ].        ctl 
-0000d030: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
-0000d040: 2020 4020 3635 3533 3320 6c61 6265 6c3d    @ 65533 label=
-0000d050: 4f4e 4c59 0a20 2020 2020 2020 2020 2020  ONLY.           
-0000d060: 2063 2036 3535 3333 2053 686f 756c 6420   c 65533 Should 
-0000d070: 6e6f 7420 6265 206a 6f69 6e65 6420 746f  not be joined to
-0000d080: 2069 7473 656c 660a 2020 2020 2020 2020   itself.        
-0000d090: 2222 220a 2020 2020 2020 2020 6578 705f  """.        exp_
-0000d0a0: 6f75 7470 7574 203d 2072 2222 220a 2020  output = r""".  
-0000d0b0: 2020 2020 2020 2020 2020 2f2f 2055 6e63            // Unc
-0000d0c0: 6f6e 6e65 6374 6564 3a20 3635 3533 330a  onnected: 65533.
-0000d0d0: 2020 2020 2020 2020 2020 2020 2f2f 204f              // O
-0000d0e0: 7270 6861 6e73 3a20 4e6f 6e65 0a20 2020  rphans: None.   
-0000d0f0: 2020 2020 2020 2020 202f 2f20 4669 7273           // Firs
-0000d100: 7420 696e 7374 7275 6374 696f 6e20 6e6f  t instruction no
-0000d110: 7420 7573 6564 3a20 4e6f 6e65 0a20 2020  t used: None.   
-0000d120: 2020 2020 2020 2020 2064 6967 7261 7068           digraph
-0000d130: 207b 0a20 2020 2020 2020 2020 2020 206e   {.            n
-0000d140: 6f64 6520 5b73 6861 7065 3d72 6563 6f72  ode [shape=recor
-0000d150: 645d 0a20 2020 2020 2020 2020 2020 2036  d].            6
-0000d160: 3535 3333 205b 6c61 6265 6c3d 2236 3535  5533 [label="655
-0000d170: 3333 2046 4646 445c 6e4f 4e4c 5922 5d0a  33 FFFD\nONLY"].
-0000d180: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0000d190: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000d1a0: 2020 7365 6c66 2e5f 7465 7374 5f62 696e    self._test_bin
-0000d1b0: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
-0000d1c0: 2c20 272d 6727 2c20 6374 6c29 0a0a 2020  , '-g', ctl)..  
-0000d1d0: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
-0000d1e0: 6e5f 675f 7769 7468 5f72 6f75 7469 6e65  n_g_with_routine
-0000d1f0: 5f65 6e74 6572 6564 5f61 745f 696e 7374  _entered_at_inst
-0000d200: 7275 6374 696f 6e5f 6f74 6865 725f 7468  ruction_other_th
-0000d210: 616e 5f66 6972 7374 2873 656c 6629 3a0a  an_first(self):.
-0000d220: 2020 2020 2020 2020 7261 6d20 3d20 5b0a          ram = [.
-0000d230: 2020 2020 2020 2020 2020 2020 3137 352c              175,
-0000d240: 2020 2020 2023 2036 3535 3331 2058 4f52       # 65531 XOR
-0000d250: 2041 0a20 2020 2020 2020 2020 2020 2032   A.            2
-0000d260: 342c 2032 3533 2c20 2320 3635 3533 3220  4, 253, # 65532 
-0000d270: 4a52 2036 3535 3331 0a20 2020 2020 2020  JR 65531.       
-0000d280: 2020 2020 2032 342c 2032 3532 2020 2320       24, 252  # 
-0000d290: 3635 3533 3420 4a52 2036 3535 3332 0a20  65534 JR 65532. 
-0000d2a0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-0000d2b0: 2063 746c 203d 2022 2222 0a20 2020 2020   ctl = """.     
-0000d2c0: 2020 2020 2020 2040 2036 3535 3331 206c         @ 65531 l
-0000d2d0: 6162 656c 3d46 4952 5354 0a20 2020 2020  abel=FIRST.     
-0000d2e0: 2020 2020 2020 2063 2036 3535 3331 204e         c 65531 N
-0000d2f0: 6f74 2061 206d 6169 6e20 656e 7472 7920  ot a main entry 
-0000d300: 706f 696e 7420 6f72 7068 616e 2062 6563  point orphan bec
-0000d310: 6175 7365 2069 7420 6a75 6d70 7320 746f  ause it jumps to
-0000d320: 2069 7473 206f 776e 2066 6972 7374 2069   its own first i
-0000d330: 6e73 7472 7563 7469 6f6e 0a20 2020 2020  nstruction.     
-0000d340: 2020 2020 2020 2040 2036 3535 3334 206c         @ 65534 l
-0000d350: 6162 656c 3d53 4543 4f4e 440a 2020 2020  abel=SECOND.    
-0000d360: 2020 2020 2020 2020 6320 3635 3533 340a          c 65534.
-0000d370: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000d380: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
-0000d390: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
-0000d3a0: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
-0000d3b0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
-0000d3c0: 2020 202f 2f20 4f72 7068 616e 733a 2036     // Orphans: 6
-0000d3d0: 3535 3334 0a20 2020 2020 2020 2020 2020  5534.           
-0000d3e0: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
-0000d3f0: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
-0000d400: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000d410: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
-0000d420: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
-0000d430: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
-0000d440: 2020 2020 2020 2036 3535 3331 205b 6c61         65531 [la
-0000d450: 6265 6c3d 2236 3535 3331 2046 4646 425c  bel="65531 FFFB\
-0000d460: 6e46 4952 5354 225d 0a20 2020 2020 2020  nFIRST"].       
-0000d470: 2020 2020 2036 3535 3334 205b 6c61 6265       65534 [labe
-0000d480: 6c3d 2236 3535 3334 2046 4646 455c 6e53  l="65534 FFFE\nS
-0000d490: 4543 4f4e 4422 5d0a 2020 2020 2020 2020  ECOND"].        
-0000d4a0: 2020 2020 3635 3533 3420 2d3e 207b 3635      65534 -> {65
-0000d4b0: 3533 317d 0a20 2020 2020 2020 2020 2020  531}.           
-0000d4c0: 207d 0a20 2020 2020 2020 2022 2222 0a20   }.        """. 
-0000d4d0: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
-0000d4e0: 745f 6269 6e28 7261 6d2c 2065 7870 5f6f  t_bin(ram, exp_o
-0000d4f0: 7574 7075 742c 2027 2d67 272c 2063 746c  utput, '-g', ctl
-0000d500: 290a 0a20 2020 2040 7061 7463 682e 6f62  )..    @patch.ob
-0000d510: 6a65 6374 2873 6e61 7069 6e66 6f2c 2027  ject(snapinfo, '
-0000d520: 7275 6e27 2c20 6d6f 636b 5f72 756e 290a  run', mock_run).
-0000d530: 2020 2020 4070 6174 6368 2e6f 626a 6563      @patch.objec
-0000d540: 7428 736e 6170 696e 666f 2c20 2767 6574  t(snapinfo, 'get
-0000d550: 5f63 6f6e 6669 6727 2c20 6d6f 636b 5f63  _config', mock_c
-0000d560: 6f6e 6669 6729 0a20 2020 2064 6566 2074  onfig).    def t
-0000d570: 6573 745f 6f70 7469 6f6e 5f49 2873 656c  est_option_I(sel
-0000d580: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
-0000d590: 2e72 756e 5f73 6e61 7069 6e66 6f28 272d  .run_snapinfo('-
-0000d5a0: 4920 4e6f 6465 4c61 6265 6c3d 227b 6164  I NodeLabel="{ad
-0000d5b0: 6472 6573 737d 2220 7465 7374 2d49 2e73  dress}" test-I.s
-0000d5c0: 6e61 2729 0a20 2020 2020 2020 206f 7074  na').        opt
-0000d5d0: 696f 6e73 2c20 636f 6e66 6967 203d 2072  ions, config = r
-0000d5e0: 756e 5f61 7267 735b 313a 5d0a 2020 2020  un_args[1:].    
-0000d5f0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000d600: 7175 616c 285b 274e 6f64 654c 6162 656c  qual(['NodeLabel
-0000d610: 3d22 7b61 6464 7265 7373 7d22 275d 2c20  ="{address}"'], 
-0000d620: 6f70 7469 6f6e 732e 7061 7261 6d73 290a  options.params).
-0000d630: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000d640: 6572 7445 7175 616c 2863 6f6e 6669 675b  ertEqual(config[
-0000d650: 274e 6f64 654c 6162 656c 275d 2c20 2722  'NodeLabel'], '"
-0000d660: 7b61 6464 7265 7373 7d22 2729 0a0a 2020  {address}"')..  
-0000d670: 2020 4070 6174 6368 2e6f 626a 6563 7428    @patch.object(
-0000d680: 736e 6170 696e 666f 2c20 2772 756e 272c  snapinfo, 'run',
-0000d690: 206d 6f63 6b5f 7275 6e29 0a20 2020 2064   mock_run).    d
-0000d6a0: 6566 2074 6573 745f 6f70 7469 6f6e 5f49  ef test_option_I
-0000d6b0: 5f6f 7665 7272 6964 6573 5f63 6f6e 6669  _overrides_confi
-0000d6c0: 675f 7265 6164 5f66 726f 6d5f 6669 6c65  g_read_from_file
-0000d6d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000d6e0: 696e 6920 3d20 2222 220a 2020 2020 2020  ini = """.      
-0000d6f0: 2020 2020 2020 5b73 6e61 7069 6e66 6f5d        [snapinfo]
-0000d700: 0a20 2020 2020 2020 2020 2020 204e 6f64  .            Nod
-0000d710: 654c 6162 656c 3d22 7b6c 6162 656c 7d22  eLabel="{label}"
-0000d720: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000d730: 2020 2020 2073 656c 662e 7772 6974 655f       self.write_
-0000d740: 7465 7874 5f66 696c 6528 6465 6465 6e74  text_file(dedent
-0000d750: 2869 6e69 292e 7374 7269 7028 292c 2027  (ini).strip(), '
-0000d760: 736b 6f6f 6c6b 6974 2e69 6e69 2729 0a20  skoolkit.ini'). 
-0000d770: 2020 2020 2020 2073 656c 662e 7275 6e5f         self.run_
-0000d780: 736e 6170 696e 666f 2827 2d2d 696e 6920  snapinfo('--ini 
-0000d790: 4e6f 6465 4c61 6265 6c3d 227b 6164 6472  NodeLabel="{addr
-0000d7a0: 6573 737d 2220 7465 7374 2e7a 3830 2729  ess}" test.z80')
-0000d7b0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-0000d7c0: 2c20 636f 6e66 6967 203d 2072 756e 5f61  , config = run_a
-0000d7d0: 7267 735b 313a 5d0a 2020 2020 2020 2020  rgs[1:].        
-0000d7e0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000d7f0: 285b 274e 6f64 654c 6162 656c 3d22 7b61  (['NodeLabel="{a
-0000d800: 6464 7265 7373 7d22 275d 2c20 6f70 7469  ddress}"'], opti
-0000d810: 6f6e 732e 7061 7261 6d73 290a 2020 2020  ons.params).    
-0000d820: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000d830: 7175 616c 2863 6f6e 6669 675b 274e 6f64  qual(config['Nod
-0000d840: 654c 6162 656c 275d 2c20 2722 7b61 6464  eLabel'], '"{add
-0000d850: 7265 7373 7d22 2729 0a0a 2020 2020 4070  ress}"')..    @p
-0000d860: 6174 6368 2e6f 626a 6563 7428 736e 6170  atch.object(snap
-0000d870: 696e 666f 2c20 2772 756e 272c 206d 6f63  info, 'run', moc
-0000d880: 6b5f 7275 6e29 0a20 2020 2040 7061 7463  k_run).    @patc
-0000d890: 682e 6f62 6a65 6374 2873 6e61 7069 6e66  h.object(snapinf
-0000d8a0: 6f2c 2027 6765 745f 636f 6e66 6967 272c  o, 'get_config',
-0000d8b0: 206d 6f63 6b5f 636f 6e66 6967 290a 2020   mock_config).  
-0000d8c0: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
-0000d8d0: 6e5f 495f 6d75 6c74 6970 6c65 2873 656c  n_I_multiple(sel
-0000d8e0: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
-0000d8f0: 2e72 756e 5f73 6e61 7069 6e66 6f28 272d  .run_snapinfo('-
-0000d900: 4920 4e6f 6465 4c61 6265 6c3d 227b 6164  I NodeLabel="{ad
-0000d910: 6472 6573 737d 2220 2d49 204e 6f64 6541  dress}" -I NodeA
-0000d920: 7474 7269 6275 7465 733d 7368 6170 653d  ttributes=shape=
-0000d930: 7371 7561 7265 2074 6573 742d 492d 6d75  square test-I-mu
-0000d940: 6c74 6970 6c65 2e73 6e61 2729 0a20 2020  ltiple.sna').   
-0000d950: 2020 2020 206f 7074 696f 6e73 2c20 636f       options, co
-0000d960: 6e66 6967 203d 2072 756e 5f61 7267 735b  nfig = run_args[
-0000d970: 313a 5d0a 2020 2020 2020 2020 7365 6c66  1:].        self
-0000d980: 2e61 7373 6572 7445 7175 616c 285b 274e  .assertEqual(['N
-0000d990: 6f64 654c 6162 656c 3d22 7b61 6464 7265  odeLabel="{addre
-0000d9a0: 7373 7d22 272c 2027 4e6f 6465 4174 7472  ss}"', 'NodeAttr
-0000d9b0: 6962 7574 6573 3d73 6861 7065 3d73 7175  ibutes=shape=squ
-0000d9c0: 6172 6527 5d2c 206f 7074 696f 6e73 2e70  are'], options.p
-0000d9d0: 6172 616d 7329 0a20 2020 2020 2020 2073  arams).        s
-0000d9e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000d9f0: 636f 6e66 6967 5b27 4e6f 6465 4174 7472  config['NodeAttr
-0000da00: 6962 7574 6573 275d 2c20 2773 6861 7065  ibutes'], 'shape
-0000da10: 3d73 7175 6172 6527 290a 2020 2020 2020  =square').      
-0000da20: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000da30: 616c 2863 6f6e 6669 675b 274e 6f64 654c  al(config['NodeL
-0000da40: 6162 656c 275d 2c20 2722 7b61 6464 7265  abel'], '"{addre
-0000da50: 7373 7d22 2729 0a0a 2020 2020 6465 6620  ss}"')..    def 
-0000da60: 7465 7374 5f6f 7074 696f 6e5f 6f28 7365  test_option_o(se
-0000da70: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
-0000da80: 203d 205b 302c 2034 375d 0a20 2020 2020   = [0, 47].     
-0000da90: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
-0000daa0: 2733 3137 3539 2037 4330 463a 2020 3437  '31759 7C0F:  47
-0000dab0: 2020 3246 2020 3030 3130 3131 3131 2020    2F  00101111  
-0000dac0: 2f27 0a20 2020 2020 2020 2066 6f72 206f  /'.        for o
-0000dad0: 7074 696f 6e20 696e 2028 272d 6f27 2c20  ption in ('-o', 
-0000dae0: 272d 2d6f 7267 2729 3a0a 2020 2020 2020  '--org'):.      
-0000daf0: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
-0000db00: 5f62 696e 2872 616d 2c20 6578 705f 6f75  _bin(ram, exp_ou
-0000db10: 7470 7574 2c20 277b 7d20 3331 3735 3820  tput, '{} 31758 
-0000db20: 2d70 2033 3137 3539 272e 666f 726d 6174  -p 31759'.format
-0000db30: 286f 7074 696f 6e29 290a 0a20 2020 2064  (option))..    d
-0000db40: 6566 2074 6573 745f 6f70 7469 6f6e 5f70  ef test_option_p
-0000db50: 5f77 6974 685f 7369 6e67 6c65 5f61 6464  _with_single_add
-0000db60: 7265 7373 2873 656c 6629 3a0a 2020 2020  ress(self):.    
-0000db70: 2020 2020 7261 6d20 3d20 5b30 5d20 2a20      ram = [0] * 
-0000db80: 3439 3135 320a 2020 2020 2020 2020 6164  49152.        ad
-0000db90: 6472 6573 7320 3d20 3331 3735 390a 2020  dress = 31759.  
-0000dba0: 2020 2020 2020 7261 6d5b 6164 6472 6573        ram[addres
-0000dbb0: 7320 2d20 3136 3338 345d 203d 2034 370a  s - 16384] = 47.
-0000dbc0: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-0000dbd0: 7574 203d 2027 3331 3735 3920 3743 3046  ut = '31759 7C0F
-0000dbe0: 3a20 2034 3720 2032 4620 2030 3031 3031  :  47  2F  00101
-0000dbf0: 3131 3120 202f 270a 2020 2020 2020 2020  111  /'.        
-0000dc00: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
-0000dc10: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
-0000dc20: 272d 7020 7b7d 272e 666f 726d 6174 2861  '-p {}'.format(a
-0000dc30: 6464 7265 7373 2929 0a0a 2020 2020 6465  ddress))..    de
-0000dc40: 6620 7465 7374 5f6f 7074 696f 6e5f 7065  f test_option_pe
-0000dc50: 656b 5f77 6974 685f 6164 6472 6573 735f  ek_with_address_
-0000dc60: 7261 6e67 6528 7365 6c66 293a 0a20 2020  range(self):.   
-0000dc70: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
-0000dc80: 2034 3931 3532 0a20 2020 2020 2020 2061   49152.        a
-0000dc90: 6464 7265 7373 3120 3d20 3431 3838 350a  ddress1 = 41885.
-0000dca0: 2020 2020 2020 2020 6164 6472 6573 7332          address2
-0000dcb0: 203d 2034 3138 3838 0a20 2020 2020 2020   = 41888.       
-0000dcc0: 2072 616d 5b61 6464 7265 7373 3120 2d20   ram[address1 - 
-0000dcd0: 3136 3338 343a 6164 6472 6573 7332 202d  16384:address2 -
-0000dce0: 3136 3338 335d 203d 206c 6973 7428 7261  16383] = list(ra
-0000dcf0: 6e67 6528 3939 2c20 3130 3020 2b20 6164  nge(99, 100 + ad
-0000dd00: 6472 6573 7332 202d 2061 6464 7265 7373  dress2 - address
-0000dd10: 3129 290a 2020 2020 2020 2020 6578 705f  1)).        exp_
-0000dd20: 6f75 7470 7574 203d 2022 2222 0a20 2020  output = """.   
-0000dd30: 2020 2020 2020 2020 2034 3138 3835 2041           41885 A
-0000dd40: 3339 443a 2020 3939 2020 3633 2020 3031  39D:  99  63  01
-0000dd50: 3130 3030 3131 2020 630a 2020 2020 2020  100011  c.      
-0000dd60: 2020 2020 2020 3431 3838 3620 4133 3945        41886 A39E
-0000dd70: 3a20 3130 3020 2036 3420 2030 3131 3030  : 100  64  01100
-0000dd80: 3130 3020 2064 0a20 2020 2020 2020 2020  100  d.         
-0000dd90: 2020 2034 3138 3837 2041 3339 463a 2031     41887 A39F: 1
-0000dda0: 3031 2020 3635 2020 3031 3130 3031 3031  01  65  01100101
-0000ddb0: 2020 650a 2020 2020 2020 2020 2020 2020    e.            
-0000ddc0: 3431 3838 3820 4133 4130 3a20 3130 3220  41888 A3A0: 102 
-0000ddd0: 2036 3620 2030 3131 3030 3131 3020 2066   66  01100110  f
-0000dde0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000ddf0: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-0000de00: 736e 6128 7261 6d2c 2065 7870 5f6f 7574  sna(ram, exp_out
-0000de10: 7075 742c 2027 2d2d 7065 656b 207b 7d2d  put, '--peek {}-
-0000de20: 7b7d 272e 666f 726d 6174 2861 6464 7265  {}'.format(addre
-0000de30: 7373 312c 2061 6464 7265 7373 3229 290a  ss1, address2)).
-0000de40: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
-0000de50: 7469 6f6e 5f70 5f77 6974 685f 6164 6472  tion_p_with_addr
-0000de60: 6573 735f 7261 6e67 655f 616e 645f 7374  ess_range_and_st
-0000de70: 6570 2873 656c 6629 3a0a 2020 2020 2020  ep(self):.      
-0000de80: 2020 7261 6d20 3d20 5b30 5d20 2a20 3439    ram = [0] * 49
-0000de90: 3135 320a 2020 2020 2020 2020 6164 6472  152.        addr
-0000dea0: 6573 7331 203d 2032 3536 3633 0a20 2020  ess1 = 25663.   
-0000deb0: 2020 2020 2061 6464 7265 7373 3220 3d20       address2 = 
-0000dec0: 3235 3636 390a 2020 2020 2020 2020 7374  25669.        st
-0000ded0: 6570 203d 2033 0a20 2020 2020 2020 2072  ep = 3.        r
-0000dee0: 616d 5b61 6464 7265 7373 3120 2d20 3136  am[address1 - 16
-0000def0: 3338 343a 6164 6472 6573 7332 202d 3136  384:address2 -16
-0000df00: 3338 333a 7374 6570 5d20 3d20 5b33 332c  383:step] = [33,
-0000df10: 2036 352c 2031 3236 5d0a 2020 2020 2020   65, 126].      
-0000df20: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
-0000df30: 2222 0a20 2020 2020 2020 2020 2020 2032  "".            2
-0000df40: 3536 3633 2036 3433 463a 2020 3333 2020  5663 643F:  33  
-0000df50: 3231 2020 3030 3130 3030 3031 2020 210a  21  00100001  !.
-0000df60: 2020 2020 2020 2020 2020 2020 3235 3636              2566
-0000df70: 3620 3634 3432 3a20 2036 3520 2034 3120  6 6442:  65  41 
-0000df80: 2030 3130 3030 3030 3120 2041 0a20 2020   01000001  A.   
-0000df90: 2020 2020 2020 2020 2032 3536 3639 2036           25669 6
-0000dfa0: 3434 353a 2031 3236 2020 3745 2020 3031  445: 126  7E  01
-0000dfb0: 3131 3131 3130 2020 7e0a 2020 2020 2020  111110  ~.      
-0000dfc0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-0000dfd0: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
-0000dfe0: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
-0000dff0: 7020 7b7d 2d7b 7d2d 7b7d 272e 666f 726d  p {}-{}-{}'.form
-0000e000: 6174 2861 6464 7265 7373 312c 2061 6464  at(address1, add
-0000e010: 7265 7373 322c 2073 7465 7029 290a 0a20  ress2, step)).. 
-0000e020: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-0000e030: 6f6e 5f70 5f77 6974 685f 6865 7861 6465  on_p_with_hexade
-0000e040: 6369 6d61 6c5f 7661 6c75 6573 2873 656c  cimal_values(sel
-0000e050: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
-0000e060: 3d20 5b30 5d20 2a20 3439 3135 320a 2020  = [0] * 49152.  
-0000e070: 2020 2020 2020 6164 6472 6573 7331 203d        address1 =
-0000e080: 2030 7838 3161 640a 2020 2020 2020 2020   0x81ad.        
-0000e090: 6164 6472 6573 7332 203d 2030 7838 3163  address2 = 0x81c
-0000e0a0: 310a 2020 2020 2020 2020 7374 6570 203d  1.        step =
-0000e0b0: 2030 7830 610a 2020 2020 2020 2020 7261   0x0a.        ra
-0000e0c0: 6d5b 6164 6472 6573 7331 202d 2031 3633  m[address1 - 163
-0000e0d0: 3834 3a61 6464 7265 7373 3220 2d31 3633  84:address2 -163
-0000e0e0: 3833 3a73 7465 705d 203d 205b 3333 2c20  83:step] = [33, 
-0000e0f0: 3635 2c20 3132 365d 0a20 2020 2020 2020  65, 126].       
-0000e100: 2065 7870 5f6f 7574 7075 7420 3d20 2222   exp_output = ""
-0000e110: 220a 2020 2020 2020 2020 2020 2020 3333  ".            33
-0000e120: 3139 3720 3831 4144 3a20 2033 3320 2032  197 81AD:  33  2
-0000e130: 3120 2030 3031 3030 3030 3120 2021 0a20  1  00100001  !. 
-0000e140: 2020 2020 2020 2020 2020 2033 3332 3037             33207
-0000e150: 2038 3142 373a 2020 3635 2020 3431 2020   81B7:  65  41  
-0000e160: 3031 3030 3030 3031 2020 410a 2020 2020  01000001  A.    
-0000e170: 2020 2020 2020 2020 3333 3231 3720 3831          33217 81
-0000e180: 4331 3a20 3132 3620 2037 4520 2030 3131  C1: 126  7E  011
-0000e190: 3131 3131 3020 207e 0a20 2020 2020 2020  11110  ~.       
-0000e1a0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-0000e1b0: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
-0000e1c0: 2065 7870 5f6f 7574 7075 742c 2027 2d70   exp_output, '-p
-0000e1d0: 2024 7b3a 3034 587d 2d24 7b3a 3034 787d   ${:04X}-${:04x}
-0000e1e0: 2d24 7b3a 587d 272e 666f 726d 6174 2861  -${:X}'.format(a
-0000e1f0: 6464 7265 7373 312c 2061 6464 7265 7373  ddress1, address
-0000e200: 322c 2073 7465 7029 290a 0a20 2020 2064  2, step))..    d
-0000e210: 6566 2074 6573 745f 6f70 7469 6f6e 5f70  ef test_option_p
-0000e220: 5f77 6974 685f 3078 5f68 6578 6164 6563  _with_0x_hexadec
-0000e230: 696d 616c 5f76 616c 7565 7328 7365 6c66  imal_values(self
-0000e240: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-0000e250: 205b 305d 202a 2034 3931 3532 0a20 2020   [0] * 49152.   
-0000e260: 2020 2020 2061 6464 7265 7373 3120 3d20       address1 = 
-0000e270: 3078 3831 6164 0a20 2020 2020 2020 2061  0x81ad.        a
-0000e280: 6464 7265 7373 3220 3d20 3078 3831 6331  ddress2 = 0x81c1
-0000e290: 0a20 2020 2020 2020 2073 7465 7020 3d20  .        step = 
-0000e2a0: 3078 3061 0a20 2020 2020 2020 2072 616d  0x0a.        ram
-0000e2b0: 5b61 6464 7265 7373 3120 2d20 3136 3338  [address1 - 1638
-0000e2c0: 343a 6164 6472 6573 7332 202d 3136 3338  4:address2 -1638
-0000e2d0: 333a 7374 6570 5d20 3d20 5b33 332c 2036  3:step] = [33, 6
-0000e2e0: 352c 2031 3236 5d0a 2020 2020 2020 2020  5, 126].        
-0000e2f0: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
-0000e300: 0a20 2020 2020 2020 2020 2020 2033 3331  .            331
-0000e310: 3937 2038 3141 443a 2020 3333 2020 3231  97 81AD:  33  21
-0000e320: 2020 3030 3130 3030 3031 2020 210a 2020    00100001  !.  
-0000e330: 2020 2020 2020 2020 2020 3333 3230 3720            33207 
-0000e340: 3831 4237 3a20 2036 3520 2034 3120 2030  81B7:  65  41  0
-0000e350: 3130 3030 3030 3120 2041 0a20 2020 2020  1000001  A.     
-0000e360: 2020 2020 2020 2033 3332 3137 2038 3143         33217 81C
-0000e370: 313a 2031 3236 2020 3745 2020 3031 3131  1: 126  7E  0111
-0000e380: 3131 3130 2020 7e0a 2020 2020 2020 2020  1110  ~.        
-0000e390: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-0000e3a0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
-0000e3b0: 6578 705f 6f75 7470 7574 2c20 272d 7020  exp_output, '-p 
-0000e3c0: 3078 7b3a 3034 587d 2d30 787b 3a30 3478  0x{:04X}-0x{:04x
-0000e3d0: 7d2d 3078 7b3a 587d 272e 666f 726d 6174  }-0x{:X}'.format
-0000e3e0: 2861 6464 7265 7373 312c 2061 6464 7265  (address1, addre
-0000e3f0: 7373 322c 2073 7465 7029 290a 0a20 2020  ss2, step))..   
-0000e400: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
-0000e410: 5f70 6565 6b5f 6d75 6c74 6970 6c65 2873  _peek_multiple(s
-0000e420: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
-0000e430: 6d20 3d20 5b30 5d20 2a20 3439 3135 320a  m = [0] * 49152.
-0000e440: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-0000e450: 3d20 5b5d 0a20 2020 2020 2020 2061 6464  = [].        add
-0000e460: 7265 7373 6573 203d 2028 3333 3333 332c  resses = (33333,
-0000e470: 2034 3431 3733 2c20 3530 3939 3829 0a20   44173, 50998). 
-0000e480: 2020 2020 2020 2066 6f72 2061 2069 6e20         for a in 
-0000e490: 6164 6472 6573 7365 733a 0a20 2020 2020  addresses:.     
-0000e4a0: 2020 2020 2020 2072 616d 5b61 202d 2031         ram[a - 1
-0000e4b0: 3633 3834 5d20 3d20 6120 2520 3235 360a  6384] = a % 256.
-0000e4c0: 2020 2020 2020 2020 2020 2020 6f70 7469              opti
-0000e4d0: 6f6e 732e 6170 7065 6e64 2827 2d2d 7065  ons.append('--pe
-0000e4e0: 656b 207b 7d27 2e66 6f72 6d61 7428 6129  ek {}'.format(a)
-0000e4f0: 290a 2020 2020 2020 2020 6578 705f 6f75  ).        exp_ou
-0000e500: 7470 7574 203d 2027 5c6e 272e 6a6f 696e  tput = '\n'.join
-0000e510: 2828 0a20 2020 2020 2020 2020 2020 2027  ((.            '
-0000e520: 3333 3333 3320 3832 3335 3a20 2035 3320  33333 8235:  53 
-0000e530: 2033 3520 2030 3031 3130 3130 3120 2035   35  00110101  5
-0000e540: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0000e550: 3434 3137 3320 4143 3844 3a20 3134 3120  44173 AC8D: 141 
-0000e560: 2038 4420 2031 3030 3031 3130 3120 2027   8D  10001101  '
-0000e570: 2c0a 2020 2020 2020 2020 2020 2020 2735  ,.            '5
-0000e580: 3039 3938 2043 3733 363a 2020 3534 2020  0998 C736:  54  
-0000e590: 3336 2020 3030 3131 3031 3130 2020 3627  36  00110110  6'
-0000e5a0: 0a20 2020 2020 2020 2029 290a 2020 2020  .        )).    
-0000e5b0: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-0000e5c0: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-0000e5d0: 7574 2c20 2720 272e 6a6f 696e 286f 7074  ut, ' '.join(opt
-0000e5e0: 696f 6e73 2929 0a0a 2020 2020 6465 6620  ions))..    def 
-0000e5f0: 7465 7374 5f6f 7074 696f 6e5f 705f 6f6e  test_option_p_on
-0000e600: 5f72 6177 5f6d 656d 6f72 795f 6669 6c65  _raw_memory_file
-0000e610: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000e620: 7261 6d20 3d20 5b36 342c 2036 352c 2036  ram = [64, 65, 6
-0000e630: 365d 0a20 2020 2020 2020 2065 7870 5f6f  6].        exp_o
-0000e640: 7574 7075 7420 3d20 2736 3535 3334 2046  utput = '65534 F
-0000e650: 4646 453a 2020 3635 2020 3431 2020 3031  FFE:  65  41  01
-0000e660: 3030 3030 3031 2020 4127 0a20 2020 2020  000001  A'.     
-0000e670: 2020 2073 656c 662e 5f74 6573 745f 6269     self._test_bi
-0000e680: 6e28 7261 6d2c 2065 7870 5f6f 7574 7075  n(ram, exp_outpu
-0000e690: 742c 2027 2d70 2036 3535 3334 2729 0a0a  t, '-p 65534')..
-0000e6a0: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
-0000e6b0: 696f 6e5f 705f 6f6e 5f72 6177 5f6d 656d  ion_p_on_raw_mem
-0000e6c0: 6f72 795f 6669 6c65 5f77 6974 685f 6e6f  ory_file_with_no
-0000e6d0: 6e73 7461 6e64 6172 645f 7375 6666 6978  nstandard_suffix
-0000e6e0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000e6f0: 7261 6d20 3d20 5b36 362c 2036 352c 2036  ram = [66, 65, 6
-0000e700: 345d 0a20 2020 2020 2020 2065 7870 5f6f  4].        exp_o
-0000e710: 7574 7075 7420 3d20 2736 3535 3334 2046  utput = '65534 F
-0000e720: 4646 453a 2020 3635 2020 3431 2020 3031  FFE:  65  41  01
-0000e730: 3030 3030 3031 2020 4127 0a20 2020 2020  000001  A'.     
-0000e740: 2020 2073 656c 662e 5f74 6573 745f 6269     self._test_bi
-0000e750: 6e28 7261 6d2c 2065 7870 5f6f 7574 7075  n(ram, exp_outpu
-0000e760: 742c 2027 2d70 2036 3535 3334 272c 2073  t, '-p 65534', s
-0000e770: 7566 6669 783d 272e 7261 6d27 290a 0a20  uffix='.ram').. 
-0000e780: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-0000e790: 6f6e 5f70 5f77 6974 685f 6164 6472 6573  on_p_with_addres
-0000e7a0: 7365 735f 6265 6c6f 775f 3130 3030 3028  ses_below_10000(
-0000e7b0: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-0000e7c0: 616d 203d 205b 305d 202a 2031 3030 3031  am = [0] * 10001
-0000e7d0: 0a20 2020 2020 2020 2072 616d 5b31 5d20  .        ram[1] 
-0000e7e0: 3d20 3636 0a20 2020 2020 2020 2072 616d  = 66.        ram
-0000e7f0: 5b31 315d 203d 2036 370a 2020 2020 2020  [11] = 67.      
-0000e800: 2020 7261 6d5b 3939 395d 203d 2036 380a    ram[999] = 68.
-0000e810: 2020 2020 2020 2020 7261 6d5b 3939 3939          ram[9999
-0000e820: 5d20 3d20 3639 0a20 2020 2020 2020 2072  ] = 69.        r
-0000e830: 616d 5b31 3030 3030 5d20 3d20 3730 0a20  am[10000] = 70. 
-0000e840: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-0000e850: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
-0000e860: 2020 2020 2020 2020 3120 3030 3031 3a20          1 0001: 
-0000e870: 2036 3620 2034 3220 2030 3130 3030 3031   66  42  0100001
-0000e880: 3020 2042 0a20 2020 2020 2020 2020 2020  0  B.           
-0000e890: 2020 2020 3131 2030 3030 423a 2020 3637      11 000B:  67
-0000e8a0: 2020 3433 2020 3031 3030 3030 3131 2020    43  01000011  
-0000e8b0: 430a 2020 2020 2020 2020 2020 2020 2020  C.              
-0000e8c0: 3939 3920 3033 4537 3a20 2036 3820 2034  999 03E7:  68  4
-0000e8d0: 3420 2030 3130 3030 3130 3020 2044 0a20  4  01000100  D. 
-0000e8e0: 2020 2020 2020 2020 2020 2020 3939 3939              9999
-0000e8f0: 2032 3730 463a 2020 3639 2020 3435 2020   270F:  69  45  
-0000e900: 3031 3030 3031 3031 2020 450a 2020 2020  01000101  E.    
-0000e910: 2020 2020 2020 2020 3130 3030 3020 3237          10000 27
-0000e920: 3130 3a20 2037 3020 2034 3620 2030 3130  10:  70  46  010
-0000e930: 3030 3131 3020 2046 0a20 2020 2020 2020  00110  F.       
-0000e940: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-0000e950: 662e 5f74 6573 745f 6269 6e28 7261 6d2c  f._test_bin(ram,
-0000e960: 2065 7870 5f6f 7574 7075 742c 2027 2d6f   exp_output, '-o
-0000e970: 2030 202d 7020 3120 2d70 2031 3120 2d70   0 -p 1 -p 11 -p
-0000e980: 2039 3939 202d 7020 3939 3939 202d 7020   999 -p 9999 -p 
-0000e990: 3130 3030 3027 290a 0a20 2020 2064 6566  10000')..    def
-0000e9a0: 2074 6573 745f 6f70 7469 6f6e 5f70 5f77   test_option_p_w
-0000e9b0: 6974 685f 7564 6773 2873 656c 6629 3a0a  ith_udgs(self):.
-0000e9c0: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-0000e9d0: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
-0000e9e0: 2020 6164 6472 6573 7320 3d20 3631 3839    address = 6189
-0000e9f0: 320a 2020 2020 2020 2020 7564 6773 203d  2.        udgs =
-0000ea00: 206c 6973 7428 7261 6e67 6528 3134 342c   list(range(144,
-0000ea10: 2031 3635 2929 0a20 2020 2020 2020 2072   165)).        r
-0000ea20: 616d 5b61 6464 7265 7373 202d 2031 3633  am[address - 163
-0000ea30: 3834 3a61 6464 7265 7373 202d 2031 3633  84:address - 163
-0000ea40: 3834 202b 206c 656e 2875 6467 7329 5d20  84 + len(udgs)] 
-0000ea50: 3d20 7564 6773 0a20 2020 2020 2020 2065  = udgs.        e
-0000ea60: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
-0000ea70: 2020 2020 2020 2020 2020 2020 3631 3839              6189
-0000ea80: 3220 4631 4334 3a20 3134 3420 2039 3020  2 F1C4: 144  90 
-0000ea90: 2031 3030 3130 3030 3020 2055 4447 2d41   10010000  UDG-A
-0000eaa0: 0a20 2020 2020 2020 2020 2020 2036 3138  .            618
-0000eab0: 3933 2046 3143 353a 2031 3435 2020 3931  93 F1C5: 145  91
-0000eac0: 2020 3130 3031 3030 3031 2020 5544 472d    10010001  UDG-
-0000ead0: 420a 2020 2020 2020 2020 2020 2020 3631  B.            61
-0000eae0: 3839 3420 4631 4336 3a20 3134 3620 2039  894 F1C6: 146  9
-0000eaf0: 3220 2031 3030 3130 3031 3020 2055 4447  2  10010010  UDG
-0000eb00: 2d43 0a20 2020 2020 2020 2020 2020 2036  -C.            6
-0000eb10: 3138 3935 2046 3143 373a 2031 3437 2020  1895 F1C7: 147  
-0000eb20: 3933 2020 3130 3031 3030 3131 2020 5544  93  10010011  UD
-0000eb30: 472d 440a 2020 2020 2020 2020 2020 2020  G-D.            
-0000eb40: 3631 3839 3620 4631 4338 3a20 3134 3820  61896 F1C8: 148 
-0000eb50: 2039 3420 2031 3030 3130 3130 3020 2055   94  10010100  U
-0000eb60: 4447 2d45 0a20 2020 2020 2020 2020 2020  DG-E.           
-0000eb70: 2036 3138 3937 2046 3143 393a 2031 3439   61897 F1C9: 149
-0000eb80: 2020 3935 2020 3130 3031 3031 3031 2020    95  10010101  
-0000eb90: 5544 472d 460a 2020 2020 2020 2020 2020  UDG-F.          
-0000eba0: 2020 3631 3839 3820 4631 4341 3a20 3135    61898 F1CA: 15
-0000ebb0: 3020 2039 3620 2031 3030 3130 3131 3020  0  96  10010110 
-0000ebc0: 2055 4447 2d47 0a20 2020 2020 2020 2020   UDG-G.         
-0000ebd0: 2020 2036 3138 3939 2046 3143 423a 2031     61899 F1CB: 1
-0000ebe0: 3531 2020 3937 2020 3130 3031 3031 3131  51  97  10010111
-0000ebf0: 2020 5544 472d 480a 2020 2020 2020 2020    UDG-H.        
-0000ec00: 2020 2020 3631 3930 3020 4631 4343 3a20      61900 F1CC: 
-0000ec10: 3135 3220 2039 3820 2031 3030 3131 3030  152  98  1001100
-0000ec20: 3020 2055 4447 2d49 0a20 2020 2020 2020  0  UDG-I.       
-0000ec30: 2020 2020 2036 3139 3031 2046 3143 443a       61901 F1CD:
-0000ec40: 2031 3533 2020 3939 2020 3130 3031 3130   153  99  100110
-0000ec50: 3031 2020 5544 472d 4a0a 2020 2020 2020  01  UDG-J.      
-0000ec60: 2020 2020 2020 3631 3930 3220 4631 4345        61902 F1CE
-0000ec70: 3a20 3135 3420 2039 4120 2031 3030 3131  : 154  9A  10011
-0000ec80: 3031 3020 2055 4447 2d4b 0a20 2020 2020  010  UDG-K.     
-0000ec90: 2020 2020 2020 2036 3139 3033 2046 3143         61903 F1C
-0000eca0: 463a 2031 3535 2020 3942 2020 3130 3031  F: 155  9B  1001
-0000ecb0: 3130 3131 2020 5544 472d 4c0a 2020 2020  1011  UDG-L.    
-0000ecc0: 2020 2020 2020 2020 3631 3930 3420 4631          61904 F1
-0000ecd0: 4430 3a20 3135 3620 2039 4320 2031 3030  D0: 156  9C  100
-0000ece0: 3131 3130 3020 2055 4447 2d4d 0a20 2020  11100  UDG-M.   
-0000ecf0: 2020 2020 2020 2020 2036 3139 3035 2046           61905 F
-0000ed00: 3144 313a 2031 3537 2020 3944 2020 3130  1D1: 157  9D  10
-0000ed10: 3031 3131 3031 2020 5544 472d 4e0a 2020  011101  UDG-N.  
-0000ed20: 2020 2020 2020 2020 2020 3631 3930 3620            61906 
-0000ed30: 4631 4432 3a20 3135 3820 2039 4520 2031  F1D2: 158  9E  1
-0000ed40: 3030 3131 3131 3020 2055 4447 2d4f 0a20  0011110  UDG-O. 
-0000ed50: 2020 2020 2020 2020 2020 2036 3139 3037             61907
-0000ed60: 2046 3144 333a 2031 3539 2020 3946 2020   F1D3: 159  9F  
-0000ed70: 3130 3031 3131 3131 2020 5544 472d 500a  10011111  UDG-P.
-0000ed80: 2020 2020 2020 2020 2020 2020 3631 3930              6190
-0000ed90: 3820 4631 4434 3a20 3136 3020 2041 3020  8 F1D4: 160  A0 
-0000eda0: 2031 3031 3030 3030 3020 2055 4447 2d51   10100000  UDG-Q
-0000edb0: 0a20 2020 2020 2020 2020 2020 2036 3139  .            619
-0000edc0: 3039 2046 3144 353a 2031 3631 2020 4131  09 F1D5: 161  A1
-0000edd0: 2020 3130 3130 3030 3031 2020 5544 472d    10100001  UDG-
-0000ede0: 520a 2020 2020 2020 2020 2020 2020 3631  R.            61
-0000edf0: 3931 3020 4631 4436 3a20 3136 3220 2041  910 F1D6: 162  A
-0000ee00: 3220 2031 3031 3030 3031 3020 2055 4447  2  10100010  UDG
-0000ee10: 2d53 0a20 2020 2020 2020 2020 2020 2036  -S.            6
-0000ee20: 3139 3131 2046 3144 373a 2031 3633 2020  1911 F1D7: 163  
-0000ee30: 4133 2020 3130 3130 3030 3131 2020 5544  A3  10100011  UD
-0000ee40: 472d 540a 2020 2020 2020 2020 2020 2020  G-T.            
-0000ee50: 3631 3931 3220 4631 4438 3a20 3136 3420  61912 F1D8: 164 
-0000ee60: 2041 3420 2031 3031 3030 3130 3020 2055   A4  10100100  U
-0000ee70: 4447 2d55 0a20 2020 2020 2020 2022 2222  DG-U.        """
-0000ee80: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-0000ee90: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
-0000eea0: 5f6f 7574 7075 742c 2027 2d70 207b 7d2d  _output, '-p {}-
-0000eeb0: 7b7d 272e 666f 726d 6174 2861 6464 7265  {}'.format(addre
-0000eec0: 7373 2c20 6164 6472 6573 7320 2b20 6c65  ss, address + le
-0000eed0: 6e28 7564 6773 2920 2d20 3129 290a 0a20  n(udgs) - 1)).. 
-0000eee0: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-0000eef0: 6f6e 5f70 6565 6b5f 7769 7468 5f62 6173  on_peek_with_bas
-0000ef00: 6963 5f74 6f6b 656e 7328 7365 6c66 293a  ic_tokens(self):
-0000ef10: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
-0000ef20: 305d 202a 2034 3931 3532 0a20 2020 2020  0] * 49152.     
-0000ef30: 2020 2061 6464 7265 7373 203d 2034 3231     address = 421
-0000ef40: 3532 0a20 2020 2020 2020 2074 6f6b 656e  52.        token
-0000ef50: 7320 3d20 6c69 7374 2872 616e 6765 2831  s = list(range(1
-0000ef60: 3635 2c20 3235 3629 290a 2020 2020 2020  65, 256)).      
-0000ef70: 2020 7261 6d5b 6164 6472 6573 7320 2d20    ram[address - 
-0000ef80: 3136 3338 343a 6164 6472 6573 7320 2d20  16384:address - 
-0000ef90: 3136 3338 3420 2b20 6c65 6e28 746f 6b65  16384 + len(toke
-0000efa0: 6e73 295d 203d 2074 6f6b 656e 730a 2020  ns)] = tokens.  
-0000efb0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-0000efc0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-0000efd0: 2020 2034 3231 3532 2041 3441 383a 2031     42152 A4A8: 1
-0000efe0: 3635 2020 4135 2020 3130 3130 3031 3031  65  A5  10100101
-0000eff0: 2020 524e 440a 2020 2020 2020 2020 2020    RND.          
-0000f000: 2020 3432 3135 3320 4134 4139 3a20 3136    42153 A4A9: 16
-0000f010: 3620 2041 3620 2031 3031 3030 3131 3020  6  A6  10100110 
-0000f020: 2049 4e4b 4559 240a 2020 2020 2020 2020   INKEY$.        
-0000f030: 2020 2020 3432 3135 3420 4134 4141 3a20      42154 A4AA: 
-0000f040: 3136 3720 2041 3720 2031 3031 3030 3131  167  A7  1010011
-0000f050: 3120 2050 490a 2020 2020 2020 2020 2020  1  PI.          
-0000f060: 2020 3432 3135 3520 4134 4142 3a20 3136    42155 A4AB: 16
-0000f070: 3820 2041 3820 2031 3031 3031 3030 3020  8  A8  10101000 
-0000f080: 2046 4e0a 2020 2020 2020 2020 2020 2020   FN.            
-0000f090: 3432 3135 3620 4134 4143 3a20 3136 3920  42156 A4AC: 169 
-0000f0a0: 2041 3920 2031 3031 3031 3030 3120 2050   A9  10101001  P
-0000f0b0: 4f49 4e54 0a20 2020 2020 2020 2020 2020  OINT.           
-0000f0c0: 2034 3231 3537 2041 3441 443a 2031 3730   42157 A4AD: 170
-0000f0d0: 2020 4141 2020 3130 3130 3130 3130 2020    AA  10101010  
-0000f0e0: 5343 5245 454e 240a 2020 2020 2020 2020  SCREEN$.        
-0000f0f0: 2020 2020 3432 3135 3820 4134 4145 3a20      42158 A4AE: 
-0000f100: 3137 3120 2041 4220 2031 3031 3031 3031  171  AB  1010101
-0000f110: 3120 2041 5454 520a 2020 2020 2020 2020  1  ATTR.        
-0000f120: 2020 2020 3432 3135 3920 4134 4146 3a20      42159 A4AF: 
-0000f130: 3137 3220 2041 4320 2031 3031 3031 3130  172  AC  1010110
-0000f140: 3020 2041 540a 2020 2020 2020 2020 2020  0  AT.          
-0000f150: 2020 3432 3136 3020 4134 4230 3a20 3137    42160 A4B0: 17
-0000f160: 3320 2041 4420 2031 3031 3031 3130 3120  3  AD  10101101 
-0000f170: 2054 4142 0a20 2020 2020 2020 2020 2020   TAB.           
-0000f180: 2034 3231 3631 2041 3442 313a 2031 3734   42161 A4B1: 174
-0000f190: 2020 4145 2020 3130 3130 3131 3130 2020    AE  10101110  
-0000f1a0: 5641 4c24 0a20 2020 2020 2020 2020 2020  VAL$.           
-0000f1b0: 2034 3231 3632 2041 3442 323a 2031 3735   42162 A4B2: 175
-0000f1c0: 2020 4146 2020 3130 3130 3131 3131 2020    AF  10101111  
-0000f1d0: 434f 4445 0a20 2020 2020 2020 2020 2020  CODE.           
-0000f1e0: 2034 3231 3633 2041 3442 333a 2031 3736   42163 A4B3: 176
-0000f1f0: 2020 4230 2020 3130 3131 3030 3030 2020    B0  10110000  
-0000f200: 5641 4c0a 2020 2020 2020 2020 2020 2020  VAL.            
-0000f210: 3432 3136 3420 4134 4234 3a20 3137 3720  42164 A4B4: 177 
-0000f220: 2042 3120 2031 3031 3130 3030 3120 204c   B1  10110001  L
-0000f230: 454e 0a20 2020 2020 2020 2020 2020 2034  EN.            4
-0000f240: 3231 3635 2041 3442 353a 2031 3738 2020  2165 A4B5: 178  
-0000f250: 4232 2020 3130 3131 3030 3130 2020 5349  B2  10110010  SI
-0000f260: 4e0a 2020 2020 2020 2020 2020 2020 3432  N.            42
-0000f270: 3136 3620 4134 4236 3a20 3137 3920 2042  166 A4B6: 179  B
-0000f280: 3320 2031 3031 3130 3031 3120 2043 4f53  3  10110011  COS
-0000f290: 0a20 2020 2020 2020 2020 2020 2034 3231  .            421
-0000f2a0: 3637 2041 3442 373a 2031 3830 2020 4234  67 A4B7: 180  B4
-0000f2b0: 2020 3130 3131 3031 3030 2020 5441 4e0a    10110100  TAN.
-0000f2c0: 2020 2020 2020 2020 2020 2020 3432 3136              4216
-0000f2d0: 3820 4134 4238 3a20 3138 3120 2042 3520  8 A4B8: 181  B5 
-0000f2e0: 2031 3031 3130 3130 3120 2041 534e 0a20   10110101  ASN. 
-0000f2f0: 2020 2020 2020 2020 2020 2034 3231 3639             42169
-0000f300: 2041 3442 393a 2031 3832 2020 4236 2020   A4B9: 182  B6  
-0000f310: 3130 3131 3031 3130 2020 4143 530a 2020  10110110  ACS.  
-0000f320: 2020 2020 2020 2020 2020 3432 3137 3020            42170 
-0000f330: 4134 4241 3a20 3138 3320 2042 3720 2031  A4BA: 183  B7  1
-0000f340: 3031 3130 3131 3120 2041 544e 0a20 2020  0110111  ATN.   
-0000f350: 2020 2020 2020 2020 2034 3231 3731 2041           42171 A
-0000f360: 3442 423a 2031 3834 2020 4238 2020 3130  4BB: 184  B8  10
-0000f370: 3131 3130 3030 2020 4c4e 0a20 2020 2020  111000  LN.     
-0000f380: 2020 2020 2020 2034 3231 3732 2041 3442         42172 A4B
-0000f390: 433a 2031 3835 2020 4239 2020 3130 3131  C: 185  B9  1011
-0000f3a0: 3130 3031 2020 4558 500a 2020 2020 2020  1001  EXP.      
-0000f3b0: 2020 2020 2020 3432 3137 3320 4134 4244        42173 A4BD
-0000f3c0: 3a20 3138 3620 2042 4120 2031 3031 3131  : 186  BA  10111
-0000f3d0: 3031 3020 2049 4e54 0a20 2020 2020 2020  010  INT.       
-0000f3e0: 2020 2020 2034 3231 3734 2041 3442 453a       42174 A4BE:
-0000f3f0: 2031 3837 2020 4242 2020 3130 3131 3130   187  BB  101110
-0000f400: 3131 2020 5351 520a 2020 2020 2020 2020  11  SQR.        
-0000f410: 2020 2020 3432 3137 3520 4134 4246 3a20      42175 A4BF: 
-0000f420: 3138 3820 2042 4320 2031 3031 3131 3130  188  BC  1011110
-0000f430: 3020 2053 474e 0a20 2020 2020 2020 2020  0  SGN.         
-0000f440: 2020 2034 3231 3736 2041 3443 303a 2031     42176 A4C0: 1
-0000f450: 3839 2020 4244 2020 3130 3131 3131 3031  89  BD  10111101
-0000f460: 2020 4142 530a 2020 2020 2020 2020 2020    ABS.          
-0000f470: 2020 3432 3137 3720 4134 4331 3a20 3139    42177 A4C1: 19
-0000f480: 3020 2042 4520 2031 3031 3131 3131 3020  0  BE  10111110 
-0000f490: 2050 4545 4b0a 2020 2020 2020 2020 2020   PEEK.          
-0000f4a0: 2020 3432 3137 3820 4134 4332 3a20 3139    42178 A4C2: 19
-0000f4b0: 3120 2042 4620 2031 3031 3131 3131 3120  1  BF  10111111 
-0000f4c0: 2049 4e0a 2020 2020 2020 2020 2020 2020   IN.            
-0000f4d0: 3432 3137 3920 4134 4333 3a20 3139 3220  42179 A4C3: 192 
-0000f4e0: 2043 3020 2031 3130 3030 3030 3020 2055   C0  11000000  U
-0000f4f0: 5352 0a20 2020 2020 2020 2020 2020 2034  SR.            4
-0000f500: 3231 3830 2041 3443 343a 2031 3933 2020  2180 A4C4: 193  
-0000f510: 4331 2020 3131 3030 3030 3031 2020 5354  C1  11000001  ST
-0000f520: 5224 0a20 2020 2020 2020 2020 2020 2034  R$.            4
-0000f530: 3231 3831 2041 3443 353a 2031 3934 2020  2181 A4C5: 194  
-0000f540: 4332 2020 3131 3030 3030 3130 2020 4348  C2  11000010  CH
-0000f550: 5224 0a20 2020 2020 2020 2020 2020 2034  R$.            4
-0000f560: 3231 3832 2041 3443 363a 2031 3935 2020  2182 A4C6: 195  
-0000f570: 4333 2020 3131 3030 3030 3131 2020 4e4f  C3  11000011  NO
-0000f580: 540a 2020 2020 2020 2020 2020 2020 3432  T.            42
-0000f590: 3138 3320 4134 4337 3a20 3139 3620 2043  183 A4C7: 196  C
-0000f5a0: 3420 2031 3130 3030 3130 3020 2042 494e  4  11000100  BIN
-0000f5b0: 0a20 2020 2020 2020 2020 2020 2034 3231  .            421
-0000f5c0: 3834 2041 3443 383a 2031 3937 2020 4335  84 A4C8: 197  C5
-0000f5d0: 2020 3131 3030 3031 3031 2020 4f52 0a20    11000101  OR. 
-0000f5e0: 2020 2020 2020 2020 2020 2034 3231 3835             42185
-0000f5f0: 2041 3443 393a 2031 3938 2020 4336 2020   A4C9: 198  C6  
-0000f600: 3131 3030 3031 3130 2020 414e 440a 2020  11000110  AND.  
-0000f610: 2020 2020 2020 2020 2020 3432 3138 3620            42186 
-0000f620: 4134 4341 3a20 3139 3920 2043 3720 2031  A4CA: 199  C7  1
-0000f630: 3130 3030 3131 3120 203c 3d0a 2020 2020  1000111  <=.    
-0000f640: 2020 2020 2020 2020 3432 3138 3720 4134          42187 A4
-0000f650: 4342 3a20 3230 3020 2043 3820 2031 3130  CB: 200  C8  110
-0000f660: 3031 3030 3020 203e 3d0a 2020 2020 2020  01000  >=.      
-0000f670: 2020 2020 2020 3432 3138 3820 4134 4343        42188 A4CC
-0000f680: 3a20 3230 3120 2043 3920 2031 3130 3031  : 201  C9  11001
-0000f690: 3030 3120 203c 3e0a 2020 2020 2020 2020  001  <>.        
-0000f6a0: 2020 2020 3432 3138 3920 4134 4344 3a20      42189 A4CD: 
-0000f6b0: 3230 3220 2043 4120 2031 3130 3031 3031  202  CA  1100101
-0000f6c0: 3020 204c 494e 450a 2020 2020 2020 2020  0  LINE.        
-0000f6d0: 2020 2020 3432 3139 3020 4134 4345 3a20      42190 A4CE: 
-0000f6e0: 3230 3320 2043 4220 2031 3130 3031 3031  203  CB  1100101
-0000f6f0: 3120 2054 4845 4e0a 2020 2020 2020 2020  1  THEN.        
-0000f700: 2020 2020 3432 3139 3120 4134 4346 3a20      42191 A4CF: 
-0000f710: 3230 3420 2043 4320 2031 3130 3031 3130  204  CC  1100110
-0000f720: 3020 2054 4f0a 2020 2020 2020 2020 2020  0  TO.          
-0000f730: 2020 3432 3139 3220 4134 4430 3a20 3230    42192 A4D0: 20
-0000f740: 3520 2043 4420 2031 3130 3031 3130 3120  5  CD  11001101 
-0000f750: 2053 5445 500a 2020 2020 2020 2020 2020   STEP.          
-0000f760: 2020 3432 3139 3320 4134 4431 3a20 3230    42193 A4D1: 20
-0000f770: 3620 2043 4520 2031 3130 3031 3131 3020  6  CE  11001110 
-0000f780: 2044 4546 2046 4e0a 2020 2020 2020 2020   DEF FN.        
-0000f790: 2020 2020 3432 3139 3420 4134 4432 3a20      42194 A4D2: 
-0000f7a0: 3230 3720 2043 4620 2031 3130 3031 3131  207  CF  1100111
-0000f7b0: 3120 2043 4154 0a20 2020 2020 2020 2020  1  CAT.         
-0000f7c0: 2020 2034 3231 3935 2041 3444 333a 2032     42195 A4D3: 2
-0000f7d0: 3038 2020 4430 2020 3131 3031 3030 3030  08  D0  11010000
-0000f7e0: 2020 464f 524d 4154 0a20 2020 2020 2020    FORMAT.       
-0000f7f0: 2020 2020 2034 3231 3936 2041 3444 343a       42196 A4D4:
-0000f800: 2032 3039 2020 4431 2020 3131 3031 3030   209  D1  110100
-0000f810: 3031 2020 4d4f 5645 0a20 2020 2020 2020  01  MOVE.       
-0000f820: 2020 2020 2034 3231 3937 2041 3444 353a       42197 A4D5:
-0000f830: 2032 3130 2020 4432 2020 3131 3031 3030   210  D2  110100
-0000f840: 3130 2020 4552 4153 450a 2020 2020 2020  10  ERASE.      
-0000f850: 2020 2020 2020 3432 3139 3820 4134 4436        42198 A4D6
-0000f860: 3a20 3231 3120 2044 3320 2031 3130 3130  : 211  D3  11010
-0000f870: 3031 3120 204f 5045 4e20 230a 2020 2020  011  OPEN #.    
-0000f880: 2020 2020 2020 2020 3432 3139 3920 4134          42199 A4
-0000f890: 4437 3a20 3231 3220 2044 3420 2031 3130  D7: 212  D4  110
-0000f8a0: 3130 3130 3020 2043 4c4f 5345 2023 0a20  10100  CLOSE #. 
-0000f8b0: 2020 2020 2020 2020 2020 2034 3232 3030             42200
-0000f8c0: 2041 3444 383a 2032 3133 2020 4435 2020   A4D8: 213  D5  
-0000f8d0: 3131 3031 3031 3031 2020 4d45 5247 450a  11010101  MERGE.
-0000f8e0: 2020 2020 2020 2020 2020 2020 3432 3230              4220
-0000f8f0: 3120 4134 4439 3a20 3231 3420 2044 3620  1 A4D9: 214  D6 
-0000f900: 2031 3130 3130 3131 3020 2056 4552 4946   11010110  VERIF
-0000f910: 590a 2020 2020 2020 2020 2020 2020 3432  Y.            42
-0000f920: 3230 3220 4134 4441 3a20 3231 3520 2044  202 A4DA: 215  D
-0000f930: 3720 2031 3130 3130 3131 3120 2042 4545  7  11010111  BEE
-0000f940: 500a 2020 2020 2020 2020 2020 2020 3432  P.            42
-0000f950: 3230 3320 4134 4442 3a20 3231 3620 2044  203 A4DB: 216  D
-0000f960: 3820 2031 3130 3131 3030 3020 2043 4952  8  11011000  CIR
-0000f970: 434c 450a 2020 2020 2020 2020 2020 2020  CLE.            
-0000f980: 3432 3230 3420 4134 4443 3a20 3231 3720  42204 A4DC: 217 
-0000f990: 2044 3920 2031 3130 3131 3030 3120 2049   D9  11011001  I
-0000f9a0: 4e4b 0a20 2020 2020 2020 2020 2020 2034  NK.            4
-0000f9b0: 3232 3035 2041 3444 443a 2032 3138 2020  2205 A4DD: 218  
-0000f9c0: 4441 2020 3131 3031 3130 3130 2020 5041  DA  11011010  PA
-0000f9d0: 5045 520a 2020 2020 2020 2020 2020 2020  PER.            
-0000f9e0: 3432 3230 3620 4134 4445 3a20 3231 3920  42206 A4DE: 219 
-0000f9f0: 2044 4220 2031 3130 3131 3031 3120 2046   DB  11011011  F
-0000fa00: 4c41 5348 0a20 2020 2020 2020 2020 2020  LASH.           
-0000fa10: 2034 3232 3037 2041 3444 463a 2032 3230   42207 A4DF: 220
-0000fa20: 2020 4443 2020 3131 3031 3131 3030 2020    DC  11011100  
-0000fa30: 4252 4947 4854 0a20 2020 2020 2020 2020  BRIGHT.         
-0000fa40: 2020 2034 3232 3038 2041 3445 303a 2032     42208 A4E0: 2
-0000fa50: 3231 2020 4444 2020 3131 3031 3131 3031  21  DD  11011101
-0000fa60: 2020 494e 5645 5253 450a 2020 2020 2020    INVERSE.      
-0000fa70: 2020 2020 2020 3432 3230 3920 4134 4531        42209 A4E1
-0000fa80: 3a20 3232 3220 2044 4520 2031 3130 3131  : 222  DE  11011
-0000fa90: 3131 3020 204f 5645 520a 2020 2020 2020  110  OVER.      
-0000faa0: 2020 2020 2020 3432 3231 3020 4134 4532        42210 A4E2
-0000fab0: 3a20 3232 3320 2044 4620 2031 3130 3131  : 223  DF  11011
-0000fac0: 3131 3120 204f 5554 0a20 2020 2020 2020  111  OUT.       
-0000fad0: 2020 2020 2034 3232 3131 2041 3445 333a       42211 A4E3:
-0000fae0: 2032 3234 2020 4530 2020 3131 3130 3030   224  E0  111000
-0000faf0: 3030 2020 4c50 5249 4e54 0a20 2020 2020  00  LPRINT.     
-0000fb00: 2020 2020 2020 2034 3232 3132 2041 3445         42212 A4E
-0000fb10: 343a 2032 3235 2020 4531 2020 3131 3130  4: 225  E1  1110
-0000fb20: 3030 3031 2020 4c4c 4953 540a 2020 2020  0001  LLIST.    
-0000fb30: 2020 2020 2020 2020 3432 3231 3320 4134          42213 A4
-0000fb40: 4535 3a20 3232 3620 2045 3220 2031 3131  E5: 226  E2  111
-0000fb50: 3030 3031 3020 2053 544f 500a 2020 2020  00010  STOP.    
-0000fb60: 2020 2020 2020 2020 3432 3231 3420 4134          42214 A4
-0000fb70: 4536 3a20 3232 3720 2045 3320 2031 3131  E6: 227  E3  111
-0000fb80: 3030 3031 3120 2052 4541 440a 2020 2020  00011  READ.    
-0000fb90: 2020 2020 2020 2020 3432 3231 3520 4134          42215 A4
-0000fba0: 4537 3a20 3232 3820 2045 3420 2031 3131  E7: 228  E4  111
-0000fbb0: 3030 3130 3020 2044 4154 410a 2020 2020  00100  DATA.    
-0000fbc0: 2020 2020 2020 2020 3432 3231 3620 4134          42216 A4
-0000fbd0: 4538 3a20 3232 3920 2045 3520 2031 3131  E8: 229  E5  111
-0000fbe0: 3030 3130 3120 2052 4553 544f 5245 0a20  00101  RESTORE. 
-0000fbf0: 2020 2020 2020 2020 2020 2034 3232 3137             42217
-0000fc00: 2041 3445 393a 2032 3330 2020 4536 2020   A4E9: 230  E6  
-0000fc10: 3131 3130 3031 3130 2020 4e45 570a 2020  11100110  NEW.  
-0000fc20: 2020 2020 2020 2020 2020 3432 3231 3820            42218 
-0000fc30: 4134 4541 3a20 3233 3120 2045 3720 2031  A4EA: 231  E7  1
-0000fc40: 3131 3030 3131 3120 2042 4f52 4445 520a  1100111  BORDER.
-0000fc50: 2020 2020 2020 2020 2020 2020 3432 3231              4221
-0000fc60: 3920 4134 4542 3a20 3233 3220 2045 3820  9 A4EB: 232  E8 
-0000fc70: 2031 3131 3031 3030 3020 2043 4f4e 5449   11101000  CONTI
-0000fc80: 4e55 450a 2020 2020 2020 2020 2020 2020  NUE.            
-0000fc90: 3432 3232 3020 4134 4543 3a20 3233 3320  42220 A4EC: 233 
-0000fca0: 2045 3920 2031 3131 3031 3030 3120 2044   E9  11101001  D
-0000fcb0: 494d 0a20 2020 2020 2020 2020 2020 2034  IM.            4
-0000fcc0: 3232 3231 2041 3445 443a 2032 3334 2020  2221 A4ED: 234  
-0000fcd0: 4541 2020 3131 3130 3130 3130 2020 5245  EA  11101010  RE
-0000fce0: 4d0a 2020 2020 2020 2020 2020 2020 3432  M.            42
-0000fcf0: 3232 3220 4134 4545 3a20 3233 3520 2045  222 A4EE: 235  E
-0000fd00: 4220 2031 3131 3031 3031 3120 2046 4f52  B  11101011  FOR
-0000fd10: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
-0000fd20: 3233 2041 3445 463a 2032 3336 2020 4543  23 A4EF: 236  EC
-0000fd30: 2020 3131 3130 3131 3030 2020 474f 2054    11101100  GO T
-0000fd40: 4f0a 2020 2020 2020 2020 2020 2020 3432  O.            42
-0000fd50: 3232 3420 4134 4630 3a20 3233 3720 2045  224 A4F0: 237  E
-0000fd60: 4420 2031 3131 3031 3130 3120 2047 4f20  D  11101101  GO 
-0000fd70: 5355 420a 2020 2020 2020 2020 2020 2020  SUB.            
-0000fd80: 3432 3232 3520 4134 4631 3a20 3233 3820  42225 A4F1: 238 
-0000fd90: 2045 4520 2031 3131 3031 3131 3020 2049   EE  11101110  I
-0000fda0: 4e50 5554 0a20 2020 2020 2020 2020 2020  NPUT.           
-0000fdb0: 2034 3232 3236 2041 3446 323a 2032 3339   42226 A4F2: 239
-0000fdc0: 2020 4546 2020 3131 3130 3131 3131 2020    EF  11101111  
-0000fdd0: 4c4f 4144 0a20 2020 2020 2020 2020 2020  LOAD.           
-0000fde0: 2034 3232 3237 2041 3446 333a 2032 3430   42227 A4F3: 240
-0000fdf0: 2020 4630 2020 3131 3131 3030 3030 2020    F0  11110000  
-0000fe00: 4c49 5354 0a20 2020 2020 2020 2020 2020  LIST.           
-0000fe10: 2034 3232 3238 2041 3446 343a 2032 3431   42228 A4F4: 241
-0000fe20: 2020 4631 2020 3131 3131 3030 3031 2020    F1  11110001  
-0000fe30: 4c45 540a 2020 2020 2020 2020 2020 2020  LET.            
-0000fe40: 3432 3232 3920 4134 4635 3a20 3234 3220  42229 A4F5: 242 
-0000fe50: 2046 3220 2031 3131 3130 3031 3020 2050   F2  11110010  P
-0000fe60: 4155 5345 0a20 2020 2020 2020 2020 2020  AUSE.           
-0000fe70: 2034 3232 3330 2041 3446 363a 2032 3433   42230 A4F6: 243
-0000fe80: 2020 4633 2020 3131 3131 3030 3131 2020    F3  11110011  
-0000fe90: 4e45 5854 0a20 2020 2020 2020 2020 2020  NEXT.           
-0000fea0: 2034 3232 3331 2041 3446 373a 2032 3434   42231 A4F7: 244
-0000feb0: 2020 4634 2020 3131 3131 3031 3030 2020    F4  11110100  
-0000fec0: 504f 4b45 0a20 2020 2020 2020 2020 2020  POKE.           
-0000fed0: 2034 3232 3332 2041 3446 383a 2032 3435   42232 A4F8: 245
-0000fee0: 2020 4635 2020 3131 3131 3031 3031 2020    F5  11110101  
-0000fef0: 5052 494e 540a 2020 2020 2020 2020 2020  PRINT.          
-0000ff00: 2020 3432 3233 3320 4134 4639 3a20 3234    42233 A4F9: 24
-0000ff10: 3620 2046 3620 2031 3131 3130 3131 3020  6  F6  11110110 
-0000ff20: 2050 4c4f 540a 2020 2020 2020 2020 2020   PLOT.          
-0000ff30: 2020 3432 3233 3420 4134 4641 3a20 3234    42234 A4FA: 24
-0000ff40: 3720 2046 3720 2031 3131 3130 3131 3120  7  F7  11110111 
-0000ff50: 2052 554e 0a20 2020 2020 2020 2020 2020   RUN.           
-0000ff60: 2034 3232 3335 2041 3446 423a 2032 3438   42235 A4FB: 248
-0000ff70: 2020 4638 2020 3131 3131 3130 3030 2020    F8  11111000  
-0000ff80: 5341 5645 0a20 2020 2020 2020 2020 2020  SAVE.           
-0000ff90: 2034 3232 3336 2041 3446 433a 2032 3439   42236 A4FC: 249
-0000ffa0: 2020 4639 2020 3131 3131 3130 3031 2020    F9  11111001  
-0000ffb0: 5241 4e44 4f4d 495a 450a 2020 2020 2020  RANDOMIZE.      
-0000ffc0: 2020 2020 2020 3432 3233 3720 4134 4644        42237 A4FD
-0000ffd0: 3a20 3235 3020 2046 4120 2031 3131 3131  : 250  FA  11111
-0000ffe0: 3031 3020 2049 460a 2020 2020 2020 2020  010  IF.        
-0000fff0: 2020 2020 3432 3233 3820 4134 4645 3a20      42238 A4FE: 
-00010000: 3235 3120 2046 4220 2031 3131 3131 3031  251  FB  1111101
-00010010: 3120 2043 4c53 0a20 2020 2020 2020 2020  1  CLS.         
-00010020: 2020 2034 3232 3339 2041 3446 463a 2032     42239 A4FF: 2
-00010030: 3532 2020 4643 2020 3131 3131 3131 3030  52  FC  11111100
-00010040: 2020 4452 4157 0a20 2020 2020 2020 2020    DRAW.         
-00010050: 2020 2034 3232 3430 2041 3530 303a 2032     42240 A500: 2
-00010060: 3533 2020 4644 2020 3131 3131 3131 3031  53  FD  11111101
-00010070: 2020 434c 4541 520a 2020 2020 2020 2020    CLEAR.        
-00010080: 2020 2020 3432 3234 3120 4135 3031 3a20      42241 A501: 
-00010090: 3235 3420 2046 4520 2031 3131 3131 3131  254  FE  1111111
-000100a0: 3020 2052 4554 5552 4e0a 2020 2020 2020  0  RETURN.      
-000100b0: 2020 2020 2020 3432 3234 3220 4135 3032        42242 A502
-000100c0: 3a20 3235 3520 2046 4620 2031 3131 3131  : 255  FF  11111
-000100d0: 3131 3120 2043 4f50 590a 2020 2020 2020  111  COPY.      
-000100e0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-000100f0: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
-00010100: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
-00010110: 2d70 6565 6b20 7b7d 2d7b 7d27 2e66 6f72  -peek {}-{}'.for
-00010120: 6d61 7428 6164 6472 6573 732c 2061 6464  mat(address, add
-00010130: 7265 7373 202b 206c 656e 2874 6f6b 656e  ress + len(token
-00010140: 7329 202d 2031 2929 0a0a 2020 2020 6465  s) - 1))..    de
-00010150: 6620 7465 7374 5f6f 7074 696f 6e5f 705f  f test_option_p_
-00010160: 7769 7468 5f6e 6f6e 7374 616e 6461 7264  with_nonstandard
-00010170: 5f63 6861 7261 6374 6572 7328 7365 6c66  _characters(self
-00010180: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
-00010190: 205b 305d 202a 2034 3931 3532 0a20 2020   [0] * 49152.   
-000101a0: 2020 2020 2061 6464 7265 7373 203d 2034       address = 4
-000101b0: 3436 3337 0a20 2020 2020 2020 2063 6861  4637.        cha
-000101c0: 7273 203d 205b 3934 2c20 3936 2c20 3132  rs = [94, 96, 12
-000101d0: 375d 0a20 2020 2020 2020 2072 616d 5b61  7].        ram[a
-000101e0: 6464 7265 7373 202d 2031 3633 3834 3a61  ddress - 16384:a
-000101f0: 6464 7265 7373 202d 2031 3633 3834 202b  ddress - 16384 +
-00010200: 206c 656e 2863 6861 7273 295d 203d 2063   len(chars)] = c
-00010210: 6861 7273 0a20 2020 2020 2020 2065 7870  hars.        exp
-00010220: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
-00010230: 2020 2020 2020 2020 2020 3434 3633 3720            44637 
-00010240: 4145 3544 3a20 2039 3420 2035 4520 2030  AE5D:  94  5E  0
-00010250: 3130 3131 3131 3020 20e2 8691 0a20 2020  1011110  ....   
-00010260: 2020 2020 2020 2020 2034 3436 3338 2041           44638 A
-00010270: 4535 453a 2020 3936 2020 3630 2020 3031  E5E:  96  60  01
-00010280: 3130 3030 3030 2020 c2a3 0a20 2020 2020  100000  ...     
-00010290: 2020 2020 2020 2034 3436 3339 2041 4535         44639 AE5
-000102a0: 463a 2031 3237 2020 3746 2020 3031 3131  F: 127  7F  0111
-000102b0: 3131 3131 2020 c2a9 0a20 2020 2020 2020  1111  ...       
-000102c0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-000102d0: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
-000102e0: 2065 7870 5f6f 7574 7075 742c 2027 2d70   exp_output, '-p
-000102f0: 207b 7d2d 7b7d 272e 666f 726d 6174 2861   {}-{}'.format(a
-00010300: 6464 7265 7373 2c20 6164 6472 6573 7320  ddress, address 
-00010310: 2b20 6c65 6e28 6368 6172 7329 202d 2031  + len(chars) - 1
-00010320: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
-00010330: 5f6f 7074 696f 6e5f 7065 656b 5f77 6974  _option_peek_wit
-00010340: 685f 696e 7661 6c69 645f 6164 6472 6573  h_invalid_addres
-00010350: 735f 7261 6e67 6528 7365 6c66 293a 0a20  s_range(self):. 
-00010360: 2020 2020 2020 2065 7870 5f65 7272 6f72         exp_error
-00010370: 203d 2027 496e 7661 6c69 6420 6164 6472   = 'Invalid addr
-00010380: 6573 7320 7261 6e67 6527 0a20 2020 2020  ess range'.     
-00010390: 2020 2073 656c 662e 5f74 6573 745f 6261     self._test_ba
-000103a0: 645f 7370 6563 2827 2d2d 7065 656b 272c  d_spec('--peek',
-000103b0: 2027 5827 2c20 6578 705f 6572 726f 7229   'X', exp_error)
-000103c0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-000103d0: 6573 745f 6261 645f 7370 6563 2827 2d70  est_bad_spec('-p
-000103e0: 272c 2027 3332 3736 382d 3f27 2c20 6578  ', '32768-?', ex
-000103f0: 705f 6572 726f 7229 0a20 2020 2020 2020  p_error).       
-00010400: 2073 656c 662e 5f74 6573 745f 6261 645f   self._test_bad_
-00010410: 7370 6563 2827 2d2d 7065 656b 272c 2027  spec('--peek', '
-00010420: 3332 3736 382d 3332 3836 382d 7127 2c20  32768-32868-q', 
-00010430: 6578 705f 6572 726f 7229 0a20 2020 2020  exp_error).     
-00010440: 2020 2073 656c 662e 5f74 6573 745f 6261     self._test_ba
-00010450: 645f 7370 6563 2827 2d70 272c 2027 3332  d_spec('-p', '32
-00010460: 3736 382d 3332 3836 382d 322d 3327 2c20  768-32868-2-3', 
-00010470: 6578 705f 6572 726f 7229 0a0a 2020 2020  exp_error)..    
-00010480: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
-00010490: 5028 7365 6c66 293a 0a20 2020 2020 2020  P(self):.       
-000104a0: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
-000104b0: 3532 0a20 2020 2020 2020 2068 6561 6465  52.        heade
-000104c0: 7232 203d 205b 305d 202a 2034 0a20 2020  r2 = [0] * 4.   
-000104d0: 2020 2020 2068 6561 6465 7232 5b32 5d20       header2[2] 
-000104e0: 3d20 3120 2020 2020 2020 2020 2020 2023  = 1            #
-000104f0: 2050 6f72 7420 3078 3766 6664 2028 7061   Port 0x7ffd (pa
-00010500: 6765 206d 6170 7065 6420 746f 2034 3931  ge mapped to 491
-00010510: 3532 2d36 3535 3335 290a 2020 2020 2020  52-65535).      
-00010520: 2020 6261 6e6b 7320 3d20 5b30 5d20 2a20    banks = [0] * 
-00010530: 2835 202a 2031 3633 3834 2920 2320 4261  (5 * 16384) # Ba
-00010540: 6e6b 7320 302c 2033 2c20 342c 2036 2c20  nks 0, 3, 4, 6, 
-00010550: 370a 2020 2020 2020 2020 6261 6e6b 735b  7.        banks[
-00010560: 2d31 5d20 3d20 3235 3520 2020 2020 2020  -1] = 255       
-00010570: 2020 2020 2320 4c61 7374 2062 7974 6520      # Last byte 
-00010580: 6f66 2062 616e 6b20 370a 2020 2020 2020  of bank 7.      
-00010590: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
-000105a0: 3635 3533 3520 4646 4646 3a20 3235 3520  65535 FFFF: 255 
-000105b0: 2046 4620 2031 3131 3131 3131 3120 2043   FF  11111111  C
-000105c0: 4f50 5922 0a20 2020 2020 2020 2066 6f72  OPY".        for
-000105d0: 206f 7074 696f 6e20 696e 2028 272d 5027   option in ('-P'
-000105e0: 2c20 272d 2d70 6167 6527 293a 0a20 2020  , '--page'):.   
-000105f0: 2020 2020 2020 2020 2073 656c 662e 5f74           self._t
-00010600: 6573 745f 736e 6128 7261 6d20 2b20 6865  est_sna(ram + he
-00010610: 6164 6572 3220 2b20 6261 6e6b 732c 2065  ader2 + banks, e
-00010620: 7870 5f6f 7574 7075 742c 2027 7b7d 2037  xp_output, '{} 7
-00010630: 202d 7020 3635 3533 3527 2e66 6f72 6d61   -p 65535'.forma
-00010640: 7428 6f70 7469 6f6e 2929 0a0a 2020 2020  t(option))..    
-00010650: 4070 6174 6368 2e6f 626a 6563 7428 736e  @patch.object(sn
-00010660: 6170 696e 666f 2c20 2767 6574 5f63 6f6e  apinfo, 'get_con
-00010670: 6669 6727 2c20 6d6f 636b 5f63 6f6e 6669  fig', mock_confi
-00010680: 6729 0a20 2020 2064 6566 2074 6573 745f  g).    def test_
-00010690: 6f70 7469 6f6e 5f73 686f 775f 636f 6e66  option_show_conf
-000106a0: 6967 2873 656c 6629 3a0a 2020 2020 2020  ig(self):.      
-000106b0: 2020 6f75 7470 7574 2c20 6572 726f 7220    output, error 
-000106c0: 3d20 7365 6c66 2e72 756e 5f73 6e61 7069  = self.run_snapi
-000106d0: 6e66 6f28 272d 2d73 686f 772d 636f 6e66  nfo('--show-conf
-000106e0: 6967 272c 2063 6174 6368 5f65 7869 743d  ig', catch_exit=
-000106f0: 3029 0a20 2020 2020 2020 2073 656c 662e  0).        self.
-00010700: 6173 7365 7274 4571 7561 6c28 6572 726f  assertEqual(erro
-00010710: 722c 2027 2729 0a20 2020 2020 2020 2065  r, '').        e
-00010720: 7870 5f6f 7574 7075 7420 3d20 7222 2222  xp_output = r"""
-00010730: 0a20 2020 2020 2020 2020 2020 205b 736e  .            [sn
-00010740: 6170 696e 666f 5d0a 2020 2020 2020 2020  apinfo].        
-00010750: 2020 2020 4564 6765 4174 7472 6962 7574      EdgeAttribut
-00010760: 6573 3d0a 2020 2020 2020 2020 2020 2020  es=.            
-00010770: 4772 6170 6841 7474 7269 6275 7465 733d  GraphAttributes=
-00010780: 0a20 2020 2020 2020 2020 2020 204e 6f64  .            Nod
-00010790: 6541 7474 7269 6275 7465 733d 7368 6170  eAttributes=shap
-000107a0: 653d 7265 636f 7264 0a20 2020 2020 2020  e=record.       
-000107b0: 2020 2020 204e 6f64 6549 643d 7b61 6464       NodeId={add
-000107c0: 7265 7373 7d0a 2020 2020 2020 2020 2020  ress}.          
-000107d0: 2020 4e6f 6465 4c61 6265 6c3d 227b 6164    NodeLabel="{ad
-000107e0: 6472 6573 737d 207b 6164 6472 6573 733a  dress} {address:
-000107f0: 3034 587d 5c6e 7b6c 6162 656c 7d22 0a20  04X}\n{label}". 
-00010800: 2020 2020 2020 2020 2020 2050 6565 6b3d             Peek=
-00010810: 7b61 6464 7265 7373 3a3e 357d 207b 6164  {address:>5} {ad
-00010820: 6472 6573 733a 3034 587d 3a20 7b76 616c  dress:04X}: {val
-00010830: 7565 3a3e 337d 2020 7b76 616c 7565 3a30  ue:>3}  {value:0
-00010840: 3258 7d20 207b 7661 6c75 653a 3038 627d  2X}  {value:08b}
-00010850: 2020 7b63 6861 727d 0a20 2020 2020 2020    {char}.       
-00010860: 2020 2020 2057 6f72 643d 7b61 6464 7265       Word={addre
-00010870: 7373 3a3e 357d 207b 6164 6472 6573 733a  ss:>5} {address:
-00010880: 3034 587d 3a20 7b76 616c 7565 3a3e 357d  04X}: {value:>5}
-00010890: 2020 7b76 616c 7565 3a30 3458 7d0a 2020    {value:04X}.  
-000108a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000108b0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000108c0: 616c 2864 6564 656e 7428 6578 705f 6f75  al(dedent(exp_ou
-000108d0: 7470 7574 292e 7374 7269 7028 292c 206f  tput).strip(), o
-000108e0: 7574 7075 742e 7273 7472 6970 2829 290a  utput.rstrip()).
-000108f0: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
-00010900: 7469 6f6e 5f73 686f 775f 636f 6e66 6967  tion_show_config
-00010910: 5f72 6561 645f 6672 6f6d 5f66 696c 6528  _read_from_file(
-00010920: 7365 6c66 293a 0a20 2020 2020 2020 2069  self):.        i
-00010930: 6e69 203d 2022 2222 0a20 2020 2020 2020  ni = """.       
-00010940: 2020 2020 205b 736e 6170 696e 666f 5d0a       [snapinfo].
-00010950: 2020 2020 2020 2020 2020 2020 4e6f 6465              Node
-00010960: 4174 7472 6962 7574 6573 3d73 6861 7065  Attributes=shape
-00010970: 3d62 6f78 0a20 2020 2020 2020 2020 2020  =box.           
-00010980: 204e 6f64 654c 6162 656c 3d22 7b6c 6162   NodeLabel="{lab
-00010990: 656c 7d22 0a20 2020 2020 2020 2020 2020  el}".           
-000109a0: 2050 6565 6b3d 247b 6164 6472 6573 733a   Peek=${address:
-000109b0: 3034 587d 2c24 7b76 616c 7565 3a30 3258  04X},${value:02X
-000109c0: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
-000109d0: 2020 2020 2020 7365 6c66 2e77 7269 7465        self.write
-000109e0: 5f74 6578 745f 6669 6c65 2864 6564 656e  _text_file(deden
-000109f0: 7428 696e 6929 2e73 7472 6970 2829 2c20  t(ini).strip(), 
-00010a00: 2773 6b6f 6f6c 6b69 742e 696e 6927 290a  'skoolkit.ini').
-00010a10: 2020 2020 2020 2020 6f75 7470 7574 2c20          output, 
-00010a20: 6572 726f 7220 3d20 7365 6c66 2e72 756e  error = self.run
-00010a30: 5f73 6e61 7069 6e66 6f28 272d 2d73 686f  _snapinfo('--sho
-00010a40: 772d 636f 6e66 6967 272c 2063 6174 6368  w-config', catch
-00010a50: 5f65 7869 743d 3029 0a20 2020 2020 2020  _exit=0).       
-00010a60: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00010a70: 6c28 6572 726f 722c 2027 2729 0a20 2020  l(error, '').   
-00010a80: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
-00010a90: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
-00010aa0: 2020 5b73 6e61 7069 6e66 6f5d 0a20 2020    [snapinfo].   
-00010ab0: 2020 2020 2020 2020 2045 6467 6541 7474           EdgeAtt
-00010ac0: 7269 6275 7465 733d 0a20 2020 2020 2020  ributes=.       
-00010ad0: 2020 2020 2047 7261 7068 4174 7472 6962       GraphAttrib
-00010ae0: 7574 6573 3d0a 2020 2020 2020 2020 2020  utes=.          
-00010af0: 2020 4e6f 6465 4174 7472 6962 7574 6573    NodeAttributes
-00010b00: 3d73 6861 7065 3d62 6f78 0a20 2020 2020  =shape=box.     
-00010b10: 2020 2020 2020 204e 6f64 6549 643d 7b61         NodeId={a
-00010b20: 6464 7265 7373 7d0a 2020 2020 2020 2020  ddress}.        
-00010b30: 2020 2020 4e6f 6465 4c61 6265 6c3d 227b      NodeLabel="{
-00010b40: 6c61 6265 6c7d 220a 2020 2020 2020 2020  label}".        
-00010b50: 2020 2020 5065 656b 3d24 7b61 6464 7265      Peek=${addre
-00010b60: 7373 3a30 3458 7d2c 247b 7661 6c75 653a  ss:04X},${value:
-00010b70: 3032 587d 0a20 2020 2020 2020 2020 2020  02X}.           
-00010b80: 2057 6f72 643d 7b61 6464 7265 7373 3a3e   Word={address:>
-00010b90: 357d 207b 6164 6472 6573 733a 3034 587d  5} {address:04X}
-00010ba0: 3a20 7b76 616c 7565 3a3e 357d 2020 7b76  : {value:>5}  {v
-00010bb0: 616c 7565 3a30 3458 7d0a 2020 2020 2020  alue:04X}.      
-00010bc0: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-00010bd0: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
-00010be0: 6564 656e 7428 6578 705f 6f75 7470 7574  edent(exp_output
-00010bf0: 292e 7374 7269 7028 292c 206f 7574 7075  ).strip(), outpu
-00010c00: 742e 7273 7472 6970 2829 290a 0a20 2020  t.rstrip())..   
-00010c10: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
-00010c20: 5f74 5f77 6974 685f 7369 6e67 6c65 5f6f  _t_with_single_o
-00010c30: 6363 7572 7265 6e63 6528 7365 6c66 293a  ccurrence(self):
-00010c40: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
-00010c50: 305d 202a 2034 3931 3532 0a20 2020 2020  0] * 49152.     
-00010c60: 2020 2074 6578 7420 3d20 2766 6f6f 270a     text = 'foo'.
-00010c70: 2020 2020 2020 2020 6164 6472 6573 7320          address 
-00010c80: 3d20 3433 3536 370a 2020 2020 2020 2020  = 43567.        
-00010c90: 7261 6d5b 6164 6472 6573 7320 2d20 3136  ram[address - 16
-00010ca0: 3338 343a 6164 6472 6573 7320 2d20 3136  384:address - 16
-00010cb0: 3338 3420 2b20 6c65 6e28 7465 7874 295d  384 + len(text)]
-00010cc0: 203d 205b 6f72 6428 6329 2066 6f72 2063   = [ord(c) for c
-00010cd0: 2069 6e20 7465 7874 5d0a 2020 2020 2020   in text].      
-00010ce0: 2020 6578 705f 6f75 7470 7574 203d 2027    exp_output = '
-00010cf0: 7b30 7d2d 7b31 7d20 7b30 3a30 3458 7d2d  {0}-{1} {0:04X}-
-00010d00: 7b31 3a30 3458 7d3a 207b 327d 272e 666f  {1:04X}: {2}'.fo
-00010d10: 726d 6174 2861 6464 7265 7373 2c20 6164  rmat(address, ad
-00010d20: 6472 6573 7320 2b20 6c65 6e28 7465 7874  dress + len(text
-00010d30: 2920 2d20 312c 2074 6578 7429 0a20 2020  ) - 1, text).   
-00010d40: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00010d50: 736e 6128 7261 6d2c 2065 7870 5f6f 7574  sna(ram, exp_out
-00010d60: 7075 742c 2027 2d74 207b 7d27 2e66 6f72  put, '-t {}'.for
-00010d70: 6d61 7428 7465 7874 2929 0a0a 2020 2020  mat(text))..    
-00010d80: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
-00010d90: 6669 6e64 5f74 6578 745f 7769 7468 5f6d  find_text_with_m
-00010da0: 756c 7469 706c 655f 6f63 6375 7272 656e  ultiple_occurren
-00010db0: 6365 7328 7365 6c66 293a 0a20 2020 2020  ces(self):.     
-00010dc0: 2020 2072 616d 203d 205b 305d 202a 2034     ram = [0] * 4
-00010dd0: 3931 3532 0a20 2020 2020 2020 2074 6578  9152.        tex
-00010de0: 7420 3d20 2762 6172 270a 2020 2020 2020  t = 'bar'.      
-00010df0: 2020 7465 7874 5f62 696e 203d 205b 6f72    text_bin = [or
-00010e00: 6428 6329 2066 6f72 2063 2069 6e20 7465  d(c) for c in te
-00010e10: 7874 5d0a 2020 2020 2020 2020 6164 6472  xt].        addr
-00010e20: 6573 7365 7320 3d20 2833 3235 3336 2c20  esses = (32536, 
-00010e30: 3433 3536 372c 2036 3134 3337 290a 2020  43567, 61437).  
-00010e40: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00010e50: 203d 2027 270a 2020 2020 2020 2020 666f   = ''.        fo
-00010e60: 7220 6120 696e 2061 6464 7265 7373 6573  r a in addresses
-00010e70: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00010e80: 6d5b 6120 2d20 3136 3338 343a 6120 2d20  m[a - 16384:a - 
-00010e90: 3136 3338 3420 2b20 6c65 6e28 7465 7874  16384 + len(text
-00010ea0: 295d 203d 2074 6578 745f 6269 6e0a 2020  )] = text_bin.  
-00010eb0: 2020 2020 2020 2020 2020 6578 705f 6f75            exp_ou
-00010ec0: 7470 7574 202b 3d20 277b 307d 2d7b 317d  tput += '{0}-{1}
-00010ed0: 207b 303a 3034 587d 2d7b 313a 3034 587d   {0:04X}-{1:04X}
-00010ee0: 3a20 7b32 7d5c 6e27 2e66 6f72 6d61 7428  : {2}\n'.format(
-00010ef0: 612c 2061 202b 206c 656e 2874 6578 7429  a, a + len(text)
-00010f00: 202d 2031 2c20 7465 7874 290a 2020 2020   - 1, text).    
-00010f10: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-00010f20: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-00010f30: 7574 2c20 272d 2d66 696e 642d 7465 7874  ut, '--find-text
-00010f40: 207b 7d27 2e66 6f72 6d61 7428 7465 7874   {}'.format(text
-00010f50: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
-00010f60: 5f6f 7074 696f 6e5f 745f 7769 7468 5f6e  _option_t_with_n
-00010f70: 6f5f 6f63 6375 7272 656e 6365 7328 7365  o_occurrences(se
-00010f80: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
-00010f90: 203d 205b 305d 202a 2034 3931 3532 0a20   = [0] * 49152. 
-00010fa0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-00010fb0: 7420 3d20 2727 0a20 2020 2020 2020 2073  t = ''.        s
-00010fc0: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-00010fd0: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-00010fe0: 2d74 206e 6f77 6865 7265 2729 0a0a 2020  -t nowhere')..  
-00010ff0: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
-00011000: 6e5f 745f 7769 7468 5f61 6464 7265 7373  n_t_with_address
-00011010: 5f62 656c 6f77 5f31 3633 3834 2873 656c  _below_16384(sel
-00011020: 6629 3a0a 2020 2020 2020 2020 6461 7461  f):.        data
-00011030: 203d 205b 305d 202a 2032 3536 0a20 2020   = [0] * 256.   
-00011040: 2020 2020 2061 6464 7265 7373 203d 2032       address = 2
-00011050: 3034 0a20 2020 2020 2020 2074 6578 7420  04.        text 
-00011060: 3d20 2768 656c 6c6f 270a 2020 2020 2020  = 'hello'.      
-00011070: 2020 6461 7461 5b61 6464 7265 7373 3a61    data[address:a
-00011080: 6464 7265 7373 202b 206c 656e 2874 6578  ddress + len(tex
-00011090: 7429 5d20 3d20 5b6f 7264 2863 2920 666f  t)] = [ord(c) fo
-000110a0: 7220 6320 696e 2074 6578 745d 0a20 2020  r c in text].   
-000110b0: 2020 2020 2062 696e 6669 6c65 203d 2073       binfile = s
-000110c0: 656c 662e 7772 6974 655f 6269 6e5f 6669  elf.write_bin_fi
-000110d0: 6c65 2864 6174 612c 2073 7566 6669 783d  le(data, suffix=
-000110e0: 272e 6269 6e27 290a 2020 2020 2020 2020  '.bin').        
-000110f0: 6578 705f 6f75 7470 7574 203d 2066 2732  exp_output = f'2
-00011100: 3034 2d32 3038 2030 3043 432d 3030 4430  04-208 00CC-00D0
-00011110: 3a20 7b74 6578 747d 270a 2020 2020 2020  : {text}'.      
-00011120: 2020 6f75 7470 7574 2c20 6572 726f 7220    output, error 
-00011130: 3d20 7365 6c66 2e72 756e 5f73 6e61 7069  = self.run_snapi
-00011140: 6e66 6f28 6627 2d74 207b 7465 7874 7d20  nfo(f'-t {text} 
-00011150: 2d6f 2030 207b 6269 6e66 696c 657d 2729  -o 0 {binfile}')
-00011160: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00011170: 7365 7274 4571 7561 6c28 6572 726f 722c  sertEqual(error,
-00011180: 2027 2729 0a20 2020 2020 2020 2073 656c   '').        sel
-00011190: 662e 6173 7365 7274 4571 7561 6c28 6f75  f.assertEqual(ou
-000111a0: 7470 7574 2e73 7472 6970 2829 2c20 6578  tput.strip(), ex
-000111b0: 705f 6f75 7470 7574 290a 0a20 2020 2064  p_output)..    d
-000111c0: 6566 2074 6573 745f 6f70 7469 6f6e 5f54  ef test_option_T
-000111d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000111e0: 7261 6d20 3d20 5b30 5d20 2a20 3439 3135  ram = [0] * 4915
-000111f0: 320a 2020 2020 2020 2020 7469 6c65 5f61  2.        tile_a
-00011200: 6464 7220 3d20 3534 3231 320a 2020 2020  ddr = 54212.    
-00011210: 2020 2020 7469 6c65 5f64 6174 6120 3d20      tile_data = 
-00011220: 5b30 2c20 3234 2c20 3132 2c20 362c 2031  [0, 24, 12, 6, 1
-00011230: 3237 2c20 362c 2031 322c 2032 345d 0a20  27, 6, 12, 24]. 
-00011240: 2020 2020 2020 2078 2c20 7920 3d20 332c         x, y = 3,
-00011250: 2037 0a20 2020 2020 2020 2064 665f 6164   7.        df_ad
-00011260: 6472 203d 2031 3633 3834 202b 2032 3034  dr = 16384 + 204
-00011270: 3820 2a20 2879 202f 2f20 3829 202b 2033  8 * (y // 8) + 3
-00011280: 3220 2a20 2879 2026 2037 2920 2b20 780a  2 * (y & 7) + x.
-00011290: 2020 2020 2020 2020 7261 6d5b 6466 5f61          ram[df_a
-000112a0: 6464 7220 2d20 3136 3338 343a 6466 5f61  ddr - 16384:df_a
-000112b0: 6464 7220 2d20 3134 3333 363a 3235 365d  ddr - 14336:256]
-000112c0: 203d 2074 696c 655f 6461 7461 0a20 2020   = tile_data.   
-000112d0: 2020 2020 2072 616d 5b74 696c 655f 6164       ram[tile_ad
-000112e0: 6472 202d 2031 3633 3834 3a74 696c 655f  dr - 16384:tile_
-000112f0: 6164 6472 202d 2031 3633 3736 5d20 3d20  addr - 16376] = 
-00011300: 7469 6c65 5f64 6174 610a 2020 2020 2020  tile_data.      
-00011310: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
-00011320: 2222 0a20 2020 2020 2020 2020 2020 207c  "".            |
-00011330: 2020 2020 2020 2020 7c0a 2020 2020 2020          |.      
-00011340: 2020 2020 2020 7c20 2020 2a2a 2020 207c        |   **   |
-00011350: 0a20 2020 2020 2020 2020 2020 207c 2020  .            |  
-00011360: 2020 2a2a 2020 7c0a 2020 2020 2020 2020    **  |.        
-00011370: 2020 2020 7c20 2020 2020 2a2a 207c 0a20      |     ** |. 
-00011380: 2020 2020 2020 2020 2020 207c 202a 2a2a             | ***
-00011390: 2a2a 2a2a 7c0a 2020 2020 2020 2020 2020  ****|.          
-000113a0: 2020 7c20 2020 2020 2a2a 207c 0a20 2020    |     ** |.   
-000113b0: 2020 2020 2020 2020 207c 2020 2020 2a2a           |    **
-000113c0: 2020 7c0a 2020 2020 2020 2020 2020 2020    |.            
-000113d0: 7c20 2020 2a2a 2020 207c 0a20 2020 2020  |   **   |.     
-000113e0: 2020 2020 2020 2035 3432 3132 2d35 3432         54212-542
-000113f0: 3139 2d31 2044 3343 342d 4433 4342 2d31  19-1 D3C4-D3CB-1
-00011400: 3a20 302c 3234 2c31 322c 362c 3132 372c  : 0,24,12,6,127,
-00011410: 362c 3132 2c32 340a 2020 2020 2020 2020  6,12,24.        
-00011420: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00011430: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
-00011440: 6578 705f 6f75 7470 7574 2c20 272d 5420  exp_output, '-T 
-00011450: 7b7d 2c7b 7d27 2e66 6f72 6d61 7428 782c  {},{}'.format(x,
-00011460: 2079 2929 0a0a 2020 2020 6465 6620 7465   y))..    def te
-00011470: 7374 5f6f 7074 696f 6e5f 6669 6e64 5f74  st_option_find_t
-00011480: 696c 655f 7769 7468 5f73 7465 7028 7365  ile_with_step(se
-00011490: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
-000114a0: 203d 205b 305d 202a 2034 3931 3532 0a20   = [0] * 49152. 
-000114b0: 2020 2020 2020 2074 696c 655f 6164 6472         tile_addr
-000114c0: 203d 2032 3734 3833 0a20 2020 2020 2020   = 27483.       
-000114d0: 2074 696c 655f 6461 7461 203d 205b 302c   tile_data = [0,
-000114e0: 2031 3237 2c20 3132 372c 2039 362c 2039   127, 127, 96, 9
-000114f0: 362c 2031 3033 2c20 3130 332c 2031 3032  6, 103, 103, 102
-00011500: 5d0a 2020 2020 2020 2020 782c 2079 203d  ].        x, y =
-00011510: 2039 2c20 3135 0a20 2020 2020 2020 2073   9, 15.        s
-00011520: 7465 7020 3d20 320a 2020 2020 2020 2020  tep = 2.        
-00011530: 6466 5f61 6464 7220 3d20 3136 3338 3420  df_addr = 16384 
-00011540: 2b20 3230 3438 202a 2028 7920 2f2f 2038  + 2048 * (y // 8
-00011550: 2920 2b20 3332 202a 2028 7920 2620 3729  ) + 32 * (y & 7)
-00011560: 202b 2078 0a20 2020 2020 2020 2072 616d   + x.        ram
-00011570: 5b64 665f 6164 6472 202d 2031 3633 3834  [df_addr - 16384
-00011580: 3a64 665f 6164 6472 202d 2031 3433 3336  :df_addr - 14336
-00011590: 3a32 3536 5d20 3d20 7469 6c65 5f64 6174  :256] = tile_dat
-000115a0: 610a 2020 2020 2020 2020 7261 6d5b 7469  a.        ram[ti
-000115b0: 6c65 5f61 6464 7220 2d20 3136 3338 343a  le_addr - 16384:
-000115c0: 7469 6c65 5f61 6464 7220 2d20 3136 3338  tile_addr - 1638
-000115d0: 3420 2b20 3820 2a20 7374 6570 3a73 7465  4 + 8 * step:ste
-000115e0: 705d 203d 2074 696c 655f 6461 7461 0a20  p] = tile_data. 
-000115f0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
-00011600: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
-00011610: 2020 2020 7c20 2020 2020 2020 207c 0a20      |        |. 
-00011620: 2020 2020 2020 2020 2020 207c 202a 2a2a             | ***
-00011630: 2a2a 2a2a 7c0a 2020 2020 2020 2020 2020  ****|.          
-00011640: 2020 7c20 2a2a 2a2a 2a2a 2a7c 0a20 2020    | *******|.   
-00011650: 2020 2020 2020 2020 207c 202a 2a20 2020           | **   
-00011660: 2020 7c0a 2020 2020 2020 2020 2020 2020    |.            
-00011670: 7c20 2a2a 2020 2020 207c 0a20 2020 2020  | **     |.     
-00011680: 2020 2020 2020 207c 202a 2a20 202a 2a2a         | **  ***
-00011690: 7c0a 2020 2020 2020 2020 2020 2020 7c20  |.            | 
-000116a0: 2a2a 2020 2a2a 2a7c 0a20 2020 2020 2020  **  ***|.       
-000116b0: 2020 2020 207c 202a 2a20 202a 2a20 7c0a       | **  ** |.
-000116c0: 2020 2020 2020 2020 2020 2020 3237 3438              2748
-000116d0: 332d 3237 3439 372d 3220 3642 3542 2d36  3-27497-2 6B5B-6
-000116e0: 4236 392d 323a 2030 2c31 3237 2c31 3237  B69-2: 0,127,127
-000116f0: 2c39 362c 3936 2c31 3033 2c31 3033 2c31  ,96,96,103,103,1
-00011700: 3032 0a20 2020 2020 2020 2022 2222 0a20  02.        """. 
-00011710: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
-00011720: 745f 736e 6128 7261 6d2c 2065 7870 5f6f  t_sna(ram, exp_o
-00011730: 7574 7075 742c 2027 2d2d 6669 6e64 2d74  utput, '--find-t
-00011740: 696c 6520 7b7d 2c7b 7d2d 7b7d 272e 666f  ile {},{}-{}'.fo
-00011750: 726d 6174 2878 2c20 792c 2073 7465 7029  rmat(x, y, step)
-00011760: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00011770: 6f70 7469 6f6e 5f54 5f77 6974 685f 7374  option_T_with_st
-00011780: 6570 5f72 616e 6765 2873 656c 6629 3a0a  ep_range(self):.
-00011790: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-000117a0: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
-000117b0: 2020 7469 6c65 5f61 6464 7220 3d20 3436    tile_addr = 46
-000117c0: 3938 370a 2020 2020 2020 2020 7469 6c65  987.        tile
-000117d0: 5f64 6174 6120 3d20 5b30 2c20 3235 342c  _data = [0, 254,
-000117e0: 2032 3534 2c20 362c 2036 2c20 3233 302c   254, 6, 6, 230,
-000117f0: 2032 3330 2c20 3130 325d 0a20 2020 2020   230, 102].     
-00011800: 2020 2078 2c20 7920 3d20 3237 2c20 320a     x, y = 27, 2.
-00011810: 2020 2020 2020 2020 7374 6570 203d 2033          step = 3
-00011820: 0a20 2020 2020 2020 2064 665f 6164 6472  .        df_addr
-00011830: 203d 2031 3633 3834 202b 2032 3034 3820   = 16384 + 2048 
-00011840: 2a20 2879 202f 2f20 3829 202b 2033 3220  * (y // 8) + 32 
-00011850: 2a20 2879 2026 2037 2920 2b20 780a 2020  * (y & 7) + x.  
-00011860: 2020 2020 2020 7261 6d5b 6466 5f61 6464        ram[df_add
-00011870: 7220 2d20 3136 3338 343a 6466 5f61 6464  r - 16384:df_add
-00011880: 7220 2d20 3134 3333 363a 3235 365d 203d  r - 14336:256] =
-00011890: 2074 696c 655f 6461 7461 0a20 2020 2020   tile_data.     
-000118a0: 2020 2072 616d 5b74 696c 655f 6164 6472     ram[tile_addr
-000118b0: 202d 2031 3633 3834 3a74 696c 655f 6164   - 16384:tile_ad
-000118c0: 6472 202d 2031 3633 3834 202b 2038 202a  dr - 16384 + 8 *
-000118d0: 2073 7465 703a 7374 6570 5d20 3d20 7469   step:step] = ti
-000118e0: 6c65 5f64 6174 610a 2020 2020 2020 2020  le_data.        
-000118f0: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
-00011900: 0a20 2020 2020 2020 2020 2020 207c 2020  .            |  
-00011910: 2020 2020 2020 7c0a 2020 2020 2020 2020        |.        
-00011920: 2020 2020 7c2a 2a2a 2a2a 2a2a 207c 0a20      |******* |. 
-00011930: 2020 2020 2020 2020 2020 207c 2a2a 2a2a             |****
-00011940: 2a2a 2a20 7c0a 2020 2020 2020 2020 2020  *** |.          
-00011950: 2020 7c20 2020 2020 2a2a 207c 0a20 2020    |     ** |.   
-00011960: 2020 2020 2020 2020 207c 2020 2020 202a           |     *
-00011970: 2a20 7c0a 2020 2020 2020 2020 2020 2020  * |.            
-00011980: 7c2a 2a2a 2020 2a2a 207c 0a20 2020 2020  |***  ** |.     
-00011990: 2020 2020 2020 207c 2a2a 2a20 202a 2a20         |***  ** 
-000119a0: 7c0a 2020 2020 2020 2020 2020 2020 7c20  |.            | 
-000119b0: 2a2a 2020 2a2a 207c 0a20 2020 2020 2020  **  ** |.       
-000119c0: 2020 2020 2034 3639 3837 2d34 3730 3038       46987-47008
-000119d0: 2d33 2042 3738 422d 4237 4130 2d33 3a20  -3 B78B-B7A0-3: 
-000119e0: 302c 3235 342c 3235 342c 362c 362c 3233  0,254,254,6,6,23
-000119f0: 302c 3233 302c 3130 320a 2020 2020 2020  0,230,102.      
-00011a00: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
-00011a10: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
-00011a20: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
-00011a30: 5420 7b7d 2c7b 7d2d 322d 3327 2e66 6f72  T {},{}-2-3'.for
-00011a40: 6d61 7428 782c 2079 2929 0a0a 2020 2020  mat(x, y))..    
-00011a50: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
-00011a60: 545f 7769 7468 5f68 6578 5f73 7465 705f  T_with_hex_step_
-00011a70: 7261 6e67 655f 6c69 6d69 7473 2873 656c  range_limits(sel
-00011a80: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
-00011a90: 3d20 5b30 5d20 2a20 3439 3135 320a 2020  = [0] * 49152.  
-00011aa0: 2020 2020 2020 7469 6c65 5f61 6464 7220        tile_addr 
-00011ab0: 3d20 3531 3133 320a 2020 2020 2020 2020  = 51132.        
-00011ac0: 7469 6c65 5f64 6174 6120 3d20 5b31 3032  tile_data = [102
-00011ad0: 2c20 3130 332c 2031 3033 2c20 3936 2c20  , 103, 103, 96, 
-00011ae0: 3936 2c20 3132 372c 2031 3237 2c20 305d  96, 127, 127, 0]
-00011af0: 0a20 2020 2020 2020 2078 2c20 7920 3d20  .        x, y = 
-00011b00: 3237 2c20 320a 2020 2020 2020 2020 7374  27, 2.        st
-00011b10: 6570 203d 2033 0a20 2020 2020 2020 2064  ep = 3.        d
-00011b20: 665f 6164 6472 203d 2031 3633 3834 202b  f_addr = 16384 +
-00011b30: 2032 3034 3820 2a20 2879 202f 2f20 3829   2048 * (y // 8)
-00011b40: 202b 2033 3220 2a20 2879 2026 2037 2920   + 32 * (y & 7) 
-00011b50: 2b20 780a 2020 2020 2020 2020 7261 6d5b  + x.        ram[
-00011b60: 6466 5f61 6464 7220 2d20 3136 3338 343a  df_addr - 16384:
-00011b70: 6466 5f61 6464 7220 2d20 3134 3333 363a  df_addr - 14336:
-00011b80: 3235 365d 203d 2074 696c 655f 6461 7461  256] = tile_data
-00011b90: 0a20 2020 2020 2020 2072 616d 5b74 696c  .        ram[til
-00011ba0: 655f 6164 6472 202d 2031 3633 3834 3a74  e_addr - 16384:t
-00011bb0: 696c 655f 6164 6472 202d 2031 3633 3834  ile_addr - 16384
-00011bc0: 202b 2038 202a 2073 7465 703a 7374 6570   + 8 * step:step
-00011bd0: 5d20 3d20 7469 6c65 5f64 6174 610a 2020  ] = tile_data.  
-00011be0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00011bf0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-00011c00: 2020 207c 202a 2a20 202a 2a20 7c0a 2020     | **  ** |.  
-00011c10: 2020 2020 2020 2020 2020 7c20 2a2a 2020            | **  
-00011c20: 2a2a 2a7c 0a20 2020 2020 2020 2020 2020  ***|.           
-00011c30: 207c 202a 2a20 202a 2a2a 7c0a 2020 2020   | **  ***|.    
-00011c40: 2020 2020 2020 2020 7c20 2a2a 2020 2020          | **    
-00011c50: 207c 0a20 2020 2020 2020 2020 2020 207c   |.            |
-00011c60: 202a 2a20 2020 2020 7c0a 2020 2020 2020   **     |.      
-00011c70: 2020 2020 2020 7c20 2a2a 2a2a 2a2a 2a7c        | *******|
-00011c80: 0a20 2020 2020 2020 2020 2020 207c 202a  .            | *
-00011c90: 2a2a 2a2a 2a2a 7c0a 2020 2020 2020 2020  ******|.        
-00011ca0: 2020 2020 7c20 2020 2020 2020 207c 0a20      |        |. 
-00011cb0: 2020 2020 2020 2020 2020 2035 3131 3332             51132
-00011cc0: 2d35 3131 3533 2d33 2043 3742 432d 4337  -51153-3 C7BC-C7
-00011cd0: 4431 2d33 3a20 3130 322c 3130 332c 3130  D1-3: 102,103,10
-00011ce0: 332c 3936 2c39 362c 3132 372c 3132 372c  3,96,96,127,127,
-00011cf0: 300a 2020 2020 2020 2020 2222 220a 2020  0.        """.  
-00011d00: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
-00011d10: 5f73 6e61 2872 616d 2c20 6578 705f 6f75  _sna(ram, exp_ou
-00011d20: 7470 7574 2c20 272d 5420 7b7d 2c7b 7d2d  tput, '-T {},{}-
-00011d30: 3078 3032 2d30 7830 3327 2e66 6f72 6d61  0x02-0x03'.forma
-00011d40: 7428 782c 2079 2929 0a0a 2020 2020 6465  t(x, y))..    de
-00011d50: 6620 7465 7374 5f6f 7074 696f 6e5f 6669  f test_option_fi
-00011d60: 6e64 5f74 696c 655f 7769 7468 5f69 6e76  nd_tile_with_inv
-00011d70: 616c 6964 5f63 6f6f 7264 696e 6174 6573  alid_coordinates
-00011d80: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00011d90: 6578 705f 6572 726f 7220 3d20 2749 6e76  exp_error = 'Inv
-00011da0: 616c 6964 2074 696c 6520 636f 6f72 6469  alid tile coordi
-00011db0: 6e61 7465 7327 0a20 2020 2020 2020 2073  nates'.        s
-00011dc0: 656c 662e 5f74 6573 745f 6261 645f 7370  elf._test_bad_sp
-00011dd0: 6563 2827 2d2d 6669 6e64 2d74 696c 6527  ec('--find-tile'
-00011de0: 2c20 2778 2c30 272c 2065 7870 5f65 7272  , 'x,0', exp_err
-00011df0: 6f72 290a 2020 2020 2020 2020 7365 6c66  or).        self
-00011e00: 2e5f 7465 7374 5f62 6164 5f73 7065 6328  ._test_bad_spec(
-00011e10: 272d 5427 2c20 2730 2c79 272c 2065 7870  '-T', '0,y', exp
-00011e20: 5f65 7272 6f72 290a 2020 2020 2020 2020  _error).        
-00011e30: 7365 6c66 2e5f 7465 7374 5f62 6164 5f73  self._test_bad_s
-00011e40: 7065 6328 272d 2d66 696e 642d 7469 6c65  pec('--find-tile
-00011e50: 272c 2027 3f2c 2127 2c20 6578 705f 6572  ', '?,!', exp_er
-00011e60: 726f 7229 0a20 2020 2020 2020 2073 656c  ror).        sel
-00011e70: 662e 5f74 6573 745f 6261 645f 7370 6563  f._test_bad_spec
-00011e80: 2827 2d54 272c 2027 3333 2c31 272c 2065  ('-T', '33,1', e
-00011e90: 7870 5f65 7272 6f72 290a 2020 2020 2020  xp_error).      
-00011ea0: 2020 7365 6c66 2e5f 7465 7374 5f62 6164    self._test_bad
-00011eb0: 5f73 7065 6328 272d 2d66 696e 642d 7469  _spec('--find-ti
-00011ec0: 6c65 272c 2027 322c 3237 272c 2065 7870  le', '2,27', exp
-00011ed0: 5f65 7272 6f72 290a 0a20 2020 2064 6566  _error)..    def
-00011ee0: 2074 6573 745f 6f70 7469 6f6e 5f66 696e   test_option_fin
-00011ef0: 645f 7469 6c65 5f77 6974 685f 696e 7661  d_tile_with_inva
-00011f00: 6c69 645f 7374 6570 2873 656c 6629 3a0a  lid_step(self):.
-00011f10: 2020 2020 2020 2020 6578 705f 6572 726f          exp_erro
-00011f20: 7220 3d20 2749 6e76 616c 6964 2064 6973  r = 'Invalid dis
-00011f30: 7461 6e63 653a 207b 7d27 0a20 2020 2020  tance: {}'.     
-00011f40: 2020 2073 656c 662e 5f74 6573 745f 6261     self._test_ba
-00011f50: 645f 7370 6563 2827 2d2d 6669 6e64 2d74  d_spec('--find-t
-00011f60: 696c 6527 2c20 2732 2c33 2d78 272c 2065  ile', '2,3-x', e
-00011f70: 7870 5f65 7272 6f72 2e66 6f72 6d61 7428  xp_error.format(
-00011f80: 2778 2729 2c20 4661 6c73 6529 0a20 2020  'x'), False).   
-00011f90: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00011fa0: 6261 645f 7370 6563 2827 2d54 272c 2027  bad_spec('-T', '
-00011fb0: 352c 362d 312d 7927 2c20 6578 705f 6572  5,6-1-y', exp_er
-00011fc0: 726f 722e 666f 726d 6174 2827 312d 7927  ror.format('1-y'
-00011fd0: 292c 2046 616c 7365 290a 2020 2020 2020  ), False).      
-00011fe0: 2020 7365 6c66 2e5f 7465 7374 5f62 6164    self._test_bad
-00011ff0: 5f73 7065 6328 272d 2d66 696e 642d 7469  _spec('--find-ti
-00012000: 6c65 272c 2027 382c 392d 7a2d 3527 2c20  le', '8,9-z-5', 
-00012010: 6578 705f 6572 726f 722e 666f 726d 6174  exp_error.format
-00012020: 2827 7a2d 3527 292c 2046 616c 7365 290a  ('z-5'), False).
-00012030: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
-00012040: 7374 5f62 6164 5f73 7065 6328 272d 5427  st_bad_spec('-T'
-00012050: 2c20 2731 312c 3132 2d71 2d3f 272c 2065  , '11,12-q-?', e
-00012060: 7870 5f65 7272 6f72 2e66 6f72 6d61 7428  xp_error.format(
-00012070: 2771 2d3f 2729 2c20 4661 6c73 6529 0a0a  'q-?'), False)..
-00012080: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
-00012090: 696f 6e5f 5628 7365 6c66 293a 0a20 2020  ion_V(self):.   
-000120a0: 2020 2020 2066 6f72 206f 7074 696f 6e20       for option 
-000120b0: 696e 2028 272d 5627 2c20 272d 2d76 6572  in ('-V', '--ver
-000120c0: 7369 6f6e 2729 3a0a 2020 2020 2020 2020  sion'):.        
-000120d0: 2020 2020 6f75 7470 7574 2c20 6572 726f      output, erro
-000120e0: 7220 3d20 7365 6c66 2e72 756e 5f73 6e61  r = self.run_sna
-000120f0: 7069 6e66 6f28 6f70 7469 6f6e 2c20 6361  pinfo(option, ca
-00012100: 7463 685f 6578 6974 3d30 290a 2020 2020  tch_exit=0).    
-00012110: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00012120: 6572 7445 7175 616c 2827 536b 6f6f 6c4b  ertEqual('SkoolK
-00012130: 6974 207b 7d5c 6e27 2e66 6f72 6d61 7428  it {}\n'.format(
-00012140: 5645 5253 494f 4e29 2c20 6f75 7470 7574  VERSION), output
-00012150: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00012160: 6f70 7469 6f6e 5f77 5f77 6974 685f 7369  option_w_with_si
-00012170: 6e67 6c65 5f61 6464 7265 7373 2873 656c  ngle_address(sel
-00012180: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
-00012190: 3d20 5b30 5d20 2a20 3439 3135 320a 2020  = [0] * 49152.  
-000121a0: 2020 2020 2020 6164 6472 6573 7320 3d20        address = 
-000121b0: 3436 3733 310a 2020 2020 2020 2020 7261  46731.        ra
-000121c0: 6d5b 6164 6472 6573 7320 2d20 3136 3338  m[address - 1638
-000121d0: 343a 6164 6472 6573 7320 2d20 3136 3338  4:address - 1638
-000121e0: 325d 203d 205b 3437 2c20 3130 5d0a 2020  2] = [47, 10].  
-000121f0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00012200: 203d 2027 3436 3733 3120 4236 3842 3a20   = '46731 B68B: 
-00012210: 2032 3630 3720 2030 4132 4627 0a20 2020   2607  0A2F'.   
-00012220: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
-00012230: 736e 6128 7261 6d2c 2065 7870 5f6f 7574  sna(ram, exp_out
-00012240: 7075 742c 2027 2d77 207b 7d27 2e66 6f72  put, '-w {}'.for
-00012250: 6d61 7428 6164 6472 6573 7329 290a 0a20  mat(address)).. 
-00012260: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-00012270: 6f6e 5f77 6f72 645f 7769 7468 5f61 6464  on_word_with_add
-00012280: 7265 7373 5f72 616e 6765 2873 656c 6629  ress_range(self)
-00012290: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
-000122a0: 5b30 5d20 2a20 3439 3135 320a 2020 2020  [0] * 49152.    
-000122b0: 2020 2020 6164 6472 6573 7331 203d 2035      address1 = 5
-000122c0: 3731 3136 0a20 2020 2020 2020 2061 6464  7116.        add
-000122d0: 7265 7373 3220 3d20 3537 3132 320a 2020  ress2 = 57122.  
-000122e0: 2020 2020 2020 7261 6d5b 6164 6472 6573        ram[addres
-000122f0: 7331 202d 2031 3633 3834 3a61 6464 7265  s1 - 16384:addre
-00012300: 7373 3220 2d31 3633 3832 5d20 3d20 5b32  ss2 -16382] = [2
-00012310: 372c 2034 352c 2031 3332 2c20 3139 2c20  7, 45, 132, 19, 
-00012320: 3138 2c20 332c 2032 332c 2030 5d0a 2020  18, 3, 23, 0].  
-00012330: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00012340: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-00012350: 2020 2035 3731 3136 2044 4631 433a 2031     57116 DF1C: 1
-00012360: 3135 3437 2020 3244 3142 0a20 2020 2020  1547  2D1B.     
-00012370: 2020 2020 2020 2035 3731 3138 2044 4631         57118 DF1
-00012380: 453a 2020 3439 3936 2020 3133 3834 0a20  E:  4996  1384. 
-00012390: 2020 2020 2020 2020 2020 2035 3731 3230             57120
-000123a0: 2044 4632 303a 2020 2037 3836 2020 3033   DF20:   786  03
-000123b0: 3132 0a20 2020 2020 2020 2020 2020 2035  12.            5
-000123c0: 3731 3232 2044 4632 323a 2020 2020 3233  7122 DF22:    23
-000123d0: 2020 3030 3137 0a20 2020 2020 2020 2022    0017.        "
-000123e0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-000123f0: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
-00012400: 7870 5f6f 7574 7075 742c 2027 2d2d 776f  xp_output, '--wo
-00012410: 7264 207b 7d2d 7b7d 272e 666f 726d 6174  rd {}-{}'.format
-00012420: 2861 6464 7265 7373 312c 2061 6464 7265  (address1, addre
-00012430: 7373 3229 290a 0a20 2020 2064 6566 2074  ss2))..    def t
-00012440: 6573 745f 6f70 7469 6f6e 5f77 5f77 6974  est_option_w_wit
-00012450: 685f 6164 6472 6573 735f 7261 6e67 655f  h_address_range_
-00012460: 616e 645f 7374 6570 2873 656c 6629 3a0a  and_step(self):.
-00012470: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-00012480: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
-00012490: 2020 6164 6472 6573 7331 203d 2033 3638    address1 = 368
-000124a0: 3734 0a20 2020 2020 2020 2061 6464 7265  74.        addre
-000124b0: 7373 3220 3d20 3336 3838 300a 2020 2020  ss2 = 36880.    
-000124c0: 2020 2020 7374 6570 203d 2033 0a20 2020      step = 3.   
-000124d0: 2020 2020 2072 616d 5b61 6464 7265 7373       ram[address
-000124e0: 3120 2d20 3136 3338 343a 6164 6472 6573  1 - 16384:addres
-000124f0: 7332 202d 3136 3338 325d 203d 205b 312c  s2 -16382] = [1,
-00012500: 2030 2c20 302c 2032 3135 2c20 322c 2030   0, 0, 215, 2, 0
-00012510: 2c20 372c 2031 3133 5d0a 2020 2020 2020  , 7, 113].      
-00012520: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
-00012530: 2222 0a20 2020 2020 2020 2020 2020 2033  "".            3
-00012540: 3638 3734 2039 3030 413a 2020 2020 2031  6874 900A:     1
-00012550: 2020 3030 3031 0a20 2020 2020 2020 2020    0001.         
-00012560: 2020 2033 3638 3737 2039 3030 443a 2020     36877 900D:  
-00012570: 2037 3237 2020 3032 4437 0a20 2020 2020   727  02D7.     
-00012580: 2020 2020 2020 2033 3638 3830 2039 3031         36880 901
-00012590: 303a 2032 3839 3335 2020 3731 3037 0a20  0: 28935  7107. 
-000125a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000125b0: 2020 2073 656c 662e 5f74 6573 745f 736e     self._test_sn
-000125c0: 6128 7261 6d2c 2065 7870 5f6f 7574 7075  a(ram, exp_outpu
-000125d0: 742c 2027 2d77 207b 7d2d 7b7d 2d7b 7d27  t, '-w {}-{}-{}'
-000125e0: 2e66 6f72 6d61 7428 6164 6472 6573 7331  .format(address1
-000125f0: 2c20 6164 6472 6573 7332 2c20 7374 6570  , address2, step
-00012600: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
-00012610: 5f6f 7074 696f 6e5f 775f 7769 7468 5f68  _option_w_with_h
-00012620: 6578 6164 6563 696d 616c 5f76 616c 7565  exadecimal_value
-00012630: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-00012640: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
-00012650: 3532 0a20 2020 2020 2020 2061 6464 7265  52.        addre
-00012660: 7373 3120 3d20 3078 3930 3061 0a20 2020  ss1 = 0x900a.   
-00012670: 2020 2020 2061 6464 7265 7373 3220 3d20       address2 = 
-00012680: 3078 3930 3130 0a20 2020 2020 2020 2073  0x9010.        s
-00012690: 7465 7020 3d20 3078 3033 0a20 2020 2020  tep = 0x03.     
-000126a0: 2020 2072 616d 5b61 6464 7265 7373 3120     ram[address1 
-000126b0: 2d20 3136 3338 343a 6164 6472 6573 7332  - 16384:address2
-000126c0: 202d 3136 3338 325d 203d 205b 312c 2030   -16382] = [1, 0
-000126d0: 2c20 302c 2032 3135 2c20 322c 2030 2c20  , 0, 215, 2, 0, 
-000126e0: 372c 2031 3133 5d0a 2020 2020 2020 2020  7, 113].        
-000126f0: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
-00012700: 0a20 2020 2020 2020 2020 2020 2033 3638  .            368
-00012710: 3734 2039 3030 413a 2020 2020 2031 2020  74 900A:     1  
-00012720: 3030 3031 0a20 2020 2020 2020 2020 2020  0001.           
-00012730: 2033 3638 3737 2039 3030 443a 2020 2037   36877 900D:   7
-00012740: 3237 2020 3032 4437 0a20 2020 2020 2020  27  02D7.       
-00012750: 2020 2020 2033 3638 3830 2039 3031 303a       36880 9010:
-00012760: 2032 3839 3335 2020 3731 3037 0a20 2020   28935  7107.   
-00012770: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00012780: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
-00012790: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
-000127a0: 2027 2d77 2024 7b3a 3034 587d 2d24 7b3a   '-w ${:04X}-${:
-000127b0: 3034 787d 2d24 7b3a 587d 272e 666f 726d  04x}-${:X}'.form
-000127c0: 6174 2861 6464 7265 7373 312c 2061 6464  at(address1, add
-000127d0: 7265 7373 322c 2073 7465 7029 290a 0a20  ress2, step)).. 
-000127e0: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-000127f0: 6f6e 5f77 5f77 6974 685f 3078 5f68 6578  on_w_with_0x_hex
-00012800: 6164 6563 696d 616c 5f76 616c 7565 7328  adecimal_values(
-00012810: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00012820: 616d 203d 205b 305d 202a 2034 3931 3532  am = [0] * 49152
-00012830: 0a20 2020 2020 2020 2061 6464 7265 7373  .        address
-00012840: 3120 3d20 3078 3930 3061 0a20 2020 2020  1 = 0x900a.     
-00012850: 2020 2061 6464 7265 7373 3220 3d20 3078     address2 = 0x
-00012860: 3930 3130 0a20 2020 2020 2020 2073 7465  9010.        ste
-00012870: 7020 3d20 3078 3033 0a20 2020 2020 2020  p = 0x03.       
-00012880: 2072 616d 5b61 6464 7265 7373 3120 2d20   ram[address1 - 
-00012890: 3136 3338 343a 6164 6472 6573 7332 202d  16384:address2 -
-000128a0: 3136 3338 325d 203d 205b 312c 2030 2c20  16382] = [1, 0, 
-000128b0: 302c 2032 3135 2c20 322c 2030 2c20 372c  0, 215, 2, 0, 7,
-000128c0: 2031 3133 5d0a 2020 2020 2020 2020 6578   113].        ex
-000128d0: 705f 6f75 7470 7574 203d 2022 2222 0a20  p_output = """. 
-000128e0: 2020 2020 2020 2020 2020 2033 3638 3734             36874
-000128f0: 2039 3030 413a 2020 2020 2031 2020 3030   900A:     1  00
-00012900: 3031 0a20 2020 2020 2020 2020 2020 2033  01.            3
-00012910: 3638 3737 2039 3030 443a 2020 2037 3237  6877 900D:   727
-00012920: 2020 3032 4437 0a20 2020 2020 2020 2020    02D7.         
-00012930: 2020 2033 3638 3830 2039 3031 303a 2032     36880 9010: 2
-00012940: 3839 3335 2020 3731 3037 0a20 2020 2020  8935  7107.     
-00012950: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-00012960: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
-00012970: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
-00012980: 2d77 2030 787b 3a30 3458 7d2d 3078 7b3a  -w 0x{:04X}-0x{:
-00012990: 3034 787d 2d30 787b 3a58 7d27 2e66 6f72  04x}-0x{:X}'.for
-000129a0: 6d61 7428 6164 6472 6573 7331 2c20 6164  mat(address1, ad
-000129b0: 6472 6573 7332 2c20 7374 6570 2929 0a0a  dress2, step))..
-000129c0: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
-000129d0: 696f 6e5f 776f 7264 5f6d 756c 7469 706c  ion_word_multipl
-000129e0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-000129f0: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
-00012a00: 3532 0a20 2020 2020 2020 206f 7074 696f  52.        optio
-00012a10: 6e73 203d 205b 5d0a 2020 2020 2020 2020  ns = [].        
-00012a20: 6164 6472 6573 7365 7320 3d20 2833 3731  addresses = (371
-00012a30: 3632 2c20 3432 3137 342c 2035 3631 3138  62, 42174, 56118
-00012a40: 290a 2020 2020 2020 2020 666f 7220 6120  ).        for a 
-00012a50: 696e 2061 6464 7265 7373 6573 3a0a 2020  in addresses:.  
-00012a60: 2020 2020 2020 2020 2020 7261 6d5b 6120            ram[a 
-00012a70: 2d20 3136 3338 343a 6120 2d20 3136 3338  - 16384:a - 1638
-00012a80: 325d 203d 205b 6120 2f2f 2032 3536 2c20  2] = [a // 256, 
-00012a90: 6120 2520 3235 365d 0a20 2020 2020 2020  a % 256].       
-00012aa0: 2020 2020 206f 7074 696f 6e73 2e61 7070       options.app
-00012ab0: 656e 6428 272d 2d77 6f72 6420 7b7d 272e  end('--word {}'.
-00012ac0: 666f 726d 6174 2861 2929 0a20 2020 2020  format(a)).     
-00012ad0: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
-00012ae0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
-00012af0: 3337 3136 3220 3931 3241 3a20 3130 3839  37162 912A: 1089
-00012b00: 3720 2032 4139 310a 2020 2020 2020 2020  7  2A91.        
-00012b10: 2020 2020 3432 3137 3420 4134 4245 3a20      42174 A4BE: 
-00012b20: 3438 3830 3420 2042 4541 340a 2020 2020  48804  BEA4.    
-00012b30: 2020 2020 2020 2020 3536 3131 3820 4442          56118 DB
-00012b40: 3336 3a20 3134 3034 3320 2033 3644 420a  36: 14043  36DB.
-00012b50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00012b60: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-00012b70: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-00012b80: 7574 2c20 2720 272e 6a6f 696e 286f 7074  ut, ' '.join(opt
-00012b90: 696f 6e73 2929 0a0a 2020 2020 6465 6620  ions))..    def 
-00012ba0: 7465 7374 5f6f 7074 696f 6e5f 775f 7769  test_option_w_wi
-00012bb0: 7468 5f61 6464 7265 7373 6573 5f62 656c  th_addresses_bel
-00012bc0: 6f77 5f31 3030 3030 2873 656c 6629 3a0a  ow_10000(self):.
-00012bd0: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
-00012be0: 5d20 2a20 3130 3030 320a 2020 2020 2020  ] * 10002.      
-00012bf0: 2020 7261 6d5b 313a 335d 203d 205b 312c    ram[1:3] = [1,
-00012c00: 2031 5d0a 2020 2020 2020 2020 7261 6d5b   1].        ram[
-00012c10: 3131 3a31 335d 203d 205b 322c 2032 5d0a  11:13] = [2, 2].
-00012c20: 2020 2020 2020 2020 7261 6d5b 3939 393a          ram[999:
-00012c30: 3130 3031 5d20 3d20 5b33 2c20 335d 0a20  1001] = [3, 3]. 
-00012c40: 2020 2020 2020 2072 616d 5b39 3939 393a         ram[9999:
-00012c50: 3130 3030 315d 203d 205b 342c 2034 5d0a  10001] = [4, 4].
-00012c60: 2020 2020 2020 2020 7261 6d5b 3130 3030          ram[1000
-00012c70: 313a 3130 3030 335d 203d 205b 352c 2035  1:10003] = [5, 5
-00012c80: 5d0a 2020 2020 2020 2020 6578 705f 6f75  ].        exp_ou
-00012c90: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
-00012ca0: 2020 2020 2020 2020 2020 2031 2030 3030             1 000
-00012cb0: 313a 2020 2032 3537 2020 3031 3031 0a20  1:   257  0101. 
-00012cc0: 2020 2020 2020 2020 2020 2020 2020 3131                11
-00012cd0: 2030 3030 423a 2020 2035 3134 2020 3032   000B:   514  02
-00012ce0: 3032 0a20 2020 2020 2020 2020 2020 2020  02.             
-00012cf0: 2039 3939 2030 3345 373a 2020 2037 3731   999 03E7:   771
-00012d00: 2020 3033 3033 0a20 2020 2020 2020 2020    0303.         
-00012d10: 2020 2020 3939 3939 2032 3730 463a 2020      9999 270F:  
-00012d20: 3130 3238 2020 3034 3034 0a20 2020 2020  1028  0404.     
-00012d30: 2020 2020 2020 2031 3030 3031 2032 3731         10001 271
-00012d40: 313a 2020 3132 3835 2020 3035 3035 0a20  1:  1285  0505. 
-00012d50: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00012d60: 2020 2073 656c 662e 5f74 6573 745f 6269     self._test_bi
-00012d70: 6e28 7261 6d2c 2065 7870 5f6f 7574 7075  n(ram, exp_outpu
-00012d80: 742c 2027 2d6f 2030 202d 7720 3120 2d77  t, '-o 0 -w 1 -w
-00012d90: 2031 3120 2d77 2039 3939 202d 7720 3939   11 -w 999 -w 99
-00012da0: 3939 202d 7720 3130 3030 3127 290a 0a20  99 -w 10001').. 
-00012db0: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
-00012dc0: 6f6e 5f77 6f72 645f 7769 7468 5f69 6e76  on_word_with_inv
-00012dd0: 616c 6964 5f61 6464 7265 7373 5f72 616e  alid_address_ran
-00012de0: 6765 2873 656c 6629 3a0a 2020 2020 2020  ge(self):.      
-00012df0: 2020 6578 705f 6572 726f 7220 3d20 2749    exp_error = 'I
-00012e00: 6e76 616c 6964 2061 6464 7265 7373 2072  nvalid address r
-00012e10: 616e 6765 270a 2020 2020 2020 2020 7365  ange'.        se
-00012e20: 6c66 2e5f 7465 7374 5f62 6164 5f73 7065  lf._test_bad_spe
-00012e30: 6328 272d 2d77 6f72 6427 2c20 2758 272c  c('--word', 'X',
-00012e40: 2065 7870 5f65 7272 6f72 290a 2020 2020   exp_error).    
-00012e50: 2020 2020 7365 6c66 2e5f 7465 7374 5f62      self._test_b
-00012e60: 6164 5f73 7065 6328 272d 7727 2c20 2733  ad_spec('-w', '3
-00012e70: 3237 3638 2d3f 272c 2065 7870 5f65 7272  2768-?', exp_err
-00012e80: 6f72 290a 2020 2020 2020 2020 7365 6c66  or).        self
-00012e90: 2e5f 7465 7374 5f62 6164 5f73 7065 6328  ._test_bad_spec(
-00012ea0: 272d 2d77 6f72 6427 2c20 2733 3237 3638  '--word', '32768
-00012eb0: 2d33 3238 3638 2d71 272c 2065 7870 5f65  -32868-q', exp_e
-00012ec0: 7272 6f72 290a 2020 2020 2020 2020 7365  rror).        se
-00012ed0: 6c66 2e5f 7465 7374 5f62 6164 5f73 7065  lf._test_bad_spe
-00012ee0: 6328 272d 7727 2c20 2733 3237 3638 2d33  c('-w', '32768-3
-00012ef0: 3238 3638 2d32 2d33 272c 2065 7870 5f65  2868-2-3', exp_e
-00012f00: 7272 6f72 290a 0a20 2020 2064 6566 2074  rror)..    def t
-00012f10: 6573 745f 636f 6e66 6967 5f45 6467 6541  est_config_EdgeA
-00012f20: 7474 7269 6275 7465 7328 7365 6c66 293a  ttributes(self):
-00012f30: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
-00012f40: 3234 2c20 302c 2032 3031 5d20 2b20 5b30  24, 0, 201] + [0
-00012f50: 5d20 2a20 3439 3134 390a 2020 2020 2020  ] * 49149.      
-00012f60: 2020 6374 6c20 3d20 2222 220a 2020 2020    ctl = """.    
-00012f70: 2020 2020 2020 2020 4020 3136 3338 3420          @ 16384 
-00012f80: 6c61 6265 6c3d 5354 4152 5449 4e47 0a20  label=STARTING. 
-00012f90: 2020 2020 2020 2020 2020 2063 2031 3633             c 163
-00012fa0: 3834 0a20 2020 2020 2020 2020 2020 2040  84.            @
-00012fb0: 2031 3633 3836 206c 6162 656c 3d44 4f4e   16386 label=DON
-00012fc0: 450a 2020 2020 2020 2020 2020 2020 6320  E.            c 
-00012fd0: 3136 3338 360a 2020 2020 2020 2020 2020  16386.          
-00012fe0: 2020 6920 3136 3338 370a 2020 2020 2020    i 16387.      
-00012ff0: 2020 2222 220a 2020 2020 2020 2020 6578    """.        ex
-00013000: 705f 6f75 7470 7574 203d 2072 2222 220a  p_output = r""".
-00013010: 2020 2020 2020 2020 2020 2020 2f2f 2055              // U
-00013020: 6e63 6f6e 6e65 6374 6564 3a20 4e6f 6e65  nconnected: None
-00013030: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
-00013040: 4f72 7068 616e 733a 2031 3633 3834 0a20  Orphans: 16384. 
-00013050: 2020 2020 2020 2020 2020 202f 2f20 4669             // Fi
-00013060: 7273 7420 696e 7374 7275 6374 696f 6e20  rst instruction 
-00013070: 6e6f 7420 7573 6564 3a20 4e6f 6e65 0a20  not used: None. 
-00013080: 2020 2020 2020 2020 2020 2064 6967 7261             digra
-00013090: 7068 207b 0a20 2020 2020 2020 2020 2020  ph {.           
-000130a0: 206e 6f64 6520 5b73 6861 7065 3d72 6563   node [shape=rec
-000130b0: 6f72 645d 0a20 2020 2020 2020 2020 2020  ord].           
-000130c0: 2065 6467 6520 5b61 7272 6f77 6865 6164   edge [arrowhead
-000130d0: 3d6f 7065 6e5d 0a20 2020 2020 2020 2020  =open].         
-000130e0: 2020 2031 3633 3834 205b 6c61 6265 6c3d     16384 [label=
-000130f0: 2231 3633 3834 2034 3030 305c 6e53 5441  "16384 4000\nSTA
-00013100: 5254 494e 4722 5d0a 2020 2020 2020 2020  RTING"].        
-00013110: 2020 2020 3136 3338 3420 2d3e 207b 3136      16384 -> {16
-00013120: 3338 367d 0a20 2020 2020 2020 2020 2020  386}.           
-00013130: 2031 3633 3836 205b 6c61 6265 6c3d 2231   16386 [label="1
-00013140: 3633 3836 2034 3030 325c 6e44 4f4e 4522  6386 4002\nDONE"
-00013150: 5d0a 2020 2020 2020 2020 2020 2020 7d0a  ].            }.
-00013160: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00013170: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-00013180: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-00013190: 7574 2c20 272d 6720 2d49 2045 6467 6541  ut, '-g -I EdgeA
-000131a0: 7474 7269 6275 7465 733d 6172 726f 7768  ttributes=arrowh
-000131b0: 6561 643d 6f70 656e 272c 2063 746c 290a  ead=open', ctl).
-000131c0: 0a20 2020 2064 6566 2074 6573 745f 636f  .    def test_co
-000131d0: 6e66 6967 5f47 7261 7068 4174 7472 6962  nfig_GraphAttrib
-000131e0: 7574 6573 2873 656c 6629 3a0a 2020 2020  utes(self):.    
-000131f0: 2020 2020 7261 6d20 3d20 5b32 342c 2030      ram = [24, 0
-00013200: 2c20 3230 315d 202b 205b 305d 202a 2034  , 201] + [0] * 4
-00013210: 3931 3439 0a20 2020 2020 2020 2063 746c  9149.        ctl
-00013220: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-00013230: 2020 2040 2031 3633 3834 206c 6162 656c     @ 16384 label
-00013240: 3d53 5441 5254 494e 470a 2020 2020 2020  =STARTING.      
-00013250: 2020 2020 2020 6320 3136 3338 340a 2020        c 16384.  
-00013260: 2020 2020 2020 2020 2020 4020 3136 3338            @ 1638
-00013270: 3620 6c61 6265 6c3d 444f 4e45 0a20 2020  6 label=DONE.   
-00013280: 2020 2020 2020 2020 2063 2031 3633 3836           c 16386
-00013290: 0a20 2020 2020 2020 2020 2020 2069 2031  .            i 1
-000132a0: 3633 3837 0a20 2020 2020 2020 2022 2222  6387.        """
-000132b0: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
-000132c0: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
-000132d0: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
-000132e0: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
-000132f0: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
-00013300: 6e73 3a20 3136 3338 340a 2020 2020 2020  ns: 16384.      
-00013310: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
-00013320: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
-00013330: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
-00013340: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
-00013350: 2020 2020 2020 2020 2020 2020 6772 6170              grap
-00013360: 6820 5b62 6763 6f6c 6f72 3d62 6973 7175  h [bgcolor=bisqu
-00013370: 655d 0a20 2020 2020 2020 2020 2020 206e  e].            n
-00013380: 6f64 6520 5b73 6861 7065 3d72 6563 6f72  ode [shape=recor
-00013390: 645d 0a20 2020 2020 2020 2020 2020 2031  d].            1
-000133a0: 3633 3834 205b 6c61 6265 6c3d 2231 3633  6384 [label="163
-000133b0: 3834 2034 3030 305c 6e53 5441 5254 494e  84 4000\nSTARTIN
-000133c0: 4722 5d0a 2020 2020 2020 2020 2020 2020  G"].            
-000133d0: 3136 3338 3420 2d3e 207b 3136 3338 367d  16384 -> {16386}
-000133e0: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
-000133f0: 3836 205b 6c61 6265 6c3d 2231 3633 3836  86 [label="16386
-00013400: 2034 3030 325c 6e44 4f4e 4522 5d0a 2020   4002\nDONE"].  
-00013410: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00013420: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00013430: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
-00013440: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
-00013450: 272d 6720 2d49 2047 7261 7068 4174 7472  '-g -I GraphAttr
-00013460: 6962 7574 6573 3d62 6763 6f6c 6f72 3d62  ibutes=bgcolor=b
-00013470: 6973 7175 6527 2c20 6374 6c29 0a0a 2020  isque', ctl)..  
-00013480: 2020 6465 6620 7465 7374 5f63 6f6e 6669    def test_confi
-00013490: 675f 4e6f 6465 4174 7472 6962 7574 6573  g_NodeAttributes
-000134a0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000134b0: 7261 6d20 3d20 5b31 3935 2c20 332c 2036  ram = [195, 3, 6
-000134c0: 342c 2032 3031 5d20 2b20 5b30 5d20 2a20  4, 201] + [0] * 
-000134d0: 3439 3134 380a 2020 2020 2020 2020 6374  49148.        ct
-000134e0: 6c20 3d20 2222 220a 2020 2020 2020 2020  l = """.        
-000134f0: 2020 2020 4020 3136 3338 3420 6c61 6265      @ 16384 labe
-00013500: 6c3d 5354 4152 540a 2020 2020 2020 2020  l=START.        
-00013510: 2020 2020 6320 3136 3338 340a 2020 2020      c 16384.    
-00013520: 2020 2020 2020 2020 4020 3136 3338 3720          @ 16387 
-00013530: 6c61 6265 6c3d 454e 440a 2020 2020 2020  label=END.      
-00013540: 2020 2020 2020 6320 3136 3338 370a 2020        c 16387.  
-00013550: 2020 2020 2020 2020 2020 6920 3136 3338            i 1638
-00013560: 380a 2020 2020 2020 2020 2222 220a 2020  8.        """.  
-00013570: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-00013580: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
-00013590: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
-000135a0: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
-000135b0: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
-000135c0: 2031 3633 3834 0a20 2020 2020 2020 2020   16384.         
-000135d0: 2020 202f 2f20 4669 7273 7420 696e 7374     // First inst
-000135e0: 7275 6374 696f 6e20 6e6f 7420 7573 6564  ruction not used
-000135f0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
-00013600: 2020 2064 6967 7261 7068 207b 0a20 2020     digraph {.   
-00013610: 2020 2020 2020 2020 206e 6f64 6520 5b73           node [s
-00013620: 6861 7065 3d62 6f78 5d0a 2020 2020 2020  hape=box].      
-00013630: 2020 2020 2020 3136 3338 3420 5b6c 6162        16384 [lab
-00013640: 656c 3d22 3136 3338 3420 3430 3030 5c6e  el="16384 4000\n
-00013650: 5354 4152 5422 5d0a 2020 2020 2020 2020  START"].        
-00013660: 2020 2020 3136 3338 3420 2d3e 207b 3136      16384 -> {16
-00013670: 3338 377d 0a20 2020 2020 2020 2020 2020  387}.           
-00013680: 2031 3633 3837 205b 6c61 6265 6c3d 2231   16387 [label="1
-00013690: 3633 3837 2034 3030 335c 6e45 4e44 225d  6387 4003\nEND"]
-000136a0: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
-000136b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000136c0: 2020 2073 656c 662e 5f74 6573 745f 736e     self._test_sn
-000136d0: 6128 7261 6d2c 2065 7870 5f6f 7574 7075  a(ram, exp_outpu
-000136e0: 742c 2027 2d67 202d 4920 4e6f 6465 4174  t, '-g -I NodeAt
-000136f0: 7472 6962 7574 6573 3d73 6861 7065 3d62  tributes=shape=b
-00013700: 6f78 272c 2063 746c 290a 0a20 2020 2064  ox', ctl)..    d
-00013710: 6566 2074 6573 745f 636f 6e66 6967 5f4e  ef test_config_N
-00013720: 6f64 6541 7474 7269 6275 7465 735f 626c  odeAttributes_bl
-00013730: 616e 6b28 7365 6c66 293a 0a20 2020 2020  ank(self):.     
-00013740: 2020 2072 616d 203d 205b 3139 352c 2033     ram = [195, 3
-00013750: 2c20 3634 2c20 3230 315d 202b 205b 305d  , 64, 201] + [0]
-00013760: 202a 2034 3931 3438 0a20 2020 2020 2020   * 49148.       
-00013770: 2063 746c 203d 2022 2222 0a20 2020 2020   ctl = """.     
-00013780: 2020 2020 2020 2040 2031 3633 3834 206c         @ 16384 l
-00013790: 6162 656c 3d53 5441 5254 0a20 2020 2020  abel=START.     
-000137a0: 2020 2020 2020 2063 2031 3633 3834 0a20         c 16384. 
-000137b0: 2020 2020 2020 2020 2020 2040 2031 3633             @ 163
-000137c0: 3837 206c 6162 656c 3d45 4e44 0a20 2020  87 label=END.   
-000137d0: 2020 2020 2020 2020 2063 2031 3633 3837           c 16387
-000137e0: 0a20 2020 2020 2020 2020 2020 2069 2031  .            i 1
-000137f0: 3633 3838 0a20 2020 2020 2020 2022 2222  6388.        """
-00013800: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
-00013810: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
-00013820: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
-00013830: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
-00013840: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
-00013850: 6e73 3a20 3136 3338 340a 2020 2020 2020  ns: 16384.      
-00013860: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
-00013870: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
-00013880: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
-00013890: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
-000138a0: 2020 2020 2020 2020 2020 2020 3136 3338              1638
-000138b0: 3420 5b6c 6162 656c 3d22 3136 3338 3420  4 [label="16384 
-000138c0: 3430 3030 5c6e 5354 4152 5422 5d0a 2020  4000\nSTART"].  
-000138d0: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
-000138e0: 2d3e 207b 3136 3338 377d 0a20 2020 2020  -> {16387}.     
-000138f0: 2020 2020 2020 2031 3633 3837 205b 6c61         16387 [la
-00013900: 6265 6c3d 2231 3633 3837 2034 3030 335c  bel="16387 4003\
-00013910: 6e45 4e44 225d 0a20 2020 2020 2020 2020  nEND"].         
-00013920: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
-00013930: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
-00013940: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
-00013950: 5f6f 7574 7075 742c 2027 2d67 202d 4920  _output, '-g -I 
-00013960: 4e6f 6465 4174 7472 6962 7574 6573 3d27  NodeAttributes='
-00013970: 2c20 6374 6c29 0a0a 2020 2020 6465 6620  , ctl)..    def 
-00013980: 7465 7374 5f63 6f6e 6669 675f 4e6f 6465  test_config_Node
-00013990: 4964 2873 656c 6629 3a0a 2020 2020 2020  Id(self):.      
-000139a0: 2020 7261 6d20 3d20 5b31 3935 2c20 332c    ram = [195, 3,
-000139b0: 2036 342c 2032 3031 5d20 2b20 5b30 5d20   64, 201] + [0] 
-000139c0: 2a20 3439 3134 380a 2020 2020 2020 2020  * 49148.        
-000139d0: 6374 6c20 3d20 2222 220a 2020 2020 2020  ctl = """.      
-000139e0: 2020 2020 2020 4020 3136 3338 3420 6c61        @ 16384 la
-000139f0: 6265 6c3d 5354 4152 540a 2020 2020 2020  bel=START.      
-00013a00: 2020 2020 2020 6320 3136 3338 340a 2020        c 16384.  
-00013a10: 2020 2020 2020 2020 2020 4020 3136 3338            @ 1638
-00013a20: 3720 6c61 6265 6c3d 454e 440a 2020 2020  7 label=END.    
-00013a30: 2020 2020 2020 2020 6320 3136 3338 370a          c 16387.
-00013a40: 2020 2020 2020 2020 2020 2020 6920 3136              i 16
-00013a50: 3338 380a 2020 2020 2020 2020 2222 220a  388.        """.
-00013a60: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
-00013a70: 7574 203d 2072 2222 220a 2020 2020 2020  ut = r""".      
-00013a80: 2020 2020 2020 2f2f 2055 6e63 6f6e 6e65        // Unconne
-00013a90: 6374 6564 3a20 4e6f 6e65 0a20 2020 2020  cted: None.     
-00013aa0: 2020 2020 2020 202f 2f20 4f72 7068 616e         // Orphan
-00013ab0: 733a 2053 5441 5254 0a20 2020 2020 2020  s: START.       
-00013ac0: 2020 2020 202f 2f20 4669 7273 7420 696e       // First in
-00013ad0: 7374 7275 6374 696f 6e20 6e6f 7420 7573  struction not us
-00013ae0: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
-00013af0: 2020 2020 2064 6967 7261 7068 207b 0a20       digraph {. 
-00013b00: 2020 2020 2020 2020 2020 206e 6f64 6520             node 
-00013b10: 5b73 6861 7065 3d72 6563 6f72 645d 0a20  [shape=record]. 
-00013b20: 2020 2020 2020 2020 2020 2053 5441 5254             START
-00013b30: 205b 6c61 6265 6c3d 2231 3633 3834 2034   [label="16384 4
-00013b40: 3030 305c 6e53 5441 5254 225d 0a20 2020  000\nSTART"].   
-00013b50: 2020 2020 2020 2020 2053 5441 5254 202d           START -
-00013b60: 3e20 7b45 4e44 7d0a 2020 2020 2020 2020  > {END}.        
-00013b70: 2020 2020 454e 4420 5b6c 6162 656c 3d22      END [label="
-00013b80: 3136 3338 3720 3430 3033 5c6e 454e 4422  16387 4003\nEND"
-00013b90: 5d0a 2020 2020 2020 2020 2020 2020 7d0a  ].            }.
-00013ba0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00013bb0: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
-00013bc0: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
-00013bd0: 7574 2c20 272d 6720 2d49 204e 6f64 6549  ut, '-g -I NodeI
-00013be0: 643d 7b6c 6162 656c 7d27 2c20 6374 6c29  d={label}', ctl)
-00013bf0: 0a0a 2020 2020 6465 6620 7465 7374 5f63  ..    def test_c
-00013c00: 6f6e 6669 675f 4e6f 6465 4c61 6265 6c28  onfig_NodeLabel(
-00013c10: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00013c20: 616d 203d 205b 3139 352c 2033 2c20 3634  am = [195, 3, 64
-00013c30: 2c20 3230 315d 202b 205b 305d 202a 2034  , 201] + [0] * 4
-00013c40: 3931 3438 0a20 2020 2020 2020 2063 746c  9148.        ctl
-00013c50: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-00013c60: 2020 2040 2031 3633 3834 206c 6162 656c     @ 16384 label
-00013c70: 3d53 5441 5254 0a20 2020 2020 2020 2020  =START.         
-00013c80: 2020 2063 2031 3633 3834 0a20 2020 2020     c 16384.     
-00013c90: 2020 2020 2020 2040 2031 3633 3837 206c         @ 16387 l
-00013ca0: 6162 656c 3d45 4e44 0a20 2020 2020 2020  abel=END.       
-00013cb0: 2020 2020 2063 2031 3633 3837 0a20 2020       c 16387.   
-00013cc0: 2020 2020 2020 2020 2069 2031 3633 3838           i 16388
-00013cd0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00013ce0: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
-00013cf0: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
-00013d00: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
-00013d10: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
-00013d20: 2020 202f 2f20 4f72 7068 616e 733a 2031     // Orphans: 1
-00013d30: 3633 3834 0a20 2020 2020 2020 2020 2020  6384.           
-00013d40: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
-00013d50: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
-00013d60: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00013d70: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
-00013d80: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
-00013d90: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
-00013da0: 2020 2020 2020 2031 3633 3834 205b 6c61         16384 [la
-00013db0: 6265 6c3d 2253 5441 5254 225d 0a20 2020  bel="START"].   
-00013dc0: 2020 2020 2020 2020 2031 3633 3834 202d           16384 -
-00013dd0: 3e20 7b31 3633 3837 7d0a 2020 2020 2020  > {16387}.      
-00013de0: 2020 2020 2020 3136 3338 3720 5b6c 6162        16387 [lab
-00013df0: 656c 3d22 454e 4422 5d0a 2020 2020 2020  el="END"].      
-00013e00: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00013e10: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00013e20: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
-00013e30: 6578 705f 6f75 7470 7574 2c20 272d 6720  exp_output, '-g 
-00013e40: 2d49 204e 6f64 654c 6162 656c 3d22 7b6c  -I NodeLabel="{l
-00013e50: 6162 656c 7d22 272c 2063 746c 290a 0a20  abel}"', ctl).. 
-00013e60: 2020 2064 6566 2074 6573 745f 636f 6e66     def test_conf
-00013e70: 6967 5f4e 6f64 654c 6162 656c 5f77 6974  ig_NodeLabel_wit
-00013e80: 685f 6874 6d6c 2873 656c 6629 3a0a 2020  h_html(self):.  
-00013e90: 2020 2020 2020 7261 6d20 3d20 5b31 3935        ram = [195
-00013ea0: 2c20 332c 2036 342c 2032 3031 5d20 2b20  , 3, 64, 201] + 
-00013eb0: 5b30 5d20 2a20 3439 3134 380a 2020 2020  [0] * 49148.    
-00013ec0: 2020 2020 696e 6920 3d20 2222 220a 2020      ini = """.  
-00013ed0: 2020 2020 2020 2020 2020 5b73 6e61 7069            [snapi
-00013ee0: 6e66 6f5d 0a20 2020 2020 2020 2020 2020  nfo].           
-00013ef0: 204e 6f64 6541 7474 7269 6275 7465 733d   NodeAttributes=
-00013f00: 7368 6170 653d 6e6f 6e65 0a20 2020 2020  shape=none.     
-00013f10: 2020 2020 2020 204e 6f64 654c 6162 656c         NodeLabel
-00013f20: 3d3c 3c54 4142 4c45 3e3c 5452 3e3c 5444  =<<TABLE><TR><TD
-00013f30: 3e7b 6c61 6265 6c7d 3c2f 5444 3e3c 2f54  >{label}</TD></T
-00013f40: 523e 3c2f 5441 424c 453e 3e0a 2020 2020  R></TABLE>>.    
-00013f50: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00013f60: 7365 6c66 2e77 7269 7465 5f74 6578 745f  self.write_text_
-00013f70: 6669 6c65 2864 6564 656e 7428 696e 6929  file(dedent(ini)
-00013f80: 2e73 7472 6970 2829 2c20 2773 6b6f 6f6c  .strip(), 'skool
-00013f90: 6b69 742e 696e 6927 290a 2020 2020 2020  kit.ini').      
-00013fa0: 2020 6374 6c20 3d20 2222 220a 2020 2020    ctl = """.    
-00013fb0: 2020 2020 2020 2020 4020 3136 3338 3420          @ 16384 
-00013fc0: 6c61 6265 6c3d 5354 4152 540a 2020 2020  label=START.    
-00013fd0: 2020 2020 2020 2020 6320 3136 3338 340a          c 16384.
-00013fe0: 2020 2020 2020 2020 2020 2020 4020 3136              @ 16
-00013ff0: 3338 3720 6c61 6265 6c3d 454e 440a 2020  387 label=END.  
-00014000: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
-00014010: 370a 2020 2020 2020 2020 2020 2020 6920  7.            i 
-00014020: 3136 3338 380a 2020 2020 2020 2020 2222  16388.        ""
-00014030: 220a 2020 2020 2020 2020 6578 705f 6f75  ".        exp_ou
-00014040: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
-00014050: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
-00014060: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
-00014070: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
-00014080: 6e73 3a20 3136 3338 340a 2020 2020 2020  ns: 16384.      
-00014090: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
-000140a0: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
-000140b0: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
-000140c0: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
-000140d0: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-000140e0: 205b 7368 6170 653d 6e6f 6e65 5d0a 2020   [shape=none].  
-000140f0: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
-00014100: 5b6c 6162 656c 3d3c 3c54 4142 4c45 3e3c  [label=<<TABLE><
-00014110: 5452 3e3c 5444 3e53 5441 5254 3c2f 5444  TR><TD>START</TD
-00014120: 3e3c 2f54 523e 3c2f 5441 424c 453e 3e5d  ></TR></TABLE>>]
-00014130: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
-00014140: 3834 202d 3e20 7b31 3633 3837 7d0a 2020  84 -> {16387}.  
-00014150: 2020 2020 2020 2020 2020 3136 3338 3720            16387 
-00014160: 5b6c 6162 656c 3d3c 3c54 4142 4c45 3e3c  [label=<<TABLE><
-00014170: 5452 3e3c 5444 3e45 4e44 3c2f 5444 3e3c  TR><TD>END</TD><
-00014180: 2f54 523e 3c2f 5441 424c 453e 3e5d 0a20  /TR></TABLE>>]. 
-00014190: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000141a0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000141b0: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
-000141c0: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
-000141d0: 2027 2d67 272c 2063 746c 290a 0a20 2020   '-g', ctl)..   
-000141e0: 2064 6566 2074 6573 745f 636f 6e66 6967   def test_config
-000141f0: 5f50 6565 6b28 7365 6c66 293a 0a20 2020  _Peek(self):.   
-00014200: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
-00014210: 2034 3931 3532 0a20 2020 2020 2020 2072   49152.        r
-00014220: 616d 5b33 3336 3136 3a33 3336 3230 5d20  am[33616:33620] 
-00014230: 3d20 5b31 2c20 3635 2c20 3134 342c 2031  = [1, 65, 144, 1
-00014240: 3635 5d0a 2020 2020 2020 2020 6578 705f  65].        exp_
-00014250: 6f75 7470 7574 203d 2022 2222 0a20 2020  output = """.   
-00014260: 2020 2020 2020 2020 2024 6333 3530 3a30           $c350:0
-00014270: 3031 2829 0a20 2020 2020 2020 2020 2020  01().           
-00014280: 2024 6333 3531 3a30 3635 2841 290a 2020   $c351:065(A).  
-00014290: 2020 2020 2020 2020 2020 2463 3335 323a            $c352:
-000142a0: 3134 3428 5544 472d 4129 0a20 2020 2020  144(UDG-A).     
-000142b0: 2020 2020 2020 2024 6333 3533 3a31 3635         $c353:165
-000142c0: 2852 4e44 290a 2020 2020 2020 2020 2222  (RND).        ""
-000142d0: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
-000142e0: 7465 7374 5f73 6e61 2872 616d 2c20 6578  test_sna(ram, ex
-000142f0: 705f 6f75 7470 7574 2c20 272d 7020 3530  p_output, '-p 50
-00014300: 3030 302d 3530 3030 3320 2d49 2050 6565  000-50003 -I Pee
-00014310: 6b3d 247b 6164 6472 6573 733a 3034 787d  k=${address:04x}
-00014320: 3a7b 7661 6c75 653a 3033 647d 287b 6368  :{value:03d}({ch
-00014330: 6172 7d29 2729 0a0a 2020 2020 6465 6620  ar})')..    def 
-00014340: 7465 7374 5f63 6f6e 6669 675f 576f 7264  test_config_Word
-00014350: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00014360: 7261 6d20 3d20 5b30 5d20 2a20 3439 3135  ram = [0] * 4915
-00014370: 320a 2020 2020 2020 2020 7261 6d5b 3433  2.        ram[43
-00014380: 3631 363a 3433 3632 305d 203d 205b 312c  616:43620] = [1,
-00014390: 2032 2c20 3235 342c 2032 3535 5d0a 2020   2, 254, 255].  
-000143a0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
-000143b0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-000143c0: 2020 2024 4541 3630 2c24 3032 3031 0a20     $EA60,$0201. 
-000143d0: 2020 2020 2020 2020 2020 2024 4541 3632             $EA62
-000143e0: 2c24 4646 4645 0a20 2020 2020 2020 2022  ,$FFFE.        "
-000143f0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-00014400: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
-00014410: 7870 5f6f 7574 7075 742c 2027 2d77 2036  xp_output, '-w 6
-00014420: 3030 3030 2d36 3030 3033 202d 4920 576f  0000-60003 -I Wo
-00014430: 7264 3d24 7b61 6464 7265 7373 3a30 3458  rd=${address:04X
-00014440: 7d2c 247b 7661 6c75 653a 3034 587d 2729  },${value:04X}')
-00014450: 0a                                       .
+000000d0: 6f72 7420 434f 4d4d 414e 4453 0a66 726f  ort COMMANDS.fro
+000000e0: 6d20 736b 6f6f 6c6b 6974 2e73 6e61 7073  m skoolkit.snaps
+000000f0: 686f 7420 696d 706f 7274 2053 6e61 7073  hot import Snaps
+00000100: 686f 7445 7272 6f72 0a0a 6465 6620 6d6f  hotError..def mo
+00000110: 636b 5f72 756e 282a 6172 6773 293a 0a20  ck_run(*args):. 
+00000120: 2020 2067 6c6f 6261 6c20 7275 6e5f 6172     global run_ar
+00000130: 6773 0a20 2020 2072 756e 5f61 7267 7320  gs.    run_args 
+00000140: 3d20 6172 6773 0a0a 6465 6620 6d6f 636b  = args..def mock
+00000150: 5f63 6f6e 6669 6728 6e61 6d65 293a 0a20  _config(name):. 
+00000160: 2020 2072 6574 7572 6e20 7b6b 3a20 765b     return {k: v[
+00000170: 305d 2066 6f72 206b 2c20 7620 696e 2043  0] for k, v in C
+00000180: 4f4d 4d41 4e44 535b 6e61 6d65 5d2e 6974  OMMANDS[name].it
+00000190: 656d 7328 297d 0a0a 636c 6173 7320 4d6f  ems()}..class Mo
+000001a0: 636b 4261 7369 634c 6973 7465 723a 0a20  ckBasicLister:. 
+000001b0: 2020 2064 6566 206c 6973 745f 6261 7369     def list_basi
+000001c0: 6328 7365 6c66 2c20 736e 6170 7368 6f74  c(self, snapshot
+000001d0: 293a 0a20 2020 2020 2020 2067 6c6f 6261  ):.        globa
+000001e0: 6c20 6d6f 636b 5f62 6173 6963 5f6c 6973  l mock_basic_lis
+000001f0: 7465 720a 2020 2020 2020 2020 6d6f 636b  ter.        mock
+00000200: 5f62 6173 6963 5f6c 6973 7465 7220 3d20  _basic_lister = 
+00000210: 7365 6c66 0a20 2020 2020 2020 2073 656c  self.        sel
+00000220: 662e 736e 6170 7368 6f74 203d 2073 6e61  f.snapshot = sna
+00000230: 7073 686f 740a 2020 2020 2020 2020 7265  pshot.        re
+00000240: 7475 726e 2027 4241 5349 4320 444f 4e45  turn 'BASIC DONE
+00000250: 2127 0a0a 636c 6173 7320 4d6f 636b 5661  !'..class MockVa
+00000260: 7269 6162 6c65 4c69 7374 6572 3a0a 2020  riableLister:.  
+00000270: 2020 6465 6620 6c69 7374 5f76 6172 6961    def list_varia
+00000280: 626c 6573 2873 656c 662c 2073 6e61 7073  bles(self, snaps
+00000290: 686f 7429 3a0a 2020 2020 2020 2020 676c  hot):.        gl
+000002a0: 6f62 616c 206d 6f63 6b5f 7661 7269 6162  obal mock_variab
+000002b0: 6c65 5f6c 6973 7465 720a 2020 2020 2020  le_lister.      
+000002c0: 2020 6d6f 636b 5f76 6172 6961 626c 655f    mock_variable_
+000002d0: 6c69 7374 6572 203d 2073 656c 660a 2020  lister = self.  
+000002e0: 2020 2020 2020 7365 6c66 2e73 6e61 7073        self.snaps
+000002f0: 686f 7420 3d20 736e 6170 7368 6f74 0a20  hot = snapshot. 
+00000300: 2020 2020 2020 2072 6574 7572 6e20 2756         return 'V
+00000310: 4152 4941 424c 4553 2044 4f4e 4521 270a  ARIABLES DONE!'.
+00000320: 0a63 6c61 7373 2053 6e61 7069 6e66 6f54  .class SnapinfoT
+00000330: 6573 7428 536b 6f6f 6c4b 6974 5465 7374  est(SkoolKitTest
+00000340: 4361 7365 293a 0a20 2020 2064 6566 205f  Case):.    def _
+00000350: 7465 7374 5f73 6e61 2873 656c 662c 2072  test_sna(self, r
+00000360: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+00000370: 6f70 7469 6f6e 733d 2727 2c20 6374 6c3d  options='', ctl=
+00000380: 4e6f 6e65 2c20 6374 6c66 696c 6573 3d28  None, ctlfiles=(
+00000390: 292c 2068 6561 6465 723d 4e6f 6e65 2c20  ), header=None, 
+000003a0: 7375 6666 6978 3d27 2e73 6e61 2729 3a0a  suffix='.sna'):.
+000003b0: 2020 2020 2020 2020 6966 2068 6561 6465          if heade
+000003c0: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
+000003d0: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
+000003e0: 5b30 5d20 2a20 3237 0a20 2020 2020 2020  [0] * 27.       
+000003f0: 2073 6e61 6669 6c65 203d 2073 656c 662e   snafile = self.
+00000400: 7772 6974 655f 6269 6e5f 6669 6c65 2868  write_bin_file(h
+00000410: 6561 6465 7220 2b20 7261 6d2c 2073 7566  eader + ram, suf
+00000420: 6669 783d 7375 6666 6978 290a 2020 2020  fix=suffix).    
+00000430: 2020 2020 6966 2063 746c 206f 7220 6374      if ctl or ct
+00000440: 6c66 696c 6573 3a0a 2020 2020 2020 2020  lfiles:.        
+00000450: 2020 2020 6966 2063 746c 3a0a 2020 2020      if ctl:.    
+00000460: 2020 2020 2020 2020 2020 2020 7072 6566              pref
+00000470: 6978 203d 2073 6e61 6669 6c65 5b3a 2d34  ix = snafile[:-4
+00000480: 5d20 6966 2073 7566 6669 7820 696e 2028  ] if suffix in (
+00000490: 272e 6269 6e27 2c20 272e 736e 6127 2c20  '.bin', '.sna', 
+000004a0: 272e 737a 7827 2c20 272e 7a38 3027 2920  '.szx', '.z80') 
+000004b0: 656c 7365 2073 6e61 6669 6c65 0a20 2020  else snafile.   
+000004c0: 2020 2020 2020 2020 2020 2020 2063 746c               ctl
+000004d0: 6669 6c65 203d 2073 656c 662e 7772 6974  file = self.writ
+000004e0: 655f 7465 7874 5f66 696c 6528 6465 6465  e_text_file(dede
+000004f0: 6e74 2863 746c 292e 7374 7269 7028 292c  nt(ctl).strip(),
+00000500: 2070 7265 6669 7820 2b20 272e 6374 6c27   prefix + '.ctl'
+00000510: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00000520: 2020 6966 206e 6f74 2063 746c 6669 6c65    if not ctlfile
+00000530: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00000540: 2020 2020 2020 2063 746c 6669 6c65 7320         ctlfiles 
+00000550: 3d20 5b63 746c 6669 6c65 5d0a 2020 2020  = [ctlfile].    
+00000560: 2020 2020 2020 2020 7375 6666 6978 203d          suffix =
+00000570: 2027 7327 2069 6620 6c65 6e28 6374 6c66   's' if len(ctlf
+00000580: 696c 6573 2920 3e20 3120 656c 7365 2027  iles) > 1 else '
+00000590: 270a 2020 2020 2020 2020 2020 2020 6578  '.            ex
+000005a0: 705f 6572 726f 7220 3d20 2755 7369 6e67  p_error = 'Using
+000005b0: 2063 6f6e 7472 6f6c 2066 696c 657b 7d3a   control file{}:
+000005c0: 207b 7d5c 6e27 2e66 6f72 6d61 7428 7375   {}\n'.format(su
+000005d0: 6666 6978 2c20 272c 2027 2e6a 6f69 6e28  ffix, ', '.join(
+000005e0: 6374 6c66 696c 6573 2929 0a20 2020 2020  ctlfiles)).     
+000005f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00000600: 2020 2020 2065 7870 5f65 7272 6f72 203d       exp_error =
+00000610: 2027 270a 2020 2020 2020 2020 6f75 7470   ''.        outp
+00000620: 7574 2c20 6572 726f 7220 3d20 7365 6c66  ut, error = self
+00000630: 2e72 756e 5f73 6e61 7069 6e66 6f28 2720  .run_snapinfo(' 
+00000640: 272e 6a6f 696e 2828 6f70 7469 6f6e 732c  '.join((options,
+00000650: 2073 6e61 6669 6c65 2929 290a 2020 2020   snafile))).    
+00000660: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00000670: 7175 616c 2865 7272 6f72 2c20 6578 705f  qual(error, exp_
+00000680: 6572 726f 7229 0a20 2020 2020 2020 2073  error).        s
+00000690: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000006a0: 6465 6465 6e74 2865 7870 5f6f 7574 7075  dedent(exp_outpu
+000006b0: 7429 2e6c 7374 7269 7028 275c 6e27 292e  t).lstrip('\n').
+000006c0: 7273 7472 6970 2829 2c20 6f75 7470 7574  rstrip(), output
+000006d0: 2e72 7374 7269 7028 2929 0a0a 2020 2020  .rstrip())..    
+000006e0: 6465 6620 5f74 6573 745f 7a38 3028 7365  def _test_z80(se
+000006f0: 6c66 2c20 6578 705f 6f75 7470 7574 2c20  lf, exp_output, 
+00000700: 6865 6164 6572 3d4e 6f6e 652c 2072 616d  header=None, ram
+00000710: 3d4e 6f6e 652c 2076 6572 7369 6f6e 3d33  =None, version=3
+00000720: 2c20 636f 6d70 7265 7373 3d46 616c 7365  , compress=False
+00000730: 2c20 6d61 6368 696e 655f 6964 3d30 2c20  , machine_id=0, 
+00000740: 7061 6765 733d 4e6f 6e65 293a 0a20 2020  pages=None):.   
+00000750: 2020 2020 2069 6620 7261 6d20 6973 204e       if ram is N
+00000760: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00000770: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
+00000780: 3532 0a20 2020 2020 2020 207a 3830 6669  52.        z80fi
+00000790: 6c65 203d 2073 656c 662e 7772 6974 655f  le = self.write_
+000007a0: 7a38 305f 6669 6c65 2868 6561 6465 722c  z80_file(header,
+000007b0: 2072 616d 2c20 7665 7273 696f 6e2c 2063   ram, version, c
+000007c0: 6f6d 7072 6573 732c 206d 6163 6869 6e65  ompress, machine
+000007d0: 5f69 642c 2070 6167 6573 206f 7220 7b7d  _id, pages or {}
+000007e0: 290a 2020 2020 2020 2020 6f75 7470 7574  ).        output
+000007f0: 2c20 6572 726f 7220 3d20 7365 6c66 2e72  , error = self.r
+00000800: 756e 5f73 6e61 7069 6e66 6f28 7a38 3066  un_snapinfo(z80f
+00000810: 696c 6529 0a20 2020 2020 2020 2073 656c  ile).        sel
+00000820: 662e 6173 7365 7274 4571 7561 6c28 6572  f.assertEqual(er
+00000830: 726f 722c 2027 2729 0a20 2020 2020 2020  ror, '').       
+00000840: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00000850: 6c28 6465 6465 6e74 2865 7870 5f6f 7574  l(dedent(exp_out
+00000860: 7075 7429 2e6c 7374 7269 7028 292c 206f  put).lstrip(), o
+00000870: 7574 7075 7429 0a0a 2020 2020 6465 6620  utput)..    def 
+00000880: 5f74 6573 745f 737a 7828 7365 6c66 2c20  _test_szx(self, 
+00000890: 6578 705f 6f75 7470 7574 2c20 7265 6769  exp_output, regi
+000008a0: 7374 6572 733d 4e6f 6e65 2c20 626f 7264  sters=None, bord
+000008b0: 6572 3d30 2c20 6b65 7962 3d46 616c 7365  er=0, keyb=False
+000008c0: 2c20 6973 7375 6532 3d30 2c20 7261 6d3d  , issue2=0, ram=
+000008d0: 4e6f 6e65 2c20 636f 6d70 7265 7373 3d46  None, compress=F
+000008e0: 616c 7365 2c20 6d61 6368 696e 655f 6964  alse, machine_id
+000008f0: 3d31 2c20 6368 3766 6664 3d30 2c20 7061  =1, ch7ffd=0, pa
+00000900: 6765 733d 4e6f 6e65 2c20 6179 3d4e 6f6e  ges=None, ay=Non
+00000910: 6529 3a0a 2020 2020 2020 2020 6966 2072  e):.        if r
+00000920: 616d 2069 7320 4e6f 6e65 3a0a 2020 2020  am is None:.    
+00000930: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
+00000940: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
+00000950: 2020 6966 206d 6163 6869 6e65 5f69 6420    if machine_id 
+00000960: 3e20 3120 616e 6420 7061 6765 7320 6973  > 1 and pages is
+00000970: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00000980: 2020 2062 616e 6b20 3d20 2830 2c29 202a     bank = (0,) *
+00000990: 2031 3633 3834 0a20 2020 2020 2020 2020   16384.         
+000009a0: 2020 2070 6167 6573 203d 207b 703a 2062     pages = {p: b
+000009b0: 616e 6b20 666f 7220 7020 696e 2028 312c  ank for p in (1,
+000009c0: 2033 2c20 342c 2036 2c20 3729 7d0a 2020   3, 4, 6, 7)}.  
+000009d0: 2020 2020 2020 737a 7866 696c 6520 3d20        szxfile = 
+000009e0: 7365 6c66 2e77 7269 7465 5f73 7a78 2872  self.write_szx(r
+000009f0: 616d 2c20 636f 6d70 7265 7373 2c20 6d61  am, compress, ma
+00000a00: 6368 696e 655f 6964 2c20 6368 3766 6664  chine_id, ch7ffd
+00000a10: 2c20 7061 6765 732c 2072 6567 6973 7465  , pages, registe
+00000a20: 7273 2c20 626f 7264 6572 2c20 6b65 7962  rs, border, keyb
+00000a30: 2c20 6973 7375 6532 2c20 6179 290a 2020  , issue2, ay).  
+00000a40: 2020 2020 2020 6f75 7470 7574 2c20 6572        output, er
+00000a50: 726f 7220 3d20 7365 6c66 2e72 756e 5f73  ror = self.run_s
+00000a60: 6e61 7069 6e66 6f28 737a 7866 696c 6529  napinfo(szxfile)
+00000a70: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00000a80: 7365 7274 4571 7561 6c28 6572 726f 722c  sertEqual(error,
+00000a90: 2027 2729 0a20 2020 2020 2020 2073 656c   '').        sel
+00000aa0: 662e 6173 7365 7274 4571 7561 6c28 6465  f.assertEqual(de
+00000ab0: 6465 6e74 2865 7870 5f6f 7574 7075 7429  dent(exp_output)
+00000ac0: 2e6c 7374 7269 7028 292c 206f 7574 7075  .lstrip(), outpu
+00000ad0: 7429 0a0a 2020 2020 6465 6620 5f74 6573  t)..    def _tes
+00000ae0: 745f 6269 6e28 7365 6c66 2c20 7261 6d2c  t_bin(self, ram,
+00000af0: 2065 7870 5f6f 7574 7075 742c 206f 7074   exp_output, opt
+00000b00: 696f 6e73 3d27 272c 2063 746c 3d4e 6f6e  ions='', ctl=Non
+00000b10: 652c 2073 7566 6669 783d 272e 6269 6e27  e, suffix='.bin'
+00000b20: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00000b30: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
+00000b40: 7870 5f6f 7574 7075 742c 206f 7074 696f  xp_output, optio
+00000b50: 6e73 2c20 6374 6c2c 2068 6561 6465 723d  ns, ctl, header=
+00000b60: 5b5d 2c20 7375 6666 6978 3d73 7566 6669  [], suffix=suffi
+00000b70: 7829 0a0a 2020 2020 6465 6620 5f74 6573  x)..    def _tes
+00000b80: 745f 6261 645f 7370 6563 2873 656c 662c  t_bad_spec(self,
+00000b90: 206f 7074 696f 6e2c 2062 6164 5f73 7065   option, bad_spe
+00000ba0: 632c 2065 7870 5f65 7272 6f72 2c20 6164  c, exp_error, ad
+00000bb0: 645f 7370 6563 3d54 7275 6529 3a0a 2020  d_spec=True):.  
+00000bc0: 2020 2020 2020 736e 6166 696c 6520 3d20        snafile = 
+00000bd0: 7365 6c66 2e77 7269 7465 5f62 696e 5f66  self.write_bin_f
+00000be0: 696c 6528 2830 2c29 202a 2034 3931 3739  ile((0,) * 49179
+00000bf0: 2c20 7375 6666 6978 3d27 2e73 6e61 2729  , suffix='.sna')
+00000c00: 0a20 2020 2020 2020 2077 6974 6820 7365  .        with se
+00000c10: 6c66 2e61 7373 6572 7452 6169 7365 7328  lf.assertRaises(
+00000c20: 536b 6f6f 6c4b 6974 4572 726f 7229 2061  SkoolKitError) a
+00000c30: 7320 636d 3a0a 2020 2020 2020 2020 2020  s cm:.          
+00000c40: 2020 7365 6c66 2e72 756e 5f73 6e61 7069    self.run_snapi
+00000c50: 6e66 6f28 277b 7d20 7b7d 207b 7d27 2e66  nfo('{} {} {}'.f
+00000c60: 6f72 6d61 7428 6f70 7469 6f6e 2c20 6261  ormat(option, ba
+00000c70: 645f 7370 6563 2c20 736e 6166 696c 6529  d_spec, snafile)
+00000c80: 290a 2020 2020 2020 2020 6966 2061 6464  ).        if add
+00000c90: 5f73 7065 633a 0a20 2020 2020 2020 2020  _spec:.         
+00000ca0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00000cb0: 7561 6c28 636d 2e65 7863 6570 7469 6f6e  ual(cm.exception
+00000cc0: 2e61 7267 735b 305d 2c20 277b 7d3a 207b  .args[0], '{}: {
+00000cd0: 7d27 2e66 6f72 6d61 7428 6578 705f 6572  }'.format(exp_er
+00000ce0: 726f 722c 2062 6164 5f73 7065 6329 290a  ror, bad_spec)).
+00000cf0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00000d00: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00000d10: 7373 6572 7445 7175 616c 2863 6d2e 6578  ssertEqual(cm.ex
+00000d20: 6365 7074 696f 6e2e 6172 6773 5b30 5d2c  ception.args[0],
+00000d30: 2065 7870 5f65 7272 6f72 290a 0a20 2020   exp_error)..   
+00000d40: 2064 6566 2074 6573 745f 6e6f 5f61 7267   def test_no_arg
+00000d50: 756d 656e 7473 2873 656c 6629 3a0a 2020  uments(self):.  
+00000d60: 2020 2020 2020 6f75 7470 7574 2c20 6572        output, er
+00000d70: 726f 7220 3d20 7365 6c66 2e72 756e 5f73  ror = self.run_s
+00000d80: 6e61 7069 6e66 6f28 6361 7463 685f 6578  napinfo(catch_ex
+00000d90: 6974 3d32 290a 2020 2020 2020 2020 7365  it=2).        se
+00000da0: 6c66 2e61 7373 6572 7445 7175 616c 286f  lf.assertEqual(o
+00000db0: 7574 7075 742c 2027 2729 0a20 2020 2020  utput, '').     
+00000dc0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00000dd0: 7565 2865 7272 6f72 2e73 7461 7274 7377  ue(error.startsw
+00000de0: 6974 6828 2775 7361 6765 3a20 736e 6170  ith('usage: snap
+00000df0: 696e 666f 2e70 7927 2929 0a0a 2020 2020  info.py'))..    
+00000e00: 4070 6174 6368 2e6f 626a 6563 7428 736e  @patch.object(sn
+00000e10: 6170 696e 666f 2c20 2772 756e 272c 206d  apinfo, 'run', m
+00000e20: 6f63 6b5f 7275 6e29 0a20 2020 2064 6566  ock_run).    def
+00000e30: 2074 6573 745f 636f 6e66 6967 5f72 6561   test_config_rea
+00000e40: 645f 6672 6f6d 5f66 696c 6528 7365 6c66  d_from_file(self
+00000e50: 293a 0a20 2020 2020 2020 2069 6e69 203d  ):.        ini =
+00000e60: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+00000e70: 205b 736e 6170 696e 666f 5d0a 2020 2020   [snapinfo].    
+00000e80: 2020 2020 2020 2020 4e6f 6465 4174 7472          NodeAttr
+00000e90: 6962 7574 6573 3d73 6861 7065 3d63 6972  ibutes=shape=cir
+00000ea0: 636c 650a 2020 2020 2020 2020 2020 2020  cle.            
+00000eb0: 4e6f 6465 4c61 6265 6c3d 227b 6c61 6265  NodeLabel="{labe
+00000ec0: 6c7d 220a 2020 2020 2020 2020 2222 220a  l}".        """.
+00000ed0: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
+00000ee0: 7465 5f74 6578 745f 6669 6c65 2864 6564  te_text_file(ded
+00000ef0: 656e 7428 696e 6929 2e73 7472 6970 2829  ent(ini).strip()
+00000f00: 2c20 2773 6b6f 6f6c 6b69 742e 696e 6927  , 'skoolkit.ini'
+00000f10: 290a 2020 2020 2020 2020 736e 6170 696e  ).        snapin
+00000f20: 666f 2e6d 6169 6e28 2827 7465 7374 2e73  fo.main(('test.s
+00000f30: 6e61 272c 2929 0a20 2020 2020 2020 2073  na',)).        s
+00000f40: 6e61 6669 6c65 2c20 6f70 7469 6f6e 732c  nafile, options,
+00000f50: 2063 6f6e 6669 6720 3d20 7275 6e5f 6172   config = run_ar
+00000f60: 6773 0a20 2020 2020 2020 2073 656c 662e  gs.        self.
+00000f70: 6173 7365 7274 4571 7561 6c28 736e 6166  assertEqual(snaf
+00000f80: 696c 652c 2027 7465 7374 2e73 6e61 2729  ile, 'test.sna')
+00000f90: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00000fa0: 7365 7274 4661 6c73 6528 6f70 7469 6f6e  sertFalse(option
+00000fb0: 732e 6261 7369 6329 0a20 2020 2020 2020  s.basic).       
+00000fc0: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00000fd0: 6528 6f70 7469 6f6e 732e 6361 6c6c 5f67  e(options.call_g
+00000fe0: 7261 7068 290a 2020 2020 2020 2020 7365  raph).        se
+00000ff0: 6c66 2e61 7373 6572 7445 7175 616c 285b  lf.assertEqual([
+00001000: 5d2c 206f 7074 696f 6e73 2e70 6172 616d  ], options.param
+00001010: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+00001020: 6173 7365 7274 4973 4e6f 6e65 286f 7074  assertIsNone(opt
+00001030: 696f 6e73 2e70 6565 6b29 0a20 2020 2020  ions.peek).     
+00001040: 2020 2073 656c 662e 6173 7365 7274 4973     self.assertIs
+00001050: 4e6f 6e65 286f 7074 696f 6e73 2e74 6578  None(options.tex
+00001060: 7429 0a20 2020 2020 2020 2073 656c 662e  t).        self.
+00001070: 6173 7365 7274 4973 4e6f 6e65 286f 7074  assertIsNone(opt
+00001080: 696f 6e73 2e74 696c 6529 0a20 2020 2020  ions.tile).     
+00001090: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+000010a0: 6c73 6528 6f70 7469 6f6e 732e 7661 7269  lse(options.vari
+000010b0: 6162 6c65 7329 0a20 2020 2020 2020 2073  ables).        s
+000010c0: 656c 662e 6173 7365 7274 4973 4e6f 6e65  elf.assertIsNone
+000010d0: 286f 7074 696f 6e73 2e77 6f72 6429 0a20  (options.word). 
+000010e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000010f0: 7274 4571 7561 6c28 636f 6e66 6967 5b27  rtEqual(config['
+00001100: 4e6f 6465 4174 7472 6962 7574 6573 275d  NodeAttributes']
+00001110: 2c20 2773 6861 7065 3d63 6972 636c 6527  , 'shape=circle'
+00001120: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00001130: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+00001140: 675b 274e 6f64 654c 6162 656c 275d 2c20  g['NodeLabel'], 
+00001150: 2722 7b6c 6162 656c 7d22 2729 0a0a 2020  '"{label}"')..  
+00001160: 2020 6465 6620 7465 7374 5f69 6e76 616c    def test_inval
+00001170: 6964 5f6f 7074 696f 6e28 7365 6c66 293a  id_option(self):
+00001180: 0a20 2020 2020 2020 206f 7574 7075 742c  .        output,
+00001190: 2065 7272 6f72 203d 2073 656c 662e 7275   error = self.ru
+000011a0: 6e5f 736e 6170 696e 666f 2827 2d78 2074  n_snapinfo('-x t
+000011b0: 6573 742e 7a38 3027 2c20 6361 7463 685f  est.z80', catch_
+000011c0: 6578 6974 3d32 290a 2020 2020 2020 2020  exit=2).        
+000011d0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000011e0: 286f 7574 7075 742c 2027 2729 0a20 2020  (output, '').   
+000011f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00001200: 5472 7565 2865 7272 6f72 2e73 7461 7274  True(error.start
+00001210: 7377 6974 6828 2775 7361 6765 3a20 736e  swith('usage: sn
+00001220: 6170 696e 666f 2e70 7927 2929 0a0a 2020  apinfo.py'))..  
+00001230: 2020 6465 6620 7465 7374 5f6e 6f6e 6578    def test_nonex
+00001240: 6973 7465 6e74 5f69 6e70 7574 5f66 696c  istent_input_fil
+00001250: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+00001260: 2069 6e66 696c 6520 3d20 277b 7d2f 6e6f   infile = '{}/no
+00001270: 6e2d 6578 6973 7465 6e74 2e7a 3830 272e  n-existent.z80'.
+00001280: 666f 726d 6174 2873 656c 662e 6d61 6b65  format(self.make
+00001290: 5f64 6972 6563 746f 7279 2829 290a 2020  _directory()).  
+000012a0: 2020 2020 2020 7769 7468 2073 656c 662e        with self.
+000012b0: 6173 7365 7274 5261 6973 6573 2853 6b6f  assertRaises(Sko
+000012c0: 6f6c 4b69 7445 7272 6f72 2920 6173 2063  olKitError) as c
+000012d0: 6d3a 0a20 2020 2020 2020 2020 2020 2073  m:.            s
+000012e0: 656c 662e 7275 6e5f 736e 6170 696e 666f  elf.run_snapinfo
+000012f0: 2869 6e66 696c 6529 0a20 2020 2020 2020  (infile).       
+00001300: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00001310: 6c28 636d 2e65 7863 6570 7469 6f6e 2e61  l(cm.exception.a
+00001320: 7267 735b 305d 2c20 277b 7d3a 2066 696c  rgs[0], '{}: fil
+00001330: 6520 6e6f 7420 666f 756e 6427 2e66 6f72  e not found'.for
+00001340: 6d61 7428 696e 6669 6c65 2929 0a0a 2020  mat(infile))..  
+00001350: 2020 6465 6620 7465 7374 5f73 6e61 5f34    def test_sna_4
+00001360: 386b 2873 656c 6629 3a0a 2020 2020 2020  8k(self):.      
+00001370: 2020 6865 6164 6572 203d 206c 6973 7428    header = list(
+00001380: 7261 6e67 6528 3233 2929 0a20 2020 2020  range(23)).     
+00001390: 2020 2068 6561 6465 725b 3139 5d20 3d20     header[19] = 
+000013a0: 3420 2320 496e 7465 7272 7570 7473 2065  4 # Interrupts e
+000013b0: 6e61 626c 6564 0a20 2020 2020 2020 2068  nabled.        h
+000013c0: 6561 6465 722e 6578 7465 6e64 2828 302c  eader.extend((0,
+000013d0: 2036 3429 2920 2320 5350 3d31 3633 3834   64)) # SP=16384
+000013e0: 0a20 2020 2020 2020 2068 6561 6465 722e  .        header.
+000013f0: 6170 7065 6e64 2831 2920 2320 494d 2031  append(1) # IM 1
+00001400: 0a20 2020 2020 2020 2068 6561 6465 722e  .        header.
+00001410: 6170 7065 6e64 2832 2920 2320 424f 5244  append(2) # BORD
+00001420: 4552 2032 0a20 2020 2020 2020 2072 616d  ER 2.        ram
+00001430: 203d 205b 302c 2031 3238 5d20 2320 5043   = [0, 128] # PC
+00001440: 3d33 3237 3638 0a20 2020 2020 2020 2072  =32768.        r
+00001450: 616d 2e65 7874 656e 6428 5b30 5d20 2a20  am.extend([0] * 
+00001460: 3439 3135 3029 0a20 2020 2020 2020 2065  49150).        e
+00001470: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+00001480: 2020 2020 2020 2020 2020 2020 5241 4d3a              RAM:
+00001490: 2034 384b 0a20 2020 2020 2020 2020 2020   48K.           
+000014a0: 2049 6e74 6572 7275 7074 733a 2065 6e61   Interrupts: ena
+000014b0: 626c 6564 0a20 2020 2020 2020 2020 2020  bled.           
+000014c0: 2049 6e74 6572 7275 7074 206d 6f64 653a   Interrupt mode:
+000014d0: 2031 0a20 2020 2020 2020 2020 2020 2042   1.            B
+000014e0: 6f72 6465 723a 2032 0a20 2020 2020 2020  order: 2.       
+000014f0: 2020 2020 2052 6567 6973 7465 7273 3a0a       Registers:.
+00001500: 2020 2020 2020 2020 2020 2020 2020 5043                PC
+00001510: 2020 3332 3736 3820 3830 3030 2020 2020    32768 8000    
+00001520: 5350 2020 3136 3338 3420 3430 3030 0a20  SP  16384 4000. 
+00001530: 2020 2020 2020 2020 2020 2020 2049 5820               IX 
+00001540: 2020 3436 3235 2031 3231 3120 2020 2049    4625 1211    I
+00001550: 5920 2020 3431 3131 2031 3030 460a 2020  Y   4111 100F.  
+00001560: 2020 2020 2020 2020 2020 2020 4920 2020              I   
+00001570: 2020 2020 3020 2020 3030 2020 2020 5220      0   00    R 
+00001580: 2020 2020 2032 3020 2020 3134 0a20 2020       20   14.   
+00001590: 2020 2020 2020 2020 2020 2042 2020 2020             B    
+000015a0: 2020 3134 2020 2030 4520 2020 2042 2720    14   0E    B' 
+000015b0: 2020 2020 2036 2020 2030 360a 2020 2020       6   06.    
+000015c0: 2020 2020 2020 2020 2020 4320 2020 2020            C     
+000015d0: 2031 3320 2020 3044 2020 2020 4327 2020   13   0D    C'  
+000015e0: 2020 2020 3520 2020 3035 0a20 2020 2020      5   05.     
+000015f0: 2020 2020 2020 2020 2042 4320 2020 3335           BC   35
+00001600: 3937 2030 4530 4420 2020 2042 4327 2020  97 0E0D    BC'  
+00001610: 3135 3431 2030 3630 350a 2020 2020 2020  1541 0605.      
+00001620: 2020 2020 2020 2020 4420 2020 2020 2031          D      1
+00001630: 3220 2020 3043 2020 2020 4427 2020 2020  2   0C    D'    
+00001640: 2020 3420 2020 3034 0a20 2020 2020 2020    4   04.       
+00001650: 2020 2020 2020 2045 2020 2020 2020 3131         E      11
+00001660: 2020 2030 4220 2020 2045 2720 2020 2020     0B    E'     
+00001670: 2033 2020 2030 330a 2020 2020 2020 2020   3   03.        
+00001680: 2020 2020 2020 4445 2020 2033 3038 3320        DE   3083 
+00001690: 3043 3042 2020 2020 4445 2720 2031 3032  0C0B    DE'  102
+000016a0: 3720 3034 3033 0a20 2020 2020 2020 2020  7 0403.         
+000016b0: 2020 2020 2048 2020 2020 2020 3130 2020       H      10  
+000016c0: 2030 4120 2020 2048 2720 2020 2020 2032   0A    H'      2
+000016d0: 2020 2030 320a 2020 2020 2020 2020 2020     02.          
+000016e0: 2020 2020 4c20 2020 2020 2020 3920 2020      L       9   
+000016f0: 3039 2020 2020 4c27 2020 2020 2020 3120  09    L'      1 
+00001700: 2020 3031 0a20 2020 2020 2020 2020 2020    01.           
+00001710: 2020 2048 4c20 2020 3235 3639 2030 4130     HL   2569 0A0
+00001720: 3920 2020 2048 4c27 2020 2035 3133 2030  9    HL'   513 0
+00001730: 3230 310a 2020 2020 2020 2020 2020 2020  201.            
+00001740: 2020 4120 2020 2020 2032 3220 2020 3136    A      22   16
+00001750: 2020 2020 4127 2020 2020 2020 3820 2020      A'      8   
+00001760: 3038 0a20 2020 2020 2020 2020 2020 2020  08.             
+00001770: 2020 2053 5a35 4833 504e 4320 2020 2020     SZ5H3PNC     
+00001780: 2020 2020 2020 535a 3548 3350 4e43 0a20        SZ5H3PNC. 
+00001790: 2020 2020 2020 2020 2020 2020 2046 2030               F 0
+000017a0: 3030 3130 3130 3120 2020 2020 2020 2046  0010101        F
+000017b0: 2720 3030 3030 3031 3131 0a20 2020 2020  ' 00000111.     
+000017c0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+000017d0: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
+000017e0: 6d2c 2065 7870 5f6f 7574 7075 742c 2068  m, exp_output, h
+000017f0: 6561 6465 723d 6865 6164 6572 290a 0a20  eader=header).. 
+00001800: 2020 2064 6566 2074 6573 745f 736e 615f     def test_sna_
+00001810: 3132 386b 2873 656c 6629 3a0a 2020 2020  128k(self):.    
+00001820: 2020 2020 6865 6164 6572 203d 206c 6973      header = lis
+00001830: 7428 7261 6e67 6528 3235 2929 0a20 2020  t(range(25)).   
+00001840: 2020 2020 2068 6561 6465 725b 3139 5d20       header[19] 
+00001850: 3d20 3020 2320 496e 7465 7272 7570 7473  = 0 # Interrupts
+00001860: 2064 6973 6162 6c65 640a 2020 2020 2020   disabled.      
+00001870: 2020 6865 6164 6572 2e61 7070 656e 6428    header.append(
+00001880: 3229 2023 2049 4d20 320a 2020 2020 2020  2) # IM 2.      
+00001890: 2020 6865 6164 6572 2e61 7070 656e 6428    header.append(
+000018a0: 3429 2023 2042 4f52 4445 5220 340a 2020  4) # BORDER 4.  
+000018b0: 2020 2020 2020 7261 6d20 3d20 5b30 5d20        ram = [0] 
+000018c0: 2a20 3439 3135 320a 2020 2020 2020 2020  * 49152.        
+000018d0: 6865 6164 6572 3220 3d20 5b30 2c20 3936  header2 = [0, 96
+000018e0: 5d20 2320 5043 3d32 3435 3736 0a20 2020  ] # PC=24576.   
+000018f0: 2020 2020 2068 6561 6465 7232 2e61 7070       header2.app
+00001900: 656e 6428 3129 2023 2050 6f72 7420 3078  end(1) # Port 0x
+00001910: 3766 6664 0a20 2020 2020 2020 2068 6561  7ffd.        hea
+00001920: 6465 7232 2e61 7070 656e 6428 3029 2023  der2.append(0) #
+00001930: 2054 522d 444f 5320 524f 4d20 6e6f 7420   TR-DOS ROM not 
+00001940: 7061 6765 640a 2020 2020 2020 2020 6261  paged.        ba
+00001950: 6e6b 7320 3d20 5b30 5d20 2a20 2835 202a  nks = [0] * (5 *
+00001960: 2031 3633 3834 290a 2020 2020 2020 2020   16384).        
+00001970: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
+00001980: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
+00001990: 3a20 3132 384b 0a20 2020 2020 2020 2020  : 128K.         
+000019a0: 2020 2049 6e74 6572 7275 7074 733a 2064     Interrupts: d
+000019b0: 6973 6162 6c65 640a 2020 2020 2020 2020  isabled.        
+000019c0: 2020 2020 496e 7465 7272 7570 7420 6d6f      Interrupt mo
+000019d0: 6465 3a20 320a 2020 2020 2020 2020 2020  de: 2.          
+000019e0: 2020 426f 7264 6572 3a20 340a 2020 2020    Border: 4.    
+000019f0: 2020 2020 2020 2020 5265 6769 7374 6572          Register
+00001a00: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00001a10: 2050 4320 2032 3435 3736 2036 3030 3020   PC  24576 6000 
+00001a20: 2020 2053 5020 2020 3631 3637 2031 3831     SP   6167 181
+00001a30: 370a 2020 2020 2020 2020 2020 2020 2020  7.              
+00001a40: 4958 2020 2034 3632 3520 3132 3131 2020  IX   4625 1211  
+00001a50: 2020 4959 2020 2034 3131 3120 3130 3046    IY   4111 100F
+00001a60: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
+00001a70: 2020 2020 2020 2030 2020 2030 3020 2020         0   00   
+00001a80: 2052 2020 2020 2020 3230 2020 2031 340a   R      20   14.
+00001a90: 2020 2020 2020 2020 2020 2020 2020 4220                B 
+00001aa0: 2020 2020 2031 3420 2020 3045 2020 2020       14   0E    
+00001ab0: 4227 2020 2020 2020 3620 2020 3036 0a20  B'      6   06. 
+00001ac0: 2020 2020 2020 2020 2020 2020 2043 2020               C  
+00001ad0: 2020 2020 3133 2020 2030 4420 2020 2043      13   0D    C
+00001ae0: 2720 2020 2020 2035 2020 2030 350a 2020  '      5   05.  
+00001af0: 2020 2020 2020 2020 2020 2020 4243 2020              BC  
+00001b00: 2033 3539 3720 3045 3044 2020 2020 4243   3597 0E0D    BC
+00001b10: 2720 2031 3534 3120 3036 3035 0a20 2020  '  1541 0605.   
+00001b20: 2020 2020 2020 2020 2020 2044 2020 2020             D    
+00001b30: 2020 3132 2020 2030 4320 2020 2044 2720    12   0C    D' 
+00001b40: 2020 2020 2034 2020 2030 340a 2020 2020       4   04.    
+00001b50: 2020 2020 2020 2020 2020 4520 2020 2020            E     
+00001b60: 2031 3120 2020 3042 2020 2020 4527 2020   11   0B    E'  
+00001b70: 2020 2020 3320 2020 3033 0a20 2020 2020      3   03.     
+00001b80: 2020 2020 2020 2020 2044 4520 2020 3330           DE   30
+00001b90: 3833 2030 4330 4220 2020 2044 4527 2020  83 0C0B    DE'  
+00001ba0: 3130 3237 2030 3430 330a 2020 2020 2020  1027 0403.      
+00001bb0: 2020 2020 2020 2020 4820 2020 2020 2031          H      1
+00001bc0: 3020 2020 3041 2020 2020 4827 2020 2020  0   0A    H'    
+00001bd0: 2020 3220 2020 3032 0a20 2020 2020 2020    2   02.       
+00001be0: 2020 2020 2020 204c 2020 2020 2020 2039         L       9
+00001bf0: 2020 2030 3920 2020 204c 2720 2020 2020     09    L'     
+00001c00: 2031 2020 2030 310a 2020 2020 2020 2020   1   01.        
+00001c10: 2020 2020 2020 484c 2020 2032 3536 3920        HL   2569 
+00001c20: 3041 3039 2020 2020 484c 2720 2020 3531  0A09    HL'   51
+00001c30: 3320 3032 3031 0a20 2020 2020 2020 2020  3 0201.         
+00001c40: 2020 2020 2041 2020 2020 2020 3232 2020       A      22  
+00001c50: 2031 3620 2020 2041 2720 2020 2020 2038   16    A'      8
+00001c60: 2020 2030 380a 2020 2020 2020 2020 2020     08.          
+00001c70: 2020 2020 2020 535a 3548 3350 4e43 2020        SZ5H3PNC  
+00001c80: 2020 2020 2020 2020 2053 5a35 4833 504e           SZ5H3PN
+00001c90: 430a 2020 2020 2020 2020 2020 2020 2020  C.              
+00001ca0: 4620 3030 3031 3031 3031 2020 2020 2020  F 00010101      
+00001cb0: 2020 4627 2030 3030 3030 3131 310a 2020    F' 00000111.  
+00001cc0: 2020 2020 2020 2020 2020 5241 4d20 6261            RAM ba
+00001cd0: 6e6b 2035 2028 3136 3338 3420 6279 7465  nk 5 (16384 byte
+00001ce0: 733a 2031 3633 3834 2d33 3237 3637 2034  s: 16384-32767 4
+00001cf0: 3030 302d 3746 4646 290a 2020 2020 2020  000-7FFF).      
+00001d00: 2020 2020 2020 5241 4d20 6261 6e6b 2032        RAM bank 2
+00001d10: 2028 3136 3338 3420 6279 7465 733a 2033   (16384 bytes: 3
+00001d20: 3237 3638 2d34 3931 3531 2038 3030 302d  2768-49151 8000-
+00001d30: 4246 4646 290a 2020 2020 2020 2020 2020  BFFF).          
+00001d40: 2020 5241 4d20 6261 6e6b 2031 2028 3136    RAM bank 1 (16
+00001d50: 3338 3420 6279 7465 733a 2034 3931 3532  384 bytes: 49152
+00001d60: 2d36 3535 3335 2043 3030 302d 4646 4646  -65535 C000-FFFF
+00001d70: 290a 2020 2020 2020 2020 2020 2020 5241  ).            RA
+00001d80: 4d20 6261 6e6b 2030 2028 3136 3338 3420  M bank 0 (16384 
+00001d90: 6279 7465 7329 0a20 2020 2020 2020 2020  bytes).         
+00001da0: 2020 2052 414d 2062 616e 6b20 3320 2831     RAM bank 3 (1
+00001db0: 3633 3834 2062 7974 6573 290a 2020 2020  6384 bytes).    
+00001dc0: 2020 2020 2020 2020 5241 4d20 6261 6e6b          RAM bank
+00001dd0: 2034 2028 3136 3338 3420 6279 7465 7329   4 (16384 bytes)
+00001de0: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
+00001df0: 2062 616e 6b20 3620 2831 3633 3834 2062   bank 6 (16384 b
+00001e00: 7974 6573 290a 2020 2020 2020 2020 2020  ytes).          
+00001e10: 2020 5241 4d20 6261 6e6b 2037 2028 3136    RAM bank 7 (16
+00001e20: 3338 3420 6279 7465 7329 0a20 2020 2020  384 bytes).     
+00001e30: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+00001e40: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
+00001e50: 616d 202b 2068 6561 6465 7232 202b 2062  am + header2 + b
+00001e60: 616e 6b73 2c20 6578 705f 6f75 7470 7574  anks, exp_output
+00001e70: 2c20 6865 6164 6572 3d68 6561 6465 7229  , header=header)
+00001e80: 0a0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00001e90: 6e61 5f31 3238 6b5f 395f 6261 6e6b 7328  na_128k_9_banks(
+00001ea0: 7365 6c66 293a 0a20 2020 2020 2020 2068  self):.        h
+00001eb0: 6561 6465 7220 3d20 6c69 7374 2872 616e  eader = list(ran
+00001ec0: 6765 2832 3529 290a 2020 2020 2020 2020  ge(25)).        
+00001ed0: 6865 6164 6572 5b31 395d 203d 2030 2023  header[19] = 0 #
+00001ee0: 2049 6e74 6572 7275 7074 7320 6469 7361   Interrupts disa
+00001ef0: 626c 6564 0a20 2020 2020 2020 2068 6561  bled.        hea
+00001f00: 6465 722e 6170 7065 6e64 2831 2920 2320  der.append(1) # 
+00001f10: 494d 2031 0a20 2020 2020 2020 2068 6561  IM 1.        hea
+00001f20: 6465 722e 6170 7065 6e64 2835 2920 2320  der.append(5) # 
+00001f30: 424f 5244 4552 2035 0a20 2020 2020 2020  BORDER 5.       
+00001f40: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
+00001f50: 3532 0a20 2020 2020 2020 2068 6561 6465  52.        heade
+00001f60: 7232 203d 205b 302c 2039 365d 2023 2050  r2 = [0, 96] # P
+00001f70: 433d 3234 3537 360a 2020 2020 2020 2020  C=24576.        
+00001f80: 6865 6164 6572 322e 6170 7065 6e64 2832  header2.append(2
+00001f90: 2920 2320 506f 7274 2030 7837 6666 640a  ) # Port 0x7ffd.
+00001fa0: 2020 2020 2020 2020 6865 6164 6572 322e          header2.
+00001fb0: 6170 7065 6e64 2830 2920 2320 5452 2d44  append(0) # TR-D
+00001fc0: 4f53 2052 4f4d 206e 6f74 2070 6167 6564  OS ROM not paged
+00001fd0: 0a20 2020 2020 2020 2062 616e 6b73 203d  .        banks =
+00001fe0: 205b 305d 202a 2028 3620 2a20 3136 3338   [0] * (6 * 1638
+00001ff0: 3429 0a20 2020 2020 2020 2065 7870 5f6f  4).        exp_o
+00002000: 7574 7075 7420 3d20 2222 220a 2020 2020  utput = """.    
+00002010: 2020 2020 2020 2020 5241 4d3a 2031 3238          RAM: 128
+00002020: 4b0a 2020 2020 2020 2020 2020 2020 496e  K.            In
+00002030: 7465 7272 7570 7473 3a20 6469 7361 626c  terrupts: disabl
+00002040: 6564 0a20 2020 2020 2020 2020 2020 2049  ed.            I
+00002050: 6e74 6572 7275 7074 206d 6f64 653a 2031  nterrupt mode: 1
+00002060: 0a20 2020 2020 2020 2020 2020 2042 6f72  .            Bor
+00002070: 6465 723a 2035 0a20 2020 2020 2020 2020  der: 5.         
+00002080: 2020 2052 6567 6973 7465 7273 3a0a 2020     Registers:.  
+00002090: 2020 2020 2020 2020 2020 2020 5043 2020              PC  
+000020a0: 3234 3537 3620 3630 3030 2020 2020 5350  24576 6000    SP
+000020b0: 2020 2036 3136 3720 3138 3137 0a20 2020     6167 1817.   
+000020c0: 2020 2020 2020 2020 2020 2049 5820 2020             IX   
+000020d0: 3436 3235 2031 3231 3120 2020 2049 5920  4625 1211    IY 
+000020e0: 2020 3431 3131 2031 3030 460a 2020 2020    4111 100F.    
+000020f0: 2020 2020 2020 2020 2020 4920 2020 2020            I     
+00002100: 2020 3020 2020 3030 2020 2020 5220 2020    0   00    R   
+00002110: 2020 2032 3020 2020 3134 0a20 2020 2020     20   14.     
+00002120: 2020 2020 2020 2020 2042 2020 2020 2020           B      
+00002130: 3134 2020 2030 4520 2020 2042 2720 2020  14   0E    B'   
+00002140: 2020 2036 2020 2030 360a 2020 2020 2020     6   06.      
+00002150: 2020 2020 2020 2020 4320 2020 2020 2031          C      1
+00002160: 3320 2020 3044 2020 2020 4327 2020 2020  3   0D    C'    
+00002170: 2020 3520 2020 3035 0a20 2020 2020 2020    5   05.       
+00002180: 2020 2020 2020 2042 4320 2020 3335 3937         BC   3597
+00002190: 2030 4530 4420 2020 2042 4327 2020 3135   0E0D    BC'  15
+000021a0: 3431 2030 3630 350a 2020 2020 2020 2020  41 0605.        
+000021b0: 2020 2020 2020 4420 2020 2020 2031 3220        D      12 
+000021c0: 2020 3043 2020 2020 4427 2020 2020 2020    0C    D'      
+000021d0: 3420 2020 3034 0a20 2020 2020 2020 2020  4   04.         
+000021e0: 2020 2020 2045 2020 2020 2020 3131 2020       E      11  
+000021f0: 2030 4220 2020 2045 2720 2020 2020 2033   0B    E'      3
+00002200: 2020 2030 330a 2020 2020 2020 2020 2020     03.          
+00002210: 2020 2020 4445 2020 2033 3038 3320 3043      DE   3083 0C
+00002220: 3042 2020 2020 4445 2720 2031 3032 3720  0B    DE'  1027 
+00002230: 3034 3033 0a20 2020 2020 2020 2020 2020  0403.           
+00002240: 2020 2048 2020 2020 2020 3130 2020 2030     H      10   0
+00002250: 4120 2020 2048 2720 2020 2020 2032 2020  A    H'      2  
+00002260: 2030 320a 2020 2020 2020 2020 2020 2020   02.            
+00002270: 2020 4c20 2020 2020 2020 3920 2020 3039    L       9   09
+00002280: 2020 2020 4c27 2020 2020 2020 3120 2020      L'      1   
+00002290: 3031 0a20 2020 2020 2020 2020 2020 2020  01.             
+000022a0: 2048 4c20 2020 3235 3639 2030 4130 3920   HL   2569 0A09 
+000022b0: 2020 2048 4c27 2020 2035 3133 2030 3230     HL'   513 020
+000022c0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+000022d0: 4120 2020 2020 2032 3220 2020 3136 2020  A      22   16  
+000022e0: 2020 4127 2020 2020 2020 3820 2020 3038    A'      8   08
+000022f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002300: 2053 5a35 4833 504e 4320 2020 2020 2020   SZ5H3PNC       
+00002310: 2020 2020 535a 3548 3350 4e43 0a20 2020      SZ5H3PNC.   
+00002320: 2020 2020 2020 2020 2020 2046 2030 3030             F 000
+00002330: 3130 3130 3120 2020 2020 2020 2046 2720  10101        F' 
+00002340: 3030 3030 3031 3131 0a20 2020 2020 2020  00000111.       
+00002350: 2020 2020 2052 414d 2062 616e 6b20 3520       RAM bank 5 
+00002360: 2831 3633 3834 2062 7974 6573 3a20 3136  (16384 bytes: 16
+00002370: 3338 342d 3332 3736 3720 3430 3030 2d37  384-32767 4000-7
+00002380: 4646 4629 0a20 2020 2020 2020 2020 2020  FFF).           
+00002390: 2052 414d 2062 616e 6b20 3220 2831 3633   RAM bank 2 (163
+000023a0: 3834 2062 7974 6573 3a20 3332 3736 382d  84 bytes: 32768-
+000023b0: 3439 3135 3120 3830 3030 2d42 4646 4629  49151 8000-BFFF)
+000023c0: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
+000023d0: 2062 616e 6b20 3220 2831 3633 3834 2062   bank 2 (16384 b
+000023e0: 7974 6573 3a20 3439 3135 322d 3635 3533  ytes: 49152-6553
+000023f0: 3520 4330 3030 2d46 4646 4629 0a20 2020  5 C000-FFFF).   
+00002400: 2020 2020 2020 2020 2052 414d 2062 616e           RAM ban
+00002410: 6b20 3020 2831 3633 3834 2062 7974 6573  k 0 (16384 bytes
+00002420: 290a 2020 2020 2020 2020 2020 2020 5241  ).            RA
+00002430: 4d20 6261 6e6b 2031 2028 3136 3338 3420  M bank 1 (16384 
+00002440: 6279 7465 7329 0a20 2020 2020 2020 2020  bytes).         
+00002450: 2020 2052 414d 2062 616e 6b20 3320 2831     RAM bank 3 (1
+00002460: 3633 3834 2062 7974 6573 290a 2020 2020  6384 bytes).    
+00002470: 2020 2020 2020 2020 5241 4d20 6261 6e6b          RAM bank
+00002480: 2034 2028 3136 3338 3420 6279 7465 7329   4 (16384 bytes)
+00002490: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
+000024a0: 2062 616e 6b20 3620 2831 3633 3834 2062   bank 6 (16384 b
+000024b0: 7974 6573 290a 2020 2020 2020 2020 2020  ytes).          
+000024c0: 2020 5241 4d20 6261 6e6b 2037 2028 3136    RAM bank 7 (16
+000024d0: 3338 3420 6279 7465 7329 0a20 2020 2020  384 bytes).     
+000024e0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+000024f0: 656c 662e 5f74 6573 745f 736e 6128 7261  elf._test_sna(ra
+00002500: 6d20 2b20 6865 6164 6572 3220 2b20 6261  m + header2 + ba
+00002510: 6e6b 732c 2065 7870 5f6f 7574 7075 742c  nks, exp_output,
+00002520: 2068 6561 6465 723d 6865 6164 6572 290a   header=header).
+00002530: 0a20 2020 2064 6566 2074 6573 745f 736e  .    def test_sn
+00002540: 615f 6261 645f 7369 7a65 2873 656c 6629  a_bad_size(self)
+00002550: 3a0a 2020 2020 2020 2020 666f 7220 7369  :.        for si
+00002560: 7a65 2069 6e20 2834 3931 3738 2c20 3439  ze in (49178, 49
+00002570: 3138 302c 2031 3331 3130 342c 2031 3437  180, 131104, 147
+00002580: 3438 3829 3a0a 2020 2020 2020 2020 2020  488):.          
+00002590: 2020 696e 6669 6c65 203d 2073 656c 662e    infile = self.
+000025a0: 7772 6974 655f 6269 6e5f 6669 6c65 285b  write_bin_file([
+000025b0: 305d 202a 2073 697a 652c 2073 7566 6669  0] * size, suffi
+000025c0: 783d 272e 736e 6127 290a 2020 2020 2020  x='.sna').      
+000025d0: 2020 2020 2020 7769 7468 2073 656c 662e        with self.
+000025e0: 6173 7365 7274 5261 6973 6573 2853 6b6f  assertRaises(Sko
+000025f0: 6f6c 4b69 7445 7272 6f72 2920 6173 2063  olKitError) as c
+00002600: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
+00002610: 2020 2073 656c 662e 7275 6e5f 736e 6170     self.run_snap
+00002620: 696e 666f 2869 6e66 696c 6529 0a20 2020  info(infile).   
+00002630: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00002640: 7365 7274 4571 7561 6c28 636d 2e65 7863  sertEqual(cm.exc
+00002650: 6570 7469 6f6e 2e61 7267 735b 305d 2c20  eption.args[0], 
+00002660: 2749 6e76 616c 6964 2053 4e41 2066 696c  'Invalid SNA fil
+00002670: 6527 290a 0a20 2020 2064 6566 2074 6573  e')..    def tes
+00002680: 745f 7a38 3076 315f 756e 636f 6d70 7265  t_z80v1_uncompre
+00002690: 7373 6564 2873 656c 6629 3a0a 2020 2020  ssed(self):.    
+000026a0: 2020 2020 6865 6164 6572 203d 206c 6973      header = lis
+000026b0: 7428 7261 6e67 6528 3136 2c20 3436 2929  t(range(16, 46))
+000026c0: 0a20 2020 2020 2020 2068 6561 6465 725b  .        header[
+000026d0: 3132 5d20 3d20 3132 2023 2042 4f52 4445  12] = 12 # BORDE
+000026e0: 5220 362c 2075 6e63 6f6d 7072 6573 7365  R 6, uncompresse
+000026f0: 6420 5241 4d0a 2020 2020 2020 2020 6865  d RAM.        he
+00002700: 6164 6572 5b32 395d 207c 3d20 3420 2320  ader[29] |= 4 # 
+00002710: 4973 7375 6520 3220 656d 756c 6174 696f  Issue 2 emulatio
+00002720: 6e20 656e 6162 6c65 640a 2020 2020 2020  n enabled.      
+00002730: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
+00002740: 2222 0a20 2020 2020 2020 2020 2020 2056  "".            V
+00002750: 6572 7369 6f6e 3a20 310a 2020 2020 2020  ersion: 1.      
+00002760: 2020 2020 2020 4d61 6368 696e 653a 2034        Machine: 4
+00002770: 384b 2053 7065 6374 7275 6d0a 2020 2020  8K Spectrum.    
+00002780: 2020 2020 2020 2020 496e 7465 7272 7570          Interrup
+00002790: 7473 3a20 656e 6162 6c65 640a 2020 2020  ts: enabled.    
+000027a0: 2020 2020 2020 2020 496e 7465 7272 7570          Interrup
+000027b0: 7420 6d6f 6465 3a20 310a 2020 2020 2020  t mode: 1.      
+000027c0: 2020 2020 2020 4973 7375 6520 3220 656d        Issue 2 em
+000027d0: 756c 6174 696f 6e3a 2065 6e61 626c 6564  ulation: enabled
+000027e0: 0a20 2020 2020 2020 2020 2020 2042 6f72  .            Bor
+000027f0: 6465 723a 2036 0a20 2020 2020 2020 2020  der: 6.         
+00002800: 2020 2052 6567 6973 7465 7273 3a0a 2020     Registers:.  
+00002810: 2020 2020 2020 2020 2020 2020 5043 2020              PC  
+00002820: 2035 3931 3020 3137 3136 2020 2020 5350   5910 1716    SP
+00002830: 2020 2036 3432 3420 3139 3138 0a20 2020     6424 1918.   
+00002840: 2020 2020 2020 2020 2020 2049 5820 2031             IX  1
+00002850: 3037 3933 2032 4132 3920 2020 2049 5920  0793 2A29    IY 
+00002860: 2031 3032 3739 2032 3832 370a 2020 2020   10279 2827.    
+00002870: 2020 2020 2020 2020 2020 4920 2020 2020            I     
+00002880: 2032 3620 2020 3141 2020 2020 5220 2020   26   1A    R   
+00002890: 2020 2032 3720 2020 3142 0a20 2020 2020     27   1B.     
+000028a0: 2020 2020 2020 2020 2042 2020 2020 2020           B      
+000028b0: 3139 2020 2031 3320 2020 2042 2720 2020  19   13    B'   
+000028c0: 2020 3332 2020 2032 300a 2020 2020 2020    32   20.      
+000028d0: 2020 2020 2020 2020 4320 2020 2020 2031          C      1
+000028e0: 3820 2020 3132 2020 2020 4327 2020 2020  8   12    C'    
+000028f0: 2033 3120 2020 3146 0a20 2020 2020 2020   31   1F.       
+00002900: 2020 2020 2020 2042 4320 2020 3438 3832         BC   4882
+00002910: 2031 3331 3220 2020 2042 4327 2020 3832   1312    BC'  82
+00002920: 3233 2032 3031 460a 2020 2020 2020 2020  23 201F.        
+00002930: 2020 2020 2020 4420 2020 2020 2033 3020        D      30 
+00002940: 2020 3145 2020 2020 4427 2020 2020 2033    1E    D'     3
+00002950: 3420 2020 3232 0a20 2020 2020 2020 2020  4   22.         
+00002960: 2020 2020 2045 2020 2020 2020 3239 2020       E      29  
+00002970: 2031 4420 2020 2045 2720 2020 2020 3333   1D    E'     33
+00002980: 2020 2032 310a 2020 2020 2020 2020 2020     21.          
+00002990: 2020 2020 4445 2020 2037 3730 3920 3145      DE   7709 1E
+000029a0: 3144 2020 2020 4445 2720 2038 3733 3720  1D    DE'  8737 
+000029b0: 3232 3231 0a20 2020 2020 2020 2020 2020  2221.           
+000029c0: 2020 2048 2020 2020 2020 3231 2020 2031     H      21   1
+000029d0: 3520 2020 2048 2720 2020 2020 3336 2020  5    H'     36  
+000029e0: 2032 340a 2020 2020 2020 2020 2020 2020   24.            
+000029f0: 2020 4c20 2020 2020 2032 3020 2020 3134    L      20   14
+00002a00: 2020 2020 4c27 2020 2020 2033 3520 2020      L'     35   
+00002a10: 3233 0a20 2020 2020 2020 2020 2020 2020  23.             
+00002a20: 2048 4c20 2020 3533 3936 2031 3531 3420   HL   5396 1514 
+00002a30: 2020 2048 4c27 2020 3932 3531 2032 3432     HL'  9251 242
+00002a40: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
+00002a50: 4120 2020 2020 2031 3620 2020 3130 2020  A      16   10  
+00002a60: 2020 4127 2020 2020 2033 3720 2020 3235    A'     37   25
+00002a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a80: 2053 5a35 4833 504e 4320 2020 2020 2020   SZ5H3PNC       
+00002a90: 2020 2020 535a 3548 3350 4e43 0a20 2020      SZ5H3PNC.   
+00002aa0: 2020 2020 2020 2020 2020 2046 2030 3030             F 000
+00002ab0: 3130 3030 3120 2020 2020 2020 2046 2720  10001        F' 
+00002ac0: 3030 3130 3031 3130 0a20 2020 2020 2020  00100110.       
+00002ad0: 2020 2020 2034 384b 2052 414d 2062 6c6f       48K RAM blo
+00002ae0: 636b 2028 3136 3338 342d 3635 3533 3520  ck (16384-65535 
+00002af0: 3430 3030 2d46 4646 4629 3a20 3439 3135  4000-FFFF): 4915
+00002b00: 3220 6279 7465 7320 2875 6e63 6f6d 7072  2 bytes (uncompr
+00002b10: 6573 7365 6429 0a20 2020 2020 2020 2022  essed).        "
+00002b20: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00002b30: 5f74 6573 745f 7a38 3028 6578 705f 6f75  _test_z80(exp_ou
+00002b40: 7470 7574 2c20 6865 6164 6572 2c20 7665  tput, header, ve
+00002b50: 7273 696f 6e3d 3129 0a0a 2020 2020 6465  rsion=1)..    de
+00002b60: 6620 7465 7374 5f7a 3830 7631 5f63 6f6d  f test_z80v1_com
+00002b70: 7072 6573 7365 6428 7365 6c66 293a 0a20  pressed(self):. 
+00002b80: 2020 2020 2020 2068 6561 6465 7220 3d20         header = 
+00002b90: 6c69 7374 2872 616e 6765 2831 362c 2034  list(range(16, 4
+00002ba0: 3629 290a 2020 2020 2020 2020 6865 6164  6)).        head
+00002bb0: 6572 5b31 325d 203d 2034 3220 2320 424f  er[12] = 42 # BO
+00002bc0: 5244 4552 2035 2c20 636f 6d70 7265 7373  RDER 5, compress
+00002bd0: 6564 2052 414d 0a20 2020 2020 2020 2068  ed RAM.        h
+00002be0: 6561 6465 725b 3239 5d20 7c3d 2034 2023  eader[29] |= 4 #
+00002bf0: 2049 7373 7565 2032 2065 6d75 6c61 7469   Issue 2 emulati
+00002c00: 6f6e 2065 6e61 626c 6564 0a20 2020 2020  on enabled.     
+00002c10: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+00002c20: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+00002c30: 5665 7273 696f 6e3a 2031 0a20 2020 2020  Version: 1.     
+00002c40: 2020 2020 2020 204d 6163 6869 6e65 3a20         Machine: 
+00002c50: 3438 4b20 5370 6563 7472 756d 0a20 2020  48K Spectrum.   
+00002c60: 2020 2020 2020 2020 2049 6e74 6572 7275           Interru
+00002c70: 7074 733a 2065 6e61 626c 6564 0a20 2020  pts: enabled.   
+00002c80: 2020 2020 2020 2020 2049 6e74 6572 7275           Interru
+00002c90: 7074 206d 6f64 653a 2031 0a20 2020 2020  pt mode: 1.     
+00002ca0: 2020 2020 2020 2049 7373 7565 2032 2065         Issue 2 e
+00002cb0: 6d75 6c61 7469 6f6e 3a20 656e 6162 6c65  mulation: enable
+00002cc0: 640a 2020 2020 2020 2020 2020 2020 426f  d.            Bo
+00002cd0: 7264 6572 3a20 350a 2020 2020 2020 2020  rder: 5.        
+00002ce0: 2020 2020 5265 6769 7374 6572 733a 0a20      Registers:. 
+00002cf0: 2020 2020 2020 2020 2020 2020 2050 4320               PC 
+00002d00: 2020 3539 3130 2031 3731 3620 2020 2053    5910 1716    S
+00002d10: 5020 2020 3634 3234 2031 3931 380a 2020  P   6424 1918.  
+00002d20: 2020 2020 2020 2020 2020 2020 4958 2020              IX  
+00002d30: 3130 3739 3320 3241 3239 2020 2020 4959  10793 2A29    IY
+00002d40: 2020 3130 3237 3920 3238 3237 0a20 2020    10279 2827.   
+00002d50: 2020 2020 2020 2020 2020 2049 2020 2020             I    
+00002d60: 2020 3236 2020 2031 4120 2020 2052 2020    26   1A    R  
+00002d70: 2020 2020 3237 2020 2031 420a 2020 2020      27   1B.    
+00002d80: 2020 2020 2020 2020 2020 4220 2020 2020            B     
+00002d90: 2031 3920 2020 3133 2020 2020 4227 2020   19   13    B'  
+00002da0: 2020 2033 3220 2020 3230 0a20 2020 2020     32   20.     
+00002db0: 2020 2020 2020 2020 2043 2020 2020 2020           C      
+00002dc0: 3138 2020 2031 3220 2020 2043 2720 2020  18   12    C'   
+00002dd0: 2020 3331 2020 2031 460a 2020 2020 2020    31   1F.      
+00002de0: 2020 2020 2020 2020 4243 2020 2034 3838          BC   488
+00002df0: 3220 3133 3132 2020 2020 4243 2720 2038  2 1312    BC'  8
+00002e00: 3232 3320 3230 3146 0a20 2020 2020 2020  223 201F.       
+00002e10: 2020 2020 2020 2044 2020 2020 2020 3330         D      30
+00002e20: 2020 2031 4520 2020 2044 2720 2020 2020     1E    D'     
+00002e30: 3334 2020 2032 320a 2020 2020 2020 2020  34   22.        
+00002e40: 2020 2020 2020 4520 2020 2020 2032 3920        E      29 
+00002e50: 2020 3144 2020 2020 4527 2020 2020 2033    1D    E'     3
+00002e60: 3320 2020 3231 0a20 2020 2020 2020 2020  3   21.         
+00002e70: 2020 2020 2044 4520 2020 3737 3039 2031       DE   7709 1
+00002e80: 4531 4420 2020 2044 4527 2020 3837 3337  E1D    DE'  8737
+00002e90: 2032 3232 310a 2020 2020 2020 2020 2020   2221.          
+00002ea0: 2020 2020 4820 2020 2020 2032 3120 2020      H      21   
+00002eb0: 3135 2020 2020 4827 2020 2020 2033 3620  15    H'     36 
+00002ec0: 2020 3234 0a20 2020 2020 2020 2020 2020    24.           
+00002ed0: 2020 204c 2020 2020 2020 3230 2020 2031     L      20   1
+00002ee0: 3420 2020 204c 2720 2020 2020 3335 2020  4    L'     35  
+00002ef0: 2032 330a 2020 2020 2020 2020 2020 2020   23.            
+00002f00: 2020 484c 2020 2035 3339 3620 3135 3134    HL   5396 1514
+00002f10: 2020 2020 484c 2720 2039 3235 3120 3234      HL'  9251 24
+00002f20: 3233 0a20 2020 2020 2020 2020 2020 2020  23.             
+00002f30: 2041 2020 2020 2020 3136 2020 2031 3020   A      16   10 
+00002f40: 2020 2041 2720 2020 2020 3337 2020 2032     A'     37   2
+00002f50: 350a 2020 2020 2020 2020 2020 2020 2020  5.              
+00002f60: 2020 535a 3548 3350 4e43 2020 2020 2020    SZ5H3PNC      
+00002f70: 2020 2020 2053 5a35 4833 504e 430a 2020       SZ5H3PNC.  
+00002f80: 2020 2020 2020 2020 2020 2020 4620 3030              F 00
+00002f90: 3031 3030 3031 2020 2020 2020 2020 4627  010001        F'
+00002fa0: 2030 3031 3030 3131 300a 2020 2020 2020   00100110.      
+00002fb0: 2020 2020 2020 3438 4b20 5241 4d20 626c        48K RAM bl
+00002fc0: 6f63 6b20 2831 3633 3834 2d36 3535 3335  ock (16384-65535
+00002fd0: 2034 3030 302d 4646 4646 293a 2037 3736   4000-FFFF): 776
+00002fe0: 2062 7974 6573 2028 636f 6d70 7265 7373   bytes (compress
+00002ff0: 6564 290a 2020 2020 2020 2020 2222 220a  ed).        """.
+00003000: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+00003010: 7374 5f7a 3830 2865 7870 5f6f 7574 7075  st_z80(exp_outpu
+00003020: 742c 2068 6561 6465 722c 2076 6572 7369  t, header, versi
+00003030: 6f6e 3d31 2c20 636f 6d70 7265 7373 3d54  on=1, compress=T
+00003040: 7275 6529 0a0a 2020 2020 6465 6620 7465  rue)..    def te
+00003050: 7374 5f7a 3830 7632 5f34 386b 5f75 6e63  st_z80v2_48k_unc
+00003060: 6f6d 7072 6573 7365 6428 7365 6c66 293a  ompressed(self):
+00003070: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
+00003080: 3d20 6c69 7374 2872 616e 6765 2833 3029  = list(range(30)
+00003090: 290a 2020 2020 2020 2020 6865 6164 6572  ).        header
+000030a0: 5b36 3a38 5d20 3d20 5b30 2c20 305d 2023  [6:8] = [0, 0] #
+000030b0: 2056 6572 7369 6f6e 2032 2b0a 2020 2020   Version 2+.    
+000030c0: 2020 2020 6865 6164 6572 5b31 325d 203d      header[12] =
+000030d0: 2038 2023 2042 4f52 4445 5220 340a 2020   8 # BORDER 4.  
+000030e0: 2020 2020 2020 6865 6164 6572 5b32 395d        header[29]
+000030f0: 2026 3d20 3235 3120 2320 4973 7375 6520   &= 251 # Issue 
+00003100: 3220 656d 756c 6174 696f 6e20 6469 7361  2 emulation disa
+00003110: 626c 6564 0a20 2020 2020 2020 2068 6561  bled.        hea
+00003120: 6465 722e 6578 7465 6e64 2828 3233 2c20  der.extend((23, 
+00003130: 3029 2920 2320 5265 6d61 696e 696e 6720  0)) # Remaining 
+00003140: 6865 6164 6572 206c 656e 6774 6820 2876  header length (v
+00003150: 6572 7369 6f6e 2032 290a 2020 2020 2020  ersion 2).      
+00003160: 2020 6865 6164 6572 2e65 7874 656e 6428    header.extend(
+00003170: 2831 3733 2c20 3232 3229 2920 2320 5043  (173, 222)) # PC
+00003180: 3d35 3730 3035 0a20 2020 2020 2020 2068  =57005.        h
+00003190: 6561 6465 722e 6578 7465 6e64 285b 305d  eader.extend([0]
+000031a0: 202a 2028 6865 6164 6572 5b2d 345d 202d   * (header[-4] -
+000031b0: 2032 2929 0a20 2020 2020 2020 2065 7870   2)).        exp
+000031c0: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
+000031d0: 2020 2020 2020 2020 2020 5665 7273 696f            Versio
+000031e0: 6e3a 2032 0a20 2020 2020 2020 2020 2020  n: 2.           
+000031f0: 204d 6163 6869 6e65 3a20 3438 4b20 5370   Machine: 48K Sp
+00003200: 6563 7472 756d 0a20 2020 2020 2020 2020  ectrum.         
+00003210: 2020 2049 6e74 6572 7275 7074 733a 2065     Interrupts: e
+00003220: 6e61 626c 6564 0a20 2020 2020 2020 2020  nabled.         
+00003230: 2020 2049 6e74 6572 7275 7074 206d 6f64     Interrupt mod
+00003240: 653a 2031 0a20 2020 2020 2020 2020 2020  e: 1.           
+00003250: 2049 7373 7565 2032 2065 6d75 6c61 7469   Issue 2 emulati
+00003260: 6f6e 3a20 6469 7361 626c 6564 0a20 2020  on: disabled.   
+00003270: 2020 2020 2020 2020 2042 6f72 6465 723a           Border:
+00003280: 2034 0a20 2020 2020 2020 2020 2020 2052   4.            R
+00003290: 6567 6973 7465 7273 3a0a 2020 2020 2020  egisters:.      
+000032a0: 2020 2020 2020 2020 5043 2020 3537 3030          PC  5700
+000032b0: 3520 4445 4144 2020 2020 5350 2020 2032  5 DEAD    SP   2
+000032c0: 3331 3220 3039 3038 0a20 2020 2020 2020  312 0908.       
+000032d0: 2020 2020 2020 2049 5820 2020 3636 3831         IX   6681
+000032e0: 2031 4131 3920 2020 2049 5920 2020 3631   1A19    IY   61
+000032f0: 3637 2031 3831 370a 2020 2020 2020 2020  67 1817.        
+00003300: 2020 2020 2020 4920 2020 2020 2031 3020        I      10 
+00003310: 2020 3041 2020 2020 5220 2020 2020 2031    0A    R      1
+00003320: 3120 2020 3042 0a20 2020 2020 2020 2020  1   0B.         
+00003330: 2020 2020 2042 2020 2020 2020 2033 2020       B       3  
+00003340: 2030 3320 2020 2042 2720 2020 2020 3136   03    B'     16
+00003350: 2020 2031 300a 2020 2020 2020 2020 2020     10.          
+00003360: 2020 2020 4320 2020 2020 2020 3220 2020      C       2   
+00003370: 3032 2020 2020 4327 2020 2020 2031 3520  02    C'     15 
+00003380: 2020 3046 0a20 2020 2020 2020 2020 2020    0F.           
+00003390: 2020 2042 4320 2020 2037 3730 2030 3330     BC    770 030
+000033a0: 3220 2020 2042 4327 2020 3431 3131 2031  2    BC'  4111 1
+000033b0: 3030 460a 2020 2020 2020 2020 2020 2020  00F.            
+000033c0: 2020 4420 2020 2020 2031 3420 2020 3045    D      14   0E
+000033d0: 2020 2020 4427 2020 2020 2031 3820 2020      D'     18   
+000033e0: 3132 0a20 2020 2020 2020 2020 2020 2020  12.             
+000033f0: 2045 2020 2020 2020 3133 2020 2030 4420   E      13   0D 
+00003400: 2020 2045 2720 2020 2020 3137 2020 2031     E'     17   1
+00003410: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00003420: 4445 2020 2033 3539 3720 3045 3044 2020  DE   3597 0E0D  
+00003430: 2020 4445 2720 2034 3632 3520 3132 3131    DE'  4625 1211
+00003440: 0a20 2020 2020 2020 2020 2020 2020 2048  .              H
+00003450: 2020 2020 2020 2035 2020 2030 3520 2020         5   05   
+00003460: 2048 2720 2020 2020 3230 2020 2031 340a   H'     20   14.
+00003470: 2020 2020 2020 2020 2020 2020 2020 4c20                L 
+00003480: 2020 2020 2020 3420 2020 3034 2020 2020        4   04    
+00003490: 4c27 2020 2020 2031 3920 2020 3133 0a20  L'     19   13. 
+000034a0: 2020 2020 2020 2020 2020 2020 2048 4c20               HL 
+000034b0: 2020 3132 3834 2030 3530 3420 2020 2048    1284 0504    H
+000034c0: 4c27 2020 3531 3339 2031 3431 330a 2020  L'  5139 1413.  
+000034d0: 2020 2020 2020 2020 2020 2020 4120 2020              A   
+000034e0: 2020 2020 3020 2020 3030 2020 2020 4127      0   00    A'
+000034f0: 2020 2020 2032 3120 2020 3135 0a20 2020       21   15.   
+00003500: 2020 2020 2020 2020 2020 2020 2053 5a35               SZ5
+00003510: 4833 504e 4320 2020 2020 2020 2020 2020  H3PNC           
+00003520: 535a 3548 3350 4e43 0a20 2020 2020 2020  SZ5H3PNC.       
+00003530: 2020 2020 2020 2046 2030 3030 3030 3030         F 0000000
+00003540: 3120 2020 2020 2020 2046 2720 3030 3031  1        F' 0001
+00003550: 3031 3130 0a20 2020 2020 2020 2020 2020  0110.           
+00003560: 2052 414d 2062 6c6f 636b 2034 2028 3332   RAM block 4 (32
+00003570: 3736 382d 3439 3135 3120 3830 3030 2d42  768-49151 8000-B
+00003580: 4646 4629 3a20 3136 3338 3420 6279 7465  FFF): 16384 byte
+00003590: 7320 2875 6e63 6f6d 7072 6573 7365 6429  s (uncompressed)
+000035a0: 0a20 2020 2020 2020 2020 2020 2052 414d  .            RAM
+000035b0: 2062 6c6f 636b 2035 2028 3439 3135 322d   block 5 (49152-
+000035c0: 3635 3533 3520 4330 3030 2d46 4646 4629  65535 C000-FFFF)
+000035d0: 3a20 3136 3338 3420 6279 7465 7320 2875  : 16384 bytes (u
+000035e0: 6e63 6f6d 7072 6573 7365 6429 0a20 2020  ncompressed).   
+000035f0: 2020 2020 2020 2020 2052 414d 2062 6c6f           RAM blo
+00003600: 636b 2038 2028 3136 3338 342d 3332 3736  ck 8 (16384-3276
+00003610: 3720 3430 3030 2d37 4646 4629 3a20 3136  7 4000-7FFF): 16
+00003620: 3338 3420 6279 7465 7320 2875 6e63 6f6d  384 bytes (uncom
+00003630: 7072 6573 7365 6429 0a20 2020 2020 2020  pressed).       
+00003640: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00003650: 662e 5f74 6573 745f 7a38 3028 6578 705f  f._test_z80(exp_
+00003660: 6f75 7470 7574 2c20 6865 6164 6572 2c20  output, header, 
+00003670: 7665 7273 696f 6e3d 3229 0a0a 2020 2020  version=2)..    
+00003680: 6465 6620 7465 7374 5f7a 3830 7632 5f34  def test_z80v2_4
+00003690: 386b 5f63 6f6d 7072 6573 7365 6428 7365  8k_compressed(se
+000036a0: 6c66 293a 0a20 2020 2020 2020 2068 6561  lf):.        hea
+000036b0: 6465 7220 3d20 6c69 7374 2872 616e 6765  der = list(range
+000036c0: 2833 3029 290a 2020 2020 2020 2020 6865  (30)).        he
+000036d0: 6164 6572 5b36 3a38 5d20 3d20 5b30 2c20  ader[6:8] = [0, 
+000036e0: 305d 2023 2056 6572 7369 6f6e 2032 2b0a  0] # Version 2+.
+000036f0: 2020 2020 2020 2020 6865 6164 6572 5b31          header[1
+00003700: 325d 203d 2031 3020 2320 424f 5244 4552  2] = 10 # BORDER
+00003710: 2035 0a20 2020 2020 2020 2068 6561 6465   5.        heade
+00003720: 725b 3239 5d20 7c3d 2034 2023 2049 7373  r[29] |= 4 # Iss
+00003730: 7565 2032 2065 6d75 6c61 7469 6f6e 2065  ue 2 emulation e
+00003740: 6e61 626c 6564 0a20 2020 2020 2020 2068  nabled.        h
+00003750: 6561 6465 722e 6578 7465 6e64 2828 3233  eader.extend((23
+00003760: 2c20 3029 2920 2320 5265 6d61 696e 696e  , 0)) # Remainin
+00003770: 6720 6865 6164 6572 206c 656e 6774 6820  g header length 
+00003780: 2876 6572 7369 6f6e 2032 290a 2020 2020  (version 2).    
+00003790: 2020 2020 6865 6164 6572 2e65 7874 656e      header.exten
+000037a0: 6428 2832 3339 2c20 3139 3029 2920 2320  d((239, 190)) # 
+000037b0: 5043 3d34 3838 3739 0a20 2020 2020 2020  PC=48879.       
+000037c0: 2068 6561 6465 722e 6578 7465 6e64 285b   header.extend([
+000037d0: 305d 202a 2028 6865 6164 6572 5b2d 345d  0] * (header[-4]
+000037e0: 202d 2032 2929 0a20 2020 2020 2020 2065   - 2)).        e
+000037f0: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+00003800: 2020 2020 2020 2020 2020 2020 5665 7273              Vers
+00003810: 696f 6e3a 2032 0a20 2020 2020 2020 2020  ion: 2.         
+00003820: 2020 204d 6163 6869 6e65 3a20 3438 4b20     Machine: 48K 
+00003830: 5370 6563 7472 756d 0a20 2020 2020 2020  Spectrum.       
+00003840: 2020 2020 2049 6e74 6572 7275 7074 733a       Interrupts:
+00003850: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
+00003860: 2020 2020 2049 6e74 6572 7275 7074 206d       Interrupt m
+00003870: 6f64 653a 2031 0a20 2020 2020 2020 2020  ode: 1.         
+00003880: 2020 2049 7373 7565 2032 2065 6d75 6c61     Issue 2 emula
+00003890: 7469 6f6e 3a20 656e 6162 6c65 640a 2020  tion: enabled.  
+000038a0: 2020 2020 2020 2020 2020 426f 7264 6572            Border
+000038b0: 3a20 350a 2020 2020 2020 2020 2020 2020  : 5.            
+000038c0: 5265 6769 7374 6572 733a 0a20 2020 2020  Registers:.     
+000038d0: 2020 2020 2020 2020 2050 4320 2034 3838           PC  488
+000038e0: 3739 2042 4545 4620 2020 2053 5020 2020  79 BEEF    SP   
+000038f0: 3233 3132 2030 3930 380a 2020 2020 2020  2312 0908.      
+00003900: 2020 2020 2020 2020 4958 2020 2036 3638          IX   668
+00003910: 3120 3141 3139 2020 2020 4959 2020 2036  1 1A19    IY   6
+00003920: 3136 3720 3138 3137 0a20 2020 2020 2020  167 1817.       
+00003930: 2020 2020 2020 2049 2020 2020 2020 3130         I      10
+00003940: 2020 2030 4120 2020 2052 2020 2020 2020     0A    R      
+00003950: 3131 2020 2030 420a 2020 2020 2020 2020  11   0B.        
+00003960: 2020 2020 2020 4220 2020 2020 2020 3320        B       3 
+00003970: 2020 3033 2020 2020 4227 2020 2020 2031    03    B'     1
+00003980: 3620 2020 3130 0a20 2020 2020 2020 2020  6   10.         
+00003990: 2020 2020 2043 2020 2020 2020 2032 2020       C       2  
+000039a0: 2030 3220 2020 2043 2720 2020 2020 3135   02    C'     15
+000039b0: 2020 2030 460a 2020 2020 2020 2020 2020     0F.          
+000039c0: 2020 2020 4243 2020 2020 3737 3020 3033      BC    770 03
+000039d0: 3032 2020 2020 4243 2720 2034 3131 3120  02    BC'  4111 
+000039e0: 3130 3046 0a20 2020 2020 2020 2020 2020  100F.           
+000039f0: 2020 2044 2020 2020 2020 3134 2020 2030     D      14   0
+00003a00: 4520 2020 2044 2720 2020 2020 3138 2020  E    D'     18  
+00003a10: 2031 320a 2020 2020 2020 2020 2020 2020   12.            
+00003a20: 2020 4520 2020 2020 2031 3320 2020 3044    E      13   0D
+00003a30: 2020 2020 4527 2020 2020 2031 3720 2020      E'     17   
+00003a40: 3131 0a20 2020 2020 2020 2020 2020 2020  11.             
+00003a50: 2044 4520 2020 3335 3937 2030 4530 4420   DE   3597 0E0D 
+00003a60: 2020 2044 4527 2020 3436 3235 2031 3231     DE'  4625 121
+00003a70: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00003a80: 4820 2020 2020 2020 3520 2020 3035 2020  H       5   05  
+00003a90: 2020 4827 2020 2020 2032 3020 2020 3134    H'     20   14
+00003aa0: 0a20 2020 2020 2020 2020 2020 2020 204c  .              L
+00003ab0: 2020 2020 2020 2034 2020 2030 3420 2020         4   04   
+00003ac0: 204c 2720 2020 2020 3139 2020 2031 330a   L'     19   13.
+00003ad0: 2020 2020 2020 2020 2020 2020 2020 484c                HL
+00003ae0: 2020 2031 3238 3420 3035 3034 2020 2020     1284 0504    
+00003af0: 484c 2720 2035 3133 3920 3134 3133 0a20  HL'  5139 1413. 
+00003b00: 2020 2020 2020 2020 2020 2020 2041 2020               A  
+00003b10: 2020 2020 2030 2020 2030 3020 2020 2041       0   00    A
+00003b20: 2720 2020 2020 3231 2020 2031 350a 2020  '     21   15.  
+00003b30: 2020 2020 2020 2020 2020 2020 2020 535a                SZ
+00003b40: 3548 3350 4e43 2020 2020 2020 2020 2020  5H3PNC          
+00003b50: 2053 5a35 4833 504e 430a 2020 2020 2020   SZ5H3PNC.      
+00003b60: 2020 2020 2020 2020 4620 3030 3030 3030          F 000000
+00003b70: 3031 2020 2020 2020 2020 4627 2030 3030  01        F' 000
+00003b80: 3130 3131 300a 2020 2020 2020 2020 2020  10110.          
+00003b90: 2020 5241 4d20 626c 6f63 6b20 3420 2833    RAM block 4 (3
+00003ba0: 3237 3638 2d34 3931 3531 2038 3030 302d  2768-49151 8000-
+00003bb0: 4246 4646 293a 2032 3630 2062 7974 6573  BFFF): 260 bytes
+00003bc0: 2028 636f 6d70 7265 7373 6564 290a 2020   (compressed).  
+00003bd0: 2020 2020 2020 2020 2020 5241 4d20 626c            RAM bl
+00003be0: 6f63 6b20 3520 2834 3931 3532 2d36 3535  ock 5 (49152-655
+00003bf0: 3335 2043 3030 302d 4646 4646 293a 2032  35 C000-FFFF): 2
+00003c00: 3630 2062 7974 6573 2028 636f 6d70 7265  60 bytes (compre
+00003c10: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
+00003c20: 2020 5241 4d20 626c 6f63 6b20 3820 2831    RAM block 8 (1
+00003c30: 3633 3834 2d33 3237 3637 2034 3030 302d  6384-32767 4000-
+00003c40: 3746 4646 293a 2032 3630 2062 7974 6573  7FFF): 260 bytes
+00003c50: 2028 636f 6d70 7265 7373 6564 290a 2020   (compressed).  
+00003c60: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00003c70: 2020 7365 6c66 2e5f 7465 7374 5f7a 3830    self._test_z80
+00003c80: 2865 7870 5f6f 7574 7075 742c 2068 6561  (exp_output, hea
+00003c90: 6465 722c 2076 6572 7369 6f6e 3d32 2c20  der, version=2, 
+00003ca0: 636f 6d70 7265 7373 3d54 7275 6529 0a0a  compress=True)..
+00003cb0: 2020 2020 6465 6620 7465 7374 5f7a 3830      def test_z80
+00003cc0: 7633 5f34 386b 5f75 6e63 6f6d 7072 6573  v3_48k_uncompres
+00003cd0: 7365 6428 7365 6c66 293a 0a20 2020 2020  sed(self):.     
+00003ce0: 2020 2068 6561 6465 7220 3d20 6c69 7374     header = list
+00003cf0: 2872 616e 6765 2833 3029 290a 2020 2020  (range(30)).    
+00003d00: 2020 2020 6865 6164 6572 5b36 3a38 5d20      header[6:8] 
+00003d10: 3d20 5b30 2c20 305d 2023 2056 6572 7369  = [0, 0] # Versi
+00003d20: 6f6e 2032 2b0a 2020 2020 2020 2020 6865  on 2+.        he
+00003d30: 6164 6572 5b31 325d 203d 2036 2023 2042  ader[12] = 6 # B
+00003d40: 4f52 4445 5220 330a 2020 2020 2020 2020  ORDER 3.        
+00003d50: 6865 6164 6572 5b32 395d 2026 3d20 3235  header[29] &= 25
+00003d60: 3120 2320 4973 7375 6520 3220 656d 756c  1 # Issue 2 emul
+00003d70: 6174 696f 6e20 6469 7361 626c 6564 0a20  ation disabled. 
+00003d80: 2020 2020 2020 2068 6561 6465 722e 6578         header.ex
+00003d90: 7465 6e64 2828 3534 2c20 3029 2920 2320  tend((54, 0)) # 
+00003da0: 5265 6d61 696e 696e 6720 6865 6164 6572  Remaining header
+00003db0: 206c 656e 6774 6820 2876 6572 7369 6f6e   length (version
+00003dc0: 2033 290a 2020 2020 2020 2020 6865 6164   3).        head
+00003dd0: 6572 2e65 7874 656e 6428 2832 3036 2c20  er.extend((206, 
+00003de0: 3235 3029 2920 2320 5043 3d36 3432 3036  250)) # PC=64206
+00003df0: 0a20 2020 2020 2020 2068 6561 6465 7220  .        header 
+00003e00: 2b3d 205b 305d 202a 2028 6865 6164 6572  += [0] * (header
+00003e10: 5b2d 345d 202d 2032 290a 2020 2020 2020  [-4] - 2).      
+00003e20: 2020 6865 6164 6572 5b35 353a 3538 5d20    header[55:58] 
+00003e30: 3d20 5b31 2c20 322c 2033 5d20 2320 542d  = [1, 2, 3] # T-
+00003e40: 7374 6174 6573 0a20 2020 2020 2020 2065  states.        e
+00003e50: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+00003e60: 2020 2020 2020 2020 2020 2020 5665 7273              Vers
+00003e70: 696f 6e3a 2033 0a20 2020 2020 2020 2020  ion: 3.         
+00003e80: 2020 204d 6163 6869 6e65 3a20 3438 4b20     Machine: 48K 
+00003e90: 5370 6563 7472 756d 0a20 2020 2020 2020  Spectrum.       
+00003ea0: 2020 2020 2049 6e74 6572 7275 7074 733a       Interrupts:
+00003eb0: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
+00003ec0: 2020 2020 2049 6e74 6572 7275 7074 206d       Interrupt m
+00003ed0: 6f64 653a 2031 0a20 2020 2020 2020 2020  ode: 1.         
+00003ee0: 2020 2049 7373 7565 2032 2065 6d75 6c61     Issue 2 emula
+00003ef0: 7469 6f6e 3a20 6469 7361 626c 6564 0a20  tion: disabled. 
+00003f00: 2020 2020 2020 2020 2020 2054 2d73 7461             T-sta
+00003f10: 7465 733a 2031 3639 3538 0a20 2020 2020  tes: 16958.     
+00003f20: 2020 2020 2020 2042 6f72 6465 723a 2033         Border: 3
+00003f30: 0a20 2020 2020 2020 2020 2020 2052 6567  .            Reg
+00003f40: 6973 7465 7273 3a0a 2020 2020 2020 2020  isters:.        
+00003f50: 2020 2020 2020 5043 2020 3634 3230 3620        PC  64206 
+00003f60: 4641 4345 2020 2020 5350 2020 2032 3331  FACE    SP   231
+00003f70: 3220 3039 3038 0a20 2020 2020 2020 2020  2 0908.         
+00003f80: 2020 2020 2049 5820 2020 3636 3831 2031       IX   6681 1
+00003f90: 4131 3920 2020 2049 5920 2020 3631 3637  A19    IY   6167
+00003fa0: 2031 3831 370a 2020 2020 2020 2020 2020   1817.          
+00003fb0: 2020 2020 4920 2020 2020 2031 3020 2020      I      10   
+00003fc0: 3041 2020 2020 5220 2020 2020 2031 3120  0A    R      11 
+00003fd0: 2020 3042 0a20 2020 2020 2020 2020 2020    0B.           
+00003fe0: 2020 2042 2020 2020 2020 2033 2020 2030     B       3   0
+00003ff0: 3320 2020 2042 2720 2020 2020 3136 2020  3    B'     16  
+00004000: 2031 300a 2020 2020 2020 2020 2020 2020   10.            
+00004010: 2020 4320 2020 2020 2020 3220 2020 3032    C       2   02
+00004020: 2020 2020 4327 2020 2020 2031 3520 2020      C'     15   
+00004030: 3046 0a20 2020 2020 2020 2020 2020 2020  0F.             
+00004040: 2042 4320 2020 2037 3730 2030 3330 3220   BC    770 0302 
+00004050: 2020 2042 4327 2020 3431 3131 2031 3030     BC'  4111 100
+00004060: 460a 2020 2020 2020 2020 2020 2020 2020  F.              
+00004070: 4420 2020 2020 2031 3420 2020 3045 2020  D      14   0E  
+00004080: 2020 4427 2020 2020 2031 3820 2020 3132    D'     18   12
+00004090: 0a20 2020 2020 2020 2020 2020 2020 2045  .              E
+000040a0: 2020 2020 2020 3133 2020 2030 4420 2020        13   0D   
+000040b0: 2045 2720 2020 2020 3137 2020 2031 310a   E'     17   11.
+000040c0: 2020 2020 2020 2020 2020 2020 2020 4445                DE
+000040d0: 2020 2033 3539 3720 3045 3044 2020 2020     3597 0E0D    
+000040e0: 4445 2720 2034 3632 3520 3132 3131 0a20  DE'  4625 1211. 
+000040f0: 2020 2020 2020 2020 2020 2020 2048 2020               H  
+00004100: 2020 2020 2035 2020 2030 3520 2020 2048       5   05    H
+00004110: 2720 2020 2020 3230 2020 2031 340a 2020  '     20   14.  
+00004120: 2020 2020 2020 2020 2020 2020 4c20 2020              L   
+00004130: 2020 2020 3420 2020 3034 2020 2020 4c27      4   04    L'
+00004140: 2020 2020 2031 3920 2020 3133 0a20 2020       19   13.   
+00004150: 2020 2020 2020 2020 2020 2048 4c20 2020             HL   
+00004160: 3132 3834 2030 3530 3420 2020 2048 4c27  1284 0504    HL'
+00004170: 2020 3531 3339 2031 3431 330a 2020 2020    5139 1413.    
+00004180: 2020 2020 2020 2020 2020 4120 2020 2020            A     
+00004190: 2020 3020 2020 3030 2020 2020 4127 2020    0   00    A'  
+000041a0: 2020 2032 3120 2020 3135 0a20 2020 2020     21   15.     
+000041b0: 2020 2020 2020 2020 2020 2053 5a35 4833             SZ5H3
+000041c0: 504e 4320 2020 2020 2020 2020 2020 535a  PNC           SZ
+000041d0: 3548 3350 4e43 0a20 2020 2020 2020 2020  5H3PNC.         
+000041e0: 2020 2020 2046 2030 3030 3030 3030 3120       F 00000001 
+000041f0: 2020 2020 2020 2046 2720 3030 3031 3031         F' 000101
+00004200: 3130 0a20 2020 2020 2020 2020 2020 2052  10.            R
+00004210: 414d 2062 6c6f 636b 2034 2028 3332 3736  AM block 4 (3276
+00004220: 382d 3439 3135 3120 3830 3030 2d42 4646  8-49151 8000-BFF
+00004230: 4629 3a20 3136 3338 3420 6279 7465 7320  F): 16384 bytes 
+00004240: 2875 6e63 6f6d 7072 6573 7365 6429 0a20  (uncompressed). 
+00004250: 2020 2020 2020 2020 2020 2052 414d 2062             RAM b
+00004260: 6c6f 636b 2035 2028 3439 3135 322d 3635  lock 5 (49152-65
+00004270: 3533 3520 4330 3030 2d46 4646 4629 3a20  535 C000-FFFF): 
+00004280: 3136 3338 3420 6279 7465 7320 2875 6e63  16384 bytes (unc
+00004290: 6f6d 7072 6573 7365 6429 0a20 2020 2020  ompressed).     
+000042a0: 2020 2020 2020 2052 414d 2062 6c6f 636b         RAM block
+000042b0: 2038 2028 3136 3338 342d 3332 3736 3720   8 (16384-32767 
+000042c0: 3430 3030 2d37 4646 4629 3a20 3136 3338  4000-7FFF): 1638
+000042d0: 3420 6279 7465 7320 2875 6e63 6f6d 7072  4 bytes (uncompr
+000042e0: 6573 7365 6429 0a20 2020 2020 2020 2022  essed).        "
+000042f0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00004300: 5f74 6573 745f 7a38 3028 6578 705f 6f75  _test_z80(exp_ou
+00004310: 7470 7574 2c20 6865 6164 6572 2c20 7665  tput, header, ve
+00004320: 7273 696f 6e3d 3329 0a0a 2020 2020 6465  rsion=3)..    de
+00004330: 6620 7465 7374 5f7a 3830 7633 5f34 386b  f test_z80v3_48k
+00004340: 5f63 6f6d 7072 6573 7365 6428 7365 6c66  _compressed(self
+00004350: 293a 0a20 2020 2020 2020 2068 6561 6465  ):.        heade
+00004360: 7220 3d20 6c69 7374 2872 616e 6765 2834  r = list(range(4
+00004370: 382c 2037 3829 290a 2020 2020 2020 2020  8, 78)).        
+00004380: 6865 6164 6572 5b36 3a38 5d20 3d20 5b30  header[6:8] = [0
+00004390: 2c20 305d 2023 2056 6572 7369 6f6e 2032  , 0] # Version 2
+000043a0: 2b0a 2020 2020 2020 2020 6865 6164 6572  +.        header
+000043b0: 5b31 325d 203d 2031 3420 2320 424f 5244  [12] = 14 # BORD
+000043c0: 4552 2037 0a20 2020 2020 2020 2068 6561  ER 7.        hea
+000043d0: 6465 725b 3237 5d20 3d20 3020 2320 496e  der[27] = 0 # In
+000043e0: 7465 7272 7570 7473 2064 6973 6162 6c65  terrupts disable
+000043f0: 640a 2020 2020 2020 2020 6865 6164 6572  d.        header
+00004400: 5b32 395d 207c 3d20 3420 2320 4973 7375  [29] |= 4 # Issu
+00004410: 6520 3220 656d 756c 6174 696f 6e20 656e  e 2 emulation en
+00004420: 6162 6c65 640a 2020 2020 2020 2020 6865  abled.        he
+00004430: 6164 6572 2e65 7874 656e 6428 2835 342c  ader.extend((54,
+00004440: 2030 2929 2023 2052 656d 6169 6e69 6e67   0)) # Remaining
+00004450: 2068 6561 6465 7220 6c65 6e67 7468 2028   header length (
+00004460: 7665 7273 696f 6e20 3329 0a20 2020 2020  version 3).     
+00004470: 2020 2068 6561 6465 722e 6578 7465 6e64     header.extend
+00004480: 2828 3138 332c 2032 3031 2929 2023 2050  ((183, 201)) # P
+00004490: 433d 3531 3633 390a 2020 2020 2020 2020  C=51639.        
+000044a0: 6865 6164 6572 202b 3d20 5b30 5d20 2a20  header += [0] * 
+000044b0: 2868 6561 6465 725b 2d34 5d20 2d20 3229  (header[-4] - 2)
+000044c0: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+000044d0: 7075 7420 3d20 2222 220a 2020 2020 2020  put = """.      
+000044e0: 2020 2020 2020 5665 7273 696f 6e3a 2033        Version: 3
+000044f0: 0a20 2020 2020 2020 2020 2020 204d 6163  .            Mac
+00004500: 6869 6e65 3a20 3438 4b20 5370 6563 7472  hine: 48K Spectr
+00004510: 756d 0a20 2020 2020 2020 2020 2020 2049  um.            I
+00004520: 6e74 6572 7275 7074 733a 2064 6973 6162  nterrupts: disab
+00004530: 6c65 640a 2020 2020 2020 2020 2020 2020  led.            
+00004540: 496e 7465 7272 7570 7420 6d6f 6465 3a20  Interrupt mode: 
+00004550: 310a 2020 2020 2020 2020 2020 2020 4973  1.            Is
+00004560: 7375 6520 3220 656d 756c 6174 696f 6e3a  sue 2 emulation:
+00004570: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
+00004580: 2020 2020 2054 2d73 7461 7465 733a 2033       T-states: 3
+00004590: 3439 3433 0a20 2020 2020 2020 2020 2020  4943.           
+000045a0: 2042 6f72 6465 723a 2037 0a20 2020 2020   Border: 7.     
+000045b0: 2020 2020 2020 2052 6567 6973 7465 7273         Registers
+000045c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000045d0: 5043 2020 3531 3633 3920 4339 4237 2020  PC  51639 C9B7  
+000045e0: 2020 5350 2020 3134 3634 3820 3339 3338    SP  14648 3938
+000045f0: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
+00004600: 5820 2031 3930 3137 2034 4134 3920 2020  X  19017 4A49   
+00004610: 2049 5920 2031 3835 3033 2034 3834 370a   IY  18503 4847.
+00004620: 2020 2020 2020 2020 2020 2020 2020 4920                I 
+00004630: 2020 2020 2035 3820 2020 3341 2020 2020       58   3A    
+00004640: 5220 2020 2020 2035 3920 2020 3342 0a20  R      59   3B. 
+00004650: 2020 2020 2020 2020 2020 2020 2042 2020               B  
+00004660: 2020 2020 3531 2020 2033 3320 2020 2042      51   33    B
+00004670: 2720 2020 2020 3634 2020 2034 300a 2020  '     64   40.  
+00004680: 2020 2020 2020 2020 2020 2020 4320 2020              C   
+00004690: 2020 2035 3020 2020 3332 2020 2020 4327     50   32    C'
+000046a0: 2020 2020 2036 3320 2020 3346 0a20 2020       63   3F.   
+000046b0: 2020 2020 2020 2020 2020 2042 4320 2031             BC  1
+000046c0: 3331 3036 2033 3333 3220 2020 2042 4327  3106 3332    BC'
+000046d0: 2031 3634 3437 2034 3033 460a 2020 2020   16447 403F.    
+000046e0: 2020 2020 2020 2020 2020 4420 2020 2020            D     
+000046f0: 2036 3220 2020 3345 2020 2020 4427 2020   62   3E    D'  
+00004700: 2020 2036 3620 2020 3432 0a20 2020 2020     66   42.     
+00004710: 2020 2020 2020 2020 2045 2020 2020 2020           E      
+00004720: 3631 2020 2033 4420 2020 2045 2720 2020  61   3D    E'   
+00004730: 2020 3635 2020 2034 310a 2020 2020 2020    65   41.      
+00004740: 2020 2020 2020 2020 4445 2020 3135 3933          DE  1593
+00004750: 3320 3345 3344 2020 2020 4445 2720 3136  3 3E3D    DE' 16
+00004760: 3936 3120 3432 3431 0a20 2020 2020 2020  961 4241.       
+00004770: 2020 2020 2020 2048 2020 2020 2020 3533         H      53
+00004780: 2020 2033 3520 2020 2048 2720 2020 2020     35    H'     
+00004790: 3638 2020 2034 340a 2020 2020 2020 2020  68   44.        
+000047a0: 2020 2020 2020 4c20 2020 2020 2035 3220        L      52 
+000047b0: 2020 3334 2020 2020 4c27 2020 2020 2036    34    L'     6
+000047c0: 3720 2020 3433 0a20 2020 2020 2020 2020  7   43.         
+000047d0: 2020 2020 2048 4c20 2031 3336 3230 2033       HL  13620 3
+000047e0: 3533 3420 2020 2048 4c27 2031 3734 3735  534    HL' 17475
+000047f0: 2034 3434 330a 2020 2020 2020 2020 2020   4443.          
+00004800: 2020 2020 4120 2020 2020 2034 3820 2020      A      48   
+00004810: 3330 2020 2020 4127 2020 2020 2036 3920  30    A'     69 
+00004820: 2020 3435 0a20 2020 2020 2020 2020 2020    45.           
+00004830: 2020 2020 2053 5a35 4833 504e 4320 2020       SZ5H3PNC   
+00004840: 2020 2020 2020 2020 535a 3548 3350 4e43          SZ5H3PNC
+00004850: 0a20 2020 2020 2020 2020 2020 2020 2046  .              F
+00004860: 2030 3031 3130 3030 3120 2020 2020 2020   00110001       
+00004870: 2046 2720 3031 3030 3031 3130 0a20 2020   F' 01000110.   
+00004880: 2020 2020 2020 2020 2052 414d 2062 6c6f           RAM blo
+00004890: 636b 2034 2028 3332 3736 382d 3439 3135  ck 4 (32768-4915
+000048a0: 3120 3830 3030 2d42 4646 4629 3a20 3236  1 8000-BFFF): 26
+000048b0: 3020 6279 7465 7320 2863 6f6d 7072 6573  0 bytes (compres
+000048c0: 7365 6429 0a20 2020 2020 2020 2020 2020  sed).           
+000048d0: 2052 414d 2062 6c6f 636b 2035 2028 3439   RAM block 5 (49
+000048e0: 3135 322d 3635 3533 3520 4330 3030 2d46  152-65535 C000-F
+000048f0: 4646 4629 3a20 3236 3020 6279 7465 7320  FFF): 260 bytes 
+00004900: 2863 6f6d 7072 6573 7365 6429 0a20 2020  (compressed).   
+00004910: 2020 2020 2020 2020 2052 414d 2062 6c6f           RAM blo
+00004920: 636b 2038 2028 3136 3338 342d 3332 3736  ck 8 (16384-3276
+00004930: 3720 3430 3030 2d37 4646 4629 3a20 3236  7 4000-7FFF): 26
+00004940: 3020 6279 7465 7320 2863 6f6d 7072 6573  0 bytes (compres
+00004950: 7365 6429 0a20 2020 2020 2020 2022 2222  sed).        """
+00004960: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00004970: 6573 745f 7a38 3028 6578 705f 6f75 7470  est_z80(exp_outp
+00004980: 7574 2c20 6865 6164 6572 2c20 7665 7273  ut, header, vers
+00004990: 696f 6e3d 332c 2063 6f6d 7072 6573 733d  ion=3, compress=
+000049a0: 5472 7565 290a 0a20 2020 2064 6566 2074  True)..    def t
+000049b0: 6573 745f 7a38 3076 335f 3132 386b 5f75  est_z80v3_128k_u
+000049c0: 6e63 6f6d 7072 6573 7365 6428 7365 6c66  ncompressed(self
+000049d0: 293a 0a20 2020 2020 2020 2068 6561 6465  ):.        heade
+000049e0: 7220 3d20 6c69 7374 2872 616e 6765 2833  r = list(range(3
+000049f0: 322c 2036 3229 290a 2020 2020 2020 2020  2, 62)).        
+00004a00: 6865 6164 6572 5b36 3a38 5d20 3d20 5b30  header[6:8] = [0
+00004a10: 2c20 305d 2023 2056 6572 7369 6f6e 2032  , 0] # Version 2
+00004a20: 2b0a 2020 2020 2020 2020 6865 6164 6572  +.        header
+00004a30: 5b31 325d 203d 2038 2023 2042 4f52 4445  [12] = 8 # BORDE
+00004a40: 5220 340a 2020 2020 2020 2020 6865 6164  R 4.        head
+00004a50: 6572 5b32 395d 2026 3d20 3235 3120 2320  er[29] &= 251 # 
+00004a60: 4973 7375 6520 3220 656d 756c 6174 696f  Issue 2 emulatio
+00004a70: 6e20 6469 7361 626c 6564 0a20 2020 2020  n disabled.     
+00004a80: 2020 2068 6561 6465 722e 6578 7465 6e64     header.extend
+00004a90: 2828 3534 2c20 3029 2920 2320 5265 6d61  ((54, 0)) # Rema
+00004aa0: 696e 696e 6720 6865 6164 6572 206c 656e  ining header len
+00004ab0: 6774 6820 2876 6572 7369 6f6e 2033 290a  gth (version 3).
+00004ac0: 2020 2020 2020 2020 6865 6164 6572 2e65          header.e
+00004ad0: 7874 656e 6428 2832 372c 2031 3031 2929  xtend((27, 101))
+00004ae0: 2023 2050 433d 3235 3838 330a 2020 2020   # PC=25883.    
+00004af0: 2020 2020 6865 6164 6572 2e61 7070 656e      header.appen
+00004b00: 6428 3429 2023 2031 3238 4b0a 2020 2020  d(4) # 128K.    
+00004b10: 2020 2020 6865 6164 6572 2e61 7070 656e      header.appen
+00004b20: 6428 3329 2023 2050 6f72 7420 3078 3766  d(3) # Port 0x7f
+00004b30: 6664 0a20 2020 2020 2020 2068 6561 6465  fd.        heade
+00004b40: 7220 2b3d 205b 305d 202a 2028 6865 6164  r += [0] * (head
+00004b50: 6572 5b2d 365d 202d 2034 290a 2020 2020  er[-6] - 4).    
+00004b60: 2020 2020 6865 6164 6572 5b33 385d 203d      header[38] =
+00004b70: 2032 2023 2050 6f72 7420 3078 6666 6664   2 # Port 0xfffd
+00004b80: 0a20 2020 2020 2020 2070 6167 6573 203d  .        pages =
+00004b90: 207b 6261 6e6b 3a20 5b30 5d20 2a20 3136   {bank: [0] * 16
+00004ba0: 3338 3420 666f 7220 6261 6e6b 2069 6e20  384 for bank in 
+00004bb0: 2831 2c20 332c 2034 2c20 362c 2037 297d  (1, 3, 4, 6, 7)}
+00004bc0: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+00004bd0: 7075 7420 3d20 2222 220a 2020 2020 2020  put = """.      
+00004be0: 2020 2020 2020 5665 7273 696f 6e3a 2033        Version: 3
+00004bf0: 0a20 2020 2020 2020 2020 2020 204d 6163  .            Mac
+00004c00: 6869 6e65 3a20 3132 384b 2053 7065 6374  hine: 128K Spect
+00004c10: 7275 6d0a 2020 2020 2020 2020 2020 2020  rum.            
+00004c20: 496e 7465 7272 7570 7473 3a20 656e 6162  Interrupts: enab
+00004c30: 6c65 640a 2020 2020 2020 2020 2020 2020  led.            
+00004c40: 496e 7465 7272 7570 7420 6d6f 6465 3a20  Interrupt mode: 
+00004c50: 310a 2020 2020 2020 2020 2020 2020 4973  1.            Is
+00004c60: 7375 6520 3220 656d 756c 6174 696f 6e3a  sue 2 emulation:
+00004c70: 2064 6973 6162 6c65 640a 2020 2020 2020   disabled.      
+00004c80: 2020 2020 2020 542d 7374 6174 6573 3a20        T-states: 
+00004c90: 3335 3435 330a 2020 2020 2020 2020 2020  35453.          
+00004ca0: 2020 426f 7264 6572 3a20 340a 2020 2020    Border: 4.    
+00004cb0: 2020 2020 2020 2020 506f 7274 2024 4646          Port $FF
+00004cc0: 4644 3a20 320a 2020 2020 2020 2020 2020  FD: 2.          
+00004cd0: 2020 506f 7274 2024 3746 4644 3a20 3320    Port $7FFD: 3 
+00004ce0: 2d20 6261 6e6b 2033 2028 626c 6f63 6b20  - bank 3 (block 
+00004cf0: 3629 2070 6167 6564 2069 6e74 6f20 3439  6) paged into 49
+00004d00: 3135 322d 3635 3533 3520 4330 3030 2d46  152-65535 C000-F
+00004d10: 4646 460a 2020 2020 2020 2020 2020 2020  FFF.            
+00004d20: 5265 6769 7374 6572 733a 0a20 2020 2020  Registers:.     
+00004d30: 2020 2020 2020 2020 2050 4320 2032 3538           PC  258
+00004d40: 3833 2036 3531 4220 2020 2053 5020 2031  83 651B    SP  1
+00004d50: 3035 3336 2032 3932 380a 2020 2020 2020  0536 2928.      
+00004d60: 2020 2020 2020 2020 4958 2020 3134 3930          IX  1490
+00004d70: 3520 3341 3339 2020 2020 4959 2020 3134  5 3A39    IY  14
+00004d80: 3339 3120 3338 3337 0a20 2020 2020 2020  391 3837.       
+00004d90: 2020 2020 2020 2049 2020 2020 2020 3432         I      42
+00004da0: 2020 2032 4120 2020 2052 2020 2020 2020     2A    R      
+00004db0: 3433 2020 2032 420a 2020 2020 2020 2020  43   2B.        
+00004dc0: 2020 2020 2020 4220 2020 2020 2033 3520        B      35 
+00004dd0: 2020 3233 2020 2020 4227 2020 2020 2034    23    B'     4
+00004de0: 3820 2020 3330 0a20 2020 2020 2020 2020  8   30.         
+00004df0: 2020 2020 2043 2020 2020 2020 3334 2020       C      34  
+00004e00: 2032 3220 2020 2043 2720 2020 2020 3437   22    C'     47
+00004e10: 2020 2032 460a 2020 2020 2020 2020 2020     2F.          
+00004e20: 2020 2020 4243 2020 2038 3939 3420 3233      BC   8994 23
+00004e30: 3232 2020 2020 4243 2720 3132 3333 3520  22    BC' 12335 
+00004e40: 3330 3246 0a20 2020 2020 2020 2020 2020  302F.           
+00004e50: 2020 2044 2020 2020 2020 3436 2020 2032     D      46   2
+00004e60: 4520 2020 2044 2720 2020 2020 3530 2020  E    D'     50  
+00004e70: 2033 320a 2020 2020 2020 2020 2020 2020   32.            
+00004e80: 2020 4520 2020 2020 2034 3520 2020 3244    E      45   2D
+00004e90: 2020 2020 4527 2020 2020 2034 3920 2020      E'     49   
+00004ea0: 3331 0a20 2020 2020 2020 2020 2020 2020  31.             
+00004eb0: 2044 4520 2031 3138 3231 2032 4532 4420   DE  11821 2E2D 
+00004ec0: 2020 2044 4527 2031 3238 3439 2033 3233     DE' 12849 323
+00004ed0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00004ee0: 4820 2020 2020 2033 3720 2020 3235 2020  H      37   25  
+00004ef0: 2020 4827 2020 2020 2035 3220 2020 3334    H'     52   34
+00004f00: 0a20 2020 2020 2020 2020 2020 2020 204c  .              L
+00004f10: 2020 2020 2020 3336 2020 2032 3420 2020        36   24   
+00004f20: 204c 2720 2020 2020 3531 2020 2033 330a   L'     51   33.
+00004f30: 2020 2020 2020 2020 2020 2020 2020 484c                HL
+00004f40: 2020 2039 3530 3820 3235 3234 2020 2020     9508 2524    
+00004f50: 484c 2720 3133 3336 3320 3334 3333 0a20  HL' 13363 3433. 
+00004f60: 2020 2020 2020 2020 2020 2020 2041 2020               A  
+00004f70: 2020 2020 3332 2020 2032 3020 2020 2041      32   20    A
+00004f80: 2720 2020 2020 3533 2020 2033 350a 2020  '     53   35.  
+00004f90: 2020 2020 2020 2020 2020 2020 2020 535a                SZ
+00004fa0: 3548 3350 4e43 2020 2020 2020 2020 2020  5H3PNC          
+00004fb0: 2053 5a35 4833 504e 430a 2020 2020 2020   SZ5H3PNC.      
+00004fc0: 2020 2020 2020 2020 4620 3030 3130 3030          F 001000
+00004fd0: 3031 2020 2020 2020 2020 4627 2030 3031  01        F' 001
+00004fe0: 3130 3131 300a 2020 2020 2020 2020 2020  10110.          
+00004ff0: 2020 5241 4d20 626c 6f63 6b20 333a 2031    RAM block 3: 1
+00005000: 3633 3834 2062 7974 6573 2028 756e 636f  6384 bytes (unco
+00005010: 6d70 7265 7373 6564 290a 2020 2020 2020  mpressed).      
+00005020: 2020 2020 2020 5241 4d20 626c 6f63 6b20        RAM block 
+00005030: 343a 2031 3633 3834 2062 7974 6573 2028  4: 16384 bytes (
+00005040: 756e 636f 6d70 7265 7373 6564 290a 2020  uncompressed).  
+00005050: 2020 2020 2020 2020 2020 5241 4d20 626c            RAM bl
+00005060: 6f63 6b20 3520 2833 3237 3638 2d34 3931  ock 5 (32768-491
+00005070: 3531 2038 3030 302d 4246 4646 293a 2031  51 8000-BFFF): 1
+00005080: 3633 3834 2062 7974 6573 2028 756e 636f  6384 bytes (unco
+00005090: 6d70 7265 7373 6564 290a 2020 2020 2020  mpressed).      
+000050a0: 2020 2020 2020 5241 4d20 626c 6f63 6b20        RAM block 
+000050b0: 3620 2834 3931 3532 2d36 3535 3335 2043  6 (49152-65535 C
+000050c0: 3030 302d 4646 4646 293a 2031 3633 3834  000-FFFF): 16384
+000050d0: 2062 7974 6573 2028 756e 636f 6d70 7265   bytes (uncompre
+000050e0: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
+000050f0: 2020 5241 4d20 626c 6f63 6b20 373a 2031    RAM block 7: 1
+00005100: 3633 3834 2062 7974 6573 2028 756e 636f  6384 bytes (unco
+00005110: 6d70 7265 7373 6564 290a 2020 2020 2020  mpressed).      
+00005120: 2020 2020 2020 5241 4d20 626c 6f63 6b20        RAM block 
+00005130: 3820 2831 3633 3834 2d33 3237 3637 2034  8 (16384-32767 4
+00005140: 3030 302d 3746 4646 293a 2031 3633 3834  000-7FFF): 16384
+00005150: 2062 7974 6573 2028 756e 636f 6d70 7265   bytes (uncompre
+00005160: 7373 6564 290a 2020 2020 2020 2020 2020  ssed).          
+00005170: 2020 5241 4d20 626c 6f63 6b20 393a 2031    RAM block 9: 1
+00005180: 3633 3834 2062 7974 6573 2028 756e 636f  6384 bytes (unco
+00005190: 6d70 7265 7373 6564 290a 2020 2020 2020  mpressed).      
+000051a0: 2020 2020 2020 5241 4d20 626c 6f63 6b20        RAM block 
+000051b0: 3130 3a20 3136 3338 3420 6279 7465 7320  10: 16384 bytes 
+000051c0: 2875 6e63 6f6d 7072 6573 7365 6429 0a20  (uncompressed). 
+000051d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000051e0: 2020 2073 656c 662e 5f74 6573 745f 7a38     self._test_z8
+000051f0: 3028 6578 705f 6f75 7470 7574 2c20 6865  0(exp_output, he
+00005200: 6164 6572 2c20 636f 6d70 7265 7373 3d46  ader, compress=F
+00005210: 616c 7365 2c20 6d61 6368 696e 655f 6964  alse, machine_id
+00005220: 3d34 2c20 7061 6765 733d 7061 6765 7329  =4, pages=pages)
+00005230: 0a0a 2020 2020 6465 6620 7465 7374 5f7a  ..    def test_z
+00005240: 3830 7633 5f31 3238 6b5f 636f 6d70 7265  80v3_128k_compre
+00005250: 7373 6564 2873 656c 6629 3a0a 2020 2020  ssed(self):.    
+00005260: 2020 2020 6865 6164 6572 203d 206c 6973      header = lis
+00005270: 7428 7261 6e67 6528 3332 2c20 3632 2929  t(range(32, 62))
+00005280: 0a20 2020 2020 2020 2068 6561 6465 725b  .        header[
+00005290: 363a 385d 203d 205b 302c 2030 5d20 2320  6:8] = [0, 0] # 
+000052a0: 5665 7273 696f 6e20 322b 0a20 2020 2020  Version 2+.     
+000052b0: 2020 2068 6561 6465 725b 3132 5d20 3d20     header[12] = 
+000052c0: 3134 2023 2042 4f52 4445 5220 370a 2020  14 # BORDER 7.  
+000052d0: 2020 2020 2020 6865 6164 6572 5b32 395d        header[29]
+000052e0: 207c 3d20 3420 2320 4973 7375 6520 3220   |= 4 # Issue 2 
+000052f0: 656d 756c 6174 696f 6e20 656e 6162 6c65  emulation enable
+00005300: 640a 2020 2020 2020 2020 6865 6164 6572  d.        header
+00005310: 2e65 7874 656e 6428 2835 342c 2030 2929  .extend((54, 0))
+00005320: 2023 2052 656d 6169 6e69 6e67 2068 6561   # Remaining hea
+00005330: 6465 7220 6c65 6e67 7468 2028 7665 7273  der length (vers
+00005340: 696f 6e20 3329 0a20 2020 2020 2020 2068  ion 3).        h
+00005350: 6561 6465 722e 6578 7465 6e64 2828 3233  eader.extend((23
+00005360: 372c 2032 3534 2929 2023 2050 433d 3635  7, 254)) # PC=65
+00005370: 3236 310a 2020 2020 2020 2020 6865 6164  261.        head
+00005380: 6572 2e61 7070 656e 6428 3429 2023 2031  er.append(4) # 1
+00005390: 3238 4b0a 2020 2020 2020 2020 6865 6164  28K.        head
+000053a0: 6572 2e61 7070 656e 6428 3329 2023 2050  er.append(3) # P
+000053b0: 6f72 7420 3078 3766 6664 0a20 2020 2020  ort 0x7ffd.     
+000053c0: 2020 2068 6561 6465 7220 2b3d 205b 305d     header += [0]
+000053d0: 202a 2028 6865 6164 6572 5b2d 365d 202d   * (header[-6] -
+000053e0: 2034 290a 2020 2020 2020 2020 6865 6164   4).        head
+000053f0: 6572 5b33 385d 203d 2037 2023 2050 6f72  er[38] = 7 # Por
+00005400: 7420 3078 6666 6664 0a20 2020 2020 2020  t 0xfffd.       
+00005410: 2068 6561 6465 725b 3535 3a35 385d 203d   header[55:58] =
+00005420: 205b 3632 2c20 3639 2c20 335d 2023 2054   [62, 69, 3] # T
+00005430: 2d73 7461 7465 730a 2020 2020 2020 2020  -states.        
+00005440: 7061 6765 7320 3d20 7b62 616e 6b3a 205b  pages = {bank: [
+00005450: 305d 202a 2031 3633 3834 2066 6f72 2062  0] * 16384 for b
+00005460: 616e 6b20 696e 2028 312c 2033 2c20 342c  ank in (1, 3, 4,
+00005470: 2036 2c20 3729 7d0a 2020 2020 2020 2020   6, 7)}.        
+00005480: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
+00005490: 0a20 2020 2020 2020 2020 2020 2056 6572  .            Ver
+000054a0: 7369 6f6e 3a20 330a 2020 2020 2020 2020  sion: 3.        
+000054b0: 2020 2020 4d61 6368 696e 653a 2031 3238      Machine: 128
+000054c0: 4b20 5370 6563 7472 756d 0a20 2020 2020  K Spectrum.     
+000054d0: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
+000054e0: 733a 2065 6e61 626c 6564 0a20 2020 2020  s: enabled.     
+000054f0: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
+00005500: 206d 6f64 653a 2031 0a20 2020 2020 2020   mode: 1.       
+00005510: 2020 2020 2049 7373 7565 2032 2065 6d75       Issue 2 emu
+00005520: 6c61 7469 6f6e 3a20 656e 6162 6c65 640a  lation: enabled.
+00005530: 2020 2020 2020 2020 2020 2020 542d 7374              T-st
+00005540: 6174 6573 3a20 300a 2020 2020 2020 2020  ates: 0.        
+00005550: 2020 2020 426f 7264 6572 3a20 370a 2020      Border: 7.  
+00005560: 2020 2020 2020 2020 2020 506f 7274 2024            Port $
+00005570: 4646 4644 3a20 370a 2020 2020 2020 2020  FFFD: 7.        
+00005580: 2020 2020 506f 7274 2024 3746 4644 3a20      Port $7FFD: 
+00005590: 3320 2d20 6261 6e6b 2033 2028 626c 6f63  3 - bank 3 (bloc
+000055a0: 6b20 3629 2070 6167 6564 2069 6e74 6f20  k 6) paged into 
+000055b0: 3439 3135 322d 3635 3533 3520 4330 3030  49152-65535 C000
+000055c0: 2d46 4646 460a 2020 2020 2020 2020 2020  -FFFF.          
+000055d0: 2020 5265 6769 7374 6572 733a 0a20 2020    Registers:.   
+000055e0: 2020 2020 2020 2020 2020 2050 4320 2036             PC  6
+000055f0: 3532 3631 2046 4545 4420 2020 2053 5020  5261 FEED    SP 
+00005600: 2031 3035 3336 2032 3932 380a 2020 2020   10536 2928.    
+00005610: 2020 2020 2020 2020 2020 4958 2020 3134            IX  14
+00005620: 3930 3520 3341 3339 2020 2020 4959 2020  905 3A39    IY  
+00005630: 3134 3339 3120 3338 3337 0a20 2020 2020  14391 3837.     
+00005640: 2020 2020 2020 2020 2049 2020 2020 2020           I      
+00005650: 3432 2020 2032 4120 2020 2052 2020 2020  42   2A    R    
+00005660: 2020 3433 2020 2032 420a 2020 2020 2020    43   2B.      
+00005670: 2020 2020 2020 2020 4220 2020 2020 2033          B      3
+00005680: 3520 2020 3233 2020 2020 4227 2020 2020  5   23    B'    
+00005690: 2034 3820 2020 3330 0a20 2020 2020 2020   48   30.       
+000056a0: 2020 2020 2020 2043 2020 2020 2020 3334         C      34
+000056b0: 2020 2032 3220 2020 2043 2720 2020 2020     22    C'     
+000056c0: 3437 2020 2032 460a 2020 2020 2020 2020  47   2F.        
+000056d0: 2020 2020 2020 4243 2020 2038 3939 3420        BC   8994 
+000056e0: 3233 3232 2020 2020 4243 2720 3132 3333  2322    BC' 1233
+000056f0: 3520 3330 3246 0a20 2020 2020 2020 2020  5 302F.         
+00005700: 2020 2020 2044 2020 2020 2020 3436 2020       D      46  
+00005710: 2032 4520 2020 2044 2720 2020 2020 3530   2E    D'     50
+00005720: 2020 2033 320a 2020 2020 2020 2020 2020     32.          
+00005730: 2020 2020 4520 2020 2020 2034 3520 2020      E      45   
+00005740: 3244 2020 2020 4527 2020 2020 2034 3920  2D    E'     49 
+00005750: 2020 3331 0a20 2020 2020 2020 2020 2020    31.           
+00005760: 2020 2044 4520 2031 3138 3231 2032 4532     DE  11821 2E2
+00005770: 4420 2020 2044 4527 2031 3238 3439 2033  D    DE' 12849 3
+00005780: 3233 310a 2020 2020 2020 2020 2020 2020  231.            
+00005790: 2020 4820 2020 2020 2033 3720 2020 3235    H      37   25
+000057a0: 2020 2020 4827 2020 2020 2035 3220 2020      H'     52   
+000057b0: 3334 0a20 2020 2020 2020 2020 2020 2020  34.             
+000057c0: 204c 2020 2020 2020 3336 2020 2032 3420   L      36   24 
+000057d0: 2020 204c 2720 2020 2020 3531 2020 2033     L'     51   3
+000057e0: 330a 2020 2020 2020 2020 2020 2020 2020  3.              
+000057f0: 484c 2020 2039 3530 3820 3235 3234 2020  HL   9508 2524  
+00005800: 2020 484c 2720 3133 3336 3320 3334 3333    HL' 13363 3433
+00005810: 0a20 2020 2020 2020 2020 2020 2020 2041  .              A
+00005820: 2020 2020 2020 3332 2020 2032 3020 2020        32   20   
+00005830: 2041 2720 2020 2020 3533 2020 2033 350a   A'     53   35.
+00005840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005850: 535a 3548 3350 4e43 2020 2020 2020 2020  SZ5H3PNC        
+00005860: 2020 2053 5a35 4833 504e 430a 2020 2020     SZ5H3PNC.    
+00005870: 2020 2020 2020 2020 2020 4620 3030 3130            F 0010
+00005880: 3030 3031 2020 2020 2020 2020 4627 2030  0001        F' 0
+00005890: 3031 3130 3131 300a 2020 2020 2020 2020  0110110.        
+000058a0: 2020 2020 5241 4d20 626c 6f63 6b20 333a      RAM block 3:
+000058b0: 2032 3630 2062 7974 6573 2028 636f 6d70   260 bytes (comp
+000058c0: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
+000058d0: 2020 2020 5241 4d20 626c 6f63 6b20 343a      RAM block 4:
+000058e0: 2032 3630 2062 7974 6573 2028 636f 6d70   260 bytes (comp
+000058f0: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
+00005900: 2020 2020 5241 4d20 626c 6f63 6b20 3520      RAM block 5 
+00005910: 2833 3237 3638 2d34 3931 3531 2038 3030  (32768-49151 800
+00005920: 302d 4246 4646 293a 2032 3630 2062 7974  0-BFFF): 260 byt
+00005930: 6573 2028 636f 6d70 7265 7373 6564 290a  es (compressed).
+00005940: 2020 2020 2020 2020 2020 2020 5241 4d20              RAM 
+00005950: 626c 6f63 6b20 3620 2834 3931 3532 2d36  block 6 (49152-6
+00005960: 3535 3335 2043 3030 302d 4646 4646 293a  5535 C000-FFFF):
+00005970: 2032 3630 2062 7974 6573 2028 636f 6d70   260 bytes (comp
+00005980: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
+00005990: 2020 2020 5241 4d20 626c 6f63 6b20 373a      RAM block 7:
+000059a0: 2032 3630 2062 7974 6573 2028 636f 6d70   260 bytes (comp
+000059b0: 7265 7373 6564 290a 2020 2020 2020 2020  ressed).        
+000059c0: 2020 2020 5241 4d20 626c 6f63 6b20 3820      RAM block 8 
+000059d0: 2831 3633 3834 2d33 3237 3637 2034 3030  (16384-32767 400
+000059e0: 302d 3746 4646 293a 2032 3630 2062 7974  0-7FFF): 260 byt
+000059f0: 6573 2028 636f 6d70 7265 7373 6564 290a  es (compressed).
+00005a00: 2020 2020 2020 2020 2020 2020 5241 4d20              RAM 
+00005a10: 626c 6f63 6b20 393a 2032 3630 2062 7974  block 9: 260 byt
+00005a20: 6573 2028 636f 6d70 7265 7373 6564 290a  es (compressed).
+00005a30: 2020 2020 2020 2020 2020 2020 5241 4d20              RAM 
+00005a40: 626c 6f63 6b20 3130 3a20 3236 3020 6279  block 10: 260 by
+00005a50: 7465 7320 2863 6f6d 7072 6573 7365 6429  tes (compressed)
+00005a60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00005a70: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
+00005a80: 7a38 3028 6578 705f 6f75 7470 7574 2c20  z80(exp_output, 
+00005a90: 6865 6164 6572 2c20 636f 6d70 7265 7373  header, compress
+00005aa0: 3d54 7275 652c 206d 6163 6869 6e65 5f69  =True, machine_i
+00005ab0: 643d 342c 2070 6167 6573 3d70 6167 6573  d=4, pages=pages
+00005ac0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00005ad0: 737a 785f 3136 6b5f 756e 636f 6d70 7265  szx_16k_uncompre
+00005ae0: 7373 6564 2873 656c 6629 3a0a 2020 2020  ssed(self):.    
+00005af0: 2020 2020 7265 6769 7374 6572 7320 3d20      registers = 
+00005b00: 6c69 7374 2872 616e 6765 2833 322c 2035  list(range(32, 5
+00005b10: 3829 2920 2320 5265 6769 7374 6572 730a  8)) # Registers.
+00005b20: 2020 2020 2020 2020 7265 6769 7374 6572          register
+00005b30: 732e 6578 7465 6e64 2828 302c 2030 2929  s.extend((0, 0))
+00005b40: 2023 2049 4646 312c 2049 4646 320a 2020   # IFF1, IFF2.  
+00005b50: 2020 2020 2020 7265 6769 7374 6572 732e        registers.
+00005b60: 6170 7065 6e64 2831 2920 2320 496e 7465  append(1) # Inte
+00005b70: 7272 7570 7420 6d6f 6465 0a20 2020 2020  rrupt mode.     
+00005b80: 2020 2072 6567 6973 7465 7273 2e65 7874     registers.ext
+00005b90: 656e 6428 2830 2c20 302c 2030 2c20 3029  end((0, 0, 0, 0)
+00005ba0: 2920 2320 6477 4379 636c 6573 5374 6172  ) # dwCyclesStar
+00005bb0: 740a 2020 2020 2020 2020 7265 6769 7374  t.        regist
+00005bc0: 6572 732e 6578 7465 6e64 2828 302c 2030  ers.extend((0, 0
+00005bd0: 2c20 302c 2030 2929 0a20 2020 2020 2020  , 0, 0)).       
+00005be0: 2065 7870 5f6f 7574 7075 7420 3d20 2222   exp_output = ""
+00005bf0: 220a 2020 2020 2020 2020 2020 2020 5665  ".            Ve
+00005c00: 7273 696f 6e3a 2031 2e34 0a20 2020 2020  rsion: 1.4.     
+00005c10: 2020 2020 2020 204d 6163 6869 6e65 3a20         Machine: 
+00005c20: 3136 4b20 5a58 2053 7065 6374 7275 6d0a  16K ZX Spectrum.
+00005c30: 2020 2020 2020 2020 2020 2020 5350 4352              SPCR
+00005c40: 3a20 3820 6279 7465 730a 2020 2020 2020  : 8 bytes.      
+00005c50: 2020 2020 2020 2020 426f 7264 6572 3a20          Border: 
+00005c60: 310a 2020 2020 2020 2020 2020 2020 5a38  1.            Z8
+00005c70: 3052 3a20 3337 2062 7974 6573 0a20 2020  0R: 37 bytes.   
+00005c80: 2020 2020 2020 2020 2020 2049 6e74 6572             Inter
+00005c90: 7275 7074 733a 2064 6973 6162 6c65 640a  rupts: disabled.
+00005ca0: 2020 2020 2020 2020 2020 2020 2020 496e                In
+00005cb0: 7465 7272 7570 7420 6d6f 6465 3a20 310a  terrupt mode: 1.
+00005cc0: 2020 2020 2020 2020 2020 2020 2020 542d                T-
+00005cd0: 7374 6174 6573 3a20 300a 2020 2020 2020  states: 0.      
+00005ce0: 2020 2020 2020 2020 5043 2020 3134 3133          PC  1413
+00005cf0: 3420 3337 3336 2020 2020 5350 2020 3133  4 3736    SP  13
+00005d00: 3632 3020 3335 3334 0a20 2020 2020 2020  620 3534.       
+00005d10: 2020 2020 2020 2049 5820 2031 3235 3932         IX  12592
+00005d20: 2033 3133 3020 2020 2049 5920 2031 3331   3130    IY  131
+00005d30: 3036 2033 3333 320a 2020 2020 2020 2020  06 3332.        
+00005d40: 2020 2020 2020 4920 2020 2020 2035 3620        I      56 
+00005d50: 2020 3338 2020 2020 5220 2020 2020 2035    38    R      5
+00005d60: 3720 2020 3339 0a20 2020 2020 2020 2020  7   39.         
+00005d70: 2020 2020 2042 2020 2020 2020 3335 2020       B      35  
+00005d80: 2032 3320 2020 2042 2720 2020 2020 3433   23    B'     43
+00005d90: 2020 2032 420a 2020 2020 2020 2020 2020     2B.          
+00005da0: 2020 2020 4320 2020 2020 2033 3420 2020      C      34   
+00005db0: 3232 2020 2020 4327 2020 2020 2034 3220  22    C'     42 
+00005dc0: 2020 3241 0a20 2020 2020 2020 2020 2020    2A.           
+00005dd0: 2020 2042 4320 2020 3839 3934 2032 3332     BC   8994 232
+00005de0: 3220 2020 2042 4327 2031 3130 3530 2032  2    BC' 11050 2
+00005df0: 4232 410a 2020 2020 2020 2020 2020 2020  B2A.            
+00005e00: 2020 4420 2020 2020 2033 3720 2020 3235    D      37   25
+00005e10: 2020 2020 4427 2020 2020 2034 3520 2020      D'     45   
+00005e20: 3244 0a20 2020 2020 2020 2020 2020 2020  2D.             
+00005e30: 2045 2020 2020 2020 3336 2020 2032 3420   E      36   24 
+00005e40: 2020 2045 2720 2020 2020 3434 2020 2032     E'     44   2
+00005e50: 430a 2020 2020 2020 2020 2020 2020 2020  C.              
+00005e60: 4445 2020 2039 3530 3820 3235 3234 2020  DE   9508 2524  
+00005e70: 2020 4445 2720 3131 3536 3420 3244 3243    DE' 11564 2D2C
+00005e80: 0a20 2020 2020 2020 2020 2020 2020 2048  .              H
+00005e90: 2020 2020 2020 3339 2020 2032 3720 2020        39   27   
+00005ea0: 2048 2720 2020 2020 3437 2020 2032 460a   H'     47   2F.
+00005eb0: 2020 2020 2020 2020 2020 2020 2020 4c20                L 
+00005ec0: 2020 2020 2033 3820 2020 3236 2020 2020       38   26    
+00005ed0: 4c27 2020 2020 2034 3620 2020 3245 0a20  L'     46   2E. 
+00005ee0: 2020 2020 2020 2020 2020 2020 2048 4c20               HL 
+00005ef0: 2031 3030 3232 2032 3732 3620 2020 2048   10022 2726    H
+00005f00: 4c27 2031 3230 3738 2032 4632 450a 2020  L' 12078 2F2E.  
+00005f10: 2020 2020 2020 2020 2020 2020 4120 2020              A   
+00005f20: 2020 2033 3320 2020 3231 2020 2020 4127     33   21    A'
+00005f30: 2020 2020 2034 3120 2020 3239 0a20 2020       41   29.   
+00005f40: 2020 2020 2020 2020 2020 2020 2053 5a35               SZ5
+00005f50: 4833 504e 4320 2020 2020 2020 2020 2020  H3PNC           
+00005f60: 535a 3548 3350 4e43 0a20 2020 2020 2020  SZ5H3PNC.       
+00005f70: 2020 2020 2020 2046 2030 3031 3030 3030         F 0010000
+00005f80: 3020 2020 2020 2020 2046 2720 3030 3130  0        F' 0010
+00005f90: 3130 3030 0a20 2020 2020 2020 2020 2020  1000.           
+00005fa0: 2052 414d 503a 2031 3633 3837 2062 7974   RAMP: 16387 byt
+00005fb0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00005fc0: 2050 6167 653a 2035 0a20 2020 2020 2020   Page: 5.       
+00005fd0: 2020 2020 2020 2052 414d 3a20 3136 3338         RAM: 1638
+00005fe0: 342d 3332 3736 3720 3430 3030 2d37 4646  4-32767 4000-7FF
+00005ff0: 463a 2031 3633 3834 2062 7974 6573 2c20  F: 16384 bytes, 
+00006000: 756e 636f 6d70 7265 7373 6564 0a20 2020  uncompressed.   
+00006010: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00006020: 2073 656c 662e 5f74 6573 745f 737a 7828   self._test_szx(
+00006030: 6578 705f 6f75 7470 7574 2c20 7265 6769  exp_output, regi
+00006040: 7374 6572 732c 2062 6f72 6465 723d 312c  sters, border=1,
+00006050: 2063 6f6d 7072 6573 733d 4661 6c73 652c   compress=False,
+00006060: 206d 6163 6869 6e65 5f69 643d 3029 0a0a   machine_id=0)..
+00006070: 2020 2020 6465 6620 7465 7374 5f73 7a78      def test_szx
+00006080: 5f31 366b 5f63 6f6d 7072 6573 7365 6428  _16k_compressed(
+00006090: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+000060a0: 6567 6973 7465 7273 203d 206c 6973 7428  egisters = list(
+000060b0: 7261 6e67 6528 3332 2c20 3538 2929 2023  range(32, 58)) #
+000060c0: 2052 6567 6973 7465 7273 0a20 2020 2020   Registers.     
+000060d0: 2020 2072 6567 6973 7465 7273 2e65 7874     registers.ext
+000060e0: 656e 6428 2830 2c20 3029 2920 2320 4946  end((0, 0)) # IF
+000060f0: 4631 2c20 4946 4632 0a20 2020 2020 2020  F1, IFF2.       
+00006100: 2072 6567 6973 7465 7273 2e61 7070 656e   registers.appen
+00006110: 6428 3129 2023 2049 6e74 6572 7275 7074  d(1) # Interrupt
+00006120: 206d 6f64 650a 2020 2020 2020 2020 7265   mode.        re
+00006130: 6769 7374 6572 732e 6578 7465 6e64 2828  gisters.extend((
+00006140: 312c 2030 2c20 302c 2030 2929 2023 2064  1, 0, 0, 0)) # d
+00006150: 7743 7963 6c65 7353 7461 7274 0a20 2020  wCyclesStart.   
+00006160: 2020 2020 2072 6567 6973 7465 7273 2e65       registers.e
+00006170: 7874 656e 6428 2830 2c20 302c 2030 2c20  xtend((0, 0, 0, 
+00006180: 3029 290a 2020 2020 2020 2020 6578 705f  0)).        exp_
+00006190: 6f75 7470 7574 203d 2022 2222 0a20 2020  output = """.   
+000061a0: 2020 2020 2020 2020 2056 6572 7369 6f6e           Version
+000061b0: 3a20 312e 340a 2020 2020 2020 2020 2020  : 1.4.          
+000061c0: 2020 4d61 6368 696e 653a 2031 364b 205a    Machine: 16K Z
+000061d0: 5820 5370 6563 7472 756d 0a20 2020 2020  X Spectrum.     
+000061e0: 2020 2020 2020 2053 5043 523a 2038 2062         SPCR: 8 b
+000061f0: 7974 6573 0a20 2020 2020 2020 2020 2020  ytes.           
+00006200: 2020 2042 6f72 6465 723a 2032 0a20 2020     Border: 2.   
+00006210: 2020 2020 2020 2020 204b 4559 423a 2035           KEYB: 5
+00006220: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
+00006230: 2020 2020 2049 7373 7565 2032 2065 6d75       Issue 2 emu
+00006240: 6c61 7469 6f6e 3a20 6469 7361 626c 6564  lation: disabled
+00006250: 0a20 2020 2020 2020 2020 2020 205a 3830  .            Z80
+00006260: 523a 2033 3720 6279 7465 730a 2020 2020  R: 37 bytes.    
+00006270: 2020 2020 2020 2020 2020 496e 7465 7272            Interr
+00006280: 7570 7473 3a20 6469 7361 626c 6564 0a20  upts: disabled. 
+00006290: 2020 2020 2020 2020 2020 2020 2049 6e74               Int
+000062a0: 6572 7275 7074 206d 6f64 653a 2031 0a20  errupt mode: 1. 
+000062b0: 2020 2020 2020 2020 2020 2020 2054 2d73               T-s
+000062c0: 7461 7465 733a 2031 0a20 2020 2020 2020  tates: 1.       
+000062d0: 2020 2020 2020 2050 4320 2031 3431 3334         PC  14134
+000062e0: 2033 3733 3620 2020 2053 5020 2031 3336   3736    SP  136
+000062f0: 3230 2033 3533 340a 2020 2020 2020 2020  20 3534.        
+00006300: 2020 2020 2020 4958 2020 3132 3539 3220        IX  12592 
+00006310: 3331 3330 2020 2020 4959 2020 3133 3130  3130    IY  1310
+00006320: 3620 3333 3332 0a20 2020 2020 2020 2020  6 3332.         
+00006330: 2020 2020 2049 2020 2020 2020 3536 2020       I      56  
+00006340: 2033 3820 2020 2052 2020 2020 2020 3537   38    R      57
+00006350: 2020 2033 390a 2020 2020 2020 2020 2020     39.          
+00006360: 2020 2020 4220 2020 2020 2033 3520 2020      B      35   
+00006370: 3233 2020 2020 4227 2020 2020 2034 3320  23    B'     43 
+00006380: 2020 3242 0a20 2020 2020 2020 2020 2020    2B.           
+00006390: 2020 2043 2020 2020 2020 3334 2020 2032     C      34   2
+000063a0: 3220 2020 2043 2720 2020 2020 3432 2020  2    C'     42  
+000063b0: 2032 410a 2020 2020 2020 2020 2020 2020   2A.            
+000063c0: 2020 4243 2020 2038 3939 3420 3233 3232    BC   8994 2322
+000063d0: 2020 2020 4243 2720 3131 3035 3020 3242      BC' 11050 2B
+000063e0: 3241 0a20 2020 2020 2020 2020 2020 2020  2A.             
+000063f0: 2044 2020 2020 2020 3337 2020 2032 3520   D      37   25 
+00006400: 2020 2044 2720 2020 2020 3435 2020 2032     D'     45   2
+00006410: 440a 2020 2020 2020 2020 2020 2020 2020  D.              
+00006420: 4520 2020 2020 2033 3620 2020 3234 2020  E      36   24  
+00006430: 2020 4527 2020 2020 2034 3420 2020 3243    E'     44   2C
+00006440: 0a20 2020 2020 2020 2020 2020 2020 2044  .              D
+00006450: 4520 2020 3935 3038 2032 3532 3420 2020  E   9508 2524   
+00006460: 2044 4527 2031 3135 3634 2032 4432 430a   DE' 11564 2D2C.
+00006470: 2020 2020 2020 2020 2020 2020 2020 4820                H 
+00006480: 2020 2020 2033 3920 2020 3237 2020 2020       39   27    
+00006490: 4827 2020 2020 2034 3720 2020 3246 0a20  H'     47   2F. 
+000064a0: 2020 2020 2020 2020 2020 2020 204c 2020               L  
+000064b0: 2020 2020 3338 2020 2032 3620 2020 204c      38   26    L
+000064c0: 2720 2020 2020 3436 2020 2032 450a 2020  '     46   2E.  
+000064d0: 2020 2020 2020 2020 2020 2020 484c 2020              HL  
+000064e0: 3130 3032 3220 3237 3236 2020 2020 484c  10022 2726    HL
+000064f0: 2720 3132 3037 3820 3246 3245 0a20 2020  ' 12078 2F2E.   
+00006500: 2020 2020 2020 2020 2020 2041 2020 2020             A    
+00006510: 2020 3333 2020 2032 3120 2020 2041 2720    33   21    A' 
+00006520: 2020 2020 3431 2020 2032 390a 2020 2020      41   29.    
+00006530: 2020 2020 2020 2020 2020 2020 535a 3548              SZ5H
+00006540: 3350 4e43 2020 2020 2020 2020 2020 2053  3PNC           S
+00006550: 5a35 4833 504e 430a 2020 2020 2020 2020  Z5H3PNC.        
+00006560: 2020 2020 2020 4620 3030 3130 3030 3030        F 00100000
+00006570: 2020 2020 2020 2020 4627 2030 3031 3031          F' 00101
+00006580: 3030 300a 2020 2020 2020 2020 2020 2020  000.            
+00006590: 5241 4d50 3a20 3432 2062 7974 6573 0a20  RAMP: 42 bytes. 
+000065a0: 2020 2020 2020 2020 2020 2020 2050 6167               Pag
+000065b0: 653a 2035 0a20 2020 2020 2020 2020 2020  e: 5.           
+000065c0: 2020 2052 414d 3a20 3136 3338 342d 3332     RAM: 16384-32
+000065d0: 3736 3720 3430 3030 2d37 4646 463a 2033  767 4000-7FFF: 3
+000065e0: 3920 6279 7465 732c 2063 6f6d 7072 6573  9 bytes, compres
+000065f0: 7365 640a 2020 2020 2020 2020 2222 220a  sed.        """.
+00006600: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+00006610: 7374 5f73 7a78 2865 7870 5f6f 7574 7075  st_szx(exp_outpu
+00006620: 742c 2072 6567 6973 7465 7273 2c20 626f  t, registers, bo
+00006630: 7264 6572 3d32 2c20 6b65 7962 3d54 7275  rder=2, keyb=Tru
+00006640: 652c 2069 7373 7565 323d 302c 2063 6f6d  e, issue2=0, com
+00006650: 7072 6573 733d 5472 7565 2c20 6d61 6368  press=True, mach
+00006660: 696e 655f 6964 3d30 290a 0a20 2020 2064  ine_id=0)..    d
+00006670: 6566 2074 6573 745f 737a 785f 3438 6b5f  ef test_szx_48k_
+00006680: 756e 636f 6d70 7265 7373 6564 2873 656c  uncompressed(sel
+00006690: 6629 3a0a 2020 2020 2020 2020 7265 6769  f):.        regi
+000066a0: 7374 6572 7320 3d20 6c69 7374 2872 616e  sters = list(ran
+000066b0: 6765 2832 3629 2920 2320 5265 6769 7374  ge(26)) # Regist
+000066c0: 6572 730a 2020 2020 2020 2020 7265 6769  ers.        regi
+000066d0: 7374 6572 732e 6578 7465 6e64 2828 312c  sters.extend((1,
+000066e0: 2031 2929 2023 2049 4646 312c 2049 4646   1)) # IFF1, IFF
+000066f0: 320a 2020 2020 2020 2020 7265 6769 7374  2.        regist
+00006700: 6572 732e 6170 7065 6e64 2832 2920 2320  ers.append(2) # 
+00006710: 496e 7465 7272 7570 7420 6d6f 6465 0a20  Interrupt mode. 
+00006720: 2020 2020 2020 2072 6567 6973 7465 7273         registers
+00006730: 2e65 7874 656e 6428 2832 3535 2c20 3136  .extend((255, 16
+00006740: 2c20 312c 2030 2929 2023 2064 7743 7963  , 1, 0)) # dwCyc
+00006750: 6c65 7353 7461 7274 0a20 2020 2020 2020  lesStart.       
+00006760: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
+00006770: 6428 2830 2c20 302c 2030 2c20 3029 290a  d((0, 0, 0, 0)).
+00006780: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
+00006790: 7574 203d 2022 2222 0a20 2020 2020 2020  ut = """.       
+000067a0: 2020 2020 2056 6572 7369 6f6e 3a20 312e       Version: 1.
+000067b0: 340a 2020 2020 2020 2020 2020 2020 4d61  4.            Ma
+000067c0: 6368 696e 653a 2034 384b 205a 5820 5370  chine: 48K ZX Sp
+000067d0: 6563 7472 756d 0a20 2020 2020 2020 2020  ectrum.         
+000067e0: 2020 2053 5043 523a 2038 2062 7974 6573     SPCR: 8 bytes
+000067f0: 0a20 2020 2020 2020 2020 2020 2020 2042  .              B
+00006800: 6f72 6465 723a 2033 0a20 2020 2020 2020  order: 3.       
+00006810: 2020 2020 204b 4559 423a 2035 2062 7974       KEYB: 5 byt
+00006820: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00006830: 2049 7373 7565 2032 2065 6d75 6c61 7469   Issue 2 emulati
+00006840: 6f6e 3a20 656e 6162 6c65 640a 2020 2020  on: enabled.    
+00006850: 2020 2020 2020 2020 5a38 3052 3a20 3337          Z80R: 37
+00006860: 2062 7974 6573 0a20 2020 2020 2020 2020   bytes.         
+00006870: 2020 2020 2049 6e74 6572 7275 7074 733a       Interrupts:
+00006880: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
+00006890: 2020 2020 2020 2049 6e74 6572 7275 7074         Interrupt
+000068a0: 206d 6f64 653a 2032 0a20 2020 2020 2020   mode: 2.       
+000068b0: 2020 2020 2020 2054 2d73 7461 7465 733a         T-states:
+000068c0: 2036 3938 3837 0a20 2020 2020 2020 2020   69887.         
+000068d0: 2020 2020 2050 4320 2020 3539 3130 2031       PC   5910 1
+000068e0: 3731 3620 2020 2053 5020 2020 3533 3936  716    SP   5396
+000068f0: 2031 3531 340a 2020 2020 2020 2020 2020   1514.          
+00006900: 2020 2020 4958 2020 2034 3336 3820 3131      IX   4368 11
+00006910: 3130 2020 2020 4959 2020 2034 3838 3220  10    IY   4882 
+00006920: 3133 3132 0a20 2020 2020 2020 2020 2020  1312.           
+00006930: 2020 2049 2020 2020 2020 3234 2020 2031     I      24   1
+00006940: 3820 2020 2052 2020 2020 2020 3235 2020  8    R      25  
+00006950: 2031 390a 2020 2020 2020 2020 2020 2020   19.            
+00006960: 2020 4220 2020 2020 2020 3320 2020 3033    B       3   03
+00006970: 2020 2020 4227 2020 2020 2031 3120 2020      B'     11   
+00006980: 3042 0a20 2020 2020 2020 2020 2020 2020  0B.             
+00006990: 2043 2020 2020 2020 2032 2020 2030 3220   C       2   02 
+000069a0: 2020 2043 2720 2020 2020 3130 2020 2030     C'     10   0
+000069b0: 410a 2020 2020 2020 2020 2020 2020 2020  A.              
+000069c0: 4243 2020 2020 3737 3020 3033 3032 2020  BC    770 0302  
+000069d0: 2020 4243 2720 2032 3832 3620 3042 3041    BC'  2826 0B0A
+000069e0: 0a20 2020 2020 2020 2020 2020 2020 2044  .              D
+000069f0: 2020 2020 2020 2035 2020 2030 3520 2020         5   05   
+00006a00: 2044 2720 2020 2020 3133 2020 2030 440a   D'     13   0D.
+00006a10: 2020 2020 2020 2020 2020 2020 2020 4520                E 
+00006a20: 2020 2020 2020 3420 2020 3034 2020 2020        4   04    
+00006a30: 4527 2020 2020 2031 3220 2020 3043 0a20  E'     12   0C. 
+00006a40: 2020 2020 2020 2020 2020 2020 2044 4520               DE 
+00006a50: 2020 3132 3834 2030 3530 3420 2020 2044    1284 0504    D
+00006a60: 4527 2020 3333 3430 2030 4430 430a 2020  E'  3340 0D0C.  
+00006a70: 2020 2020 2020 2020 2020 2020 4820 2020              H   
+00006a80: 2020 2020 3720 2020 3037 2020 2020 4827      7   07    H'
+00006a90: 2020 2020 2031 3520 2020 3046 0a20 2020       15   0F.   
+00006aa0: 2020 2020 2020 2020 2020 204c 2020 2020             L    
+00006ab0: 2020 2036 2020 2030 3620 2020 204c 2720     6   06    L' 
+00006ac0: 2020 2020 3134 2020 2030 450a 2020 2020      14   0E.    
+00006ad0: 2020 2020 2020 2020 2020 484c 2020 2031            HL   1
+00006ae0: 3739 3820 3037 3036 2020 2020 484c 2720  798 0706    HL' 
+00006af0: 2033 3835 3420 3046 3045 0a20 2020 2020   3854 0F0E.     
+00006b00: 2020 2020 2020 2020 2041 2020 2020 2020           A      
+00006b10: 2031 2020 2030 3120 2020 2041 2720 2020   1   01    A'   
+00006b20: 2020 2039 2020 2030 390a 2020 2020 2020     9   09.      
+00006b30: 2020 2020 2020 2020 2020 535a 3548 3350            SZ5H3P
+00006b40: 4e43 2020 2020 2020 2020 2020 2053 5a35  NC           SZ5
+00006b50: 4833 504e 430a 2020 2020 2020 2020 2020  H3PNC.          
+00006b60: 2020 2020 4620 3030 3030 3030 3030 2020      F 00000000  
+00006b70: 2020 2020 2020 4627 2030 3030 3031 3030        F' 0000100
+00006b80: 300a 2020 2020 2020 2020 2020 2020 5241  0.            RA
+00006b90: 4d50 3a20 3136 3338 3720 6279 7465 730a  MP: 16387 bytes.
+00006ba0: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
+00006bb0: 6765 3a20 300a 2020 2020 2020 2020 2020  ge: 0.          
+00006bc0: 2020 2020 5241 4d3a 2031 3633 3834 2062      RAM: 16384 b
+00006bd0: 7974 6573 2c20 756e 636f 6d70 7265 7373  ytes, uncompress
+00006be0: 6564 0a20 2020 2020 2020 2020 2020 2052  ed.            R
+00006bf0: 414d 503a 2031 3633 3837 2062 7974 6573  AMP: 16387 bytes
+00006c00: 0a20 2020 2020 2020 2020 2020 2020 2050  .              P
+00006c10: 6167 653a 2032 0a20 2020 2020 2020 2020  age: 2.         
+00006c20: 2020 2020 2052 414d 3a20 3332 3736 382d       RAM: 32768-
+00006c30: 3439 3135 3120 3830 3030 2d42 4646 463a  49151 8000-BFFF:
+00006c40: 2031 3633 3834 2062 7974 6573 2c20 756e   16384 bytes, un
+00006c50: 636f 6d70 7265 7373 6564 0a20 2020 2020  compressed.     
+00006c60: 2020 2020 2020 2052 414d 503a 2031 3633         RAMP: 163
+00006c70: 3837 2062 7974 6573 0a20 2020 2020 2020  87 bytes.       
+00006c80: 2020 2020 2020 2050 6167 653a 2035 0a20         Page: 5. 
+00006c90: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+00006ca0: 3a20 3136 3338 342d 3332 3736 3720 3430  : 16384-32767 40
+00006cb0: 3030 2d37 4646 463a 2031 3633 3834 2062  00-7FFF: 16384 b
+00006cc0: 7974 6573 2c20 756e 636f 6d70 7265 7373  ytes, uncompress
+00006cd0: 6564 0a20 2020 2020 2020 2022 2222 0a20  ed.        """. 
+00006ce0: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
+00006cf0: 745f 737a 7828 6578 705f 6f75 7470 7574  t_szx(exp_output
+00006d00: 2c20 7265 6769 7374 6572 732c 2062 6f72  , registers, bor
+00006d10: 6465 723d 332c 206b 6579 623d 5472 7565  der=3, keyb=True
+00006d20: 2c20 6973 7375 6532 3d31 2c20 636f 6d70  , issue2=1, comp
+00006d30: 7265 7373 3d46 616c 7365 290a 0a20 2020  ress=False)..   
+00006d40: 2064 6566 2074 6573 745f 737a 785f 3438   def test_szx_48
+00006d50: 6b5f 636f 6d70 7265 7373 6564 2873 656c  k_compressed(sel
+00006d60: 6629 3a0a 2020 2020 2020 2020 7265 6769  f):.        regi
+00006d70: 7374 6572 7320 3d20 6c69 7374 2872 616e  sters = list(ran
+00006d80: 6765 2832 3629 2920 2320 5265 6769 7374  ge(26)) # Regist
+00006d90: 6572 730a 2020 2020 2020 2020 7265 6769  ers.        regi
+00006da0: 7374 6572 732e 6578 7465 6e64 2828 312c  sters.extend((1,
+00006db0: 2031 2929 2023 2049 4646 312c 2049 4646   1)) # IFF1, IFF
+00006dc0: 320a 2020 2020 2020 2020 7265 6769 7374  2.        regist
+00006dd0: 6572 732e 6170 7065 6e64 2832 2920 2320  ers.append(2) # 
+00006de0: 496e 7465 7272 7570 7420 6d6f 6465 0a20  Interrupt mode. 
+00006df0: 2020 2020 2020 2072 6567 6973 7465 7273         registers
+00006e00: 2e65 7874 656e 6428 2831 2c20 3132 382c  .extend((1, 128,
+00006e10: 2030 2c20 3029 2920 2320 6477 4379 636c   0, 0)) # dwCycl
+00006e20: 6573 5374 6172 740a 2020 2020 2020 2020  esStart.        
+00006e30: 7265 6769 7374 6572 732e 6578 7465 6e64  registers.extend
+00006e40: 2828 302c 2030 2c20 302c 2030 2929 0a20  ((0, 0, 0, 0)). 
+00006e50: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+00006e60: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
+00006e70: 2020 2020 5665 7273 696f 6e3a 2031 2e34      Version: 1.4
+00006e80: 0a20 2020 2020 2020 2020 2020 204d 6163  .            Mac
+00006e90: 6869 6e65 3a20 3438 4b20 5a58 2053 7065  hine: 48K ZX Spe
+00006ea0: 6374 7275 6d0a 2020 2020 2020 2020 2020  ctrum.          
+00006eb0: 2020 5350 4352 3a20 3820 6279 7465 730a    SPCR: 8 bytes.
+00006ec0: 2020 2020 2020 2020 2020 2020 2020 426f                Bo
+00006ed0: 7264 6572 3a20 340a 2020 2020 2020 2020  rder: 4.        
+00006ee0: 2020 2020 5a38 3052 3a20 3337 2062 7974      Z80R: 37 byt
+00006ef0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00006f00: 2049 6e74 6572 7275 7074 733a 2065 6e61   Interrupts: ena
+00006f10: 626c 6564 0a20 2020 2020 2020 2020 2020  bled.           
+00006f20: 2020 2049 6e74 6572 7275 7074 206d 6f64     Interrupt mod
+00006f30: 653a 2032 0a20 2020 2020 2020 2020 2020  e: 2.           
+00006f40: 2020 2054 2d73 7461 7465 733a 2033 3237     T-states: 327
+00006f50: 3639 0a20 2020 2020 2020 2020 2020 2020  69.             
+00006f60: 2050 4320 2020 3539 3130 2031 3731 3620   PC   5910 1716 
+00006f70: 2020 2053 5020 2020 3533 3936 2031 3531     SP   5396 151
+00006f80: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+00006f90: 4958 2020 2034 3336 3820 3131 3130 2020  IX   4368 1110  
+00006fa0: 2020 4959 2020 2034 3838 3220 3133 3132    IY   4882 1312
+00006fb0: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
+00006fc0: 2020 2020 2020 3234 2020 2031 3820 2020        24   18   
+00006fd0: 2052 2020 2020 2020 3235 2020 2031 390a   R      25   19.
+00006fe0: 2020 2020 2020 2020 2020 2020 2020 4220                B 
+00006ff0: 2020 2020 2020 3320 2020 3033 2020 2020        3   03    
+00007000: 4227 2020 2020 2031 3120 2020 3042 0a20  B'     11   0B. 
+00007010: 2020 2020 2020 2020 2020 2020 2043 2020               C  
+00007020: 2020 2020 2032 2020 2030 3220 2020 2043       2   02    C
+00007030: 2720 2020 2020 3130 2020 2030 410a 2020  '     10   0A.  
+00007040: 2020 2020 2020 2020 2020 2020 4243 2020              BC  
+00007050: 2020 3737 3020 3033 3032 2020 2020 4243    770 0302    BC
+00007060: 2720 2032 3832 3620 3042 3041 0a20 2020  '  2826 0B0A.   
+00007070: 2020 2020 2020 2020 2020 2044 2020 2020             D    
+00007080: 2020 2035 2020 2030 3520 2020 2044 2720     5   05    D' 
+00007090: 2020 2020 3133 2020 2030 440a 2020 2020      13   0D.    
+000070a0: 2020 2020 2020 2020 2020 4520 2020 2020            E     
+000070b0: 2020 3420 2020 3034 2020 2020 4527 2020    4   04    E'  
+000070c0: 2020 2031 3220 2020 3043 0a20 2020 2020     12   0C.     
+000070d0: 2020 2020 2020 2020 2044 4520 2020 3132           DE   12
+000070e0: 3834 2030 3530 3420 2020 2044 4527 2020  84 0504    DE'  
+000070f0: 3333 3430 2030 4430 430a 2020 2020 2020  3340 0D0C.      
+00007100: 2020 2020 2020 2020 4820 2020 2020 2020          H       
+00007110: 3720 2020 3037 2020 2020 4827 2020 2020  7   07    H'    
+00007120: 2031 3520 2020 3046 0a20 2020 2020 2020   15   0F.       
+00007130: 2020 2020 2020 204c 2020 2020 2020 2036         L       6
+00007140: 2020 2030 3620 2020 204c 2720 2020 2020     06    L'     
+00007150: 3134 2020 2030 450a 2020 2020 2020 2020  14   0E.        
+00007160: 2020 2020 2020 484c 2020 2031 3739 3820        HL   1798 
+00007170: 3037 3036 2020 2020 484c 2720 2033 3835  0706    HL'  385
+00007180: 3420 3046 3045 0a20 2020 2020 2020 2020  4 0F0E.         
+00007190: 2020 2020 2041 2020 2020 2020 2031 2020       A       1  
+000071a0: 2030 3120 2020 2041 2720 2020 2020 2039   01    A'      9
+000071b0: 2020 2030 390a 2020 2020 2020 2020 2020     09.          
+000071c0: 2020 2020 2020 535a 3548 3350 4e43 2020        SZ5H3PNC  
+000071d0: 2020 2020 2020 2020 2053 5a35 4833 504e           SZ5H3PN
+000071e0: 430a 2020 2020 2020 2020 2020 2020 2020  C.              
+000071f0: 4620 3030 3030 3030 3030 2020 2020 2020  F 00000000      
+00007200: 2020 4627 2030 3030 3031 3030 300a 2020    F' 00001000.  
+00007210: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
+00007220: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
+00007230: 2020 2020 2020 2050 6167 653a 2030 0a20         Page: 0. 
+00007240: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+00007250: 3a20 3339 2062 7974 6573 2c20 636f 6d70  : 39 bytes, comp
+00007260: 7265 7373 6564 0a20 2020 2020 2020 2020  ressed.         
+00007270: 2020 2052 414d 503a 2034 3220 6279 7465     RAMP: 42 byte
+00007280: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00007290: 5061 6765 3a20 320a 2020 2020 2020 2020  Page: 2.        
+000072a0: 2020 2020 2020 5241 4d3a 2033 3237 3638        RAM: 32768
+000072b0: 2d34 3931 3531 2038 3030 302d 4246 4646  -49151 8000-BFFF
+000072c0: 3a20 3339 2062 7974 6573 2c20 636f 6d70  : 39 bytes, comp
+000072d0: 7265 7373 6564 0a20 2020 2020 2020 2020  ressed.         
+000072e0: 2020 2052 414d 503a 2034 3220 6279 7465     RAMP: 42 byte
+000072f0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00007300: 5061 6765 3a20 350a 2020 2020 2020 2020  Page: 5.        
+00007310: 2020 2020 2020 5241 4d3a 2031 3633 3834        RAM: 16384
+00007320: 2d33 3237 3637 2034 3030 302d 3746 4646  -32767 4000-7FFF
+00007330: 3a20 3339 2062 7974 6573 2c20 636f 6d70  : 39 bytes, comp
+00007340: 7265 7373 6564 0a20 2020 2020 2020 2022  ressed.        "
+00007350: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00007360: 5f74 6573 745f 737a 7828 6578 705f 6f75  _test_szx(exp_ou
+00007370: 7470 7574 2c20 7265 6769 7374 6572 732c  tput, registers,
+00007380: 2062 6f72 6465 723d 342c 2063 6f6d 7072   border=4, compr
+00007390: 6573 733d 5472 7565 290a 0a20 2020 2064  ess=True)..    d
+000073a0: 6566 2074 6573 745f 737a 785f 3132 386b  ef test_szx_128k
+000073b0: 5f75 6e63 6f6d 7072 6573 7365 6428 7365  _uncompressed(se
+000073c0: 6c66 293a 0a20 2020 2020 2020 2072 6567  lf):.        reg
+000073d0: 6973 7465 7273 203d 206c 6973 7428 7261  isters = list(ra
+000073e0: 6e67 6528 3136 2c20 3432 2929 2023 2052  nge(16, 42)) # R
+000073f0: 6567 6973 7465 7273 0a20 2020 2020 2020  egisters.       
+00007400: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
+00007410: 6428 2830 2c20 3029 2920 2320 4946 4631  d((0, 0)) # IFF1
+00007420: 2c20 4946 4632 0a20 2020 2020 2020 2072  , IFF2.        r
+00007430: 6567 6973 7465 7273 2e61 7070 656e 6428  egisters.append(
+00007440: 3129 2023 2049 6e74 6572 7275 7074 206d  1) # Interrupt m
+00007450: 6f64 650a 2020 2020 2020 2020 7265 6769  ode.        regi
+00007460: 7374 6572 732e 6578 7465 6e64 2828 312c  sters.extend((1,
+00007470: 2030 2c20 312c 2030 2929 2023 2064 7743   0, 1, 0)) # dwC
+00007480: 7963 6c65 7353 7461 7274 0a20 2020 2020  yclesStart.     
+00007490: 2020 2072 6567 6973 7465 7273 2e65 7874     registers.ext
+000074a0: 656e 6428 2830 2c20 302c 2030 2c20 3029  end((0, 0, 0, 0)
+000074b0: 290a 2020 2020 2020 2020 6578 705f 6f75  ).        exp_ou
+000074c0: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
+000074d0: 2020 2020 2020 2056 6572 7369 6f6e 3a20         Version: 
+000074e0: 312e 340a 2020 2020 2020 2020 2020 2020  1.4.            
+000074f0: 4d61 6368 696e 653a 205a 5820 5370 6563  Machine: ZX Spec
+00007500: 7472 756d 2031 3238 0a20 2020 2020 2020  trum 128.       
+00007510: 2020 2020 2053 5043 523a 2038 2062 7974       SPCR: 8 byt
+00007520: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00007530: 2042 6f72 6465 723a 2036 0a20 2020 2020   Border: 6.     
+00007540: 2020 2020 2020 2020 2050 6f72 7420 2437           Port $7
+00007550: 4646 443a 2031 2028 6261 6e6b 2031 2070  FFD: 1 (bank 1 p
+00007560: 6167 6564 2069 6e74 6f20 3439 3135 322d  aged into 49152-
+00007570: 3635 3533 3520 4330 3030 2d46 4646 4629  65535 C000-FFFF)
+00007580: 0a20 2020 2020 2020 2020 2020 204b 4559  .            KEY
+00007590: 423a 2035 2062 7974 6573 0a20 2020 2020  B: 5 bytes.     
+000075a0: 2020 2020 2020 2020 2049 7373 7565 2032           Issue 2
+000075b0: 2065 6d75 6c61 7469 6f6e 3a20 6469 7361   emulation: disa
+000075c0: 626c 6564 0a20 2020 2020 2020 2020 2020  bled.           
+000075d0: 2041 593a 2031 3820 6279 7465 730a 2020   AY: 18 bytes.  
+000075e0: 2020 2020 2020 2020 2020 2020 4375 7272              Curr
+000075f0: 656e 7420 4159 2072 6567 6973 7465 723a  ent AY register:
+00007600: 2035 0a20 2020 2020 2020 2020 2020 205a   5.            Z
+00007610: 3830 523a 2033 3720 6279 7465 730a 2020  80R: 37 bytes.  
+00007620: 2020 2020 2020 2020 2020 2020 496e 7465              Inte
+00007630: 7272 7570 7473 3a20 6469 7361 626c 6564  rrupts: disabled
+00007640: 0a20 2020 2020 2020 2020 2020 2020 2049  .              I
+00007650: 6e74 6572 7275 7074 206d 6f64 653a 2031  nterrupt mode: 1
+00007660: 0a20 2020 2020 2020 2020 2020 2020 2054  .              T
+00007670: 2d73 7461 7465 733a 2036 3535 3337 0a20  -states: 65537. 
+00007680: 2020 2020 2020 2020 2020 2020 2050 4320               PC 
+00007690: 2031 3030 3232 2032 3732 3620 2020 2053   10022 2726    S
+000076a0: 5020 2020 3935 3038 2032 3532 340a 2020  P   9508 2524.  
+000076b0: 2020 2020 2020 2020 2020 2020 4958 2020              IX  
+000076c0: 2038 3438 3020 3231 3230 2020 2020 4959   8480 2120    IY
+000076d0: 2020 2038 3939 3420 3233 3232 0a20 2020     8994 2322.   
+000076e0: 2020 2020 2020 2020 2020 2049 2020 2020             I    
+000076f0: 2020 3430 2020 2032 3820 2020 2052 2020    40   28    R  
+00007700: 2020 2020 3431 2020 2032 390a 2020 2020      41   29.    
+00007710: 2020 2020 2020 2020 2020 4220 2020 2020            B     
+00007720: 2031 3920 2020 3133 2020 2020 4227 2020   19   13    B'  
+00007730: 2020 2032 3720 2020 3142 0a20 2020 2020     27   1B.     
+00007740: 2020 2020 2020 2020 2043 2020 2020 2020           C      
+00007750: 3138 2020 2031 3220 2020 2043 2720 2020  18   12    C'   
+00007760: 2020 3236 2020 2031 410a 2020 2020 2020    26   1A.      
+00007770: 2020 2020 2020 2020 4243 2020 2034 3838          BC   488
+00007780: 3220 3133 3132 2020 2020 4243 2720 2036  2 1312    BC'  6
+00007790: 3933 3820 3142 3141 0a20 2020 2020 2020  938 1B1A.       
+000077a0: 2020 2020 2020 2044 2020 2020 2020 3231         D      21
+000077b0: 2020 2031 3520 2020 2044 2720 2020 2020     15    D'     
+000077c0: 3239 2020 2031 440a 2020 2020 2020 2020  29   1D.        
+000077d0: 2020 2020 2020 4520 2020 2020 2032 3020        E      20 
+000077e0: 2020 3134 2020 2020 4527 2020 2020 2032    14    E'     2
+000077f0: 3820 2020 3143 0a20 2020 2020 2020 2020  8   1C.         
+00007800: 2020 2020 2044 4520 2020 3533 3936 2031       DE   5396 1
+00007810: 3531 3420 2020 2044 4527 2020 3734 3532  514    DE'  7452
+00007820: 2031 4431 430a 2020 2020 2020 2020 2020   1D1C.          
+00007830: 2020 2020 4820 2020 2020 2032 3320 2020      H      23   
+00007840: 3137 2020 2020 4827 2020 2020 2033 3120  17    H'     31 
+00007850: 2020 3146 0a20 2020 2020 2020 2020 2020    1F.           
+00007860: 2020 204c 2020 2020 2020 3232 2020 2031     L      22   1
+00007870: 3620 2020 204c 2720 2020 2020 3330 2020  6    L'     30  
+00007880: 2031 450a 2020 2020 2020 2020 2020 2020   1E.            
+00007890: 2020 484c 2020 2035 3931 3020 3137 3136    HL   5910 1716
+000078a0: 2020 2020 484c 2720 2037 3936 3620 3146      HL'  7966 1F
+000078b0: 3145 0a20 2020 2020 2020 2020 2020 2020  1E.             
+000078c0: 2041 2020 2020 2020 3137 2020 2031 3120   A      17   11 
+000078d0: 2020 2041 2720 2020 2020 3235 2020 2031     A'     25   1
+000078e0: 390a 2020 2020 2020 2020 2020 2020 2020  9.              
+000078f0: 2020 535a 3548 3350 4e43 2020 2020 2020    SZ5H3PNC      
+00007900: 2020 2020 2053 5a35 4833 504e 430a 2020       SZ5H3PNC.  
+00007910: 2020 2020 2020 2020 2020 2020 4620 3030              F 00
+00007920: 3031 3030 3030 2020 2020 2020 2020 4627  010000        F'
+00007930: 2030 3030 3131 3030 300a 2020 2020 2020   00011000.      
+00007940: 2020 2020 2020 5241 4d50 3a20 3136 3338        RAMP: 1638
+00007950: 3720 6279 7465 730a 2020 2020 2020 2020  7 bytes.        
+00007960: 2020 2020 2020 5061 6765 3a20 300a 2020        Page: 0.  
+00007970: 2020 2020 2020 2020 2020 2020 5241 4d3a              RAM:
+00007980: 2031 3633 3834 2062 7974 6573 2c20 756e   16384 bytes, un
+00007990: 636f 6d70 7265 7373 6564 0a20 2020 2020  compressed.     
+000079a0: 2020 2020 2020 2052 414d 503a 2031 3633         RAMP: 163
+000079b0: 3837 2062 7974 6573 0a20 2020 2020 2020  87 bytes.       
+000079c0: 2020 2020 2020 2050 6167 653a 2031 0a20         Page: 1. 
+000079d0: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+000079e0: 3a20 3439 3135 322d 3635 3533 3520 4330  : 49152-65535 C0
+000079f0: 3030 2d46 4646 463a 2031 3633 3834 2062  00-FFFF: 16384 b
+00007a00: 7974 6573 2c20 756e 636f 6d70 7265 7373  ytes, uncompress
+00007a10: 6564 0a20 2020 2020 2020 2020 2020 2052  ed.            R
+00007a20: 414d 503a 2031 3633 3837 2062 7974 6573  AMP: 16387 bytes
+00007a30: 0a20 2020 2020 2020 2020 2020 2020 2050  .              P
+00007a40: 6167 653a 2032 0a20 2020 2020 2020 2020  age: 2.         
+00007a50: 2020 2020 2052 414d 3a20 3332 3736 382d       RAM: 32768-
+00007a60: 3439 3135 3120 3830 3030 2d42 4646 463a  49151 8000-BFFF:
+00007a70: 2031 3633 3834 2062 7974 6573 2c20 756e   16384 bytes, un
+00007a80: 636f 6d70 7265 7373 6564 0a20 2020 2020  compressed.     
+00007a90: 2020 2020 2020 2052 414d 503a 2031 3633         RAMP: 163
+00007aa0: 3837 2062 7974 6573 0a20 2020 2020 2020  87 bytes.       
+00007ab0: 2020 2020 2020 2050 6167 653a 2033 0a20         Page: 3. 
+00007ac0: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+00007ad0: 3a20 3136 3338 3420 6279 7465 732c 2075  : 16384 bytes, u
+00007ae0: 6e63 6f6d 7072 6573 7365 640a 2020 2020  ncompressed.    
+00007af0: 2020 2020 2020 2020 5241 4d50 3a20 3136          RAMP: 16
+00007b00: 3338 3720 6279 7465 730a 2020 2020 2020  387 bytes.      
+00007b10: 2020 2020 2020 2020 5061 6765 3a20 340a          Page: 4.
+00007b20: 2020 2020 2020 2020 2020 2020 2020 5241                RA
+00007b30: 4d3a 2031 3633 3834 2062 7974 6573 2c20  M: 16384 bytes, 
+00007b40: 756e 636f 6d70 7265 7373 6564 0a20 2020  uncompressed.   
+00007b50: 2020 2020 2020 2020 2052 414d 503a 2031           RAMP: 1
+00007b60: 3633 3837 2062 7974 6573 0a20 2020 2020  6387 bytes.     
+00007b70: 2020 2020 2020 2020 2050 6167 653a 2035           Page: 5
+00007b80: 0a20 2020 2020 2020 2020 2020 2020 2052  .              R
+00007b90: 414d 3a20 3136 3338 342d 3332 3736 3720  AM: 16384-32767 
+00007ba0: 3430 3030 2d37 4646 463a 2031 3633 3834  4000-7FFF: 16384
+00007bb0: 2062 7974 6573 2c20 756e 636f 6d70 7265   bytes, uncompre
+00007bc0: 7373 6564 0a20 2020 2020 2020 2020 2020  ssed.           
+00007bd0: 2052 414d 503a 2031 3633 3837 2062 7974   RAMP: 16387 byt
+00007be0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00007bf0: 2050 6167 653a 2036 0a20 2020 2020 2020   Page: 6.       
+00007c00: 2020 2020 2020 2052 414d 3a20 3136 3338         RAM: 1638
+00007c10: 3420 6279 7465 732c 2075 6e63 6f6d 7072  4 bytes, uncompr
+00007c20: 6573 7365 640a 2020 2020 2020 2020 2020  essed.          
+00007c30: 2020 5241 4d50 3a20 3136 3338 3720 6279    RAMP: 16387 by
+00007c40: 7465 730a 2020 2020 2020 2020 2020 2020  tes.            
+00007c50: 2020 5061 6765 3a20 370a 2020 2020 2020    Page: 7.      
+00007c60: 2020 2020 2020 2020 5241 4d3a 2031 3633          RAM: 163
+00007c70: 3834 2062 7974 6573 2c20 756e 636f 6d70  84 bytes, uncomp
+00007c80: 7265 7373 6564 0a20 2020 2020 2020 2022  ressed.        "
+00007c90: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00007ca0: 5f74 6573 745f 737a 7828 6578 705f 6f75  _test_szx(exp_ou
+00007cb0: 7470 7574 2c20 7265 6769 7374 6572 732c  tput, registers,
+00007cc0: 2062 6f72 6465 723d 362c 206b 6579 623d   border=6, keyb=
+00007cd0: 5472 7565 2c20 6973 7375 6532 3d30 2c20  True, issue2=0, 
+00007ce0: 636f 6d70 7265 7373 3d46 616c 7365 2c20  compress=False, 
+00007cf0: 6d61 6368 696e 655f 6964 3d32 2c20 6368  machine_id=2, ch
+00007d00: 3766 6664 3d31 2c20 7061 6765 733d 4e6f  7ffd=1, pages=No
+00007d10: 6e65 2c20 6179 3d5b 355d 290a 0a20 2020  ne, ay=[5])..   
+00007d20: 2064 6566 2074 6573 745f 737a 785f 3132   def test_szx_12
+00007d30: 386b 5f63 6f6d 7072 6573 7365 6428 7365  8k_compressed(se
+00007d40: 6c66 293a 0a20 2020 2020 2020 2072 6567  lf):.        reg
+00007d50: 6973 7465 7273 203d 206c 6973 7428 7261  isters = list(ra
+00007d60: 6e67 6528 3136 2c20 3432 2929 2023 2052  nge(16, 42)) # R
+00007d70: 6567 6973 7465 7273 0a20 2020 2020 2020  egisters.       
+00007d80: 2072 6567 6973 7465 7273 2e65 7874 656e   registers.exten
+00007d90: 6428 2830 2c20 3029 2920 2320 4946 4631  d((0, 0)) # IFF1
+00007da0: 2c20 4946 4632 0a20 2020 2020 2020 2072  , IFF2.        r
+00007db0: 6567 6973 7465 7273 2e61 7070 656e 6428  egisters.append(
+00007dc0: 3129 2023 2049 6e74 6572 7275 7074 206d  1) # Interrupt m
+00007dd0: 6f64 650a 2020 2020 2020 2020 7265 6769  ode.        regi
+00007de0: 7374 6572 732e 6578 7465 6e64 2828 312c  sters.extend((1,
+00007df0: 2032 2c20 302c 2030 2929 2023 2064 7743   2, 0, 0)) # dwC
+00007e00: 7963 6c65 7353 7461 7274 0a20 2020 2020  yclesStart.     
+00007e10: 2020 2072 6567 6973 7465 7273 2e65 7874     registers.ext
+00007e20: 656e 6428 2830 2c20 302c 2030 2c20 3029  end((0, 0, 0, 0)
+00007e30: 290a 2020 2020 2020 2020 6578 705f 6f75  ).        exp_ou
+00007e40: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
+00007e50: 2020 2020 2020 2056 6572 7369 6f6e 3a20         Version: 
+00007e60: 312e 340a 2020 2020 2020 2020 2020 2020  1.4.            
+00007e70: 4d61 6368 696e 653a 205a 5820 5370 6563  Machine: ZX Spec
+00007e80: 7472 756d 2031 3238 0a20 2020 2020 2020  trum 128.       
+00007e90: 2020 2020 2053 5043 523a 2038 2062 7974       SPCR: 8 byt
+00007ea0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00007eb0: 2042 6f72 6465 723a 2037 0a20 2020 2020   Border: 7.     
+00007ec0: 2020 2020 2020 2020 2050 6f72 7420 2437           Port $7
+00007ed0: 4646 443a 2031 2028 6261 6e6b 2031 2070  FFD: 1 (bank 1 p
+00007ee0: 6167 6564 2069 6e74 6f20 3439 3135 322d  aged into 49152-
+00007ef0: 3635 3533 3520 4330 3030 2d46 4646 4629  65535 C000-FFFF)
+00007f00: 0a20 2020 2020 2020 2020 2020 2041 593a  .            AY:
+00007f10: 2031 3820 6279 7465 730a 2020 2020 2020   18 bytes.      
+00007f20: 2020 2020 2020 2020 4375 7272 656e 7420          Current 
+00007f30: 4159 2072 6567 6973 7465 723a 2031 330a  AY register: 13.
+00007f40: 2020 2020 2020 2020 2020 2020 5a38 3052              Z80R
+00007f50: 3a20 3337 2062 7974 6573 0a20 2020 2020  : 37 bytes.     
+00007f60: 2020 2020 2020 2020 2049 6e74 6572 7275           Interru
+00007f70: 7074 733a 2064 6973 6162 6c65 640a 2020  pts: disabled.  
+00007f80: 2020 2020 2020 2020 2020 2020 496e 7465              Inte
+00007f90: 7272 7570 7420 6d6f 6465 3a20 310a 2020  rrupt mode: 1.  
+00007fa0: 2020 2020 2020 2020 2020 2020 542d 7374              T-st
+00007fb0: 6174 6573 3a20 3531 330a 2020 2020 2020  ates: 513.      
+00007fc0: 2020 2020 2020 2020 5043 2020 3130 3032          PC  1002
+00007fd0: 3220 3237 3236 2020 2020 5350 2020 2039  2 2726    SP   9
+00007fe0: 3530 3820 3235 3234 0a20 2020 2020 2020  508 2524.       
+00007ff0: 2020 2020 2020 2049 5820 2020 3834 3830         IX   8480
+00008000: 2032 3132 3020 2020 2049 5920 2020 3839   2120    IY   89
+00008010: 3934 2032 3332 320a 2020 2020 2020 2020  94 2322.        
+00008020: 2020 2020 2020 4920 2020 2020 2034 3020        I      40 
+00008030: 2020 3238 2020 2020 5220 2020 2020 2034    28    R      4
+00008040: 3120 2020 3239 0a20 2020 2020 2020 2020  1   29.         
+00008050: 2020 2020 2042 2020 2020 2020 3139 2020       B      19  
+00008060: 2031 3320 2020 2042 2720 2020 2020 3237   13    B'     27
+00008070: 2020 2031 420a 2020 2020 2020 2020 2020     1B.          
+00008080: 2020 2020 4320 2020 2020 2031 3820 2020      C      18   
+00008090: 3132 2020 2020 4327 2020 2020 2032 3620  12    C'     26 
+000080a0: 2020 3141 0a20 2020 2020 2020 2020 2020    1A.           
+000080b0: 2020 2042 4320 2020 3438 3832 2031 3331     BC   4882 131
+000080c0: 3220 2020 2042 4327 2020 3639 3338 2031  2    BC'  6938 1
+000080d0: 4231 410a 2020 2020 2020 2020 2020 2020  B1A.            
+000080e0: 2020 4420 2020 2020 2032 3120 2020 3135    D      21   15
+000080f0: 2020 2020 4427 2020 2020 2032 3920 2020      D'     29   
+00008100: 3144 0a20 2020 2020 2020 2020 2020 2020  1D.             
+00008110: 2045 2020 2020 2020 3230 2020 2031 3420   E      20   14 
+00008120: 2020 2045 2720 2020 2020 3238 2020 2031     E'     28   1
+00008130: 430a 2020 2020 2020 2020 2020 2020 2020  C.              
+00008140: 4445 2020 2035 3339 3620 3135 3134 2020  DE   5396 1514  
+00008150: 2020 4445 2720 2037 3435 3220 3144 3143    DE'  7452 1D1C
+00008160: 0a20 2020 2020 2020 2020 2020 2020 2048  .              H
+00008170: 2020 2020 2020 3233 2020 2031 3720 2020        23   17   
+00008180: 2048 2720 2020 2020 3331 2020 2031 460a   H'     31   1F.
+00008190: 2020 2020 2020 2020 2020 2020 2020 4c20                L 
+000081a0: 2020 2020 2032 3220 2020 3136 2020 2020       22   16    
+000081b0: 4c27 2020 2020 2033 3020 2020 3145 0a20  L'     30   1E. 
+000081c0: 2020 2020 2020 2020 2020 2020 2048 4c20               HL 
+000081d0: 2020 3539 3130 2031 3731 3620 2020 2048    5910 1716    H
+000081e0: 4c27 2020 3739 3636 2031 4631 450a 2020  L'  7966 1F1E.  
+000081f0: 2020 2020 2020 2020 2020 2020 4120 2020              A   
+00008200: 2020 2031 3720 2020 3131 2020 2020 4127     17   11    A'
+00008210: 2020 2020 2032 3520 2020 3139 0a20 2020       25   19.   
+00008220: 2020 2020 2020 2020 2020 2020 2053 5a35               SZ5
+00008230: 4833 504e 4320 2020 2020 2020 2020 2020  H3PNC           
+00008240: 535a 3548 3350 4e43 0a20 2020 2020 2020  SZ5H3PNC.       
+00008250: 2020 2020 2020 2046 2030 3030 3130 3030         F 0001000
+00008260: 3020 2020 2020 2020 2046 2720 3030 3031  0        F' 0001
+00008270: 3130 3030 0a20 2020 2020 2020 2020 2020  1000.           
+00008280: 2052 414d 503a 2034 3220 6279 7465 730a   RAMP: 42 bytes.
+00008290: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
+000082a0: 6765 3a20 300a 2020 2020 2020 2020 2020  ge: 0.          
+000082b0: 2020 2020 5241 4d3a 2033 3920 6279 7465      RAM: 39 byte
+000082c0: 732c 2063 6f6d 7072 6573 7365 640a 2020  s, compressed.  
+000082d0: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
+000082e0: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
+000082f0: 2020 2020 2020 2050 6167 653a 2031 0a20         Page: 1. 
+00008300: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+00008310: 3a20 3439 3135 322d 3635 3533 3520 4330  : 49152-65535 C0
+00008320: 3030 2d46 4646 463a 2033 3920 6279 7465  00-FFFF: 39 byte
+00008330: 732c 2063 6f6d 7072 6573 7365 640a 2020  s, compressed.  
+00008340: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
+00008350: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
+00008360: 2020 2020 2020 2050 6167 653a 2032 0a20         Page: 2. 
+00008370: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+00008380: 3a20 3332 3736 382d 3439 3135 3120 3830  : 32768-49151 80
+00008390: 3030 2d42 4646 463a 2033 3920 6279 7465  00-BFFF: 39 byte
+000083a0: 732c 2063 6f6d 7072 6573 7365 640a 2020  s, compressed.  
+000083b0: 2020 2020 2020 2020 2020 5241 4d50 3a20            RAMP: 
+000083c0: 3432 2062 7974 6573 0a20 2020 2020 2020  42 bytes.       
+000083d0: 2020 2020 2020 2050 6167 653a 2033 0a20         Page: 3. 
+000083e0: 2020 2020 2020 2020 2020 2020 2052 414d               RAM
+000083f0: 3a20 3339 2062 7974 6573 2c20 636f 6d70  : 39 bytes, comp
+00008400: 7265 7373 6564 0a20 2020 2020 2020 2020  ressed.         
+00008410: 2020 2052 414d 503a 2034 3220 6279 7465     RAMP: 42 byte
+00008420: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00008430: 5061 6765 3a20 340a 2020 2020 2020 2020  Page: 4.        
+00008440: 2020 2020 2020 5241 4d3a 2033 3920 6279        RAM: 39 by
+00008450: 7465 732c 2063 6f6d 7072 6573 7365 640a  tes, compressed.
+00008460: 2020 2020 2020 2020 2020 2020 5241 4d50              RAMP
+00008470: 3a20 3432 2062 7974 6573 0a20 2020 2020  : 42 bytes.     
+00008480: 2020 2020 2020 2020 2050 6167 653a 2035           Page: 5
+00008490: 0a20 2020 2020 2020 2020 2020 2020 2052  .              R
+000084a0: 414d 3a20 3136 3338 342d 3332 3736 3720  AM: 16384-32767 
+000084b0: 3430 3030 2d37 4646 463a 2033 3920 6279  4000-7FFF: 39 by
+000084c0: 7465 732c 2063 6f6d 7072 6573 7365 640a  tes, compressed.
+000084d0: 2020 2020 2020 2020 2020 2020 5241 4d50              RAMP
+000084e0: 3a20 3432 2062 7974 6573 0a20 2020 2020  : 42 bytes.     
+000084f0: 2020 2020 2020 2020 2050 6167 653a 2036           Page: 6
+00008500: 0a20 2020 2020 2020 2020 2020 2020 2052  .              R
+00008510: 414d 3a20 3339 2062 7974 6573 2c20 636f  AM: 39 bytes, co
+00008520: 6d70 7265 7373 6564 0a20 2020 2020 2020  mpressed.       
+00008530: 2020 2020 2052 414d 503a 2034 3220 6279       RAMP: 42 by
+00008540: 7465 730a 2020 2020 2020 2020 2020 2020  tes.            
+00008550: 2020 5061 6765 3a20 370a 2020 2020 2020    Page: 7.      
+00008560: 2020 2020 2020 2020 5241 4d3a 2033 3920          RAM: 39 
+00008570: 6279 7465 732c 2063 6f6d 7072 6573 7365  bytes, compresse
+00008580: 640a 2020 2020 2020 2020 2222 220a 2020  d.        """.  
+00008590: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+000085a0: 5f73 7a78 2865 7870 5f6f 7574 7075 742c  _szx(exp_output,
+000085b0: 2072 6567 6973 7465 7273 2c20 626f 7264   registers, bord
+000085c0: 6572 3d37 2c20 636f 6d70 7265 7373 3d54  er=7, compress=T
+000085d0: 7275 652c 206d 6163 6869 6e65 5f69 643d  rue, machine_id=
+000085e0: 322c 2063 6837 6666 643d 312c 2070 6167  2, ch7ffd=1, pag
+000085f0: 6573 3d4e 6f6e 652c 2061 793d 5b31 335d  es=None, ay=[13]
+00008600: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00008610: 737a 785f 7769 7468 6f75 745f 6d61 6769  szx_without_magi
+00008620: 635f 6e75 6d62 6572 2873 656c 6629 3a0a  c_number(self):.
+00008630: 2020 2020 2020 2020 6e6f 6e5f 737a 7820          non_szx 
+00008640: 3d20 7365 6c66 2e77 7269 7465 5f62 696e  = self.write_bin
+00008650: 5f66 696c 6528 2831 2c20 322c 2033 292c  _file((1, 2, 3),
+00008660: 2073 7566 6669 783d 272e 737a 7827 290a   suffix='.szx').
+00008670: 2020 2020 2020 2020 7769 7468 2073 656c          with sel
+00008680: 662e 6173 7365 7274 5261 6973 6573 5265  f.assertRaisesRe
+00008690: 6765 7828 536e 6170 7368 6f74 4572 726f  gex(SnapshotErro
+000086a0: 722c 2027 496e 7661 6c69 6420 535a 5820  r, 'Invalid SZX 
+000086b0: 6669 6c65 2427 293a 0a20 2020 2020 2020  file$'):.       
+000086c0: 2020 2020 2073 656c 662e 7275 6e5f 736e       self.run_sn
+000086d0: 6170 696e 666f 286e 6f6e 5f73 7a78 290a  apinfo(non_szx).
+000086e0: 0a20 2020 2064 6566 2074 6573 745f 7261  .    def test_ra
+000086f0: 775f 6d65 6d6f 7279 5f66 696c 6528 7365  w_memory_file(se
+00008700: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+00008710: 203d 205b 305d 0a20 2020 2020 2020 2065   = [0].        e
+00008720: 7870 5f6f 7574 7075 7420 3d20 2727 0a20  xp_output = ''. 
+00008730: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
+00008740: 745f 6269 6e28 7261 6d2c 2065 7870 5f6f  t_bin(ram, exp_o
+00008750: 7574 7075 7429 0a0a 2020 2020 4070 6174  utput)..    @pat
+00008760: 6368 2e6f 626a 6563 7428 736e 6170 696e  ch.object(snapin
+00008770: 666f 2c20 2742 6173 6963 4c69 7374 6572  fo, 'BasicLister
+00008780: 272c 204d 6f63 6b42 6173 6963 4c69 7374  ', MockBasicList
+00008790: 6572 290a 2020 2020 6465 6620 7465 7374  er).    def test
+000087a0: 5f6f 7074 696f 6e5f 6228 7365 6c66 293a  _option_b(self):
+000087b0: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
+000087c0: 3132 375d 202a 2034 3931 3532 0a20 2020  127] * 49152.   
+000087d0: 2020 2020 2073 6e61 6669 6c65 203d 2073       snafile = s
+000087e0: 656c 662e 7772 6974 655f 6269 6e5f 6669  elf.write_bin_fi
+000087f0: 6c65 285b 305d 202a 2032 3720 2b20 7261  le([0] * 27 + ra
+00008800: 6d2c 2073 7566 6669 783d 272e 736e 6127  m, suffix='.sna'
+00008810: 290a 2020 2020 2020 2020 6578 705f 736e  ).        exp_sn
+00008820: 6170 7368 6f74 203d 205b 305d 202a 2031  apshot = [0] * 1
+00008830: 3633 3834 202b 2072 616d 0a20 2020 2020  6384 + ram.     
+00008840: 2020 2066 6f72 206f 7074 696f 6e20 696e     for option in
+00008850: 2028 272d 6227 2c20 272d 2d62 6173 6963   ('-b', '--basic
+00008860: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00008870: 6f75 7470 7574 2c20 6572 726f 7220 3d20  output, error = 
+00008880: 7365 6c66 2e72 756e 5f73 6e61 7069 6e66  self.run_snapinf
+00008890: 6f28 277b 7d20 7b7d 272e 666f 726d 6174  o('{} {}'.format
+000088a0: 286f 7074 696f 6e2c 2073 6e61 6669 6c65  (option, snafile
+000088b0: 2929 0a20 2020 2020 2020 2020 2020 2073  )).            s
+000088c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000088d0: 6572 726f 722c 2027 2729 0a20 2020 2020  error, '').     
+000088e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000088f0: 7274 4571 7561 6c28 2742 4153 4943 2044  rtEqual('BASIC D
+00008900: 4f4e 4521 5c6e 272c 206f 7574 7075 7429  ONE!\n', output)
+00008910: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00008920: 662e 6173 7365 7274 4571 7561 6c28 6578  f.assertEqual(ex
+00008930: 705f 736e 6170 7368 6f74 2c20 6d6f 636b  p_snapshot, mock
+00008940: 5f62 6173 6963 5f6c 6973 7465 722e 736e  _basic_lister.sn
+00008950: 6170 7368 6f74 290a 2020 2020 2020 2020  apshot).        
+00008960: 2020 2020 6d6f 636b 5f62 6173 6963 5f6c      mock_basic_l
+00008970: 6973 7465 722e 736e 6170 7368 6f74 203d  ister.snapshot =
+00008980: 204e 6f6e 650a 0a20 2020 2040 7061 7463   None..    @patc
+00008990: 682e 6f62 6a65 6374 2873 6e61 7069 6e66  h.object(snapinf
+000089a0: 6f2c 2027 5661 7269 6162 6c65 4c69 7374  o, 'VariableList
+000089b0: 6572 272c 204d 6f63 6b56 6172 6961 626c  er', MockVariabl
+000089c0: 654c 6973 7465 7229 0a20 2020 2064 6566  eLister).    def
+000089d0: 2074 6573 745f 6f70 7469 6f6e 5f76 2873   test_option_v(s
+000089e0: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+000089f0: 6d20 3d20 5b31 3237 5d20 2a20 3439 3135  m = [127] * 4915
+00008a00: 320a 2020 2020 2020 2020 736e 6166 696c  2.        snafil
+00008a10: 6520 3d20 7365 6c66 2e77 7269 7465 5f62  e = self.write_b
+00008a20: 696e 5f66 696c 6528 5b30 5d20 2a20 3237  in_file([0] * 27
+00008a30: 202b 2072 616d 2c20 7375 6666 6978 3d27   + ram, suffix='
+00008a40: 2e73 6e61 2729 0a20 2020 2020 2020 2065  .sna').        e
+00008a50: 7870 5f73 6e61 7073 686f 7420 3d20 5b30  xp_snapshot = [0
+00008a60: 5d20 2a20 3136 3338 3420 2b20 7261 6d0a  ] * 16384 + ram.
+00008a70: 2020 2020 2020 2020 666f 7220 6f70 7469          for opti
+00008a80: 6f6e 2069 6e20 2827 2d76 272c 2027 2d2d  on in ('-v', '--
+00008a90: 7661 7269 6162 6c65 7327 293a 0a20 2020  variables'):.   
+00008aa0: 2020 2020 2020 2020 206f 7574 7075 742c           output,
+00008ab0: 2065 7272 6f72 203d 2073 656c 662e 7275   error = self.ru
+00008ac0: 6e5f 736e 6170 696e 666f 2827 7b7d 207b  n_snapinfo('{} {
+00008ad0: 7d27 2e66 6f72 6d61 7428 6f70 7469 6f6e  }'.format(option
+00008ae0: 2c20 736e 6166 696c 6529 290a 2020 2020  , snafile)).    
+00008af0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00008b00: 6572 7445 7175 616c 2865 7272 6f72 2c20  ertEqual(error, 
+00008b10: 2727 290a 2020 2020 2020 2020 2020 2020  '').            
+00008b20: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00008b30: 2827 5641 5249 4142 4c45 5320 444f 4e45  ('VARIABLES DONE
+00008b40: 215c 6e27 2c20 6f75 7470 7574 290a 2020  !\n', output).  
+00008b50: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00008b60: 7373 6572 7445 7175 616c 2865 7870 5f73  ssertEqual(exp_s
+00008b70: 6e61 7073 686f 742c 206d 6f63 6b5f 7661  napshot, mock_va
+00008b80: 7269 6162 6c65 5f6c 6973 7465 722e 736e  riable_lister.sn
+00008b90: 6170 7368 6f74 290a 2020 2020 2020 2020  apshot).        
+00008ba0: 2020 2020 6d6f 636b 5f76 6172 6961 626c      mock_variabl
+00008bb0: 655f 6c69 7374 6572 2e73 6e61 7073 686f  e_lister.snapsho
+00008bc0: 7420 3d20 4e6f 6e65 0a0a 2020 2020 4070  t = None..    @p
+00008bd0: 6174 6368 2e6f 626a 6563 7428 736e 6170  atch.object(snap
+00008be0: 696e 666f 2c20 2742 6173 6963 4c69 7374  info, 'BasicList
+00008bf0: 6572 272c 204d 6f63 6b42 6173 6963 4c69  er', MockBasicLi
+00008c00: 7374 6572 290a 2020 2020 4070 6174 6368  ster).    @patch
+00008c10: 2e6f 626a 6563 7428 736e 6170 696e 666f  .object(snapinfo
+00008c20: 2c20 2756 6172 6961 626c 654c 6973 7465  , 'VariableListe
+00008c30: 7227 2c20 4d6f 636b 5661 7269 6162 6c65  r', MockVariable
+00008c40: 4c69 7374 6572 290a 2020 2020 6465 6620  Lister).    def 
+00008c50: 7465 7374 5f6f 7074 696f 6e73 5f62 5f61  test_options_b_a
+00008c60: 6e64 5f76 2873 656c 6629 3a0a 2020 2020  nd_v(self):.    
+00008c70: 2020 2020 7261 6d20 3d20 5b31 3237 5d20      ram = [127] 
+00008c80: 2a20 3439 3135 320a 2020 2020 2020 2020  * 49152.        
+00008c90: 736e 6166 696c 6520 3d20 7365 6c66 2e77  snafile = self.w
+00008ca0: 7269 7465 5f62 696e 5f66 696c 6528 5b30  rite_bin_file([0
+00008cb0: 5d20 2a20 3237 202b 2072 616d 2c20 7375  ] * 27 + ram, su
+00008cc0: 6666 6978 3d27 2e73 6e61 2729 0a20 2020  ffix='.sna').   
+00008cd0: 2020 2020 2065 7870 5f73 6e61 7073 686f       exp_snapsho
+00008ce0: 7420 3d20 5b30 5d20 2a20 3136 3338 3420  t = [0] * 16384 
+00008cf0: 2b20 7261 6d0a 2020 2020 2020 2020 666f  + ram.        fo
+00008d00: 7220 6f70 7469 6f6e 2069 6e20 2827 2d62  r option in ('-b
+00008d10: 7627 2c20 272d 6220 2d2d 7661 7269 6162  v', '-b --variab
+00008d20: 6c65 7327 2c20 272d 2d62 6173 6963 202d  les', '--basic -
+00008d30: 7627 2c20 272d 2d62 6173 6963 202d 2d76  v', '--basic --v
+00008d40: 6172 6961 626c 6573 2729 3a0a 2020 2020  ariables'):.    
+00008d50: 2020 2020 2020 2020 6f75 7470 7574 2c20          output, 
+00008d60: 6572 726f 7220 3d20 7365 6c66 2e72 756e  error = self.run
+00008d70: 5f73 6e61 7069 6e66 6f28 277b 7d20 7b7d  _snapinfo('{} {}
+00008d80: 272e 666f 726d 6174 286f 7074 696f 6e2c  '.format(option,
+00008d90: 2073 6e61 6669 6c65 2929 0a20 2020 2020   snafile)).     
+00008da0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00008db0: 7274 4571 7561 6c28 6572 726f 722c 2027  rtEqual(error, '
+00008dc0: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
+00008dd0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00008de0: 2742 4153 4943 2044 4f4e 4521 5c6e 5641  'BASIC DONE!\nVA
+00008df0: 5249 4142 4c45 5320 444f 4e45 215c 6e27  RIABLES DONE!\n'
+00008e00: 2c20 6f75 7470 7574 290a 2020 2020 2020  , output).      
+00008e10: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00008e20: 7445 7175 616c 2865 7870 5f73 6e61 7073  tEqual(exp_snaps
+00008e30: 686f 742c 206d 6f63 6b5f 6261 7369 635f  hot, mock_basic_
+00008e40: 6c69 7374 6572 2e73 6e61 7073 686f 7429  lister.snapshot)
+00008e50: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00008e60: 662e 6173 7365 7274 4571 7561 6c28 6578  f.assertEqual(ex
+00008e70: 705f 736e 6170 7368 6f74 2c20 6d6f 636b  p_snapshot, mock
+00008e80: 5f76 6172 6961 626c 655f 6c69 7374 6572  _variable_lister
+00008e90: 2e73 6e61 7073 686f 7429 0a20 2020 2020  .snapshot).     
+00008ea0: 2020 2020 2020 206d 6f63 6b5f 6261 7369         mock_basi
+00008eb0: 635f 6c69 7374 6572 2e73 6e61 7073 686f  c_lister.snapsho
+00008ec0: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
+00008ed0: 2020 2020 206d 6f63 6b5f 7661 7269 6162       mock_variab
+00008ee0: 6c65 5f6c 6973 7465 722e 736e 6170 7368  le_lister.snapsh
+00008ef0: 6f74 203d 204e 6f6e 650a 0a20 2020 2064  ot = None..    d
+00008f00: 6566 2074 6573 745f 6f70 7469 6f6e 5f63  ef test_option_c
+00008f10: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00008f20: 7261 6d20 3d20 5b32 3031 2c20 3139 352c  ram = [201, 195,
+00008f30: 2030 2c20 3634 5d20 2b20 5b30 5d20 2a20   0, 64] + [0] * 
+00008f40: 3439 3134 380a 2020 2020 2020 2020 6374  49148.        ct
+00008f50: 6c20 3d20 2222 220a 2020 2020 2020 2020  l = """.        
+00008f60: 2020 2020 4020 3136 3338 3420 6c61 6265      @ 16384 labe
+00008f70: 6c3d 454e 440a 2020 2020 2020 2020 2020  l=END.          
+00008f80: 2020 6320 3136 3338 340a 2020 2020 2020    c 16384.      
+00008f90: 2020 2020 2020 4020 3136 3338 3520 6c61        @ 16385 la
+00008fa0: 6265 6c3d 5354 4152 540a 2020 2020 2020  bel=START.      
+00008fb0: 2020 2020 2020 6320 3136 3338 350a 2020        c 16385.  
+00008fc0: 2020 2020 2020 2020 2020 6920 3136 3338            i 1638
+00008fd0: 380a 2020 2020 2020 2020 2222 220a 2020  8.        """.  
+00008fe0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
+00008ff0: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
+00009000: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
+00009010: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
+00009020: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
+00009030: 2031 3633 3835 0a20 2020 2020 2020 2020   16385.         
+00009040: 2020 202f 2f20 4669 7273 7420 696e 7374     // First inst
+00009050: 7275 6374 696f 6e20 6e6f 7420 7573 6564  ruction not used
+00009060: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
+00009070: 2020 2064 6967 7261 7068 207b 0a20 2020     digraph {.   
+00009080: 2020 2020 2020 2020 206e 6f64 6520 5b73           node [s
+00009090: 6861 7065 3d72 6563 6f72 645d 0a20 2020  hape=record].   
+000090a0: 2020 2020 2020 2020 2031 3633 3834 205b           16384 [
+000090b0: 6c61 6265 6c3d 2231 3633 3834 2034 3030  label="16384 400
+000090c0: 305c 6e45 4e44 225d 0a20 2020 2020 2020  0\nEND"].       
+000090d0: 2020 2020 2031 3633 3835 205b 6c61 6265       16385 [labe
+000090e0: 6c3d 2231 3633 3835 2034 3030 315c 6e53  l="16385 4001\nS
+000090f0: 5441 5254 225d 0a20 2020 2020 2020 2020  TART"].         
+00009100: 2020 2031 3633 3835 202d 3e20 7b31 3633     16385 -> {163
+00009110: 3834 7d0a 2020 2020 2020 2020 2020 2020  84}.            
+00009120: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
+00009130: 2020 2020 2020 6374 6c66 696c 6520 3d20        ctlfile = 
+00009140: 7365 6c66 2e77 7269 7465 5f74 6578 745f  self.write_text_
+00009150: 6669 6c65 2864 6564 656e 7428 6374 6c29  file(dedent(ctl)
+00009160: 2e73 7472 6970 2829 2c20 7375 6666 6978  .strip(), suffix
+00009170: 3d27 2e63 746c 2729 0a20 2020 2020 2020  ='.ctl').       
+00009180: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+00009190: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+000091a0: 2027 2d67 202d 6320 7b7d 272e 666f 726d   '-g -c {}'.form
+000091b0: 6174 2863 746c 6669 6c65 292c 2063 746c  at(ctlfile), ctl
+000091c0: 6669 6c65 733d 5b63 746c 6669 6c65 5d29  files=[ctlfile])
+000091d0: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
+000091e0: 7074 696f 6e5f 635f 6f76 6572 7269 6465  ption_c_override
+000091f0: 735f 6465 6661 756c 745f 6374 6c5f 6669  s_default_ctl_fi
+00009200: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
+00009210: 2020 7261 6d20 3d20 5b32 342c 2030 2c20    ram = [24, 0, 
+00009220: 3234 2c20 3235 325d 202b 205b 305d 202a  24, 252] + [0] *
+00009230: 2034 3931 3438 0a20 2020 2020 2020 2064   49148.        d
+00009240: 6566 5f63 746c 203d 2022 2222 0a20 2020  ef_ctl = """.   
+00009250: 2020 2020 2020 2020 2040 2031 3633 3834           @ 16384
+00009260: 206c 6162 656c 3d41 4c4c 0a20 2020 2020   label=ALL.     
+00009270: 2020 2020 2020 2063 2031 3633 3834 0a20         c 16384. 
+00009280: 2020 2020 2020 2020 2020 2069 2031 3633             i 163
+00009290: 3838 0a20 2020 2020 2020 2022 2222 0a20  88.        """. 
+000092a0: 2020 2020 2020 2063 746c 203d 2022 2222         ctl = """
+000092b0: 0a20 2020 2020 2020 2020 2020 2040 2031  .            @ 1
+000092c0: 3633 3834 206c 6162 656c 3d4f 4e45 0a20  6384 label=ONE. 
+000092d0: 2020 2020 2020 2020 2020 2063 2031 3633             c 163
+000092e0: 3834 0a20 2020 2020 2020 2020 2020 2040  84.            @
+000092f0: 2031 3633 3836 206c 6162 656c 3d54 574f   16386 label=TWO
+00009300: 0a20 2020 2020 2020 2020 2020 2063 2031  .            c 1
+00009310: 3633 3836 0a20 2020 2020 2020 2020 2020  6386.           
+00009320: 2069 2031 3633 3838 0a20 2020 2020 2020   i 16388.       
+00009330: 2022 2222 0a20 2020 2020 2020 2065 7870   """.        exp
+00009340: 5f6f 7574 7075 7420 3d20 7222 2222 0a20  _output = r""". 
+00009350: 2020 2020 2020 2020 2020 202f 2f20 556e             // Un
+00009360: 636f 6e6e 6563 7465 643a 204e 6f6e 650a  connected: None.
+00009370: 2020 2020 2020 2020 2020 2020 2f2f 204f              // O
+00009380: 7270 6861 6e73 3a20 4e6f 6e65 0a20 2020  rphans: None.   
+00009390: 2020 2020 2020 2020 202f 2f20 4669 7273           // Firs
+000093a0: 7420 696e 7374 7275 6374 696f 6e20 6e6f  t instruction no
+000093b0: 7420 7573 6564 3a20 4e6f 6e65 0a20 2020  t used: None.   
+000093c0: 2020 2020 2020 2020 2064 6967 7261 7068           digraph
+000093d0: 207b 0a20 2020 2020 2020 2020 2020 206e   {.            n
+000093e0: 6f64 6520 5b73 6861 7065 3d72 6563 6f72  ode [shape=recor
+000093f0: 645d 0a20 2020 2020 2020 2020 2020 2031  d].            1
+00009400: 3633 3834 205b 6c61 6265 6c3d 2231 3633  6384 [label="163
+00009410: 3834 2034 3030 305c 6e4f 4e45 225d 0a20  84 4000\nONE"]. 
+00009420: 2020 2020 2020 2020 2020 2031 3633 3834             16384
+00009430: 202d 3e20 7b31 3633 3836 7d0a 2020 2020   -> {16386}.    
+00009440: 2020 2020 2020 2020 3136 3338 3620 5b6c          16386 [l
+00009450: 6162 656c 3d22 3136 3338 3620 3430 3032  abel="16386 4002
+00009460: 5c6e 5457 4f22 5d0a 2020 2020 2020 2020  \nTWO"].        
+00009470: 2020 2020 3136 3338 3620 2d3e 207b 3136      16386 -> {16
+00009480: 3338 347d 0a20 2020 2020 2020 2020 2020  384}.           
+00009490: 207d 0a20 2020 2020 2020 2022 2222 0a20   }.        """. 
+000094a0: 2020 2020 2020 2063 746c 6669 6c65 203d         ctlfile =
+000094b0: 2073 656c 662e 7772 6974 655f 7465 7874   self.write_text
+000094c0: 5f66 696c 6528 6465 6465 6e74 2863 746c  _file(dedent(ctl
+000094d0: 292e 7374 7269 7028 292c 2073 7566 6669  ).strip(), suffi
+000094e0: 783d 272e 6374 6c27 290a 2020 2020 2020  x='.ctl').      
+000094f0: 2020 7365 6c66 2e5f 7465 7374 5f73 6e61    self._test_sna
+00009500: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
+00009510: 2c20 272d 6720 2d2d 6374 6c20 7b7d 272e  , '-g --ctl {}'.
+00009520: 666f 726d 6174 2863 746c 6669 6c65 292c  format(ctlfile),
+00009530: 2064 6566 5f63 746c 2c20 5b63 746c 6669   def_ctl, [ctlfi
+00009540: 6c65 5d29 0a0a 2020 2020 6465 6620 7465  le])..    def te
+00009550: 7374 5f6f 7074 696f 6e5f 635f 6d75 6c74  st_option_c_mult
+00009560: 6970 6c65 2873 656c 6629 3a0a 2020 2020  iple(self):.    
+00009570: 2020 2020 7261 6d20 3d20 5b32 3031 2c20      ram = [201, 
+00009580: 3139 352c 2030 2c20 3634 5d20 2b20 5b30  195, 0, 64] + [0
+00009590: 5d20 2a20 3439 3134 380a 2020 2020 2020  ] * 49148.      
+000095a0: 2020 6374 6c31 203d 2022 2222 0a20 2020    ctl1 = """.   
+000095b0: 2020 2020 2020 2020 2040 2031 3633 3834           @ 16384
+000095c0: 206c 6162 656c 3d45 4e44 0a20 2020 2020   label=END.     
+000095d0: 2020 2020 2020 2063 2031 3633 3834 0a20         c 16384. 
+000095e0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000095f0: 2020 2063 746c 3220 3d20 2222 220a 2020     ctl2 = """.  
+00009600: 2020 2020 2020 2020 2020 4020 3136 3338            @ 1638
+00009610: 3520 6c61 6265 6c3d 5354 4152 540a 2020  5 label=START.  
+00009620: 2020 2020 2020 2020 2020 6320 3136 3338            c 1638
+00009630: 350a 2020 2020 2020 2020 2020 2020 6920  5.            i 
+00009640: 3136 3338 380a 2020 2020 2020 2020 2222  16388.        ""
+00009650: 220a 2020 2020 2020 2020 6578 705f 6f75  ".        exp_ou
+00009660: 7470 7574 203d 2072 2222 220a 2020 2020  tput = r""".    
+00009670: 2020 2020 2020 2020 2f2f 2055 6e63 6f6e          // Uncon
+00009680: 6e65 6374 6564 3a20 4e6f 6e65 0a20 2020  nected: None.   
+00009690: 2020 2020 2020 2020 202f 2f20 4f72 7068           // Orph
+000096a0: 616e 733a 2031 3633 3835 0a20 2020 2020  ans: 16385.     
+000096b0: 2020 2020 2020 202f 2f20 4669 7273 7420         // First 
+000096c0: 696e 7374 7275 6374 696f 6e20 6e6f 7420  instruction not 
+000096d0: 7573 6564 3a20 4e6f 6e65 0a20 2020 2020  used: None.     
+000096e0: 2020 2020 2020 2064 6967 7261 7068 207b         digraph {
+000096f0: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
+00009700: 6520 5b73 6861 7065 3d72 6563 6f72 645d  e [shape=record]
+00009710: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
+00009720: 3834 205b 6c61 6265 6c3d 2231 3633 3834  84 [label="16384
+00009730: 2034 3030 305c 6e45 4e44 225d 0a20 2020   4000\nEND"].   
+00009740: 2020 2020 2020 2020 2031 3633 3835 205b           16385 [
+00009750: 6c61 6265 6c3d 2231 3633 3835 2034 3030  label="16385 400
+00009760: 315c 6e53 5441 5254 225d 0a20 2020 2020  1\nSTART"].     
+00009770: 2020 2020 2020 2031 3633 3835 202d 3e20         16385 -> 
+00009780: 7b31 3633 3834 7d0a 2020 2020 2020 2020  {16384}.        
+00009790: 2020 2020 7d0a 2020 2020 2020 2020 2222      }.        ""
+000097a0: 220a 2020 2020 2020 2020 6374 6c66 696c  ".        ctlfil
+000097b0: 6573 203d 205b 7365 6c66 2e77 7269 7465  es = [self.write
+000097c0: 5f74 6578 745f 6669 6c65 2864 6564 656e  _text_file(deden
+000097d0: 7428 6329 2e73 7472 6970 2829 2c20 7375  t(c).strip(), su
+000097e0: 6666 6978 3d27 2e63 746c 2729 2066 6f72  ffix='.ctl') for
+000097f0: 2063 2069 6e20 2863 746c 312c 2063 746c   c in (ctl1, ctl
+00009800: 3229 5d0a 2020 2020 2020 2020 7365 6c66  2)].        self
+00009810: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+00009820: 6578 705f 6f75 7470 7574 2c20 272d 6720  exp_output, '-g 
+00009830: 2d63 207b 7d20 2d2d 6374 6c20 7b7d 272e  -c {} --ctl {}'.
+00009840: 666f 726d 6174 282a 6374 6c66 696c 6573  format(*ctlfiles
+00009850: 292c 2063 746c 6669 6c65 733d 6374 6c66  ), ctlfiles=ctlf
+00009860: 696c 6573 290a 0a20 2020 2064 6566 2074  iles)..    def t
+00009870: 6573 745f 6f70 7469 6f6e 5f63 5f77 6974  est_option_c_wit
+00009880: 685f 6469 7265 6374 6f72 7928 7365 6c66  h_directory(self
+00009890: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
+000098a0: 205b 3230 312c 2031 3935 2c20 302c 2036   [201, 195, 0, 6
+000098b0: 345d 202b 205b 305d 202a 2034 3931 3438  4] + [0] * 49148
+000098c0: 0a20 2020 2020 2020 2063 746c 3120 3d20  .        ctl1 = 
+000098d0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+000098e0: 4020 3136 3338 3420 6c61 6265 6c3d 454e  @ 16384 label=EN
+000098f0: 440a 2020 2020 2020 2020 2020 2020 6320  D.            c 
+00009900: 3136 3338 340a 2020 2020 2020 2020 2222  16384.        ""
+00009910: 220a 2020 2020 2020 2020 6374 6c32 203d  ".        ctl2 =
+00009920: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+00009930: 2040 2031 3633 3835 206c 6162 656c 3d53   @ 16385 label=S
+00009940: 5441 5254 0a20 2020 2020 2020 2020 2020  TART.           
+00009950: 2063 2031 3633 3835 0a20 2020 2020 2020   c 16385.       
+00009960: 2020 2020 2069 2031 3633 3838 0a20 2020       i 16388.   
+00009970: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00009980: 2065 7870 5f6f 7574 7075 7420 3d20 7222   exp_output = r"
+00009990: 2222 0a20 2020 2020 2020 2020 2020 202f  "".            /
+000099a0: 2f20 556e 636f 6e6e 6563 7465 643a 204e  / Unconnected: N
+000099b0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000099c0: 2f2f 204f 7270 6861 6e73 3a20 3136 3338  // Orphans: 1638
+000099d0: 350a 2020 2020 2020 2020 2020 2020 2f2f  5.            //
+000099e0: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
+000099f0: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
+00009a00: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
+00009a10: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
+00009a20: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
+00009a30: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
+00009a40: 2020 2020 3136 3338 3420 5b6c 6162 656c      16384 [label
+00009a50: 3d22 3136 3338 3420 3430 3030 5c6e 454e  ="16384 4000\nEN
+00009a60: 4422 5d0a 2020 2020 2020 2020 2020 2020  D"].            
+00009a70: 3136 3338 3520 5b6c 6162 656c 3d22 3136  16385 [label="16
+00009a80: 3338 3520 3430 3031 5c6e 5354 4152 5422  385 4001\nSTART"
+00009a90: 5d0a 2020 2020 2020 2020 2020 2020 3136  ].            16
+00009aa0: 3338 3520 2d3e 207b 3136 3338 347d 0a20  385 -> {16384}. 
+00009ab0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00009ac0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00009ad0: 2063 746c 6469 7220 3d20 7365 6c66 2e6d   ctldir = self.m
+00009ae0: 616b 655f 6469 7265 6374 6f72 7928 290a  ake_directory().
+00009af0: 2020 2020 2020 2020 6374 6c31 6620 3d20          ctl1f = 
+00009b00: 7365 6c66 2e77 7269 7465 5f74 6578 745f  self.write_text_
+00009b10: 6669 6c65 2864 6564 656e 7428 6374 6c31  file(dedent(ctl1
+00009b20: 292e 7374 7269 7028 292c 2070 6174 683d  ).strip(), path=
+00009b30: 6f73 2e70 6174 682e 6a6f 696e 2863 746c  os.path.join(ctl
+00009b40: 6469 722c 2027 6261 722e 6374 6c27 2929  dir, 'bar.ctl'))
+00009b50: 0a20 2020 2020 2020 2063 746c 3266 203d  .        ctl2f =
+00009b60: 2073 656c 662e 7772 6974 655f 7465 7874   self.write_text
+00009b70: 5f66 696c 6528 6465 6465 6e74 2863 746c  _file(dedent(ctl
+00009b80: 3229 2e73 7472 6970 2829 2c20 7061 7468  2).strip(), path
+00009b90: 3d6f 732e 7061 7468 2e6a 6f69 6e28 6374  =os.path.join(ct
+00009ba0: 6c64 6972 2c20 2766 6f6f 2e63 746c 2729  ldir, 'foo.ctl')
+00009bb0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+00009bc0: 7465 7374 5f73 6e61 2872 616d 2c20 6578  test_sna(ram, ex
+00009bd0: 705f 6f75 7470 7574 2c20 272d 6720 2d63  p_output, '-g -c
+00009be0: 207b 7d27 2e66 6f72 6d61 7428 6374 6c64   {}'.format(ctld
+00009bf0: 6972 292c 2063 746c 6669 6c65 733d 2863  ir), ctlfiles=(c
+00009c00: 746c 3166 2c20 6374 6c32 6629 290a 0a20  tl1f, ctl2f)).. 
+00009c10: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
+00009c20: 6f6e 5f66 5f77 6974 685f 7369 6e67 6c65  on_f_with_single
+00009c30: 5f62 7974 6528 7365 6c66 293a 0a20 2020  _byte(self):.   
+00009c40: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+00009c50: 2034 3931 3532 0a20 2020 2020 2020 2061   49152.        a
+00009c60: 6464 7265 7373 203d 2035 3332 3637 0a20  ddress = 53267. 
+00009c70: 2020 2020 2020 2072 616d 5b61 6464 7265         ram[addre
+00009c80: 7373 202d 2031 3633 3834 5d20 3d20 3737  ss - 16384] = 77
+00009c90: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+00009ca0: 7075 7420 3d20 2735 3332 3637 2d35 3332  put = '53267-532
+00009cb0: 3637 2d31 2044 3031 332d 4430 3133 2d31  67-1 D013-D013-1
+00009cc0: 3a20 3737 270a 2020 2020 2020 2020 7365  : 77'.        se
+00009cd0: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
+00009ce0: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
+00009cf0: 6620 3737 2729 0a0a 2020 2020 6465 6620  f 77')..    def 
+00009d00: 7465 7374 5f6f 7074 696f 6e5f 6669 6e64  test_option_find
+00009d10: 5f77 6974 685f 6279 7465 5f73 6571 7565  _with_byte_seque
+00009d20: 6e63 6528 7365 6c66 293a 0a20 2020 2020  nce(self):.     
+00009d30: 2020 2072 616d 203d 205b 305d 202a 2034     ram = [0] * 4
+00009d40: 3931 3532 0a20 2020 2020 2020 2061 6464  9152.        add
+00009d50: 7265 7373 203d 2033 3536 3734 0a20 2020  ress = 35674.   
+00009d60: 2020 2020 2073 6571 203d 2028 322c 2034       seq = (2, 4
+00009d70: 2c20 3629 0a20 2020 2020 2020 2072 616d  , 6).        ram
+00009d80: 5b61 6464 7265 7373 202d 2031 3633 3834  [address - 16384
+00009d90: 3a61 6464 7265 7373 202d 2031 3633 3834  :address - 16384
+00009da0: 202b 206c 656e 2873 6571 295d 203d 2073   + len(seq)] = s
+00009db0: 6571 0a20 2020 2020 2020 2073 6571 5f73  eq.        seq_s
+00009dc0: 7472 203d 2027 2c27 2e6a 6f69 6e28 5b73  tr = ','.join([s
+00009dd0: 7472 2862 2920 666f 7220 6220 696e 2073  tr(b) for b in s
+00009de0: 6571 5d29 0a20 2020 2020 2020 2065 7870  eq]).        exp
+00009df0: 5f6f 7574 7075 7420 3d20 2733 3536 3734  _output = '35674
+00009e00: 2d33 3536 3736 2d31 2038 4235 412d 3842  -35676-1 8B5A-8B
+00009e10: 3543 2d31 3a20 7b7d 272e 666f 726d 6174  5C-1: {}'.format
+00009e20: 2873 6571 5f73 7472 290a 2020 2020 2020  (seq_str).      
+00009e30: 2020 7365 6c66 2e5f 7465 7374 5f73 6e61    self._test_sna
+00009e40: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
+00009e50: 2c20 272d 2d66 696e 6420 7b7d 272e 666f  , '--find {}'.fo
+00009e60: 726d 6174 2873 6571 5f73 7472 2929 0a0a  rmat(seq_str))..
+00009e70: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+00009e80: 696f 6e5f 665f 7769 7468 5f62 7974 655f  ion_f_with_byte_
+00009e90: 7365 7175 656e 6365 5f61 6e64 5f73 7465  sequence_and_ste
+00009ea0: 7028 7365 6c66 293a 0a20 2020 2020 2020  p(self):.       
+00009eb0: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
+00009ec0: 3532 0a20 2020 2020 2020 2061 6464 7265  52.        addre
+00009ed0: 7373 203d 2034 3739 3833 0a20 2020 2020  ss = 47983.     
+00009ee0: 2020 2073 6571 203d 2028 322c 2033 2c20     seq = (2, 3, 
+00009ef0: 3529 0a20 2020 2020 2020 2073 7465 7020  5).        step 
+00009f00: 3d20 320a 2020 2020 2020 2020 7261 6d5b  = 2.        ram[
+00009f10: 6164 6472 6573 7320 2d20 3136 3338 343a  address - 16384:
+00009f20: 6164 6472 6573 7320 2d20 3136 3338 3420  address - 16384 
+00009f30: 2b20 7374 6570 202a 206c 656e 2873 6571  + step * len(seq
+00009f40: 293a 7374 6570 5d20 3d20 7365 710a 2020  ):step] = seq.  
+00009f50: 2020 2020 2020 7365 715f 7374 7220 3d20        seq_str = 
+00009f60: 272c 272e 6a6f 696e 285b 7374 7228 6229  ','.join([str(b)
+00009f70: 2066 6f72 2062 2069 6e20 7365 715d 290a   for b in seq]).
+00009f80: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
+00009f90: 7574 203d 2027 3437 3938 332d 3437 3938  ut = '47983-4798
+00009fa0: 372d 3220 4242 3646 2d42 4237 332d 323a  7-2 BB6F-BB73-2:
+00009fb0: 207b 7d27 2e66 6f72 6d61 7428 7365 715f   {}'.format(seq_
+00009fc0: 7374 7229 0a20 2020 2020 2020 2073 656c  str).        sel
+00009fd0: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
+00009fe0: 2065 7870 5f6f 7574 7075 742c 2027 2d66   exp_output, '-f
+00009ff0: 207b 7d2d 7b7d 272e 666f 726d 6174 2873   {}-{}'.format(s
+0000a000: 6571 5f73 7472 2c20 7374 6570 2929 0a0a  eq_str, step))..
+0000a010: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+0000a020: 696f 6e5f 665f 7769 7468 5f62 7974 655f  ion_f_with_byte_
+0000a030: 7365 7175 656e 6365 5f61 6e64 5f73 7465  sequence_and_ste
+0000a040: 705f 7261 6e67 6528 7365 6c66 293a 0a20  p_range(self):. 
+0000a050: 2020 2020 2020 2072 616d 203d 205b 305d         ram = [0]
+0000a060: 202a 2034 3931 3532 0a20 2020 2020 2020   * 49152.       
+0000a070: 2061 6464 7265 7373 6573 203d 2028 3331   addresses = (31
+0000a080: 3738 332c 2034 3235 3637 2c20 3532 3137  783, 42567, 5217
+0000a090: 3229 0a20 2020 2020 2020 2073 6571 203d  2).        seq =
+0000a0a0: 2028 382c 2031 302c 2031 3329 0a20 2020   (8, 10, 13).   
+0000a0b0: 2020 2020 2073 7465 7073 203d 2028 322c       steps = (2,
+0000a0c0: 2033 2c20 3429 0a20 2020 2020 2020 2073   3, 4).        s
+0000a0d0: 6571 5f73 7472 203d 2027 2c27 2e6a 6f69  eq_str = ','.joi
+0000a0e0: 6e28 5b73 7472 2862 2920 666f 7220 6220  n([str(b) for b 
+0000a0f0: 696e 2073 6571 5d29 0a20 2020 2020 2020  in seq]).       
+0000a100: 2066 6f72 2061 6464 722c 2073 7465 7020   for addr, step 
+0000a110: 696e 207a 6970 2861 6464 7265 7373 6573  in zip(addresses
+0000a120: 2c20 7374 6570 7329 3a0a 2020 2020 2020  , steps):.      
+0000a130: 2020 2020 2020 7261 6d5b 6164 6472 202d        ram[addr -
+0000a140: 2031 3633 3834 3a61 6464 7220 2d20 3136   16384:addr - 16
+0000a150: 3338 3420 2b20 7374 6570 202a 206c 656e  384 + step * len
+0000a160: 2873 6571 293a 7374 6570 5d20 3d20 7365  (seq):step] = se
+0000a170: 710a 2020 2020 2020 2020 6578 705f 6f75  q.        exp_ou
+0000a180: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
+0000a190: 2020 2020 2020 2033 3137 3833 2d33 3137         31783-317
+0000a1a0: 3837 2d32 2037 4332 372d 3743 3242 2d32  87-2 7C27-7C2B-2
+0000a1b0: 3a20 382c 3130 2c31 330a 2020 2020 2020  : 8,10,13.      
+0000a1c0: 2020 2020 2020 3432 3536 372d 3432 3537        42567-4257
+0000a1d0: 332d 3320 4136 3437 2d41 3634 442d 333a  3-3 A647-A64D-3:
+0000a1e0: 2038 2c31 302c 3133 0a20 2020 2020 2020   8,10,13.       
+0000a1f0: 2020 2020 2035 3231 3732 2d35 3231 3830       52172-52180
+0000a200: 2d34 2043 4243 432d 4342 4434 2d34 3a20  -4 CBCC-CBD4-4: 
+0000a210: 382c 3130 2c31 330a 2020 2020 2020 2020  8,10,13.        
+0000a220: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0000a230: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+0000a240: 6578 705f 6f75 7470 7574 2c20 272d 6620  exp_output, '-f 
+0000a250: 7b7d 2d31 2d35 272e 666f 726d 6174 2873  {}-1-5'.format(s
+0000a260: 6571 5f73 7472 2929 0a0a 2020 2020 6465  eq_str))..    de
+0000a270: 6620 7465 7374 5f6f 7074 696f 6e5f 665f  f test_option_f_
+0000a280: 7769 7468 5f61 6464 7265 7373 5f62 656c  with_address_bel
+0000a290: 6f77 5f31 3633 3834 2873 656c 6629 3a0a  ow_16384(self):.
+0000a2a0: 2020 2020 2020 2020 6461 7461 203d 205b          data = [
+0000a2b0: 305d 202a 2032 3536 0a20 2020 2020 2020  0] * 256.       
+0000a2c0: 2061 6464 7265 7373 203d 2031 3335 0a20   address = 135. 
+0000a2d0: 2020 2020 2020 2073 6571 203d 2028 322c         seq = (2,
+0000a2e0: 2034 2c20 3629 0a20 2020 2020 2020 2064   4, 6).        d
+0000a2f0: 6174 615b 6164 6472 6573 733a 6164 6472  ata[address:addr
+0000a300: 6573 7320 2b20 6c65 6e28 7365 7129 5d20  ess + len(seq)] 
+0000a310: 3d20 7365 710a 2020 2020 2020 2020 7365  = seq.        se
+0000a320: 715f 7374 7220 3d20 272c 272e 6a6f 696e  q_str = ','.join
+0000a330: 285b 7374 7228 6229 2066 6f72 2062 2069  ([str(b) for b i
+0000a340: 6e20 7365 715d 290a 2020 2020 2020 2020  n seq]).        
+0000a350: 6269 6e66 696c 6520 3d20 7365 6c66 2e77  binfile = self.w
+0000a360: 7269 7465 5f62 696e 5f66 696c 6528 6461  rite_bin_file(da
+0000a370: 7461 2c20 7375 6666 6978 3d27 2e62 696e  ta, suffix='.bin
+0000a380: 2729 0a20 2020 2020 2020 2065 7870 5f6f  ').        exp_o
+0000a390: 7574 7075 7420 3d20 2731 3335 2d31 3337  utput = '135-137
+0000a3a0: 2d31 2030 3038 372d 3030 3839 2d31 3a20  -1 0087-0089-1: 
+0000a3b0: 7b7d 272e 666f 726d 6174 2873 6571 5f73  {}'.format(seq_s
+0000a3c0: 7472 290a 2020 2020 2020 2020 6f75 7470  tr).        outp
+0000a3d0: 7574 2c20 6572 726f 7220 3d20 7365 6c66  ut, error = self
+0000a3e0: 2e72 756e 5f73 6e61 7069 6e66 6f28 6627  .run_snapinfo(f'
+0000a3f0: 2d66 207b 7365 715f 7374 727d 202d 6f20  -f {seq_str} -o 
+0000a400: 3020 7b62 696e 6669 6c65 7d27 290a 2020  0 {binfile}').  
+0000a410: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000a420: 7445 7175 616c 2865 7272 6f72 2c20 2727  tEqual(error, ''
+0000a430: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000a440: 7373 6572 7445 7175 616c 286f 7574 7075  ssertEqual(outpu
+0000a450: 742e 7374 7269 7028 292c 2065 7870 5f6f  t.strip(), exp_o
+0000a460: 7574 7075 7429 0a0a 2020 2020 6465 6620  utput)..    def 
+0000a470: 7465 7374 5f6f 7074 696f 6e5f 665f 7769  test_option_f_wi
+0000a480: 7468 5f68 6578 6164 6563 696d 616c 5f76  th_hexadecimal_v
+0000a490: 616c 7565 7328 7365 6c66 293a 0a20 2020  alues(self):.   
+0000a4a0: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+0000a4b0: 2034 3931 3532 0a20 2020 2020 2020 2061   49152.        a
+0000a4c0: 6464 7265 7373 203d 2034 3739 3833 0a20  ddress = 47983. 
+0000a4d0: 2020 2020 2020 2073 6571 203d 2028 3078         seq = (0x
+0000a4e0: 3032 2c20 3078 3366 2c20 3078 3561 290a  02, 0x3f, 0x5a).
+0000a4f0: 2020 2020 2020 2020 7374 6570 203d 2030          step = 0
+0000a500: 7831 610a 2020 2020 2020 2020 7261 6d5b  x1a.        ram[
+0000a510: 6164 6472 6573 7320 2d20 3136 3338 343a  address - 16384:
+0000a520: 6164 6472 6573 7320 2d20 3136 3338 3420  address - 16384 
+0000a530: 2b20 7374 6570 202a 206c 656e 2873 6571  + step * len(seq
+0000a540: 293a 7374 6570 5d20 3d20 7365 710a 2020  ):step] = seq.  
+0000a550: 2020 2020 2020 7365 715f 7374 7220 3d20        seq_str = 
+0000a560: 272c 272e 6a6f 696e 285b 2724 7b3a 3032  ','.join(['${:02
+0000a570: 587d 272e 666f 726d 6174 2862 2920 666f  X}'.format(b) fo
+0000a580: 7220 6220 696e 2073 6571 5d29 0a20 2020  r b in seq]).   
+0000a590: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
+0000a5a0: 3d20 2734 3739 3833 2d34 3830 3335 2d32  = '47983-48035-2
+0000a5b0: 3620 4242 3646 2d42 4241 332d 3141 3a20  6 BB6F-BBA3-1A: 
+0000a5c0: 7b7d 272e 666f 726d 6174 2873 6571 5f73  {}'.format(seq_s
+0000a5d0: 7472 290a 2020 2020 2020 2020 7365 6c66  tr).        self
+0000a5e0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+0000a5f0: 6578 705f 6f75 7470 7574 2c20 272d 6620  exp_output, '-f 
+0000a600: 7b7d 2d24 7b3a 3032 787d 272e 666f 726d  {}-${:02x}'.form
+0000a610: 6174 2873 6571 5f73 7472 2c20 7374 6570  at(seq_str, step
+0000a620: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
+0000a630: 5f6f 7074 696f 6e5f 665f 7769 7468 5f30  _option_f_with_0
+0000a640: 785f 6865 7861 6465 6369 6d61 6c5f 7661  x_hexadecimal_va
+0000a650: 6c75 6573 2873 656c 6629 3a0a 2020 2020  lues(self):.    
+0000a660: 2020 2020 7261 6d20 3d20 5b30 5d20 2a20      ram = [0] * 
+0000a670: 3439 3135 320a 2020 2020 2020 2020 6164  49152.        ad
+0000a680: 6472 6573 7320 3d20 3437 3938 330a 2020  dress = 47983.  
+0000a690: 2020 2020 2020 7365 7120 3d20 2830 7830        seq = (0x0
+0000a6a0: 322c 2030 7833 662c 2030 7835 6129 0a20  2, 0x3f, 0x5a). 
+0000a6b0: 2020 2020 2020 2073 7465 7020 3d20 3078         step = 0x
+0000a6c0: 3161 0a20 2020 2020 2020 2072 616d 5b61  1a.        ram[a
+0000a6d0: 6464 7265 7373 202d 2031 3633 3834 3a61  ddress - 16384:a
+0000a6e0: 6464 7265 7373 202d 2031 3633 3834 202b  ddress - 16384 +
+0000a6f0: 2073 7465 7020 2a20 6c65 6e28 7365 7129   step * len(seq)
+0000a700: 3a73 7465 705d 203d 2073 6571 0a20 2020  :step] = seq.   
+0000a710: 2020 2020 2073 6571 5f73 7472 203d 2027       seq_str = '
+0000a720: 2c27 2e6a 6f69 6e28 5b27 3078 7b3a 3032  ,'.join(['0x{:02
+0000a730: 587d 272e 666f 726d 6174 2862 2920 666f  X}'.format(b) fo
+0000a740: 7220 6220 696e 2073 6571 5d29 0a20 2020  r b in seq]).   
+0000a750: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
+0000a760: 3d20 2734 3739 3833 2d34 3830 3335 2d32  = '47983-48035-2
+0000a770: 3620 4242 3646 2d42 4241 332d 3141 3a20  6 BB6F-BBA3-1A: 
+0000a780: 7b7d 272e 666f 726d 6174 2873 6571 5f73  {}'.format(seq_s
+0000a790: 7472 290a 2020 2020 2020 2020 7365 6c66  tr).        self
+0000a7a0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+0000a7b0: 6578 705f 6f75 7470 7574 2c20 272d 6620  exp_output, '-f 
+0000a7c0: 7b7d 2d30 787b 3a30 3278 7d2d 3078 7b3a  {}-0x{:02x}-0x{:
+0000a7d0: 3032 787d 272e 666f 726d 6174 2873 6571  02x}'.format(seq
+0000a7e0: 5f73 7472 2c20 7374 6570 2c20 7374 6570  _str, step, step
+0000a7f0: 202b 2031 2929 0a0a 2020 2020 6465 6620   + 1))..    def 
+0000a800: 7465 7374 5f6f 7074 696f 6e5f 6669 6e64  test_option_find
+0000a810: 5f77 6974 685f 6e6f 6e65 7869 7374 656e  _with_nonexisten
+0000a820: 745f 6279 7465 5f73 6571 7565 6e63 6528  t_byte_sequence(
+0000a830: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+0000a840: 616d 203d 205b 305d 202a 2034 3931 3532  am = [0] * 49152
+0000a850: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+0000a860: 7075 7420 3d20 2727 0a20 2020 2020 2020  put = ''.       
+0000a870: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+0000a880: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+0000a890: 2027 2d2d 6669 6e64 2031 2c32 2c33 2729   '--find 1,2,3')
+0000a8a0: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
+0000a8b0: 7074 696f 6e5f 6669 6e64 5f77 6974 685f  ption_find_with_
+0000a8c0: 696e 7661 6c69 645f 6279 7465 5f73 6571  invalid_byte_seq
+0000a8d0: 7565 6e63 6528 7365 6c66 293a 0a20 2020  uence(self):.   
+0000a8e0: 2020 2020 2065 7870 5f65 7272 6f72 203d       exp_error =
+0000a8f0: 2027 496e 7661 6c69 6420 6279 7465 2073   'Invalid byte s
+0000a900: 6571 7565 6e63 6527 0a20 2020 2020 2020  equence'.       
+0000a910: 2073 656c 662e 5f74 6573 745f 6261 645f   self._test_bad_
+0000a920: 7370 6563 2827 2d2d 6669 6e64 272c 2027  spec('--find', '
+0000a930: 7a27 2c20 6578 705f 6572 726f 7229 0a20  z', exp_error). 
+0000a940: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
+0000a950: 745f 6261 645f 7370 6563 2827 2d66 272c  t_bad_spec('-f',
+0000a960: 2027 312c 2127 2c20 6578 705f 6572 726f   '1,!', exp_erro
+0000a970: 7229 0a20 2020 2020 2020 2073 656c 662e  r).        self.
+0000a980: 5f74 6573 745f 6261 645f 7370 6563 2827  _test_bad_spec('
+0000a990: 2d2d 6669 6e64 272c 2027 312c 322c 3f27  --find', '1,2,?'
+0000a9a0: 2c20 6578 705f 6572 726f 7229 0a20 2020  , exp_error).   
+0000a9b0: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
+0000a9c0: 6261 645f 7370 6563 2827 2d66 272c 2027  bad_spec('-f', '
+0000a9d0: 312c 2c33 272c 2065 7870 5f65 7272 6f72  1,,3', exp_error
+0000a9e0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0000a9f0: 6f70 7469 6f6e 5f66 696e 645f 7769 7468  option_find_with
+0000aa00: 5f69 6e76 616c 6964 5f73 7465 7028 7365  _invalid_step(se
+0000aa10: 6c66 293a 0a20 2020 2020 2020 2065 7870  lf):.        exp
+0000aa20: 5f65 7272 6f72 203d 2027 496e 7661 6c69  _error = 'Invali
+0000aa30: 6420 6469 7374 616e 6365 3a20 7b7d 270a  d distance: {}'.
+0000aa40: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+0000aa50: 7374 5f62 6164 5f73 7065 6328 272d 2d66  st_bad_spec('--f
+0000aa60: 696e 6427 2c20 2731 2c32 2c33 2d78 272c  ind', '1,2,3-x',
+0000aa70: 2065 7870 5f65 7272 6f72 2e66 6f72 6d61   exp_error.forma
+0000aa80: 7428 2778 2729 2c20 4661 6c73 6529 0a20  t('x'), False). 
+0000aa90: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
+0000aaa0: 745f 6261 645f 7370 6563 2827 2d66 272c  t_bad_spec('-f',
+0000aab0: 2027 342c 352c 362d 312d 7927 2c20 6578   '4,5,6-1-y', ex
+0000aac0: 705f 6572 726f 722e 666f 726d 6174 2827  p_error.format('
+0000aad0: 312d 7927 292c 2046 616c 7365 290a 2020  1-y'), False).  
+0000aae0: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+0000aaf0: 5f62 6164 5f73 7065 6328 272d 2d66 696e  _bad_spec('--fin
+0000ab00: 6427 2c20 2737 2c38 2c39 2d7a 2d35 272c  d', '7,8,9-z-5',
+0000ab10: 2065 7870 5f65 7272 6f72 2e66 6f72 6d61   exp_error.forma
+0000ab20: 7428 277a 2d35 2729 2c20 4661 6c73 6529  t('z-5'), False)
+0000ab30: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+0000ab40: 6573 745f 6261 645f 7370 6563 2827 2d66  est_bad_spec('-f
+0000ab50: 272c 2027 3130 2c31 312c 3132 2d71 2d3f  ', '10,11,12-q-?
+0000ab60: 272c 2065 7870 5f65 7272 6f72 2e66 6f72  ', exp_error.for
+0000ab70: 6d61 7428 2771 2d3f 2729 2c20 4661 6c73  mat('q-?'), Fals
+0000ab80: 6529 0a0a 2020 2020 6465 6620 7465 7374  e)..    def test
+0000ab90: 5f6f 7074 696f 6e5f 675f 7769 7468 5f6e  _option_g_with_n
+0000aba0: 6f5f 6374 6c5f 6669 6c65 2873 656c 6629  o_ctl_file(self)
+0000abb0: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
+0000abc0: 5b30 5d20 2a20 3439 3135 320a 2020 2020  [0] * 49152.    
+0000abd0: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+0000abe0: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
+0000abf0: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
+0000ac00: 3a20 3136 3338 340a 2020 2020 2020 2020  : 16384.        
+0000ac10: 2020 2020 2f2f 204f 7270 6861 6e73 3a20      // Orphans: 
+0000ac20: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000ac30: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
+0000ac40: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
+0000ac50: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000ac60: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
+0000ac70: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
+0000ac80: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
+0000ac90: 2020 2020 2020 2031 3633 3834 205b 6c61         16384 [la
+0000aca0: 6265 6c3d 2231 3633 3834 2034 3030 305c  bel="16384 4000\
+0000acb0: 6e22 5d0a 2020 2020 2020 2020 2020 2020  n"].            
+0000acc0: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
+0000acd0: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+0000ace0: 5f73 6e61 2872 616d 2c20 6578 705f 6f75  _sna(ram, exp_ou
+0000acf0: 7470 7574 2c20 272d 6727 290a 0a20 2020  tput, '-g')..   
+0000ad00: 2040 7061 7463 682e 6f62 6a65 6374 2863   @patch.object(c
+0000ad10: 6f6d 706f 6e65 6e74 732c 2027 534b 5f43  omponents, 'SK_C
+0000ad20: 4f4e 4649 4727 2c20 4e6f 6e65 290a 2020  ONFIG', None).  
+0000ad30: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
+0000ad40: 6e5f 675f 7769 7468 5f6e 6f5f 6374 6c5f  n_g_with_no_ctl_
+0000ad50: 6669 6c65 5f61 6e64 5f63 7573 746f 6d5f  file_and_custom_
+0000ad60: 6465 6661 756c 745f 6469 7361 7373 656d  default_disassem
+0000ad70: 626c 795f 7374 6172 745f 6164 6472 6573  bly_start_addres
+0000ad80: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000ad90: 2069 6e69 203d 2022 5b73 6b6f 6f6c 6b69   ini = "[skoolki
+0000ada0: 745d 5c6e 4465 6661 756c 7444 6973 6173  t]\nDefaultDisas
+0000adb0: 7365 6d62 6c79 5374 6172 7441 6464 7265  semblyStartAddre
+0000adc0: 7373 3d36 3432 3232 220a 2020 2020 2020  ss=64222".      
+0000add0: 2020 7365 6c66 2e77 7269 7465 5f74 6578    self.write_tex
+0000ade0: 745f 6669 6c65 2869 6e69 2c20 2773 6b6f  t_file(ini, 'sko
+0000adf0: 6f6c 6b69 742e 696e 6927 290a 2020 2020  olkit.ini').    
+0000ae00: 2020 2020 7261 6d20 3d20 5b30 5d20 2a20      ram = [0] * 
+0000ae10: 3439 3135 320a 2020 2020 2020 2020 6578  49152.        ex
+0000ae20: 705f 6f75 7470 7574 203d 2072 2222 220a  p_output = r""".
+0000ae30: 2020 2020 2020 2020 2020 2020 2f2f 2055              // U
+0000ae40: 6e63 6f6e 6e65 6374 6564 3a20 3634 3232  nconnected: 6422
+0000ae50: 320a 2020 2020 2020 2020 2020 2020 2f2f  2.            //
+0000ae60: 204f 7270 6861 6e73 3a20 4e6f 6e65 0a20   Orphans: None. 
+0000ae70: 2020 2020 2020 2020 2020 202f 2f20 4669             // Fi
+0000ae80: 7273 7420 696e 7374 7275 6374 696f 6e20  rst instruction 
+0000ae90: 6e6f 7420 7573 6564 3a20 4e6f 6e65 0a20  not used: None. 
+0000aea0: 2020 2020 2020 2020 2020 2064 6967 7261             digra
+0000aeb0: 7068 207b 0a20 2020 2020 2020 2020 2020  ph {.           
+0000aec0: 206e 6f64 6520 5b73 6861 7065 3d72 6563   node [shape=rec
+0000aed0: 6f72 645d 0a20 2020 2020 2020 2020 2020  ord].           
+0000aee0: 2036 3432 3232 205b 6c61 6265 6c3d 2236   64222 [label="6
+0000aef0: 3432 3232 2046 4144 455c 6e22 5d0a 2020  4222 FADE\n"].  
+0000af00: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+0000af10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000af20: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
+0000af30: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+0000af40: 272d 6727 290a 0a20 2020 2064 6566 2074  '-g')..    def t
+0000af50: 6573 745f 6f70 7469 6f6e 5f63 616c 6c5f  est_option_call_
+0000af60: 6772 6170 685f 7769 7468 5f63 746c 5f66  graph_with_ctl_f
+0000af70: 696c 6528 7365 6c66 293a 0a20 2020 2020  ile(self):.     
+0000af80: 2020 2072 616d 203d 205b 3139 352c 2033     ram = [195, 3
+0000af90: 2c20 3634 2c20 3230 315d 202b 205b 305d  , 64, 201] + [0]
+0000afa0: 202a 2034 3931 3438 0a20 2020 2020 2020   * 49148.       
+0000afb0: 2063 746c 203d 2022 2222 0a20 2020 2020   ctl = """.     
+0000afc0: 2020 2020 2020 2040 2031 3633 3834 206c         @ 16384 l
+0000afd0: 6162 656c 3d53 5441 5254 0a20 2020 2020  abel=START.     
+0000afe0: 2020 2020 2020 2063 2031 3633 3834 0a20         c 16384. 
+0000aff0: 2020 2020 2020 2020 2020 2040 2031 3633             @ 163
+0000b000: 3837 206c 6162 656c 3d45 4e44 0a20 2020  87 label=END.   
+0000b010: 2020 2020 2020 2020 2063 2031 3633 3837           c 16387
+0000b020: 0a20 2020 2020 2020 2020 2020 2069 2031  .            i 1
+0000b030: 3633 3838 0a20 2020 2020 2020 2022 2222  6388.        """
+0000b040: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+0000b050: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
+0000b060: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
+0000b070: 6563 7465 643a 204e 6f6e 650a 2020 2020  ected: None.    
+0000b080: 2020 2020 2020 2020 2f2f 204f 7270 6861          // Orpha
+0000b090: 6e73 3a20 3136 3338 340a 2020 2020 2020  ns: 16384.      
+0000b0a0: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
+0000b0b0: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
+0000b0c0: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
+0000b0d0: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
+0000b0e0: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
+0000b0f0: 205b 7368 6170 653d 7265 636f 7264 5d0a   [shape=record].
+0000b100: 2020 2020 2020 2020 2020 2020 3136 3338              1638
+0000b110: 3420 5b6c 6162 656c 3d22 3136 3338 3420  4 [label="16384 
+0000b120: 3430 3030 5c6e 5354 4152 5422 5d0a 2020  4000\nSTART"].  
+0000b130: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
+0000b140: 2d3e 207b 3136 3338 377d 0a20 2020 2020  -> {16387}.     
+0000b150: 2020 2020 2020 2031 3633 3837 205b 6c61         16387 [la
+0000b160: 6265 6c3d 2231 3633 3837 2034 3030 335c  bel="16387 4003\
+0000b170: 6e45 4e44 225d 0a20 2020 2020 2020 2020  nEND"].         
+0000b180: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
+0000b190: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+0000b1a0: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
+0000b1b0: 5f6f 7574 7075 742c 2027 2d2d 6361 6c6c  _output, '--call
+0000b1c0: 2d67 7261 7068 272c 2063 746c 290a 0a20  -graph', ctl).. 
+0000b1d0: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
+0000b1e0: 6f6e 5f67 5f77 6974 685f 6f6e 655f 726f  on_g_with_one_ro
+0000b1f0: 7574 696e 655f 636f 6e74 696e 7569 6e67  utine_continuing
+0000b200: 5f69 6e74 6f5f 616e 6f74 6865 7228 7365  _into_another(se
+0000b210: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+0000b220: 203d 205b 3137 352c 2036 2c20 302c 2032   = [175, 6, 0, 2
+0000b230: 3031 5d20 2b20 5b30 5d20 2a20 3439 3134  01] + [0] * 4914
+0000b240: 380a 2020 2020 2020 2020 6374 6c20 3d20  8.        ctl = 
+0000b250: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+0000b260: 4020 3136 3338 3420 6c61 6265 6c3d 5354  @ 16384 label=ST
+0000b270: 4152 540a 2020 2020 2020 2020 2020 2020  ART.            
+0000b280: 6320 3136 3338 340a 2020 2020 2020 2020  c 16384.        
+0000b290: 2020 2020 4020 3136 3338 3720 6c61 6265      @ 16387 labe
+0000b2a0: 6c3d 434f 4e54 494e 5545 0a20 2020 2020  l=CONTINUE.     
+0000b2b0: 2020 2020 2020 2063 2031 3633 3837 0a20         c 16387. 
+0000b2c0: 2020 2020 2020 2020 2020 2069 2031 3633             i 163
+0000b2d0: 3838 0a20 2020 2020 2020 2022 2222 0a20  88.        """. 
+0000b2e0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+0000b2f0: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
+0000b300: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
+0000b310: 7465 643a 204e 6f6e 650a 2020 2020 2020  ted: None.      
+0000b320: 2020 2020 2020 2f2f 204f 7270 6861 6e73        // Orphans
+0000b330: 3a20 3136 3338 340a 2020 2020 2020 2020  : 16384.        
+0000b340: 2020 2020 2f2f 2046 6972 7374 2069 6e73      // First ins
+0000b350: 7472 7563 7469 6f6e 206e 6f74 2075 7365  truction not use
+0000b360: 643a 204e 6f6e 650a 2020 2020 2020 2020  d: None.        
+0000b370: 2020 2020 6469 6772 6170 6820 7b0a 2020      digraph {.  
+0000b380: 2020 2020 2020 2020 2020 6e6f 6465 205b            node [
+0000b390: 7368 6170 653d 7265 636f 7264 5d0a 2020  shape=record].  
+0000b3a0: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
+0000b3b0: 5b6c 6162 656c 3d22 3136 3338 3420 3430  [label="16384 40
+0000b3c0: 3030 5c6e 5354 4152 5422 5d0a 2020 2020  00\nSTART"].    
+0000b3d0: 2020 2020 2020 2020 3136 3338 3420 2d3e          16384 ->
+0000b3e0: 207b 3136 3338 377d 0a20 2020 2020 2020   {16387}.       
+0000b3f0: 2020 2020 2031 3633 3837 205b 6c61 6265       16387 [labe
+0000b400: 6c3d 2231 3633 3837 2034 3030 335c 6e43  l="16387 4003\nC
+0000b410: 4f4e 5449 4e55 4522 5d0a 2020 2020 2020  ONTINUE"].      
+0000b420: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000b430: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0000b440: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+0000b450: 6578 705f 6f75 7470 7574 2c20 272d 6727  exp_output, '-g'
+0000b460: 2c20 6374 6c29 0a0a 2020 2020 6465 6620  , ctl)..    def 
+0000b470: 7465 7374 5f6f 7074 696f 6e5f 675f 7769  test_option_g_wi
+0000b480: 7468 5f72 6177 5f6d 656d 6f72 795f 6669  th_raw_memory_fi
+0000b490: 6c65 5f61 6e64 5f6e 6f5f 6374 6c5f 6669  le_and_no_ctl_fi
+0000b4a0: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
+0000b4b0: 2020 7261 6d20 3d20 5b30 5d0a 2020 2020    ram = [0].    
+0000b4c0: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+0000b4d0: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
+0000b4e0: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
+0000b4f0: 3a20 300a 2020 2020 2020 2020 2020 2020  : 0.            
+0000b500: 2f2f 204f 7270 6861 6e73 3a20 4e6f 6e65  // Orphans: None
+0000b510: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
+0000b520: 4669 7273 7420 696e 7374 7275 6374 696f  First instructio
+0000b530: 6e20 6e6f 7420 7573 6564 3a20 4e6f 6e65  n not used: None
+0000b540: 0a20 2020 2020 2020 2020 2020 2064 6967  .            dig
+0000b550: 7261 7068 207b 0a20 2020 2020 2020 2020  raph {.         
+0000b560: 2020 206e 6f64 6520 5b73 6861 7065 3d72     node [shape=r
+0000b570: 6563 6f72 645d 0a20 2020 2020 2020 2020  ecord].         
+0000b580: 2020 2030 205b 6c61 6265 6c3d 2230 2030     0 [label="0 0
+0000b590: 3030 305c 6e22 5d0a 2020 2020 2020 2020  000\n"].        
+0000b5a0: 2020 2020 7d0a 2020 2020 2020 2020 2222      }.        ""
+0000b5b0: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+0000b5c0: 7465 7374 5f62 696e 2872 616d 2c20 6578  test_bin(ram, ex
+0000b5d0: 705f 6f75 7470 7574 2c20 272d 6720 2d6f  p_output, '-g -o
+0000b5e0: 2030 2729 0a0a 2020 2020 6465 6620 7465   0')..    def te
+0000b5f0: 7374 5f6f 7074 696f 6e5f 675f 7769 7468  st_option_g_with
+0000b600: 5f72 6177 5f6d 656d 6f72 795f 6669 6c65  _raw_memory_file
+0000b610: 5f61 6e64 5f63 746c 5f66 696c 6528 7365  _and_ctl_file(se
+0000b620: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+0000b630: 203d 205b 3139 352c 2033 2c20 302c 2032   = [195, 3, 0, 2
+0000b640: 3031 5d0a 2020 2020 2020 2020 6374 6c20  01].        ctl 
+0000b650: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
+0000b660: 2020 4020 3030 3030 3020 6c61 6265 6c3d    @ 00000 label=
+0000b670: 5354 4152 540a 2020 2020 2020 2020 2020  START.          
+0000b680: 2020 6320 3030 3030 300a 2020 2020 2020    c 00000.      
+0000b690: 2020 2020 2020 4020 3030 3030 3320 6c61        @ 00003 la
+0000b6a0: 6265 6c3d 454e 440a 2020 2020 2020 2020  bel=END.        
+0000b6b0: 2020 2020 6320 3030 3030 330a 2020 2020      c 00003.    
+0000b6c0: 2020 2020 2020 2020 6920 3030 3030 340a          i 00004.
+0000b6d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000b6e0: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+0000b6f0: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
+0000b700: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
+0000b710: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
+0000b720: 2020 202f 2f20 4f72 7068 616e 733a 2030     // Orphans: 0
+0000b730: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
+0000b740: 4669 7273 7420 696e 7374 7275 6374 696f  First instructio
+0000b750: 6e20 6e6f 7420 7573 6564 3a20 4e6f 6e65  n not used: None
+0000b760: 0a20 2020 2020 2020 2020 2020 2064 6967  .            dig
+0000b770: 7261 7068 207b 0a20 2020 2020 2020 2020  raph {.         
+0000b780: 2020 206e 6f64 6520 5b73 6861 7065 3d72     node [shape=r
+0000b790: 6563 6f72 645d 0a20 2020 2020 2020 2020  ecord].         
+0000b7a0: 2020 2030 205b 6c61 6265 6c3d 2230 2030     0 [label="0 0
+0000b7b0: 3030 305c 6e53 5441 5254 225d 0a20 2020  000\nSTART"].   
+0000b7c0: 2020 2020 2020 2020 2030 202d 3e20 7b33           0 -> {3
+0000b7d0: 7d0a 2020 2020 2020 2020 2020 2020 3320  }.            3 
+0000b7e0: 5b6c 6162 656c 3d22 3320 3030 3033 5c6e  [label="3 0003\n
+0000b7f0: 454e 4422 5d0a 2020 2020 2020 2020 2020  END"].          
+0000b800: 2020 7d0a 2020 2020 2020 2020 2222 220a    }.        """.
+0000b810: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+0000b820: 7374 5f62 696e 2872 616d 2c20 6578 705f  st_bin(ram, exp_
+0000b830: 6f75 7470 7574 2c20 272d 6720 2d6f 2030  output, '-g -o 0
+0000b840: 272c 2063 746c 290a 0a20 2020 2064 6566  ', ctl)..    def
+0000b850: 2074 6573 745f 6f70 7469 6f6e 5f67 5f77   test_option_g_w
+0000b860: 6974 685f 6374 6c5f 6669 6c65 5f66 6f72  ith_ctl_file_for
+0000b870: 5f72 6177 5f6d 656d 6f72 795f 6669 6c65  _raw_memory_file
+0000b880: 5f77 6974 685f 6e6f 6e73 7461 6e64 6172  _with_nonstandar
+0000b890: 645f 7375 6666 6978 2873 656c 6629 3a0a  d_suffix(self):.
+0000b8a0: 2020 2020 2020 2020 7261 6d20 3d20 5b31          ram = [1
+0000b8b0: 3935 2c20 3235 352c 2032 3535 2c20 3230  95, 255, 255, 20
+0000b8c0: 315d 0a20 2020 2020 2020 2063 746c 203d  1].        ctl =
+0000b8d0: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+0000b8e0: 2040 2036 3535 3332 206c 6162 656c 3d53   @ 65532 label=S
+0000b8f0: 5441 5254 0a20 2020 2020 2020 2020 2020  TART.           
+0000b900: 2063 2036 3535 3332 0a20 2020 2020 2020   c 65532.       
+0000b910: 2020 2020 2040 2036 3535 3335 206c 6162       @ 65535 lab
+0000b920: 656c 3d45 4e44 0a20 2020 2020 2020 2020  el=END.         
+0000b930: 2020 2063 2036 3535 3335 0a20 2020 2020     c 65535.     
+0000b940: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
+0000b950: 7870 5f6f 7574 7075 7420 3d20 7222 2222  xp_output = r"""
+0000b960: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
+0000b970: 556e 636f 6e6e 6563 7465 643a 204e 6f6e  Unconnected: Non
+0000b980: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
+0000b990: 204f 7270 6861 6e73 3a20 3635 3533 320a   Orphans: 65532.
+0000b9a0: 2020 2020 2020 2020 2020 2020 2f2f 2046              // F
+0000b9b0: 6972 7374 2069 6e73 7472 7563 7469 6f6e  irst instruction
+0000b9c0: 206e 6f74 2075 7365 643a 204e 6f6e 650a   not used: None.
+0000b9d0: 2020 2020 2020 2020 2020 2020 6469 6772              digr
+0000b9e0: 6170 6820 7b0a 2020 2020 2020 2020 2020  aph {.          
+0000b9f0: 2020 6e6f 6465 205b 7368 6170 653d 7265    node [shape=re
+0000ba00: 636f 7264 5d0a 2020 2020 2020 2020 2020  cord].          
+0000ba10: 2020 3635 3533 3220 5b6c 6162 656c 3d22    65532 [label="
+0000ba20: 3635 3533 3220 4646 4643 5c6e 5354 4152  65532 FFFC\nSTAR
+0000ba30: 5422 5d0a 2020 2020 2020 2020 2020 2020  T"].            
+0000ba40: 3635 3533 3220 2d3e 207b 3635 3533 357d  65532 -> {65535}
+0000ba50: 0a20 2020 2020 2020 2020 2020 2036 3535  .            655
+0000ba60: 3335 205b 6c61 6265 6c3d 2236 3535 3335  35 [label="65535
+0000ba70: 2046 4646 465c 6e45 4e44 225d 0a20 2020   FFFF\nEND"].   
+0000ba80: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000ba90: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0000baa0: 656c 662e 5f74 6573 745f 6269 6e28 7261  elf._test_bin(ra
+0000bab0: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
+0000bac0: 2d67 272c 2063 746c 2c20 7375 6666 6978  -g', ctl, suffix
+0000bad0: 3d27 2e72 616d 2729 0a0a 2020 2020 6465  ='.ram')..    de
+0000bae0: 6620 7465 7374 5f6f 7074 696f 6e5f 675f  f test_option_g_
+0000baf0: 7769 7468 5f72 6566 735f 6469 7265 6374  with_refs_direct
+0000bb00: 6976 6528 7365 6c66 293a 0a20 2020 2020  ive(self):.     
+0000bb10: 2020 2072 616d 203d 205b 3234 2c20 312c     ram = [24, 1,
+0000bb20: 2032 3333 2c20 3230 315d 0a20 2020 2020   233, 201].     
+0000bb30: 2020 2063 746c 203d 2022 2222 0a20 2020     ctl = """.   
+0000bb40: 2020 2020 2020 2020 2040 2036 3535 3332           @ 65532
+0000bb50: 206c 6162 656c 3d46 4952 5354 0a20 2020   label=FIRST.   
+0000bb60: 2020 2020 2020 2020 2063 2036 3535 3332           c 65532
+0000bb70: 0a20 2020 2020 2020 2020 2020 2040 2036  .            @ 6
+0000bb80: 3535 3334 206c 6162 656c 3d53 4543 4f4e  5534 label=SECON
+0000bb90: 440a 2020 2020 2020 2020 2020 2020 6320  D.            c 
+0000bba0: 3635 3533 340a 2020 2020 2020 2020 2020  65534.          
+0000bbb0: 2020 4020 3635 3533 3520 6c61 6265 6c3d    @ 65535 label=
+0000bbc0: 5448 4952 440a 2020 2020 2020 2020 2020  THIRD.          
+0000bbd0: 2020 4020 3635 3533 3520 7265 6673 3d36    @ 65535 refs=6
+0000bbe0: 3535 3334 3a36 3535 3332 0a20 2020 2020  5534:65532.     
+0000bbf0: 2020 2020 2020 2063 2036 3535 3335 0a20         c 65535. 
+0000bc00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000bc10: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+0000bc20: 7222 2222 0a20 2020 2020 2020 2020 2020  r""".           
+0000bc30: 202f 2f20 556e 636f 6e6e 6563 7465 643a   // Unconnected:
+0000bc40: 2036 3535 3332 0a20 2020 2020 2020 2020   65532.         
+0000bc50: 2020 202f 2f20 4f72 7068 616e 733a 2036     // Orphans: 6
+0000bc60: 3535 3334 0a20 2020 2020 2020 2020 2020  5534.           
+0000bc70: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
+0000bc80: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
+0000bc90: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000bca0: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
+0000bcb0: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
+0000bcc0: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
+0000bcd0: 2020 2020 2020 2036 3535 3332 205b 6c61         65532 [la
+0000bce0: 6265 6c3d 2236 3535 3332 2046 4646 435c  bel="65532 FFFC\
+0000bcf0: 6e46 4952 5354 225d 0a20 2020 2020 2020  nFIRST"].       
+0000bd00: 2020 2020 2036 3535 3334 205b 6c61 6265       65534 [labe
+0000bd10: 6c3d 2236 3535 3334 2046 4646 455c 6e53  l="65534 FFFE\nS
+0000bd20: 4543 4f4e 4422 5d0a 2020 2020 2020 2020  ECOND"].        
+0000bd30: 2020 2020 3635 3533 3420 2d3e 207b 3635      65534 -> {65
+0000bd40: 3533 357d 0a20 2020 2020 2020 2020 2020  535}.           
+0000bd50: 2036 3535 3335 205b 6c61 6265 6c3d 2236   65535 [label="6
+0000bd60: 3535 3335 2046 4646 465c 6e54 4849 5244  5535 FFFF\nTHIRD
+0000bd70: 225d 0a20 2020 2020 2020 2020 2020 207d  "].            }
+0000bd80: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000bd90: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
+0000bda0: 6269 6e28 7261 6d2c 2065 7870 5f6f 7574  bin(ram, exp_out
+0000bdb0: 7075 742c 2027 2d67 272c 2063 746c 290a  put, '-g', ctl).
+0000bdc0: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
+0000bdd0: 7469 6f6e 5f67 5f77 6974 685f 6e6f 5f6f  tion_g_with_no_o
+0000bde0: 7270 6861 6e73 5f6f 725f 756e 636f 6e6e  rphans_or_unconn
+0000bdf0: 6563 7465 645f 6e6f 6465 7328 7365 6c66  ected_nodes(self
+0000be00: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
+0000be10: 205b 3234 2c20 302c 2032 342c 2032 3532   [24, 0, 24, 252
+0000be20: 5d0a 2020 2020 2020 2020 6374 6c20 3d20  ].        ctl = 
+0000be30: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+0000be40: 4020 3635 3533 3220 6c61 6265 6c3d 464f  @ 65532 label=FO
+0000be50: 5254 480a 2020 2020 2020 2020 2020 2020  RTH.            
+0000be60: 6320 3635 3533 320a 2020 2020 2020 2020  c 65532.        
+0000be70: 2020 2020 4020 3635 3533 3420 6c61 6265      @ 65534 labe
+0000be80: 6c3d 4241 434b 0a20 2020 2020 2020 2020  l=BACK.         
+0000be90: 2020 2063 2036 3535 3334 0a20 2020 2020     c 65534.     
+0000bea0: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
+0000beb0: 7870 5f6f 7574 7075 7420 3d20 7222 2222  xp_output = r"""
+0000bec0: 0a20 2020 2020 2020 2020 2020 202f 2f20  .            // 
+0000bed0: 556e 636f 6e6e 6563 7465 643a 204e 6f6e  Unconnected: Non
+0000bee0: 650a 2020 2020 2020 2020 2020 2020 2f2f  e.            //
+0000bef0: 204f 7270 6861 6e73 3a20 4e6f 6e65 0a20   Orphans: None. 
+0000bf00: 2020 2020 2020 2020 2020 202f 2f20 4669             // Fi
+0000bf10: 7273 7420 696e 7374 7275 6374 696f 6e20  rst instruction 
+0000bf20: 6e6f 7420 7573 6564 3a20 4e6f 6e65 0a20  not used: None. 
+0000bf30: 2020 2020 2020 2020 2020 2064 6967 7261             digra
+0000bf40: 7068 207b 0a20 2020 2020 2020 2020 2020  ph {.           
+0000bf50: 206e 6f64 6520 5b73 6861 7065 3d72 6563   node [shape=rec
+0000bf60: 6f72 645d 0a20 2020 2020 2020 2020 2020  ord].           
+0000bf70: 2036 3535 3332 205b 6c61 6265 6c3d 2236   65532 [label="6
+0000bf80: 3535 3332 2046 4646 435c 6e46 4f52 5448  5532 FFFC\nFORTH
+0000bf90: 225d 0a20 2020 2020 2020 2020 2020 2036  "].            6
+0000bfa0: 3535 3332 202d 3e20 7b36 3535 3334 7d0a  5532 -> {65534}.
+0000bfb0: 2020 2020 2020 2020 2020 2020 3635 3533              6553
+0000bfc0: 3420 5b6c 6162 656c 3d22 3635 3533 3420  4 [label="65534 
+0000bfd0: 4646 4645 5c6e 4241 434b 225d 0a20 2020  FFFE\nBACK"].   
+0000bfe0: 2020 2020 2020 2020 2036 3535 3334 202d           65534 -
+0000bff0: 3e20 7b36 3535 3332 7d0a 2020 2020 2020  > {65532}.      
+0000c000: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000c010: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0000c020: 2e5f 7465 7374 5f62 696e 2872 616d 2c20  ._test_bin(ram, 
+0000c030: 6578 705f 6f75 7470 7574 2c20 272d 6727  exp_output, '-g'
+0000c040: 2c20 6374 6c29 0a0a 2020 2020 6465 6620  , ctl)..    def 
+0000c050: 7465 7374 5f6f 7074 696f 6e5f 675f 7769  test_option_g_wi
+0000c060: 7468 5f6f 6e65 5f6f 7270 6861 6e28 7365  th_one_orphan(se
+0000c070: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+0000c080: 203d 205b 3234 2c20 302c 2032 3031 5d0a   = [24, 0, 201].
+0000c090: 2020 2020 2020 2020 6374 6c20 3d20 2222          ctl = ""
+0000c0a0: 220a 2020 2020 2020 2020 2020 2020 4020  ".            @ 
+0000c0b0: 3635 3533 3320 6c61 6265 6c3d 5354 4152  65533 label=STAR
+0000c0c0: 540a 2020 2020 2020 2020 2020 2020 6320  T.            c 
+0000c0d0: 3635 3533 330a 2020 2020 2020 2020 2020  65533.          
+0000c0e0: 2020 4020 3635 3533 3520 6c61 6265 6c3d    @ 65535 label=
+0000c0f0: 454e 440a 2020 2020 2020 2020 2020 2020  END.            
+0000c100: 6320 3635 3533 350a 2020 2020 2020 2020  c 65535.        
+0000c110: 2222 220a 2020 2020 2020 2020 6578 705f  """.        exp_
+0000c120: 6f75 7470 7574 203d 2072 2222 220a 2020  output = r""".  
+0000c130: 2020 2020 2020 2020 2020 2f2f 2055 6e63            // Unc
+0000c140: 6f6e 6e65 6374 6564 3a20 4e6f 6e65 0a20  onnected: None. 
+0000c150: 2020 2020 2020 2020 2020 202f 2f20 4f72             // Or
+0000c160: 7068 616e 733a 2036 3535 3333 0a20 2020  phans: 65533.   
+0000c170: 2020 2020 2020 2020 202f 2f20 4669 7273           // Firs
+0000c180: 7420 696e 7374 7275 6374 696f 6e20 6e6f  t instruction no
+0000c190: 7420 7573 6564 3a20 4e6f 6e65 0a20 2020  t used: None.   
+0000c1a0: 2020 2020 2020 2020 2064 6967 7261 7068           digraph
+0000c1b0: 207b 0a20 2020 2020 2020 2020 2020 206e   {.            n
+0000c1c0: 6f64 6520 5b73 6861 7065 3d72 6563 6f72  ode [shape=recor
+0000c1d0: 645d 0a20 2020 2020 2020 2020 2020 2036  d].            6
+0000c1e0: 3535 3333 205b 6c61 6265 6c3d 2236 3535  5533 [label="655
+0000c1f0: 3333 2046 4646 445c 6e53 5441 5254 225d  33 FFFD\nSTART"]
+0000c200: 0a20 2020 2020 2020 2020 2020 2036 3535  .            655
+0000c210: 3333 202d 3e20 7b36 3535 3335 7d0a 2020  33 -> {65535}.  
+0000c220: 2020 2020 2020 2020 2020 3635 3533 3520            65535 
+0000c230: 5b6c 6162 656c 3d22 3635 3533 3520 4646  [label="65535 FF
+0000c240: 4646 5c6e 454e 4422 5d0a 2020 2020 2020  FF\nEND"].      
+0000c250: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000c260: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0000c270: 2e5f 7465 7374 5f62 696e 2872 616d 2c20  ._test_bin(ram, 
+0000c280: 6578 705f 6f75 7470 7574 2c20 272d 6727  exp_output, '-g'
+0000c290: 2c20 6374 6c29 0a0a 2020 2020 6465 6620  , ctl)..    def 
+0000c2a0: 7465 7374 5f6f 7074 696f 6e5f 675f 7769  test_option_g_wi
+0000c2b0: 7468 5f74 776f 5f6f 7270 6861 6e73 2873  th_two_orphans(s
+0000c2c0: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+0000c2d0: 6d20 3d20 5b32 342c 2032 2c20 3234 2c20  m = [24, 2, 24, 
+0000c2e0: 302c 2032 3031 5d0a 2020 2020 2020 2020  0, 201].        
+0000c2f0: 6374 6c20 3d20 2222 220a 2020 2020 2020  ctl = """.      
+0000c300: 2020 2020 2020 4020 3635 3533 3120 6c61        @ 65531 la
+0000c310: 6265 6c3d 4f4e 450a 2020 2020 2020 2020  bel=ONE.        
+0000c320: 2020 2020 6320 3635 3533 310a 2020 2020      c 65531.    
+0000c330: 2020 2020 2020 2020 4020 3635 3533 3320          @ 65533 
+0000c340: 6c61 6265 6c3d 5457 4f0a 2020 2020 2020  label=TWO.      
+0000c350: 2020 2020 2020 6320 3635 3533 330a 2020        c 65533.  
+0000c360: 2020 2020 2020 2020 2020 4020 3635 3533            @ 6553
+0000c370: 3520 6c61 6265 6c3d 5448 5245 450a 2020  5 label=THREE.  
+0000c380: 2020 2020 2020 2020 2020 6320 3635 3533            c 6553
+0000c390: 350a 2020 2020 2020 2020 2222 220a 2020  5.        """.  
+0000c3a0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
+0000c3b0: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
+0000c3c0: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
+0000c3d0: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
+0000c3e0: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
+0000c3f0: 2036 3535 3331 2c20 3635 3533 330a 2020   65531, 65533.  
+0000c400: 2020 2020 2020 2020 2020 2f2f 2046 6972            // Fir
+0000c410: 7374 2069 6e73 7472 7563 7469 6f6e 206e  st instruction n
+0000c420: 6f74 2075 7365 643a 204e 6f6e 650a 2020  ot used: None.  
+0000c430: 2020 2020 2020 2020 2020 6469 6772 6170            digrap
+0000c440: 6820 7b0a 2020 2020 2020 2020 2020 2020  h {.            
+0000c450: 6e6f 6465 205b 7368 6170 653d 7265 636f  node [shape=reco
+0000c460: 7264 5d0a 2020 2020 2020 2020 2020 2020  rd].            
+0000c470: 3635 3533 3120 5b6c 6162 656c 3d22 3635  65531 [label="65
+0000c480: 3533 3120 4646 4642 5c6e 4f4e 4522 5d0a  531 FFFB\nONE"].
+0000c490: 2020 2020 2020 2020 2020 2020 3635 3533              6553
+0000c4a0: 3120 2d3e 207b 3635 3533 357d 0a20 2020  1 -> {65535}.   
+0000c4b0: 2020 2020 2020 2020 2036 3535 3333 205b           65533 [
+0000c4c0: 6c61 6265 6c3d 2236 3535 3333 2046 4646  label="65533 FFF
+0000c4d0: 445c 6e54 574f 225d 0a20 2020 2020 2020  D\nTWO"].       
+0000c4e0: 2020 2020 2036 3535 3333 202d 3e20 7b36       65533 -> {6
+0000c4f0: 3535 3335 7d0a 2020 2020 2020 2020 2020  5535}.          
+0000c500: 2020 3635 3533 3520 5b6c 6162 656c 3d22    65535 [label="
+0000c510: 3635 3533 3520 4646 4646 5c6e 5448 5245  65535 FFFF\nTHRE
+0000c520: 4522 5d0a 2020 2020 2020 2020 2020 2020  E"].            
+0000c530: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
+0000c540: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+0000c550: 5f62 696e 2872 616d 2c20 6578 705f 6f75  _bin(ram, exp_ou
+0000c560: 7470 7574 2c20 272d 6727 2c20 6374 6c29  tput, '-g', ctl)
+0000c570: 0a0a 2020 2020 6465 6620 7465 7374 5f6f  ..    def test_o
+0000c580: 7074 696f 6e5f 675f 7769 7468 5f6f 6e65  ption_g_with_one
+0000c590: 5f6d 6169 6e5f 656e 7472 795f 706f 696e  _main_entry_poin
+0000c5a0: 745f 6f72 7068 616e 2873 656c 6629 3a0a  t_orphan(self):.
+0000c5b0: 2020 2020 2020 2020 7261 6d20 3d20 5b31          ram = [1
+0000c5c0: 3735 2c20 3230 312c 2032 342c 2032 3533  75, 201, 24, 253
+0000c5d0: 5d0a 2020 2020 2020 2020 6374 6c20 3d20  ].        ctl = 
+0000c5e0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+0000c5f0: 4020 3635 3533 3220 6c61 6265 6c3d 4649  @ 65532 label=FI
+0000c600: 5253 540a 2020 2020 2020 2020 2020 2020  RST.            
+0000c610: 6320 3635 3533 320a 2020 2020 2020 2020  c 65532.        
+0000c620: 2020 2020 4020 3635 3533 3420 6c61 6265      @ 65534 labe
+0000c630: 6c3d 5345 434f 4e44 0a20 2020 2020 2020  l=SECOND.       
+0000c640: 2020 2020 2063 2036 3535 3334 0a20 2020       c 65534.   
+0000c650: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000c660: 2065 7870 5f6f 7574 7075 7420 3d20 7222   exp_output = r"
+0000c670: 2222 0a20 2020 2020 2020 2020 2020 202f  "".            /
+0000c680: 2f20 556e 636f 6e6e 6563 7465 643a 204e  / Unconnected: N
+0000c690: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0000c6a0: 2f2f 204f 7270 6861 6e73 3a20 3635 3533  // Orphans: 6553
+0000c6b0: 340a 2020 2020 2020 2020 2020 2020 2f2f  4.            //
+0000c6c0: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
+0000c6d0: 6f6e 206e 6f74 2075 7365 643a 2036 3535  on not used: 655
+0000c6e0: 3332 0a20 2020 2020 2020 2020 2020 2064  32.            d
+0000c6f0: 6967 7261 7068 207b 0a20 2020 2020 2020  igraph {.       
+0000c700: 2020 2020 206e 6f64 6520 5b73 6861 7065       node [shape
+0000c710: 3d72 6563 6f72 645d 0a20 2020 2020 2020  =record].       
+0000c720: 2020 2020 2036 3535 3332 205b 6c61 6265       65532 [labe
+0000c730: 6c3d 2236 3535 3332 2046 4646 435c 6e46  l="65532 FFFC\nF
+0000c740: 4952 5354 225d 0a20 2020 2020 2020 2020  IRST"].         
+0000c750: 2020 2036 3535 3334 205b 6c61 6265 6c3d     65534 [label=
+0000c760: 2236 3535 3334 2046 4646 455c 6e53 4543  "65534 FFFE\nSEC
+0000c770: 4f4e 4422 5d0a 2020 2020 2020 2020 2020  OND"].          
+0000c780: 2020 3635 3533 3420 2d3e 207b 3635 3533    65534 -> {6553
+0000c790: 327d 0a20 2020 2020 2020 2020 2020 207d  2}.            }
+0000c7a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000c7b0: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
+0000c7c0: 6269 6e28 7261 6d2c 2065 7870 5f6f 7574  bin(ram, exp_out
+0000c7d0: 7075 742c 2027 2d67 272c 2063 746c 290a  put, '-g', ctl).
+0000c7e0: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
+0000c7f0: 7469 6f6e 5f67 5f77 6974 685f 7477 6f5f  tion_g_with_two_
+0000c800: 6d61 696e 5f65 6e74 7279 5f70 6f69 6e74  main_entry_point
+0000c810: 5f6f 7270 6861 6e73 2873 656c 6629 3a0a  _orphans(self):.
+0000c820: 2020 2020 2020 2020 7261 6d20 3d20 5b32          ram = [2
+0000c830: 342c 2031 2c20 3137 352c 2032 3031 2c20  4, 1, 175, 201, 
+0000c840: 3234 2c20 312c 2031 3735 2c20 3230 315d  24, 1, 175, 201]
+0000c850: 0a20 2020 2020 2020 2063 746c 203d 2022  .        ctl = "
+0000c860: 2222 0a20 2020 2020 2020 2020 2020 2040  "".            @
+0000c870: 2036 3535 3238 206c 6162 656c 3d46 4952   65528 label=FIR
+0000c880: 5354 0a20 2020 2020 2020 2020 2020 2063  ST.            c
+0000c890: 2036 3535 3238 0a20 2020 2020 2020 2020   65528.         
+0000c8a0: 2020 2040 2036 3535 3330 206c 6162 656c     @ 65530 label
+0000c8b0: 3d4d 4550 4f31 0a20 2020 2020 2020 2020  =MEPO1.         
+0000c8c0: 2020 2063 2036 3535 3330 0a20 2020 2020     c 65530.     
+0000c8d0: 2020 2020 2020 2040 2036 3535 3332 206c         @ 65532 l
+0000c8e0: 6162 656c 3d53 4543 4f4e 440a 2020 2020  abel=SECOND.    
+0000c8f0: 2020 2020 2020 2020 6320 3635 3533 320a          c 65532.
+0000c900: 2020 2020 2020 2020 2020 2020 4020 3635              @ 65
+0000c910: 3533 3420 6c61 6265 6c3d 4d45 504f 320a  534 label=MEPO2.
+0000c920: 2020 2020 2020 2020 2020 2020 6320 3635              c 65
+0000c930: 3533 340a 2020 2020 2020 2020 2222 220a  534.        """.
+0000c940: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
+0000c950: 7574 203d 2072 2222 220a 2020 2020 2020  ut = r""".      
+0000c960: 2020 2020 2020 2f2f 2055 6e63 6f6e 6e65        // Unconne
+0000c970: 6374 6564 3a20 4e6f 6e65 0a20 2020 2020  cted: None.     
+0000c980: 2020 2020 2020 202f 2f20 4f72 7068 616e         // Orphan
+0000c990: 733a 2036 3535 3238 2c20 3635 3533 320a  s: 65528, 65532.
+0000c9a0: 2020 2020 2020 2020 2020 2020 2f2f 2046              // F
+0000c9b0: 6972 7374 2069 6e73 7472 7563 7469 6f6e  irst instruction
+0000c9c0: 206e 6f74 2075 7365 643a 2036 3535 3330   not used: 65530
+0000c9d0: 2c20 3635 3533 340a 2020 2020 2020 2020  , 65534.        
+0000c9e0: 2020 2020 6469 6772 6170 6820 7b0a 2020      digraph {.  
+0000c9f0: 2020 2020 2020 2020 2020 6e6f 6465 205b            node [
+0000ca00: 7368 6170 653d 7265 636f 7264 5d0a 2020  shape=record].  
+0000ca10: 2020 2020 2020 2020 2020 3635 3532 3820            65528 
+0000ca20: 5b6c 6162 656c 3d22 3635 3532 3820 4646  [label="65528 FF
+0000ca30: 4638 5c6e 4649 5253 5422 5d0a 2020 2020  F8\nFIRST"].    
+0000ca40: 2020 2020 2020 2020 3635 3532 3820 2d3e          65528 ->
+0000ca50: 207b 3635 3533 307d 0a20 2020 2020 2020   {65530}.       
+0000ca60: 2020 2020 2036 3535 3330 205b 6c61 6265       65530 [labe
+0000ca70: 6c3d 2236 3535 3330 2046 4646 415c 6e4d  l="65530 FFFA\nM
+0000ca80: 4550 4f31 225d 0a20 2020 2020 2020 2020  EPO1"].         
+0000ca90: 2020 2036 3535 3332 205b 6c61 6265 6c3d     65532 [label=
+0000caa0: 2236 3535 3332 2046 4646 435c 6e53 4543  "65532 FFFC\nSEC
+0000cab0: 4f4e 4422 5d0a 2020 2020 2020 2020 2020  OND"].          
+0000cac0: 2020 3635 3533 3220 2d3e 207b 3635 3533    65532 -> {6553
+0000cad0: 347d 0a20 2020 2020 2020 2020 2020 2036  4}.            6
+0000cae0: 3535 3334 205b 6c61 6265 6c3d 2236 3535  5534 [label="655
+0000caf0: 3334 2046 4646 455c 6e4d 4550 4f32 225d  34 FFFE\nMEPO2"]
+0000cb00: 0a20 2020 2020 2020 2020 2020 207d 0a20  .            }. 
+0000cb10: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000cb20: 2020 2073 656c 662e 5f74 6573 745f 6269     self._test_bi
+0000cb30: 6e28 7261 6d2c 2065 7870 5f6f 7574 7075  n(ram, exp_outpu
+0000cb40: 742c 2027 2d67 272c 2063 746c 290a 0a20  t, '-g', ctl).. 
+0000cb50: 2020 2064 6566 2074 6573 745f 6f70 7469     def test_opti
+0000cb60: 6f6e 5f67 5f77 6974 685f 6f6e 655f 756e  on_g_with_one_un
+0000cb70: 636f 6e6e 6563 7465 645f 6e6f 6465 2873  connected_node(s
+0000cb80: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+0000cb90: 6d20 3d20 5b32 3031 5d0a 2020 2020 2020  m = [201].      
+0000cba0: 2020 6374 6c20 3d20 2222 220a 2020 2020    ctl = """.    
+0000cbb0: 2020 2020 2020 2020 4020 3635 3533 3520          @ 65535 
+0000cbc0: 6c61 6265 6c3d 5354 4152 540a 2020 2020  label=START.    
+0000cbd0: 2020 2020 2020 2020 6320 3635 3533 350a          c 65535.
+0000cbe0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000cbf0: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+0000cc00: 2072 2222 220a 2020 2020 2020 2020 2020   r""".          
+0000cc10: 2020 2f2f 2055 6e63 6f6e 6e65 6374 6564    // Unconnected
+0000cc20: 3a20 3635 3533 350a 2020 2020 2020 2020  : 65535.        
+0000cc30: 2020 2020 2f2f 204f 7270 6861 6e73 3a20      // Orphans: 
+0000cc40: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000cc50: 202f 2f20 4669 7273 7420 696e 7374 7275   // First instru
+0000cc60: 6374 696f 6e20 6e6f 7420 7573 6564 3a20  ction not used: 
+0000cc70: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000cc80: 2064 6967 7261 7068 207b 0a20 2020 2020   digraph {.     
+0000cc90: 2020 2020 2020 206e 6f64 6520 5b73 6861         node [sha
+0000cca0: 7065 3d72 6563 6f72 645d 0a20 2020 2020  pe=record].     
+0000ccb0: 2020 2020 2020 2036 3535 3335 205b 6c61         65535 [la
+0000ccc0: 6265 6c3d 2236 3535 3335 2046 4646 465c  bel="65535 FFFF\
+0000ccd0: 6e53 5441 5254 225d 0a20 2020 2020 2020  nSTART"].       
+0000cce0: 2020 2020 207d 0a20 2020 2020 2020 2022       }.        "
+0000ccf0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0000cd00: 5f74 6573 745f 6269 6e28 7261 6d2c 2065  _test_bin(ram, e
+0000cd10: 7870 5f6f 7574 7075 742c 2027 2d67 272c  xp_output, '-g',
+0000cd20: 2063 746c 290a 0a20 2020 2064 6566 2074   ctl)..    def t
+0000cd30: 6573 745f 6f70 7469 6f6e 5f67 5f77 6974  est_option_g_wit
+0000cd40: 685f 7477 6f5f 756e 636f 6e6e 6563 7465  h_two_unconnecte
+0000cd50: 645f 6e6f 6465 7328 7365 6c66 293a 0a20  d_nodes(self):. 
+0000cd60: 2020 2020 2020 2072 616d 203d 205b 3230         ram = [20
+0000cd70: 312c 2032 3031 5d0a 2020 2020 2020 2020  1, 201].        
+0000cd80: 6374 6c20 3d20 2222 220a 2020 2020 2020  ctl = """.      
+0000cd90: 2020 2020 2020 4020 3635 3533 3420 6c61        @ 65534 la
+0000cda0: 6265 6c3d 4649 5253 540a 2020 2020 2020  bel=FIRST.      
+0000cdb0: 2020 2020 2020 6320 3635 3533 340a 2020        c 65534.  
+0000cdc0: 2020 2020 2020 2020 2020 4020 3635 3533            @ 6553
+0000cdd0: 3520 6c61 6265 6c3d 5345 434f 4e44 0a20  5 label=SECOND. 
+0000cde0: 2020 2020 2020 2020 2020 2063 2036 3535             c 655
+0000cdf0: 3335 0a20 2020 2020 2020 2022 2222 0a20  35.        """. 
+0000ce00: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+0000ce10: 7420 3d20 7222 2222 0a20 2020 2020 2020  t = r""".       
+0000ce20: 2020 2020 202f 2f20 556e 636f 6e6e 6563       // Unconnec
+0000ce30: 7465 643a 2036 3535 3334 2c20 3635 3533  ted: 65534, 6553
+0000ce40: 350a 2020 2020 2020 2020 2020 2020 2f2f  5.            //
+0000ce50: 204f 7270 6861 6e73 3a20 4e6f 6e65 0a20   Orphans: None. 
+0000ce60: 2020 2020 2020 2020 2020 202f 2f20 4669             // Fi
+0000ce70: 7273 7420 696e 7374 7275 6374 696f 6e20  rst instruction 
+0000ce80: 6e6f 7420 7573 6564 3a20 4e6f 6e65 0a20  not used: None. 
+0000ce90: 2020 2020 2020 2020 2020 2064 6967 7261             digra
+0000cea0: 7068 207b 0a20 2020 2020 2020 2020 2020  ph {.           
+0000ceb0: 206e 6f64 6520 5b73 6861 7065 3d72 6563   node [shape=rec
+0000cec0: 6f72 645d 0a20 2020 2020 2020 2020 2020  ord].           
+0000ced0: 2036 3535 3334 205b 6c61 6265 6c3d 2236   65534 [label="6
+0000cee0: 3535 3334 2046 4646 455c 6e46 4952 5354  5534 FFFE\nFIRST
+0000cef0: 225d 0a20 2020 2020 2020 2020 2020 2036  "].            6
+0000cf00: 3535 3335 205b 6c61 6265 6c3d 2236 3535  5535 [label="655
+0000cf10: 3335 2046 4646 465c 6e53 4543 4f4e 4422  35 FFFF\nSECOND"
+0000cf20: 5d0a 2020 2020 2020 2020 2020 2020 7d0a  ].            }.
+0000cf30: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000cf40: 2020 2020 7365 6c66 2e5f 7465 7374 5f62      self._test_b
+0000cf50: 696e 2872 616d 2c20 6578 705f 6f75 7470  in(ram, exp_outp
+0000cf60: 7574 2c20 272d 6727 2c20 6374 6c29 0a0a  ut, '-g', ctl)..
+0000cf70: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+0000cf80: 696f 6e5f 675f 7769 7468 5f72 6f75 7469  ion_g_with_routi
+0000cf90: 6e65 5f74 6861 745f 7265 6665 7273 5f74  ne_that_refers_t
+0000cfa0: 6f5f 6974 7365 6c66 2873 656c 6629 3a0a  o_itself(self):.
+0000cfb0: 2020 2020 2020 2020 7261 6d20 3d20 5b0a          ram = [.
+0000cfc0: 2020 2020 2020 2020 2020 2020 3137 352c              175,
+0000cfd0: 2020 2020 2320 3635 3533 3320 584f 5220      # 65533 XOR 
+0000cfe0: 410a 2020 2020 2020 2020 2020 2020 3234  A.            24
+0000cff0: 2c20 3235 3320 2320 3635 3533 3420 4a52  , 253 # 65534 JR
+0000d000: 2036 3535 3333 0a20 2020 2020 2020 205d   65533.        ]
+0000d010: 0a20 2020 2020 2020 2063 746c 203d 2022  .        ctl = "
+0000d020: 2222 0a20 2020 2020 2020 2020 2020 2040  "".            @
+0000d030: 2036 3535 3333 206c 6162 656c 3d4f 4e4c   65533 label=ONL
+0000d040: 590a 2020 2020 2020 2020 2020 2020 6320  Y.            c 
+0000d050: 3635 3533 3320 5368 6f75 6c64 206e 6f74  65533 Should not
+0000d060: 2062 6520 6a6f 696e 6564 2074 6f20 6974   be joined to it
+0000d070: 7365 6c66 0a20 2020 2020 2020 2022 2222  self.        """
+0000d080: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+0000d090: 7075 7420 3d20 7222 2222 0a20 2020 2020  put = r""".     
+0000d0a0: 2020 2020 2020 202f 2f20 556e 636f 6e6e         // Unconn
+0000d0b0: 6563 7465 643a 2036 3535 3333 0a20 2020  ected: 65533.   
+0000d0c0: 2020 2020 2020 2020 202f 2f20 4f72 7068           // Orph
+0000d0d0: 616e 733a 204e 6f6e 650a 2020 2020 2020  ans: None.      
+0000d0e0: 2020 2020 2020 2f2f 2046 6972 7374 2069        // First i
+0000d0f0: 6e73 7472 7563 7469 6f6e 206e 6f74 2075  nstruction not u
+0000d100: 7365 643a 204e 6f6e 650a 2020 2020 2020  sed: None.      
+0000d110: 2020 2020 2020 6469 6772 6170 6820 7b0a        digraph {.
+0000d120: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
+0000d130: 205b 7368 6170 653d 7265 636f 7264 5d0a   [shape=record].
+0000d140: 2020 2020 2020 2020 2020 2020 3635 3533              6553
+0000d150: 3320 5b6c 6162 656c 3d22 3635 3533 3320  3 [label="65533 
+0000d160: 4646 4644 5c6e 4f4e 4c59 225d 0a20 2020  FFFD\nONLY"].   
+0000d170: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000d180: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0000d190: 656c 662e 5f74 6573 745f 6269 6e28 7261  elf._test_bin(ra
+0000d1a0: 6d2c 2065 7870 5f6f 7574 7075 742c 2027  m, exp_output, '
+0000d1b0: 2d67 272c 2063 746c 290a 0a20 2020 2064  -g', ctl)..    d
+0000d1c0: 6566 2074 6573 745f 6f70 7469 6f6e 5f67  ef test_option_g
+0000d1d0: 5f77 6974 685f 726f 7574 696e 655f 656e  _with_routine_en
+0000d1e0: 7465 7265 645f 6174 5f69 6e73 7472 7563  tered_at_instruc
+0000d1f0: 7469 6f6e 5f6f 7468 6572 5f74 6861 6e5f  tion_other_than_
+0000d200: 6669 7273 7428 7365 6c66 293a 0a20 2020  first(self):.   
+0000d210: 2020 2020 2072 616d 203d 205b 0a20 2020       ram = [.   
+0000d220: 2020 2020 2020 2020 2031 3735 2c20 2020           175,   
+0000d230: 2020 2320 3635 3533 3120 584f 5220 410a    # 65531 XOR A.
+0000d240: 2020 2020 2020 2020 2020 2020 3234 2c20              24, 
+0000d250: 3235 332c 2023 2036 3535 3332 204a 5220  253, # 65532 JR 
+0000d260: 3635 3533 310a 2020 2020 2020 2020 2020  65531.          
+0000d270: 2020 3234 2c20 3235 3220 2023 2036 3535    24, 252  # 655
+0000d280: 3334 204a 5220 3635 3533 320a 2020 2020  34 JR 65532.    
+0000d290: 2020 2020 5d0a 2020 2020 2020 2020 6374      ].        ct
+0000d2a0: 6c20 3d20 2222 220a 2020 2020 2020 2020  l = """.        
+0000d2b0: 2020 2020 4020 3635 3533 3120 6c61 6265      @ 65531 labe
+0000d2c0: 6c3d 4649 5253 540a 2020 2020 2020 2020  l=FIRST.        
+0000d2d0: 2020 2020 6320 3635 3533 3120 4e6f 7420      c 65531 Not 
+0000d2e0: 6120 6d61 696e 2065 6e74 7279 2070 6f69  a main entry poi
+0000d2f0: 6e74 206f 7270 6861 6e20 6265 6361 7573  nt orphan becaus
+0000d300: 6520 6974 206a 756d 7073 2074 6f20 6974  e it jumps to it
+0000d310: 7320 6f77 6e20 6669 7273 7420 696e 7374  s own first inst
+0000d320: 7275 6374 696f 6e0a 2020 2020 2020 2020  ruction.        
+0000d330: 2020 2020 4020 3635 3533 3420 6c61 6265      @ 65534 labe
+0000d340: 6c3d 5345 434f 4e44 0a20 2020 2020 2020  l=SECOND.       
+0000d350: 2020 2020 2063 2036 3535 3334 0a20 2020       c 65534.   
+0000d360: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000d370: 2065 7870 5f6f 7574 7075 7420 3d20 7222   exp_output = r"
+0000d380: 2222 0a20 2020 2020 2020 2020 2020 202f  "".            /
+0000d390: 2f20 556e 636f 6e6e 6563 7465 643a 204e  / Unconnected: N
+0000d3a0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0000d3b0: 2f2f 204f 7270 6861 6e73 3a20 3635 3533  // Orphans: 6553
+0000d3c0: 340a 2020 2020 2020 2020 2020 2020 2f2f  4.            //
+0000d3d0: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
+0000d3e0: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
+0000d3f0: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
+0000d400: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
+0000d410: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
+0000d420: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
+0000d430: 2020 2020 3635 3533 3120 5b6c 6162 656c      65531 [label
+0000d440: 3d22 3635 3533 3120 4646 4642 5c6e 4649  ="65531 FFFB\nFI
+0000d450: 5253 5422 5d0a 2020 2020 2020 2020 2020  RST"].          
+0000d460: 2020 3635 3533 3420 5b6c 6162 656c 3d22    65534 [label="
+0000d470: 3635 3533 3420 4646 4645 5c6e 5345 434f  65534 FFFE\nSECO
+0000d480: 4e44 225d 0a20 2020 2020 2020 2020 2020  ND"].           
+0000d490: 2036 3535 3334 202d 3e20 7b36 3535 3331   65534 -> {65531
+0000d4a0: 7d0a 2020 2020 2020 2020 2020 2020 7d0a  }.            }.
+0000d4b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000d4c0: 2020 2020 7365 6c66 2e5f 7465 7374 5f62      self._test_b
+0000d4d0: 696e 2872 616d 2c20 6578 705f 6f75 7470  in(ram, exp_outp
+0000d4e0: 7574 2c20 272d 6727 2c20 6374 6c29 0a0a  ut, '-g', ctl)..
+0000d4f0: 2020 2020 4070 6174 6368 2e6f 626a 6563      @patch.objec
+0000d500: 7428 736e 6170 696e 666f 2c20 2772 756e  t(snapinfo, 'run
+0000d510: 272c 206d 6f63 6b5f 7275 6e29 0a20 2020  ', mock_run).   
+0000d520: 2040 7061 7463 682e 6f62 6a65 6374 2873   @patch.object(s
+0000d530: 6e61 7069 6e66 6f2c 2027 6765 745f 636f  napinfo, 'get_co
+0000d540: 6e66 6967 272c 206d 6f63 6b5f 636f 6e66  nfig', mock_conf
+0000d550: 6967 290a 2020 2020 6465 6620 7465 7374  ig).    def test
+0000d560: 5f6f 7074 696f 6e5f 4928 7365 6c66 293a  _option_I(self):
+0000d570: 0a20 2020 2020 2020 2073 656c 662e 7275  .        self.ru
+0000d580: 6e5f 736e 6170 696e 666f 2827 2d49 204e  n_snapinfo('-I N
+0000d590: 6f64 654c 6162 656c 3d22 7b61 6464 7265  odeLabel="{addre
+0000d5a0: 7373 7d22 2074 6573 742d 492e 736e 6127  ss}" test-I.sna'
+0000d5b0: 290a 2020 2020 2020 2020 6f70 7469 6f6e  ).        option
+0000d5c0: 732c 2063 6f6e 6669 6720 3d20 7275 6e5f  s, config = run_
+0000d5d0: 6172 6773 5b31 3a5d 0a20 2020 2020 2020  args[1:].       
+0000d5e0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d5f0: 6c28 5b27 4e6f 6465 4c61 6265 6c3d 227b  l(['NodeLabel="{
+0000d600: 6164 6472 6573 737d 2227 5d2c 206f 7074  address}"'], opt
+0000d610: 696f 6e73 2e70 6172 616d 7329 0a20 2020  ions.params).   
+0000d620: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000d630: 4571 7561 6c28 636f 6e66 6967 5b27 4e6f  Equal(config['No
+0000d640: 6465 4c61 6265 6c27 5d2c 2027 227b 6164  deLabel'], '"{ad
+0000d650: 6472 6573 737d 2227 290a 0a20 2020 2040  dress}"')..    @
+0000d660: 7061 7463 682e 6f62 6a65 6374 2873 6e61  patch.object(sna
+0000d670: 7069 6e66 6f2c 2027 7275 6e27 2c20 6d6f  pinfo, 'run', mo
+0000d680: 636b 5f72 756e 290a 2020 2020 6465 6620  ck_run).    def 
+0000d690: 7465 7374 5f6f 7074 696f 6e5f 495f 6f76  test_option_I_ov
+0000d6a0: 6572 7269 6465 735f 636f 6e66 6967 5f72  errides_config_r
+0000d6b0: 6561 645f 6672 6f6d 5f66 696c 6528 7365  ead_from_file(se
+0000d6c0: 6c66 293a 0a20 2020 2020 2020 2069 6e69  lf):.        ini
+0000d6d0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
+0000d6e0: 2020 205b 736e 6170 696e 666f 5d0a 2020     [snapinfo].  
+0000d6f0: 2020 2020 2020 2020 2020 4e6f 6465 4c61            NodeLa
+0000d700: 6265 6c3d 227b 6c61 6265 6c7d 220a 2020  bel="{label}".  
+0000d710: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000d720: 2020 7365 6c66 2e77 7269 7465 5f74 6578    self.write_tex
+0000d730: 745f 6669 6c65 2864 6564 656e 7428 696e  t_file(dedent(in
+0000d740: 6929 2e73 7472 6970 2829 2c20 2773 6b6f  i).strip(), 'sko
+0000d750: 6f6c 6b69 742e 696e 6927 290a 2020 2020  olkit.ini').    
+0000d760: 2020 2020 7365 6c66 2e72 756e 5f73 6e61      self.run_sna
+0000d770: 7069 6e66 6f28 272d 2d69 6e69 204e 6f64  pinfo('--ini Nod
+0000d780: 654c 6162 656c 3d22 7b61 6464 7265 7373  eLabel="{address
+0000d790: 7d22 2074 6573 742e 7a38 3027 290a 2020  }" test.z80').  
+0000d7a0: 2020 2020 2020 6f70 7469 6f6e 732c 2063        options, c
+0000d7b0: 6f6e 6669 6720 3d20 7275 6e5f 6172 6773  onfig = run_args
+0000d7c0: 5b31 3a5d 0a20 2020 2020 2020 2073 656c  [1:].        sel
+0000d7d0: 662e 6173 7365 7274 4571 7561 6c28 5b27  f.assertEqual(['
+0000d7e0: 4e6f 6465 4c61 6265 6c3d 227b 6164 6472  NodeLabel="{addr
+0000d7f0: 6573 737d 2227 5d2c 206f 7074 696f 6e73  ess}"'], options
+0000d800: 2e70 6172 616d 7329 0a20 2020 2020 2020  .params).       
+0000d810: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d820: 6c28 636f 6e66 6967 5b27 4e6f 6465 4c61  l(config['NodeLa
+0000d830: 6265 6c27 5d2c 2027 227b 6164 6472 6573  bel'], '"{addres
+0000d840: 737d 2227 290a 0a20 2020 2040 7061 7463  s}"')..    @patc
+0000d850: 682e 6f62 6a65 6374 2873 6e61 7069 6e66  h.object(snapinf
+0000d860: 6f2c 2027 7275 6e27 2c20 6d6f 636b 5f72  o, 'run', mock_r
+0000d870: 756e 290a 2020 2020 4070 6174 6368 2e6f  un).    @patch.o
+0000d880: 626a 6563 7428 736e 6170 696e 666f 2c20  bject(snapinfo, 
+0000d890: 2767 6574 5f63 6f6e 6669 6727 2c20 6d6f  'get_config', mo
+0000d8a0: 636b 5f63 6f6e 6669 6729 0a20 2020 2064  ck_config).    d
+0000d8b0: 6566 2074 6573 745f 6f70 7469 6f6e 5f49  ef test_option_I
+0000d8c0: 5f6d 756c 7469 706c 6528 7365 6c66 293a  _multiple(self):
+0000d8d0: 0a20 2020 2020 2020 2073 656c 662e 7275  .        self.ru
+0000d8e0: 6e5f 736e 6170 696e 666f 2827 2d49 204e  n_snapinfo('-I N
+0000d8f0: 6f64 654c 6162 656c 3d22 7b61 6464 7265  odeLabel="{addre
+0000d900: 7373 7d22 202d 4920 4e6f 6465 4174 7472  ss}" -I NodeAttr
+0000d910: 6962 7574 6573 3d73 6861 7065 3d73 7175  ibutes=shape=squ
+0000d920: 6172 6520 7465 7374 2d49 2d6d 756c 7469  are test-I-multi
+0000d930: 706c 652e 736e 6127 290a 2020 2020 2020  ple.sna').      
+0000d940: 2020 6f70 7469 6f6e 732c 2063 6f6e 6669    options, confi
+0000d950: 6720 3d20 7275 6e5f 6172 6773 5b31 3a5d  g = run_args[1:]
+0000d960: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000d970: 7365 7274 4571 7561 6c28 5b27 4e6f 6465  sertEqual(['Node
+0000d980: 4c61 6265 6c3d 227b 6164 6472 6573 737d  Label="{address}
+0000d990: 2227 2c20 274e 6f64 6541 7474 7269 6275  "', 'NodeAttribu
+0000d9a0: 7465 733d 7368 6170 653d 7371 7561 7265  tes=shape=square
+0000d9b0: 275d 2c20 6f70 7469 6f6e 732e 7061 7261  '], options.para
+0000d9c0: 6d73 290a 2020 2020 2020 2020 7365 6c66  ms).        self
+0000d9d0: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
+0000d9e0: 6669 675b 274e 6f64 6541 7474 7269 6275  fig['NodeAttribu
+0000d9f0: 7465 7327 5d2c 2027 7368 6170 653d 7371  tes'], 'shape=sq
+0000da00: 7561 7265 2729 0a20 2020 2020 2020 2073  uare').        s
+0000da10: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000da20: 636f 6e66 6967 5b27 4e6f 6465 4c61 6265  config['NodeLabe
+0000da30: 6c27 5d2c 2027 227b 6164 6472 6573 737d  l'], '"{address}
+0000da40: 2227 290a 0a20 2020 2064 6566 2074 6573  "')..    def tes
+0000da50: 745f 6f70 7469 6f6e 5f6f 2873 656c 6629  t_option_o(self)
+0000da60: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
+0000da70: 5b30 2c20 3437 5d0a 2020 2020 2020 2020  [0, 47].        
+0000da80: 6578 705f 6f75 7470 7574 203d 2027 3331  exp_output = '31
+0000da90: 3735 3920 3743 3046 3a20 2034 3720 2032  759 7C0F:  47  2
+0000daa0: 4620 2030 3031 3031 3131 3120 202f 270a  F  00101111  /'.
+0000dab0: 2020 2020 2020 2020 666f 7220 6f70 7469          for opti
+0000dac0: 6f6e 2069 6e20 2827 2d6f 272c 2027 2d2d  on in ('-o', '--
+0000dad0: 6f72 6727 293a 0a20 2020 2020 2020 2020  org'):.         
+0000dae0: 2020 2073 656c 662e 5f74 6573 745f 6269     self._test_bi
+0000daf0: 6e28 7261 6d2c 2065 7870 5f6f 7574 7075  n(ram, exp_outpu
+0000db00: 742c 2027 7b7d 2033 3137 3538 202d 7020  t, '{} 31758 -p 
+0000db10: 3331 3735 3927 2e66 6f72 6d61 7428 6f70  31759'.format(op
+0000db20: 7469 6f6e 2929 0a0a 2020 2020 6465 6620  tion))..    def 
+0000db30: 7465 7374 5f6f 7074 696f 6e5f 705f 7769  test_option_p_wi
+0000db40: 7468 5f73 696e 676c 655f 6164 6472 6573  th_single_addres
+0000db50: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000db60: 2072 616d 203d 205b 305d 202a 2034 3931   ram = [0] * 491
+0000db70: 3532 0a20 2020 2020 2020 2061 6464 7265  52.        addre
+0000db80: 7373 203d 2033 3137 3539 0a20 2020 2020  ss = 31759.     
+0000db90: 2020 2072 616d 5b61 6464 7265 7373 202d     ram[address -
+0000dba0: 2031 3633 3834 5d20 3d20 3437 0a20 2020   16384] = 47.   
+0000dbb0: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
+0000dbc0: 3d20 2733 3137 3539 2037 4330 463a 2020  = '31759 7C0F:  
+0000dbd0: 3437 2020 3246 2020 3030 3130 3131 3131  47  2F  00101111
+0000dbe0: 2020 2f27 0a20 2020 2020 2020 2073 656c    /'.        sel
+0000dbf0: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
+0000dc00: 2065 7870 5f6f 7574 7075 742c 2027 2d70   exp_output, '-p
+0000dc10: 207b 7d27 2e66 6f72 6d61 7428 6164 6472   {}'.format(addr
+0000dc20: 6573 7329 290a 0a20 2020 2064 6566 2074  ess))..    def t
+0000dc30: 6573 745f 6f70 7469 6f6e 5f70 6565 6b5f  est_option_peek_
+0000dc40: 7769 7468 5f61 6464 7265 7373 5f72 616e  with_address_ran
+0000dc50: 6765 2873 656c 6629 3a0a 2020 2020 2020  ge(self):.      
+0000dc60: 2020 7261 6d20 3d20 5b30 5d20 2a20 3439    ram = [0] * 49
+0000dc70: 3135 320a 2020 2020 2020 2020 6164 6472  152.        addr
+0000dc80: 6573 7331 203d 2034 3138 3835 0a20 2020  ess1 = 41885.   
+0000dc90: 2020 2020 2061 6464 7265 7373 3220 3d20       address2 = 
+0000dca0: 3431 3838 380a 2020 2020 2020 2020 7261  41888.        ra
+0000dcb0: 6d5b 6164 6472 6573 7331 202d 2031 3633  m[address1 - 163
+0000dcc0: 3834 3a61 6464 7265 7373 3220 2d31 3633  84:address2 -163
+0000dcd0: 3833 5d20 3d20 6c69 7374 2872 616e 6765  83] = list(range
+0000dce0: 2839 392c 2031 3030 202b 2061 6464 7265  (99, 100 + addre
+0000dcf0: 7373 3220 2d20 6164 6472 6573 7331 2929  ss2 - address1))
+0000dd00: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+0000dd10: 7075 7420 3d20 2222 220a 2020 2020 2020  put = """.      
+0000dd20: 2020 2020 2020 3431 3838 3520 4133 3944        41885 A39D
+0000dd30: 3a20 2039 3920 2036 3320 2030 3131 3030  :  99  63  01100
+0000dd40: 3031 3120 2063 0a20 2020 2020 2020 2020  011  c.         
+0000dd50: 2020 2034 3138 3836 2041 3339 453a 2031     41886 A39E: 1
+0000dd60: 3030 2020 3634 2020 3031 3130 3031 3030  00  64  01100100
+0000dd70: 2020 640a 2020 2020 2020 2020 2020 2020    d.            
+0000dd80: 3431 3838 3720 4133 3946 3a20 3130 3120  41887 A39F: 101 
+0000dd90: 2036 3520 2030 3131 3030 3130 3120 2065   65  01100101  e
+0000dda0: 0a20 2020 2020 2020 2020 2020 2034 3138  .            418
+0000ddb0: 3838 2041 3341 303a 2031 3032 2020 3636  88 A3A0: 102  66
+0000ddc0: 2020 3031 3130 3031 3130 2020 660a 2020    01100110  f.  
+0000ddd0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000dde0: 2020 7365 6c66 2e5f 7465 7374 5f73 6e61    self._test_sna
+0000ddf0: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
+0000de00: 2c20 272d 2d70 6565 6b20 7b7d 2d7b 7d27  , '--peek {}-{}'
+0000de10: 2e66 6f72 6d61 7428 6164 6472 6573 7331  .format(address1
+0000de20: 2c20 6164 6472 6573 7332 2929 0a0a 2020  , address2))..  
+0000de30: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
+0000de40: 6e5f 705f 7769 7468 5f61 6464 7265 7373  n_p_with_address
+0000de50: 5f72 616e 6765 5f61 6e64 5f73 7465 7028  _range_and_step(
+0000de60: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+0000de70: 616d 203d 205b 305d 202a 2034 3931 3532  am = [0] * 49152
+0000de80: 0a20 2020 2020 2020 2061 6464 7265 7373  .        address
+0000de90: 3120 3d20 3235 3636 330a 2020 2020 2020  1 = 25663.      
+0000dea0: 2020 6164 6472 6573 7332 203d 2032 3536    address2 = 256
+0000deb0: 3639 0a20 2020 2020 2020 2073 7465 7020  69.        step 
+0000dec0: 3d20 330a 2020 2020 2020 2020 7261 6d5b  = 3.        ram[
+0000ded0: 6164 6472 6573 7331 202d 2031 3633 3834  address1 - 16384
+0000dee0: 3a61 6464 7265 7373 3220 2d31 3633 3833  :address2 -16383
+0000def0: 3a73 7465 705d 203d 205b 3333 2c20 3635  :step] = [33, 65
+0000df00: 2c20 3132 365d 0a20 2020 2020 2020 2065  , 126].        e
+0000df10: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+0000df20: 2020 2020 2020 2020 2020 2020 3235 3636              2566
+0000df30: 3320 3634 3346 3a20 2033 3320 2032 3120  3 643F:  33  21 
+0000df40: 2030 3031 3030 3030 3120 2021 0a20 2020   00100001  !.   
+0000df50: 2020 2020 2020 2020 2032 3536 3636 2036           25666 6
+0000df60: 3434 323a 2020 3635 2020 3431 2020 3031  442:  65  41  01
+0000df70: 3030 3030 3031 2020 410a 2020 2020 2020  000001  A.      
+0000df80: 2020 2020 2020 3235 3636 3920 3634 3435        25669 6445
+0000df90: 3a20 3132 3620 2037 4520 2030 3131 3131  : 126  7E  01111
+0000dfa0: 3131 3020 207e 0a20 2020 2020 2020 2022  110  ~.        "
+0000dfb0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0000dfc0: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
+0000dfd0: 7870 5f6f 7574 7075 742c 2027 2d70 207b  xp_output, '-p {
+0000dfe0: 7d2d 7b7d 2d7b 7d27 2e66 6f72 6d61 7428  }-{}-{}'.format(
+0000dff0: 6164 6472 6573 7331 2c20 6164 6472 6573  address1, addres
+0000e000: 7332 2c20 7374 6570 2929 0a0a 2020 2020  s2, step))..    
+0000e010: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+0000e020: 705f 7769 7468 5f68 6578 6164 6563 696d  p_with_hexadecim
+0000e030: 616c 5f76 616c 7565 7328 7365 6c66 293a  al_values(self):
+0000e040: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
+0000e050: 305d 202a 2034 3931 3532 0a20 2020 2020  0] * 49152.     
+0000e060: 2020 2061 6464 7265 7373 3120 3d20 3078     address1 = 0x
+0000e070: 3831 6164 0a20 2020 2020 2020 2061 6464  81ad.        add
+0000e080: 7265 7373 3220 3d20 3078 3831 6331 0a20  ress2 = 0x81c1. 
+0000e090: 2020 2020 2020 2073 7465 7020 3d20 3078         step = 0x
+0000e0a0: 3061 0a20 2020 2020 2020 2072 616d 5b61  0a.        ram[a
+0000e0b0: 6464 7265 7373 3120 2d20 3136 3338 343a  ddress1 - 16384:
+0000e0c0: 6164 6472 6573 7332 202d 3136 3338 333a  address2 -16383:
+0000e0d0: 7374 6570 5d20 3d20 5b33 332c 2036 352c  step] = [33, 65,
+0000e0e0: 2031 3236 5d0a 2020 2020 2020 2020 6578   126].        ex
+0000e0f0: 705f 6f75 7470 7574 203d 2022 2222 0a20  p_output = """. 
+0000e100: 2020 2020 2020 2020 2020 2033 3331 3937             33197
+0000e110: 2038 3141 443a 2020 3333 2020 3231 2020   81AD:  33  21  
+0000e120: 3030 3130 3030 3031 2020 210a 2020 2020  00100001  !.    
+0000e130: 2020 2020 2020 2020 3333 3230 3720 3831          33207 81
+0000e140: 4237 3a20 2036 3520 2034 3120 2030 3130  B7:  65  41  010
+0000e150: 3030 3030 3120 2041 0a20 2020 2020 2020  00001  A.       
+0000e160: 2020 2020 2033 3332 3137 2038 3143 313a       33217 81C1:
+0000e170: 2031 3236 2020 3745 2020 3031 3131 3131   126  7E  011111
+0000e180: 3130 2020 7e0a 2020 2020 2020 2020 2222  10  ~.        ""
+0000e190: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+0000e1a0: 7465 7374 5f73 6e61 2872 616d 2c20 6578  test_sna(ram, ex
+0000e1b0: 705f 6f75 7470 7574 2c20 272d 7020 247b  p_output, '-p ${
+0000e1c0: 3a30 3458 7d2d 247b 3a30 3478 7d2d 247b  :04X}-${:04x}-${
+0000e1d0: 3a58 7d27 2e66 6f72 6d61 7428 6164 6472  :X}'.format(addr
+0000e1e0: 6573 7331 2c20 6164 6472 6573 7332 2c20  ess1, address2, 
+0000e1f0: 7374 6570 2929 0a0a 2020 2020 6465 6620  step))..    def 
+0000e200: 7465 7374 5f6f 7074 696f 6e5f 705f 7769  test_option_p_wi
+0000e210: 7468 5f30 785f 6865 7861 6465 6369 6d61  th_0x_hexadecima
+0000e220: 6c5f 7661 6c75 6573 2873 656c 6629 3a0a  l_values(self):.
+0000e230: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
+0000e240: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
+0000e250: 2020 6164 6472 6573 7331 203d 2030 7838    address1 = 0x8
+0000e260: 3161 640a 2020 2020 2020 2020 6164 6472  1ad.        addr
+0000e270: 6573 7332 203d 2030 7838 3163 310a 2020  ess2 = 0x81c1.  
+0000e280: 2020 2020 2020 7374 6570 203d 2030 7830        step = 0x0
+0000e290: 610a 2020 2020 2020 2020 7261 6d5b 6164  a.        ram[ad
+0000e2a0: 6472 6573 7331 202d 2031 3633 3834 3a61  dress1 - 16384:a
+0000e2b0: 6464 7265 7373 3220 2d31 3633 3833 3a73  ddress2 -16383:s
+0000e2c0: 7465 705d 203d 205b 3333 2c20 3635 2c20  tep] = [33, 65, 
+0000e2d0: 3132 365d 0a20 2020 2020 2020 2065 7870  126].        exp
+0000e2e0: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
+0000e2f0: 2020 2020 2020 2020 2020 3333 3139 3720            33197 
+0000e300: 3831 4144 3a20 2033 3320 2032 3120 2030  81AD:  33  21  0
+0000e310: 3031 3030 3030 3120 2021 0a20 2020 2020  0100001  !.     
+0000e320: 2020 2020 2020 2033 3332 3037 2038 3142         33207 81B
+0000e330: 373a 2020 3635 2020 3431 2020 3031 3030  7:  65  41  0100
+0000e340: 3030 3031 2020 410a 2020 2020 2020 2020  0001  A.        
+0000e350: 2020 2020 3333 3231 3720 3831 4331 3a20      33217 81C1: 
+0000e360: 3132 3620 2037 4520 2030 3131 3131 3131  126  7E  0111111
+0000e370: 3020 207e 0a20 2020 2020 2020 2022 2222  0  ~.        """
+0000e380: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+0000e390: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
+0000e3a0: 5f6f 7574 7075 742c 2027 2d70 2030 787b  _output, '-p 0x{
+0000e3b0: 3a30 3458 7d2d 3078 7b3a 3034 787d 2d30  :04X}-0x{:04x}-0
+0000e3c0: 787b 3a58 7d27 2e66 6f72 6d61 7428 6164  x{:X}'.format(ad
+0000e3d0: 6472 6573 7331 2c20 6164 6472 6573 7332  dress1, address2
+0000e3e0: 2c20 7374 6570 2929 0a0a 2020 2020 6465  , step))..    de
+0000e3f0: 6620 7465 7374 5f6f 7074 696f 6e5f 7065  f test_option_pe
+0000e400: 656b 5f6d 756c 7469 706c 6528 7365 6c66  ek_multiple(self
+0000e410: 293a 0a20 2020 2020 2020 2072 616d 203d  ):.        ram =
+0000e420: 205b 305d 202a 2034 3931 3532 0a20 2020   [0] * 49152.   
+0000e430: 2020 2020 206f 7074 696f 6e73 203d 205b       options = [
+0000e440: 5d0a 2020 2020 2020 2020 6164 6472 6573  ].        addres
+0000e450: 7365 7320 3d20 2833 3333 3333 2c20 3434  ses = (33333, 44
+0000e460: 3137 332c 2035 3039 3938 290a 2020 2020  173, 50998).    
+0000e470: 2020 2020 666f 7220 6120 696e 2061 6464      for a in add
+0000e480: 7265 7373 6573 3a0a 2020 2020 2020 2020  resses:.        
+0000e490: 2020 2020 7261 6d5b 6120 2d20 3136 3338      ram[a - 1638
+0000e4a0: 345d 203d 2061 2025 2032 3536 0a20 2020  4] = a % 256.   
+0000e4b0: 2020 2020 2020 2020 206f 7074 696f 6e73           options
+0000e4c0: 2e61 7070 656e 6428 272d 2d70 6565 6b20  .append('--peek 
+0000e4d0: 7b7d 272e 666f 726d 6174 2861 2929 0a20  {}'.format(a)). 
+0000e4e0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+0000e4f0: 7420 3d20 275c 6e27 2e6a 6f69 6e28 280a  t = '\n'.join((.
+0000e500: 2020 2020 2020 2020 2020 2020 2733 3333              '333
+0000e510: 3333 2038 3233 353a 2020 3533 2020 3335  33 8235:  53  35
+0000e520: 2020 3030 3131 3031 3031 2020 3527 2c0a    00110101  5',.
+0000e530: 2020 2020 2020 2020 2020 2020 2734 3431              '441
+0000e540: 3733 2041 4338 443a 2031 3431 2020 3844  73 AC8D: 141  8D
+0000e550: 2020 3130 3030 3131 3031 2020 272c 0a20    10001101  ',. 
+0000e560: 2020 2020 2020 2020 2020 2027 3530 3939             '5099
+0000e570: 3820 4337 3336 3a20 2035 3420 2033 3620  8 C736:  54  36 
+0000e580: 2030 3031 3130 3131 3020 2036 270a 2020   00110110  6'.  
+0000e590: 2020 2020 2020 2929 0a20 2020 2020 2020        )).       
+0000e5a0: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+0000e5b0: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+0000e5c0: 2027 2027 2e6a 6f69 6e28 6f70 7469 6f6e   ' '.join(option
+0000e5d0: 7329 290a 0a20 2020 2064 6566 2074 6573  s))..    def tes
+0000e5e0: 745f 6f70 7469 6f6e 5f70 5f6f 6e5f 7261  t_option_p_on_ra
+0000e5f0: 775f 6d65 6d6f 7279 5f66 696c 6528 7365  w_memory_file(se
+0000e600: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+0000e610: 203d 205b 3634 2c20 3635 2c20 3636 5d0a   = [64, 65, 66].
+0000e620: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
+0000e630: 7574 203d 2027 3635 3533 3420 4646 4645  ut = '65534 FFFE
+0000e640: 3a20 2036 3520 2034 3120 2030 3130 3030  :  65  41  01000
+0000e650: 3030 3120 2041 270a 2020 2020 2020 2020  001  A'.        
+0000e660: 7365 6c66 2e5f 7465 7374 5f62 696e 2872  self._test_bin(r
+0000e670: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+0000e680: 272d 7020 3635 3533 3427 290a 0a20 2020  '-p 65534')..   
+0000e690: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
+0000e6a0: 5f70 5f6f 6e5f 7261 775f 6d65 6d6f 7279  _p_on_raw_memory
+0000e6b0: 5f66 696c 655f 7769 7468 5f6e 6f6e 7374  _file_with_nonst
+0000e6c0: 616e 6461 7264 5f73 7566 6669 7828 7365  andard_suffix(se
+0000e6d0: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+0000e6e0: 203d 205b 3636 2c20 3635 2c20 3634 5d0a   = [66, 65, 64].
+0000e6f0: 2020 2020 2020 2020 6578 705f 6f75 7470          exp_outp
+0000e700: 7574 203d 2027 3635 3533 3420 4646 4645  ut = '65534 FFFE
+0000e710: 3a20 2036 3520 2034 3120 2030 3130 3030  :  65  41  01000
+0000e720: 3030 3120 2041 270a 2020 2020 2020 2020  001  A'.        
+0000e730: 7365 6c66 2e5f 7465 7374 5f62 696e 2872  self._test_bin(r
+0000e740: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+0000e750: 272d 7020 3635 3533 3427 2c20 7375 6666  '-p 65534', suff
+0000e760: 6978 3d27 2e72 616d 2729 0a0a 2020 2020  ix='.ram')..    
+0000e770: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+0000e780: 705f 7769 7468 5f61 6464 7265 7373 6573  p_with_addresses
+0000e790: 5f62 656c 6f77 5f31 3030 3030 2873 656c  _below_10000(sel
+0000e7a0: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
+0000e7b0: 3d20 5b30 5d20 2a20 3130 3030 310a 2020  = [0] * 10001.  
+0000e7c0: 2020 2020 2020 7261 6d5b 315d 203d 2036        ram[1] = 6
+0000e7d0: 360a 2020 2020 2020 2020 7261 6d5b 3131  6.        ram[11
+0000e7e0: 5d20 3d20 3637 0a20 2020 2020 2020 2072  ] = 67.        r
+0000e7f0: 616d 5b39 3939 5d20 3d20 3638 0a20 2020  am[999] = 68.   
+0000e800: 2020 2020 2072 616d 5b39 3939 395d 203d       ram[9999] =
+0000e810: 2036 390a 2020 2020 2020 2020 7261 6d5b   69.        ram[
+0000e820: 3130 3030 305d 203d 2037 300a 2020 2020  10000] = 70.    
+0000e830: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+0000e840: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+0000e850: 2020 2020 2031 2030 3030 313a 2020 3636       1 0001:  66
+0000e860: 2020 3432 2020 3031 3030 3030 3130 2020    42  01000010  
+0000e870: 420a 2020 2020 2020 2020 2020 2020 2020  B.              
+0000e880: 2031 3120 3030 3042 3a20 2036 3720 2034   11 000B:  67  4
+0000e890: 3320 2030 3130 3030 3031 3120 2043 0a20  3  01000011  C. 
+0000e8a0: 2020 2020 2020 2020 2020 2020 2039 3939               999
+0000e8b0: 2030 3345 373a 2020 3638 2020 3434 2020   03E7:  68  44  
+0000e8c0: 3031 3030 3031 3030 2020 440a 2020 2020  01000100  D.    
+0000e8d0: 2020 2020 2020 2020 2039 3939 3920 3237           9999 27
+0000e8e0: 3046 3a20 2036 3920 2034 3520 2030 3130  0F:  69  45  010
+0000e8f0: 3030 3130 3120 2045 0a20 2020 2020 2020  00101  E.       
+0000e900: 2020 2020 2031 3030 3030 2032 3731 303a       10000 2710:
+0000e910: 2020 3730 2020 3436 2020 3031 3030 3031    70  46  010001
+0000e920: 3130 2020 460a 2020 2020 2020 2020 2222  10  F.        ""
+0000e930: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+0000e940: 7465 7374 5f62 696e 2872 616d 2c20 6578  test_bin(ram, ex
+0000e950: 705f 6f75 7470 7574 2c20 272d 6f20 3020  p_output, '-o 0 
+0000e960: 2d70 2031 202d 7020 3131 202d 7020 3939  -p 1 -p 11 -p 99
+0000e970: 3920 2d70 2039 3939 3920 2d70 2031 3030  9 -p 9999 -p 100
+0000e980: 3030 2729 0a0a 2020 2020 6465 6620 7465  00')..    def te
+0000e990: 7374 5f6f 7074 696f 6e5f 705f 7769 7468  st_option_p_with
+0000e9a0: 5f75 6467 7328 7365 6c66 293a 0a20 2020  _udgs(self):.   
+0000e9b0: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+0000e9c0: 2034 3931 3532 0a20 2020 2020 2020 2061   49152.        a
+0000e9d0: 6464 7265 7373 203d 2036 3138 3932 0a20  ddress = 61892. 
+0000e9e0: 2020 2020 2020 2075 6467 7320 3d20 6c69         udgs = li
+0000e9f0: 7374 2872 616e 6765 2831 3434 2c20 3136  st(range(144, 16
+0000ea00: 3529 290a 2020 2020 2020 2020 7261 6d5b  5)).        ram[
+0000ea10: 6164 6472 6573 7320 2d20 3136 3338 343a  address - 16384:
+0000ea20: 6164 6472 6573 7320 2d20 3136 3338 3420  address - 16384 
+0000ea30: 2b20 6c65 6e28 7564 6773 295d 203d 2075  + len(udgs)] = u
+0000ea40: 6467 730a 2020 2020 2020 2020 6578 705f  dgs.        exp_
+0000ea50: 6f75 7470 7574 203d 2022 2222 0a20 2020  output = """.   
+0000ea60: 2020 2020 2020 2020 2036 3138 3932 2046           61892 F
+0000ea70: 3143 343a 2031 3434 2020 3930 2020 3130  1C4: 144  90  10
+0000ea80: 3031 3030 3030 2020 5544 472d 410a 2020  010000  UDG-A.  
+0000ea90: 2020 2020 2020 2020 2020 3631 3839 3320            61893 
+0000eaa0: 4631 4335 3a20 3134 3520 2039 3120 2031  F1C5: 145  91  1
+0000eab0: 3030 3130 3030 3120 2055 4447 2d42 0a20  0010001  UDG-B. 
+0000eac0: 2020 2020 2020 2020 2020 2036 3138 3934             61894
+0000ead0: 2046 3143 363a 2031 3436 2020 3932 2020   F1C6: 146  92  
+0000eae0: 3130 3031 3030 3130 2020 5544 472d 430a  10010010  UDG-C.
+0000eaf0: 2020 2020 2020 2020 2020 2020 3631 3839              6189
+0000eb00: 3520 4631 4337 3a20 3134 3720 2039 3320  5 F1C7: 147  93 
+0000eb10: 2031 3030 3130 3031 3120 2055 4447 2d44   10010011  UDG-D
+0000eb20: 0a20 2020 2020 2020 2020 2020 2036 3138  .            618
+0000eb30: 3936 2046 3143 383a 2031 3438 2020 3934  96 F1C8: 148  94
+0000eb40: 2020 3130 3031 3031 3030 2020 5544 472d    10010100  UDG-
+0000eb50: 450a 2020 2020 2020 2020 2020 2020 3631  E.            61
+0000eb60: 3839 3720 4631 4339 3a20 3134 3920 2039  897 F1C9: 149  9
+0000eb70: 3520 2031 3030 3130 3130 3120 2055 4447  5  10010101  UDG
+0000eb80: 2d46 0a20 2020 2020 2020 2020 2020 2036  -F.            6
+0000eb90: 3138 3938 2046 3143 413a 2031 3530 2020  1898 F1CA: 150  
+0000eba0: 3936 2020 3130 3031 3031 3130 2020 5544  96  10010110  UD
+0000ebb0: 472d 470a 2020 2020 2020 2020 2020 2020  G-G.            
+0000ebc0: 3631 3839 3920 4631 4342 3a20 3135 3120  61899 F1CB: 151 
+0000ebd0: 2039 3720 2031 3030 3130 3131 3120 2055   97  10010111  U
+0000ebe0: 4447 2d48 0a20 2020 2020 2020 2020 2020  DG-H.           
+0000ebf0: 2036 3139 3030 2046 3143 433a 2031 3532   61900 F1CC: 152
+0000ec00: 2020 3938 2020 3130 3031 3130 3030 2020    98  10011000  
+0000ec10: 5544 472d 490a 2020 2020 2020 2020 2020  UDG-I.          
+0000ec20: 2020 3631 3930 3120 4631 4344 3a20 3135    61901 F1CD: 15
+0000ec30: 3320 2039 3920 2031 3030 3131 3030 3120  3  99  10011001 
+0000ec40: 2055 4447 2d4a 0a20 2020 2020 2020 2020   UDG-J.         
+0000ec50: 2020 2036 3139 3032 2046 3143 453a 2031     61902 F1CE: 1
+0000ec60: 3534 2020 3941 2020 3130 3031 3130 3130  54  9A  10011010
+0000ec70: 2020 5544 472d 4b0a 2020 2020 2020 2020    UDG-K.        
+0000ec80: 2020 2020 3631 3930 3320 4631 4346 3a20      61903 F1CF: 
+0000ec90: 3135 3520 2039 4220 2031 3030 3131 3031  155  9B  1001101
+0000eca0: 3120 2055 4447 2d4c 0a20 2020 2020 2020  1  UDG-L.       
+0000ecb0: 2020 2020 2036 3139 3034 2046 3144 303a       61904 F1D0:
+0000ecc0: 2031 3536 2020 3943 2020 3130 3031 3131   156  9C  100111
+0000ecd0: 3030 2020 5544 472d 4d0a 2020 2020 2020  00  UDG-M.      
+0000ece0: 2020 2020 2020 3631 3930 3520 4631 4431        61905 F1D1
+0000ecf0: 3a20 3135 3720 2039 4420 2031 3030 3131  : 157  9D  10011
+0000ed00: 3130 3120 2055 4447 2d4e 0a20 2020 2020  101  UDG-N.     
+0000ed10: 2020 2020 2020 2036 3139 3036 2046 3144         61906 F1D
+0000ed20: 323a 2031 3538 2020 3945 2020 3130 3031  2: 158  9E  1001
+0000ed30: 3131 3130 2020 5544 472d 4f0a 2020 2020  1110  UDG-O.    
+0000ed40: 2020 2020 2020 2020 3631 3930 3720 4631          61907 F1
+0000ed50: 4433 3a20 3135 3920 2039 4620 2031 3030  D3: 159  9F  100
+0000ed60: 3131 3131 3120 2055 4447 2d50 0a20 2020  11111  UDG-P.   
+0000ed70: 2020 2020 2020 2020 2036 3139 3038 2046           61908 F
+0000ed80: 3144 343a 2031 3630 2020 4130 2020 3130  1D4: 160  A0  10
+0000ed90: 3130 3030 3030 2020 5544 472d 510a 2020  100000  UDG-Q.  
+0000eda0: 2020 2020 2020 2020 2020 3631 3930 3920            61909 
+0000edb0: 4631 4435 3a20 3136 3120 2041 3120 2031  F1D5: 161  A1  1
+0000edc0: 3031 3030 3030 3120 2055 4447 2d52 0a20  0100001  UDG-R. 
+0000edd0: 2020 2020 2020 2020 2020 2036 3139 3130             61910
+0000ede0: 2046 3144 363a 2031 3632 2020 4132 2020   F1D6: 162  A2  
+0000edf0: 3130 3130 3030 3130 2020 5544 472d 530a  10100010  UDG-S.
+0000ee00: 2020 2020 2020 2020 2020 2020 3631 3931              6191
+0000ee10: 3120 4631 4437 3a20 3136 3320 2041 3320  1 F1D7: 163  A3 
+0000ee20: 2031 3031 3030 3031 3120 2055 4447 2d54   10100011  UDG-T
+0000ee30: 0a20 2020 2020 2020 2020 2020 2036 3139  .            619
+0000ee40: 3132 2046 3144 383a 2031 3634 2020 4134  12 F1D8: 164  A4
+0000ee50: 2020 3130 3130 3031 3030 2020 5544 472d    10100100  UDG-
+0000ee60: 550a 2020 2020 2020 2020 2222 220a 2020  U.        """.  
+0000ee70: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+0000ee80: 5f73 6e61 2872 616d 2c20 6578 705f 6f75  _sna(ram, exp_ou
+0000ee90: 7470 7574 2c20 272d 7020 7b7d 2d7b 7d27  tput, '-p {}-{}'
+0000eea0: 2e66 6f72 6d61 7428 6164 6472 6573 732c  .format(address,
+0000eeb0: 2061 6464 7265 7373 202b 206c 656e 2875   address + len(u
+0000eec0: 6467 7329 202d 2031 2929 0a0a 2020 2020  dgs) - 1))..    
+0000eed0: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+0000eee0: 7065 656b 5f77 6974 685f 6261 7369 635f  peek_with_basic_
+0000eef0: 746f 6b65 6e73 2873 656c 6629 3a0a 2020  tokens(self):.  
+0000ef00: 2020 2020 2020 7261 6d20 3d20 5b30 5d20        ram = [0] 
+0000ef10: 2a20 3439 3135 320a 2020 2020 2020 2020  * 49152.        
+0000ef20: 6164 6472 6573 7320 3d20 3432 3135 320a  address = 42152.
+0000ef30: 2020 2020 2020 2020 746f 6b65 6e73 203d          tokens =
+0000ef40: 206c 6973 7428 7261 6e67 6528 3136 352c   list(range(165,
+0000ef50: 2032 3536 2929 0a20 2020 2020 2020 2072   256)).        r
+0000ef60: 616d 5b61 6464 7265 7373 202d 2031 3633  am[address - 163
+0000ef70: 3834 3a61 6464 7265 7373 202d 2031 3633  84:address - 163
+0000ef80: 3834 202b 206c 656e 2874 6f6b 656e 7329  84 + len(tokens)
+0000ef90: 5d20 3d20 746f 6b65 6e73 0a20 2020 2020  ] = tokens.     
+0000efa0: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+0000efb0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+0000efc0: 3432 3135 3220 4134 4138 3a20 3136 3520  42152 A4A8: 165 
+0000efd0: 2041 3520 2031 3031 3030 3130 3120 2052   A5  10100101  R
+0000efe0: 4e44 0a20 2020 2020 2020 2020 2020 2034  ND.            4
+0000eff0: 3231 3533 2041 3441 393a 2031 3636 2020  2153 A4A9: 166  
+0000f000: 4136 2020 3130 3130 3031 3130 2020 494e  A6  10100110  IN
+0000f010: 4b45 5924 0a20 2020 2020 2020 2020 2020  KEY$.           
+0000f020: 2034 3231 3534 2041 3441 413a 2031 3637   42154 A4AA: 167
+0000f030: 2020 4137 2020 3130 3130 3031 3131 2020    A7  10100111  
+0000f040: 5049 0a20 2020 2020 2020 2020 2020 2034  PI.            4
+0000f050: 3231 3535 2041 3441 423a 2031 3638 2020  2155 A4AB: 168  
+0000f060: 4138 2020 3130 3130 3130 3030 2020 464e  A8  10101000  FN
+0000f070: 0a20 2020 2020 2020 2020 2020 2034 3231  .            421
+0000f080: 3536 2041 3441 433a 2031 3639 2020 4139  56 A4AC: 169  A9
+0000f090: 2020 3130 3130 3130 3031 2020 504f 494e    10101001  POIN
+0000f0a0: 540a 2020 2020 2020 2020 2020 2020 3432  T.            42
+0000f0b0: 3135 3720 4134 4144 3a20 3137 3020 2041  157 A4AD: 170  A
+0000f0c0: 4120 2031 3031 3031 3031 3020 2053 4352  A  10101010  SCR
+0000f0d0: 4545 4e24 0a20 2020 2020 2020 2020 2020  EEN$.           
+0000f0e0: 2034 3231 3538 2041 3441 453a 2031 3731   42158 A4AE: 171
+0000f0f0: 2020 4142 2020 3130 3130 3130 3131 2020    AB  10101011  
+0000f100: 4154 5452 0a20 2020 2020 2020 2020 2020  ATTR.           
+0000f110: 2034 3231 3539 2041 3441 463a 2031 3732   42159 A4AF: 172
+0000f120: 2020 4143 2020 3130 3130 3131 3030 2020    AC  10101100  
+0000f130: 4154 0a20 2020 2020 2020 2020 2020 2034  AT.            4
+0000f140: 3231 3630 2041 3442 303a 2031 3733 2020  2160 A4B0: 173  
+0000f150: 4144 2020 3130 3130 3131 3031 2020 5441  AD  10101101  TA
+0000f160: 420a 2020 2020 2020 2020 2020 2020 3432  B.            42
+0000f170: 3136 3120 4134 4231 3a20 3137 3420 2041  161 A4B1: 174  A
+0000f180: 4520 2031 3031 3031 3131 3020 2056 414c  E  10101110  VAL
+0000f190: 240a 2020 2020 2020 2020 2020 2020 3432  $.            42
+0000f1a0: 3136 3220 4134 4232 3a20 3137 3520 2041  162 A4B2: 175  A
+0000f1b0: 4620 2031 3031 3031 3131 3120 2043 4f44  F  10101111  COD
+0000f1c0: 450a 2020 2020 2020 2020 2020 2020 3432  E.            42
+0000f1d0: 3136 3320 4134 4233 3a20 3137 3620 2042  163 A4B3: 176  B
+0000f1e0: 3020 2031 3031 3130 3030 3020 2056 414c  0  10110000  VAL
+0000f1f0: 0a20 2020 2020 2020 2020 2020 2034 3231  .            421
+0000f200: 3634 2041 3442 343a 2031 3737 2020 4231  64 A4B4: 177  B1
+0000f210: 2020 3130 3131 3030 3031 2020 4c45 4e0a    10110001  LEN.
+0000f220: 2020 2020 2020 2020 2020 2020 3432 3136              4216
+0000f230: 3520 4134 4235 3a20 3137 3820 2042 3220  5 A4B5: 178  B2 
+0000f240: 2031 3031 3130 3031 3020 2053 494e 0a20   10110010  SIN. 
+0000f250: 2020 2020 2020 2020 2020 2034 3231 3636             42166
+0000f260: 2041 3442 363a 2031 3739 2020 4233 2020   A4B6: 179  B3  
+0000f270: 3130 3131 3030 3131 2020 434f 530a 2020  10110011  COS.  
+0000f280: 2020 2020 2020 2020 2020 3432 3136 3720            42167 
+0000f290: 4134 4237 3a20 3138 3020 2042 3420 2031  A4B7: 180  B4  1
+0000f2a0: 3031 3130 3130 3020 2054 414e 0a20 2020  0110100  TAN.   
+0000f2b0: 2020 2020 2020 2020 2034 3231 3638 2041           42168 A
+0000f2c0: 3442 383a 2031 3831 2020 4235 2020 3130  4B8: 181  B5  10
+0000f2d0: 3131 3031 3031 2020 4153 4e0a 2020 2020  110101  ASN.    
+0000f2e0: 2020 2020 2020 2020 3432 3136 3920 4134          42169 A4
+0000f2f0: 4239 3a20 3138 3220 2042 3620 2031 3031  B9: 182  B6  101
+0000f300: 3130 3131 3020 2041 4353 0a20 2020 2020  10110  ACS.     
+0000f310: 2020 2020 2020 2034 3231 3730 2041 3442         42170 A4B
+0000f320: 413a 2031 3833 2020 4237 2020 3130 3131  A: 183  B7  1011
+0000f330: 3031 3131 2020 4154 4e0a 2020 2020 2020  0111  ATN.      
+0000f340: 2020 2020 2020 3432 3137 3120 4134 4242        42171 A4BB
+0000f350: 3a20 3138 3420 2042 3820 2031 3031 3131  : 184  B8  10111
+0000f360: 3030 3020 204c 4e0a 2020 2020 2020 2020  000  LN.        
+0000f370: 2020 2020 3432 3137 3220 4134 4243 3a20      42172 A4BC: 
+0000f380: 3138 3520 2042 3920 2031 3031 3131 3030  185  B9  1011100
+0000f390: 3120 2045 5850 0a20 2020 2020 2020 2020  1  EXP.         
+0000f3a0: 2020 2034 3231 3733 2041 3442 443a 2031     42173 A4BD: 1
+0000f3b0: 3836 2020 4241 2020 3130 3131 3130 3130  86  BA  10111010
+0000f3c0: 2020 494e 540a 2020 2020 2020 2020 2020    INT.          
+0000f3d0: 2020 3432 3137 3420 4134 4245 3a20 3138    42174 A4BE: 18
+0000f3e0: 3720 2042 4220 2031 3031 3131 3031 3120  7  BB  10111011 
+0000f3f0: 2053 5152 0a20 2020 2020 2020 2020 2020   SQR.           
+0000f400: 2034 3231 3735 2041 3442 463a 2031 3838   42175 A4BF: 188
+0000f410: 2020 4243 2020 3130 3131 3131 3030 2020    BC  10111100  
+0000f420: 5347 4e0a 2020 2020 2020 2020 2020 2020  SGN.            
+0000f430: 3432 3137 3620 4134 4330 3a20 3138 3920  42176 A4C0: 189 
+0000f440: 2042 4420 2031 3031 3131 3130 3120 2041   BD  10111101  A
+0000f450: 4253 0a20 2020 2020 2020 2020 2020 2034  BS.            4
+0000f460: 3231 3737 2041 3443 313a 2031 3930 2020  2177 A4C1: 190  
+0000f470: 4245 2020 3130 3131 3131 3130 2020 5045  BE  10111110  PE
+0000f480: 454b 0a20 2020 2020 2020 2020 2020 2034  EK.            4
+0000f490: 3231 3738 2041 3443 323a 2031 3931 2020  2178 A4C2: 191  
+0000f4a0: 4246 2020 3130 3131 3131 3131 2020 494e  BF  10111111  IN
+0000f4b0: 0a20 2020 2020 2020 2020 2020 2034 3231  .            421
+0000f4c0: 3739 2041 3443 333a 2031 3932 2020 4330  79 A4C3: 192  C0
+0000f4d0: 2020 3131 3030 3030 3030 2020 5553 520a    11000000  USR.
+0000f4e0: 2020 2020 2020 2020 2020 2020 3432 3138              4218
+0000f4f0: 3020 4134 4334 3a20 3139 3320 2043 3120  0 A4C4: 193  C1 
+0000f500: 2031 3130 3030 3030 3120 2053 5452 240a   11000001  STR$.
+0000f510: 2020 2020 2020 2020 2020 2020 3432 3138              4218
+0000f520: 3120 4134 4335 3a20 3139 3420 2043 3220  1 A4C5: 194  C2 
+0000f530: 2031 3130 3030 3031 3020 2043 4852 240a   11000010  CHR$.
+0000f540: 2020 2020 2020 2020 2020 2020 3432 3138              4218
+0000f550: 3220 4134 4336 3a20 3139 3520 2043 3320  2 A4C6: 195  C3 
+0000f560: 2031 3130 3030 3031 3120 204e 4f54 0a20   11000011  NOT. 
+0000f570: 2020 2020 2020 2020 2020 2034 3231 3833             42183
+0000f580: 2041 3443 373a 2031 3936 2020 4334 2020   A4C7: 196  C4  
+0000f590: 3131 3030 3031 3030 2020 4249 4e0a 2020  11000100  BIN.  
+0000f5a0: 2020 2020 2020 2020 2020 3432 3138 3420            42184 
+0000f5b0: 4134 4338 3a20 3139 3720 2043 3520 2031  A4C8: 197  C5  1
+0000f5c0: 3130 3030 3130 3120 204f 520a 2020 2020  1000101  OR.    
+0000f5d0: 2020 2020 2020 2020 3432 3138 3520 4134          42185 A4
+0000f5e0: 4339 3a20 3139 3820 2043 3620 2031 3130  C9: 198  C6  110
+0000f5f0: 3030 3131 3020 2041 4e44 0a20 2020 2020  00110  AND.     
+0000f600: 2020 2020 2020 2034 3231 3836 2041 3443         42186 A4C
+0000f610: 413a 2031 3939 2020 4337 2020 3131 3030  A: 199  C7  1100
+0000f620: 3031 3131 2020 3c3d 0a20 2020 2020 2020  0111  <=.       
+0000f630: 2020 2020 2034 3231 3837 2041 3443 423a       42187 A4CB:
+0000f640: 2032 3030 2020 4338 2020 3131 3030 3130   200  C8  110010
+0000f650: 3030 2020 3e3d 0a20 2020 2020 2020 2020  00  >=.         
+0000f660: 2020 2034 3231 3838 2041 3443 433a 2032     42188 A4CC: 2
+0000f670: 3031 2020 4339 2020 3131 3030 3130 3031  01  C9  11001001
+0000f680: 2020 3c3e 0a20 2020 2020 2020 2020 2020    <>.           
+0000f690: 2034 3231 3839 2041 3443 443a 2032 3032   42189 A4CD: 202
+0000f6a0: 2020 4341 2020 3131 3030 3130 3130 2020    CA  11001010  
+0000f6b0: 4c49 4e45 0a20 2020 2020 2020 2020 2020  LINE.           
+0000f6c0: 2034 3231 3930 2041 3443 453a 2032 3033   42190 A4CE: 203
+0000f6d0: 2020 4342 2020 3131 3030 3130 3131 2020    CB  11001011  
+0000f6e0: 5448 454e 0a20 2020 2020 2020 2020 2020  THEN.           
+0000f6f0: 2034 3231 3931 2041 3443 463a 2032 3034   42191 A4CF: 204
+0000f700: 2020 4343 2020 3131 3030 3131 3030 2020    CC  11001100  
+0000f710: 544f 0a20 2020 2020 2020 2020 2020 2034  TO.            4
+0000f720: 3231 3932 2041 3444 303a 2032 3035 2020  2192 A4D0: 205  
+0000f730: 4344 2020 3131 3030 3131 3031 2020 5354  CD  11001101  ST
+0000f740: 4550 0a20 2020 2020 2020 2020 2020 2034  EP.            4
+0000f750: 3231 3933 2041 3444 313a 2032 3036 2020  2193 A4D1: 206  
+0000f760: 4345 2020 3131 3030 3131 3130 2020 4445  CE  11001110  DE
+0000f770: 4620 464e 0a20 2020 2020 2020 2020 2020  F FN.           
+0000f780: 2034 3231 3934 2041 3444 323a 2032 3037   42194 A4D2: 207
+0000f790: 2020 4346 2020 3131 3030 3131 3131 2020    CF  11001111  
+0000f7a0: 4341 540a 2020 2020 2020 2020 2020 2020  CAT.            
+0000f7b0: 3432 3139 3520 4134 4433 3a20 3230 3820  42195 A4D3: 208 
+0000f7c0: 2044 3020 2031 3130 3130 3030 3020 2046   D0  11010000  F
+0000f7d0: 4f52 4d41 540a 2020 2020 2020 2020 2020  ORMAT.          
+0000f7e0: 2020 3432 3139 3620 4134 4434 3a20 3230    42196 A4D4: 20
+0000f7f0: 3920 2044 3120 2031 3130 3130 3030 3120  9  D1  11010001 
+0000f800: 204d 4f56 450a 2020 2020 2020 2020 2020   MOVE.          
+0000f810: 2020 3432 3139 3720 4134 4435 3a20 3231    42197 A4D5: 21
+0000f820: 3020 2044 3220 2031 3130 3130 3031 3020  0  D2  11010010 
+0000f830: 2045 5241 5345 0a20 2020 2020 2020 2020   ERASE.         
+0000f840: 2020 2034 3231 3938 2041 3444 363a 2032     42198 A4D6: 2
+0000f850: 3131 2020 4433 2020 3131 3031 3030 3131  11  D3  11010011
+0000f860: 2020 4f50 454e 2023 0a20 2020 2020 2020    OPEN #.       
+0000f870: 2020 2020 2034 3231 3939 2041 3444 373a       42199 A4D7:
+0000f880: 2032 3132 2020 4434 2020 3131 3031 3031   212  D4  110101
+0000f890: 3030 2020 434c 4f53 4520 230a 2020 2020  00  CLOSE #.    
+0000f8a0: 2020 2020 2020 2020 3432 3230 3020 4134          42200 A4
+0000f8b0: 4438 3a20 3231 3320 2044 3520 2031 3130  D8: 213  D5  110
+0000f8c0: 3130 3130 3120 204d 4552 4745 0a20 2020  10101  MERGE.   
+0000f8d0: 2020 2020 2020 2020 2034 3232 3031 2041           42201 A
+0000f8e0: 3444 393a 2032 3134 2020 4436 2020 3131  4D9: 214  D6  11
+0000f8f0: 3031 3031 3130 2020 5645 5249 4659 0a20  010110  VERIFY. 
+0000f900: 2020 2020 2020 2020 2020 2034 3232 3032             42202
+0000f910: 2041 3444 413a 2032 3135 2020 4437 2020   A4DA: 215  D7  
+0000f920: 3131 3031 3031 3131 2020 4245 4550 0a20  11010111  BEEP. 
+0000f930: 2020 2020 2020 2020 2020 2034 3232 3033             42203
+0000f940: 2041 3444 423a 2032 3136 2020 4438 2020   A4DB: 216  D8  
+0000f950: 3131 3031 3130 3030 2020 4349 5243 4c45  11011000  CIRCLE
+0000f960: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
+0000f970: 3034 2041 3444 433a 2032 3137 2020 4439  04 A4DC: 217  D9
+0000f980: 2020 3131 3031 3130 3031 2020 494e 4b0a    11011001  INK.
+0000f990: 2020 2020 2020 2020 2020 2020 3432 3230              4220
+0000f9a0: 3520 4134 4444 3a20 3231 3820 2044 4120  5 A4DD: 218  DA 
+0000f9b0: 2031 3130 3131 3031 3020 2050 4150 4552   11011010  PAPER
+0000f9c0: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
+0000f9d0: 3036 2041 3444 453a 2032 3139 2020 4442  06 A4DE: 219  DB
+0000f9e0: 2020 3131 3031 3130 3131 2020 464c 4153    11011011  FLAS
+0000f9f0: 480a 2020 2020 2020 2020 2020 2020 3432  H.            42
+0000fa00: 3230 3720 4134 4446 3a20 3232 3020 2044  207 A4DF: 220  D
+0000fa10: 4320 2031 3130 3131 3130 3020 2042 5249  C  11011100  BRI
+0000fa20: 4748 540a 2020 2020 2020 2020 2020 2020  GHT.            
+0000fa30: 3432 3230 3820 4134 4530 3a20 3232 3120  42208 A4E0: 221 
+0000fa40: 2044 4420 2031 3130 3131 3130 3120 2049   DD  11011101  I
+0000fa50: 4e56 4552 5345 0a20 2020 2020 2020 2020  NVERSE.         
+0000fa60: 2020 2034 3232 3039 2041 3445 313a 2032     42209 A4E1: 2
+0000fa70: 3232 2020 4445 2020 3131 3031 3131 3130  22  DE  11011110
+0000fa80: 2020 4f56 4552 0a20 2020 2020 2020 2020    OVER.         
+0000fa90: 2020 2034 3232 3130 2041 3445 323a 2032     42210 A4E2: 2
+0000faa0: 3233 2020 4446 2020 3131 3031 3131 3131  23  DF  11011111
+0000fab0: 2020 4f55 540a 2020 2020 2020 2020 2020    OUT.          
+0000fac0: 2020 3432 3231 3120 4134 4533 3a20 3232    42211 A4E3: 22
+0000fad0: 3420 2045 3020 2031 3131 3030 3030 3020  4  E0  11100000 
+0000fae0: 204c 5052 494e 540a 2020 2020 2020 2020   LPRINT.        
+0000faf0: 2020 2020 3432 3231 3220 4134 4534 3a20      42212 A4E4: 
+0000fb00: 3232 3520 2045 3120 2031 3131 3030 3030  225  E1  1110000
+0000fb10: 3120 204c 4c49 5354 0a20 2020 2020 2020  1  LLIST.       
+0000fb20: 2020 2020 2034 3232 3133 2041 3445 353a       42213 A4E5:
+0000fb30: 2032 3236 2020 4532 2020 3131 3130 3030   226  E2  111000
+0000fb40: 3130 2020 5354 4f50 0a20 2020 2020 2020  10  STOP.       
+0000fb50: 2020 2020 2034 3232 3134 2041 3445 363a       42214 A4E6:
+0000fb60: 2032 3237 2020 4533 2020 3131 3130 3030   227  E3  111000
+0000fb70: 3131 2020 5245 4144 0a20 2020 2020 2020  11  READ.       
+0000fb80: 2020 2020 2034 3232 3135 2041 3445 373a       42215 A4E7:
+0000fb90: 2032 3238 2020 4534 2020 3131 3130 3031   228  E4  111001
+0000fba0: 3030 2020 4441 5441 0a20 2020 2020 2020  00  DATA.       
+0000fbb0: 2020 2020 2034 3232 3136 2041 3445 383a       42216 A4E8:
+0000fbc0: 2032 3239 2020 4535 2020 3131 3130 3031   229  E5  111001
+0000fbd0: 3031 2020 5245 5354 4f52 450a 2020 2020  01  RESTORE.    
+0000fbe0: 2020 2020 2020 2020 3432 3231 3720 4134          42217 A4
+0000fbf0: 4539 3a20 3233 3020 2045 3620 2031 3131  E9: 230  E6  111
+0000fc00: 3030 3131 3020 204e 4557 0a20 2020 2020  00110  NEW.     
+0000fc10: 2020 2020 2020 2034 3232 3138 2041 3445         42218 A4E
+0000fc20: 413a 2032 3331 2020 4537 2020 3131 3130  A: 231  E7  1110
+0000fc30: 3031 3131 2020 424f 5244 4552 0a20 2020  0111  BORDER.   
+0000fc40: 2020 2020 2020 2020 2034 3232 3139 2041           42219 A
+0000fc50: 3445 423a 2032 3332 2020 4538 2020 3131  4EB: 232  E8  11
+0000fc60: 3130 3130 3030 2020 434f 4e54 494e 5545  101000  CONTINUE
+0000fc70: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
+0000fc80: 3230 2041 3445 433a 2032 3333 2020 4539  20 A4EC: 233  E9
+0000fc90: 2020 3131 3130 3130 3031 2020 4449 4d0a    11101001  DIM.
+0000fca0: 2020 2020 2020 2020 2020 2020 3432 3232              4222
+0000fcb0: 3120 4134 4544 3a20 3233 3420 2045 4120  1 A4ED: 234  EA 
+0000fcc0: 2031 3131 3031 3031 3020 2052 454d 0a20   11101010  REM. 
+0000fcd0: 2020 2020 2020 2020 2020 2034 3232 3232             42222
+0000fce0: 2041 3445 453a 2032 3335 2020 4542 2020   A4EE: 235  EB  
+0000fcf0: 3131 3130 3130 3131 2020 464f 520a 2020  11101011  FOR.  
+0000fd00: 2020 2020 2020 2020 2020 3432 3232 3320            42223 
+0000fd10: 4134 4546 3a20 3233 3620 2045 4320 2031  A4EF: 236  EC  1
+0000fd20: 3131 3031 3130 3020 2047 4f20 544f 0a20  1101100  GO TO. 
+0000fd30: 2020 2020 2020 2020 2020 2034 3232 3234             42224
+0000fd40: 2041 3446 303a 2032 3337 2020 4544 2020   A4F0: 237  ED  
+0000fd50: 3131 3130 3131 3031 2020 474f 2053 5542  11101101  GO SUB
+0000fd60: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
+0000fd70: 3235 2041 3446 313a 2032 3338 2020 4545  25 A4F1: 238  EE
+0000fd80: 2020 3131 3130 3131 3130 2020 494e 5055    11101110  INPU
+0000fd90: 540a 2020 2020 2020 2020 2020 2020 3432  T.            42
+0000fda0: 3232 3620 4134 4632 3a20 3233 3920 2045  226 A4F2: 239  E
+0000fdb0: 4620 2031 3131 3031 3131 3120 204c 4f41  F  11101111  LOA
+0000fdc0: 440a 2020 2020 2020 2020 2020 2020 3432  D.            42
+0000fdd0: 3232 3720 4134 4633 3a20 3234 3020 2046  227 A4F3: 240  F
+0000fde0: 3020 2031 3131 3130 3030 3020 204c 4953  0  11110000  LIS
+0000fdf0: 540a 2020 2020 2020 2020 2020 2020 3432  T.            42
+0000fe00: 3232 3820 4134 4634 3a20 3234 3120 2046  228 A4F4: 241  F
+0000fe10: 3120 2031 3131 3130 3030 3120 204c 4554  1  11110001  LET
+0000fe20: 0a20 2020 2020 2020 2020 2020 2034 3232  .            422
+0000fe30: 3239 2041 3446 353a 2032 3432 2020 4632  29 A4F5: 242  F2
+0000fe40: 2020 3131 3131 3030 3130 2020 5041 5553    11110010  PAUS
+0000fe50: 450a 2020 2020 2020 2020 2020 2020 3432  E.            42
+0000fe60: 3233 3020 4134 4636 3a20 3234 3320 2046  230 A4F6: 243  F
+0000fe70: 3320 2031 3131 3130 3031 3120 204e 4558  3  11110011  NEX
+0000fe80: 540a 2020 2020 2020 2020 2020 2020 3432  T.            42
+0000fe90: 3233 3120 4134 4637 3a20 3234 3420 2046  231 A4F7: 244  F
+0000fea0: 3420 2031 3131 3130 3130 3020 2050 4f4b  4  11110100  POK
+0000feb0: 450a 2020 2020 2020 2020 2020 2020 3432  E.            42
+0000fec0: 3233 3220 4134 4638 3a20 3234 3520 2046  232 A4F8: 245  F
+0000fed0: 3520 2031 3131 3130 3130 3120 2050 5249  5  11110101  PRI
+0000fee0: 4e54 0a20 2020 2020 2020 2020 2020 2034  NT.            4
+0000fef0: 3232 3333 2041 3446 393a 2032 3436 2020  2233 A4F9: 246  
+0000ff00: 4636 2020 3131 3131 3031 3130 2020 504c  F6  11110110  PL
+0000ff10: 4f54 0a20 2020 2020 2020 2020 2020 2034  OT.            4
+0000ff20: 3232 3334 2041 3446 413a 2032 3437 2020  2234 A4FA: 247  
+0000ff30: 4637 2020 3131 3131 3031 3131 2020 5255  F7  11110111  RU
+0000ff40: 4e0a 2020 2020 2020 2020 2020 2020 3432  N.            42
+0000ff50: 3233 3520 4134 4642 3a20 3234 3820 2046  235 A4FB: 248  F
+0000ff60: 3820 2031 3131 3131 3030 3020 2053 4156  8  11111000  SAV
+0000ff70: 450a 2020 2020 2020 2020 2020 2020 3432  E.            42
+0000ff80: 3233 3620 4134 4643 3a20 3234 3920 2046  236 A4FC: 249  F
+0000ff90: 3920 2031 3131 3131 3030 3120 2052 414e  9  11111001  RAN
+0000ffa0: 444f 4d49 5a45 0a20 2020 2020 2020 2020  DOMIZE.         
+0000ffb0: 2020 2034 3232 3337 2041 3446 443a 2032     42237 A4FD: 2
+0000ffc0: 3530 2020 4641 2020 3131 3131 3130 3130  50  FA  11111010
+0000ffd0: 2020 4946 0a20 2020 2020 2020 2020 2020    IF.           
+0000ffe0: 2034 3232 3338 2041 3446 453a 2032 3531   42238 A4FE: 251
+0000fff0: 2020 4642 2020 3131 3131 3130 3131 2020    FB  11111011  
+00010000: 434c 530a 2020 2020 2020 2020 2020 2020  CLS.            
+00010010: 3432 3233 3920 4134 4646 3a20 3235 3220  42239 A4FF: 252 
+00010020: 2046 4320 2031 3131 3131 3130 3020 2044   FC  11111100  D
+00010030: 5241 570a 2020 2020 2020 2020 2020 2020  RAW.            
+00010040: 3432 3234 3020 4135 3030 3a20 3235 3320  42240 A500: 253 
+00010050: 2046 4420 2031 3131 3131 3130 3120 2043   FD  11111101  C
+00010060: 4c45 4152 0a20 2020 2020 2020 2020 2020  LEAR.           
+00010070: 2034 3232 3431 2041 3530 313a 2032 3534   42241 A501: 254
+00010080: 2020 4645 2020 3131 3131 3131 3130 2020    FE  11111110  
+00010090: 5245 5455 524e 0a20 2020 2020 2020 2020  RETURN.         
+000100a0: 2020 2034 3232 3432 2041 3530 323a 2032     42242 A502: 2
+000100b0: 3535 2020 4646 2020 3131 3131 3131 3131  55  FF  11111111
+000100c0: 2020 434f 5059 0a20 2020 2020 2020 2022    COPY.        "
+000100d0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+000100e0: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
+000100f0: 7870 5f6f 7574 7075 742c 2027 2d2d 7065  xp_output, '--pe
+00010100: 656b 207b 7d2d 7b7d 272e 666f 726d 6174  ek {}-{}'.format
+00010110: 2861 6464 7265 7373 2c20 6164 6472 6573  (address, addres
+00010120: 7320 2b20 6c65 6e28 746f 6b65 6e73 2920  s + len(tokens) 
+00010130: 2d20 3129 290a 0a20 2020 2064 6566 2074  - 1))..    def t
+00010140: 6573 745f 6f70 7469 6f6e 5f70 5f77 6974  est_option_p_wit
+00010150: 685f 6e6f 6e73 7461 6e64 6172 645f 6368  h_nonstandard_ch
+00010160: 6172 6163 7465 7273 2873 656c 6629 3a0a  aracters(self):.
+00010170: 2020 2020 2020 2020 7261 6d20 3d20 5b30          ram = [0
+00010180: 5d20 2a20 3439 3135 320a 2020 2020 2020  ] * 49152.      
+00010190: 2020 6164 6472 6573 7320 3d20 3434 3633    address = 4463
+000101a0: 370a 2020 2020 2020 2020 6368 6172 7320  7.        chars 
+000101b0: 3d20 5b39 342c 2039 362c 2031 3237 5d0a  = [94, 96, 127].
+000101c0: 2020 2020 2020 2020 7261 6d5b 6164 6472          ram[addr
+000101d0: 6573 7320 2d20 3136 3338 343a 6164 6472  ess - 16384:addr
+000101e0: 6573 7320 2d20 3136 3338 3420 2b20 6c65  ess - 16384 + le
+000101f0: 6e28 6368 6172 7329 5d20 3d20 6368 6172  n(chars)] = char
+00010200: 730a 2020 2020 2020 2020 6578 705f 6f75  s.        exp_ou
+00010210: 7470 7574 203d 2022 2222 0a20 2020 2020  tput = """.     
+00010220: 2020 2020 2020 2034 3436 3337 2041 4535         44637 AE5
+00010230: 443a 2020 3934 2020 3545 2020 3031 3031  D:  94  5E  0101
+00010240: 3131 3130 2020 e286 910a 2020 2020 2020  1110  ....      
+00010250: 2020 2020 2020 3434 3633 3820 4145 3545        44638 AE5E
+00010260: 3a20 2039 3620 2036 3020 2030 3131 3030  :  96  60  01100
+00010270: 3030 3020 20c2 a30a 2020 2020 2020 2020  000  ...        
+00010280: 2020 2020 3434 3633 3920 4145 3546 3a20      44639 AE5F: 
+00010290: 3132 3720 2037 4620 2030 3131 3131 3131  127  7F  0111111
+000102a0: 3120 20c2 a90a 2020 2020 2020 2020 2222  1  ...        ""
+000102b0: 220a 2020 2020 2020 2020 7365 6c66 2e5f  ".        self._
+000102c0: 7465 7374 5f73 6e61 2872 616d 2c20 6578  test_sna(ram, ex
+000102d0: 705f 6f75 7470 7574 2c20 272d 7020 7b7d  p_output, '-p {}
+000102e0: 2d7b 7d27 2e66 6f72 6d61 7428 6164 6472  -{}'.format(addr
+000102f0: 6573 732c 2061 6464 7265 7373 202b 206c  ess, address + l
+00010300: 656e 2863 6861 7273 2920 2d20 3129 290a  en(chars) - 1)).
+00010310: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
+00010320: 7469 6f6e 5f70 6565 6b5f 7769 7468 5f69  tion_peek_with_i
+00010330: 6e76 616c 6964 5f61 6464 7265 7373 5f72  nvalid_address_r
+00010340: 616e 6765 2873 656c 6629 3a0a 2020 2020  ange(self):.    
+00010350: 2020 2020 6578 705f 6572 726f 7220 3d20      exp_error = 
+00010360: 2749 6e76 616c 6964 2061 6464 7265 7373  'Invalid address
+00010370: 2072 616e 6765 270a 2020 2020 2020 2020   range'.        
+00010380: 7365 6c66 2e5f 7465 7374 5f62 6164 5f73  self._test_bad_s
+00010390: 7065 6328 272d 2d70 6565 6b27 2c20 2758  pec('--peek', 'X
+000103a0: 272c 2065 7870 5f65 7272 6f72 290a 2020  ', exp_error).  
+000103b0: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+000103c0: 5f62 6164 5f73 7065 6328 272d 7027 2c20  _bad_spec('-p', 
+000103d0: 2733 3237 3638 2d3f 272c 2065 7870 5f65  '32768-?', exp_e
+000103e0: 7272 6f72 290a 2020 2020 2020 2020 7365  rror).        se
+000103f0: 6c66 2e5f 7465 7374 5f62 6164 5f73 7065  lf._test_bad_spe
+00010400: 6328 272d 2d70 6565 6b27 2c20 2733 3237  c('--peek', '327
+00010410: 3638 2d33 3238 3638 2d71 272c 2065 7870  68-32868-q', exp
+00010420: 5f65 7272 6f72 290a 2020 2020 2020 2020  _error).        
+00010430: 7365 6c66 2e5f 7465 7374 5f62 6164 5f73  self._test_bad_s
+00010440: 7065 6328 272d 7027 2c20 2733 3237 3638  pec('-p', '32768
+00010450: 2d33 3238 3638 2d32 2d33 272c 2065 7870  -32868-2-3', exp
+00010460: 5f65 7272 6f72 290a 0a20 2020 2064 6566  _error)..    def
+00010470: 2074 6573 745f 6f70 7469 6f6e 5f50 2873   test_option_P(s
+00010480: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+00010490: 6d20 3d20 5b30 5d20 2a20 3439 3135 320a  m = [0] * 49152.
+000104a0: 2020 2020 2020 2020 6865 6164 6572 3220          header2 
+000104b0: 3d20 5b30 5d20 2a20 340a 2020 2020 2020  = [0] * 4.      
+000104c0: 2020 6865 6164 6572 325b 325d 203d 2031    header2[2] = 1
+000104d0: 2020 2020 2020 2020 2020 2020 2320 506f              # Po
+000104e0: 7274 2030 7837 6666 6420 2870 6167 6520  rt 0x7ffd (page 
+000104f0: 6d61 7070 6564 2074 6f20 3439 3135 322d  mapped to 49152-
+00010500: 3635 3533 3529 0a20 2020 2020 2020 2062  65535).        b
+00010510: 616e 6b73 203d 205b 305d 202a 2028 3520  anks = [0] * (5 
+00010520: 2a20 3136 3338 3429 2023 2042 616e 6b73  * 16384) # Banks
+00010530: 2030 2c20 332c 2034 2c20 362c 2037 0a20   0, 3, 4, 6, 7. 
+00010540: 2020 2020 2020 2062 616e 6b73 5b2d 315d         banks[-1]
+00010550: 203d 2032 3535 2020 2020 2020 2020 2020   = 255          
+00010560: 2023 204c 6173 7420 6279 7465 206f 6620   # Last byte of 
+00010570: 6261 6e6b 2037 0a20 2020 2020 2020 2065  bank 7.        e
+00010580: 7870 5f6f 7574 7075 7420 3d20 2236 3535  xp_output = "655
+00010590: 3335 2046 4646 463a 2032 3535 2020 4646  35 FFFF: 255  FF
+000105a0: 2020 3131 3131 3131 3131 2020 434f 5059    11111111  COPY
+000105b0: 220a 2020 2020 2020 2020 666f 7220 6f70  ".        for op
+000105c0: 7469 6f6e 2069 6e20 2827 2d50 272c 2027  tion in ('-P', '
+000105d0: 2d2d 7061 6765 2729 3a0a 2020 2020 2020  --page'):.      
+000105e0: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+000105f0: 5f73 6e61 2872 616d 202b 2068 6561 6465  _sna(ram + heade
+00010600: 7232 202b 2062 616e 6b73 2c20 6578 705f  r2 + banks, exp_
+00010610: 6f75 7470 7574 2c20 277b 7d20 3720 2d70  output, '{} 7 -p
+00010620: 2036 3535 3335 272e 666f 726d 6174 286f   65535'.format(o
+00010630: 7074 696f 6e29 290a 0a20 2020 2040 7061  ption))..    @pa
+00010640: 7463 682e 6f62 6a65 6374 2873 6e61 7069  tch.object(snapi
+00010650: 6e66 6f2c 2027 6765 745f 636f 6e66 6967  nfo, 'get_config
+00010660: 272c 206d 6f63 6b5f 636f 6e66 6967 290a  ', mock_config).
+00010670: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+00010680: 696f 6e5f 7368 6f77 5f63 6f6e 6669 6728  ion_show_config(
+00010690: 7365 6c66 293a 0a20 2020 2020 2020 206f  self):.        o
+000106a0: 7574 7075 742c 2065 7272 6f72 203d 2073  utput, error = s
+000106b0: 656c 662e 7275 6e5f 736e 6170 696e 666f  elf.run_snapinfo
+000106c0: 2827 2d2d 7368 6f77 2d63 6f6e 6669 6727  ('--show-config'
+000106d0: 2c20 6361 7463 685f 6578 6974 3d30 290a  , catch_exit=0).
+000106e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000106f0: 6572 7445 7175 616c 2865 7272 6f72 2c20  ertEqual(error, 
+00010700: 2727 290a 2020 2020 2020 2020 6578 705f  '').        exp_
+00010710: 6f75 7470 7574 203d 2072 2222 220a 2020  output = r""".  
+00010720: 2020 2020 2020 2020 2020 5b73 6e61 7069            [snapi
+00010730: 6e66 6f5d 0a20 2020 2020 2020 2020 2020  nfo].           
+00010740: 2045 6467 6541 7474 7269 6275 7465 733d   EdgeAttributes=
+00010750: 0a20 2020 2020 2020 2020 2020 2047 7261  .            Gra
+00010760: 7068 4174 7472 6962 7574 6573 3d0a 2020  phAttributes=.  
+00010770: 2020 2020 2020 2020 2020 4e6f 6465 4174            NodeAt
+00010780: 7472 6962 7574 6573 3d73 6861 7065 3d72  tributes=shape=r
+00010790: 6563 6f72 640a 2020 2020 2020 2020 2020  ecord.          
+000107a0: 2020 4e6f 6465 4964 3d7b 6164 6472 6573    NodeId={addres
+000107b0: 737d 0a20 2020 2020 2020 2020 2020 204e  s}.            N
+000107c0: 6f64 654c 6162 656c 3d22 7b61 6464 7265  odeLabel="{addre
+000107d0: 7373 7d20 7b61 6464 7265 7373 3a30 3458  ss} {address:04X
+000107e0: 7d5c 6e7b 6c61 6265 6c7d 220a 2020 2020  }\n{label}".    
+000107f0: 2020 2020 2020 2020 5065 656b 3d7b 6164          Peek={ad
+00010800: 6472 6573 733a 3e35 7d20 7b61 6464 7265  dress:>5} {addre
+00010810: 7373 3a30 3458 7d3a 207b 7661 6c75 653a  ss:04X}: {value:
+00010820: 3e33 7d20 207b 7661 6c75 653a 3032 587d  >3}  {value:02X}
+00010830: 2020 7b76 616c 7565 3a30 3862 7d20 207b    {value:08b}  {
+00010840: 6368 6172 7d0a 2020 2020 2020 2020 2020  char}.          
+00010850: 2020 576f 7264 3d7b 6164 6472 6573 733a    Word={address:
+00010860: 3e35 7d20 7b61 6464 7265 7373 3a30 3458  >5} {address:04X
+00010870: 7d3a 207b 7661 6c75 653a 3e35 7d20 207b  }: {value:>5}  {
+00010880: 7661 6c75 653a 3034 587d 0a20 2020 2020  value:04X}.     
+00010890: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+000108a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000108b0: 6465 6465 6e74 2865 7870 5f6f 7574 7075  dedent(exp_outpu
+000108c0: 7429 2e73 7472 6970 2829 2c20 6f75 7470  t).strip(), outp
+000108d0: 7574 2e72 7374 7269 7028 2929 0a0a 2020  ut.rstrip())..  
+000108e0: 2020 6465 6620 7465 7374 5f6f 7074 696f    def test_optio
+000108f0: 6e5f 7368 6f77 5f63 6f6e 6669 675f 7265  n_show_config_re
+00010900: 6164 5f66 726f 6d5f 6669 6c65 2873 656c  ad_from_file(sel
+00010910: 6629 3a0a 2020 2020 2020 2020 696e 6920  f):.        ini 
+00010920: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
+00010930: 2020 5b73 6e61 7069 6e66 6f5d 0a20 2020    [snapinfo].   
+00010940: 2020 2020 2020 2020 204e 6f64 6541 7474           NodeAtt
+00010950: 7269 6275 7465 733d 7368 6170 653d 626f  ributes=shape=bo
+00010960: 780a 2020 2020 2020 2020 2020 2020 4e6f  x.            No
+00010970: 6465 4c61 6265 6c3d 227b 6c61 6265 6c7d  deLabel="{label}
+00010980: 220a 2020 2020 2020 2020 2020 2020 5065  ".            Pe
+00010990: 656b 3d24 7b61 6464 7265 7373 3a30 3458  ek=${address:04X
+000109a0: 7d2c 247b 7661 6c75 653a 3032 587d 0a20  },${value:02X}. 
+000109b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000109c0: 2020 2073 656c 662e 7772 6974 655f 7465     self.write_te
+000109d0: 7874 5f66 696c 6528 6465 6465 6e74 2869  xt_file(dedent(i
+000109e0: 6e69 292e 7374 7269 7028 292c 2027 736b  ni).strip(), 'sk
+000109f0: 6f6f 6c6b 6974 2e69 6e69 2729 0a20 2020  oolkit.ini').   
+00010a00: 2020 2020 206f 7574 7075 742c 2065 7272       output, err
+00010a10: 6f72 203d 2073 656c 662e 7275 6e5f 736e  or = self.run_sn
+00010a20: 6170 696e 666f 2827 2d2d 7368 6f77 2d63  apinfo('--show-c
+00010a30: 6f6e 6669 6727 2c20 6361 7463 685f 6578  onfig', catch_ex
+00010a40: 6974 3d30 290a 2020 2020 2020 2020 7365  it=0).        se
+00010a50: 6c66 2e61 7373 6572 7445 7175 616c 2865  lf.assertEqual(e
+00010a60: 7272 6f72 2c20 2727 290a 2020 2020 2020  rror, '').      
+00010a70: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
+00010a80: 2222 0a20 2020 2020 2020 2020 2020 205b  "".            [
+00010a90: 736e 6170 696e 666f 5d0a 2020 2020 2020  snapinfo].      
+00010aa0: 2020 2020 2020 4564 6765 4174 7472 6962        EdgeAttrib
+00010ab0: 7574 6573 3d0a 2020 2020 2020 2020 2020  utes=.          
+00010ac0: 2020 4772 6170 6841 7474 7269 6275 7465    GraphAttribute
+00010ad0: 733d 0a20 2020 2020 2020 2020 2020 204e  s=.            N
+00010ae0: 6f64 6541 7474 7269 6275 7465 733d 7368  odeAttributes=sh
+00010af0: 6170 653d 626f 780a 2020 2020 2020 2020  ape=box.        
+00010b00: 2020 2020 4e6f 6465 4964 3d7b 6164 6472      NodeId={addr
+00010b10: 6573 737d 0a20 2020 2020 2020 2020 2020  ess}.           
+00010b20: 204e 6f64 654c 6162 656c 3d22 7b6c 6162   NodeLabel="{lab
+00010b30: 656c 7d22 0a20 2020 2020 2020 2020 2020  el}".           
+00010b40: 2050 6565 6b3d 247b 6164 6472 6573 733a   Peek=${address:
+00010b50: 3034 587d 2c24 7b76 616c 7565 3a30 3258  04X},${value:02X
+00010b60: 7d0a 2020 2020 2020 2020 2020 2020 576f  }.            Wo
+00010b70: 7264 3d7b 6164 6472 6573 733a 3e35 7d20  rd={address:>5} 
+00010b80: 7b61 6464 7265 7373 3a30 3458 7d3a 207b  {address:04X}: {
+00010b90: 7661 6c75 653a 3e35 7d20 207b 7661 6c75  value:>5}  {valu
+00010ba0: 653a 3034 587d 0a20 2020 2020 2020 2022  e:04X}.        "
+00010bb0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00010bc0: 6173 7365 7274 4571 7561 6c28 6465 6465  assertEqual(dede
+00010bd0: 6e74 2865 7870 5f6f 7574 7075 7429 2e73  nt(exp_output).s
+00010be0: 7472 6970 2829 2c20 6f75 7470 7574 2e72  trip(), output.r
+00010bf0: 7374 7269 7028 2929 0a0a 2020 2020 6465  strip())..    de
+00010c00: 6620 7465 7374 5f6f 7074 696f 6e5f 745f  f test_option_t_
+00010c10: 7769 7468 5f73 696e 676c 655f 6f63 6375  with_single_occu
+00010c20: 7272 656e 6365 2873 656c 6629 3a0a 2020  rrence(self):.  
+00010c30: 2020 2020 2020 7261 6d20 3d20 5b30 5d20        ram = [0] 
+00010c40: 2a20 3439 3135 320a 2020 2020 2020 2020  * 49152.        
+00010c50: 7465 7874 203d 2027 666f 6f27 0a20 2020  text = 'foo'.   
+00010c60: 2020 2020 2061 6464 7265 7373 203d 2034       address = 4
+00010c70: 3335 3637 0a20 2020 2020 2020 2072 616d  3567.        ram
+00010c80: 5b61 6464 7265 7373 202d 2031 3633 3834  [address - 16384
+00010c90: 3a61 6464 7265 7373 202d 2031 3633 3834  :address - 16384
+00010ca0: 202b 206c 656e 2874 6578 7429 5d20 3d20   + len(text)] = 
+00010cb0: 5b6f 7264 2863 2920 666f 7220 6320 696e  [ord(c) for c in
+00010cc0: 2074 6578 745d 0a20 2020 2020 2020 2065   text].        e
+00010cd0: 7870 5f6f 7574 7075 7420 3d20 277b 307d  xp_output = '{0}
+00010ce0: 2d7b 317d 207b 303a 3034 587d 2d7b 313a  -{1} {0:04X}-{1:
+00010cf0: 3034 587d 3a20 7b32 7d27 2e66 6f72 6d61  04X}: {2}'.forma
+00010d00: 7428 6164 6472 6573 732c 2061 6464 7265  t(address, addre
+00010d10: 7373 202b 206c 656e 2874 6578 7429 202d  ss + len(text) -
+00010d20: 2031 2c20 7465 7874 290a 2020 2020 2020   1, text).      
+00010d30: 2020 7365 6c66 2e5f 7465 7374 5f73 6e61    self._test_sna
+00010d40: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
+00010d50: 2c20 272d 7420 7b7d 272e 666f 726d 6174  , '-t {}'.format
+00010d60: 2874 6578 7429 290a 0a20 2020 2064 6566  (text))..    def
+00010d70: 2074 6573 745f 6f70 7469 6f6e 5f66 696e   test_option_fin
+00010d80: 645f 7465 7874 5f77 6974 685f 6d75 6c74  d_text_with_mult
+00010d90: 6970 6c65 5f6f 6363 7572 7265 6e63 6573  iple_occurrences
+00010da0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00010db0: 7261 6d20 3d20 5b30 5d20 2a20 3439 3135  ram = [0] * 4915
+00010dc0: 320a 2020 2020 2020 2020 7465 7874 203d  2.        text =
+00010dd0: 2027 6261 7227 0a20 2020 2020 2020 2074   'bar'.        t
+00010de0: 6578 745f 6269 6e20 3d20 5b6f 7264 2863  ext_bin = [ord(c
+00010df0: 2920 666f 7220 6320 696e 2074 6578 745d  ) for c in text]
+00010e00: 0a20 2020 2020 2020 2061 6464 7265 7373  .        address
+00010e10: 6573 203d 2028 3332 3533 362c 2034 3335  es = (32536, 435
+00010e20: 3637 2c20 3631 3433 3729 0a20 2020 2020  67, 61437).     
+00010e30: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+00010e40: 2727 0a20 2020 2020 2020 2066 6f72 2061  ''.        for a
+00010e50: 2069 6e20 6164 6472 6573 7365 733a 0a20   in addresses:. 
+00010e60: 2020 2020 2020 2020 2020 2072 616d 5b61             ram[a
+00010e70: 202d 2031 3633 3834 3a61 202d 2031 3633   - 16384:a - 163
+00010e80: 3834 202b 206c 656e 2874 6578 7429 5d20  84 + len(text)] 
+00010e90: 3d20 7465 7874 5f62 696e 0a20 2020 2020  = text_bin.     
+00010ea0: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+00010eb0: 7420 2b3d 2027 7b30 7d2d 7b31 7d20 7b30  t += '{0}-{1} {0
+00010ec0: 3a30 3458 7d2d 7b31 3a30 3458 7d3a 207b  :04X}-{1:04X}: {
+00010ed0: 327d 5c6e 272e 666f 726d 6174 2861 2c20  2}\n'.format(a, 
+00010ee0: 6120 2b20 6c65 6e28 7465 7874 2920 2d20  a + len(text) - 
+00010ef0: 312c 2074 6578 7429 0a20 2020 2020 2020  1, text).       
+00010f00: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+00010f10: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+00010f20: 2027 2d2d 6669 6e64 2d74 6578 7420 7b7d   '--find-text {}
+00010f30: 272e 666f 726d 6174 2874 6578 7429 290a  '.format(text)).
+00010f40: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
+00010f50: 7469 6f6e 5f74 5f77 6974 685f 6e6f 5f6f  tion_t_with_no_o
+00010f60: 6363 7572 7265 6e63 6573 2873 656c 6629  ccurrences(self)
+00010f70: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
+00010f80: 5b30 5d20 2a20 3439 3135 320a 2020 2020  [0] * 49152.    
+00010f90: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+00010fa0: 2027 270a 2020 2020 2020 2020 7365 6c66   ''.        self
+00010fb0: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+00010fc0: 6578 705f 6f75 7470 7574 2c20 272d 7420  exp_output, '-t 
+00010fd0: 6e6f 7768 6572 6527 290a 0a20 2020 2064  nowhere')..    d
+00010fe0: 6566 2074 6573 745f 6f70 7469 6f6e 5f74  ef test_option_t
+00010ff0: 5f77 6974 685f 6164 6472 6573 735f 6265  _with_address_be
+00011000: 6c6f 775f 3136 3338 3428 7365 6c66 293a  low_16384(self):
+00011010: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+00011020: 5b30 5d20 2a20 3235 360a 2020 2020 2020  [0] * 256.      
+00011030: 2020 6164 6472 6573 7320 3d20 3230 340a    address = 204.
+00011040: 2020 2020 2020 2020 7465 7874 203d 2027          text = '
+00011050: 6865 6c6c 6f27 0a20 2020 2020 2020 2064  hello'.        d
+00011060: 6174 615b 6164 6472 6573 733a 6164 6472  ata[address:addr
+00011070: 6573 7320 2b20 6c65 6e28 7465 7874 295d  ess + len(text)]
+00011080: 203d 205b 6f72 6428 6329 2066 6f72 2063   = [ord(c) for c
+00011090: 2069 6e20 7465 7874 5d0a 2020 2020 2020   in text].      
+000110a0: 2020 6269 6e66 696c 6520 3d20 7365 6c66    binfile = self
+000110b0: 2e77 7269 7465 5f62 696e 5f66 696c 6528  .write_bin_file(
+000110c0: 6461 7461 2c20 7375 6666 6978 3d27 2e62  data, suffix='.b
+000110d0: 696e 2729 0a20 2020 2020 2020 2065 7870  in').        exp
+000110e0: 5f6f 7574 7075 7420 3d20 6627 3230 342d  _output = f'204-
+000110f0: 3230 3820 3030 4343 2d30 3044 303a 207b  208 00CC-00D0: {
+00011100: 7465 7874 7d27 0a20 2020 2020 2020 206f  text}'.        o
+00011110: 7574 7075 742c 2065 7272 6f72 203d 2073  utput, error = s
+00011120: 656c 662e 7275 6e5f 736e 6170 696e 666f  elf.run_snapinfo
+00011130: 2866 272d 7420 7b74 6578 747d 202d 6f20  (f'-t {text} -o 
+00011140: 3020 7b62 696e 6669 6c65 7d27 290a 2020  0 {binfile}').  
+00011150: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00011160: 7445 7175 616c 2865 7272 6f72 2c20 2727  tEqual(error, ''
+00011170: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00011180: 7373 6572 7445 7175 616c 286f 7574 7075  ssertEqual(outpu
+00011190: 742e 7374 7269 7028 292c 2065 7870 5f6f  t.strip(), exp_o
+000111a0: 7574 7075 7429 0a0a 2020 2020 6465 6620  utput)..    def 
+000111b0: 7465 7374 5f6f 7074 696f 6e5f 5428 7365  test_option_T(se
+000111c0: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+000111d0: 203d 205b 305d 202a 2034 3931 3532 0a20   = [0] * 49152. 
+000111e0: 2020 2020 2020 2074 696c 655f 6164 6472         tile_addr
+000111f0: 203d 2035 3432 3132 0a20 2020 2020 2020   = 54212.       
+00011200: 2074 696c 655f 6461 7461 203d 205b 302c   tile_data = [0,
+00011210: 2032 342c 2031 322c 2036 2c20 3132 372c   24, 12, 6, 127,
+00011220: 2036 2c20 3132 2c20 3234 5d0a 2020 2020   6, 12, 24].    
+00011230: 2020 2020 782c 2079 203d 2033 2c20 370a      x, y = 3, 7.
+00011240: 2020 2020 2020 2020 6466 5f61 6464 7220          df_addr 
+00011250: 3d20 3136 3338 3420 2b20 3230 3438 202a  = 16384 + 2048 *
+00011260: 2028 7920 2f2f 2038 2920 2b20 3332 202a   (y // 8) + 32 *
+00011270: 2028 7920 2620 3729 202b 2078 0a20 2020   (y & 7) + x.   
+00011280: 2020 2020 2072 616d 5b64 665f 6164 6472       ram[df_addr
+00011290: 202d 2031 3633 3834 3a64 665f 6164 6472   - 16384:df_addr
+000112a0: 202d 2031 3433 3336 3a32 3536 5d20 3d20   - 14336:256] = 
+000112b0: 7469 6c65 5f64 6174 610a 2020 2020 2020  tile_data.      
+000112c0: 2020 7261 6d5b 7469 6c65 5f61 6464 7220    ram[tile_addr 
+000112d0: 2d20 3136 3338 343a 7469 6c65 5f61 6464  - 16384:tile_add
+000112e0: 7220 2d20 3136 3337 365d 203d 2074 696c  r - 16376] = til
+000112f0: 655f 6461 7461 0a20 2020 2020 2020 2065  e_data.        e
+00011300: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+00011310: 2020 2020 2020 2020 2020 2020 7c20 2020              |   
+00011320: 2020 2020 207c 0a20 2020 2020 2020 2020       |.         
+00011330: 2020 207c 2020 202a 2a20 2020 7c0a 2020     |   **   |.  
+00011340: 2020 2020 2020 2020 2020 7c20 2020 202a            |    *
+00011350: 2a20 207c 0a20 2020 2020 2020 2020 2020  *  |.           
+00011360: 207c 2020 2020 202a 2a20 7c0a 2020 2020   |     ** |.    
+00011370: 2020 2020 2020 2020 7c20 2a2a 2a2a 2a2a          | ******
+00011380: 2a7c 0a20 2020 2020 2020 2020 2020 207c  *|.            |
+00011390: 2020 2020 202a 2a20 7c0a 2020 2020 2020       ** |.      
+000113a0: 2020 2020 2020 7c20 2020 202a 2a20 207c        |    **  |
+000113b0: 0a20 2020 2020 2020 2020 2020 207c 2020  .            |  
+000113c0: 202a 2a20 2020 7c0a 2020 2020 2020 2020   **   |.        
+000113d0: 2020 2020 3534 3231 322d 3534 3231 392d      54212-54219-
+000113e0: 3120 4433 4334 2d44 3343 422d 313a 2030  1 D3C4-D3CB-1: 0
+000113f0: 2c32 342c 3132 2c36 2c31 3237 2c36 2c31  ,24,12,6,127,6,1
+00011400: 322c 3234 0a20 2020 2020 2020 2022 2222  2,24.        """
+00011410: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00011420: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
+00011430: 5f6f 7574 7075 742c 2027 2d54 207b 7d2c  _output, '-T {},
+00011440: 7b7d 272e 666f 726d 6174 2878 2c20 7929  {}'.format(x, y)
+00011450: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00011460: 6f70 7469 6f6e 5f66 696e 645f 7469 6c65  option_find_tile
+00011470: 5f77 6974 685f 7374 6570 2873 656c 6629  _with_step(self)
+00011480: 3a0a 2020 2020 2020 2020 7261 6d20 3d20  :.        ram = 
+00011490: 5b30 5d20 2a20 3439 3135 320a 2020 2020  [0] * 49152.    
+000114a0: 2020 2020 7469 6c65 5f61 6464 7220 3d20      tile_addr = 
+000114b0: 3237 3438 330a 2020 2020 2020 2020 7469  27483.        ti
+000114c0: 6c65 5f64 6174 6120 3d20 5b30 2c20 3132  le_data = [0, 12
+000114d0: 372c 2031 3237 2c20 3936 2c20 3936 2c20  7, 127, 96, 96, 
+000114e0: 3130 332c 2031 3033 2c20 3130 325d 0a20  103, 103, 102]. 
+000114f0: 2020 2020 2020 2078 2c20 7920 3d20 392c         x, y = 9,
+00011500: 2031 350a 2020 2020 2020 2020 7374 6570   15.        step
+00011510: 203d 2032 0a20 2020 2020 2020 2064 665f   = 2.        df_
+00011520: 6164 6472 203d 2031 3633 3834 202b 2032  addr = 16384 + 2
+00011530: 3034 3820 2a20 2879 202f 2f20 3829 202b  048 * (y // 8) +
+00011540: 2033 3220 2a20 2879 2026 2037 2920 2b20   32 * (y & 7) + 
+00011550: 780a 2020 2020 2020 2020 7261 6d5b 6466  x.        ram[df
+00011560: 5f61 6464 7220 2d20 3136 3338 343a 6466  _addr - 16384:df
+00011570: 5f61 6464 7220 2d20 3134 3333 363a 3235  _addr - 14336:25
+00011580: 365d 203d 2074 696c 655f 6461 7461 0a20  6] = tile_data. 
+00011590: 2020 2020 2020 2072 616d 5b74 696c 655f         ram[tile_
+000115a0: 6164 6472 202d 2031 3633 3834 3a74 696c  addr - 16384:til
+000115b0: 655f 6164 6472 202d 2031 3633 3834 202b  e_addr - 16384 +
+000115c0: 2038 202a 2073 7465 703a 7374 6570 5d20   8 * step:step] 
+000115d0: 3d20 7469 6c65 5f64 6174 610a 2020 2020  = tile_data.    
+000115e0: 2020 2020 6578 705f 6f75 7470 7574 203d      exp_output =
+000115f0: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+00011600: 207c 2020 2020 2020 2020 7c0a 2020 2020   |        |.    
+00011610: 2020 2020 2020 2020 7c20 2a2a 2a2a 2a2a          | ******
+00011620: 2a7c 0a20 2020 2020 2020 2020 2020 207c  *|.            |
+00011630: 202a 2a2a 2a2a 2a2a 7c0a 2020 2020 2020   *******|.      
+00011640: 2020 2020 2020 7c20 2a2a 2020 2020 207c        | **     |
+00011650: 0a20 2020 2020 2020 2020 2020 207c 202a  .            | *
+00011660: 2a20 2020 2020 7c0a 2020 2020 2020 2020  *     |.        
+00011670: 2020 2020 7c20 2a2a 2020 2a2a 2a7c 0a20      | **  ***|. 
+00011680: 2020 2020 2020 2020 2020 207c 202a 2a20             | ** 
+00011690: 202a 2a2a 7c0a 2020 2020 2020 2020 2020   ***|.          
+000116a0: 2020 7c20 2a2a 2020 2a2a 207c 0a20 2020    | **  ** |.   
+000116b0: 2020 2020 2020 2020 2032 3734 3833 2d32           27483-2
+000116c0: 3734 3937 2d32 2036 4235 422d 3642 3639  7497-2 6B5B-6B69
+000116d0: 2d32 3a20 302c 3132 372c 3132 372c 3936  -2: 0,127,127,96
+000116e0: 2c39 362c 3130 332c 3130 332c 3130 320a  ,96,103,103,102.
+000116f0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00011700: 2020 2020 7365 6c66 2e5f 7465 7374 5f73      self._test_s
+00011710: 6e61 2872 616d 2c20 6578 705f 6f75 7470  na(ram, exp_outp
+00011720: 7574 2c20 272d 2d66 696e 642d 7469 6c65  ut, '--find-tile
+00011730: 207b 7d2c 7b7d 2d7b 7d27 2e66 6f72 6d61   {},{}-{}'.forma
+00011740: 7428 782c 2079 2c20 7374 6570 2929 0a0a  t(x, y, step))..
+00011750: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+00011760: 696f 6e5f 545f 7769 7468 5f73 7465 705f  ion_T_with_step_
+00011770: 7261 6e67 6528 7365 6c66 293a 0a20 2020  range(self):.   
+00011780: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+00011790: 2034 3931 3532 0a20 2020 2020 2020 2074   49152.        t
+000117a0: 696c 655f 6164 6472 203d 2034 3639 3837  ile_addr = 46987
+000117b0: 0a20 2020 2020 2020 2074 696c 655f 6461  .        tile_da
+000117c0: 7461 203d 205b 302c 2032 3534 2c20 3235  ta = [0, 254, 25
+000117d0: 342c 2036 2c20 362c 2032 3330 2c20 3233  4, 6, 6, 230, 23
+000117e0: 302c 2031 3032 5d0a 2020 2020 2020 2020  0, 102].        
+000117f0: 782c 2079 203d 2032 372c 2032 0a20 2020  x, y = 27, 2.   
+00011800: 2020 2020 2073 7465 7020 3d20 330a 2020       step = 3.  
+00011810: 2020 2020 2020 6466 5f61 6464 7220 3d20        df_addr = 
+00011820: 3136 3338 3420 2b20 3230 3438 202a 2028  16384 + 2048 * (
+00011830: 7920 2f2f 2038 2920 2b20 3332 202a 2028  y // 8) + 32 * (
+00011840: 7920 2620 3729 202b 2078 0a20 2020 2020  y & 7) + x.     
+00011850: 2020 2072 616d 5b64 665f 6164 6472 202d     ram[df_addr -
+00011860: 2031 3633 3834 3a64 665f 6164 6472 202d   16384:df_addr -
+00011870: 2031 3433 3336 3a32 3536 5d20 3d20 7469   14336:256] = ti
+00011880: 6c65 5f64 6174 610a 2020 2020 2020 2020  le_data.        
+00011890: 7261 6d5b 7469 6c65 5f61 6464 7220 2d20  ram[tile_addr - 
+000118a0: 3136 3338 343a 7469 6c65 5f61 6464 7220  16384:tile_addr 
+000118b0: 2d20 3136 3338 3420 2b20 3820 2a20 7374  - 16384 + 8 * st
+000118c0: 6570 3a73 7465 705d 203d 2074 696c 655f  ep:step] = tile_
+000118d0: 6461 7461 0a20 2020 2020 2020 2065 7870  data.        exp
+000118e0: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
+000118f0: 2020 2020 2020 2020 2020 7c20 2020 2020            |     
+00011900: 2020 207c 0a20 2020 2020 2020 2020 2020     |.           
+00011910: 207c 2a2a 2a2a 2a2a 2a20 7c0a 2020 2020   |******* |.    
+00011920: 2020 2020 2020 2020 7c2a 2a2a 2a2a 2a2a          |*******
+00011930: 207c 0a20 2020 2020 2020 2020 2020 207c   |.            |
+00011940: 2020 2020 202a 2a20 7c0a 2020 2020 2020       ** |.      
+00011950: 2020 2020 2020 7c20 2020 2020 2a2a 207c        |     ** |
+00011960: 0a20 2020 2020 2020 2020 2020 207c 2a2a  .            |**
+00011970: 2a20 202a 2a20 7c0a 2020 2020 2020 2020  *  ** |.        
+00011980: 2020 2020 7c2a 2a2a 2020 2a2a 207c 0a20      |***  ** |. 
+00011990: 2020 2020 2020 2020 2020 207c 202a 2a20             | ** 
+000119a0: 202a 2a20 7c0a 2020 2020 2020 2020 2020   ** |.          
+000119b0: 2020 3436 3938 372d 3437 3030 382d 3320    46987-47008-3 
+000119c0: 4237 3842 2d42 3741 302d 333a 2030 2c32  B78B-B7A0-3: 0,2
+000119d0: 3534 2c32 3534 2c36 2c36 2c32 3330 2c32  54,254,6,6,230,2
+000119e0: 3330 2c31 3032 0a20 2020 2020 2020 2022  30,102.        "
+000119f0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00011a00: 5f74 6573 745f 736e 6128 7261 6d2c 2065  _test_sna(ram, e
+00011a10: 7870 5f6f 7574 7075 742c 2027 2d54 207b  xp_output, '-T {
+00011a20: 7d2c 7b7d 2d32 2d33 272e 666f 726d 6174  },{}-2-3'.format
+00011a30: 2878 2c20 7929 290a 0a20 2020 2064 6566  (x, y))..    def
+00011a40: 2074 6573 745f 6f70 7469 6f6e 5f54 5f77   test_option_T_w
+00011a50: 6974 685f 6865 785f 7374 6570 5f72 616e  ith_hex_step_ran
+00011a60: 6765 5f6c 696d 6974 7328 7365 6c66 293a  ge_limits(self):
+00011a70: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
+00011a80: 305d 202a 2034 3931 3532 0a20 2020 2020  0] * 49152.     
+00011a90: 2020 2074 696c 655f 6164 6472 203d 2035     tile_addr = 5
+00011aa0: 3131 3332 0a20 2020 2020 2020 2074 696c  1132.        til
+00011ab0: 655f 6461 7461 203d 205b 3130 322c 2031  e_data = [102, 1
+00011ac0: 3033 2c20 3130 332c 2039 362c 2039 362c  03, 103, 96, 96,
+00011ad0: 2031 3237 2c20 3132 372c 2030 5d0a 2020   127, 127, 0].  
+00011ae0: 2020 2020 2020 782c 2079 203d 2032 372c        x, y = 27,
+00011af0: 2032 0a20 2020 2020 2020 2073 7465 7020   2.        step 
+00011b00: 3d20 330a 2020 2020 2020 2020 6466 5f61  = 3.        df_a
+00011b10: 6464 7220 3d20 3136 3338 3420 2b20 3230  ddr = 16384 + 20
+00011b20: 3438 202a 2028 7920 2f2f 2038 2920 2b20  48 * (y // 8) + 
+00011b30: 3332 202a 2028 7920 2620 3729 202b 2078  32 * (y & 7) + x
+00011b40: 0a20 2020 2020 2020 2072 616d 5b64 665f  .        ram[df_
+00011b50: 6164 6472 202d 2031 3633 3834 3a64 665f  addr - 16384:df_
+00011b60: 6164 6472 202d 2031 3433 3336 3a32 3536  addr - 14336:256
+00011b70: 5d20 3d20 7469 6c65 5f64 6174 610a 2020  ] = tile_data.  
+00011b80: 2020 2020 2020 7261 6d5b 7469 6c65 5f61        ram[tile_a
+00011b90: 6464 7220 2d20 3136 3338 343a 7469 6c65  ddr - 16384:tile
+00011ba0: 5f61 6464 7220 2d20 3136 3338 3420 2b20  _addr - 16384 + 
+00011bb0: 3820 2a20 7374 6570 3a73 7465 705d 203d  8 * step:step] =
+00011bc0: 2074 696c 655f 6461 7461 0a20 2020 2020   tile_data.     
+00011bd0: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+00011be0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+00011bf0: 7c20 2a2a 2020 2a2a 207c 0a20 2020 2020  | **  ** |.     
+00011c00: 2020 2020 2020 207c 202a 2a20 202a 2a2a         | **  ***
+00011c10: 7c0a 2020 2020 2020 2020 2020 2020 7c20  |.            | 
+00011c20: 2a2a 2020 2a2a 2a7c 0a20 2020 2020 2020  **  ***|.       
+00011c30: 2020 2020 207c 202a 2a20 2020 2020 7c0a       | **     |.
+00011c40: 2020 2020 2020 2020 2020 2020 7c20 2a2a              | **
+00011c50: 2020 2020 207c 0a20 2020 2020 2020 2020       |.         
+00011c60: 2020 207c 202a 2a2a 2a2a 2a2a 7c0a 2020     | *******|.  
+00011c70: 2020 2020 2020 2020 2020 7c20 2a2a 2a2a            | ****
+00011c80: 2a2a 2a7c 0a20 2020 2020 2020 2020 2020  ***|.           
+00011c90: 207c 2020 2020 2020 2020 7c0a 2020 2020   |        |.    
+00011ca0: 2020 2020 2020 2020 3531 3133 322d 3531          51132-51
+00011cb0: 3135 332d 3320 4337 4243 2d43 3744 312d  153-3 C7BC-C7D1-
+00011cc0: 333a 2031 3032 2c31 3033 2c31 3033 2c39  3: 102,103,103,9
+00011cd0: 362c 3936 2c31 3237 2c31 3237 2c30 0a20  6,96,127,127,0. 
+00011ce0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00011cf0: 2020 2073 656c 662e 5f74 6573 745f 736e     self._test_sn
+00011d00: 6128 7261 6d2c 2065 7870 5f6f 7574 7075  a(ram, exp_outpu
+00011d10: 742c 2027 2d54 207b 7d2c 7b7d 2d30 7830  t, '-T {},{}-0x0
+00011d20: 322d 3078 3033 272e 666f 726d 6174 2878  2-0x03'.format(x
+00011d30: 2c20 7929 290a 0a20 2020 2064 6566 2074  , y))..    def t
+00011d40: 6573 745f 6f70 7469 6f6e 5f66 696e 645f  est_option_find_
+00011d50: 7469 6c65 5f77 6974 685f 696e 7661 6c69  tile_with_invali
+00011d60: 645f 636f 6f72 6469 6e61 7465 7328 7365  d_coordinates(se
+00011d70: 6c66 293a 0a20 2020 2020 2020 2065 7870  lf):.        exp
+00011d80: 5f65 7272 6f72 203d 2027 496e 7661 6c69  _error = 'Invali
+00011d90: 6420 7469 6c65 2063 6f6f 7264 696e 6174  d tile coordinat
+00011da0: 6573 270a 2020 2020 2020 2020 7365 6c66  es'.        self
+00011db0: 2e5f 7465 7374 5f62 6164 5f73 7065 6328  ._test_bad_spec(
+00011dc0: 272d 2d66 696e 642d 7469 6c65 272c 2027  '--find-tile', '
+00011dd0: 782c 3027 2c20 6578 705f 6572 726f 7229  x,0', exp_error)
+00011de0: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00011df0: 6573 745f 6261 645f 7370 6563 2827 2d54  est_bad_spec('-T
+00011e00: 272c 2027 302c 7927 2c20 6578 705f 6572  ', '0,y', exp_er
+00011e10: 726f 7229 0a20 2020 2020 2020 2073 656c  ror).        sel
+00011e20: 662e 5f74 6573 745f 6261 645f 7370 6563  f._test_bad_spec
+00011e30: 2827 2d2d 6669 6e64 2d74 696c 6527 2c20  ('--find-tile', 
+00011e40: 273f 2c21 272c 2065 7870 5f65 7272 6f72  '?,!', exp_error
+00011e50: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+00011e60: 7465 7374 5f62 6164 5f73 7065 6328 272d  test_bad_spec('-
+00011e70: 5427 2c20 2733 332c 3127 2c20 6578 705f  T', '33,1', exp_
+00011e80: 6572 726f 7229 0a20 2020 2020 2020 2073  error).        s
+00011e90: 656c 662e 5f74 6573 745f 6261 645f 7370  elf._test_bad_sp
+00011ea0: 6563 2827 2d2d 6669 6e64 2d74 696c 6527  ec('--find-tile'
+00011eb0: 2c20 2732 2c32 3727 2c20 6578 705f 6572  , '2,27', exp_er
+00011ec0: 726f 7229 0a0a 2020 2020 6465 6620 7465  ror)..    def te
+00011ed0: 7374 5f6f 7074 696f 6e5f 6669 6e64 5f74  st_option_find_t
+00011ee0: 696c 655f 7769 7468 5f69 6e76 616c 6964  ile_with_invalid
+00011ef0: 5f73 7465 7028 7365 6c66 293a 0a20 2020  _step(self):.   
+00011f00: 2020 2020 2065 7870 5f65 7272 6f72 203d       exp_error =
+00011f10: 2027 496e 7661 6c69 6420 6469 7374 616e   'Invalid distan
+00011f20: 6365 3a20 7b7d 270a 2020 2020 2020 2020  ce: {}'.        
+00011f30: 7365 6c66 2e5f 7465 7374 5f62 6164 5f73  self._test_bad_s
+00011f40: 7065 6328 272d 2d66 696e 642d 7469 6c65  pec('--find-tile
+00011f50: 272c 2027 322c 332d 7827 2c20 6578 705f  ', '2,3-x', exp_
+00011f60: 6572 726f 722e 666f 726d 6174 2827 7827  error.format('x'
+00011f70: 292c 2046 616c 7365 290a 2020 2020 2020  ), False).      
+00011f80: 2020 7365 6c66 2e5f 7465 7374 5f62 6164    self._test_bad
+00011f90: 5f73 7065 6328 272d 5427 2c20 2735 2c36  _spec('-T', '5,6
+00011fa0: 2d31 2d79 272c 2065 7870 5f65 7272 6f72  -1-y', exp_error
+00011fb0: 2e66 6f72 6d61 7428 2731 2d79 2729 2c20  .format('1-y'), 
+00011fc0: 4661 6c73 6529 0a20 2020 2020 2020 2073  False).        s
+00011fd0: 656c 662e 5f74 6573 745f 6261 645f 7370  elf._test_bad_sp
+00011fe0: 6563 2827 2d2d 6669 6e64 2d74 696c 6527  ec('--find-tile'
+00011ff0: 2c20 2738 2c39 2d7a 2d35 272c 2065 7870  , '8,9-z-5', exp
+00012000: 5f65 7272 6f72 2e66 6f72 6d61 7428 277a  _error.format('z
+00012010: 2d35 2729 2c20 4661 6c73 6529 0a20 2020  -5'), False).   
+00012020: 2020 2020 2073 656c 662e 5f74 6573 745f       self._test_
+00012030: 6261 645f 7370 6563 2827 2d54 272c 2027  bad_spec('-T', '
+00012040: 3131 2c31 322d 712d 3f27 2c20 6578 705f  11,12-q-?', exp_
+00012050: 6572 726f 722e 666f 726d 6174 2827 712d  error.format('q-
+00012060: 3f27 292c 2046 616c 7365 290a 0a20 2020  ?'), False)..   
+00012070: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
+00012080: 5f56 2873 656c 6629 3a0a 2020 2020 2020  _V(self):.      
+00012090: 2020 666f 7220 6f70 7469 6f6e 2069 6e20    for option in 
+000120a0: 2827 2d56 272c 2027 2d2d 7665 7273 696f  ('-V', '--versio
+000120b0: 6e27 293a 0a20 2020 2020 2020 2020 2020  n'):.           
+000120c0: 206f 7574 7075 742c 2065 7272 6f72 203d   output, error =
+000120d0: 2073 656c 662e 7275 6e5f 736e 6170 696e   self.run_snapin
+000120e0: 666f 286f 7074 696f 6e2c 2063 6174 6368  fo(option, catch
+000120f0: 5f65 7869 743d 3029 0a20 2020 2020 2020  _exit=0).       
+00012100: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00012110: 4571 7561 6c28 2753 6b6f 6f6c 4b69 7420  Equal('SkoolKit 
+00012120: 7b7d 5c6e 272e 666f 726d 6174 2856 4552  {}\n'.format(VER
+00012130: 5349 4f4e 292c 206f 7574 7075 7429 0a0a  SION), output)..
+00012140: 2020 2020 6465 6620 7465 7374 5f6f 7074      def test_opt
+00012150: 696f 6e5f 775f 7769 7468 5f73 696e 676c  ion_w_with_singl
+00012160: 655f 6164 6472 6573 7328 7365 6c66 293a  e_address(self):
+00012170: 0a20 2020 2020 2020 2072 616d 203d 205b  .        ram = [
+00012180: 305d 202a 2034 3931 3532 0a20 2020 2020  0] * 49152.     
+00012190: 2020 2061 6464 7265 7373 203d 2034 3637     address = 467
+000121a0: 3331 0a20 2020 2020 2020 2072 616d 5b61  31.        ram[a
+000121b0: 6464 7265 7373 202d 2031 3633 3834 3a61  ddress - 16384:a
+000121c0: 6464 7265 7373 202d 2031 3633 3832 5d20  ddress - 16382] 
+000121d0: 3d20 5b34 372c 2031 305d 0a20 2020 2020  = [47, 10].     
+000121e0: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+000121f0: 2734 3637 3331 2042 3638 423a 2020 3236  '46731 B68B:  26
+00012200: 3037 2020 3041 3246 270a 2020 2020 2020  07  0A2F'.      
+00012210: 2020 7365 6c66 2e5f 7465 7374 5f73 6e61    self._test_sna
+00012220: 2872 616d 2c20 6578 705f 6f75 7470 7574  (ram, exp_output
+00012230: 2c20 272d 7720 7b7d 272e 666f 726d 6174  , '-w {}'.format
+00012240: 2861 6464 7265 7373 2929 0a0a 2020 2020  (address))..    
+00012250: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+00012260: 776f 7264 5f77 6974 685f 6164 6472 6573  word_with_addres
+00012270: 735f 7261 6e67 6528 7365 6c66 293a 0a20  s_range(self):. 
+00012280: 2020 2020 2020 2072 616d 203d 205b 305d         ram = [0]
+00012290: 202a 2034 3931 3532 0a20 2020 2020 2020   * 49152.       
+000122a0: 2061 6464 7265 7373 3120 3d20 3537 3131   address1 = 5711
+000122b0: 360a 2020 2020 2020 2020 6164 6472 6573  6.        addres
+000122c0: 7332 203d 2035 3731 3232 0a20 2020 2020  s2 = 57122.     
+000122d0: 2020 2072 616d 5b61 6464 7265 7373 3120     ram[address1 
+000122e0: 2d20 3136 3338 343a 6164 6472 6573 7332  - 16384:address2
+000122f0: 202d 3136 3338 325d 203d 205b 3237 2c20   -16382] = [27, 
+00012300: 3435 2c20 3133 322c 2031 392c 2031 382c  45, 132, 19, 18,
+00012310: 2033 2c20 3233 2c20 305d 0a20 2020 2020   3, 23, 0].     
+00012320: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+00012330: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+00012340: 3537 3131 3620 4446 3143 3a20 3131 3534  57116 DF1C: 1154
+00012350: 3720 2032 4431 420a 2020 2020 2020 2020  7  2D1B.        
+00012360: 2020 2020 3537 3131 3820 4446 3145 3a20      57118 DF1E: 
+00012370: 2034 3939 3620 2031 3338 340a 2020 2020   4996  1384.    
+00012380: 2020 2020 2020 2020 3537 3132 3020 4446          57120 DF
+00012390: 3230 3a20 2020 3738 3620 2030 3331 320a  20:   786  0312.
+000123a0: 2020 2020 2020 2020 2020 2020 3537 3132              5712
+000123b0: 3220 4446 3232 3a20 2020 2032 3320 2030  2 DF22:    23  0
+000123c0: 3031 370a 2020 2020 2020 2020 2222 220a  017.        """.
+000123d0: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+000123e0: 7374 5f73 6e61 2872 616d 2c20 6578 705f  st_sna(ram, exp_
+000123f0: 6f75 7470 7574 2c20 272d 2d77 6f72 6420  output, '--word 
+00012400: 7b7d 2d7b 7d27 2e66 6f72 6d61 7428 6164  {}-{}'.format(ad
+00012410: 6472 6573 7331 2c20 6164 6472 6573 7332  dress1, address2
+00012420: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
+00012430: 5f6f 7074 696f 6e5f 775f 7769 7468 5f61  _option_w_with_a
+00012440: 6464 7265 7373 5f72 616e 6765 5f61 6e64  ddress_range_and
+00012450: 5f73 7465 7028 7365 6c66 293a 0a20 2020  _step(self):.   
+00012460: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+00012470: 2034 3931 3532 0a20 2020 2020 2020 2061   49152.        a
+00012480: 6464 7265 7373 3120 3d20 3336 3837 340a  ddress1 = 36874.
+00012490: 2020 2020 2020 2020 6164 6472 6573 7332          address2
+000124a0: 203d 2033 3638 3830 0a20 2020 2020 2020   = 36880.       
+000124b0: 2073 7465 7020 3d20 330a 2020 2020 2020   step = 3.      
+000124c0: 2020 7261 6d5b 6164 6472 6573 7331 202d    ram[address1 -
+000124d0: 2031 3633 3834 3a61 6464 7265 7373 3220   16384:address2 
+000124e0: 2d31 3633 3832 5d20 3d20 5b31 2c20 302c  -16382] = [1, 0,
+000124f0: 2030 2c20 3231 352c 2032 2c20 302c 2037   0, 215, 2, 0, 7
+00012500: 2c20 3131 335d 0a20 2020 2020 2020 2065  , 113].        e
+00012510: 7870 5f6f 7574 7075 7420 3d20 2222 220a  xp_output = """.
+00012520: 2020 2020 2020 2020 2020 2020 3336 3837              3687
+00012530: 3420 3930 3041 3a20 2020 2020 3120 2030  4 900A:     1  0
+00012540: 3030 310a 2020 2020 2020 2020 2020 2020  001.            
+00012550: 3336 3837 3720 3930 3044 3a20 2020 3732  36877 900D:   72
+00012560: 3720 2030 3244 370a 2020 2020 2020 2020  7  02D7.        
+00012570: 2020 2020 3336 3838 3020 3930 3130 3a20      36880 9010: 
+00012580: 3238 3933 3520 2037 3130 370a 2020 2020  28935  7107.    
+00012590: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000125a0: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
+000125b0: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+000125c0: 272d 7720 7b7d 2d7b 7d2d 7b7d 272e 666f  '-w {}-{}-{}'.fo
+000125d0: 726d 6174 2861 6464 7265 7373 312c 2061  rmat(address1, a
+000125e0: 6464 7265 7373 322c 2073 7465 7029 290a  ddress2, step)).
+000125f0: 0a20 2020 2064 6566 2074 6573 745f 6f70  .    def test_op
+00012600: 7469 6f6e 5f77 5f77 6974 685f 6865 7861  tion_w_with_hexa
+00012610: 6465 6369 6d61 6c5f 7661 6c75 6573 2873  decimal_values(s
+00012620: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+00012630: 6d20 3d20 5b30 5d20 2a20 3439 3135 320a  m = [0] * 49152.
+00012640: 2020 2020 2020 2020 6164 6472 6573 7331          address1
+00012650: 203d 2030 7839 3030 610a 2020 2020 2020   = 0x900a.      
+00012660: 2020 6164 6472 6573 7332 203d 2030 7839    address2 = 0x9
+00012670: 3031 300a 2020 2020 2020 2020 7374 6570  010.        step
+00012680: 203d 2030 7830 330a 2020 2020 2020 2020   = 0x03.        
+00012690: 7261 6d5b 6164 6472 6573 7331 202d 2031  ram[address1 - 1
+000126a0: 3633 3834 3a61 6464 7265 7373 3220 2d31  6384:address2 -1
+000126b0: 3633 3832 5d20 3d20 5b31 2c20 302c 2030  6382] = [1, 0, 0
+000126c0: 2c20 3231 352c 2032 2c20 302c 2037 2c20  , 215, 2, 0, 7, 
+000126d0: 3131 335d 0a20 2020 2020 2020 2065 7870  113].        exp
+000126e0: 5f6f 7574 7075 7420 3d20 2222 220a 2020  _output = """.  
+000126f0: 2020 2020 2020 2020 2020 3336 3837 3420            36874 
+00012700: 3930 3041 3a20 2020 2020 3120 2030 3030  900A:     1  000
+00012710: 310a 2020 2020 2020 2020 2020 2020 3336  1.            36
+00012720: 3837 3720 3930 3044 3a20 2020 3732 3720  877 900D:   727 
+00012730: 2030 3244 370a 2020 2020 2020 2020 2020   02D7.          
+00012740: 2020 3336 3838 3020 3930 3130 3a20 3238    36880 9010: 28
+00012750: 3933 3520 2037 3130 370a 2020 2020 2020  935  7107.      
+00012760: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+00012770: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
+00012780: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
+00012790: 7720 247b 3a30 3458 7d2d 247b 3a30 3478  w ${:04X}-${:04x
+000127a0: 7d2d 247b 3a58 7d27 2e66 6f72 6d61 7428  }-${:X}'.format(
+000127b0: 6164 6472 6573 7331 2c20 6164 6472 6573  address1, addres
+000127c0: 7332 2c20 7374 6570 2929 0a0a 2020 2020  s2, step))..    
+000127d0: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+000127e0: 775f 7769 7468 5f30 785f 6865 7861 6465  w_with_0x_hexade
+000127f0: 6369 6d61 6c5f 7661 6c75 6573 2873 656c  cimal_values(sel
+00012800: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
+00012810: 3d20 5b30 5d20 2a20 3439 3135 320a 2020  = [0] * 49152.  
+00012820: 2020 2020 2020 6164 6472 6573 7331 203d        address1 =
+00012830: 2030 7839 3030 610a 2020 2020 2020 2020   0x900a.        
+00012840: 6164 6472 6573 7332 203d 2030 7839 3031  address2 = 0x901
+00012850: 300a 2020 2020 2020 2020 7374 6570 203d  0.        step =
+00012860: 2030 7830 330a 2020 2020 2020 2020 7261   0x03.        ra
+00012870: 6d5b 6164 6472 6573 7331 202d 2031 3633  m[address1 - 163
+00012880: 3834 3a61 6464 7265 7373 3220 2d31 3633  84:address2 -163
+00012890: 3832 5d20 3d20 5b31 2c20 302c 2030 2c20  82] = [1, 0, 0, 
+000128a0: 3231 352c 2032 2c20 302c 2037 2c20 3131  215, 2, 0, 7, 11
+000128b0: 335d 0a20 2020 2020 2020 2065 7870 5f6f  3].        exp_o
+000128c0: 7574 7075 7420 3d20 2222 220a 2020 2020  utput = """.    
+000128d0: 2020 2020 2020 2020 3336 3837 3420 3930          36874 90
+000128e0: 3041 3a20 2020 2020 3120 2030 3030 310a  0A:     1  0001.
+000128f0: 2020 2020 2020 2020 2020 2020 3336 3837              3687
+00012900: 3720 3930 3044 3a20 2020 3732 3720 2030  7 900D:   727  0
+00012910: 3244 370a 2020 2020 2020 2020 2020 2020  2D7.            
+00012920: 3336 3838 3020 3930 3130 3a20 3238 3933  36880 9010: 2893
+00012930: 3520 2037 3130 370a 2020 2020 2020 2020  5  7107.        
+00012940: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+00012950: 2e5f 7465 7374 5f73 6e61 2872 616d 2c20  ._test_sna(ram, 
+00012960: 6578 705f 6f75 7470 7574 2c20 272d 7720  exp_output, '-w 
+00012970: 3078 7b3a 3034 587d 2d30 787b 3a30 3478  0x{:04X}-0x{:04x
+00012980: 7d2d 3078 7b3a 587d 272e 666f 726d 6174  }-0x{:X}'.format
+00012990: 2861 6464 7265 7373 312c 2061 6464 7265  (address1, addre
+000129a0: 7373 322c 2073 7465 7029 290a 0a20 2020  ss2, step))..   
+000129b0: 2064 6566 2074 6573 745f 6f70 7469 6f6e   def test_option
+000129c0: 5f77 6f72 645f 6d75 6c74 6970 6c65 2873  _word_multiple(s
+000129d0: 656c 6629 3a0a 2020 2020 2020 2020 7261  elf):.        ra
+000129e0: 6d20 3d20 5b30 5d20 2a20 3439 3135 320a  m = [0] * 49152.
+000129f0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
+00012a00: 3d20 5b5d 0a20 2020 2020 2020 2061 6464  = [].        add
+00012a10: 7265 7373 6573 203d 2028 3337 3136 322c  resses = (37162,
+00012a20: 2034 3231 3734 2c20 3536 3131 3829 0a20   42174, 56118). 
+00012a30: 2020 2020 2020 2066 6f72 2061 2069 6e20         for a in 
+00012a40: 6164 6472 6573 7365 733a 0a20 2020 2020  addresses:.     
+00012a50: 2020 2020 2020 2072 616d 5b61 202d 2031         ram[a - 1
+00012a60: 3633 3834 3a61 202d 2031 3633 3832 5d20  6384:a - 16382] 
+00012a70: 3d20 5b61 202f 2f20 3235 362c 2061 2025  = [a // 256, a %
+00012a80: 2032 3536 5d0a 2020 2020 2020 2020 2020   256].          
+00012a90: 2020 6f70 7469 6f6e 732e 6170 7065 6e64    options.append
+00012aa0: 2827 2d2d 776f 7264 207b 7d27 2e66 6f72  ('--word {}'.for
+00012ab0: 6d61 7428 6129 290a 2020 2020 2020 2020  mat(a)).        
+00012ac0: 6578 705f 6f75 7470 7574 203d 2022 2222  exp_output = """
+00012ad0: 0a20 2020 2020 2020 2020 2020 2033 3731  .            371
+00012ae0: 3632 2039 3132 413a 2031 3038 3937 2020  62 912A: 10897  
+00012af0: 3241 3931 0a20 2020 2020 2020 2020 2020  2A91.           
+00012b00: 2034 3231 3734 2041 3442 453a 2034 3838   42174 A4BE: 488
+00012b10: 3034 2020 4245 4134 0a20 2020 2020 2020  04  BEA4.       
+00012b20: 2020 2020 2035 3631 3138 2044 4233 363a       56118 DB36:
+00012b30: 2031 3430 3433 2020 3336 4442 0a20 2020   14043  36DB.   
+00012b40: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00012b50: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+00012b60: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+00012b70: 2027 2027 2e6a 6f69 6e28 6f70 7469 6f6e   ' '.join(option
+00012b80: 7329 290a 0a20 2020 2064 6566 2074 6573  s))..    def tes
+00012b90: 745f 6f70 7469 6f6e 5f77 5f77 6974 685f  t_option_w_with_
+00012ba0: 6164 6472 6573 7365 735f 6265 6c6f 775f  addresses_below_
+00012bb0: 3130 3030 3028 7365 6c66 293a 0a20 2020  10000(self):.   
+00012bc0: 2020 2020 2072 616d 203d 205b 305d 202a       ram = [0] *
+00012bd0: 2031 3030 3032 0a20 2020 2020 2020 2072   10002.        r
+00012be0: 616d 5b31 3a33 5d20 3d20 5b31 2c20 315d  am[1:3] = [1, 1]
+00012bf0: 0a20 2020 2020 2020 2072 616d 5b31 313a  .        ram[11:
+00012c00: 3133 5d20 3d20 5b32 2c20 325d 0a20 2020  13] = [2, 2].   
+00012c10: 2020 2020 2072 616d 5b39 3939 3a31 3030       ram[999:100
+00012c20: 315d 203d 205b 332c 2033 5d0a 2020 2020  1] = [3, 3].    
+00012c30: 2020 2020 7261 6d5b 3939 3939 3a31 3030      ram[9999:100
+00012c40: 3031 5d20 3d20 5b34 2c20 345d 0a20 2020  01] = [4, 4].   
+00012c50: 2020 2020 2072 616d 5b31 3030 3031 3a31       ram[10001:1
+00012c60: 3030 3033 5d20 3d20 5b35 2c20 355d 0a20  0003] = [5, 5]. 
+00012c70: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+00012c80: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
+00012c90: 2020 2020 2020 2020 3120 3030 3031 3a20          1 0001: 
+00012ca0: 2020 3235 3720 2030 3130 310a 2020 2020    257  0101.    
+00012cb0: 2020 2020 2020 2020 2020 2031 3120 3030             11 00
+00012cc0: 3042 3a20 2020 3531 3420 2030 3230 320a  0B:   514  0202.
+00012cd0: 2020 2020 2020 2020 2020 2020 2020 3939                99
+00012ce0: 3920 3033 4537 3a20 2020 3737 3120 2030  9 03E7:   771  0
+00012cf0: 3330 330a 2020 2020 2020 2020 2020 2020  303.            
+00012d00: 2039 3939 3920 3237 3046 3a20 2031 3032   9999 270F:  102
+00012d10: 3820 2030 3430 340a 2020 2020 2020 2020  8  0404.        
+00012d20: 2020 2020 3130 3030 3120 3237 3131 3a20      10001 2711: 
+00012d30: 2031 3238 3520 2030 3530 350a 2020 2020   1285  0505.    
+00012d40: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00012d50: 7365 6c66 2e5f 7465 7374 5f62 696e 2872  self._test_bin(r
+00012d60: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+00012d70: 272d 6f20 3020 2d77 2031 202d 7720 3131  '-o 0 -w 1 -w 11
+00012d80: 202d 7720 3939 3920 2d77 2039 3939 3920   -w 999 -w 9999 
+00012d90: 2d77 2031 3030 3031 2729 0a0a 2020 2020  -w 10001')..    
+00012da0: 6465 6620 7465 7374 5f6f 7074 696f 6e5f  def test_option_
+00012db0: 776f 7264 5f77 6974 685f 696e 7661 6c69  word_with_invali
+00012dc0: 645f 6164 6472 6573 735f 7261 6e67 6528  d_address_range(
+00012dd0: 7365 6c66 293a 0a20 2020 2020 2020 2065  self):.        e
+00012de0: 7870 5f65 7272 6f72 203d 2027 496e 7661  xp_error = 'Inva
+00012df0: 6c69 6420 6164 6472 6573 7320 7261 6e67  lid address rang
+00012e00: 6527 0a20 2020 2020 2020 2073 656c 662e  e'.        self.
+00012e10: 5f74 6573 745f 6261 645f 7370 6563 2827  _test_bad_spec('
+00012e20: 2d2d 776f 7264 272c 2027 5827 2c20 6578  --word', 'X', ex
+00012e30: 705f 6572 726f 7229 0a20 2020 2020 2020  p_error).       
+00012e40: 2073 656c 662e 5f74 6573 745f 6261 645f   self._test_bad_
+00012e50: 7370 6563 2827 2d77 272c 2027 3332 3736  spec('-w', '3276
+00012e60: 382d 3f27 2c20 6578 705f 6572 726f 7229  8-?', exp_error)
+00012e70: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00012e80: 6573 745f 6261 645f 7370 6563 2827 2d2d  est_bad_spec('--
+00012e90: 776f 7264 272c 2027 3332 3736 382d 3332  word', '32768-32
+00012ea0: 3836 382d 7127 2c20 6578 705f 6572 726f  868-q', exp_erro
+00012eb0: 7229 0a20 2020 2020 2020 2073 656c 662e  r).        self.
+00012ec0: 5f74 6573 745f 6261 645f 7370 6563 2827  _test_bad_spec('
+00012ed0: 2d77 272c 2027 3332 3736 382d 3332 3836  -w', '32768-3286
+00012ee0: 382d 322d 3327 2c20 6578 705f 6572 726f  8-2-3', exp_erro
+00012ef0: 7229 0a0a 2020 2020 6465 6620 7465 7374  r)..    def test
+00012f00: 5f63 6f6e 6669 675f 4564 6765 4174 7472  _config_EdgeAttr
+00012f10: 6962 7574 6573 2873 656c 6629 3a0a 2020  ibutes(self):.  
+00012f20: 2020 2020 2020 7261 6d20 3d20 5b32 342c        ram = [24,
+00012f30: 2030 2c20 3230 315d 202b 205b 305d 202a   0, 201] + [0] *
+00012f40: 2034 3931 3439 0a20 2020 2020 2020 2063   49149.        c
+00012f50: 746c 203d 2022 2222 0a20 2020 2020 2020  tl = """.       
+00012f60: 2020 2020 2040 2031 3633 3834 206c 6162       @ 16384 lab
+00012f70: 656c 3d53 5441 5254 494e 470a 2020 2020  el=STARTING.    
+00012f80: 2020 2020 2020 2020 6320 3136 3338 340a          c 16384.
+00012f90: 2020 2020 2020 2020 2020 2020 4020 3136              @ 16
+00012fa0: 3338 3620 6c61 6265 6c3d 444f 4e45 0a20  386 label=DONE. 
+00012fb0: 2020 2020 2020 2020 2020 2063 2031 3633             c 163
+00012fc0: 3836 0a20 2020 2020 2020 2020 2020 2069  86.            i
+00012fd0: 2031 3633 3837 0a20 2020 2020 2020 2022   16387.        "
+00012fe0: 2222 0a20 2020 2020 2020 2065 7870 5f6f  "".        exp_o
+00012ff0: 7574 7075 7420 3d20 7222 2222 0a20 2020  utput = r""".   
+00013000: 2020 2020 2020 2020 202f 2f20 556e 636f           // Unco
+00013010: 6e6e 6563 7465 643a 204e 6f6e 650a 2020  nnected: None.  
+00013020: 2020 2020 2020 2020 2020 2f2f 204f 7270            // Orp
+00013030: 6861 6e73 3a20 3136 3338 340a 2020 2020  hans: 16384.    
+00013040: 2020 2020 2020 2020 2f2f 2046 6972 7374          // First
+00013050: 2069 6e73 7472 7563 7469 6f6e 206e 6f74   instruction not
+00013060: 2075 7365 643a 204e 6f6e 650a 2020 2020   used: None.    
+00013070: 2020 2020 2020 2020 6469 6772 6170 6820          digraph 
+00013080: 7b0a 2020 2020 2020 2020 2020 2020 6e6f  {.            no
+00013090: 6465 205b 7368 6170 653d 7265 636f 7264  de [shape=record
+000130a0: 5d0a 2020 2020 2020 2020 2020 2020 6564  ].            ed
+000130b0: 6765 205b 6172 726f 7768 6561 643d 6f70  ge [arrowhead=op
+000130c0: 656e 5d0a 2020 2020 2020 2020 2020 2020  en].            
+000130d0: 3136 3338 3420 5b6c 6162 656c 3d22 3136  16384 [label="16
+000130e0: 3338 3420 3430 3030 5c6e 5354 4152 5449  384 4000\nSTARTI
+000130f0: 4e47 225d 0a20 2020 2020 2020 2020 2020  NG"].           
+00013100: 2031 3633 3834 202d 3e20 7b31 3633 3836   16384 -> {16386
+00013110: 7d0a 2020 2020 2020 2020 2020 2020 3136  }.            16
+00013120: 3338 3620 5b6c 6162 656c 3d22 3136 3338  386 [label="1638
+00013130: 3620 3430 3032 5c6e 444f 4e45 225d 0a20  6 4002\nDONE"]. 
+00013140: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00013150: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00013160: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+00013170: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+00013180: 2027 2d67 202d 4920 4564 6765 4174 7472   '-g -I EdgeAttr
+00013190: 6962 7574 6573 3d61 7272 6f77 6865 6164  ibutes=arrowhead
+000131a0: 3d6f 7065 6e27 2c20 6374 6c29 0a0a 2020  =open', ctl)..  
+000131b0: 2020 6465 6620 7465 7374 5f63 6f6e 6669    def test_confi
+000131c0: 675f 4772 6170 6841 7474 7269 6275 7465  g_GraphAttribute
+000131d0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+000131e0: 2072 616d 203d 205b 3234 2c20 302c 2032   ram = [24, 0, 2
+000131f0: 3031 5d20 2b20 5b30 5d20 2a20 3439 3134  01] + [0] * 4914
+00013200: 390a 2020 2020 2020 2020 6374 6c20 3d20  9.        ctl = 
+00013210: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+00013220: 4020 3136 3338 3420 6c61 6265 6c3d 5354  @ 16384 label=ST
+00013230: 4152 5449 4e47 0a20 2020 2020 2020 2020  ARTING.         
+00013240: 2020 2063 2031 3633 3834 0a20 2020 2020     c 16384.     
+00013250: 2020 2020 2020 2040 2031 3633 3836 206c         @ 16386 l
+00013260: 6162 656c 3d44 4f4e 450a 2020 2020 2020  abel=DONE.      
+00013270: 2020 2020 2020 6320 3136 3338 360a 2020        c 16386.  
+00013280: 2020 2020 2020 2020 2020 6920 3136 3338            i 1638
+00013290: 370a 2020 2020 2020 2020 2222 220a 2020  7.        """.  
+000132a0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
+000132b0: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
+000132c0: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
+000132d0: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
+000132e0: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
+000132f0: 2031 3633 3834 0a20 2020 2020 2020 2020   16384.         
+00013300: 2020 202f 2f20 4669 7273 7420 696e 7374     // First inst
+00013310: 7275 6374 696f 6e20 6e6f 7420 7573 6564  ruction not used
+00013320: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
+00013330: 2020 2064 6967 7261 7068 207b 0a20 2020     digraph {.   
+00013340: 2020 2020 2020 2020 2067 7261 7068 205b           graph [
+00013350: 6267 636f 6c6f 723d 6269 7371 7565 5d0a  bgcolor=bisque].
+00013360: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
+00013370: 205b 7368 6170 653d 7265 636f 7264 5d0a   [shape=record].
+00013380: 2020 2020 2020 2020 2020 2020 3136 3338              1638
+00013390: 3420 5b6c 6162 656c 3d22 3136 3338 3420  4 [label="16384 
+000133a0: 3430 3030 5c6e 5354 4152 5449 4e47 225d  4000\nSTARTING"]
+000133b0: 0a20 2020 2020 2020 2020 2020 2031 3633  .            163
+000133c0: 3834 202d 3e20 7b31 3633 3836 7d0a 2020  84 -> {16386}.  
+000133d0: 2020 2020 2020 2020 2020 3136 3338 3620            16386 
+000133e0: 5b6c 6162 656c 3d22 3136 3338 3620 3430  [label="16386 40
+000133f0: 3032 5c6e 444f 4e45 225d 0a20 2020 2020  02\nDONE"].     
+00013400: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00013410: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00013420: 662e 5f74 6573 745f 736e 6128 7261 6d2c  f._test_sna(ram,
+00013430: 2065 7870 5f6f 7574 7075 742c 2027 2d67   exp_output, '-g
+00013440: 202d 4920 4772 6170 6841 7474 7269 6275   -I GraphAttribu
+00013450: 7465 733d 6267 636f 6c6f 723d 6269 7371  tes=bgcolor=bisq
+00013460: 7565 272c 2063 746c 290a 0a20 2020 2064  ue', ctl)..    d
+00013470: 6566 2074 6573 745f 636f 6e66 6967 5f4e  ef test_config_N
+00013480: 6f64 6541 7474 7269 6275 7465 7328 7365  odeAttributes(se
+00013490: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+000134a0: 203d 205b 3139 352c 2033 2c20 3634 2c20   = [195, 3, 64, 
+000134b0: 3230 315d 202b 205b 305d 202a 2034 3931  201] + [0] * 491
+000134c0: 3438 0a20 2020 2020 2020 2063 746c 203d  48.        ctl =
+000134d0: 2022 2222 0a20 2020 2020 2020 2020 2020   """.           
+000134e0: 2040 2031 3633 3834 206c 6162 656c 3d53   @ 16384 label=S
+000134f0: 5441 5254 0a20 2020 2020 2020 2020 2020  TART.           
+00013500: 2063 2031 3633 3834 0a20 2020 2020 2020   c 16384.       
+00013510: 2020 2020 2040 2031 3633 3837 206c 6162       @ 16387 lab
+00013520: 656c 3d45 4e44 0a20 2020 2020 2020 2020  el=END.         
+00013530: 2020 2063 2031 3633 3837 0a20 2020 2020     c 16387.     
+00013540: 2020 2020 2020 2069 2031 3633 3838 0a20         i 16388. 
+00013550: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00013560: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+00013570: 7222 2222 0a20 2020 2020 2020 2020 2020  r""".           
+00013580: 202f 2f20 556e 636f 6e6e 6563 7465 643a   // Unconnected:
+00013590: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+000135a0: 2020 2f2f 204f 7270 6861 6e73 3a20 3136    // Orphans: 16
+000135b0: 3338 340a 2020 2020 2020 2020 2020 2020  384.            
+000135c0: 2f2f 2046 6972 7374 2069 6e73 7472 7563  // First instruc
+000135d0: 7469 6f6e 206e 6f74 2075 7365 643a 204e  tion not used: N
+000135e0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000135f0: 6469 6772 6170 6820 7b0a 2020 2020 2020  digraph {.      
+00013600: 2020 2020 2020 6e6f 6465 205b 7368 6170        node [shap
+00013610: 653d 626f 785d 0a20 2020 2020 2020 2020  e=box].         
+00013620: 2020 2031 3633 3834 205b 6c61 6265 6c3d     16384 [label=
+00013630: 2231 3633 3834 2034 3030 305c 6e53 5441  "16384 4000\nSTA
+00013640: 5254 225d 0a20 2020 2020 2020 2020 2020  RT"].           
+00013650: 2031 3633 3834 202d 3e20 7b31 3633 3837   16384 -> {16387
+00013660: 7d0a 2020 2020 2020 2020 2020 2020 3136  }.            16
+00013670: 3338 3720 5b6c 6162 656c 3d22 3136 3338  387 [label="1638
+00013680: 3720 3430 3033 5c6e 454e 4422 5d0a 2020  7 4003\nEND"].  
+00013690: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+000136a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000136b0: 7365 6c66 2e5f 7465 7374 5f73 6e61 2872  self._test_sna(r
+000136c0: 616d 2c20 6578 705f 6f75 7470 7574 2c20  am, exp_output, 
+000136d0: 272d 6720 2d49 204e 6f64 6541 7474 7269  '-g -I NodeAttri
+000136e0: 6275 7465 733d 7368 6170 653d 626f 7827  butes=shape=box'
+000136f0: 2c20 6374 6c29 0a0a 2020 2020 6465 6620  , ctl)..    def 
+00013700: 7465 7374 5f63 6f6e 6669 675f 4e6f 6465  test_config_Node
+00013710: 4174 7472 6962 7574 6573 5f62 6c61 6e6b  Attributes_blank
+00013720: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00013730: 7261 6d20 3d20 5b31 3935 2c20 332c 2036  ram = [195, 3, 6
+00013740: 342c 2032 3031 5d20 2b20 5b30 5d20 2a20  4, 201] + [0] * 
+00013750: 3439 3134 380a 2020 2020 2020 2020 6374  49148.        ct
+00013760: 6c20 3d20 2222 220a 2020 2020 2020 2020  l = """.        
+00013770: 2020 2020 4020 3136 3338 3420 6c61 6265      @ 16384 labe
+00013780: 6c3d 5354 4152 540a 2020 2020 2020 2020  l=START.        
+00013790: 2020 2020 6320 3136 3338 340a 2020 2020      c 16384.    
+000137a0: 2020 2020 2020 2020 4020 3136 3338 3720          @ 16387 
+000137b0: 6c61 6265 6c3d 454e 440a 2020 2020 2020  label=END.      
+000137c0: 2020 2020 2020 6320 3136 3338 370a 2020        c 16387.  
+000137d0: 2020 2020 2020 2020 2020 6920 3136 3338            i 1638
+000137e0: 380a 2020 2020 2020 2020 2222 220a 2020  8.        """.  
+000137f0: 2020 2020 2020 6578 705f 6f75 7470 7574        exp_output
+00013800: 203d 2072 2222 220a 2020 2020 2020 2020   = r""".        
+00013810: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
+00013820: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
+00013830: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
+00013840: 2031 3633 3834 0a20 2020 2020 2020 2020   16384.         
+00013850: 2020 202f 2f20 4669 7273 7420 696e 7374     // First inst
+00013860: 7275 6374 696f 6e20 6e6f 7420 7573 6564  ruction not used
+00013870: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
+00013880: 2020 2064 6967 7261 7068 207b 0a20 2020     digraph {.   
+00013890: 2020 2020 2020 2020 2031 3633 3834 205b           16384 [
+000138a0: 6c61 6265 6c3d 2231 3633 3834 2034 3030  label="16384 400
+000138b0: 305c 6e53 5441 5254 225d 0a20 2020 2020  0\nSTART"].     
+000138c0: 2020 2020 2020 2031 3633 3834 202d 3e20         16384 -> 
+000138d0: 7b31 3633 3837 7d0a 2020 2020 2020 2020  {16387}.        
+000138e0: 2020 2020 3136 3338 3720 5b6c 6162 656c      16387 [label
+000138f0: 3d22 3136 3338 3720 3430 3033 5c6e 454e  ="16387 4003\nEN
+00013900: 4422 5d0a 2020 2020 2020 2020 2020 2020  D"].            
+00013910: 7d0a 2020 2020 2020 2020 2222 220a 2020  }.        """.  
+00013920: 2020 2020 2020 7365 6c66 2e5f 7465 7374        self._test
+00013930: 5f73 6e61 2872 616d 2c20 6578 705f 6f75  _sna(ram, exp_ou
+00013940: 7470 7574 2c20 272d 6720 2d49 204e 6f64  tput, '-g -I Nod
+00013950: 6541 7474 7269 6275 7465 733d 272c 2063  eAttributes=', c
+00013960: 746c 290a 0a20 2020 2064 6566 2074 6573  tl)..    def tes
+00013970: 745f 636f 6e66 6967 5f4e 6f64 6549 6428  t_config_NodeId(
+00013980: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+00013990: 616d 203d 205b 3139 352c 2033 2c20 3634  am = [195, 3, 64
+000139a0: 2c20 3230 315d 202b 205b 305d 202a 2034  , 201] + [0] * 4
+000139b0: 3931 3438 0a20 2020 2020 2020 2063 746c  9148.        ctl
+000139c0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
+000139d0: 2020 2040 2031 3633 3834 206c 6162 656c     @ 16384 label
+000139e0: 3d53 5441 5254 0a20 2020 2020 2020 2020  =START.         
+000139f0: 2020 2063 2031 3633 3834 0a20 2020 2020     c 16384.     
+00013a00: 2020 2020 2020 2040 2031 3633 3837 206c         @ 16387 l
+00013a10: 6162 656c 3d45 4e44 0a20 2020 2020 2020  abel=END.       
+00013a20: 2020 2020 2063 2031 3633 3837 0a20 2020       c 16387.   
+00013a30: 2020 2020 2020 2020 2069 2031 3633 3838           i 16388
+00013a40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00013a50: 2020 2020 2065 7870 5f6f 7574 7075 7420       exp_output 
+00013a60: 3d20 7222 2222 0a20 2020 2020 2020 2020  = r""".         
+00013a70: 2020 202f 2f20 556e 636f 6e6e 6563 7465     // Unconnecte
+00013a80: 643a 204e 6f6e 650a 2020 2020 2020 2020  d: None.        
+00013a90: 2020 2020 2f2f 204f 7270 6861 6e73 3a20      // Orphans: 
+00013aa0: 5354 4152 540a 2020 2020 2020 2020 2020  START.          
+00013ab0: 2020 2f2f 2046 6972 7374 2069 6e73 7472    // First instr
+00013ac0: 7563 7469 6f6e 206e 6f74 2075 7365 643a  uction not used:
+00013ad0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00013ae0: 2020 6469 6772 6170 6820 7b0a 2020 2020    digraph {.    
+00013af0: 2020 2020 2020 2020 6e6f 6465 205b 7368          node [sh
+00013b00: 6170 653d 7265 636f 7264 5d0a 2020 2020  ape=record].    
+00013b10: 2020 2020 2020 2020 5354 4152 5420 5b6c          START [l
+00013b20: 6162 656c 3d22 3136 3338 3420 3430 3030  abel="16384 4000
+00013b30: 5c6e 5354 4152 5422 5d0a 2020 2020 2020  \nSTART"].      
+00013b40: 2020 2020 2020 5354 4152 5420 2d3e 207b        START -> {
+00013b50: 454e 447d 0a20 2020 2020 2020 2020 2020  END}.           
+00013b60: 2045 4e44 205b 6c61 6265 6c3d 2231 3633   END [label="163
+00013b70: 3837 2034 3030 335c 6e45 4e44 225d 0a20  87 4003\nEND"]. 
+00013b80: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00013b90: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00013ba0: 2073 656c 662e 5f74 6573 745f 736e 6128   self._test_sna(
+00013bb0: 7261 6d2c 2065 7870 5f6f 7574 7075 742c  ram, exp_output,
+00013bc0: 2027 2d67 202d 4920 4e6f 6465 4964 3d7b   '-g -I NodeId={
+00013bd0: 6c61 6265 6c7d 272c 2063 746c 290a 0a20  label}', ctl).. 
+00013be0: 2020 2064 6566 2074 6573 745f 636f 6e66     def test_conf
+00013bf0: 6967 5f4e 6f64 654c 6162 656c 2873 656c  ig_NodeLabel(sel
+00013c00: 6629 3a0a 2020 2020 2020 2020 7261 6d20  f):.        ram 
+00013c10: 3d20 5b31 3935 2c20 332c 2036 342c 2032  = [195, 3, 64, 2
+00013c20: 3031 5d20 2b20 5b30 5d20 2a20 3439 3134  01] + [0] * 4914
+00013c30: 380a 2020 2020 2020 2020 6374 6c20 3d20  8.        ctl = 
+00013c40: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+00013c50: 4020 3136 3338 3420 6c61 6265 6c3d 5354  @ 16384 label=ST
+00013c60: 4152 540a 2020 2020 2020 2020 2020 2020  ART.            
+00013c70: 6320 3136 3338 340a 2020 2020 2020 2020  c 16384.        
+00013c80: 2020 2020 4020 3136 3338 3720 6c61 6265      @ 16387 labe
+00013c90: 6c3d 454e 440a 2020 2020 2020 2020 2020  l=END.          
+00013ca0: 2020 6320 3136 3338 370a 2020 2020 2020    c 16387.      
+00013cb0: 2020 2020 2020 6920 3136 3338 380a 2020        i 16388.  
+00013cc0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00013cd0: 2020 6578 705f 6f75 7470 7574 203d 2022    exp_output = "
+00013ce0: 2222 0a20 2020 2020 2020 2020 2020 202f  "".            /
+00013cf0: 2f20 556e 636f 6e6e 6563 7465 643a 204e  / Unconnected: N
+00013d00: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00013d10: 2f2f 204f 7270 6861 6e73 3a20 3136 3338  // Orphans: 1638
+00013d20: 340a 2020 2020 2020 2020 2020 2020 2f2f  4.            //
+00013d30: 2046 6972 7374 2069 6e73 7472 7563 7469   First instructi
+00013d40: 6f6e 206e 6f74 2075 7365 643a 204e 6f6e  on not used: Non
+00013d50: 650a 2020 2020 2020 2020 2020 2020 6469  e.            di
+00013d60: 6772 6170 6820 7b0a 2020 2020 2020 2020  graph {.        
+00013d70: 2020 2020 6e6f 6465 205b 7368 6170 653d      node [shape=
+00013d80: 7265 636f 7264 5d0a 2020 2020 2020 2020  record].        
+00013d90: 2020 2020 3136 3338 3420 5b6c 6162 656c      16384 [label
+00013da0: 3d22 5354 4152 5422 5d0a 2020 2020 2020  ="START"].      
+00013db0: 2020 2020 2020 3136 3338 3420 2d3e 207b        16384 -> {
+00013dc0: 3136 3338 377d 0a20 2020 2020 2020 2020  16387}.         
+00013dd0: 2020 2031 3633 3837 205b 6c61 6265 6c3d     16387 [label=
+00013de0: 2245 4e44 225d 0a20 2020 2020 2020 2020  "END"].         
+00013df0: 2020 207d 0a20 2020 2020 2020 2022 2222     }.        """
+00013e00: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00013e10: 6573 745f 736e 6128 7261 6d2c 2065 7870  est_sna(ram, exp
+00013e20: 5f6f 7574 7075 742c 2027 2d67 202d 4920  _output, '-g -I 
+00013e30: 4e6f 6465 4c61 6265 6c3d 227b 6c61 6265  NodeLabel="{labe
+00013e40: 6c7d 2227 2c20 6374 6c29 0a0a 2020 2020  l}"', ctl)..    
+00013e50: 6465 6620 7465 7374 5f63 6f6e 6669 675f  def test_config_
+00013e60: 4e6f 6465 4c61 6265 6c5f 7769 7468 5f68  NodeLabel_with_h
+00013e70: 746d 6c28 7365 6c66 293a 0a20 2020 2020  tml(self):.     
+00013e80: 2020 2072 616d 203d 205b 3139 352c 2033     ram = [195, 3
+00013e90: 2c20 3634 2c20 3230 315d 202b 205b 305d  , 64, 201] + [0]
+00013ea0: 202a 2034 3931 3438 0a20 2020 2020 2020   * 49148.       
+00013eb0: 2069 6e69 203d 2022 2222 0a20 2020 2020   ini = """.     
+00013ec0: 2020 2020 2020 205b 736e 6170 696e 666f         [snapinfo
+00013ed0: 5d0a 2020 2020 2020 2020 2020 2020 4e6f  ].            No
+00013ee0: 6465 4174 7472 6962 7574 6573 3d73 6861  deAttributes=sha
+00013ef0: 7065 3d6e 6f6e 650a 2020 2020 2020 2020  pe=none.        
+00013f00: 2020 2020 4e6f 6465 4c61 6265 6c3d 3c3c      NodeLabel=<<
+00013f10: 5441 424c 453e 3c54 523e 3c54 443e 7b6c  TABLE><TR><TD>{l
+00013f20: 6162 656c 7d3c 2f54 443e 3c2f 5452 3e3c  abel}</TD></TR><
+00013f30: 2f54 4142 4c45 3e3e 0a20 2020 2020 2020  /TABLE>>.       
+00013f40: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+00013f50: 662e 7772 6974 655f 7465 7874 5f66 696c  f.write_text_fil
+00013f60: 6528 6465 6465 6e74 2869 6e69 292e 7374  e(dedent(ini).st
+00013f70: 7269 7028 292c 2027 736b 6f6f 6c6b 6974  rip(), 'skoolkit
+00013f80: 2e69 6e69 2729 0a20 2020 2020 2020 2063  .ini').        c
+00013f90: 746c 203d 2022 2222 0a20 2020 2020 2020  tl = """.       
+00013fa0: 2020 2020 2040 2031 3633 3834 206c 6162       @ 16384 lab
+00013fb0: 656c 3d53 5441 5254 0a20 2020 2020 2020  el=START.       
+00013fc0: 2020 2020 2063 2031 3633 3834 0a20 2020       c 16384.   
+00013fd0: 2020 2020 2020 2020 2040 2031 3633 3837           @ 16387
+00013fe0: 206c 6162 656c 3d45 4e44 0a20 2020 2020   label=END.     
+00013ff0: 2020 2020 2020 2063 2031 3633 3837 0a20         c 16387. 
+00014000: 2020 2020 2020 2020 2020 2069 2031 3633             i 163
+00014010: 3838 0a20 2020 2020 2020 2022 2222 0a20  88.        """. 
+00014020: 2020 2020 2020 2065 7870 5f6f 7574 7075         exp_outpu
+00014030: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
+00014040: 2020 2020 2f2f 2055 6e63 6f6e 6e65 6374      // Unconnect
+00014050: 6564 3a20 4e6f 6e65 0a20 2020 2020 2020  ed: None.       
+00014060: 2020 2020 202f 2f20 4f72 7068 616e 733a       // Orphans:
+00014070: 2031 3633 3834 0a20 2020 2020 2020 2020   16384.         
+00014080: 2020 202f 2f20 4669 7273 7420 696e 7374     // First inst
+00014090: 7275 6374 696f 6e20 6e6f 7420 7573 6564  ruction not used
+000140a0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2020  : None.         
+000140b0: 2020 2064 6967 7261 7068 207b 0a20 2020     digraph {.   
+000140c0: 2020 2020 2020 2020 206e 6f64 6520 5b73           node [s
+000140d0: 6861 7065 3d6e 6f6e 655d 0a20 2020 2020  hape=none].     
+000140e0: 2020 2020 2020 2031 3633 3834 205b 6c61         16384 [la
+000140f0: 6265 6c3d 3c3c 5441 424c 453e 3c54 523e  bel=<<TABLE><TR>
+00014100: 3c54 443e 5354 4152 543c 2f54 443e 3c2f  <TD>START</TD></
+00014110: 5452 3e3c 2f54 4142 4c45 3e3e 5d0a 2020  TR></TABLE>>].  
+00014120: 2020 2020 2020 2020 2020 3136 3338 3420            16384 
+00014130: 2d3e 207b 3136 3338 377d 0a20 2020 2020  -> {16387}.     
+00014140: 2020 2020 2020 2031 3633 3837 205b 6c61         16387 [la
+00014150: 6265 6c3d 3c3c 5441 424c 453e 3c54 523e  bel=<<TABLE><TR>
+00014160: 3c54 443e 454e 443c 2f54 443e 3c2f 5452  <TD>END</TD></TR
+00014170: 3e3c 2f54 4142 4c45 3e3e 5d0a 2020 2020  ></TABLE>>].    
+00014180: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00014190: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+000141a0: 6c66 2e5f 7465 7374 5f73 6e61 2872 616d  lf._test_sna(ram
+000141b0: 2c20 6578 705f 6f75 7470 7574 2c20 272d  , exp_output, '-
+000141c0: 6727 2c20 6374 6c29 0a0a 2020 2020 6465  g', ctl)..    de
+000141d0: 6620 7465 7374 5f63 6f6e 6669 675f 5065  f test_config_Pe
+000141e0: 656b 2873 656c 6629 3a0a 2020 2020 2020  ek(self):.      
+000141f0: 2020 7261 6d20 3d20 5b30 5d20 2a20 3439    ram = [0] * 49
+00014200: 3135 320a 2020 2020 2020 2020 7261 6d5b  152.        ram[
+00014210: 3333 3631 363a 3333 3632 305d 203d 205b  33616:33620] = [
+00014220: 312c 2036 352c 2031 3434 2c20 3136 355d  1, 65, 144, 165]
+00014230: 0a20 2020 2020 2020 2065 7870 5f6f 7574  .        exp_out
+00014240: 7075 7420 3d20 2222 220a 2020 2020 2020  put = """.      
+00014250: 2020 2020 2020 2463 3335 303a 3030 3128        $c350:001(
+00014260: 290a 2020 2020 2020 2020 2020 2020 2463  ).            $c
+00014270: 3335 313a 3036 3528 4129 0a20 2020 2020  351:065(A).     
+00014280: 2020 2020 2020 2024 6333 3532 3a31 3434         $c352:144
+00014290: 2855 4447 2d41 290a 2020 2020 2020 2020  (UDG-A).        
+000142a0: 2020 2020 2463 3335 333a 3136 3528 524e      $c353:165(RN
+000142b0: 4429 0a20 2020 2020 2020 2022 2222 0a20  D).        """. 
+000142c0: 2020 2020 2020 2073 656c 662e 5f74 6573         self._tes
+000142d0: 745f 736e 6128 7261 6d2c 2065 7870 5f6f  t_sna(ram, exp_o
+000142e0: 7574 7075 742c 2027 2d70 2035 3030 3030  utput, '-p 50000
+000142f0: 2d35 3030 3033 202d 4920 5065 656b 3d24  -50003 -I Peek=$
+00014300: 7b61 6464 7265 7373 3a30 3478 7d3a 7b76  {address:04x}:{v
+00014310: 616c 7565 3a30 3364 7d28 7b63 6861 727d  alue:03d}({char}
+00014320: 2927 290a 0a20 2020 2064 6566 2074 6573  )')..    def tes
+00014330: 745f 636f 6e66 6967 5f57 6f72 6428 7365  t_config_Word(se
+00014340: 6c66 293a 0a20 2020 2020 2020 2072 616d  lf):.        ram
+00014350: 203d 205b 305d 202a 2034 3931 3532 0a20   = [0] * 49152. 
+00014360: 2020 2020 2020 2072 616d 5b34 3336 3136         ram[43616
+00014370: 3a34 3336 3230 5d20 3d20 5b31 2c20 322c  :43620] = [1, 2,
+00014380: 2032 3534 2c20 3235 355d 0a20 2020 2020   254, 255].     
+00014390: 2020 2065 7870 5f6f 7574 7075 7420 3d20     exp_output = 
+000143a0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
+000143b0: 2445 4136 302c 2430 3230 310a 2020 2020  $EA60,$0201.    
+000143c0: 2020 2020 2020 2020 2445 4136 322c 2446          $EA62,$F
+000143d0: 4646 450a 2020 2020 2020 2020 2222 220a  FFE.        """.
+000143e0: 2020 2020 2020 2020 7365 6c66 2e5f 7465          self._te
+000143f0: 7374 5f73 6e61 2872 616d 2c20 6578 705f  st_sna(ram, exp_
+00014400: 6f75 7470 7574 2c20 272d 7720 3630 3030  output, '-w 6000
+00014410: 302d 3630 3030 3320 2d49 2057 6f72 643d  0-60003 -I Word=
+00014420: 247b 6164 6472 6573 733a 3034 587d 2c24  ${address:04X},$
+00014430: 7b76 616c 7565 3a30 3458 7d27 290a       {value:04X}').
```

### Comparing `skoolkit-9.1/tests/test_snapmod.py` & `skoolkit-9.2/tests/test_snapmod.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,13 +1,12 @@
 import textwrap
 from unittest.mock import patch
 
 from skoolkittest import SkoolKitTestCase, SZX, Z80, Z80_REGISTERS
 from skoolkit import SkoolKitError, snapmod, read_bin_file, VERSION
-from skoolkit.snapshot import get_snapshot
 
 def mock_run(*args):
     global run_args
     run_args = args
 
 class SnapmodTest(SkoolKitTestCase):
     def _get_header(self, version, is128=False, compress=False):
@@ -167,15 +166,15 @@
             self.run_snapmod('-r hl=0 {}'.format(infile))
         self.assertEqual(cm.exception.args[0], '{}: file not found'.format(infile))
 
     def test_invalid_szx(self):
         infile = self.write_bin_file([0], suffix='.szx')
         with self.assertRaises(SkoolKitError) as cm:
             self.run_snapmod(f'-p 16384,0 {infile}')
-        self.assertEqual(cm.exception.args[0], f'{infile}: invalid SZX file')
+        self.assertEqual(cm.exception.args[0], 'Invalid SZX file')
 
     def test_mismatched_input_and_output_snapshot_types(self):
         with self.assertRaises(SkoolKitError) as cm:
             self.run_snapmod('in.z80 out.szx')
         self.assertEqual(cm.exception.args[0], 'Mismatched input and output snapshot types')
 
     def test_overwrite_input_file(self):
```

### Comparing `skoolkit-9.1/tests/test_snapshot.py` & `skoolkit-9.2/tests/test_snapshot.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 from collections import defaultdict
 import zlib
 
 from skoolkittest import SkoolKitTestCase, Z80 as Z80Reader
 from skoolkit import SkoolKitError, get_dword
-from skoolkit.snapshot import Z80, get_snapshot, write_snapshot, SnapshotError
+from skoolkit.snapshot import Snapshot, Z80, get_snapshot, write_snapshot, SnapshotError
 
 class SnapshotTest(SkoolKitTestCase):
     def _check_ram(self, ram, exp_ram, model, out_7ffd, pages, page):
         if model == 0:
             # 16K
             self.assertEqual(len(ram), 49152)
             self.assertEqual(ram[:16384], exp_ram[:16384])
@@ -38,19 +38,14 @@
 class ErrorTest(SnapshotTest):
     def test_unknown_file_type(self):
         file_type = 'tzx'
         snapshot_file = self.write_bin_file(suffix='.{0}'.format(file_type))
         with self.assertRaisesRegex(SnapshotError, "{}: Unknown file type".format(snapshot_file)):
             get_snapshot(snapshot_file)
 
-    def test_bad_ram_size(self):
-        ram_size = 3
-        with self.assertRaisesRegex(SnapshotError, 'RAM size is {}'.format(ram_size)):
-            get_snapshot(self.write_bin_file([0] * (27 + ram_size), suffix='.sna'))
-
 class SNATest(SnapshotTest):
     def test_sna_48k(self):
         header = [0] * 27
         exp_ram = [(n + 23) & 255 for n in range(49152)]
         sna = header + exp_ram
         tmp_sna = self.write_bin_file(sna, suffix='.sna')
         snapshot = get_snapshot(tmp_sna)
@@ -140,14 +135,22 @@
         self._test_z80(exp_ram, 1, False)
 
     def test_z80v1_compressed(self):
         exp_ram = [0] * 261 + [1] * 10 + [2] * 4 + [237, 4] + [237] * 2
         exp_ram += [128] * (49152 - len(exp_ram))
         self._test_z80(exp_ram, 1, True)
 
+    def test_z80v1_bad_ram_size(self):
+        header = [0] * 30
+        header[6] = 1 # PC
+        ram = [0] * 2
+        z80file = self.write_bin_file(header + ram, suffix='.z80')
+        with self.assertRaisesRegex(SnapshotError, r"RAM is 2 bytes \(should be 49152\)"):
+            get_snapshot(z80file)
+
     def test_z80v2_16k_compressed(self):
         exp_ram = [(n + 7) & 255 for n in range(16384)] + [0] * 32768
         self._test_z80(exp_ram, 2, True, modify=True)
 
     def test_z80v2_48k(self):
         exp_ram = [(n + 1) & 255 for n in range(49152)]
         self._test_z80(exp_ram, 2, False)
@@ -157,14 +160,22 @@
         exp_ram += [107] * (49152 - len(exp_ram))
         self._test_z80(exp_ram, 2, True)
 
     def test_z80v2_128k(self):
         exp_ram = [(n + 127) & 255 for n in range(49152)]
         self._test_z80(exp_ram, 2, False, machine_id=3)
 
+    def test_z80v2_bad_ram_page_size(self):
+        header = [0] * 55
+        header[30] = 23
+        ram_block = [3, 0, 4, 1, 2, 3]
+        z80file = self.write_bin_file(header + ram_block, suffix='.z80')
+        with self.assertRaisesRegex(SnapshotError, r"Page 1 is 3 bytes \(should be 16384\)"):
+            get_snapshot(z80file)
+
     def test_z80v3_16k(self):
         exp_ram = [(n + 7) & 255 for n in range(16384)] + [0] * 32768
         self._test_z80(exp_ram, 3, False, machine_id=1, modify=True)
 
     def test_z80v3_48k(self):
         exp_ram = [(n + 128) & 255 for n in range(49152)]
         self._test_z80(exp_ram, 3, False)
@@ -251,14 +262,30 @@
     def test_border(self):
         z80 = Z80()
         for border in range(8):
             z80.header[12] = 255
             z80.set_registers_and_state((), [f'border={border}'])
             self.assertEqual(z80.header[12], 241 + border * 2)
 
+    def test_tstates_is_ignored_v1(self):
+        ram = [0] * 0xC000
+        z80file = self.write_z80_file(None, ram, version=1)
+        z80 = Snapshot.get(z80file)
+        exp_header = list(z80.header)
+        z80.set_registers_and_state((), ['tstates=50000'])
+        self.assertEqual(exp_header, z80.header)
+
+    def test_tstates_is_ignored_v2(self):
+        ram = [0] * 0xC000
+        z80file = self.write_z80_file(None, ram, version=2)
+        z80 = Snapshot.get(z80file)
+        exp_header = list(z80.header)
+        z80.set_registers_and_state((), ['tstates=50000'])
+        self.assertEqual(exp_header, z80.header)
+
     def test_tstates_48k(self):
         z80 = Z80()
         z80.header[34] = 0 # 48K
         for tstates in (0, 1000, 17471, 17472, 20000, 38000, 56000, 69887, 69888):
             z80.set_registers_and_state((), [f'tstates={tstates}'])
             t_lo = z80.header[55] + 256 * z80.header[56]
             t_hi = z80.header[57]
@@ -278,23 +305,55 @@
     def test_issue2(self):
         z80 = Z80()
         for issue2 in (0, 1):
             z80.header[29] = 255
             z80.set_registers_and_state((), [f'issue2={issue2}'])
             self.assertEqual(z80.header[29], 251 + issue2 * 4)
 
+    def test_7ffd_is_ignored_v1(self):
+        ram = [0] * 0xC000
+        z80file = self.write_z80_file(None, ram, version=1)
+        z80 = Snapshot.get(z80file)
+        exp_header = list(z80.header)
+        z80.set_registers_and_state((), ['7ffd=7'])
+        self.assertEqual(exp_header, z80.header)
+
+    def test_fffd_is_ignored_v1(self):
+        ram = [0] * 0xC000
+        z80file = self.write_z80_file(None, ram, version=1)
+        z80 = Snapshot.get(z80file)
+        exp_header = list(z80.header)
+        z80.set_registers_and_state((), ['fffd=8'])
+        self.assertEqual(exp_header, z80.header)
+
+    def test_ay_is_ignored_v1(self):
+        ram = [0] * 0xC000
+        z80file = self.write_z80_file(None, ram, version=1)
+        z80 = Snapshot.get(z80file)
+        exp_header = list(z80.header)
+        z80.set_registers_and_state((), ('ay[0]=1', 'ay[15]=15'))
+        self.assertEqual(exp_header, z80.header)
+
     def test_all(self):
         z80 = Z80()
         z80.header[12:58] = [255] * 46
-        z80.header[34] = 0 # 48K
-        z80.set_registers_and_state((), ('iff=0', 'im=2', 'border=3', 'tstates=17471', 'issue2=0'))
+        z80.header[34] = 4 # 128K
+        state = (
+            'iff=0', 'im=2', 'border=3', 'tstates=17726', 'issue2=0',
+            '7ffd=1', 'fffd=2', 'ay[0]=3', 'ay[15]=4'
+        )
+        z80.set_registers_and_state((), state)
+        self.assertEqual(z80.header[12], 247) # Border (bits 1-3)
         self.assertEqual(z80.header[27], 0) # IFF1
         self.assertEqual(z80.header[28], 0) # IFF2
         self.assertEqual(z80.header[29], 250) # IM (bits 0-1), issue 2 (bit 2)
-        self.assertEqual(z80.header[12], 247) # Border (bits 1-3)
+        self.assertEqual(z80.header[35], 1) # Port 0x7ffd
+        self.assertEqual(z80.header[38], 2) # Port 0xfffd
+        self.assertEqual(z80.header[39], 3) # AY register 0
+        self.assertEqual(z80.header[54], 4) # AY register 15
         self.assertEqual([0, 0, 3], z80.header[55:58]) # T-states
 
 class Z80RegistersTest(SkoolKitTestCase):
     def test_8_bit_registers(self):
         reg = {
             'a': 1, 'f': 2, 'b': 3, 'c': 4, 'd': 5, 'e': 6, 'h': 7, 'l': 8, 'i': 9, 'r': 10,
             '^a': 11, '^f': 12, '^b': 13, '^c':14, '^d': 15, '^e': 16, '^h': 17, '^l': 18
@@ -581,23 +640,29 @@
         ay = blocks.pop('AY')[0]
         self.assertEqual(len(ay), 18)
         self.assertEqual(ay[0], 0) # chFlags
         self.assertEqual(ay[1], exp_state['fffd'] % 256)
         for i in range(16):
             self.assertEqual(ay[2 + i], exp_state[f'ay[{i}]'] % 256)
 
-    def _test_szx(self, ram, registers, state):
+    def _test_szx(self, ram, registers, state, machine=None):
         fname = '{}/test.szx'.format(self.make_directory())
-        write_snapshot(fname, ram, [f'{k}={v}' for k, v in registers.items()], [f'{k}={v}' for k, v in state.items()])
+        write_snapshot(fname, ram, [f'{k}={v}' for k, v in registers.items()], [f'{k}={v}' for k, v in state.items()], machine)
         with open(fname, 'rb') as f:
             szx = tuple(f.read())
         self.assertTrue(len(szx) > 8)
         self.assertEqual(bytes(szx[:4]), b'ZXST')
         is128k = len(ram) == 8
-        machine_id = 2 if is128k else 1
+        if is128k:
+            if machine == '+2':
+                machine_id = 3
+            else:
+                machine_id = 2
+        else:
+            machine_id = 1
         self.assertEqual((1, 4, machine_id, 0), szx[4:8])
 
         blocks = defaultdict(list)
         i = 8
         while i < len(szx):
             block_id = ''.join(chr(b) for b in szx[i:i + 4] if b)
             length = get_dword(szx, i + 4)
@@ -700,14 +765,61 @@
             'iff': 0,
             'im': 2,
             'issue2': 1,
             'tstates': 12345
         }
         self._test_szx(ram, registers, state)
 
+    def test_write_szx_plus2(self):
+        ram = [[(i + j) % 256 for i in range(16384)] for j in range(8)]
+        registers = {
+            'a': 1,
+            'bc': 2300,
+            'de': 4500,
+            'f': 6,
+            'hl': 7800,
+            'i': 9,
+            'ix': 10,
+            'iy': 11,
+            'pc': 1200,
+            'r': 13,
+            'sp': 14,
+            '^a': 15,
+            '^bc': 1617,
+            '^de': 1819,
+            '^f': 20,
+            '^hl': 2122
+        }
+        state = {
+            '7ffd': 17,
+            'ay[0]': 1,
+            'ay[1]': 2,
+            'ay[2]': 3,
+            'ay[3]': 4,
+            'ay[4]': 5,
+            'ay[5]': 6,
+            'ay[6]': 7,
+            'ay[7]': 8,
+            'ay[8]': 9,
+            'ay[9]': 10,
+            'ay[10]': 11,
+            'ay[11]': 12,
+            'ay[12]': 13,
+            'ay[13]': 14,
+            'ay[14]': 15,
+            'ay[15]': 16,
+            'border': 1,
+            'fffd': 3,
+            'iff': 0,
+            'im': 2,
+            'issue2': 1,
+            'tstates': 12345
+        }
+        self._test_szx(ram, registers, state, '+2')
+
     def test_default_registers_and_state_48k(self):
         ram = [0] * 49152
         registers = {}
         state = {}
         self._test_szx(ram, registers, state)
 
     def test_default_registers_and_state_128k(self):
@@ -759,16 +871,17 @@
             exp_pages = {i: exp_ram[i] for i in range(8)}
         else:
             exp_pages = {1: exp_ram[16384:32768], 2: exp_ram[32768:], 5: exp_ram[:16384]}
         pages = self._decompress_ram(z80[86:])
         for n, ram in exp_pages.items():
             self.assertEqual(ram, pages[n])
 
-    def _check_header(self, z80, ram, exp_registers, exp_state):
+    def _check_header(self, z80, ram, exp_registers, exp_state, machine):
         is128k = len(ram) == 8
+        hw_mod = 128 if is128k and machine == '+2' else 0
         self.assertEqual(z80[0], exp_registers['a'])
         self.assertEqual(z80[1], exp_registers['f'])
         self.assertEqual(z80[2], exp_registers['c'])
         self.assertEqual(z80[3], exp_registers['b'])
         self.assertEqual(z80[4], exp_registers['l'])
         self.assertEqual(z80[5], exp_registers['h'])
         self.assertEqual(z80[6:8], (0, 0)) # v3 Z80 snapshot
@@ -791,32 +904,33 @@
         self.assertEqual(z80[27], exp_state['iff'] % 256)
         self.assertEqual(z80[28], exp_state['iff'] % 256)
         self.assertEqual(z80[29], (exp_state['im'] % 4) + (exp_state['issue2'] % 2) * 4)
         self.assertEqual(z80[30:32], (54, 0)) # Length of additional header block
         self.assertEqual(z80[32] + 256 * z80[33], exp_registers['pc'])
         self.assertEqual(z80[34], 4 if is128k else 0) # Hardware mode
         self.assertEqual(z80[35], exp_state['7ffd'] % 256)
-        self.assertEqual(z80[36:38], (0, 0)) # Various flags
+        self.assertEqual(z80[36], 0) # Various flags
+        self.assertEqual(z80[37], hw_mod) # Hardware modifier
         self.assertEqual(z80[38], exp_state['fffd'] % 256)
         for i in range(16):
             self.assertEqual(z80[39 + i], exp_state[f'ay[{i}]'])
         frame_duration = 70908 if is128k else 69888
         qframe_duration = frame_duration // 4
         t1 = (z80[55] + 256 * z80[56]) % qframe_duration
         t2 = (2 - z80[57]) % 4
         tstates = frame_duration - 1 - t2 * qframe_duration - t1
         self.assertEqual(tstates, exp_state['tstates'] % frame_duration)
         self.assertEqual(z80[58:86], (0,) * 28) # Various flags
 
-    def _test_z80(self, ram, registers, state):
+    def _test_z80(self, ram, registers, state, machine=None):
         fname = '{}/test.z80'.format(self.make_directory())
-        write_snapshot(fname, ram, [f'{k}={v}' for k, v in registers.items()], [f'{k}={v}' for k, v in state.items()])
+        write_snapshot(fname, ram, [f'{k}={v}' for k, v in registers.items()], [f'{k}={v}' for k, v in state.items()], machine)
         with open(fname, 'rb') as f:
             z80 = tuple(f.read())
-        self._check_header(z80, ram, self._normalise_registers(registers), self._fill_state(state))
+        self._check_header(z80, ram, self._normalise_registers(registers), self._fill_state(state), machine)
         self._check_ram(z80, ram)
 
     def _test_bad_spec(self, exp_error, ram, registers=(), state=()):
         fname = '{}/test.szx'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
             write_snapshot(fname, ram, registers, state)
         self.assertEqual(cm.exception.args[0], exp_error)
@@ -899,12 +1013,59 @@
             'iff': 0,
             'im': 2,
             'issue2': 1,
             'tstates': 12345
         }
         self._test_z80(ram, registers, state)
 
+    def test_write_z80_plus2(self):
+        ram = [[(i + j) % 256 for i in range(16384)] for j in range(8)]
+        registers = {
+            'a': 1,
+            'bc': 2300,
+            'de': 4500,
+            'f': 6,
+            'hl': 7800,
+            'i': 9,
+            'ix': 1000,
+            'iy': 1100,
+            'pc': 1200,
+            'r': 131,
+            'sp': 14,
+            '^a': 15,
+            '^bc': 1617,
+            '^de': 1819,
+            '^f': 20,
+            '^hl': 2122
+        }
+        state = {
+            '7ffd': 17,
+            'ay[0]': 1,
+            'ay[1]': 2,
+            'ay[2]': 3,
+            'ay[3]': 4,
+            'ay[4]': 5,
+            'ay[5]': 6,
+            'ay[6]': 7,
+            'ay[7]': 8,
+            'ay[8]': 9,
+            'ay[9]': 10,
+            'ay[10]': 11,
+            'ay[11]': 12,
+            'ay[12]': 13,
+            'ay[13]': 14,
+            'ay[14]': 15,
+            'ay[15]': 16,
+            'border': 1,
+            'fffd': 3,
+            'iff': 0,
+            'im': 2,
+            'issue2': 1,
+            'tstates': 12345
+        }
+        self._test_z80(ram, registers, state, '+2')
+
     def test_invalid_state(self):
         self._test_invalid_state()
 
     def _test_invalid_registers(self):
         self._test_invalid_registers()
```

### Comparing `skoolkit-9.1/tests/test_snaskool.py` & `skoolkit-9.2/tests/test_snaskool.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_tap2sna.py` & `skoolkit-9.2/tests/test_tap2sna.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,69 +2,81 @@
 import os
 from textwrap import dedent
 import urllib
 from zipfile import ZipFile
 from io import BytesIO
 from unittest.mock import patch, Mock
 
-from skoolkittest import (SkoolKitTestCase, Z80_REGISTERS, create_data_block,
+from skoolkittest import (SkoolKitTestCase, create_data_block,
                           create_tap_header_block, create_tap_data_block,
                           create_tzx_header_block, create_tzx_data_block,
                           create_tzx_turbo_data_block, create_tzx_pure_data_block)
-from skoolkit import tap2sna, VERSION, SkoolKitError
+from skoolkit import tap2sna, VERSION, SkoolKitError, CSimulator, CCMIOSimulator
+from skoolkit.cmiosimulator import CMIOSimulator
 from skoolkit.config import COMMANDS
 from skoolkit.loadtracer import LoadTracer
-from skoolkit.snapshot import get_snapshot
+from skoolkit.simulator import Simulator
 
 mock_memory = None
 
 class MockSimulator:
     def __init__(self, *args, **kwargs):
         global simulator
-        self.memory = mock_memory
+        self.memory = mock_memory or [1] * 65536
         self.opcodes = [self.in_a_n] * 256
-        self.registers = [0x80] * 26
+        self.registers = [0x80] * 28
+        self.registers[26] = 0 # Interrupts disabled
         self.frame_duration = 69888
         self.int_active = 32
-        self.iff = 0
-        self.imode = 1
+        self.config = kwargs.get('config') or args[3]
 
         # The NOP at 49151 is a dummy instruction that triggers LoadTracer's
         # read_port() (via in_a_n() below) and starts the tape running.
         self.registers[24] = 49151 # PC
-        if self.memory:
-            self.stop = max(a for a in range(49152, 65536) if self.memory[a]) + 2
+        self.stop = max(a for a in range(49152, 65536) if self.memory[a]) + 2
         simulator = self
 
     def set_tracer(self, tracer, *args, **kwargs):
         self.tracer = tracer
         self.set_tracer_args = args
 
     def in_a_n(self):
         self.tracer.read_port(self.registers, 0xFE)
         self.registers[24] += 1 # PC
         if self.registers[24] == self.stop:
-            self.registers[25] = self.tracer.edges[self.tracer.block_max_index]
+            self.registers[25] = self.tracer.edges[self.tracer.state[3]]
         else:
             self.registers[25] += 1000 # T-states
 
 def mock_make_snapshot(*args):
     global make_snapshot_args
     make_snapshot_args = args
 
 def mock_config(name):
     return {k: v[0] for k, v in COMMANDS[name].items()}
 
-def mock_write_snapshot(memory, namespace, fname):
-    global snapshot, options
-    if len(memory) == 8:
-        snapshot = memory
+def mock_write_snapshot(fname, ram, registers, state):
+    global s_fname, snapshot, s_banks, s_reg, s_state
+    s_fname = fname
+    snapshot = [0] * 65536
+    if len(ram) == 8:
+        s_banks = ram
+        page = 0
+        for spec in state:
+            if spec.startswith('7ffd='):
+                page = int(spec[5:]) % 8
+                break
+        snapshot[0x4000:0x8000] = ram[5]
+        snapshot[0x8000:0xC000] = ram[2]
+        snapshot[0xC000:] = ram[page]
     else:
-        snapshot = [0] * 16384 + memory
-    options = namespace
+        s_banks = None
+        snapshot[0x4000:] = ram
+    s_reg = registers
+    s_state = state
 
 class MockKeyboardTracer:
     def __init__(self, simulator, load, kb_delay):
         global kbtracer
         self.simulator = simulator
         self.load = load
         self.kb_delay = kb_delay
@@ -76,64 +88,64 @@
         self.timeout = timeout
         self.tracefile = tracefile
         self.trace_line = trace_line
         self.prefix = prefix
         self.byte_fmt = byte_fmt
         self.word_fmt = word_fmt
         self.border = id(self)
-        self.out7ffd = id(self) + 1
+        self.out7ffd = 0
         self.outfffd = id(self) + 2
         self.ay = [id(self) + 3] * 16
         self.outfe = id(self) + 4
         self.simulator.registers[25] = 70000 * len(self.load)
         self.run_called = True
 
 class MockLoadTracer:
-    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity, finish_tape,
+    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity,
                  in_min_addr, accel_dec_a, list_accelerators, border, out7ffd, outfffd, ay, outfe):
         global load_tracer
         self.simulator = simulator
         self.accelerators_in = accelerators
         self.blocks = blocks
         self.pause = pause
         self.first_edge = first_edge
         self.polarity = polarity
-        self.finish_tape = finish_tape
         self.in_min_addr = in_min_addr
         self.accel_dec_a = accel_dec_a
         self.list_accelerators = list_accelerators
         self.border = border
         self.out7ffd = out7ffd
         self.outfffd = outfffd
         self.ay = ay
         self.outfe = outfe
         self.accelerators = {'speedlock': 1, 'bleepload': 2}
         self.inc_b_misses = 3
         self.dec_b_misses = 4
         self.run_called = False
         load_tracer = self
 
-    def run(self, stop, fast_load, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt):
+    def run(self, stop, fast_load, finish_tape, timeout, tracefile, trace_line, prefix, byte_fmt, word_fmt):
         self.stop = stop
         self.fast_load = fast_load
+        self.finish_tape = finish_tape
         self.timeout = timeout
         self.tracefile = tracefile
         self.trace_line = trace_line
         self.prefix = prefix
         self.byte_fmt = byte_fmt
         self.word_fmt = word_fmt
         self.run_called = True
 
 class TestLoadTracer(LoadTracer):
-    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity, finish_tape,
+    def __init__(self, simulator, blocks, accelerators, pause, first_edge, polarity,
                  in_min_addr, accel_dec_a, list_accelerators, border, out7ffd, outfffd, ay, outfe):
         # Ensure that accelerators are in a predictable order when testing the
         # {dec,inc}_b_auto() methods on LoadTracer
         acc_sorted = sorted(accelerators, key=lambda a: a.name)
-        super().__init__(simulator, blocks, acc_sorted, pause, first_edge, polarity, finish_tape,
+        super().__init__(simulator, blocks, acc_sorted, pause, first_edge, polarity,
                  in_min_addr, accel_dec_a, list_accelerators, border, out7ffd, outfffd, ay, outfe)
 
 class InterruptedTracer:
     def __init__(self, *args):
         self.border = 0
         self.out7ffd = 0
         self.outfffd = 0
@@ -141,17 +153,17 @@
         self.outfe = 0
 
     def run(self, *args):
         raise KeyboardInterrupt()
 
 class Tap2SnaTest(SkoolKitTestCase):
     def setUp(self):
-        global snapshot, options, kbtracer, load_tracer, simulator
+        global kbtracer, load_tracer, simulator
         super().setUp()
-        snapshot = options = kbtracer = load_tracer = simulator = None
+        kbtracer = load_tracer = simulator = None
 
     def _write_tap(self, blocks, zip_archive=False, tap_name=None):
         tap_data = []
         for block in blocks:
             tap_data.extend(block)
         if zip_archive:
             archive_fname = self.write_bin_file(suffix='.zip')
@@ -186,34 +198,31 @@
             create_tap_header_block(code, start, len(data)),
             create_tap_data_block(data)
         ]
         if write:
             return self._write_tap(blocks), basic_data
         return blocks, basic_data
 
-    def _get_snapshot(self, start=16384, data=None, options='', load_options=None, blocks=None, tzx=False, page=None):
+    def _load_tape(self, start=16384, data=None, options='', load_options=None, blocks=None, tzx=False):
         if blocks is None:
             blocks = [create_tap_data_block(data)]
         if tzx:
             tape_file = self._write_tzx(blocks)
         else:
             tape_file = self._write_tap(blocks)
-        z80file = 'out.z80'
         if load_options is None:
-            load_options = '--ram load=1,{}'.format(start)
-        output, error = self.run_tap2sna(f'{load_options} {options} {tape_file} {z80file}')
-        self.assertEqual(output, 'Writing {}\n'.format(z80file))
+            load_options = f'--ram load=1,{start}'
+        output, error = self.run_tap2sna(f'{load_options} {options} {tape_file} out.z80')
+        self.assertEqual(output, 'Writing out.z80\n')
         self.assertEqual(error, '')
-        return get_snapshot(z80file, page)
 
     def _test_bad_spec(self, option, exp_error):
         tapfile = self._write_tap([create_tap_data_block([1])])
-        z80fname = '{}/test.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'--ram load=1,16384 {option} {tapfile} {z80fname}')
+            self.run_tap2sna(f'--ram load=1,16384 {option} {tapfile} test.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tapfile}: {exp_error}')
 
     def _format_output(self, text):
         out_lines = []
         for line in text.strip().split('\n'):
             if '\x08' in line:
                 shown = []
@@ -230,15 +239,15 @@
                 out_lines.append(''.join(shown).rstrip())
             else:
                 out_lines.append(line.rstrip())
         return out_lines
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     def test_default_option_values(self):
-        self.run_tap2sna('in.tap {}/out.z80'.format(self.make_directory()))
+        self.run_tap2sna('in.tap out.z80')
         options = make_snapshot_args[1]
         self.assertIsNone(options.output_dir)
         self.assertIsNone(options.stack)
         self.assertEqual([], options.ram_ops)
         self.assertEqual([], options.reg)
         self.assertIsNone(options.start)
         self.assertEqual([], options.sim_load_config)
@@ -284,84 +293,89 @@
             output, error = self.run_tap2sna(args, catch_exit=2)
             self.assertEqual(output, '')
             self.assertTrue(error.startswith('usage:'))
 
     def test_accelerator_unrecognised(self):
         blocks = [create_tap_data_block([0])]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'-c accelerator=nope {tapfile} {z80file}')
+            self.run_tap2sna(f'-c accelerator=nope {tapfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tapfile}: Unrecognised accelerator: nope')
         self.assertEqual(self.err.getvalue(), '')
 
     def test_unrecognised_sim_load_configuration_parameter(self):
         blocks = [create_tap_data_block([0])]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'-c foo=bar {tapfile} {z80file}')
+            self.run_tap2sna(f'-c foo=bar {tapfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tapfile}: Invalid sim-load configuration parameter: foo')
         self.assertEqual(self.err.getvalue(), '')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_no_snapshot_argument_with_tap_file(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         exp_z80_fname = tapfile[:-4] + '.z80'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_z80_fname))
+        self.assertEqual(s_fname, exp_z80_fname)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_no_snapshot_argument_with_tzx_file(self):
         tzxfile = self._write_tzx([create_tzx_data_block([0])])
         exp_z80_fname = tzxfile[:-4] + '.z80'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {tzxfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_z80_fname))
+        self.assertEqual(s_fname, exp_z80_fname)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_no_snapshot_argument_with_zip_file(self):
         zipfile = self._write_tap([create_tap_data_block([0])], True, 'great_game.tap')
         exp_z80_fname = 'great_game.z80'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {zipfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_z80_fname))
+        self.assertEqual(s_fname, exp_z80_fname)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_no_snapshot_argument_with_unconventionally_named_tap_file(self):
         tapfile = self.write_bin_file(create_tap_data_block([0]), suffix='.tape')
         exp_z80_fname = tapfile + '.z80'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_z80_fname))
+        self.assertEqual(s_fname, exp_z80_fname)
 
-    @patch.object(tap2sna, 'urlopen', Mock(return_value=BytesIO(bytearray(create_tap_data_block([0])))))
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'urlopen', Mock(return_value=BytesIO(bytearray(create_tap_data_block([1])))))
     def test_no_snapshot_argument_with_remote_download(self):
         url = 'http://example.com/test.tap'
         exp_z80_fname = 'test.z80'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {url}')
         self.assertEqual(error, '')
-        self.assertTrue(os.path.isfile(exp_z80_fname))
+        self.assertEqual(s_fname, exp_z80_fname)
+        self.assertEqual(snapshot[16384], 1)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tape_file_with_hash_in_name(self):
         code = [1, 2, 3, 4, 5]
         start = 24576
         tap_data = create_tap_data_block(code)
-        tapfile = '{}/game#2.tap'.format(self.make_directory())
+        tapfile = 'game#2.tap'
         self.write_bin_file(tap_data, tapfile)
         output, error = self.run_tap2sna(f'--ram load=1,{start} {tapfile} out.z80')
         self.assertEqual(error, '')
         self.assertEqual(code, snapshot[start:start + len(code)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_d(self):
-        odir = '{}/tap2sna'.format(self.make_directory())
+        odir = 'tap2sna'
         tapfile = self._write_tap([create_tap_data_block([0])])
         z80_fname = 'test.z80'
         for option in ('-d', '--output-dir'):
-            output, error = self.run_tap2sna('{} {} --ram load=1,16384 {} {}'.format(option, odir, tapfile, z80_fname))
+            output, error = self.run_tap2sna(f'{option} {odir} --ram load=1,16384 {tapfile} {z80_fname}')
             self.assertEqual(len(error), 0)
-            self.assertTrue(os.path.isfile(os.path.join(odir, z80_fname)))
+            self.assertEqual(s_fname, os.path.join(odir, z80_fname))
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     @patch.object(tap2sna, 'get_config', mock_config)
     def test_option_I(self):
         self.run_tap2sna('-I TraceLine=Hello in.tap out.z80')
         options, z80, config = make_snapshot_args[1:4]
         self.assertEqual(['TraceLine=Hello'], options.params)
@@ -378,38 +392,36 @@
         options, z80, config = make_snapshot_args[1:4]
         self.assertEqual(['TraceLine=Goodbye'], options.params)
         self.assertEqual(config['TraceLine'], 'Goodbye')
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     def test_options_p_stack(self):
         for option, stack in (('-p', 24576), ('--stack', 49152)):
-            output, error = self.run_tap2sna('{} {} in.tap {}/out.z80'.format(option, stack, self.make_directory()))
+            output, error = self.run_tap2sna(f'{option} {stack} in.tap out.z80')
             self.assertEqual(output, '')
             self.assertEqual(error, '')
             options = make_snapshot_args[1]
-            self.assertEqual(['sp={}'.format(stack)], options.reg)
+            self.assertEqual([f'sp={stack}'], options.reg)
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     def test_options_p_stack_with_hex_address(self):
         for option, stack in (('-p', '0x6ff0'), ('--stack', '0x9ABC')):
-            output, error = self.run_tap2sna('{} {} in.tap {}/out.z80'.format(option, stack, self.make_directory()))
+            output, error = self.run_tap2sna(f'{option} {stack} in.tap out.z80')
             self.assertEqual(output, '')
             self.assertEqual(error, '')
             options = make_snapshot_args[1]
             self.assertEqual(['sp={}'.format(int(stack[2:], 16))], options.reg)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_p(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
-        z80file = '{}/out.z80'.format(self.make_directory())
         stack = 32768
-        output, error = self.run_tap2sna(f'-p {stack} --ram load=1,16384 {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'-p {stack} --ram load=1,16384 {tapfile} out.z80')
         self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(10)
-        self.assertEqual(z80_header[8] + 256 * z80_header[9], stack)
+        self.assertIn(f'sp={stack}', s_reg)
 
     @patch.object(tap2sna, 'get_config', mock_config)
     def test_option_show_config(self):
         output, error = self.run_tap2sna('--show-config', catch_exit=0)
         self.assertEqual(error, '')
         exp_output = r"""
             [tap2sna]
@@ -434,42 +446,40 @@
             TraceOperand=$,02X,04X
         """
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     def test_options_s_start(self):
         start = 30000
-        exp_reg = ['pc={}'.format(start)]
+        exp_reg = [f'pc={start}']
         for option in ('-s', '--start'):
-            output, error = self.run_tap2sna('{} {} --ram load=1,32768 in.tap {}/out.z80'.format(option, start, self.make_directory()))
+            output, error = self.run_tap2sna(f'{option} {start} --ram load=1,32768 in.tap out.z80')
             self.assertEqual(output, '')
             self.assertEqual(error, '')
             options = make_snapshot_args[1]
             self.assertEqual(exp_reg, options.reg)
 
     @patch.object(tap2sna, 'make_snapshot', mock_make_snapshot)
     def test_options_s_start_with_hex_address(self):
         start = 30000
-        exp_reg = ['pc={}'.format(start)]
+        exp_reg = [f'pc={start}']
         for option in ('-s', '--start'):
-            output, error = self.run_tap2sna('{} 0x{:04X} --ram load=1,32768 in.tap {}/out.z80'.format(option, start, self.make_directory()))
+            output, error = self.run_tap2sna(f'{option} 0x{start:04X} --ram load=1,32768 in.tap out.z80')
             self.assertEqual(output, '')
             self.assertEqual(error, '')
             options = make_snapshot_args[1]
             self.assertEqual(exp_reg, options.reg)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_s(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
-        z80file = '{}/out.z80'.format(self.make_directory())
         start = 40000
-        output, error = self.run_tap2sna(f'-s {start} --ram load=1,16384 {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'-s {start} --ram load=1,16384 {tapfile} out.z80')
         self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(34)
-        self.assertEqual(z80_header[32] + 256 * z80_header[33], start)
+        self.assertIn(f'pc={start}', s_reg)
 
     def test_option_tape_analysis_with_no_tape(self):
         output, error = self.run_tap2sna('--tape-analysis', catch_exit=2)
         self.assertEqual(output, '')
         self.assertTrue(error.startswith('usage:'))
 
     def test_option_tape_analysis(self):
@@ -602,171 +612,169 @@
                2200000    0  Pause (3500 T-states)
                2203500    0  Pulse (256 T-states)
                2203756    1  Pulse (512 T-states)
                2204268    0  Data (4 bytes; 500/1000 T-states)
         """
         self.assertEqual(dedent(exp_output).lstrip(), output)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_name(self):
         code1 = [1, 2, 3, 4, 5]
         code1_start = 24576
         tap1_data = create_tap_data_block(code1)
         tap1_fname = 'code1.tap'
         code2 = [6, 7, 8]
         code2_start = 32768
         tap2_data = create_tap_data_block(code2)
         tap2_fname = 'code2.tap'
-        zipfile = '{}/tapes.zip'.format(self.make_directory())
+        zipfile = 'tapes.zip'
         with ZipFile(zipfile, 'w') as archive:
             archive.writestr(tap1_fname, bytearray(tap1_data))
             archive.writestr(tap2_fname, bytearray(tap2_data))
         output, error = self.run_tap2sna(f'--tape-name {tap2_fname} --ram load=1,{code2_start} {zipfile} out.z80')
         self.assertEqual(error, '')
         self.assertEqual(code2, snapshot[code2_start:code2_start + len(code2)])
 
     def test_option_tape_name_with_invalid_name(self):
         tap_data = create_tap_header_block(start=32768) + create_tap_data_block([1, 2, 3])
-        zipfile = '{}/tape.zip'.format(self.make_directory())
+        zipfile = 'tape.zip'
         with ZipFile(zipfile, 'w') as archive:
             archive.writestr('data.tap', bytearray(tap_data))
         with self.assertRaises(SkoolKitError) as cm:
             self.run_tap2sna(f'--tape-name code.tap {zipfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting tape.zip: No file named "code.tap" in the archive')
         self.assertEqual(self.err.getvalue(), '')
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_start_with_tap(self):
         blocks = [
             create_tap_header_block(),
             create_tap_data_block([4, 5, 6]),
         ]
         tapfile = self._write_tap(blocks)
         output, error = self.run_tap2sna(f'--tape-start 2 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_start_with_tzx(self):
         blocks = [
             create_tzx_header_block(),
             create_tzx_data_block([4, 5, 6]),
         ]
         tzxfile = self._write_tzx(blocks)
         output, error = self.run_tap2sna(f'--tape-start 2 {tzxfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_stop_with_tap(self):
         blocks = [
             create_tap_header_block(),
             create_tap_data_block([4, 5, 6]),
         ]
         tapfile = self._write_tap(blocks)
         output, error = self.run_tap2sna(f'--tape-stop 2 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_stop_with_tzx(self):
         blocks = [
             create_tzx_header_block(),
             create_tzx_data_block([4, 5, 6]),
         ]
         tzxfile = self._write_tzx(blocks)
         output, error = self.run_tap2sna(f'--tape-stop 2 {tzxfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_option_tape_sum(self):
         code = [1, 2, 3]
         code_start = 49152
         tap_data = create_tap_data_block(code)
         md5sum = hashlib.md5(bytearray(tap_data)).hexdigest()
-        zipfile = '{}/tape.zip'.format(self.make_directory())
+        zipfile = 'tape.zip'
         with ZipFile(zipfile, 'w') as archive:
             archive.writestr('data.tap', bytearray(tap_data))
         output, error = self.run_tap2sna(f'--tape-sum {md5sum} --ram load=1,{code_start} {zipfile} out.z80')
         self.assertEqual(error, '')
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
 
     def test_option_tape_sum_with_incorrect_value(self):
         code = [1, 2, 3]
         code_start = 49152
         tap_data = create_tap_header_block(start=code_start) + create_tap_data_block(code)
         md5sum = hashlib.md5(bytearray(tap_data)).hexdigest()
-        zipfile = '{}/tape.zip'.format(self.make_directory())
+        zipfile = 'tape.zip'
         wrongsum = '0' * 32
         with ZipFile(zipfile, 'w') as archive:
             archive.writestr('data.tap', bytearray(tap_data))
         with self.assertRaises(SkoolKitError) as cm:
             self.run_tap2sna(f'--tape-sum {wrongsum} {zipfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting tape.zip: Checksum mismatch: Expected {wrongsum}, actually {md5sum}')
         self.assertEqual(self.err.getvalue(), '')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     @patch.object(tap2sna, 'urlopen')
     def test_option_u(self, mock_urlopen):
-        mock_urlopen.return_value = BytesIO(bytes(create_tap_data_block([1])))
+        tap_data = bytes(create_tap_data_block([1]))
         url = 'http://example.com/test.tap'
         for option, user_agent in (('-u', 'Wget/1.18'), ('--user-agent', 'SkoolKit/6.3')):
-            output, error = self.run_tap2sna('{} {} --ram load=1,23296 {} {}/test.z80'.format(option, user_agent, url, self.make_directory()))
-            self.assertTrue(output.startswith('Downloading {}\n'.format(url)))
+            mock_urlopen.return_value = BytesIO(tap_data)
+            output, error = self.run_tap2sna(f'{option} {user_agent} --ram load=1,23296 {url} test.z80')
+            self.assertTrue(output.startswith(f'Downloading {url}\n'))
             self.assertEqual(error, '')
             request = mock_urlopen.call_args[0][0]
             self.assertEqual({'User-agent': user_agent}, request.headers)
             self.assertEqual(snapshot[23296], 1)
-            mock_urlopen.return_value.seek(0)
 
     def test_option_V(self):
         for option in ('-V', '--version'):
             output, error = self.run_tap2sna(option, catch_exit=0)
-            self.assertEqual(output, 'SkoolKit {}\n'.format(VERSION))
+            self.assertEqual(output, f'SkoolKit {VERSION}\n')
 
     def test_nonexistent_tap_file(self):
-        odir = self.make_directory()
-        tap_fname = '{}/test.tap'.format(odir)
-        z80_fname = 'test.z80'
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna('{} {}/{}'.format(tap_fname, odir, z80_fname))
-        self.assertEqual(cm.exception.args[0], f'Error while converting test.tap: {tap_fname}: file not found')
+            self.run_tap2sna(f'non-existent.tap test.z80')
+        self.assertEqual(cm.exception.args[0], f'Error while converting non-existent.tap: non-existent.tap: file not found')
 
     def test_load_nonexistent_block(self):
         tapfile = self._write_tap([create_tap_data_block([1])])
         block_num = 2
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna('--ram load={},16384 {} {}/test.z80'.format(block_num, tapfile, self.make_directory()))
+            self.run_tap2sna(f'--ram load={block_num},16384 {tapfile} test.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tapfile}: Block {block_num} not found')
 
     def test_zip_archive_with_no_tape_file(self):
         archive_fname = self.write_bin_file(suffix='.zip')
         with ZipFile(archive_fname, 'w') as archive:
             archive.writestr('game.txt', bytearray((1, 2)))
         z80_fname = 'test.z80'
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna('{} {}/{}'.format(archive_fname, self.make_directory(), z80_fname))
+            self.run_tap2sna(f'{archive_fname} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {archive_fname}: No TAP or TZX file found')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_call(self):
         ram_module = """
             def fix(snapshot):
                 snapshot[65280:] = list(range(256))
         """
         module_dir = self.make_directory()
         module_path = os.path.join(module_dir, 'ram.py')
         module = self.write_text_file(dedent(ram_module).strip(), path=module_path)
         blocks = [create_tap_data_block([0])]
         load_options = f'--ram load=1,16384 --ram call={module_dir}:ram.fix'
-        snapshot = self._get_snapshot(load_options=load_options, blocks=blocks)
+        self._load_tape(load_options=load_options, blocks=blocks)
         self.assertEqual(list(range(256)), snapshot[65280:])
 
     def test_ram_call_nonexistent_module(self):
         self._test_bad_spec('--ram call=no:nope.never', "Failed to import object nope.never: No module named 'nope'")
 
     def test_ram_call_nonexistent_function(self):
         module_dir = self.make_directory()
@@ -791,383 +799,403 @@
     def test_ram_call_function_with_two_positional_arguments(self):
         ram_module = "def fix(snapshot, what): pass"
         module_dir = self.make_directory()
         module_path = os.path.join(module_dir, 'twoargs.py')
         module = self.write_text_file(ram_module, path=module_path)
         self._test_bad_spec(f'--ram call={module_dir}:twoargs.fix', "fix() missing 1 required positional argument: 'what'")
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load(self):
         start = 16384
         data = [237, 1, 1, 1, 1, 1]
-        snapshot = self._get_snapshot(start, data)
+        self._load_tape(start, data)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_with_length(self):
         start = 16384
         data = [1, 2, 3, 4]
         length = 2
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,{},{}'.format(start, length))
+        self._load_tape(start, data, load_options=f'--ram load=1,{start},{length}')
         self.assertEqual(data[:length], snapshot[start:start + length])
         self.assertEqual([0] * (len(data) - length), snapshot[start + length:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_with_step(self):
         start = 16385
         data = [5, 4, 3]
         step = 2
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,{},,{}'.format(start, step))
+        self._load_tape(start, data, load_options=f'--ram load=1,{start},,{step}')
         self.assertEqual(data, snapshot[start:start + len(data) * step:step])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_with_offset(self):
         start = 16384
         data = [15, 16, 17]
         offset = 5
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,{},,,{}'.format(start, offset))
+        self._load_tape(start, data, load_options=f'--ram load=1,{start},,,{offset}')
         self.assertEqual(data, snapshot[start + offset:start + offset + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_with_increment(self):
         start = 65534
         data = [8, 9, 10]
         inc = 65533
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,{},,,,{}'.format(start, inc))
+        self._load_tape(start, data, load_options=f'--ram load=1,{start},,,,{inc}')
         self.assertEqual([data[2]] + data[:2], snapshot[65533:])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_wraparound_with_step(self):
         start = 65535
         data = [23, 24, 25]
         step = 8193
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,{},,{}'.format(start, step))
+        self._load_tape(start, data, load_options=f'--ram load=1,{start},,{step}')
         self.assertEqual(snapshot[start], data[0])
         self.assertEqual(snapshot[(start + 2 * step) & 65535], data[2])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_with_hexadecimal_parameters(self):
         start = 30000
         data = [1, 2, 3]
         step = 2
         offset = 3
         inc = 0
-        snapshot = self._get_snapshot(start, data, load_options='--ram load=1,0x{:04x},0x{:04x},0x{:04x},0x{:04x},0x{:04x}'.format(start, len(data), step, offset, inc))
+        self._load_tape(start, data, load_options=f'--ram load=1,0x{start:04x},0x{len(data):04x},0x{step:04x},0x{offset:04x},0x{inc:04x}')
         self.assertEqual(data, snapshot[30003:30008:2])
 
     def test_ram_load_bad_address(self):
         self._test_bad_spec('--ram load=1,abcde', 'Invalid integer in load spec: 1,abcde')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_single_address(self):
         start = 16384
         data = [4, 5, 6]
         poke_addr = 16386
         poke_val = 255
-        snapshot = self._get_snapshot(start, data, '--ram poke={},{}'.format(poke_addr, poke_val))
+        self._load_tape(start, data, f'--ram poke={poke_addr},{poke_val}')
         self.assertEqual(data[:2], snapshot[start:start + 2])
         self.assertEqual(snapshot[poke_addr], poke_val)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_address_range(self):
         start = 16384
         data = [1, 1, 1]
         poke_addr_start = 16384
         poke_addr_end = 16383 + len(data)
         poke_val = 254
-        snapshot = self._get_snapshot(start, data, '--ram poke={}-{},{}'.format(poke_addr_start, poke_addr_end, poke_val))
+        self._load_tape(start, data, f'--ram poke={poke_addr_start}-{poke_addr_end},{poke_val}')
         self.assertEqual([poke_val] * len(data), snapshot[poke_addr_start:poke_addr_end + 1])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_address_range_with_xor(self):
         start = 30000
         data = [1, 2, 3]
         end = start + len(data) - 1
         xor_val = 129
-        snapshot = self._get_snapshot(start, data, '--ram poke={}-{},^{}'.format(start, end, xor_val))
+        self._load_tape(start, data, f'--ram poke={start}-{end},^{xor_val}')
         exp_data = [b ^ xor_val for b in data]
         self.assertEqual(exp_data, snapshot[start:end + 1])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_address_range_with_add(self):
         start = 40000
         data = [100, 200, 32]
         end = start + len(data) - 1
         add_val = 130
-        snapshot = self._get_snapshot(start, data, '--ram poke={}-{},+{}'.format(start, end, add_val))
+        self._load_tape(start, data, f'--ram poke={start}-{end},+{add_val}')
         exp_data = [(b + add_val) & 255 for b in data]
         self.assertEqual(exp_data, snapshot[start:end + 1])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_address_range_with_step(self):
-        snapshot = self._get_snapshot(16384, [2, 9, 2], '--ram poke=16384-16386-2,253')
+        self._load_tape(16384, [2, 9, 2], '--ram poke=16384-16386-2,253')
         self.assertEqual([253, 9, 253], snapshot[16384:16387])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_hex_address(self):
         address, value = 16385, 253
-        snapshot = self._get_snapshot(16384, [1], '--ram poke=${:X},{}'.format(address, value))
+        self._load_tape(16384, [1], f'--ram poke=${address:X},{value}')
         self.assertEqual(snapshot[address], value)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_0x_hex_values(self):
-        snapshot = self._get_snapshot(16384, [2, 1, 2], '--ram poke=0x4000-0x4002-0x02,0x2a')
+        self._load_tape(16384, [2, 1, 2], '--ram poke=0x4000-0x4002-0x02,0x2a')
         self.assertEqual([42, 1, 42], snapshot[16384:16387])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_poke_with_page_number(self):
         data = [0]
         basic_data = [
             0, 10,  # Line 10
             2, 0,   # Line length
             234,    # REM
             13      # ENTER
         ]
         blocks = [
             create_tap_header_block('basicprog', 10, len(basic_data), 0),
             create_tap_data_block(basic_data)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = 'out.z80'
         pokes = (
             (0, 0x0000, 255),
             (1, 0x4000, 254),
             (2, 0x8000, 253),
             (3, 0xC000, 252),
             (4, 0x3FFF, 251),
             (5, 0x7FFF, 250),
             (6, 0xBFFF, 249),
             (7, 0xFFFF, 248),
         )
         poke_opts = ' '.join(f'--ram poke={p}:{a},{v}' for p, a, v in pokes)
-        output, error = self.run_tap2sna(f'-c machine=128 {poke_opts} {tapfile} {z80file}')
-        self.assertTrue(output.endswith(f'\nWriting {z80file}\n'))
+        output, error = self.run_tap2sna(f'-c machine=128 {poke_opts} {tapfile} out.z80')
+        self.assertTrue(output.endswith(f'\nWriting out.z80\n'))
         self.assertEqual(error, '')
-        snapshot = get_snapshot(z80file, -1)
         for p, a, v in pokes:
-            self.assertEqual(snapshot[p * 0x4000 + (a % 0x4000)], v)
+            self.assertEqual(s_banks[p][a % 0x4000], v)
 
     def test_ram_poke_bad_value(self):
         self._test_bad_spec('--ram poke=1', 'Value missing in poke spec: 1')
         self._test_bad_spec('--ram poke=q', 'Value missing in poke spec: q')
         self._test_bad_spec('--ram poke=p:1,1', 'Invalid page number in poke spec: p:1,1')
         self._test_bad_spec('--ram poke=1,x', 'Invalid value in poke spec: 1,x')
         self._test_bad_spec('--ram poke=x,1', 'Invalid address range in poke spec: x,1')
         self._test_bad_spec('--ram poke=1-y,1', 'Invalid address range in poke spec: 1-y,1')
         self._test_bad_spec('--ram poke=1-3-z,1', 'Invalid address range in poke spec: 1-3-z,1')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_move(self):
         start = 16384
         data = [5, 6, 7]
         src = start
         size = len(data)
         dest = 16387
-        snapshot = self._get_snapshot(start, data, '--ram move={},{},{}'.format(src, size, dest))
+        self._load_tape(start, data, f'--ram move={src},{size},{dest}')
         self.assertEqual(data, snapshot[start:start + len(data)])
         self.assertEqual(data, snapshot[dest:dest + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_move_hex_address(self):
         src, size, dest = 16384, 1, 16385
         value = 3
-        snapshot = self._get_snapshot(src, [value], '--ram move=${:X},{},${:x}'.format(src, size, dest))
+        self._load_tape(src, [value], f'--ram move=${src:X},{size},${dest:x}')
         self.assertEqual(snapshot[dest], value)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_move_0x_hex_values(self):
         src, size, dest = 16385, 1, 16384
         value = 2
-        snapshot = self._get_snapshot(src, [value], '--ram move=0x{:X},0x{:X},0x{:x}'.format(src, size, dest))
+        self._load_tape(src, [value], f'--ram move=0x{src:X},0x{size:X},0x{dest:x}')
         self.assertEqual(snapshot[dest], value)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_move_with_page_number(self):
         data = [0]
         basic_data = [
             0, 10,  # Line 10
             2, 0,   # Line length
             234,    # REM
             13      # ENTER
         ]
         blocks = [
             create_tap_header_block('basicprog', 10, len(basic_data), 0),
             create_tap_data_block(basic_data)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = 'out.z80'
         moves = (
             (5, 22528, 8, 1, 0),
             (5, 17440, 8, 3, 0),
             (5, 17440, 8, None, 8),
             (0, 16376, 8, 4, 49152),
         )
         move_opts = []
         for src_page, src, length, dest_page, dest in moves:
             if dest_page:
                 move_opts.append(f'--ram move={src_page}:{src},{length},{dest_page}:{dest}')
             else:
                 move_opts.append(f'--ram move={src_page}:{src},{length},{dest}')
         move_opts = ' '.join(move_opts)
-        output, error = self.run_tap2sna(f'-c machine=128 {move_opts} {tapfile} {z80file}')
-        self.assertTrue(output.endswith(f'\nWriting {z80file}\n'))
+        output, error = self.run_tap2sna(f'-c machine=128 {move_opts} {tapfile} out.z80')
+        self.assertTrue(output.endswith(f'\nWriting out.z80\n'))
         self.assertEqual(error, '')
-        snapshot = get_snapshot(z80file, -1)
         for src_page, src, length, dest_page, dest in moves:
-            s = src_page * 0x4000 + (src % 0x4000)
-            if dest_page:
-                d = dest_page * 0x4000 + (dest % 0x4000)
-            else:
-                d = src_page * 0x4000 + (dest % 0x4000)
-            self.assertEqual(snapshot[s:s + length], snapshot[d:d + length])
+            s = src % 0x4000
+            d = dest % 0x4000
+            if dest_page is None:
+                dest_page = src_page
+            self.assertEqual(s_banks[src_page][s:s + length], s_banks[dest_page][d:d + length])
 
     def test_ram_move_bad_address(self):
         self._test_bad_spec('--ram move=1', 'Not enough arguments in move spec (expected 3): 1')
         self._test_bad_spec('--ram move=1,2', 'Not enough arguments in move spec (expected 3): 1,2')
         self._test_bad_spec('--ram move=x,2,3', 'Invalid integer in move spec: x,2,3')
         self._test_bad_spec('--ram move=1,y,3', 'Invalid integer in move spec: 1,y,3')
         self._test_bad_spec('--ram move=1,2,z', 'Invalid integer in move spec: 1,2,z')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_sysvars(self):
-        snapshot = self._get_snapshot(23552, [0], '--ram sysvars')
+        self._load_tape(23552, [0], '--ram sysvars')
         self.assertEqual(sum(snapshot[23552:23755]), 7911)
         self.assertEqual(len(snapshot), 65536)
 
     def test_ram_invalid_operation(self):
         self._test_bad_spec('--ram foo=bar', 'Invalid operation: foo=bar')
 
     def test_ram_help(self):
         output, error = self.run_tap2sna('--ram help')
         self.assertTrue(output.startswith('Usage: --ram call=[/path/to/moduledir:]module.function\n'))
         self.assertEqual(error, '')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tap_file_in_zip_archive(self):
         data = [1]
         block = create_tap_data_block(data)
         tap_name = 'game.tap'
         zip_fname = self._write_tap([block], zip_archive=True, tap_name=tap_name)
-        z80file = '{}/out.z80'.format(self.make_directory())
         start = 16385
-        output, error = self.run_tap2sna(f'--ram load=1,{start} {zip_fname} {z80file}')
-        self.assertEqual(output, 'Extracting {}\nWriting {}\n'.format(tap_name, z80file))
+        output, error = self.run_tap2sna(f'--ram load=1,{start} {zip_fname} out.z80')
+        self.assertEqual(output, f'Extracting {tap_name}\nWriting out.z80\n')
         self.assertEqual(error, '')
-        snapshot = get_snapshot(z80file)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
     def test_invalid_tzx_file(self):
         tzxfile = self.write_bin_file([1, 2, 3], suffix='.tzx')
-        z80file = 'test.z80'
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna('{} {}/{}'.format(tzxfile, self.make_directory(), z80file))
+            self.run_tap2sna(f'{tzxfile} test.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tzxfile}: Not a TZX file')
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tape_stops_at_pause_block_with_duration_0(self):
         blocks = [
             create_tzx_header_block(),
             create_tzx_data_block([1, 2, 3]),
             (0x20, 0, 0), # 0x20 Pause 0ms
             create_tzx_data_block([4, 5, 6]),
         ]
         output, error = self.run_tap2sna(self._write_tzx(blocks))
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 2)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tzx_loop(self):
         blocks = [
             (0x24, 2, 0), # 0x24 Loop start
             create_tzx_header_block(),
             create_tzx_data_block([1, 2, 3]),
             (0x25,), # 0x25 Loop end
         ]
         output, error = self.run_tap2sna(self._write_tzx(blocks))
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 4)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tape_stops_at_tzx_block_type_0x2A_in_48k_mode(self):
         blocks = [
             create_tzx_header_block(),
             create_tzx_data_block([1, 2, 3]),
             (0x2A, 0, 0, 0, 0), # 0x2A Stop the tape if in 48K mode
             create_tzx_data_block([4, 5, 6]),
         ]
         output, error = self.run_tap2sna(self._write_tzx(blocks))
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 2)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tape_does_not_stop_at_tzx_block_type_0x2A_in_128k_mode(self):
         blocks = [
             create_tzx_header_block(),
             create_tzx_data_block([1, 2, 3]),
             (0x2A, 0, 0, 0, 0), # 0x2A Stop the tape if in 48K mode
             create_tzx_data_block([4, 5, 6]),
         ]
         tzxfile = self._write_tzx(blocks)
         output, error = self.run_tap2sna(f'-c machine=128 {tzxfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 3)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tzx_block_type_0x10(self):
         data = [1, 2, 4]
         start = 16386
         block = create_tzx_data_block(data)
-        snapshot = self._get_snapshot(start, blocks=[block], tzx=True)
+        self._load_tape(start, blocks=[block], tzx=True)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tzx_block_type_0x11(self):
         data = [2, 3, 5]
         block = [17] # Block ID
         block.extend([0] * 15)
         data_block = create_data_block(data)
         length = len(data_block)
         block.extend((length % 256, length // 256, 0))
         block.extend(data_block)
         start = 16387
-        snapshot = self._get_snapshot(start, blocks=[block], tzx=True)
+        self._load_tape(start, blocks=[block], tzx=True)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_tzx_block_type_0x14(self):
         data = [7, 11, 13]
         block = [20] # Block ID
         block.extend([0] * 7)
         data_block = create_data_block(data)
         length = len(data_block)
         block.extend((length % 256, length // 256, 0))
         block.extend(data_block)
         start = 16388
-        snapshot = self._get_snapshot(start, blocks=[block], tzx=True)
+        self._load_tape(start, blocks=[block], tzx=True)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_load_first_byte_of_block(self):
         data = [1, 2, 3, 4, 5]
         block = [20] # Block ID
         block.extend([0] * 7)
         length = len(data)
         block.extend((length % 256, length // 256, 0))
         block.extend(data)
         start = 16389
-        load_options = '--ram load=+1,{}'.format(start)
-        snapshot = self._get_snapshot(load_options=load_options, blocks=[block], tzx=True)
+        load_options = f'--ram load=+1,{start}'
+        self._load_tape(load_options=load_options, blocks=[block], tzx=True)
         exp_data = data[:-1]
         self.assertEqual(exp_data, snapshot[start:start + len(exp_data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_load_last_byte_of_block(self):
         data = [1, 2, 3, 4, 5]
         block = [20] # Block ID
         block.extend([0] * 7)
         length = len(data)
         block.extend((length % 256, length // 256, 0))
         block.extend(data)
         start = 16390
-        load_options = '--ram load=1+,{}'.format(start)
-        snapshot = self._get_snapshot(load_options=load_options, blocks=[block], tzx=True)
+        load_options = f'--ram load=1+,{start}'
+        self._load_tape(load_options=load_options, blocks=[block], tzx=True)
         exp_data = data[1:]
         self.assertEqual(exp_data, snapshot[start:start + len(exp_data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_load_first_and_last_bytes_of_block(self):
         data = [1, 2, 3, 4, 5]
         block = [20] # Block ID
         block.extend([0] * 7)
         length = len(data)
         block.extend((length % 256, length // 256, 0))
         block.extend(data)
         start = 16391
-        load_options = '--ram load=+1+,{}'.format(start)
-        snapshot = self._get_snapshot(load_options=load_options, blocks=[block], tzx=True)
+        load_options = f'--ram load=+1+,{start}'
+        self._load_tape(load_options=load_options, blocks=[block], tzx=True)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_ram_load_tzx_with_unsupported_blocks(self):
         blocks = []
         blocks.append((18, 0, 0, 0, 0)) # 0x12 Pure Tone
         blocks.append((19, 2, 0, 0, 0, 0)) # 0x13 Pulse sequence
         blocks.append([21] + [0] * 5 + [1, 0, 0, 0]) # 0x15 Direct Recording
         blocks.append([24, 11] + [0] * 14) # 0x18 CSW Recording
         blocks.append([25, 20] + [0] * 23) # 0x19 Generalized Data Block
@@ -1187,178 +1215,150 @@
         blocks.append((50, 4, 0, 1, 0, 1, 33)) # 0x32 Archive info
         blocks.append((51, 1, 0, 0, 0)) # 0x33 Hardware type
         blocks.append([53] + [32] * 16 + [1] + [0] * 4) # 0x35 Custom info block
         blocks.append([90] + [0] * 9) # 0x5A "Glue" block
         data = [2, 4, 6]
         blocks.append(create_tzx_data_block(data))
         start = 16388
-        load_options = '--ram load={},{}'.format(len(blocks), start)
-        snapshot = self._get_snapshot(load_options=load_options, blocks=blocks, tzx=True)
+        load_options = f'--ram load={len(blocks)},{start}'
+        self._load_tape(load_options=load_options, blocks=blocks, tzx=True)
         self.assertEqual(data, snapshot[start:start + len(data)])
 
     def test_tzx_with_unknown_block(self):
         block_id = 22
         block = [block_id, 0]
         tzxfile = self._write_tzx([block])
-        z80file = 'test.z80'
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna('{} {}/{}'.format(tzxfile, self.make_directory(), z80file))
+            self.run_tap2sna(f'{tzxfile} test.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tzxfile}: Unknown TZX block ID: 0x{block_id:X}')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_default_register_values(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        exp_reg_values = {
-            'a': 0, 'f': 0, 'bc': 0, 'de': 0, 'hl': 0, 'i': 63, 'r': 0,
-            '^bc': 0, '^de': 0, '^hl': 0, 'ix': 0, 'iy': 23610, 'sp': 0, 'pc': 0
-        }
-        output, error = self.run_tap2sna('--ram load=1,16384 {} {}'.format(tapfile, z80file))
-        self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(34)
-        for reg, exp_value in exp_reg_values.items():
-            offset = Z80_REGISTERS[reg]
-            size = len(reg) - 1 if reg.startswith('^') else len(reg)
-            if size == 1:
-                value = z80_header[offset]
-            else:
-                value = z80_header[offset] + 256 * z80_header[offset + 1]
-            self.assertEqual(value, exp_value)
+        output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual([], s_reg)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_reg(self):
         block = create_tap_data_block([1])
         tapfile = self._write_tap([block])
         reg_dicts = (
             {'^a': 1, '^b': 2, '^c': 3, '^d': 4, '^e': 5, '^f': 6, '^h': 7, '^l': 8},
             {'a': 9, 'b': 10, 'c': 11, 'd': 12, 'e': 13, 'f': 14, 'h': 15, 'l': 16, 'r': 129},
             {'^bc': 258, '^de': 515, '^hl': 65534, 'bc': 259, 'de': 516, 'hl': 65533},
             {'i': 13, 'ix': 1027, 'iy': 1284, 'pc': 1541, 'r': 23, 'sp': 32769}
         )
         for reg_dict in reg_dicts:
-            reg_options = ' '.join(['--reg {}={}'.format(r, v) for r, v in reg_dict.items()])
-            z80file = '{}/out.z80'.format(self.make_directory())
-            output, error = self.run_tap2sna(f'--ram load=1,16384 {reg_options} {tapfile} {z80file}')
+            exp_reg = [f'{r}={v}' for r, v in reg_dict.items()]
+            reg_options = ' '.join([f'--reg {spec}' for spec in exp_reg])
+            output, error = self.run_tap2sna(f'--ram load=1,16384 {reg_options} {tapfile} out.z80')
             self.assertEqual(error, '')
-            with open(z80file, 'rb') as f:
-                z80_header = f.read(34)
-            for reg, exp_value in reg_dict.items():
-                offset = Z80_REGISTERS[reg]
-                size = len(reg) - 1 if reg.startswith('^') else len(reg)
-                if size == 1:
-                    value = z80_header[offset]
-                else:
-                    value = z80_header[offset] + 256 * z80_header[offset + 1]
-                self.assertEqual(value, exp_value)
-                if reg == 'r' and exp_value & 128:
-                    self.assertEqual(z80_header[12] & 1, 1)
+            self.assertEqual(exp_reg, s_reg)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_reg_hex_value(self):
         tapfile = self._write_tap([create_tap_data_block([1])])
-        z80fname = '{}/test.z80'.format(self.make_directory())
         reg_value = 35487
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --reg bc=${reg_value:x} {tapfile} {z80fname}')
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --reg bc=${reg_value:x} {tapfile} test.z80')
         self.assertEqual(error, '')
-        with open(z80fname, 'rb') as f:
-            z80_header = f.read(4)
-        self.assertEqual(z80_header[2] + 256 * z80_header[3], reg_value)
+        self.assertIn(f'bc=${reg_value:x}', s_reg)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_reg_0x_hex_value(self):
         tapfile = self._write_tap([create_tap_data_block([1])])
-        z80fname = '{}/test.z80'.format(self.make_directory())
         reg_value = 54873
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --reg hl=0x{reg_value:x} {tapfile} {z80fname}')
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --reg hl=0x{reg_value:x} {tapfile} test.z80')
         self.assertEqual(error, '')
-        with open(z80fname, 'rb') as f:
-            z80_header = f.read(6)
-        self.assertEqual(z80_header[4] + 256 * z80_header[5], reg_value)
+        self.assertIn(f'hl=0x{reg_value:x}', s_reg)
 
     def test_reg_bad_value(self):
         self._test_bad_spec('--reg bc=A2', 'Cannot parse register value: bc=A2')
 
     def test_ram_invalid_register(self):
         self._test_bad_spec('--reg iz=1', 'Invalid register: iz=1')
 
     def test_reg_help(self):
         output, error = self.run_tap2sna('--reg help')
         self.assertTrue(output.startswith('Usage: --reg name=value\n'))
         self.assertEqual(error, '')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load(self):
         code_start = 32768
         code = [4, 5]
         tapfile, basic_data = self._write_basic_loader(code_start, code)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_initial_code_block(self):
         code_start = 65360 # Overwrite return address on stack with...
         code = [128, 128]  # ...32896
         blocks = [
             create_tap_header_block("\xafblock", code_start, len(code)),
             create_tap_data_block(code)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Bytes: CODE block    ',
             'Fast loading data block: 65360,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32896',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65362', 'IX=65362', 'IY=23610', 'PC=32896'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_given_start_address(self):
         code_start = 32768
         start = 32769
         code = [175, 201]
         tapfile, basic_data = self._write_basic_loader(code_start, code)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'--start {start} {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'--start {start} {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=32769',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32769'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_character_array(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             25, 0,            # Line length
             239, 34, 34, 228, # LOAD "" DATA
@@ -1380,36 +1380,36 @@
             create_tap_data_block(basic_data),
             create_tap_header_block(ca_name, length=len(ca_data), data_type=2),
             create_tap_data_block(ca_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,29',
             'Character array: characters',
             'Fast loading data block: 23787,8',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(ca_data, snapshot[23787:23787 + len(ca_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_number_array(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             24, 0,            # Line length
             239, 34, 34, 228, # LOAD "" DATA
@@ -1431,36 +1431,36 @@
             create_tap_data_block(basic_data),
             create_tap_header_block(na_name, length=len(na_data), data_type=1),
             create_tap_data_block(na_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,28',
             'Number array: numbers   ',
             'Fast loading data block: 23786,16',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(na_data, snapshot[23786:23786 + len(na_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_headerless_block(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             16, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
@@ -1484,35 +1484,35 @@
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code),
             create_tap_data_block(code2)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,14',
             'Fast loading data block: 49152,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=49152',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         self.assertEqual(code2, snapshot[49152:49152 + len(code2)])
         exp_reg = set(('^F=187', 'SP=65344', 'IX=49154', 'IY=23610', 'PC=49152'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_overlong_blocks(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             16, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
@@ -1539,33 +1539,33 @@
         blocks = [
             basic_header,
             basic_data_block,
             code_header,
             code_data_block
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data + [128], snapshot[23755:23755 + len(basic_data) + 1])
         self.assertEqual(code + [0], snapshot[code_start:code_start + len(code) + 1])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_undersize_block(self):
         code2 = [201]
         code2_start = 49152
         code2_end = code2_start + len(code2)
         code = [
             221, 33, 0, 192,  # LD IX,49152
             221, 229,         # PUSH IX
@@ -1592,38 +1592,38 @@
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code),
             code2_data_block
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
 
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         self.assertEqual(code2, snapshot[code2_start:code2_end])
         self.assertEqual(snapshot[code2_end], code2_data_block[-1])
-        exp_reg = set(('^F=187', 'SP=65344', f'IX={code2_end+1}', 'E=3', 'D=0', 'IY=23610', 'PC=49152', 'F=64'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        exp_reg = {'^F=187', 'SP=65344', f'IX={code2_end+1}', 'DE=3', 'IY=23610', 'PC=49152', 'F=64'}
+        self.assertLessEqual(exp_reg, set(s_reg))
 
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,14',
             'Fast loading data block: 49152,5',
             'Tape finished',
-            'Simulation stopped (PC in RAM): PC=49152'
+            'Simulation stopped (PC in RAM): PC=49152',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_skips_blocks_with_wrong_flag_byte(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             16, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
@@ -1650,61 +1650,61 @@
             create_tap_data_block(basic_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code),
             create_tap_header_block("IGNORE ME", 49152, len(code2)), # Skipped
             create_tap_data_block(code2)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Data block (18 bytes) [skipped]',
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,18',
             'Bytes: IGNORE ME  [skipped]',
             'Fast loading data block: 49152,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32780',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         self.assertEqual(code2, snapshot[49152:49152 + len(code2)])
         exp_reg = set(('^F=187', 'SP=65344', 'IX=49154', 'IY=23610', 'PC=32780', 'F=1'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_ignores_extra_byte_at_end_of_tape(self):
         code_start = 32768
         code = [4, 5]
         blocks, basic_data = self._write_basic_loader(code_start, code, False)
         tapfile = self._write_tap(blocks + [[0]])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_preserves_border_colour(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             22, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
@@ -1722,56 +1722,56 @@
         blocks = [
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'{tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,26',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,1',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
-        self.assertIn('border=3', options.state)
+        self.assertIn('border=3', s_state)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_preserves_interrupt_mode_and_flip_flop(self):
         code_start = 32768
         code = [
             243,              # 32768 DI
             237, 94,          # 32769 IM 2
             201,              # 32771 RET
         ]
         start = 32771
         tapfile, basic_data = self._write_basic_loader(code_start, code)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'--start {start} {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'--start {start} {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,4',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=32771',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
-        self.assertIn('im=2', options.state)
-        self.assertIn('iff=0', options.state)
+        self.assertIn('im=2', s_state)
+        self.assertIn('iff=0', s_state)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_fast_load_does_not_overwrite_rom(self):
         start_str = [ord(c) for c in "16384"]
         basic_data = [
             0, 10,            # Line 10
             16, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
             58,               # :
@@ -1793,33 +1793,33 @@
         blocks = [
             create_tap_header_block('simloadbas', 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
             create_tap_header_block('simloadrom', start, len(code)),
             create_tap_data_block(code)
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'--start 16395 {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'--start 16395 {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadrom',
             'Fast loading data block: 16380,16',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=16395',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual([161, 153, 66, 60], snapshot[32768:32772])
         self.assertEqual(code[4:], snapshot[start + 4:start + len(code)])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=16396', 'IY=23610', 'PC=16395'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_fast_load_checks_parity(self):
         code_start = 32768
         code_start_str = [ord(c) for c in str(code_start)]
         basic_data = [
             0, 10,            # Line 10
             16, 0,            # Line length
             239, 34, 34, 175, # LOAD ""CODE
@@ -1847,35 +1847,35 @@
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
             create_tap_header_block("simloadbyt", code_start, len(code)),
             create_tap_data_block(code),
             code2_block
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'--start 32784 {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'--start 32784 {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,17',
             'Fast loading data block: 49152,2',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=32784',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         self.assertEqual(code2, snapshot[49152:49152 + len(code2)])
-        exp_reg = set(('^F=187', 'D=0', 'SP=65344', 'IX=49154', 'IY=23610', 'PC=32784'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        exp_reg = {'^F=187', 'DE=0', 'SP=65344', 'IX=49154', 'IY=23610', 'PC=32784'}
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_ram_call(self):
         ram_module = """
             def fix(snapshot):
                 snapshot[32768:32772] = [1, 2, 3, 4]
         """
         module_dir = self.make_directory()
         module_name = 'simloadram'
@@ -1889,93 +1889,97 @@
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual([1, 2, 3, 4], snapshot[32768:32772])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_ram_move(self):
         code_start = 32768
         code = [4, 5]
         tapfile, basic_data = self._write_basic_loader(code_start, code)
         output, error = self.run_tap2sna(f'--ram move=32768,2,32770 {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual([4, 5, 4, 5], snapshot[32768:32772])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_ram_poke(self):
         code_start = 32768
         code = [4, 5]
         tapfile, basic_data = self._write_basic_loader(code_start, code)
         output, error = self.run_tap2sna(f'--ram poke=32768-32770-2,1 {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual([1, 5, 1], snapshot[32768:32771])
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_ram_sysvars(self):
         code_start = 32768
         code = [4, 5]
         tapfile, basic_data = self._write_basic_loader(code_start, code)
         output, error = self.run_tap2sna(f'--ram sysvars {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,20',
             'Bytes: simloadbyt',
             'Fast loading data block: 32768,2',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         self.assertEqual([203, 92], snapshot[23627:23629]) # VARS=23755
         self.assertEqual([204, 92], snapshot[23641:23643]) # E-LINE=23756
         self.assertEqual([206, 92], snapshot[23649:23651]) # WORKSP=23758
         self.assertEqual([206, 92], snapshot[23651:23653]) # STKBOT=23758
         self.assertEqual([206, 92], snapshot[23653:23655]) # STKEND=23758
         exp_reg = set(('^F=129', 'SP=65344', 'IX=32770', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_initial_pause_block(self):
         pause_block = [
             32,    # Block ID
             1, 0,  # Pause (1ms)
         ]
         tzxfile = self._write_tzx([
             pause_block,
@@ -1983,102 +1987,149 @@
         ])
         output, error = self.run_tap2sna(f'--start 1343 {tzxfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=1343',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_unexpected_end_of_tape(self):
         basic_data = [
             0, 10,       # Line 10
             4, 0,        # Line length
             239, 34, 34, # LOAD ""
             13           # ENTER
         ]
         blocks = [
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
         ]
         tapfile = self._write_tap(blocks)
-        z80file = '{}/out.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'{tapfile} {z80file}')
+            self.run_tap2sna(f'{tapfile} out.z80')
         out_lines = self.out.getvalue().strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,8',
             'Tape finished'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(cm.exception.args[0], f'Error while converting {tapfile}: Failed to fast load block: unexpected end of tape')
         self.assertEqual(self.err.getvalue(), '')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
-    def test_sim_load_with_tzx_block_type_0x15(self):
-        block = [
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_with_tzx_block_type_0x15_first_bit_0(self):
+        direct_recording_block = (
             21,          # Block ID
-            79, 0,       # T-states per sample
+            50, 0,       # T-states per sample
             0, 0,        # Pause
             8,           # Used bits in last byte
             3, 0, 0,     # Data length
-            1, 2, 3,     # Data
-        ]
-        tzxfile = self._write_tzx([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'{tzxfile} {z80file}')
-        self.assertEqual(cm.exception.args[0], f'Error while converting {tzxfile}: TZX Direct Recording (0x15) not supported')
-        self.assertEqual(self.out.getvalue(), '')
-        self.assertEqual(self.err.getvalue(), '')
+            0b00000001,  # Data...
+            0b00000010,
+            0b00000011
+        )
+        tzxfile = self._write_tzx([direct_recording_block])
+        output, error = self.run_tap2sna(tzxfile)
+        self.assertEqual(error, '')
+        self.assertEqual(len(load_tracer.blocks), 1)
+        block_id, timings, data = load_tracer.blocks[0]
+        self.assertEqual([], data)
+        self.assertEqual([350, 50, 300, 50, 350, 100], timings.pulses)
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
-    def test_sim_load_can_ignore_tzx_block_type_0x15(self):
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_with_tzx_block_type_0x15_first_bit_1(self):
         direct_recording_block = (
             21,          # Block ID
-            79, 0,       # T-states per sample
+            10, 0,       # T-states per sample
             0, 0,        # Pause
             8,           # Used bits in last byte
             3, 0, 0,     # Data length
-            1, 2, 3,     # Data
+            0b10000000,  # Data...
+            0b00000010,
+            0b00000011
         )
-        tzxfile = self._write_tzx((
-            direct_recording_block,
-            create_tzx_header_block()
-        ))
-        output, error = self.run_tap2sna(f'--tape-start 2 {tzxfile}')
+        tzxfile = self._write_tzx([direct_recording_block])
+        output, error = self.run_tap2sna(tzxfile)
+        self.assertEqual(error, '')
+        self.assertEqual(len(load_tracer.blocks), 1)
+        block_id, timings, data = load_tracer.blocks[0]
+        self.assertEqual([], data)
+        self.assertEqual([0, 10, 130, 10, 70, 20], timings.pulses)
+
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_with_tzx_block_type_0x15_unused_bits_in_last_byte(self):
+        direct_recording_block = (
+            21,          # Block ID
+            100, 0,      # T-states per sample
+            0, 0,        # Pause
+            4,           # Used bits in last byte
+            3, 0, 0,     # Data length
+            0b00000001,  # Data...
+            0b00000010,
+            0b11110000
+        )
+        tzxfile = self._write_tzx([direct_recording_block])
+        output, error = self.run_tap2sna(tzxfile)
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
+        block_id, timings, data = load_tracer.blocks[0]
+        self.assertEqual([], data)
+        self.assertEqual([700, 100, 600, 100, 100, 400], timings.pulses)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_with_tzx_block_type_0x15_followed_by_bytes(self):
+        direct_recording_block = (
+            21,          # Block ID
+            50, 0,       # T-states per sample
+            0, 0,        # Pause
+            8,           # Used bits in last byte
+            1, 0, 0,     # Data length
+            0,           # Data
+        )
+        blocks = [
+            direct_recording_block,
+            create_tzx_header_block(data_type=3),
+            create_tzx_data_block([4, 5, 6]),
+        ]
+        tzxfile = self._write_tzx(blocks)
+        output, error = self.run_tap2sna(tzxfile)
+        self.assertEqual(error, '')
+        load_cmd = [239, 34, 34, 13] # LOAD "" ENTER
+        self.assertEqual(load_cmd, list(load_tracer.simulator.memory[23756:23760]))
+
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_tzx_block_type_0x18(self):
         block = [
             24,          # Block ID
             10, 0, 0, 0, # Block length
             0, 0,        # Pause
             68, 172,     # Sampling rate
             1,           # Compression type
             1, 0, 0, 0,  # Number of stored pulses
             1,           # CSW Data
         ]
         tzxfile = self._write_tzx([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'{tzxfile} {z80file}')
+            self.run_tap2sna(f'{tzxfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tzxfile}: TZX CSW Recording (0x18) not supported')
         self.assertEqual(self.out.getvalue(), '')
         self.assertEqual(self.err.getvalue(), '')
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_can_ignore_tzx_block_type_0x18(self):
         csw_recording_block = (
             24,          # Block ID
             10, 0, 0, 0, # Block length
             0, 0,        # Pause
             68, 172,     # Sampling rate
             1,           # Compression type
@@ -2089,37 +2140,36 @@
             csw_recording_block,
             create_tzx_header_block()
         ))
         output, error = self.run_tap2sna(f'--tape-start 2 {tzxfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_tzx_block_type_0x19(self):
         block = [
             25,          # Block ID
             14, 0, 0, 0, # Block length
             0, 0,        # Pause
             0, 0, 0, 0,  # Number of symbols in pilot/sync block
             1,           # Maximum number of pulses per pilot/sync symbol
             1,           # Number of pilot/sync symbols in alphabet table
             0, 0, 0, 0,  # Number of symbols in data stream
             1,           # Maximum number of pulses per data symbol
             1,           # Number of data symbols in alphabet table
         ]
         tzxfile = self._write_tzx([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
         with self.assertRaises(SkoolKitError) as cm:
-            self.run_tap2sna(f'{tzxfile} {z80file}')
+            self.run_tap2sna(f'{tzxfile} out.z80')
         self.assertEqual(cm.exception.args[0], f'Error while converting {tzxfile}: TZX Generalized Data Block (0x19) not supported')
         self.assertEqual(self.out.getvalue(), '')
         self.assertEqual(self.err.getvalue(), '')
 
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_can_ignore_tzx_block_type_0x19(self):
         generalized_data_block = (
             25,          # Block ID
             14, 0, 0, 0, # Block length
             0, 0,        # Pause
             0, 0, 0, 0,  # Number of symbols in pilot/sync block
             1,           # Maximum number of pulses per pilot/sync symbol
@@ -2132,70 +2182,71 @@
             generalized_data_block,
             create_tzx_header_block()
         ))
         output, error = self.run_tap2sna(f'--tape-start 2 {tzxfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(load_tracer.blocks), 1)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_trace(self):
         basic_data = [
             0, 10,               # Line 10
             14, 0,               # Line length
             249, 192,            # RANDOMIZE USR
             51, 50, 55, 54, 56,  # 32768 in ASCII
             14, 0, 0, 0, 128, 0, # 32768 in floating point form
             13                   # ENTER
         ]
         blocks = [
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
         ]
         tapfile = self._write_tap(blocks)
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         output, error = self.run_tap2sna(f'-c trace={tracefile} {tapfile} out.z80')
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,18',
             'Tape finished',
             'Simulation stopped (PC in RAM): PC=32768',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         exp_reg = set(('^F=69', 'SP=65344', 'IX=23773', 'IY=23610', 'PC=32768'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 8101)
         self.assertEqual(trace_lines[0], '$0605 POP AF')
         self.assertEqual(trace_lines[8100], '$34BB RET')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_trace_and_self_modifying_code(self):
         code = [
             33, 55, 128,  # 32820 LD HL,32823
             117,          # 32823 LD (HL),L   ; -> 32823 SCF
             48, 253,      # 32824 JR NC,32823
         ]
         tapfile, basic_data = self._write_basic_loader(32820, code)
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         output, error = self.run_tap2sna(f'--start 32826 -c trace={tracefile} {tapfile} out.z80')
         out_lines = output.strip().split('\n')
-        self.assertIn('PC=32826', options.reg)
+        self.assertIn('PC=32826', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 19502)
         self.assertEqual(trace_lines[19497], '$8034 LD HL,$8037')
         self.assertEqual(trace_lines[19498], '$8037 LD (HL),L')
         self.assertEqual(trace_lines[19499], '$8038 JR NC,$8037')
         self.assertEqual(trace_lines[19500], '$8037 SCF')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_with_trace_and_interrupts_and_timestamps(self):
         basic_data = [
             0, 10,             # Line 10
             9, 0,              # Line length
             242,               # PAUSE
             48,                # 0 in ASCII
             14, 0, 0, 0, 0, 0, # 0 in floating point form
@@ -2211,114 +2262,93 @@
         output, error = self.run_tap2sna(('-I', trace_line, '-c', f'trace={tracefile}', '--start', '57', tapfile, 'out.z80'))
         out_lines = output.strip().split('\n')
         exp_out_lines = [
             'Program: simloadbas',
             'Fast loading data block: 23755,13',
             'Tape finished',
             'Simulation stopped (PC at start address): PC=57',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, out_lines)
         self.assertEqual(error, '')
         self.assertEqual(basic_data, snapshot[23755:23755 + len(basic_data)])
         exp_reg = set(('IX=23768', 'IY=23610', 'PC=57'))
-        self.assertLessEqual(exp_reg, set(options.reg))
+        self.assertLessEqual(exp_reg, set(s_reg))
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 11187)
         self.assertEqual(trace_lines[11185], '17891327 $1F3D HALT')
         self.assertEqual(trace_lines[11186], '17891344 $0038 PUSH AF')
 
     def test_sim_load_config_help(self):
         for option in ('-c', '--sim-load-config'):
             output, error = self.run_tap2sna(f'{option} help')
             self.assertTrue(output.startswith('Usage: --sim-load-config accelerate-dec-a=0/1/2\n'))
             self.assertEqual(error, '')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_default_state(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile} {z80file}')
+        output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile} out.z80')
         self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(30)
-        self.assertEqual(z80_header[12] & 14, 0) # border=0
-        self.assertEqual(z80_header[27], 1) # iff1=1
-        self.assertEqual(z80_header[28], 1) # iff2=1
-        self.assertEqual(z80_header[29] & 3, 1) # im=1
+        self.assertEqual([], s_state)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_state_iff(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        iff_value = 0
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --state iff={iff_value} {tapfile} {z80file}')
-        self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(29)
-        self.assertEqual(z80_header[27], iff_value)
-        self.assertEqual(z80_header[28], iff_value)
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --state iff=0 {tapfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(['iff=0'], s_state)
 
     def test_state_iff_bad_value(self):
         self._test_bad_spec('--state iff=fa', 'Cannot parse integer: iff=fa')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_state_im(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        im_value = 2
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --state im={im_value} {tapfile} {z80file}')
-        self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(30)
-        self.assertEqual(z80_header[29] & 3, im_value)
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --state im=2 {tapfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(['im=2'], s_state)
 
     def test_state_im_bad_value(self):
         self._test_bad_spec('--state im=Q', 'Cannot parse integer: im=Q')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_state_border(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = '{}/out.z80'.format(self.make_directory())
-        border = 4
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --state border={border} {tapfile} {z80file}')
-        self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = f.read(13)
-        self.assertEqual((z80_header[12] // 2) & 7, border)
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --state border=4 {tapfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(['border=4'], s_state)
 
     def test_state_border_bad_value(self):
         self._test_bad_spec('--state border=x!', 'Cannot parse integer: border=x!')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_state_tstates(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
-        z80file = os.path.join(self.make_directory(), 'out.z80')
-        tstates = 31445
-        output, error = self.run_tap2sna(f'--ram load=1,16384 --state tstates={tstates} {tapfile} {z80file}')
-        self.assertEqual(error, '')
-        with open(z80file, 'rb') as f:
-            z80_header = tuple(f.read(58))
-        t1 = (z80_header[55] + 256 * z80_header[56]) % 17472
-        t2 = (2 - z80_header[57]) % 4
-        self.assertEqual(69887 - t2 * 17472 - t1, tstates)
+        output, error = self.run_tap2sna(f'--ram load=1,16384 --state tstates=31445 {tapfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(['tstates=31445'], s_state)
 
     def test_state_tstates_bad_value(self):
         self._test_bad_spec('--state tstates=?', 'Cannot parse integer: tstates=?')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_state_issue2(self):
         block = create_tap_data_block([0])
         tapfile = self._write_tap([block])
         for issue2 in (0, 1):
-            z80file = os.path.join(self.make_directory(), 'out.z80')
-            output, error = self.run_tap2sna(f'--ram load=1,16384 --state issue2={issue2} {tapfile} {z80file}')
+            output, error = self.run_tap2sna(f'--ram load=1,16384 --state issue2={issue2} {tapfile} out.z80')
             self.assertEqual(error, '')
-            with open(z80file, 'rb') as f:
-                z80_header = tuple(f.read(30))
-            self.assertEqual((z80_header[29] // 4) & 1, issue2)
+            self.assertEqual([f'issue2={issue2}'], s_state)
 
     def test_state_issue2_bad_value(self):
         self._test_bad_spec('--state issue2=*', 'Cannot parse integer: issue2=*')
 
     def test_state_help(self):
         output, error = self.run_tap2sna('--state help')
         self.assertEqual(error, '')
@@ -2337,21 +2367,21 @@
               issue2  - issue 2 emulation: 0=disabled, 1=enabled (default=0)
               tstates - T-states elapsed since start of frame (default=34943)
         """
         self.assertEqual(dedent(exp_output).lstrip(), output)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_config_parameter_default_values(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(tapfile)
         self.assertEqual(error, '')
         self.assertIsNone(kbtracer)
-        self.assertEqual(load_tracer.simulator.__class__.__name__, 'Simulator')
+        self.assertIs(load_tracer.simulator.__class__, CSimulator or Simulator)
         self.assertEqual(len(load_tracer.accelerators_in), 46)
         self.assertTrue(load_tracer.pause)
         self.assertEqual(load_tracer.first_edge, 0)
         self.assertEqual(load_tracer.polarity, 0)
         self.assertEqual(load_tracer.finish_tape, 0)
         self.assertEqual(load_tracer.in_min_addr, 0x8000)
         self.assertEqual(load_tracer.accel_dec_a, 1)
@@ -2369,22 +2399,22 @@
         self.assertIsNone(load_tracer.trace_line)
         self.assertIsNone(load_tracer.prefix)
         self.assertIsNone(load_tracer.byte_fmt)
         self.assertIsNone(load_tracer.word_fmt)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_sim_load_config_parameters(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
-        trace_log = '{}/trace.log'.format(self.make_directory())
+        trace_log = 'trace.log'
         params = (
             'accelerate-dec-a=2',
             'accelerator=speedlock',
-            'cmio=1',
+            'cmio=0',
             'fast-load=0',
             'finish-tape=1',
             'first-edge=1234',
             'in-flags=0',
             'load=RUN',
             'machine=128',
             'pause=0',
@@ -2401,15 +2431,15 @@
         self.assertEqual(kbtracer.stop, 0x13BE)
         self.assertEqual(kbtracer.timeout, 3500000000)
         self.assertEqual(kbtracer.tracefile.name, trace_log)
         self.assertEqual(kbtracer.trace_line, '${pc:04X} {i}\n')
         self.assertEqual(kbtracer.prefix, '$')
         self.assertEqual(kbtracer.byte_fmt, '02X')
         self.assertEqual(kbtracer.word_fmt, '04X')
-        self.assertEqual(load_tracer.simulator.__class__.__name__, 'CMIOSimulator')
+        self.assertIs(load_tracer.simulator.__class__, CSimulator or Simulator)
         self.assertEqual(['speedlock'], [a.name for a in load_tracer.accelerators_in])
         self.assertEqual(load_tracer.pause, 0)
         self.assertEqual(load_tracer.first_edge, 1234)
         self.assertEqual(load_tracer.polarity, 1)
         self.assertEqual(load_tracer.finish_tape, 1)
         self.assertEqual(load_tracer.in_min_addr, 0x8000)
         self.assertEqual(load_tracer.accel_dec_a, 2)
@@ -2425,157 +2455,224 @@
         self.assertTrue(load_tracer.timeout < 3500000000)
         self.assertEqual(load_tracer.tracefile.name, trace_log)
         self.assertEqual(load_tracer.trace_line, '${pc:04X} {i}\n')
         self.assertEqual(load_tracer.prefix, '$')
         self.assertEqual(load_tracer.byte_fmt, '02X')
         self.assertEqual(load_tracer.word_fmt, '04X')
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
+    @patch.object(tap2sna, 'Simulator', MockSimulator)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_enables_fast_djnz_ldir(self):
+        tapfile = self._write_tap([create_tap_data_block([0])])
+        output, error = self.run_tap2sna(tapfile)
+        self.assertEqual(error, '')
+        self.assertTrue(simulator.config.get('fast_djnz'))
+        self.assertTrue(simulator.config.get('fast_ldir'))
+
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
+    @patch.object(tap2sna, 'Simulator', MockSimulator)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_sim_load_disables_fast_djnz_ldir_when_tracing(self):
+        tapfile = self._write_tap([create_tap_data_block([0])])
+        output, error = self.run_tap2sna(f'-c trace=load.log {tapfile}')
+        self.assertEqual(error, '')
+        self.assertFalse(simulator.config.get('fast_djnz'))
+        self.assertFalse(simulator.config.get('fast_ldir'))
+
+    @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_cmio_1_disables_acceleration(self):
+        tapfile = self._write_tap([create_tap_data_block([0])])
+        trace_log = 'trace.log'
+        params = (
+            'accelerate-dec-a=2',
+            'accelerator=speedlock',
+            'cmio=1'
+        )
+        options = ' '.join(f'-c {p}' for p in params)
+        output, error = self.run_tap2sna(f'{options} {tapfile}')
+        self.assertEqual(error, '')
+        self.assertIs(load_tracer.simulator.__class__, CCMIOSimulator or CMIOSimulator)
+        self.assertEqual(set(), load_tracer.accelerators_in)
+        self.assertEqual(load_tracer.accel_dec_a, 0)
+
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_in_flags_parameter_bit_0(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c in-flags=1 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(load_tracer.in_min_addr, 0x4000)
         set_tracer_args = load_tracer.simulator.set_tracer_args
         self.assertFalse(set_tracer_args[0])
         self.assertFalse(set_tracer_args[1])
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_in_flags_parameter_bit_1(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c in-flags=2 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(load_tracer.in_min_addr, 0x10000)
         set_tracer_args = load_tracer.simulator.set_tracer_args
         self.assertFalse(set_tracer_args[0])
         self.assertFalse(set_tracer_args[1])
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_in_flags_parameter_bit_2(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c in-flags=4 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(load_tracer.in_min_addr, 0x8000)
         set_tracer_args = load_tracer.simulator.set_tracer_args
         self.assertTrue(set_tracer_args[0])
         self.assertFalse(set_tracer_args[1])
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_load_parameter_defaults_to_enter_for_128k(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c machine=128 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(['ENTER'], kbtracer.load)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_load_parameter_with_pc(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c load=PC=16384 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(['ENTER'], kbtracer.load)
         self.assertTrue(kbtracer.run_called)
         self.assertEqual(kbtracer.stop, 16384)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_keyboard_tracer_config_for_48k(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c load=RUN {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(kbtracer.simulator.memory), 65536)
         self.assertEqual(['RUN', 'ENTER'], kbtracer.load)
         self.assertEqual(kbtracer.kb_delay, 4)
         self.assertTrue(kbtracer.run_called)
         self.assertEqual(kbtracer.stop, 0x0605)
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_keyboard_tracer_config_for_128k(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c machine=128 {tapfile}')
         self.assertEqual(error, '')
         self.assertEqual(len(kbtracer.simulator.memory), 0x20000)
         self.assertEqual(['ENTER'], kbtracer.load)
         self.assertEqual(kbtracer.kb_delay, 13)
         self.assertTrue(kbtracer.run_called)
         self.assertEqual(kbtracer.stop, 0x13BE)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'Simulator', MockSimulator)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_python_parameter(self):
+        global mock_memory
+        mock_memory = [1] * 65536
+        tapfile = self._write_tap([create_tap_data_block([0])])
+        output, error = self.run_tap2sna(f'-c python=1 {tapfile}')
+        self.assertEqual(error, '')
+        self.assertIs(load_tracer.simulator.__class__, MockSimulator)
+
+    @patch.object(tap2sna, 'CMIOSimulator', MockSimulator)
+    @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
+    def test_python_parameter_with_cmio(self):
+        global mock_memory
+        mock_memory = [1] * 65536
+        tapfile = self._write_tap([create_tap_data_block([0])])
+        output, error = self.run_tap2sna(f'-c python=1 -c cmio=1 {tapfile}')
+        self.assertEqual(error, '')
+        self.assertIs(load_tracer.simulator.__class__, MockSimulator)
+
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_empty_tape(self):
         tapfile = self._write_tap([])
         with self.assertRaises(SkoolKitError) as cm:
             self.run_tap2sna(tapfile)
         self.assertEqual(cm.exception.args[0], f"Error while converting {tapfile}: Tape is empty")
 
     def test_load_parameter_with_invalid_pc(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         with self.assertRaises(SkoolKitError) as cm:
             self.run_tap2sna(f'-c load=PC=? {tapfile}')
         self.assertEqual(cm.exception.args[0], f"Error while converting {tapfile}: Invalid integer in 'load' parameter: PC=?")
 
     @patch.object(tap2sna, 'KeyboardTracer', MockKeyboardTracer)
     @patch.object(tap2sna, 'LoadTracer', MockLoadTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_keyboard_tracer_timed_out(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         load = ' '.join(['a'] * 50)
         output, error = self.run_tap2sna(('-c', 'timeout=1', '-c', f'load={load}', tapfile))
         self.assertEqual(error, '')
         self.assertTrue(kbtracer.run_called)
         self.assertEqual(kbtracer.timeout, 3500000)
-        self.assertEqual(output, 'Simulation stopped (timed out): PC=4608\n')
+        self.assertIn('Simulation stopped (timed out): PC=4608\n', output)
 
     @patch.object(tap2sna, 'KeyboardTracer', InterruptedTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_interrupted_keyboard_tracer(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(f'-c load=RUN {tapfile}')
         self.assertEqual(error, '')
-        self.assertEqual(output, 'Simulation stopped (interrupted): PC=4608\n')
+        self.assertIn('Simulation stopped (interrupted): PC=4608\n', output)
 
     @patch.object(tap2sna, 'LoadTracer', InterruptedTracer)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_interrupted_load_tracer(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         output, error = self.run_tap2sna(tapfile)
         self.assertEqual(error, '')
-        self.assertEqual(output, 'Simulation stopped (interrupted): PC=1541\n')
+        self.assertIn('Simulation stopped (interrupted): PC=1541\n', output)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_DefaultSnapshotFormat_read_from_file(self):
         ini = """
             [tap2sna]
             DefaultSnapshotFormat=szx
         """
         self.write_text_file(dedent(ini).strip(), 'skoolkit.ini')
         tapfile = self._write_tap([create_tap_data_block([0])])
         exp_outfile = tapfile[:-4] + '.szx'
         output, error = self.run_tap2sna(f'--ram load=1,16384 {tapfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_outfile))
+        self.assertEqual(s_fname, exp_outfile)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_DefaultSnapshotFormat_set_on_command_line(self):
         tapfile = self._write_tap([create_tap_data_block([0])])
         exp_outfile = tapfile[:-4] + '.szx'
         output, error = self.run_tap2sna(f'--ram load=1,16384 -I DefaultSnapshotFormat=szx {tapfile}')
         self.assertEqual(len(error), 0)
-        self.assertTrue(os.path.isfile(exp_outfile))
+        self.assertEqual(s_fname, exp_outfile)
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceLine_read_from_file(self):
         ini = """
             [tap2sna]
             TraceLine={pc:05}: {i}
         """
         self.write_text_file(dedent(ini).strip(), 'skoolkit.ini')
         basic_data = [
@@ -2585,199 +2682,200 @@
             13                   # ENTER
         ]
         blocks = [
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
         ]
         tapfile = self._write_tap(blocks)
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         output, error = self.run_tap2sna(f'-c trace={tracefile} --start 1343 -c finish-tape=1 {tapfile} out.z80')
         self.assertEqual(error, '')
-        self.assertIn('PC=1343', options.reg)
+        self.assertIn('PC=1343', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 7281)
         self.assertEqual(trace_lines[0], '01541: POP AF')
         self.assertEqual(trace_lines[7280], '01506: RET')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceLine_set_on_command_line(self):
         basic_data = [
             0, 10,               # Line 10
             2, 0,                # Line length
             234,                 # REM
             13                   # ENTER
         ]
         blocks = [
             create_tap_header_block("simloadbas", 10, len(basic_data), 0),
             create_tap_data_block(basic_data),
         ]
         tapfile = self._write_tap(blocks)
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         trace_line = '{pc:>5}:{i}'
         args = f'-I TraceLine={trace_line} -c trace={tracefile} --start 1343 -c finish-tape=1 {tapfile} out.z80'
         output, error = self.run_tap2sna(args)
         self.assertEqual(error, '')
-        self.assertIn('PC=1343', options.reg)
+        self.assertIn('PC=1343', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 7281)
         self.assertEqual(trace_lines[0], ' 1541:POP AF')
         self.assertEqual(trace_lines[7280], ' 1506:RET')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceLine_with_register_values(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 10, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         trace_line = "{t:>3} ${pc:04X} {i:<13} AFBCDEHL={r[a]:02X}{r[f]:02X}{r[b]:02X}{r[c]:02X}{r[d]:02X}{r[e]:02X}{r[h]:02X}{r[l]:02X}"
         trace_line += " AFBCDEHL'={r[^a]:02X}{r[^f]:02X}{r[^b]:02X}{r[^c]:02X}{r[^d]:02X}{r[^e]:02X}{r[^h]:02X}{r[^l]:02X}"
         trace_line += " IX={r[ixh]:02X}{r[ixl]:02X} IY={r[iyh]:02X}{r[iyl]:02X} SP={r[sp]:04X} IR={r[i]:02X}{r[r]:02X}"
         args = ('-I', f'TraceLine={trace_line}', '-c', f'trace={tracefile}', '--start', '0x250E', tapfile, 'out.z80')
         tap2sna.main(args)
         self.assertEqual(self.err.getvalue(), '')
-        self.assertIn('PC=9486', options.reg)
+        self.assertIn('PC=9486', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 31)
         self.assertEqual(trace_lines[0], "  0 $0605 POP AF        AFBCDEHL=1B52000000000000 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF52 IR=3F01")
         self.assertEqual(trace_lines[1], " 10 $0606 LD A,($5C74)  AFBCDEHL=E152000000000000 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF52 IR=3F02")
         self.assertEqual(trace_lines[2], " 23 $0609 SUB $E0       AFBCDEHL=0102000000000000 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF52 IR=3F03")
         self.assertEqual(trace_lines[28], "267 $250A LD B,$00      AFBCDEHL=2261002200002597 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF4C IR=3F1D")
         self.assertEqual(trace_lines[29], "274 $250C LD C,(HL)     AFBCDEHL=2261001C00002597 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF4C IR=3F1E")
         self.assertEqual(trace_lines[30], "281 $250D ADD HL,BC     AFBCDEHL=2260001C000025B3 AFBCDEHL'=0000000000000000 IX=0000 IY=5C3A SP=FF4C IR=3F1F")
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceLine_with_register_pairs(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 10, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         trace_line = "${pc:04X} {i:<13} BCDEHL={r[bc]:04X}{r[de]:04X}{r[hl]:04X}"
         trace_line += " BCDEHL'={r[^bc]:04X}{r[^de]:04X}{r[^hl]:04X}"
         trace_line += " IX={r[ix]:04X} IY={r[iy]:04X}"
         args = ('-I', f'TraceLine={trace_line}', '-c', f'trace={tracefile}', '--start', '0x250E', tapfile, 'out.z80')
         tap2sna.main(args)
         self.assertEqual(self.err.getvalue(), '')
-        self.assertIn('PC=9486', options.reg)
+        self.assertIn('PC=9486', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 31)
         self.assertEqual(trace_lines[0], "$0605 POP AF        BCDEHL=000000000000 BCDEHL'=000000000000 IX=0000 IY=5C3A")
         self.assertEqual(trace_lines[1], "$0606 LD A,($5C74)  BCDEHL=000000000000 BCDEHL'=000000000000 IX=0000 IY=5C3A")
         self.assertEqual(trace_lines[2], "$0609 SUB $E0       BCDEHL=000000000000 BCDEHL'=000000000000 IX=0000 IY=5C3A")
         self.assertEqual(trace_lines[28], "$250A LD B,$00      BCDEHL=002200002597 BCDEHL'=000000000000 IX=0000 IY=5C3A")
         self.assertEqual(trace_lines[29], "$250C LD C,(HL)     BCDEHL=001C00002597 BCDEHL'=000000000000 IX=0000 IY=5C3A")
         self.assertEqual(trace_lines[30], "$250D ADD HL,BC     BCDEHL=001C000025B3 BCDEHL'=000000000000 IX=0000 IY=5C3A")
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceOperand(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 10, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         args = f'-I TraceOperand=&,02x,04x -c trace={tracefile} --start 1343 {tapfile} out.z80'
         output, error = self.run_tap2sna(args)
         self.assertEqual(error, '')
-        self.assertIn('PC=1343', options.reg)
+        self.assertIn('PC=1343', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 2265)
         self.assertEqual(trace_lines[1], '$0606 LD A,(&5c74)')
         self.assertEqual(trace_lines[2], '$0609 SUB &e0')
         self.assertEqual(trace_lines[2264], '$05E2 RET')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceOperand_with_no_commas(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 1, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         args = f'-I TraceOperand=# -c trace={tracefile} --start 1547 {tapfile} out.z80'
         output, error = self.run_tap2sna(args)
         self.assertEqual(error, '')
-        self.assertIn('PC=1547', options.reg)
+        self.assertIn('PC=1547', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 3)
         self.assertEqual(trace_lines[1], '$0606 LD A,(#23668)')
         self.assertEqual(trace_lines[2], '$0609 SUB #224')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceOperand_with_one_comma(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 1, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         args = f'-I TraceOperand=+,02x -c trace={tracefile} --start 1547 {tapfile} out.z80'
         output, error = self.run_tap2sna(args)
         self.assertEqual(error, '')
-        self.assertIn('PC=1547', options.reg)
+        self.assertIn('PC=1547', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 3)
         self.assertEqual(trace_lines[1], '$0606 LD A,(+23668)')
         self.assertEqual(trace_lines[2], '$0609 SUB +e0')
 
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_config_TraceOperand_with_three_commas(self):
         tapfile = self._write_tap([create_tap_header_block("prog", 1, 1, 0)])
-        tracefile = '{}/sim-load.trace'.format(self.make_directory())
+        tracefile = 'sim-load.trace'
         args = f'-I TraceOperand=0x,02x,04x,??? -c trace={tracefile} --start 1547 {tapfile} out.z80'
         output, error = self.run_tap2sna(args)
         self.assertEqual(error, '')
-        self.assertIn('PC=1547', options.reg)
+        self.assertIn('PC=1547', s_reg)
         with open(tracefile, 'r') as f:
             trace_lines = f.read().rstrip().split('\n')
         self.assertEqual(len(trace_lines), 3)
         self.assertEqual(trace_lines[1], '$0606 LD A,(0x5c74)')
         self.assertEqual(trace_lines[2], '$0609 SUB 0xe0')
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_args_from_file(self):
         data = [1, 2, 3, 4]
         start = 49152
         args = f"""
             ; Comment
             # Another comment
             --ram load=1,{start} # Load first block
             --ram poke=32768,255 ; POKE 32768,255
         """
         args_file = self.write_text_file(dedent(args).strip(), suffix='.t2s')
-        snapshot = self._get_snapshot(start, data, '@{}'.format(args_file))
+        self._load_tape(start, data, f'@{args_file}')
         self.assertEqual(data, snapshot[start:start + len(data)])
         self.assertEqual(snapshot[32768], 255)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_quoted_args_from_file(self):
         code = [1, 2, 3]
         code_start = 24576
         tap_data = create_tap_data_block(code)
-        odir = self.make_directory()
-        tapfile = self.write_bin_file(tap_data, f'{odir}/all the data.tap')
-        z80file = f'{odir}/my snapshot.z80'
+        tapfile = self.write_bin_file(tap_data, 'all the data.tap')
+        z80file = 'my snapshot.z80'
         args = f"""
             --ram load=1,{code_start}
             --ram poke=32768,255
             "{tapfile}"
             '{z80file}'
         """
         args_file = self.write_text_file(dedent(args).strip(), suffix='.t2s')
         output, error = self.run_tap2sna(f'@{args_file}')
         self.assertEqual(error, '')
-        snapshot = get_snapshot(z80file)
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
         self.assertEqual(snapshot[32768], 255)
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_t2s_file_with_default_snapshot_filename(self):
         code = [3, 2, 1]
         code_start = 32768
         tap_data = create_tap_data_block(code)
         tapfile = self.write_bin_file(tap_data)
         args = f"""
             "{tapfile}"
             --ram load=1,{code_start}
         """
         args_file = self.write_text_file(dedent(args).strip(), suffix='.t2s')
         exp_z80 = f'{args_file[:-4]}.z80'
         output, error = self.run_tap2sna(f'@{args_file}')
         self.assertEqual(error, '')
-        self.assertTrue(os.path.isfile(exp_z80))
-        snapshot = get_snapshot(exp_z80)
+        self.assertEqual(s_fname, exp_z80)
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_t2s_file_in_subdirectory_with_default_snapshot_filename(self):
         code = [3, 2, 1]
         code_start = 32768
         tap_data = create_tap_data_block(code)
         tapfile = self.write_bin_file(tap_data)
         args = f"""
             "{tapfile}"
@@ -2786,114 +2884,117 @@
         subdir = 'foo/bar/baz'
         t2s_name = 'game'
         os.makedirs(subdir)
         args_file = self.write_text_file(dedent(args).strip(), f'{subdir}/{t2s_name}.t2s')
         exp_z80 = f'{t2s_name}.z80'
         output, error = self.run_tap2sna(f'@{args_file}')
         self.assertEqual(error, '')
-        self.assertTrue(os.path.isfile(exp_z80))
-        snapshot = get_snapshot(exp_z80)
+        self.assertEqual(s_fname, exp_z80)
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_t2s_file_with_default_snapshot_filename_in_szx_format(self):
         code = [3, 2, 1]
         code_start = 32768
         tap_data = create_tap_data_block(code)
         tapfile = self.write_bin_file(tap_data)
         args = f"""
             "{tapfile}"
             --ram load=1,{code_start}
             --ini DefaultSnapshotFormat=szx
         """
         args_file = self.write_text_file(dedent(args).strip(), suffix='.t2s')
         exp_szx = f'{args_file[:-4]}.szx'
         output, error = self.run_tap2sna(f'@{args_file}')
         self.assertEqual(error, '')
-        self.assertTrue(os.path.isfile(exp_szx))
-        snapshot = get_snapshot(exp_szx)
+        self.assertEqual(s_fname, exp_szx)
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
 
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_t2s_file_with_snapshot_filename_given_on_command_line(self):
         code = [3, 2, 1]
         code_start = 32768
         tap_data = create_tap_data_block(code)
         tapfile = self.write_bin_file(tap_data)
         args = f"""
             "{tapfile}"
             --ram load=1,{code_start}
         """
         args_file = self.write_text_file(dedent(args).strip(), suffix='.t2s')
-        z80file = 'out.z80'
-        output, error = self.run_tap2sna(f'@{args_file} {z80file}')
+        output, error = self.run_tap2sna(f'@{args_file} out.z80')
         self.assertEqual(error, '')
-        self.assertTrue(os.path.isfile(z80file))
-        snapshot = get_snapshot(z80file)
+        self.assertEqual(s_fname, 'out.z80')
         self.assertEqual(code, snapshot[code_start:code_start + len(code)])
 
     @patch.object(tap2sna, 'urlopen', Mock(return_value=BytesIO(bytearray(create_tap_data_block([2, 3])))))
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_remote_download(self):
         data = [2, 3]
         start = 17000
         url = 'http://example.com/test.tap'
-        output, error = self.run_tap2sna('--ram load=1,{} {} {}/test.z80'.format(start, url, self.make_directory()))
-        self.assertTrue(output.startswith('Downloading {}\n'.format(url)))
+        output, error = self.run_tap2sna(f'--ram load=1,{start} {url} test.z80')
+        self.assertTrue(output.startswith(f'Downloading {url}\n'))
         self.assertEqual(error, '')
         self.assertEqual(data, snapshot[start:start + len(data)])
 
     @patch.object(tap2sna, 'urlopen', Mock(side_effect=urllib.error.HTTPError('', 403, 'Forbidden', None, None)))
     def test_http_error_on_remote_download(self):
         with self.assertRaisesRegex(SkoolKitError, '^Error while converting test.zip: HTTP Error 403: Forbidden$'):
-            self.run_tap2sna('http://example.com/test.zip {}/test.z80'.format(self.make_directory()))
+            self.run_tap2sna('http://example.com/test.zip test.z80')
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_dec_a_jr(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x3D,       # $C000 DEC A
             0x20, 0xFD, # $C001 JR NZ,$C000
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'{tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49158'
+            'Simulation stopped (end of tape): PC=49158',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[0], 0)
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_dec_a_jp(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x3D,             # $C000 DEC A
             0x3D,             # $C001 DEC A
             0xC2, 0x01, 0xC0, # $C002 JP NZ,$C001
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'-c accelerate-dec-a=2 {tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49160'
+            'Simulation stopped (end of tape): PC=49160',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[0], 0)
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_dec_b(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x05,             # $C000 DEC B
             0xC8,             # $C001 RET Z
             0xDB, 0xFE,       # $C002 IN A,($FE)
@@ -2903,23 +3004,25 @@
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'-c accelerator=digital-integration {tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49165'
+            'Simulation stopped (end of tape): PC=49165',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[2], 98)
 
     @patch.object(tap2sna, 'LoadTracer', TestLoadTracer)
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_dec_b_auto(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x3E, 0x7F, # $C000 LD A,$7F
             0xDB, 0xFE, # $C002 IN A,($FE)
             0xA9,       # $C004 XOR C
@@ -2930,22 +3033,24 @@
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'{tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49167'
+            'Simulation stopped (end of tape): PC=49167',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[2], 93)
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_inc_b(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x04,       # $C000 INC B
             0xC8,       # $C001 RET Z
             0xDB, 0xFE, # $C002 IN A,($FE)
@@ -2955,22 +3060,24 @@
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'-c accelerator=tiny {tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49164'
+            'Simulation stopped (end of tape): PC=49164',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[2], 156)
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_inc_b_none(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x04,             # $C000 INC B
             0x20, 0x03,       # $C001 JR NZ,$C007
             0x00, 0x00, 0x00, # $C003 DEFS 3
@@ -2983,23 +3090,25 @@
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'-c accelerator=alkatraz {tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49170'
+            'Simulation stopped (end of tape): PC=49170',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[2], 149)
 
     @patch.object(tap2sna, 'LoadTracer', TestLoadTracer)
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_inc_b_auto(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x04,       # $C000 INC B
             0xC8,       # $C001 RET Z
             0xDB, 0xFE, # $C002 IN A,($FE)
@@ -3009,22 +3118,24 @@
         )
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'{tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
-            'Simulation stopped (end of tape): PC=49164'
+            'Simulation stopped (end of tape): PC=49164',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[2], 156)
 
+    @patch.object(tap2sna, 'CSimulator', MockSimulator)
     @patch.object(tap2sna, 'Simulator', MockSimulator)
-    @patch.object(tap2sna, '_write_snapshot', mock_write_snapshot)
+    @patch.object(tap2sna, 'write_snapshot', mock_write_snapshot)
     def test_list_accelerators(self):
         global mock_memory
         mock_memory = [0] * 65536
         code = (
             0x04,             # $C000 INC B
             0xC8,             # $C001 RET Z
             0xDB, 0xFE,       # $C002 IN A,($FE)
@@ -3042,13 +3153,14 @@
         mock_memory[0xC000:0xC000 + len(code)] = code
         tapfile = self._write_tap([create_tap_header_block('bytes', 32768, 1)])
         output, error = self.run_tap2sna(f'-c accelerator=list {tapfile} out.z80')
         exp_out_lines = [
             'Data (19 bytes)',
             'Tape finished',
             'Simulation stopped (end of tape): PC=49174',
-            'Accelerators: tiny: 1; misses: 1/1; dec-a: 1/1/1'
+            'Accelerators: tiny: 1; misses: 1/1; dec-a: 1/1/1',
+            'Writing out.z80'
         ]
         self.assertEqual(exp_out_lines, self._format_output(output))
         self.assertEqual(error, '')
         self.assertEqual(simulator.registers[0], 255)
         self.assertEqual(simulator.registers[2], 156)
```

### Comparing `skoolkit-9.1/tests/test_tapinfo.py` & `skoolkit-9.2/tests/test_tapinfo.py`

 * *Files 1% similar despite different names*

```diff
@@ -252,19 +252,29 @@
               Pause: 1000ms
               Length: 3
               Data: 1, 2, 3
         """
         self._test_tzx_block(block, exp_output)
 
     def test_tzx_block_0x15(self):
-        block = [21] # Block ID
-        block.extend([0] * 5)
-        block.extend((2, 0, 0)) # Length of samples
-        block.extend((128, 12)) # Samples
-        exp_output = '1: Direct recording (0x15)'
+        block = (
+            21,      # Block ID
+            80, 0,   # T-states per sample
+            100, 0,  # Pause
+            4,       # Used bits in last byte
+            2, 0, 0, # Length of samples data
+            128, 12  # Samples
+        )
+        exp_output = """
+            1: Direct recording (0x15)
+              T-states per sample: 80
+              Pause: 100ms
+              Used bits in last byte: 4
+              Length: 2
+        """
         self._test_tzx_block(block, exp_output)
 
     def test_tzx_block_0x18(self):
         block = [24] # Block ID
         block.extend((12, 0, 0, 0)) # Block length
         block.extend([0] * 10)
         block.extend((1, 1)) # CSW data
```

### Comparing `skoolkit-9.1/tests/test_textutils.py` & `skoolkit-9.2/tests/test_textutils.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_trace.py` & `skoolkit-9.2/tests/test_trace.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,44 +1,73 @@
+from functools import partial
 import hashlib
 import os
 from textwrap import dedent
 from unittest.mock import patch
 
 from skoolkittest import SkoolKitTestCase
-from skoolkit import simulator, trace, SkoolKitError, VERSION
+from skoolkit import trace, SkoolKitError, VERSION, CSimulator
 from skoolkit.config import COMMANDS
+from skoolkit.simulator import Simulator
+from skoolkit.simutils import PC, IFF, IM, T
 
-ROM0_MD5 = 'b4d2692115a9f2924df92a3cbfb358fb'
-ROM1_MD5 = '6e09e5d3c4aef166601669feaaadc01c'
+ROM128_0_MD5 = 'b4d2692115a9f2924df92a3cbfb358fb'
+ROM128_1_MD5 = '6e09e5d3c4aef166601669feaaadc01c'
+ROM_PLUS2_0_MD5 = '4ed7af4636308b8a48d7a35e6c5b546b'
+ROM_PLUS2_1_MD5 = 'b3db95931cc844efaeb82db9c171b9f3'
+
+class MockSimulator:
+    def __init__(self, *args, **kwargs):
+        global simulator
+        simulator = self
+        self.memory = args[0]
+        self.opcodes = [self.nop] * 256
+        self.registers = [0] * 29
+        self.frame_duration = 69888
+        self.int_active = 32
+        self.pc = kwargs.get('pc', 0)
+        self.t1 = kwargs.get('t1', 0)
+        self.out_times = kwargs.get('out_times', ())
+
+    def set_tracer(self, tracer, *args, **kwargs):
+        tracer.out_times = self.out_times
+
+    def nop(self):
+        self.registers[PC] = self.pc
+        self.registers[T] = self.t1
 
 def mock_run(*args):
     global run_args
     run_args = args
 
 def mock_config(name):
     return {k: v[0] for k, v in COMMANDS[name].items()}
 
-def mock_write_snapshot(fname, ram, registers, state):
-    global s_fname, s_memory, s_banks, s_reg, s_state
+def mock_write_snapshot(fname, ram, registers, state, machine):
+    global s_fname, s_memory, s_banks, s_reg, s_state, s_machine
     s_fname = fname
+    s_memory = [0] * 65536
     if len(ram) == 8:
         s_banks = ram
         page = 0
         for spec in state:
             if spec.startswith('7ffd='):
                 page = int(spec[5:]) % 8
                 break
-        s_memory = [0] * 16384 + ram[5] + ram[2] + ram[page]
+        s_memory[0x4000:0x8000] = ram[5]
+        s_memory[0x8000:0xC000] = ram[2]
+        s_memory[0xC000:] = ram[page]
     else:
         s_banks = None
-        s_memory = [0] * 16384 + ram
+        s_memory[0x4000:] = ram
     s_reg = registers
     s_state = state
+    s_machine = machine
 
-class TestSimulator(simulator.Simulator):
+class TestSimulator(CSimulator or Simulator):
     def __init__(self, memory, registers=None, state=None, config=None):
         global simulator
         simulator = self
         super().__init__(memory, registers, state, config)
 
 class TraceTest(SkoolKitTestCase):
     def _test_trace(self, args, exp_output):
@@ -59,14 +88,15 @@
         self.assertIsNone(options.dump)
         self.assertTrue(options.interrupts)
         self.assertEqual(options.max_operations, 0)
         self.assertEqual(options.max_tstates, 0)
         self.assertIsNone(options.org)
         self.assertEqual(options.params, [])
         self.assertEqual(options.pokes, [])
+        self.assertFalse(options.python)
         self.assertEqual(options.reg, [])
         self.assertIsNone(options.rom)
         self.assertFalse(options.stats)
         self.assertEqual(options.verbose, 0)
         self.assertEqual(config['TraceLine'], '${pc:04X} {i}')
         self.assertEqual(
             config['TraceLine2'],
@@ -123,14 +153,15 @@
         self.assertEqual(config['TraceOperandDecimal'], ',03,05')
 
     def test_no_arguments(self):
         output, error = self.run_trace(catch_exit=2)
         self.assertEqual(output, '')
         self.assertTrue(error.startswith('usage:'))
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_sna_48k(self):
         header = [
             1,      # I
             2, 3,   # HL'
             4, 5,   # DE'
             6, 7,   # BC'
@@ -152,17 +183,18 @@
         snafile = self.write_bin_file(header + ram, suffix='.sna')
         exp_output = """
             $6000 NOP              A=16  F=00010101  BC=0F0E  DE=0D0C  HL=0B0A  IX=1312 IY=1110
                                    A'=09 F'=00001000 BC'=0706 DE'=0504 HL'=0302 SP=4002 IR=0115
             Stopped at $6001
         """
         self._test_trace(f'-vv -S 24577 {snafile}', exp_output)
-        self.assertEqual(simulator.iff, 0)
-        self.assertEqual(simulator.imode, 2)
+        self.assertEqual(simulator.registers[IFF], 0)
+        self.assertEqual(simulator.registers[IM], 2)
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_sna_128k(self):
         sna = [0] * 131103
         sna[:27] = (
             1,         # I
             2, 3,      # HL'
             4, 5,      # DE'
@@ -193,19 +225,20 @@
         snafile = self.write_bin_file(sna, suffix='.sna')
         exp_output = """
             $6000 OUT (C),A        A=11  F=00010110  BC=7FFD  DE=0D0C  HL=0B0A  IX=1312 IY=1110
                                    A'=09 F'=00001000 BC'=0706 DE'=0504 HL'=0302 SP=4000 IR=0116
             Stopped at $6002
         """
         self._test_trace(f'-vv -S 24578 {snafile}', exp_output)
-        self.assertEqual(simulator.iff, 0)
-        self.assertEqual(simulator.imode, 2)
+        self.assertEqual(simulator.registers[IFF], 0)
+        self.assertEqual(simulator.registers[IM], 2)
         self.assertTrue(all(b == 1 for b in simulator.memory[0xC000:0x10000]))
-        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM1_MD5)
+        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM128_1_MD5)
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_z80_48k(self):
         registers = {
             'A': 1,
             'F': 2,
             'B': 3,
             'C': 4,
@@ -238,18 +271,19 @@
         z80file = self.write_z80_file(None, ram, registers=registers)
         exp_output = """
             $8000 NOP              A=01  F=00000010  BC=0304  DE=0506  HL=0708  IX=0B0C IY=090A
                                    A'=0F F'=00010000 BC'=1112 DE'=1314 HL'=1516 SP=FFFF IR=0D0F
             Stopped at $8001
         """
         self._test_trace(f'-vv -S 32769 {z80file}', exp_output)
-        self.assertEqual(simulator.iff, 1)
-        self.assertEqual(simulator.imode, 2)
-        self.assertEqual(simulator.registers[25], 20004)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 2)
+        self.assertEqual(simulator.registers[T], 20004)
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_z80_128k(self):
         ram = [0] * 49152
         ram[8192:8194] = (0xED, 0x79) # $6000 OUT (C),A
         pages = {p: [p] * 16384 for p in (1, 3, 4, 6, 7)}
         registers = {
             'A': 1,
@@ -284,20 +318,70 @@
         z80file = self.write_z80(ram, machine_id=4, out_7ffd=18, pages=pages, registers=registers)[1]
         exp_output = """
             $6000 OUT (C),A        A=01  F=00000010  BC=7FFD  DE=0506  HL=0708  IX=0B0C IY=090A
                                    A'=0F F'=00010000 BC'=1112 DE'=1314 HL'=1516 SP=FFFF IR=0D10
             Stopped at $6002
         """
         self._test_trace(f'-vv -S 24578 {z80file}', exp_output)
-        self.assertEqual(simulator.iff, 1)
-        self.assertEqual(simulator.imode, 2)
-        self.assertEqual(simulator.registers[25], 20012)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 2)
+        self.assertEqual(simulator.registers[T], 20012)
         self.assertTrue(all(b == 1 for b in simulator.memory[0xC000:0x10000]))
-        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM0_MD5)
+        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM128_0_MD5)
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
+    @patch.object(trace, 'Simulator', TestSimulator)
+    def test_z80_plus2(self):
+        ram = [0] * 49152
+        ram[8192:8194] = (0xED, 0x79) # $6000 OUT (C),A
+        pages = {p: [p] * 16384 for p in (1, 3, 4, 6, 7)}
+        registers = {
+            'A': 1,
+            'F': 2,
+            'B': 127,
+            'C': 253,
+            'D': 5,
+            'E': 6,
+            'H': 7,
+            'L': 8,
+            'IXh': 9,
+            'IXl': 10,
+            'IYh': 11,
+            'IYl': 12,
+            'SP': 65535,
+            'I': 13,
+            'R': 14,
+            '^A': 15,
+            '^F': 16,
+            '^B': 17,
+            '^C': 18,
+            '^D': 19,
+            '^E': 20,
+            '^H': 21,
+            '^L': 22,
+            'PC': 24576,
+            'iff1': 1,
+            'iff2': 1,
+            'im': 2,
+            'tstates': 20000
+        }
+        z80file = self.write_z80(ram, machine_id=4, modify=True, out_7ffd=18, pages=pages, registers=registers)[1]
+        exp_output = """
+            $6000 OUT (C),A        A=01  F=00000010  BC=7FFD  DE=0506  HL=0708  IX=0B0C IY=090A
+                                   A'=0F F'=00010000 BC'=1112 DE'=1314 HL'=1516 SP=FFFF IR=0D10
+            Stopped at $6002
+        """
+        self._test_trace(f'-vv -S 24578 {z80file}', exp_output)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 2)
+        self.assertEqual(simulator.registers[T], 20012)
+        self.assertTrue(all(b == 1 for b in simulator.memory[0xC000:0x10000]))
+        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM_PLUS2_0_MD5)
+
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_szx_48k(self):
         registers = (
             1, 2,       # AF
             3, 4,       # BC
             5, 6,       # DE
             7, 8,       # HL
@@ -319,18 +403,19 @@
         szxfile = self.write_szx(ram, registers=registers)
         exp_output = """
             $C000 NOP              A=02  F=00000001  BC=0403  DE=0605  HL=0807  IX=1211 IY=1413
                                    A'=0A F'=00001001 BC'=0C0B DE'=0E0D HL'=100F SP=8000 IR=1517
             Stopped at $C001
         """
         self._test_trace(f'-vv -S 49153 {szxfile}', exp_output)
-        self.assertEqual(simulator.iff, 1)
-        self.assertEqual(simulator.imode, 0)
-        self.assertEqual(simulator.registers[25], 261)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 0)
+        self.assertEqual(simulator.registers[T], 261)
 
+    @patch.object(trace, 'CSimulator', TestSimulator)
     @patch.object(trace, 'Simulator', TestSimulator)
     def test_szx_128k(self):
         ram = [0] * 49152
         ram[8192:8194] = (
             0xED, 0x79  # $6000 OUT (C),A
         )
         pages = {p: [p] * 16384 for p in (1, 3, 4, 6, 7)}
@@ -356,19 +441,59 @@
         szxfile = self.write_szx(ram, machine_id=2, ch7ffd=4, pages=pages, registers=registers)
         exp_output = """
             $6000 OUT (C),A        A=13  F=00000001  BC=7FFD  DE=0605  HL=0807  IX=1211 IY=1413
                                    A'=0A F'=00001001 BC'=0C0B DE'=0E0D HL'=100F SP=8000 IR=1518
             Stopped at $6002
         """
         self._test_trace(f'-vv -S 24578 {szxfile}', exp_output)
-        self.assertEqual(simulator.iff, 1)
-        self.assertEqual(simulator.imode, 0)
-        self.assertEqual(simulator.registers[25], 269)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 0)
+        self.assertEqual(simulator.registers[T], 269)
         self.assertTrue(all(b == 3 for b in simulator.memory[0xC000:0x10000]))
-        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM1_MD5)
+        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM128_1_MD5)
+
+    @patch.object(trace, 'CSimulator', TestSimulator)
+    @patch.object(trace, 'Simulator', TestSimulator)
+    def test_szx_plus2(self):
+        ram = [0] * 49152
+        ram[8192:8194] = (
+            0xED, 0x79  # $6000 OUT (C),A
+        )
+        pages = {p: [p] * 16384 for p in (1, 3, 4, 6, 7)}
+        registers = (
+            1, 19,      # AF
+            253, 127,   # BC
+            5, 6,       # DE
+            7, 8,       # HL
+            9, 10,      # AF'
+            11, 12,     # BC'
+            13, 14,     # DE'
+            15, 16,     # HL'
+            17, 18,     # IX
+            19, 20,     # IY
+            0, 128,     # SP=32768
+            0, 96,      # PC=24576
+            21,         # I
+            22,         # R
+            1, 1,       # iff1, iff2
+            0,          # im
+            1, 1, 0, 0, # dwCyclesStart=257
+        )
+        szxfile = self.write_szx(ram, machine_id=3, ch7ffd=4, pages=pages, registers=registers)
+        exp_output = """
+            $6000 OUT (C),A        A=13  F=00000001  BC=7FFD  DE=0605  HL=0807  IX=1211 IY=1413
+                                   A'=0A F'=00001001 BC'=0C0B DE'=0E0D HL'=100F SP=8000 IR=1518
+            Stopped at $6002
+        """
+        self._test_trace(f'-vv -S 24578 {szxfile}', exp_output)
+        self.assertEqual(simulator.registers[IFF], 1)
+        self.assertEqual(simulator.registers[IM], 0)
+        self.assertEqual(simulator.registers[T], 269)
+        self.assertTrue(all(b == 3 for b in simulator.memory[0xC000:0x10000]))
+        self.assertEqual(hashlib.md5(bytes(simulator.memory[0x0000:0x4000])).hexdigest(), ROM_PLUS2_1_MD5)
 
     def test_no_snapshot_48k(self):
         output, error = self.run_trace(f'-v -S 2 48')
         self.assertEqual(error, '')
         exp_output = """
             $0000 DI
             $0001 XOR A
@@ -382,14 +507,24 @@
         exp_output = """
             $0000 DI
             $0001 LD BC,$692B
             Stopped at $0004
         """
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    def test_no_snapshot_plus_2(self):
+        output, error = self.run_trace(f'-v -n -s 154 -S 162 +2')
+        self.assertEqual(error, '')
+        exp_output = """
+            $009A LD HL,$06F7
+            $009D JR $00A2
+            Stopped at $00A2
+        """
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+
     def test_default_start_address_for_binary_file(self):
         data = [0xAF] # XOR A
         binfile = self.write_bin_file(data, suffix='.bin')
         output, error = self.run_trace(f'-n -v -S 0 {binfile}')
         self.assertEqual(error, '')
         exp_output = """
             $FFFF XOR A
@@ -402,15 +537,15 @@
             0x76,       # $8000 HALT
             0xAF,       # $8001 XOR A
         ]
         start = 0x8000
         stop = 0x8002
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 0, 'tstates': 69884}
+        registers = {'PC': start, 'iff1': 1, 'im': 0, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 HALT')
         self.assertEqual(output_lines[1], '$0038 PUSH AF')
         self.assertEqual(output_lines[109], '$0052 RET')
@@ -422,15 +557,15 @@
             0x76,       # $8000 HALT
             0xAF,       # $8001 XOR A
         ]
         start = 0x8000
         stop = 0x8002
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69884}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 HALT')
         self.assertEqual(output_lines[1], '$0038 PUSH AF')
         self.assertEqual(output_lines[109], '$0052 RET')
@@ -445,15 +580,15 @@
             0xC9,       # $7FFE RET
             0xFE, 0x7F, # $7FFF DEFW $7FFE
         ]
         start = 0x7ffb
         stop = 0x7ffd
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'I': 127, 'iff2': 1, 'im': 2, 'tstates': 69882}
+        registers = {'PC': start, 'I': 127, 'iff1': 1, 'im': 2, 'tstates': 69882}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$7FFB HALT')
         self.assertEqual(output_lines[1], '$7FFB HALT')
         self.assertEqual(output_lines[2], '$7FFE RET')
@@ -466,15 +601,15 @@
             0x00, # $8001 NOP ; t=69886 (interrupt follows)
             0x00, # $8002 NOP
         ]
         start = 0x8000
         stop = 0x8003
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69882}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69882}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 NOP')
         self.assertEqual(output_lines[1], '$8001 NOP')
         self.assertEqual(output_lines[2], '$0038 PUSH AF')
@@ -489,15 +624,15 @@
             0x00, # $8002 NOP ; t=69890 (interrupt follows)
             0x00, # $8003 NOP
         ]
         start = 0x8000
         stop = 0x8004
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69882}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69882}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 NOP')
         self.assertEqual(output_lines[1], '$8001 EI')
         self.assertEqual(output_lines[2], '$8002 NOP')
@@ -513,15 +648,15 @@
             0x00, # $8002 NOP ; t=69890
             0x00, # $8003 NOP ; t=69894
         ]
         start = 0x8000
         stop = 0x8004
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69882}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69882}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 NOP')
         self.assertEqual(output_lines[1], '$8001 DI')
         self.assertEqual(output_lines[2], '$8002 NOP')
@@ -535,15 +670,15 @@
             0x00, # $8002 NOP
         ]
         start = 0x8000
         stop = 0x8003
         ram = [0] * 49152
         ram[0x1C00] = ram[0x1C04] = 0xFF # KSTATE0/4
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69886}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69886}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 DEFB $DD')
         self.assertEqual(output_lines[1], '$8001 NOP')
         self.assertEqual(output_lines[2], '$0038 PUSH AF')
@@ -558,15 +693,15 @@
             0x00, # $8002 NOP
         ]
         start = 0x8000
         stop = 0x8003
         ram = [0] * 49152
         ram[0x1C00] = ram[0x1C04] = 0xFF # KSTATE0/4
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69886}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69886}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 DEFB $FD')
         self.assertEqual(output_lines[1], '$8001 NOP')
         self.assertEqual(output_lines[2], '$0038 PUSH AF')
@@ -584,15 +719,15 @@
             0x00, # $8005 NOP
         ]
         start = 0x8000
         stop = 0x8006
         ram = [0] * 49152
         ram[0x1C00] = ram[0x1C04] = 0xFF # KSTATE0/4
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69886}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69886}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 DEFB $DD')
         self.assertEqual(output_lines[1], '$8001 DEFB $FD')
         self.assertEqual(output_lines[2], '$8002 DEFB $DD')
@@ -608,15 +743,15 @@
             0x78, # $8000 LD A,B ; t=69884 (+4=69888: frame boundary)
             0x78, # $8001 LD A,B
         ]
         start = 0x8000
         stop = 0x8002
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69884}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '$8000 LD A,B')
         self.assertEqual(output_lines[1], '$0038 PUSH AF')
         self.assertEqual(output_lines[109], '$0052 RET')
@@ -638,15 +773,15 @@
             0xC9,                   # $8004 RET
         ]
         outfile = os.path.join(self.make_directory(), 'dump.z80')
         start = 0x7fef
         stop = 0x7fff
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69805}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69805}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file} {outfile}')
         self.assertEqual(error, '')
         self.assertEqual(s_memory[0xc001], 2) # DJNZ interrupted when B=2
 
     @patch.object(trace, 'write_snapshot', mock_write_snapshot)
     def test_interrupt_with_ldir(self):
@@ -663,15 +798,15 @@
             0xC9,                   # $8004 RET
         ]
         outfile = os.path.join(self.make_directory(), 'dump.z80')
         start = 0x7fee
         stop = 0x7fff
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69805}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69805}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file} {outfile}')
         self.assertEqual(error, '')
         self.assertEqual(s_memory[0xc000], 2) # LDIR interrupted when BC=2
 
     @patch.object(trace, 'write_snapshot', mock_write_snapshot)
     def test_interrupt_with_lddr(self):
@@ -688,30 +823,30 @@
             0xC9,                   # $8004 RET
         ]
         outfile = os.path.join(self.make_directory(), 'dump.z80')
         start = 0x7fee
         stop = 0x7fff
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69805}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69805}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file} {outfile}')
         self.assertEqual(error, '')
         self.assertEqual(s_memory[0xc000], 2) # LDDR interrupted when BC=2
 
     def test_interrupt_mode_1_with_timestamps(self):
         data = [
             0x00, # $8000 NOP ; t=69884 (interrupt follows)
             0x00, # $8001 NOP
         ]
         start = 0x8000
         stop = 0x8002
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69884}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         trace_line = 'TraceLine={t} ${pc:04X} {i}'
         output, error = self.run_trace(('-I', trace_line, '-S', str(stop), '-v', z80file))
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '69884 $8000 NOP')
         self.assertEqual(output_lines[1], '69901 $0038 PUSH AF')
@@ -728,15 +863,15 @@
             0xC9,       # $7FFE RET
             0xFE, 0x7F, # $7FFF DEFW $7FFE
         ]
         start = 0x7ffb
         stop = 0x7ffd
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'I': 127, 'iff2': 1, 'im': 2, 'tstates': 69884}
+        registers = {'PC': start, 'I': 127, 'iff1': 1, 'im': 2, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         trace_line = 'TraceLine={t} ${pc:04X} {i}'
         output, error = self.run_trace(('-I', trace_line, '-S', str(stop), '-v', z80file))
         self.assertEqual(error, '')
         output_lines = output.split('\n')
         self.assertEqual(output_lines[0], '69884 $7FFB NOP')
         self.assertEqual(output_lines[1], '69907 $7FFE RET')
@@ -752,15 +887,15 @@
             0x00,       # $7FFE NOP
             0xFB, 0x7F, # $7FFF DEFW $7FFB ; Interrupt vector
         ]
         start = 0x7ff9
         stop = 0x7fff
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'I': 127, 'iff2': 1, 'im': 2, 'tstates': 69884}
+        registers = {'PC': start, 'I': 127, 'iff1': 1, 'im': 2, 'tstates': 69884}
         z80file = self.write_z80_file(None, ram, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         exp_output = """
             $7FF9 NOP
             $7FFB EI
             $7FFC NEG
@@ -780,15 +915,15 @@
             0x00,       # $7FFE NOP
             0xFB, 0x7F, # $7FFF DEFW $7FFB ; Interrupt vector
         ]
         start = 0x7ff9
         stop = 0x7fff
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'I': 127, 'iff2': 1, 'im': 2, 'tstates': 70904}
+        registers = {'PC': start, 'I': 127, 'iff1': 1, 'im': 2, 'tstates': 70904}
         z80file = self.write_z80_file(None, ram, machine_id=4, registers=registers)
         output, error = self.run_trace(f'-S {stop} -v {z80file}')
         self.assertEqual(error, '')
         exp_output = """
             $7FF9 NOP
             $7FFB EI
             $7FFC IN A,(C)
@@ -912,27 +1047,40 @@
             Delays:
              [31]*15, 46, [31]*14, 46, [31]*13, 46, [31]*12, 46, [31]*11, 46, [31]*10, 46,
              [31]*9, 46, [31]*8, 46, [31]*7, 46, [31]*6, 46, [31]*5, 46, [31]*4, 46,
              [31]*3, 46, [31]*2, 46, 31, 46
         """
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    @patch.object(trace, 'CSimulator', partial(MockSimulator, pc=0x8001, out_times=(0, 500000, 1000000)))
+    @patch.object(trace, 'Simulator', partial(MockSimulator, pc=0x8001, out_times=(0, 500000, 1000000)))
+    def test_option_audio_128k(self):
+        output, error = self.run_trace(f'-s 0x8000 -S 0x8001 --audio 128')
+        self.assertEqual(error, '')
+        exp_output = """
+            Stopped at $8001
+            Sound duration: 1000000 T-states (0.282s)
+            Delays:
+             [500000]*2
+        """
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+
     def test_option_cmio(self):
         data = (
             0xAF,             # $6000 XOR A        ;  4T -> 10T [ 4T ->  10T]
             0x06, 0x01,       # $6001 LD B,$01     ;  7T -> 15T [11T ->  25T]
             0x11, 0x02, 0x00, # $6003 LD DE,$0002  ; 10T -> 24T [21T ->  49T]
             0xDD, 0x34, 0x00, # $6006 INC (IX+$00) ; 23T -> 53T [44T -> 102T]
             0xC3, 0x00, 0x80, # $6009 JP $8000     ; 10T -> 19T [54T -> 121T]
         )
         start = 0x6000
         stop = 0x8000
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 14335}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 14335}
         z80file = self.write_z80_file(None, ram, registers=registers)
         trace_line = 'TraceLine={t} ${pc:04X} {i}'
         exp_output = """
             14335 $6000 XOR A
             14345 $6001 LD B,$01
             14360 $6003 LD DE,$0002
             14384 $6006 INC (IX+$00)
@@ -1144,41 +1292,122 @@
             Stopped at $8002: 2 operations
         """
         for option in ('-m', '--max-operations'):
             output, error = self.run_trace(f'-n -o {start} -v {option} 2 {binfile}')
             self.assertEqual(error, '')
             self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    @patch.object(trace, 'write_snapshot', mock_write_snapshot)
+    def test_option_max_operations_disables_fast_djnz(self):
+        data = (
+            0xF3,       # $8000 DI
+            0x06, 0x02, # $8001 LD B,2
+            0x10, 0xFE, # $8003 DJNZ $8002
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            Stopped at $8003: 3 operations
+            Wrote out.z80
+        """
+        output, error = self.run_trace(f'-o {start} -m 3 {binfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+        self.assertLessEqual({'BC=256', 'R=3'}, set(s_reg))
+
+    @patch.object(trace, 'write_snapshot', mock_write_snapshot)
+    def test_option_max_operations_disables_fast_ldir(self):
+        data = (
+            0xF3,             # $8000 DI
+            0x01, 0x02, 0x00, # $8001 LD BC,$0002
+            0x11, 0x01, 0xC0, # $8004 LD DE,$C001
+            0x21, 0x00, 0xC0, # $8007 LD HL,$C000
+            0xED, 0xB0,       # $800A LDIR
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            Stopped at $800A: 5 operations
+            Wrote out.z80
+        """
+        output, error = self.run_trace(f'-o {start} -m 5 {binfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+        self.assertLessEqual({'BC=1', 'DE=49154', 'HL=49153', 'R=6'}, set(s_reg))
+
     def test_option_max_tstates(self):
-        data = [
+        data = (
             0xAF, # XOR A
             0x3C, # INC A
-        ]
-        binfile = self.write_bin_file(data, suffix='.bin')
-        start = 32768
+        )
+        start = 0x8000
+        stop = start + len(data)
+        ram = [0] * 0xC000
+        ram[start - 0x4000:stop - 0x4000] = data
+        start_time = 4
+        registers = {'PC': start, 'tstates': start_time}
+        z80file = self.write_z80_file(None, ram, registers=registers)
         exp_output = """
             $8000 XOR A
             $8001 INC A
             Stopped at $8002: 8 T-states
         """
         for option in ('-M', '--max-tstates'):
-            output, error = self.run_trace(f'-n -o {start} -v {option} 8 {binfile}')
+            output, error = self.run_trace(f'-v {option} 8 {z80file}')
             self.assertEqual(error, '')
             self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    @patch.object(trace, 'write_snapshot', mock_write_snapshot)
+    def test_option_max_tstates_disables_fast_djnz(self):
+        data = (
+            0xF3,       # $8000 DI         ; [4]
+            0x06, 0x02, # $8001 LD B,2     ; [7]
+            0x10, 0xFE, # $8003 DJNZ $8002 ; [13/8]
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            Stopped at $8003: 24 T-states
+            Wrote out.z80
+        """
+        output, error = self.run_trace(f'-o {start} -M 24 {binfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+        self.assertLessEqual({'BC=256', 'R=3'}, set(s_reg))
+
+    @patch.object(trace, 'write_snapshot', mock_write_snapshot)
+    def test_option_max_tstates_disables_fast_ldir(self):
+        data = (
+            0xF3,             # $8000 DI          ; [4]
+            0x01, 0x02, 0x00, # $8001 LD BC,$0002 ; [10]
+            0x11, 0x01, 0xC0, # $8004 LD DE,$C001 ; [10]
+            0x21, 0x00, 0xC0, # $8007 LD HL,$C000 ; [10]
+            0xED, 0xB0,       # $800A LDIR        ; [21/16]
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            Stopped at $800A: 55 T-states
+            Wrote out.z80
+        """
+        output, error = self.run_trace(f'-o {start} -M 55 {binfile} out.z80')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+        self.assertLessEqual({'BC=1', 'DE=49154', 'HL=49153', 'R=6'}, set(s_reg))
+
     def test_option_no_interrupts(self):
         data = [
             0x00, # $8000 NOP ; t=69886 (interrupt would normally follow)
             0x00, # $8001 NOP
         ]
         start = 0x8000
         stop = 0x8002
         ram = [0] * 49152
         ram[start - 0x4000:start - 0x4000 + len(data)] = data
-        registers = {'PC': start, 'iff2': 1, 'im': 1, 'tstates': 69886}
+        registers = {'PC': start, 'iff1': 1, 'im': 1, 'tstates': 69886}
         z80file = self.write_z80_file(None, ram, registers=registers)
         exp_output = dedent("""
             $8000 NOP
             $8001 NOP
             Stopped at $8002
         """).strip()
         for option in ('-n', '--no-interrupts'):
@@ -1245,14 +1474,30 @@
             '$6007 LD A,($C000)    Bank 4: A=$FB',
             '$6007 LD A,($C000)    Bank 5: A=$FA',
             '$6007 LD A,($C000)    Bank 6: A=$F9',
             '$6007 LD A,($C000)    Bank 7: A=$F8'
         ]
         self.assertEqual(exp_output, output.rstrip().split('\n')[3::5])
 
+    @patch.object(trace, 'Simulator', partial(MockSimulator, pc=0x1234))
+    def test_option_python(self):
+        global simulator
+        simulator = None
+        output, error = self.run_trace(f'--python -m 1 48')
+        self.assertEqual(error, '')
+        self.assertEqual(output, 'Stopped at $1234: 1 operations\n')
+
+    @patch.object(trace, 'CMIOSimulator', partial(MockSimulator, pc=0x2345))
+    def test_option_python_with_cmio(self):
+        global simulator
+        simulator = None
+        output, error = self.run_trace(f'--python --cmio -m 1 48')
+        self.assertEqual(error, '')
+        self.assertEqual(output, 'Stopped at $2345: 1 operations\n')
+
     def test_option_reg(self):
         data = [
             0x3C  # INC A
         ]
         binfile = self.write_bin_file(data, suffix='.bin')
         start, stop = 32768, 32769
         registers = {
@@ -1278,14 +1523,55 @@
         exp_output = """
             $8000 INC A            A=51  F=00000001  BC=1234  DE=2345  HL=3456  IX=4567 IY=5678
                                    A'=98 F'=10101010 BC'=8765 DE'=7654 HL'=6543 SP=5432 IR=678A
             Stopped at $8001
         """
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    def test_option_reg_with_snapshot(self):
+        data = [
+            0x3C  # INC A
+        ]
+        start, stop = 32768, 32769
+        ram = [0] * 49152
+        ram[start - 0x4000:start - 0x4000 + len(data)] = data
+        z80reg = {
+            'A': 0xFF, 'F': 0xFF, 'B': 0xFF, 'C': 0xFF, 'D': 0xFF, 'E': 0xFF, 'H': 0xFF, 'L': 0xFF,
+            '^A': 0xFF, '^F': 0xFF, '^B': 0xFF, '^C': 0xFF, '^D': 0xFF, '^E': 0xFF, '^H': 0xFF, '^L': 0xFF,
+            'IXl': 0xFF, 'IXh': 0xFF, 'IYl': 0xFF, 'IYh': 0xFF,
+            'I': 0xFF, 'R': 0xFF, 'SP': 0xFFFF, 'PC': start
+        }
+        z80file = self.write_z80_file(None, ram, registers=z80reg)
+        registers = {
+            'A': 0x50,
+            'F': 0b01000001,
+            'BC': 0x1234,
+            'DE': 0x2345,
+            'HL': 0x3456,
+            'IX': 0x4567,
+            'IY': 0x5678,
+            'I': 0x67,
+            'R': 0x89,
+            '^A': 0x98,
+            '^F': 0b10101010,
+            '^BC': 0x8765,
+            '^DE': 0x7654,
+            '^HL': 0x6543,
+            'SP': 0x5432
+        }
+        reg_options = ' '.join(f'--reg {r}={v}' for r, v in registers.items())
+        output, error = self.run_trace(f'-n -S {stop} -vv {reg_options} {z80file}')
+        self.assertEqual(error, '')
+        exp_output = """
+            $8000 INC A            A=51  F=00000001  BC=1234  DE=2345  HL=3456  IX=4567 IY=5678
+                                   A'=98 F'=10101010 BC'=8765 DE'=7654 HL'=6543 SP=5432 IR=678A
+            Stopped at $8001
+        """
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+
     def test_option_reg_help(self):
         output, error = self.run_trace('--reg help')
         self.assertTrue(output.startswith('Usage: --reg name=value\n'))
         self.assertEqual(error, '')
 
     def test_option_rom(self):
         romfile = self.write_bin_file([175], suffix='.bin')
@@ -1380,14 +1666,25 @@
         self.assertEqual(error, '')
         o_lines = output.split('\n')
         self.assertEqual(o_lines[0], 'Stopped at $8002')
         self.assertEqual(o_lines[1], 'Z80 execution time: 8 T-states (0.000s)')
         self.assertEqual(o_lines[2], 'Instructions executed: 2')
         self.assertEqual(o_lines[3][:17], 'Simulation time: ')
 
+    @patch.object(trace, 'CSimulator', partial(MockSimulator, pc=0x8001, t1=1000000))
+    @patch.object(trace, 'Simulator', partial(MockSimulator, pc=0x8001, t1=1000000))
+    def test_option_stats_128k(self):
+        output, error = self.run_trace(f'-s 0x8000 -S 0x8001 --stats 128')
+        self.assertEqual(error, '')
+        o_lines = output.split('\n')
+        self.assertEqual(o_lines[0], 'Stopped at $8001')
+        self.assertEqual(o_lines[1], 'Z80 execution time: 1000000 T-states (0.282s)')
+        self.assertEqual(o_lines[2], 'Instructions executed: 1')
+        self.assertEqual(o_lines[3][:17], 'Simulation time: ')
+
     def test_option_stop(self):
         for option in ('-S 57', '--stop 0x0039'):
             output, error = self.run_trace(f'-n -v -s 56 {option} 48')
             self.assertEqual(error, '')
             exp_output = """
                 $0038 PUSH AF
                 Stopped at $0039
@@ -1404,14 +1701,56 @@
         self.assertEqual(error, '')
         exp_output = """
             $8000 XOR A
             Stopped at $8001
         """
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
 
+    def test_option_verbose_disables_fast_djnz(self):
+        data = (
+            0xF3,       # $8000 DI
+            0x06, 0x02, # $8001 LD B,2
+            0x10, 0xFE, # $8003 DJNZ $8002
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            $8000 DI
+            $8001 LD B,$02
+            $8003 DJNZ $8003
+            $8003 DJNZ $8003
+            Stopped at $8005
+        """
+        output, error = self.run_trace(f'-v -o {start} -S 0x8005 {binfile}')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+
+    def test_option_verbose_disables_fast_ldir(self):
+        data = (
+            0xF3,             # $8000 DI
+            0x01, 0x02, 0x00, # $8001 LD BC,$0002
+            0x11, 0x01, 0xC0, # $8004 LD DE,$C001
+            0x21, 0x00, 0xC0, # $8007 LD HL,$C000
+            0xED, 0xB0,       # $800A LDIR
+        )
+        binfile = self.write_bin_file(data, suffix='.bin')
+        start = 32768
+        exp_output = """
+            $8000 DI
+            $8001 LD BC,$0002
+            $8004 LD DE,$C001
+            $8007 LD HL,$C000
+            $800A LDIR
+            $800A LDIR
+            Stopped at $800C
+        """
+        output, error = self.run_trace(f'-v -o {start} -S 0x800C {binfile}')
+        self.assertEqual(error, '')
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+
     def test_option_vv(self):
         data = [
             0xAF, # XOR A
             0x3C  # INC A
         ]
         binfile = self.write_bin_file(data, suffix='.bin')
         start, stop = 32768, 32770
@@ -1952,38 +2291,38 @@
         start = 32768
         stop = start + len(data)
         output, error = self.run_trace(f'-o {start} -S {stop} {infile} {outfile}')
         exp_output = f"""
             Stopped at ${stop:04X}
             Wrote {outfile}
         """
-        exp_reg = (
-            'a=1',
-            'f=16',
-            'bc=61223',
-            'de=5112',
-            'hl=32119',
-            'ix=3442',
-            'iy=10030',
-            'sp=48873',
-            'i=255',
-            'r=143',
-            '^a=255',
-            '^f=187',
-            '^bc=4232',
-            '^de=21432',
-            '^hl=25431',
-            f'pc={stop}'
-        )
-        exp_state = ['border=1', 'fe=1', 'iff=0', 'im=2', 'tstates=166']
+        exp_reg = [
+            'A=1',
+            'F=16',
+            'BC=61223',
+            'DE=5112',
+            'HL=32119',
+            'IX=3442',
+            'IY=10030',
+            'SP=48873',
+            'I=255',
+            'R=143',
+            '^A=255',
+            '^F=187',
+            '^BC=4232',
+            '^DE=21432',
+            '^HL=25431',
+            f'PC={stop}'
+        ]
+        exp_state = {'border=1', 'fe=1', 'iff=0', 'im=2', 'tstates=166'}
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
         self.assertEqual(s_fname, outfile)
         self.assertEqual(data, s_memory[start:stop])
         self.assertEqual(exp_reg, s_reg)
-        self.assertEqual(exp_state, s_state)
+        self.assertEqual(exp_state, set(s_state))
 
     @patch.object(trace, 'write_snapshot', mock_write_snapshot)
     def test_write_z80_128k(self):
         sna = [0] * 131103
         start = 32768
         sna[49179:49181] = (start % 256, start // 256) # PC
         code = [
@@ -2015,40 +2354,105 @@
         outfile = os.path.join(self.make_directory(), 'out.z80')
         stop = start + len(code)
         output, error = self.run_trace(f'-S {stop} {snafile} {outfile}')
         exp_output = f"""
             Stopped at ${stop:04X}
             Wrote {outfile}
         """
-        exp_reg = (
-            'a=1',
-            'f=16',
-            'bc=61223',
-            'de=5112',
-            'hl=32119',
-            'ix=3442',
-            'iy=10030',
-            'sp=48873',
-            'i=255',
-            'r=145',
-            '^a=255',
-            '^f=187',
-            '^bc=32765',
-            '^de=21432',
-            '^hl=25431',
-            f'pc={stop}'
-        )
-        exp_state = [f'ay[{n}]=0' for n in range(16)]
-        exp_state.extend(('7ffd=1', 'fffd=0', 'border=1', 'fe=1', 'iff=0', 'im=2', 'tstates=178'))
+        exp_reg = [
+            'A=1',
+            'F=16',
+            'BC=61223',
+            'DE=5112',
+            'HL=32119',
+            'IX=3442',
+            'IY=10030',
+            'SP=48873',
+            'I=255',
+            'R=145',
+            '^A=255',
+            '^F=187',
+            '^BC=32765',
+            '^DE=21432',
+            '^HL=25431',
+            f'PC={stop}'
+        ]
+        exp_state = {f'ay[{n}]=0' for n in range(16)}
+        exp_state.update(('7ffd=1', 'fffd=0', 'border=1', 'fe=1', 'iff=0', 'im=2', 'tstates=178'))
         self.assertEqual(dedent(exp_output).strip(), output.rstrip())
         self.assertEqual(s_fname, outfile)
         self.assertEqual(code, s_memory[start:stop])
         self.assertTrue(all(b == 1 for b in s_memory[0xC000:0x10000]))
         self.assertEqual(exp_reg, s_reg)
-        self.assertEqual(exp_state, s_state)
+        self.assertEqual(exp_state, set(s_state))
+        self.assertEqual(s_machine, '128K')
+
+    @patch.object(trace, 'write_snapshot', mock_write_snapshot)
+    def test_write_z80_plus2(self):
+        ram = [0] * 49152
+        start = 32768
+        code = [
+            0x37,                   # $8000 SCF
+            0x9F,                   # $8001 SBC A,A
+            0xF3,                   # $8002 DI
+            0xED, 0x5E,             # $8003 IM 2
+            0xED, 0x47,             # $8005 LD I,A
+            0xED, 0x4F,             # $8007 LD R,A
+            0x08,                   # $8009 EX AF,AF'
+            0x3E, 0x01,             # $800A LD A,$01
+            0xA7,                   # $800C AND A
+            0xD3, 0xFE,             # $800D OUT ($FE),A
+            0x01, 0xFD, 0x7F,       # $800F LD BC,$7FFD
+            0xED, 0x79,             # $8012 OUT (C),A
+            0x11, 0xB8, 0x53,       # $8014 LD DE,$53B8
+            0x21, 0x57, 0x63,       # $8017 LD HL,$6357
+            0xD9,                   # $801A EXX
+            0x01, 0x27, 0xEF,       # $801C LD BC,$EF27
+            0x11, 0xF8, 0x13,       # $801E LD DE,$13F8
+            0x21, 0x77, 0x7D,       # $8021 LD HL,$7D77
+            0x31, 0xE9, 0xBE,       # $8024 LD SP,$BEE9
+            0xDD, 0x21, 0x72, 0x0D, # $8027 LD IX,$0D72
+            0xFD, 0x21, 0x2E, 0x27, # $802B LD IY,$272E
+        ]
+        stop = start + len(code)
+        ram[start - 0x4000:stop - 0x4000] = code
+        infile = self.write_z80(ram, machine_id=4, modify=True)[1]
+        outfile = 'out.z80'
+        output, error = self.run_trace(f'-s {start} -S {stop} {infile} {outfile}')
+        exp_output = f"""
+            Stopped at ${stop:04X}
+            Wrote {outfile}
+        """
+        exp_reg = [
+            'A=1',
+            'F=16',
+            'BC=61223',
+            'DE=5112',
+            'HL=32119',
+            'IX=3442',
+            'IY=10030',
+            'SP=48873',
+            'I=255',
+            'R=145',
+            '^A=255',
+            '^F=187',
+            '^BC=32765',
+            '^DE=21432',
+            '^HL=25431',
+            f'PC={stop}'
+        ]
+        exp_state = {f'ay[{n}]=0' for n in range(16)}
+        exp_state.update(('7ffd=1', 'fffd=0', 'border=1', 'fe=1', 'iff=0', 'im=2', 'tstates=35631'))
+        self.assertEqual(dedent(exp_output).strip(), output.rstrip())
+        self.assertEqual(s_fname, outfile)
+        self.assertEqual(code, s_memory[start:stop])
+        self.assertEqual(exp_reg, s_reg)
+        self.assertEqual(exp_state, set(s_state))
+        self.assertEqual(exp_state, set(s_state))
+        self.assertEqual(s_machine, '+2')
 
     @patch.object(trace, 'write_snapshot', mock_write_snapshot)
     def test_ay_tracing_from_z80(self):
         code = [
             0x21, 0x10, 0xFF,       # $8000 LD HL,$FF10
             0x01, 0xFD, 0xFF,       # $8003 LD BC,$FFFD
             0xED, 0x78,             # $8006 IN A,(C)    ; Store value of
```

### Comparing `skoolkit-9.1/tests/test_traceutils.py` & `skoolkit-9.2/tests/test_traceutils.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/tests/test_z80.py` & `skoolkit-9.2/tests/test_z80.py`

 * *Files identical despite different names*

### Comparing `skoolkit-9.1/trace.py` & `skoolkit-9.2/trace.py`

 * *Files identical despite different names*

